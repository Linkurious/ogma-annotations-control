var tz=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var wse=tz((Ose,Zc)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function nz(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var UC={exports:{}},Jp={},$C={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu=Symbol.for("react.element"),rz=Symbol.for("react.portal"),iz=Symbol.for("react.fragment"),sz=Symbol.for("react.strict_mode"),oz=Symbol.for("react.profiler"),az=Symbol.for("react.provider"),lz=Symbol.for("react.context"),cz=Symbol.for("react.forward_ref"),dz=Symbol.for("react.suspense"),uz=Symbol.for("react.memo"),hz=Symbol.for("react.lazy"),Bw=Symbol.iterator;function gz(e){return e===null||typeof e!="object"?null:(e=Bw&&e[Bw]||e["@@iterator"],typeof e=="function"?e:null)}var GC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VC=Object.assign,HC={};function Yl(e,t,n){this.props=e,this.context=t,this.refs=HC,this.updater=n||GC}Yl.prototype.isReactComponent={};Yl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Yl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function WC(){}WC.prototype=Yl.prototype;function Ev(e,t,n){this.props=e,this.context=t,this.refs=HC,this.updater=n||GC}var Sv=Ev.prototype=new WC;Sv.constructor=Ev;VC(Sv,Yl.prototype);Sv.isPureReactComponent=!0;var jw=Array.isArray,XC=Object.prototype.hasOwnProperty,Av={current:null},YC={key:!0,ref:!0,__self:!0,__source:!0};function qC(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)XC.call(t,r)&&!YC.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cu,type:e,key:s,ref:o,props:i,_owner:Av.current}}function pz(e,t){return{$$typeof:cu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kv(e){return typeof e=="object"&&e!==null&&e.$$typeof===cu}function mz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uw=/\/+/g;function af(e,t){return typeof e=="object"&&e!==null&&e.key!=null?mz(""+e.key):t.toString(36)}function Xh(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case cu:case rz:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+af(o,0):r,jw(i)?(n="",e!=null&&(n=e.replace(Uw,"$&/")+"/"),Xh(i,t,n,"",function(c){return c})):i!=null&&(kv(i)&&(i=pz(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Uw,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",jw(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+af(s,a);o+=Xh(s,t,n,l,i)}else if(l=gz(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+af(s,a++),o+=Xh(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Tu(e,t,n){if(e==null)return e;var r=[],i=0;return Xh(e,r,"","",function(s){return t.call(n,s,i++)}),r}function fz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wr={current:null},Yh={transition:null},_z={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:Yh,ReactCurrentOwner:Av};function ZC(){throw Error("act(...) is not supported in production builds of React.")}At.Children={map:Tu,forEach:function(e,t,n){Tu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Tu(e,function(){t++}),t},toArray:function(e){return Tu(e,function(t){return t})||[]},only:function(e){if(!kv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};At.Component=Yl;At.Fragment=iz;At.Profiler=oz;At.PureComponent=Ev;At.StrictMode=sz;At.Suspense=dz;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_z;At.act=ZC;At.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=VC({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Av.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)XC.call(t,l)&&!YC.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:cu,type:e.type,key:i,ref:s,props:r,_owner:o}};At.createContext=function(e){return e={$$typeof:lz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:az,_context:e},e.Consumer=e};At.createElement=qC;At.createFactory=function(e){var t=qC.bind(null,e);return t.type=e,t};At.createRef=function(){return{current:null}};At.forwardRef=function(e){return{$$typeof:cz,render:e}};At.isValidElement=kv;At.lazy=function(e){return{$$typeof:hz,_payload:{_status:-1,_result:e},_init:fz}};At.memo=function(e,t){return{$$typeof:uz,type:e,compare:t===void 0?null:t}};At.startTransition=function(e){var t=Yh.transition;Yh.transition={};try{e()}finally{Yh.transition=t}};At.unstable_act=ZC;At.useCallback=function(e,t){return wr.current.useCallback(e,t)};At.useContext=function(e){return wr.current.useContext(e)};At.useDebugValue=function(){};At.useDeferredValue=function(e){return wr.current.useDeferredValue(e)};At.useEffect=function(e,t){return wr.current.useEffect(e,t)};At.useId=function(){return wr.current.useId()};At.useImperativeHandle=function(e,t,n){return wr.current.useImperativeHandle(e,t,n)};At.useInsertionEffect=function(e,t){return wr.current.useInsertionEffect(e,t)};At.useLayoutEffect=function(e,t){return wr.current.useLayoutEffect(e,t)};At.useMemo=function(e,t){return wr.current.useMemo(e,t)};At.useReducer=function(e,t,n){return wr.current.useReducer(e,t,n)};At.useRef=function(e){return wr.current.useRef(e)};At.useState=function(e){return wr.current.useState(e)};At.useSyncExternalStore=function(e,t,n){return wr.current.useSyncExternalStore(e,t,n)};At.useTransition=function(){return wr.current.useTransition()};At.version="18.3.1";$C.exports=At;var L=$C.exports;const E=nz(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yz=L,vz=Symbol.for("react.element"),xz=Symbol.for("react.fragment"),bz=Object.prototype.hasOwnProperty,wz=yz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ez={key:!0,ref:!0,__self:!0,__source:!0};function JC(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)bz.call(t,r)&&!Ez.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:vz,type:e,key:s,ref:o,props:i,_owner:wz.current}}Jp.Fragment=xz;Jp.jsx=JC;Jp.jsxs=JC;UC.exports=Jp;var at=UC.exports,G0={},QC={exports:{}},Jr={},KC={exports:{}},eT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,Q){var se=$.length;$.push(Q);e:for(;0<se;){var te=se-1>>>1,de=$[te];if(0<i(de,Q))$[te]=Q,$[se]=de,se=te;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],se=$.pop();if(se!==Q){$[0]=se;e:for(var te=0,de=$.length,Ee=de>>>1;te<Ee;){var oe=2*(te+1)-1,_e=$[oe],De=oe+1,We=$[De];if(0>i(_e,se))De<de&&0>i(We,_e)?($[te]=We,$[De]=se,te=De):($[te]=_e,$[oe]=se,te=oe);else if(De<de&&0>i(We,se))$[te]=We,$[De]=se,te=De;else break e}}return Q}function i($,Q){var se=$.sortIndex-Q.sortIndex;return se!==0?se:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,u=null,h=3,g=!1,p=!1,m=!1,f=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v($){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=$)r(c),Q.sortIndex=Q.expirationTime,t(l,Q);else break;Q=n(c)}}function x($){if(m=!1,v($),!p)if(n(l)!==null)p=!0,N(b);else{var Q=n(c);Q!==null&&V(x,Q.startTime-$)}}function b($,Q){p=!1,m&&(m=!1,y(A),A=-1),g=!0;var se=h;try{for(v(Q),u=n(l);u!==null&&(!(u.expirationTime>Q)||$&&!T());){var te=u.callback;if(typeof te=="function"){u.callback=null,h=u.priorityLevel;var de=te(u.expirationTime<=Q);Q=e.unstable_now(),typeof de=="function"?u.callback=de:u===n(l)&&r(l),v(Q)}else r(l);u=n(l)}if(u!==null)var Ee=!0;else{var oe=n(c);oe!==null&&V(x,oe.startTime-Q),Ee=!1}return Ee}finally{u=null,h=se,g=!1}}var w=!1,S=null,A=-1,C=5,k=-1;function T(){return!(e.unstable_now()-k<C)}function M(){if(S!==null){var $=e.unstable_now();k=$;var Q=!0;try{Q=S(!0,$)}finally{Q?D():(w=!1,S=null)}}else w=!1}var D;if(typeof _=="function")D=function(){_(M)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,I=B.port2;B.port1.onmessage=M,D=function(){I.postMessage(null)}}else D=function(){f(M,0)};function N($){S=$,w||(w=!0,D())}function V($,Q){A=f(function(){$(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){p||g||(p=!0,N(b))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var Q=3;break;default:Q=h}var se=h;h=Q;try{return $()}finally{h=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var se=h;h=$;try{return Q()}finally{h=se}},e.unstable_scheduleCallback=function($,Q,se){var te=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?te+se:te):se=te,$){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=se+de,$={id:d++,callback:Q,priorityLevel:$,startTime:se,expirationTime:de,sortIndex:-1},se>te?($.sortIndex=se,t(c,$),n(l)===null&&$===n(c)&&(m?(y(A),A=-1):m=!0,V(x,se-te))):($.sortIndex=de,t(l,$),p||g||(p=!0,N(b))),$},e.unstable_shouldYield=T,e.unstable_wrapCallback=function($){var Q=h;return function(){var se=h;h=Q;try{return $.apply(this,arguments)}finally{h=se}}}})(eT);KC.exports=eT;var Sz=KC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Az=L,qr=Sz;function Pe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tT=new Set,wd={};function Ea(e,t){kl(e,t),kl(e+"Capture",t)}function kl(e,t){for(wd[e]=t,e=0;e<t.length;e++)tT.add(t[e])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),V0=Object.prototype.hasOwnProperty,kz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$w={},Gw={};function Cz(e){return V0.call(Gw,e)?!0:V0.call($w,e)?!1:kz.test(e)?Gw[e]=!0:($w[e]=!0,!1)}function Tz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Nz(e,t,n,r){if(t===null||typeof t>"u"||Tz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Er(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Hn[e]=new Er(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Hn[t]=new Er(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Hn[e]=new Er(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Hn[e]=new Er(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Hn[e]=new Er(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Hn[e]=new Er(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Hn[e]=new Er(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Hn[e]=new Er(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Hn[e]=new Er(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cv=/[\-:]([a-z])/g;function Tv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cv,Tv);Hn[t]=new Er(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cv,Tv);Hn[t]=new Er(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cv,Tv);Hn[t]=new Er(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Hn[e]=new Er(e,1,!1,e.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new Er("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Hn[e]=new Er(e,1,!1,e.toLowerCase(),null,!0,!0)});function Nv(e,t,n,r){var i=Hn.hasOwnProperty(t)?Hn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Nz(t,n,i,r)&&(n=null),r||i===null?Cz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ps=Az.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nu=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),Xa=Symbol.for("react.fragment"),Lv=Symbol.for("react.strict_mode"),H0=Symbol.for("react.profiler"),nT=Symbol.for("react.provider"),rT=Symbol.for("react.context"),Iv=Symbol.for("react.forward_ref"),W0=Symbol.for("react.suspense"),X0=Symbol.for("react.suspense_list"),Pv=Symbol.for("react.memo"),Ws=Symbol.for("react.lazy"),iT=Symbol.for("react.offscreen"),Vw=Symbol.iterator;function tc(e){return e===null||typeof e!="object"?null:(e=Vw&&e[Vw]||e["@@iterator"],typeof e=="function"?e:null)}var pn=Object.assign,lf;function kc(e){if(lf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);lf=t&&t[1]||""}return`
`+lf+e}var cf=!1;function df(e,t){if(!e||cf)return"";cf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{cf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?kc(e):""}function Lz(e){switch(e.tag){case 5:return kc(e.type);case 16:return kc("Lazy");case 13:return kc("Suspense");case 19:return kc("SuspenseList");case 0:case 2:case 15:return e=df(e.type,!1),e;case 11:return e=df(e.type.render,!1),e;case 1:return e=df(e.type,!0),e;default:return""}}function Y0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Xa:return"Fragment";case Wa:return"Portal";case H0:return"Profiler";case Lv:return"StrictMode";case W0:return"Suspense";case X0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rT:return(e.displayName||"Context")+".Consumer";case nT:return(e._context.displayName||"Context")+".Provider";case Iv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pv:return t=e.displayName||null,t!==null?t:Y0(e.type)||"Memo";case Ws:t=e._payload,e=e._init;try{return Y0(e(t))}catch{}}return null}function Iz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Y0(t);case 8:return t===Lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _o(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sT(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Pz(e){var t=sT(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Lu(e){e._valueTracker||(e._valueTracker=Pz(e))}function oT(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=sT(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function kg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function q0(e,t){var n=t.checked;return pn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Hw(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=_o(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function aT(e,t){t=t.checked,t!=null&&Nv(e,"checked",t,!1)}function Z0(e,t){aT(e,t);var n=_o(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?J0(e,t.type,n):t.hasOwnProperty("defaultValue")&&J0(e,t.type,_o(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ww(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function J0(e,t,n){(t!=="number"||kg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Cc=Array.isArray;function ml(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_o(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Q0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Pe(91));return pn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xw(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Pe(92));if(Cc(n)){if(1<n.length)throw Error(Pe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:_o(n)}}function lT(e,t){var n=_o(t.value),r=_o(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Yw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cT(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function K0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cT(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Iu,dT=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Iu=Iu||document.createElement("div"),Iu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Iu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ed(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mz=["Webkit","ms","Moz","O"];Object.keys(Jc).forEach(function(e){Mz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jc[t]=Jc[e]})});function uT(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jc.hasOwnProperty(e)&&Jc[e]?(""+t).trim():t+"px"}function hT(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=uT(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Fz=pn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function e_(e,t){if(t){if(Fz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Pe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Pe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Pe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Pe(62))}}function t_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n_=null;function Mv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var r_=null,fl=null,_l=null;function qw(e){if(e=hu(e)){if(typeof r_!="function")throw Error(Pe(280));var t=e.stateNode;t&&(t=nm(t),r_(e.stateNode,e.type,t))}}function gT(e){fl?_l?_l.push(e):_l=[e]:fl=e}function pT(){if(fl){var e=fl,t=_l;if(_l=fl=null,qw(e),t)for(e=0;e<t.length;e++)qw(t[e])}}function mT(e,t){return e(t)}function fT(){}var uf=!1;function _T(e,t,n){if(uf)return e(t,n);uf=!0;try{return mT(e,t,n)}finally{uf=!1,(fl!==null||_l!==null)&&(fT(),pT())}}function Sd(e,t){var n=e.stateNode;if(n===null)return null;var r=nm(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Pe(231,t,typeof n));return n}var i_=!1;if(Ss)try{var nc={};Object.defineProperty(nc,"passive",{get:function(){i_=!0}}),window.addEventListener("test",nc,nc),window.removeEventListener("test",nc,nc)}catch{i_=!1}function Rz(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Qc=!1,Cg=null,Tg=!1,s_=null,Dz={onError:function(e){Qc=!0,Cg=e}};function zz(e,t,n,r,i,s,o,a,l){Qc=!1,Cg=null,Rz.apply(Dz,arguments)}function Oz(e,t,n,r,i,s,o,a,l){if(zz.apply(this,arguments),Qc){if(Qc){var c=Cg;Qc=!1,Cg=null}else throw Error(Pe(198));Tg||(Tg=!0,s_=c)}}function Sa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function yT(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Zw(e){if(Sa(e)!==e)throw Error(Pe(188))}function Bz(e){var t=e.alternate;if(!t){if(t=Sa(e),t===null)throw Error(Pe(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Zw(i),e;if(s===r)return Zw(i),t;s=s.sibling}throw Error(Pe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Pe(189))}}if(n.alternate!==r)throw Error(Pe(190))}if(n.tag!==3)throw Error(Pe(188));return n.stateNode.current===n?e:t}function vT(e){return e=Bz(e),e!==null?xT(e):null}function xT(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xT(e);if(t!==null)return t;e=e.sibling}return null}var bT=qr.unstable_scheduleCallback,Jw=qr.unstable_cancelCallback,jz=qr.unstable_shouldYield,Uz=qr.unstable_requestPaint,wn=qr.unstable_now,$z=qr.unstable_getCurrentPriorityLevel,Fv=qr.unstable_ImmediatePriority,wT=qr.unstable_UserBlockingPriority,Ng=qr.unstable_NormalPriority,Gz=qr.unstable_LowPriority,ET=qr.unstable_IdlePriority,Qp=null,Qi=null;function Vz(e){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(Qp,e,void 0,(e.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:Xz,Hz=Math.log,Wz=Math.LN2;function Xz(e){return e>>>=0,e===0?32:31-(Hz(e)/Wz|0)|0}var Pu=64,Mu=4194304;function Tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Tc(a):(s&=o,s!==0&&(r=Tc(s)))}else o=n&~i,o!==0?r=Tc(o):s!==0&&(r=Tc(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Li(t),i=1<<n,r|=e[n],t&=~i;return r}function Yz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qz(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Li(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Yz(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function o_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ST(){var e=Pu;return Pu<<=1,!(Pu&4194240)&&(Pu=64),e}function hf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function du(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Li(t),e[t]=n}function Zz(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Li(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Rv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Li(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Gt=0;function AT(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var kT,Dv,CT,TT,NT,a_=!1,Fu=[],oo=null,ao=null,lo=null,Ad=new Map,kd=new Map,Zs=[],Jz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qw(e,t){switch(e){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":Ad.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":kd.delete(t.pointerId)}}function rc(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=hu(t),t!==null&&Dv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Qz(e,t,n,r,i){switch(t){case"focusin":return oo=rc(oo,e,t,n,r,i),!0;case"dragenter":return ao=rc(ao,e,t,n,r,i),!0;case"mouseover":return lo=rc(lo,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ad.set(s,rc(Ad.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,kd.set(s,rc(kd.get(s)||null,e,t,n,r,i)),!0}return!1}function LT(e){var t=$o(e.target);if(t!==null){var n=Sa(t);if(n!==null){if(t=n.tag,t===13){if(t=yT(n),t!==null){e.blockedOn=t,NT(e.priority,function(){CT(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=l_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);n_=r,n.target.dispatchEvent(r),n_=null}else return t=hu(n),t!==null&&Dv(t),e.blockedOn=n,!1;t.shift()}return!0}function Kw(e,t,n){qh(e)&&n.delete(t)}function Kz(){a_=!1,oo!==null&&qh(oo)&&(oo=null),ao!==null&&qh(ao)&&(ao=null),lo!==null&&qh(lo)&&(lo=null),Ad.forEach(Kw),kd.forEach(Kw)}function ic(e,t){e.blockedOn===t&&(e.blockedOn=null,a_||(a_=!0,qr.unstable_scheduleCallback(qr.unstable_NormalPriority,Kz)))}function Cd(e){function t(i){return ic(i,e)}if(0<Fu.length){ic(Fu[0],e);for(var n=1;n<Fu.length;n++){var r=Fu[n];r.blockedOn===e&&(r.blockedOn=null)}}for(oo!==null&&ic(oo,e),ao!==null&&ic(ao,e),lo!==null&&ic(lo,e),Ad.forEach(t),kd.forEach(t),n=0;n<Zs.length;n++)r=Zs[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Zs.length&&(n=Zs[0],n.blockedOn===null);)LT(n),n.blockedOn===null&&Zs.shift()}var yl=Ps.ReactCurrentBatchConfig,Ig=!0;function e5(e,t,n,r){var i=Gt,s=yl.transition;yl.transition=null;try{Gt=1,zv(e,t,n,r)}finally{Gt=i,yl.transition=s}}function t5(e,t,n,r){var i=Gt,s=yl.transition;yl.transition=null;try{Gt=4,zv(e,t,n,r)}finally{Gt=i,yl.transition=s}}function zv(e,t,n,r){if(Ig){var i=l_(e,t,n,r);if(i===null)wf(e,t,r,Pg,n),Qw(e,r);else if(Qz(i,e,t,n,r))r.stopPropagation();else if(Qw(e,r),t&4&&-1<Jz.indexOf(e)){for(;i!==null;){var s=hu(i);if(s!==null&&kT(s),s=l_(e,t,n,r),s===null&&wf(e,t,r,Pg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wf(e,t,r,null,n)}}var Pg=null;function l_(e,t,n,r){if(Pg=null,e=Mv(r),e=$o(e),e!==null)if(t=Sa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=yT(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pg=e,null}function IT(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($z()){case Fv:return 1;case wT:return 4;case Ng:case Gz:return 16;case ET:return 536870912;default:return 16}default:return 16}}var Qs=null,Ov=null,Zh=null;function PT(){if(Zh)return Zh;var e,t=Ov,n=t.length,r,i="value"in Qs?Qs.value:Qs.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Zh=i.slice(e,1<r?1-r:void 0)}function Jh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ru(){return!0}function eE(){return!1}function Qr(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ru:eE,this.isPropagationStopped=eE,this}return pn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ru)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ru)},persist:function(){},isPersistent:Ru}),t}var ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bv=Qr(ql),uu=pn({},ql,{view:0,detail:0}),n5=Qr(uu),gf,pf,sc,Kp=pn({},uu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sc&&(sc&&e.type==="mousemove"?(gf=e.screenX-sc.screenX,pf=e.screenY-sc.screenY):pf=gf=0,sc=e),gf)},movementY:function(e){return"movementY"in e?e.movementY:pf}}),tE=Qr(Kp),r5=pn({},Kp,{dataTransfer:0}),i5=Qr(r5),s5=pn({},uu,{relatedTarget:0}),mf=Qr(s5),o5=pn({},ql,{animationName:0,elapsedTime:0,pseudoElement:0}),a5=Qr(o5),l5=pn({},ql,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),c5=Qr(l5),d5=pn({},ql,{data:0}),nE=Qr(d5),u5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},g5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=g5[e])?!!t[e]:!1}function jv(){return p5}var m5=pn({},uu,{key:function(e){if(e.key){var t=u5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?h5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jv,charCode:function(e){return e.type==="keypress"?Jh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),f5=Qr(m5),_5=pn({},Kp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rE=Qr(_5),y5=pn({},uu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jv}),v5=Qr(y5),x5=pn({},ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),b5=Qr(x5),w5=pn({},Kp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),E5=Qr(w5),S5=[9,13,27,32],Uv=Ss&&"CompositionEvent"in window,Kc=null;Ss&&"documentMode"in document&&(Kc=document.documentMode);var A5=Ss&&"TextEvent"in window&&!Kc,MT=Ss&&(!Uv||Kc&&8<Kc&&11>=Kc),iE=" ",sE=!1;function FT(e,t){switch(e){case"keyup":return S5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function RT(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ya=!1;function k5(e,t){switch(e){case"compositionend":return RT(t);case"keypress":return t.which!==32?null:(sE=!0,iE);case"textInput":return e=t.data,e===iE&&sE?null:e;default:return null}}function C5(e,t){if(Ya)return e==="compositionend"||!Uv&&FT(e,t)?(e=PT(),Zh=Ov=Qs=null,Ya=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return MT&&t.locale!=="ko"?null:t.data;default:return null}}var T5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!T5[e.type]:t==="textarea"}function DT(e,t,n,r){gT(r),t=Mg(t,"onChange"),0<t.length&&(n=new Bv("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ed=null,Td=null;function N5(e){XT(e,0)}function em(e){var t=Ja(e);if(oT(t))return e}function L5(e,t){if(e==="change")return t}var zT=!1;if(Ss){var ff;if(Ss){var _f="oninput"in document;if(!_f){var aE=document.createElement("div");aE.setAttribute("oninput","return;"),_f=typeof aE.oninput=="function"}ff=_f}else ff=!1;zT=ff&&(!document.documentMode||9<document.documentMode)}function lE(){ed&&(ed.detachEvent("onpropertychange",OT),Td=ed=null)}function OT(e){if(e.propertyName==="value"&&em(Td)){var t=[];DT(t,Td,e,Mv(e)),_T(N5,t)}}function I5(e,t,n){e==="focusin"?(lE(),ed=t,Td=n,ed.attachEvent("onpropertychange",OT)):e==="focusout"&&lE()}function P5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return em(Td)}function M5(e,t){if(e==="click")return em(t)}function F5(e,t){if(e==="input"||e==="change")return em(t)}function R5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pi=typeof Object.is=="function"?Object.is:R5;function Nd(e,t){if(Pi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!V0.call(t,i)||!Pi(e[i],t[i]))return!1}return!0}function cE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dE(e,t){var n=cE(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cE(n)}}function BT(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?BT(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jT(){for(var e=window,t=kg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=kg(e.document)}return t}function $v(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function D5(e){var t=jT(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&BT(n.ownerDocument.documentElement,n)){if(r!==null&&$v(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dE(n,s);var o=dE(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var z5=Ss&&"documentMode"in document&&11>=document.documentMode,qa=null,c_=null,td=null,d_=!1;function uE(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;d_||qa==null||qa!==kg(r)||(r=qa,"selectionStart"in r&&$v(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),td&&Nd(td,r)||(td=r,r=Mg(c_,"onSelect"),0<r.length&&(t=new Bv("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qa)))}function Du(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Za={animationend:Du("Animation","AnimationEnd"),animationiteration:Du("Animation","AnimationIteration"),animationstart:Du("Animation","AnimationStart"),transitionend:Du("Transition","TransitionEnd")},yf={},UT={};Ss&&(UT=document.createElement("div").style,"AnimationEvent"in window||(delete Za.animationend.animation,delete Za.animationiteration.animation,delete Za.animationstart.animation),"TransitionEvent"in window||delete Za.transitionend.transition);function tm(e){if(yf[e])return yf[e];if(!Za[e])return e;var t=Za[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in UT)return yf[e]=t[n];return e}var $T=tm("animationend"),GT=tm("animationiteration"),VT=tm("animationstart"),HT=tm("transitionend"),WT=new Map,hE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(e,t){WT.set(e,t),Ea(t,[e])}for(var vf=0;vf<hE.length;vf++){var xf=hE[vf],O5=xf.toLowerCase(),B5=xf[0].toUpperCase()+xf.slice(1);Ao(O5,"on"+B5)}Ao($T,"onAnimationEnd");Ao(GT,"onAnimationIteration");Ao(VT,"onAnimationStart");Ao("dblclick","onDoubleClick");Ao("focusin","onFocus");Ao("focusout","onBlur");Ao(HT,"onTransitionEnd");kl("onMouseEnter",["mouseout","mouseover"]);kl("onMouseLeave",["mouseout","mouseover"]);kl("onPointerEnter",["pointerout","pointerover"]);kl("onPointerLeave",["pointerout","pointerover"]);Ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ea("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j5=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nc));function gE(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Oz(r,t,void 0,e),e.currentTarget=null}function XT(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;gE(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;gE(i,a,c),s=l}}}if(Tg)throw e=s_,Tg=!1,s_=null,e}function Kt(e,t){var n=t[m_];n===void 0&&(n=t[m_]=new Set);var r=e+"__bubble";n.has(r)||(YT(t,e,2,!1),n.add(r))}function bf(e,t,n){var r=0;t&&(r|=4),YT(n,e,r,t)}var zu="_reactListening"+Math.random().toString(36).slice(2);function Ld(e){if(!e[zu]){e[zu]=!0,tT.forEach(function(n){n!=="selectionchange"&&(j5.has(n)||bf(n,!1,e),bf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zu]||(t[zu]=!0,bf("selectionchange",!1,t))}}function YT(e,t,n,r){switch(IT(t)){case 1:var i=e5;break;case 4:i=t5;break;default:i=zv}n=i.bind(null,t,n,e),i=void 0,!i_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function wf(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=$o(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_T(function(){var c=s,d=Mv(n),u=[];e:{var h=WT.get(e);if(h!==void 0){var g=Bv,p=e;switch(e){case"keypress":if(Jh(n)===0)break e;case"keydown":case"keyup":g=f5;break;case"focusin":p="focus",g=mf;break;case"focusout":p="blur",g=mf;break;case"beforeblur":case"afterblur":g=mf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=tE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=i5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=v5;break;case $T:case GT:case VT:g=a5;break;case HT:g=b5;break;case"scroll":g=n5;break;case"wheel":g=E5;break;case"copy":case"cut":case"paste":g=c5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=rE}var m=(t&4)!==0,f=!m&&e==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var _=c,v;_!==null;){v=_;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,y!==null&&(x=Sd(_,y),x!=null&&m.push(Id(_,x,v)))),f)break;_=_.return}0<m.length&&(h=new g(h,p,null,n,d),u.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==n_&&(p=n.relatedTarget||n.fromElement)&&($o(p)||p[As]))break e;if((g||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=c,p=p?$o(p):null,p!==null&&(f=Sa(p),p!==f||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=c),g!==p)){if(m=tE,x="onMouseLeave",y="onMouseEnter",_="mouse",(e==="pointerout"||e==="pointerover")&&(m=rE,x="onPointerLeave",y="onPointerEnter",_="pointer"),f=g==null?h:Ja(g),v=p==null?h:Ja(p),h=new m(x,_+"leave",g,n,d),h.target=f,h.relatedTarget=v,x=null,$o(d)===c&&(m=new m(y,_+"enter",p,n,d),m.target=v,m.relatedTarget=f,x=m),f=x,g&&p)t:{for(m=g,y=p,_=0,v=m;v;v=Fa(v))_++;for(v=0,x=y;x;x=Fa(x))v++;for(;0<_-v;)m=Fa(m),_--;for(;0<v-_;)y=Fa(y),v--;for(;_--;){if(m===y||y!==null&&m===y.alternate)break t;m=Fa(m),y=Fa(y)}m=null}else m=null;g!==null&&pE(u,h,g,m,!1),p!==null&&f!==null&&pE(u,f,p,m,!0)}}e:{if(h=c?Ja(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var b=L5;else if(oE(h))if(zT)b=F5;else{b=P5;var w=I5}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=M5);if(b&&(b=b(e,c))){DT(u,b,n,d);break e}w&&w(e,h,c),e==="focusout"&&(w=h._wrapperState)&&w.controlled&&h.type==="number"&&J0(h,"number",h.value)}switch(w=c?Ja(c):window,e){case"focusin":(oE(w)||w.contentEditable==="true")&&(qa=w,c_=c,td=null);break;case"focusout":td=c_=qa=null;break;case"mousedown":d_=!0;break;case"contextmenu":case"mouseup":case"dragend":d_=!1,uE(u,n,d);break;case"selectionchange":if(z5)break;case"keydown":case"keyup":uE(u,n,d)}var S;if(Uv)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Ya?FT(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(MT&&n.locale!=="ko"&&(Ya||A!=="onCompositionStart"?A==="onCompositionEnd"&&Ya&&(S=PT()):(Qs=d,Ov="value"in Qs?Qs.value:Qs.textContent,Ya=!0)),w=Mg(c,A),0<w.length&&(A=new nE(A,e,null,n,d),u.push({event:A,listeners:w}),S?A.data=S:(S=RT(n),S!==null&&(A.data=S)))),(S=A5?k5(e,n):C5(e,n))&&(c=Mg(c,"onBeforeInput"),0<c.length&&(d=new nE("onBeforeInput","beforeinput",null,n,d),u.push({event:d,listeners:c}),d.data=S))}XT(u,t)})}function Id(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mg(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Sd(e,n),s!=null&&r.unshift(Id(e,s,i)),s=Sd(e,t),s!=null&&r.push(Id(e,s,i))),e=e.return}return r}function Fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pE(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Sd(n,s),l!=null&&o.unshift(Id(n,l,a))):i||(l=Sd(n,s),l!=null&&o.push(Id(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var U5=/\r\n?/g,$5=/\u0000|\uFFFD/g;function mE(e){return(typeof e=="string"?e:""+e).replace(U5,`
`).replace($5,"")}function Ou(e,t,n){if(t=mE(t),mE(e)!==t&&n)throw Error(Pe(425))}function Fg(){}var u_=null,h_=null;function g_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var p_=typeof setTimeout=="function"?setTimeout:void 0,G5=typeof clearTimeout=="function"?clearTimeout:void 0,fE=typeof Promise=="function"?Promise:void 0,V5=typeof queueMicrotask=="function"?queueMicrotask:typeof fE<"u"?function(e){return fE.resolve(null).then(e).catch(H5)}:p_;function H5(e){setTimeout(function(){throw e})}function Ef(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Cd(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cd(t)}function co(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _E(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Zl=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Zl,Pd="__reactProps$"+Zl,As="__reactContainer$"+Zl,m_="__reactEvents$"+Zl,W5="__reactListeners$"+Zl,X5="__reactHandles$"+Zl;function $o(e){var t=e[Xi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[As]||n[Xi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=_E(e);e!==null;){if(n=e[Xi])return n;e=_E(e)}return t}e=n,n=e.parentNode}return null}function hu(e){return e=e[Xi]||e[As],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ja(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Pe(33))}function nm(e){return e[Pd]||null}var f_=[],Qa=-1;function ko(e){return{current:e}}function on(e){0>Qa||(e.current=f_[Qa],f_[Qa]=null,Qa--)}function qt(e,t){Qa++,f_[Qa]=e.current,e.current=t}var yo={},sr=ko(yo),Fr=ko(!1),ua=yo;function Cl(e,t){var n=e.type.contextTypes;if(!n)return yo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rr(e){return e=e.childContextTypes,e!=null}function Rg(){on(Fr),on(sr)}function yE(e,t,n){if(sr.current!==yo)throw Error(Pe(168));qt(sr,t),qt(Fr,n)}function qT(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Pe(108,Iz(e)||"Unknown",i));return pn({},n,r)}function Dg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yo,ua=sr.current,qt(sr,e),qt(Fr,Fr.current),!0}function vE(e,t,n){var r=e.stateNode;if(!r)throw Error(Pe(169));n?(e=qT(e,t,ua),r.__reactInternalMemoizedMergedChildContext=e,on(Fr),on(sr),qt(sr,e)):on(Fr),qt(Fr,n)}var ds=null,rm=!1,Sf=!1;function ZT(e){ds===null?ds=[e]:ds.push(e)}function Y5(e){rm=!0,ZT(e)}function Co(){if(!Sf&&ds!==null){Sf=!0;var e=0,t=Gt;try{var n=ds;for(Gt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ds=null,rm=!1}catch(i){throw ds!==null&&(ds=ds.slice(e+1)),bT(Fv,Co),i}finally{Gt=t,Sf=!1}}return null}var Ka=[],el=0,zg=null,Og=0,oi=[],ai=0,ha=null,gs=1,ps="";function Fo(e,t){Ka[el++]=Og,Ka[el++]=zg,zg=e,Og=t}function JT(e,t,n){oi[ai++]=gs,oi[ai++]=ps,oi[ai++]=ha,ha=e;var r=gs;e=ps;var i=32-Li(r)-1;r&=~(1<<i),n+=1;var s=32-Li(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,gs=1<<32-Li(t)+i|n<<i|r,ps=s+e}else gs=1<<s|n<<i|r,ps=e}function Gv(e){e.return!==null&&(Fo(e,1),JT(e,1,0))}function Vv(e){for(;e===zg;)zg=Ka[--el],Ka[el]=null,Og=Ka[--el],Ka[el]=null;for(;e===ha;)ha=oi[--ai],oi[ai]=null,ps=oi[--ai],oi[ai]=null,gs=oi[--ai],oi[ai]=null}var Yr=null,Xr=null,cn=!1,Ti=null;function QT(e,t){var n=li(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xE(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yr=e,Xr=co(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yr=e,Xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ha!==null?{id:gs,overflow:ps}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=li(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yr=e,Xr=null,!0):!1;default:return!1}}function __(e){return(e.mode&1)!==0&&(e.flags&128)===0}function y_(e){if(cn){var t=Xr;if(t){var n=t;if(!xE(e,t)){if(__(e))throw Error(Pe(418));t=co(n.nextSibling);var r=Yr;t&&xE(e,t)?QT(r,n):(e.flags=e.flags&-4097|2,cn=!1,Yr=e)}}else{if(__(e))throw Error(Pe(418));e.flags=e.flags&-4097|2,cn=!1,Yr=e}}}function bE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yr=e}function Bu(e){if(e!==Yr)return!1;if(!cn)return bE(e),cn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!g_(e.type,e.memoizedProps)),t&&(t=Xr)){if(__(e))throw KT(),Error(Pe(418));for(;t;)QT(e,t),t=co(t.nextSibling)}if(bE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Pe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xr=co(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xr=null}}else Xr=Yr?co(e.stateNode.nextSibling):null;return!0}function KT(){for(var e=Xr;e;)e=co(e.nextSibling)}function Tl(){Xr=Yr=null,cn=!1}function Hv(e){Ti===null?Ti=[e]:Ti.push(e)}var q5=Ps.ReactCurrentBatchConfig;function oc(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Pe(309));var r=n.stateNode}if(!r)throw Error(Pe(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Pe(284));if(!n._owner)throw Error(Pe(290,e))}return e}function ju(e,t){throw e=Object.prototype.toString.call(t),Error(Pe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wE(e){var t=e._init;return t(e._payload)}function eN(e){function t(y,_){if(e){var v=y.deletions;v===null?(y.deletions=[_],y.flags|=16):v.push(_)}}function n(y,_){if(!e)return null;for(;_!==null;)t(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function i(y,_){return y=po(y,_),y.index=0,y.sibling=null,y}function s(y,_,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<_?(y.flags|=2,_):v):(y.flags|=2,_)):(y.flags|=1048576,_)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,_,v,x){return _===null||_.tag!==6?(_=If(v,y.mode,x),_.return=y,_):(_=i(_,v),_.return=y,_)}function l(y,_,v,x){var b=v.type;return b===Xa?d(y,_,v.props.children,x,v.key):_!==null&&(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ws&&wE(b)===_.type)?(x=i(_,v.props),x.ref=oc(y,_,v),x.return=y,x):(x=ig(v.type,v.key,v.props,null,y.mode,x),x.ref=oc(y,_,v),x.return=y,x)}function c(y,_,v,x){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=Pf(v,y.mode,x),_.return=y,_):(_=i(_,v.children||[]),_.return=y,_)}function d(y,_,v,x,b){return _===null||_.tag!==7?(_=na(v,y.mode,x,b),_.return=y,_):(_=i(_,v),_.return=y,_)}function u(y,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=If(""+_,y.mode,v),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Nu:return v=ig(_.type,_.key,_.props,null,y.mode,v),v.ref=oc(y,null,_),v.return=y,v;case Wa:return _=Pf(_,y.mode,v),_.return=y,_;case Ws:var x=_._init;return u(y,x(_._payload),v)}if(Cc(_)||tc(_))return _=na(_,y.mode,v,null),_.return=y,_;ju(y,_)}return null}function h(y,_,v,x){var b=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(y,_,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Nu:return v.key===b?l(y,_,v,x):null;case Wa:return v.key===b?c(y,_,v,x):null;case Ws:return b=v._init,h(y,_,b(v._payload),x)}if(Cc(v)||tc(v))return b!==null?null:d(y,_,v,x,null);ju(y,v)}return null}function g(y,_,v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return y=y.get(v)||null,a(_,y,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nu:return y=y.get(x.key===null?v:x.key)||null,l(_,y,x,b);case Wa:return y=y.get(x.key===null?v:x.key)||null,c(_,y,x,b);case Ws:var w=x._init;return g(y,_,v,w(x._payload),b)}if(Cc(x)||tc(x))return y=y.get(v)||null,d(_,y,x,b,null);ju(_,x)}return null}function p(y,_,v,x){for(var b=null,w=null,S=_,A=_=0,C=null;S!==null&&A<v.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var k=h(y,S,v[A],x);if(k===null){S===null&&(S=C);break}e&&S&&k.alternate===null&&t(y,S),_=s(k,_,A),w===null?b=k:w.sibling=k,w=k,S=C}if(A===v.length)return n(y,S),cn&&Fo(y,A),b;if(S===null){for(;A<v.length;A++)S=u(y,v[A],x),S!==null&&(_=s(S,_,A),w===null?b=S:w.sibling=S,w=S);return cn&&Fo(y,A),b}for(S=r(y,S);A<v.length;A++)C=g(S,y,A,v[A],x),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?A:C.key),_=s(C,_,A),w===null?b=C:w.sibling=C,w=C);return e&&S.forEach(function(T){return t(y,T)}),cn&&Fo(y,A),b}function m(y,_,v,x){var b=tc(v);if(typeof b!="function")throw Error(Pe(150));if(v=b.call(v),v==null)throw Error(Pe(151));for(var w=b=null,S=_,A=_=0,C=null,k=v.next();S!==null&&!k.done;A++,k=v.next()){S.index>A?(C=S,S=null):C=S.sibling;var T=h(y,S,k.value,x);if(T===null){S===null&&(S=C);break}e&&S&&T.alternate===null&&t(y,S),_=s(T,_,A),w===null?b=T:w.sibling=T,w=T,S=C}if(k.done)return n(y,S),cn&&Fo(y,A),b;if(S===null){for(;!k.done;A++,k=v.next())k=u(y,k.value,x),k!==null&&(_=s(k,_,A),w===null?b=k:w.sibling=k,w=k);return cn&&Fo(y,A),b}for(S=r(y,S);!k.done;A++,k=v.next())k=g(S,y,A,k.value,x),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?A:k.key),_=s(k,_,A),w===null?b=k:w.sibling=k,w=k);return e&&S.forEach(function(M){return t(y,M)}),cn&&Fo(y,A),b}function f(y,_,v,x){if(typeof v=="object"&&v!==null&&v.type===Xa&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Nu:e:{for(var b=v.key,w=_;w!==null;){if(w.key===b){if(b=v.type,b===Xa){if(w.tag===7){n(y,w.sibling),_=i(w,v.props.children),_.return=y,y=_;break e}}else if(w.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ws&&wE(b)===w.type){n(y,w.sibling),_=i(w,v.props),_.ref=oc(y,w,v),_.return=y,y=_;break e}n(y,w);break}else t(y,w);w=w.sibling}v.type===Xa?(_=na(v.props.children,y.mode,x,v.key),_.return=y,y=_):(x=ig(v.type,v.key,v.props,null,y.mode,x),x.ref=oc(y,_,v),x.return=y,y=x)}return o(y);case Wa:e:{for(w=v.key;_!==null;){if(_.key===w)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){n(y,_.sibling),_=i(_,v.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else t(y,_);_=_.sibling}_=Pf(v,y.mode,x),_.return=y,y=_}return o(y);case Ws:return w=v._init,f(y,_,w(v._payload),x)}if(Cc(v))return p(y,_,v,x);if(tc(v))return m(y,_,v,x);ju(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(n(y,_.sibling),_=i(_,v),_.return=y,y=_):(n(y,_),_=If(v,y.mode,x),_.return=y,y=_),o(y)):n(y,_)}return f}var Nl=eN(!0),tN=eN(!1),Bg=ko(null),jg=null,tl=null,Wv=null;function Xv(){Wv=tl=jg=null}function Yv(e){var t=Bg.current;on(Bg),e._currentValue=t}function v_(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function vl(e,t){jg=e,Wv=tl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mr=!0),e.firstContext=null)}function gi(e){var t=e._currentValue;if(Wv!==e)if(e={context:e,memoizedValue:t,next:null},tl===null){if(jg===null)throw Error(Pe(308));tl=e,jg.dependencies={lanes:0,firstContext:e}}else tl=tl.next=e;return t}var Go=null;function qv(e){Go===null?Go=[e]:Go.push(e)}function nN(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,qv(t)):(n.next=i.next,i.next=n),t.interleaved=n,ks(e,r)}function ks(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xs=!1;function Zv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ys(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function uo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Lt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ks(e,n)}return i=r.interleaved,i===null?(t.next=t,qv(r)):(t.next=i.next,i.next=t),r.interleaved=t,ks(e,n)}function Qh(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rv(e,n)}}function EE(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ug(e,t,n,r){var i=e.updateQueue;Xs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var u=i.baseState;o=0,d=c=l=null,a=s;do{var h=a.lane,g=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,g=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){u=p.call(g,u,h);break e}u=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(g,u,h):p,h==null)break e;u=pn({},u,h);break e;case 2:Xs=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,l=u):d=d.next=g,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);pa|=o,e.lanes=o,e.memoizedState=u}}function SE(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Pe(191,i));i.call(r)}}}var gu={},Ki=ko(gu),Md=ko(gu),Fd=ko(gu);function Vo(e){if(e===gu)throw Error(Pe(174));return e}function Jv(e,t){switch(qt(Fd,t),qt(Md,e),qt(Ki,gu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:K0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=K0(t,e)}on(Ki),qt(Ki,t)}function Ll(){on(Ki),on(Md),on(Fd)}function iN(e){Vo(Fd.current);var t=Vo(Ki.current),n=K0(t,e.type);t!==n&&(qt(Md,e),qt(Ki,n))}function Qv(e){Md.current===e&&(on(Ki),on(Md))}var hn=ko(0);function $g(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Af=[];function Kv(){for(var e=0;e<Af.length;e++)Af[e]._workInProgressVersionPrimary=null;Af.length=0}var Kh=Ps.ReactCurrentDispatcher,kf=Ps.ReactCurrentBatchConfig,ga=0,gn=null,In=null,Dn=null,Gg=!1,nd=!1,Rd=0,Z5=0;function Jn(){throw Error(Pe(321))}function ex(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Pi(e[n],t[n]))return!1;return!0}function tx(e,t,n,r,i,s){if(ga=s,gn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Kh.current=e===null||e.memoizedState===null?eO:tO,e=n(r,i),nd){s=0;do{if(nd=!1,Rd=0,25<=s)throw Error(Pe(301));s+=1,Dn=In=null,t.updateQueue=null,Kh.current=nO,e=n(r,i)}while(nd)}if(Kh.current=Vg,t=In!==null&&In.next!==null,ga=0,Dn=In=gn=null,Gg=!1,t)throw Error(Pe(300));return e}function nx(){var e=Rd!==0;return Rd=0,e}function Hi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?gn.memoizedState=Dn=e:Dn=Dn.next=e,Dn}function pi(){if(In===null){var e=gn.alternate;e=e!==null?e.memoizedState:null}else e=In.next;var t=Dn===null?gn.memoizedState:Dn.next;if(t!==null)Dn=t,In=e;else{if(e===null)throw Error(Pe(310));In=e,e={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Dn===null?gn.memoizedState=Dn=e:Dn=Dn.next=e}return Dn}function Dd(e,t){return typeof t=="function"?t(e):t}function Cf(e){var t=pi(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=In,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((ga&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var u={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=u,o=r):l=l.next=u,gn.lanes|=d,pa|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Pi(r,t.memoizedState)||(Mr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,gn.lanes|=s,pa|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Tf(e){var t=pi(),n=t.queue;if(n===null)throw Error(Pe(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Pi(s,t.memoizedState)||(Mr=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function sN(){}function oN(e,t){var n=gn,r=pi(),i=t(),s=!Pi(r.memoizedState,i);if(s&&(r.memoizedState=i,Mr=!0),r=r.queue,rx(cN.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Dn!==null&&Dn.memoizedState.tag&1){if(n.flags|=2048,zd(9,lN.bind(null,n,r,i,t),void 0,null),zn===null)throw Error(Pe(349));ga&30||aN(n,t,i)}return i}function aN(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=gn.updateQueue,t===null?(t={lastEffect:null,stores:null},gn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function lN(e,t,n,r){t.value=n,t.getSnapshot=r,dN(t)&&uN(e)}function cN(e,t,n){return n(function(){dN(t)&&uN(e)})}function dN(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Pi(e,n)}catch{return!0}}function uN(e){var t=ks(e,1);t!==null&&Ii(t,e,1,-1)}function AE(e){var t=Hi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dd,lastRenderedState:e},t.queue=e,e=e.dispatch=K5.bind(null,gn,e),[t.memoizedState,e]}function zd(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=gn.updateQueue,t===null?(t={lastEffect:null,stores:null},gn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function hN(){return pi().memoizedState}function eg(e,t,n,r){var i=Hi();gn.flags|=e,i.memoizedState=zd(1|t,n,void 0,r===void 0?null:r)}function im(e,t,n,r){var i=pi();r=r===void 0?null:r;var s=void 0;if(In!==null){var o=In.memoizedState;if(s=o.destroy,r!==null&&ex(r,o.deps)){i.memoizedState=zd(t,n,s,r);return}}gn.flags|=e,i.memoizedState=zd(1|t,n,s,r)}function kE(e,t){return eg(8390656,8,e,t)}function rx(e,t){return im(2048,8,e,t)}function gN(e,t){return im(4,2,e,t)}function pN(e,t){return im(4,4,e,t)}function mN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fN(e,t,n){return n=n!=null?n.concat([e]):null,im(4,4,mN.bind(null,t,e),n)}function ix(){}function _N(e,t){var n=pi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ex(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function yN(e,t){var n=pi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ex(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function vN(e,t,n){return ga&21?(Pi(n,t)||(n=ST(),gn.lanes|=n,pa|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mr=!0),e.memoizedState=n)}function J5(e,t){var n=Gt;Gt=n!==0&&4>n?n:4,e(!0);var r=kf.transition;kf.transition={};try{e(!1),t()}finally{Gt=n,kf.transition=r}}function xN(){return pi().memoizedState}function Q5(e,t,n){var r=go(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bN(e))wN(t,n);else if(n=nN(e,t,n,r),n!==null){var i=br();Ii(n,e,r,i),EN(n,t,r)}}function K5(e,t,n){var r=go(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bN(e))wN(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pi(a,o)){var l=t.interleaved;l===null?(i.next=i,qv(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=nN(e,t,i,r),n!==null&&(i=br(),Ii(n,e,r,i),EN(n,t,r))}}function bN(e){var t=e.alternate;return e===gn||t!==null&&t===gn}function wN(e,t){nd=Gg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function EN(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rv(e,n)}}var Vg={readContext:gi,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},eO={readContext:gi,useCallback:function(e,t){return Hi().memoizedState=[e,t===void 0?null:t],e},useContext:gi,useEffect:kE,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,eg(4194308,4,mN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return eg(4194308,4,e,t)},useInsertionEffect:function(e,t){return eg(4,2,e,t)},useMemo:function(e,t){var n=Hi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Hi();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Q5.bind(null,gn,e),[r.memoizedState,e]},useRef:function(e){var t=Hi();return e={current:e},t.memoizedState=e},useState:AE,useDebugValue:ix,useDeferredValue:function(e){return Hi().memoizedState=e},useTransition:function(){var e=AE(!1),t=e[0];return e=J5.bind(null,e[1]),Hi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gn,i=Hi();if(cn){if(n===void 0)throw Error(Pe(407));n=n()}else{if(n=t(),zn===null)throw Error(Pe(349));ga&30||aN(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,kE(cN.bind(null,r,s,e),[e]),r.flags|=2048,zd(9,lN.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Hi(),t=zn.identifierPrefix;if(cn){var n=ps,r=gs;n=(r&~(1<<32-Li(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Rd++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Z5++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tO={readContext:gi,useCallback:_N,useContext:gi,useEffect:rx,useImperativeHandle:fN,useInsertionEffect:gN,useLayoutEffect:pN,useMemo:yN,useReducer:Cf,useRef:hN,useState:function(){return Cf(Dd)},useDebugValue:ix,useDeferredValue:function(e){var t=pi();return vN(t,In.memoizedState,e)},useTransition:function(){var e=Cf(Dd)[0],t=pi().memoizedState;return[e,t]},useMutableSource:sN,useSyncExternalStore:oN,useId:xN,unstable_isNewReconciler:!1},nO={readContext:gi,useCallback:_N,useContext:gi,useEffect:rx,useImperativeHandle:fN,useInsertionEffect:gN,useLayoutEffect:pN,useMemo:yN,useReducer:Tf,useRef:hN,useState:function(){return Tf(Dd)},useDebugValue:ix,useDeferredValue:function(e){var t=pi();return In===null?t.memoizedState=e:vN(t,In.memoizedState,e)},useTransition:function(){var e=Tf(Dd)[0],t=pi().memoizedState;return[e,t]},useMutableSource:sN,useSyncExternalStore:oN,useId:xN,unstable_isNewReconciler:!1};function Si(e,t){if(e&&e.defaultProps){t=pn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function x_(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:pn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var sm={isMounted:function(e){return(e=e._reactInternals)?Sa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=br(),i=go(e),s=ys(r,i);s.payload=t,n!=null&&(s.callback=n),t=uo(e,s,i),t!==null&&(Ii(t,e,i,r),Qh(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=br(),i=go(e),s=ys(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=uo(e,s,i),t!==null&&(Ii(t,e,i,r),Qh(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=br(),r=go(e),i=ys(n,r);i.tag=2,t!=null&&(i.callback=t),t=uo(e,i,r),t!==null&&(Ii(t,e,r,n),Qh(t,e,r))}};function CE(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Nd(n,r)||!Nd(i,s):!0}function SN(e,t,n){var r=!1,i=yo,s=t.contextType;return typeof s=="object"&&s!==null?s=gi(s):(i=Rr(t)?ua:sr.current,r=t.contextTypes,s=(r=r!=null)?Cl(e,i):yo),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=sm,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function TE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sm.enqueueReplaceState(t,t.state,null)}function b_(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Zv(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=gi(s):(s=Rr(t)?ua:sr.current,i.context=Cl(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(x_(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&sm.enqueueReplaceState(i,i.state,null),Ug(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Il(e,t){try{var n="",r=t;do n+=Lz(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Nf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function w_(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rO=typeof WeakMap=="function"?WeakMap:Map;function AN(e,t,n){n=ys(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wg||(Wg=!0,P_=r),w_(e,t)},n}function kN(e,t,n){n=ys(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){w_(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){w_(e,t),typeof r!="function"&&(ho===null?ho=new Set([this]):ho.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function NE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new rO;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=_O.bind(null,e,t,n),t.then(e,e))}function LE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function IE(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ys(-1,1),t.tag=2,uo(n,t,1))),n.lanes|=1),e)}var iO=Ps.ReactCurrentOwner,Mr=!1;function fr(e,t,n,r){t.child=e===null?tN(t,null,n,r):Nl(t,e.child,n,r)}function PE(e,t,n,r,i){n=n.render;var s=t.ref;return vl(t,i),r=tx(e,t,n,r,s,i),n=nx(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Cs(e,t,i)):(cn&&n&&Gv(t),t.flags|=1,fr(e,t,r,i),t.child)}function ME(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!hx(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,CN(e,t,s,r,i)):(e=ig(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Nd,n(o,r)&&e.ref===t.ref)return Cs(e,t,i)}return t.flags|=1,e=po(s,r),e.ref=t.ref,e.return=t,t.child=e}function CN(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Nd(s,r)&&e.ref===t.ref)if(Mr=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Mr=!0);else return t.lanes=e.lanes,Cs(e,t,i)}return E_(e,t,n,r,i)}function TN(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qt(rl,$r),$r|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qt(rl,$r),$r|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,qt(rl,$r),$r|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,qt(rl,$r),$r|=r;return fr(e,t,i,n),t.child}function NN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function E_(e,t,n,r,i){var s=Rr(n)?ua:sr.current;return s=Cl(t,s),vl(t,i),n=tx(e,t,n,r,s,i),r=nx(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Cs(e,t,i)):(cn&&r&&Gv(t),t.flags|=1,fr(e,t,n,i),t.child)}function FE(e,t,n,r,i){if(Rr(n)){var s=!0;Dg(t)}else s=!1;if(vl(t,i),t.stateNode===null)tg(e,t),SN(t,n,r),b_(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=gi(c):(c=Rr(n)?ua:sr.current,c=Cl(t,c));var d=n.getDerivedStateFromProps,u=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&TE(t,o,r,c),Xs=!1;var h=t.memoizedState;o.state=h,Ug(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Fr.current||Xs?(typeof d=="function"&&(x_(t,n,d,r),l=t.memoizedState),(a=Xs||CE(t,n,a,r,h,l,c))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,rN(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Si(t.type,a),o.props=c,u=t.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gi(l):(l=Rr(n)?ua:sr.current,l=Cl(t,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==u||h!==l)&&TE(t,o,r,l),Xs=!1,h=t.memoizedState,o.state=h,Ug(t,r,o,i);var p=t.memoizedState;a!==u||h!==p||Fr.current||Xs?(typeof g=="function"&&(x_(t,n,g,r),p=t.memoizedState),(c=Xs||CE(t,n,c,r,h,p,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return S_(e,t,n,r,s,i)}function S_(e,t,n,r,i,s){NN(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&vE(t,n,!1),Cs(e,t,s);r=t.stateNode,iO.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Nl(t,e.child,null,s),t.child=Nl(t,null,a,s)):fr(e,t,a,s),t.memoizedState=r.state,i&&vE(t,n,!0),t.child}function LN(e){var t=e.stateNode;t.pendingContext?yE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yE(e,t.context,!1),Jv(e,t.containerInfo)}function RE(e,t,n,r,i){return Tl(),Hv(i),t.flags|=256,fr(e,t,n,r),t.child}var A_={dehydrated:null,treeContext:null,retryLane:0};function k_(e){return{baseLanes:e,cachePool:null,transitions:null}}function IN(e,t,n){var r=t.pendingProps,i=hn.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),qt(hn,i&1),e===null)return y_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=lm(o,r,0,null),e=na(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=k_(n),t.memoizedState=A_,e):sx(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return sO(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=po(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=po(a,s):(s=na(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?k_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=A_,r}return s=e.child,e=s.sibling,r=po(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function sx(e,t){return t=lm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Uu(e,t,n,r){return r!==null&&Hv(r),Nl(t,e.child,null,n),e=sx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sO(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Nf(Error(Pe(422))),Uu(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=lm({mode:"visible",children:r.children},i,0,null),s=na(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Nl(t,e.child,null,o),t.child.memoizedState=k_(o),t.memoizedState=A_,s);if(!(t.mode&1))return Uu(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Pe(419)),r=Nf(s,r,void 0),Uu(e,t,o,r)}if(a=(o&e.childLanes)!==0,Mr||a){if(r=zn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ks(e,i),Ii(r,e,i,-1))}return ux(),r=Nf(Error(Pe(421))),Uu(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=yO.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Xr=co(i.nextSibling),Yr=t,cn=!0,Ti=null,e!==null&&(oi[ai++]=gs,oi[ai++]=ps,oi[ai++]=ha,gs=e.id,ps=e.overflow,ha=t),t=sx(t,r.children),t.flags|=4096,t)}function DE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),v_(e.return,t,n)}function Lf(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function PN(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(fr(e,t,r.children,n),r=hn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&DE(e,n,t);else if(e.tag===19)DE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(qt(hn,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&$g(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Lf(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&$g(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Lf(t,!0,n,null,s);break;case"together":Lf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function tg(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Cs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pa|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Pe(153));if(t.child!==null){for(e=t.child,n=po(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=po(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function oO(e,t,n){switch(t.tag){case 3:LN(t),Tl();break;case 5:iN(t);break;case 1:Rr(t.type)&&Dg(t);break;case 4:Jv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;qt(Bg,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(qt(hn,hn.current&1),t.flags|=128,null):n&t.child.childLanes?IN(e,t,n):(qt(hn,hn.current&1),e=Cs(e,t,n),e!==null?e.sibling:null);qt(hn,hn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return PN(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qt(hn,hn.current),r)break;return null;case 22:case 23:return t.lanes=0,TN(e,t,n)}return Cs(e,t,n)}var MN,C_,FN,RN;MN=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};C_=function(){};FN=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Vo(Ki.current);var s=null;switch(n){case"input":i=q0(e,i),r=q0(e,r),s=[];break;case"select":i=pn({},i,{value:void 0}),r=pn({},r,{value:void 0}),s=[];break;case"textarea":i=Q0(e,i),r=Q0(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fg)}e_(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(wd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(wd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kt("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};RN=function(e,t,n,r){n!==r&&(t.flags|=4)};function ac(e,t){if(!cn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function aO(e,t,n){var r=t.pendingProps;switch(Vv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qn(t),null;case 1:return Rr(t.type)&&Rg(),Qn(t),null;case 3:return r=t.stateNode,Ll(),on(Fr),on(sr),Kv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Bu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ti!==null&&(R_(Ti),Ti=null))),C_(e,t),Qn(t),null;case 5:Qv(t);var i=Vo(Fd.current);if(n=t.type,e!==null&&t.stateNode!=null)FN(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Pe(166));return Qn(t),null}if(e=Vo(Ki.current),Bu(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Xi]=t,r[Pd]=s,e=(t.mode&1)!==0,n){case"dialog":Kt("cancel",r),Kt("close",r);break;case"iframe":case"object":case"embed":Kt("load",r);break;case"video":case"audio":for(i=0;i<Nc.length;i++)Kt(Nc[i],r);break;case"source":Kt("error",r);break;case"img":case"image":case"link":Kt("error",r),Kt("load",r);break;case"details":Kt("toggle",r);break;case"input":Hw(r,s),Kt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",r);break;case"textarea":Xw(r,s),Kt("invalid",r)}e_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ou(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ou(r.textContent,a,e),i=["children",""+a]):wd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kt("scroll",r)}switch(n){case"input":Lu(r),Ww(r,s,!0);break;case"textarea":Lu(r),Yw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Fg)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cT(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Xi]=t,e[Pd]=r,MN(e,t,!1,!1),t.stateNode=e;e:{switch(o=t_(n,r),n){case"dialog":Kt("cancel",e),Kt("close",e),i=r;break;case"iframe":case"object":case"embed":Kt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nc.length;i++)Kt(Nc[i],e);i=r;break;case"source":Kt("error",e),i=r;break;case"img":case"image":case"link":Kt("error",e),Kt("load",e),i=r;break;case"details":Kt("toggle",e),i=r;break;case"input":Hw(e,r),i=q0(e,r),Kt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=pn({},r,{value:void 0}),Kt("invalid",e);break;case"textarea":Xw(e,r),i=Q0(e,r),Kt("invalid",e);break;default:i=r}e_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?hT(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dT(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ed(e,l):typeof l=="number"&&Ed(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kt("scroll",e):l!=null&&Nv(e,s,l,o))}switch(n){case"input":Lu(e),Ww(e,r,!1);break;case"textarea":Lu(e),Yw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+_o(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ml(e,!!r.multiple,s,!1):r.defaultValue!=null&&ml(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Fg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qn(t),null;case 6:if(e&&t.stateNode!=null)RN(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Pe(166));if(n=Vo(Fd.current),Vo(Ki.current),Bu(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xi]=t,(s=r.nodeValue!==n)&&(e=Yr,e!==null))switch(e.tag){case 3:Ou(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ou(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xi]=t,t.stateNode=r}return Qn(t),null;case 13:if(on(hn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cn&&Xr!==null&&t.mode&1&&!(t.flags&128))KT(),Tl(),t.flags|=98560,s=!1;else if(s=Bu(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Pe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Pe(317));s[Xi]=t}else Tl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qn(t),s=!1}else Ti!==null&&(R_(Ti),Ti=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||hn.current&1?Pn===0&&(Pn=3):ux())),t.updateQueue!==null&&(t.flags|=4),Qn(t),null);case 4:return Ll(),C_(e,t),e===null&&Ld(t.stateNode.containerInfo),Qn(t),null;case 10:return Yv(t.type._context),Qn(t),null;case 17:return Rr(t.type)&&Rg(),Qn(t),null;case 19:if(on(hn),s=t.memoizedState,s===null)return Qn(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)ac(s,!1);else{if(Pn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=$g(e),o!==null){for(t.flags|=128,ac(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return qt(hn,hn.current&1|2),t.child}e=e.sibling}s.tail!==null&&wn()>Pl&&(t.flags|=128,r=!0,ac(s,!1),t.lanes=4194304)}else{if(!r)if(e=$g(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ac(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!cn)return Qn(t),null}else 2*wn()-s.renderingStartTime>Pl&&n!==1073741824&&(t.flags|=128,r=!0,ac(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=wn(),t.sibling=null,n=hn.current,qt(hn,r?n&1|2:n&1),t):(Qn(t),null);case 22:case 23:return dx(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$r&1073741824&&(Qn(t),t.subtreeFlags&6&&(t.flags|=8192)):Qn(t),null;case 24:return null;case 25:return null}throw Error(Pe(156,t.tag))}function lO(e,t){switch(Vv(t),t.tag){case 1:return Rr(t.type)&&Rg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ll(),on(Fr),on(sr),Kv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qv(t),null;case 13:if(on(hn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Pe(340));Tl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return on(hn),null;case 4:return Ll(),null;case 10:return Yv(t.type._context),null;case 22:case 23:return dx(),null;case 24:return null;default:return null}}var $u=!1,rr=!1,cO=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function nl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yn(e,t,r)}else n.current=null}function T_(e,t,n){try{n()}catch(r){yn(e,t,r)}}var zE=!1;function dO(e,t){if(u_=Ig,e=jT(),$v(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,u=e,h=null;t:for(;;){for(var g;u!==n||i!==0&&u.nodeType!==3||(a=o+i),u!==s||r!==0&&u.nodeType!==3||(l=o+r),u.nodeType===3&&(o+=u.nodeValue.length),(g=u.firstChild)!==null;)h=u,u=g;for(;;){if(u===e)break t;if(h===n&&++c===i&&(a=o),h===s&&++d===r&&(l=o),(g=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(h_={focusedElem:e,selectionRange:n},Ig=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){t=Xe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,f=p.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Si(t.type,m),f);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Pe(163))}}catch(x){yn(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}return p=zE,zE=!1,p}function rd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&T_(t,n,s)}i=i.next}while(i!==r)}}function om(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function N_(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function DN(e){var t=e.alternate;t!==null&&(e.alternate=null,DN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xi],delete t[Pd],delete t[m_],delete t[W5],delete t[X5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zN(e){return e.tag===5||e.tag===3||e.tag===4}function OE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function L_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Fg));else if(r!==4&&(e=e.child,e!==null))for(L_(e,t,n),e=e.sibling;e!==null;)L_(e,t,n),e=e.sibling}function I_(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(I_(e,t,n),e=e.sibling;e!==null;)I_(e,t,n),e=e.sibling}var jn=null,ki=!1;function zs(e,t,n){for(n=n.child;n!==null;)ON(e,t,n),n=n.sibling}function ON(e,t,n){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(Qp,n)}catch{}switch(n.tag){case 5:rr||nl(n,t);case 6:var r=jn,i=ki;jn=null,zs(e,t,n),jn=r,ki=i,jn!==null&&(ki?(e=jn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):jn.removeChild(n.stateNode));break;case 18:jn!==null&&(ki?(e=jn,n=n.stateNode,e.nodeType===8?Ef(e.parentNode,n):e.nodeType===1&&Ef(e,n),Cd(e)):Ef(jn,n.stateNode));break;case 4:r=jn,i=ki,jn=n.stateNode.containerInfo,ki=!0,zs(e,t,n),jn=r,ki=i;break;case 0:case 11:case 14:case 15:if(!rr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&T_(n,t,o),i=i.next}while(i!==r)}zs(e,t,n);break;case 1:if(!rr&&(nl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){yn(n,t,a)}zs(e,t,n);break;case 21:zs(e,t,n);break;case 22:n.mode&1?(rr=(r=rr)||n.memoizedState!==null,zs(e,t,n),rr=r):zs(e,t,n);break;default:zs(e,t,n)}}function BE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cO),t.forEach(function(r){var i=vO.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function bi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:jn=a.stateNode,ki=!1;break e;case 3:jn=a.stateNode.containerInfo,ki=!0;break e;case 4:jn=a.stateNode.containerInfo,ki=!0;break e}a=a.return}if(jn===null)throw Error(Pe(160));ON(s,o,i),jn=null,ki=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){yn(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BN(t,e),t=t.sibling}function BN(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bi(t,e),ji(e),r&4){try{rd(3,e,e.return),om(3,e)}catch(m){yn(e,e.return,m)}try{rd(5,e,e.return)}catch(m){yn(e,e.return,m)}}break;case 1:bi(t,e),ji(e),r&512&&n!==null&&nl(n,n.return);break;case 5:if(bi(t,e),ji(e),r&512&&n!==null&&nl(n,n.return),e.flags&32){var i=e.stateNode;try{Ed(i,"")}catch(m){yn(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&aT(i,s),t_(a,o);var c=t_(a,s);for(o=0;o<l.length;o+=2){var d=l[o],u=l[o+1];d==="style"?hT(i,u):d==="dangerouslySetInnerHTML"?dT(i,u):d==="children"?Ed(i,u):Nv(i,d,u,c)}switch(a){case"input":Z0(i,s);break;case"textarea":lT(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?ml(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?ml(i,!!s.multiple,s.defaultValue,!0):ml(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pd]=s}catch(m){yn(e,e.return,m)}}break;case 6:if(bi(t,e),ji(e),r&4){if(e.stateNode===null)throw Error(Pe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){yn(e,e.return,m)}}break;case 3:if(bi(t,e),ji(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cd(t.containerInfo)}catch(m){yn(e,e.return,m)}break;case 4:bi(t,e),ji(e);break;case 13:bi(t,e),ji(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lx=wn())),r&4&&BE(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(rr=(c=rr)||d,bi(t,e),rr=c):bi(t,e),ji(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(Xe=e,d=e.child;d!==null;){for(u=Xe=d;Xe!==null;){switch(h=Xe,g=h.child,h.tag){case 0:case 11:case 14:case 15:rd(4,h,h.return);break;case 1:nl(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){yn(r,n,m)}}break;case 5:nl(h,h.return);break;case 22:if(h.memoizedState!==null){UE(u);continue}}g!==null?(g.return=h,Xe=g):UE(u)}d=d.sibling}e:for(d=null,u=e;;){if(u.tag===5){if(d===null){d=u;try{i=u.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=u.stateNode,l=u.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=uT("display",o))}catch(m){yn(e,e.return,m)}}}else if(u.tag===6){if(d===null)try{u.stateNode.nodeValue=c?"":u.memoizedProps}catch(m){yn(e,e.return,m)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:bi(t,e),ji(e),r&4&&BE(e);break;case 21:break;default:bi(t,e),ji(e)}}function ji(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(zN(n)){var r=n;break e}n=n.return}throw Error(Pe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ed(i,""),r.flags&=-33);var s=OE(e);I_(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=OE(e);L_(e,a,o);break;default:throw Error(Pe(161))}}catch(l){yn(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uO(e,t,n){Xe=e,jN(e)}function jN(e,t,n){for(var r=(e.mode&1)!==0;Xe!==null;){var i=Xe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||$u;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||rr;a=$u;var c=rr;if($u=o,(rr=l)&&!c)for(Xe=i;Xe!==null;)o=Xe,l=o.child,o.tag===22&&o.memoizedState!==null?$E(i):l!==null?(l.return=o,Xe=l):$E(i);for(;s!==null;)Xe=s,jN(s),s=s.sibling;Xe=i,$u=a,rr=c}jE(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Xe=s):jE(e)}}function jE(e){for(;Xe!==null;){var t=Xe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:rr||om(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!rr)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Si(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&SE(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}SE(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var u=d.dehydrated;u!==null&&Cd(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Pe(163))}rr||t.flags&512&&N_(t)}catch(h){yn(t,t.return,h)}}if(t===e){Xe=null;break}if(n=t.sibling,n!==null){n.return=t.return,Xe=n;break}Xe=t.return}}function UE(e){for(;Xe!==null;){var t=Xe;if(t===e){Xe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Xe=n;break}Xe=t.return}}function $E(e){for(;Xe!==null;){var t=Xe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{om(4,t)}catch(l){yn(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){yn(t,i,l)}}var s=t.return;try{N_(t)}catch(l){yn(t,s,l)}break;case 5:var o=t.return;try{N_(t)}catch(l){yn(t,o,l)}}}catch(l){yn(t,t.return,l)}if(t===e){Xe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Xe=a;break}Xe=t.return}}var hO=Math.ceil,Hg=Ps.ReactCurrentDispatcher,ox=Ps.ReactCurrentOwner,hi=Ps.ReactCurrentBatchConfig,Lt=0,zn=null,Nn=null,Gn=0,$r=0,rl=ko(0),Pn=0,Od=null,pa=0,am=0,ax=0,id=null,Pr=null,lx=0,Pl=1/0,cs=null,Wg=!1,P_=null,ho=null,Gu=!1,Ks=null,Xg=0,sd=0,M_=null,ng=-1,rg=0;function br(){return Lt&6?wn():ng!==-1?ng:ng=wn()}function go(e){return e.mode&1?Lt&2&&Gn!==0?Gn&-Gn:q5.transition!==null?(rg===0&&(rg=ST()),rg):(e=Gt,e!==0||(e=window.event,e=e===void 0?16:IT(e.type)),e):1}function Ii(e,t,n,r){if(50<sd)throw sd=0,M_=null,Error(Pe(185));du(e,n,r),(!(Lt&2)||e!==zn)&&(e===zn&&(!(Lt&2)&&(am|=n),Pn===4&&Js(e,Gn)),Dr(e,r),n===1&&Lt===0&&!(t.mode&1)&&(Pl=wn()+500,rm&&Co()))}function Dr(e,t){var n=e.callbackNode;qz(e,t);var r=Lg(e,e===zn?Gn:0);if(r===0)n!==null&&Jw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Jw(n),t===1)e.tag===0?Y5(GE.bind(null,e)):ZT(GE.bind(null,e)),V5(function(){!(Lt&6)&&Co()}),n=null;else{switch(AT(r)){case 1:n=Fv;break;case 4:n=wT;break;case 16:n=Ng;break;case 536870912:n=ET;break;default:n=Ng}n=YN(n,UN.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function UN(e,t){if(ng=-1,rg=0,Lt&6)throw Error(Pe(327));var n=e.callbackNode;if(xl()&&e.callbackNode!==n)return null;var r=Lg(e,e===zn?Gn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Yg(e,r);else{t=r;var i=Lt;Lt|=2;var s=GN();(zn!==e||Gn!==t)&&(cs=null,Pl=wn()+500,ta(e,t));do try{mO();break}catch(a){$N(e,a)}while(!0);Xv(),Hg.current=s,Lt=i,Nn!==null?t=0:(zn=null,Gn=0,t=Pn)}if(t!==0){if(t===2&&(i=o_(e),i!==0&&(r=i,t=F_(e,i))),t===1)throw n=Od,ta(e,0),Js(e,r),Dr(e,wn()),n;if(t===6)Js(e,r);else{if(i=e.current.alternate,!(r&30)&&!gO(i)&&(t=Yg(e,r),t===2&&(s=o_(e),s!==0&&(r=s,t=F_(e,s))),t===1))throw n=Od,ta(e,0),Js(e,r),Dr(e,wn()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Pe(345));case 2:Ro(e,Pr,cs);break;case 3:if(Js(e,r),(r&130023424)===r&&(t=lx+500-wn(),10<t)){if(Lg(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){br(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=p_(Ro.bind(null,e,Pr,cs),t);break}Ro(e,Pr,cs);break;case 4:if(Js(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Li(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=wn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hO(r/1960))-r,10<r){e.timeoutHandle=p_(Ro.bind(null,e,Pr,cs),r);break}Ro(e,Pr,cs);break;case 5:Ro(e,Pr,cs);break;default:throw Error(Pe(329))}}}return Dr(e,wn()),e.callbackNode===n?UN.bind(null,e):null}function F_(e,t){var n=id;return e.current.memoizedState.isDehydrated&&(ta(e,t).flags|=256),e=Yg(e,t),e!==2&&(t=Pr,Pr=n,t!==null&&R_(t)),e}function R_(e){Pr===null?Pr=e:Pr.push.apply(Pr,e)}function gO(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Js(e,t){for(t&=~ax,t&=~am,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Li(t),r=1<<n;e[n]=-1,t&=~r}}function GE(e){if(Lt&6)throw Error(Pe(327));xl();var t=Lg(e,0);if(!(t&1))return Dr(e,wn()),null;var n=Yg(e,t);if(e.tag!==0&&n===2){var r=o_(e);r!==0&&(t=r,n=F_(e,r))}if(n===1)throw n=Od,ta(e,0),Js(e,t),Dr(e,wn()),n;if(n===6)throw Error(Pe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ro(e,Pr,cs),Dr(e,wn()),null}function cx(e,t){var n=Lt;Lt|=1;try{return e(t)}finally{Lt=n,Lt===0&&(Pl=wn()+500,rm&&Co())}}function ma(e){Ks!==null&&Ks.tag===0&&!(Lt&6)&&xl();var t=Lt;Lt|=1;var n=hi.transition,r=Gt;try{if(hi.transition=null,Gt=1,e)return e()}finally{Gt=r,hi.transition=n,Lt=t,!(Lt&6)&&Co()}}function dx(){$r=rl.current,on(rl)}function ta(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,G5(n)),Nn!==null)for(n=Nn.return;n!==null;){var r=n;switch(Vv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rg();break;case 3:Ll(),on(Fr),on(sr),Kv();break;case 5:Qv(r);break;case 4:Ll();break;case 13:on(hn);break;case 19:on(hn);break;case 10:Yv(r.type._context);break;case 22:case 23:dx()}n=n.return}if(zn=e,Nn=e=po(e.current,null),Gn=$r=t,Pn=0,Od=null,ax=am=pa=0,Pr=id=null,Go!==null){for(t=0;t<Go.length;t++)if(n=Go[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Go=null}return e}function $N(e,t){do{var n=Nn;try{if(Xv(),Kh.current=Vg,Gg){for(var r=gn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gg=!1}if(ga=0,Dn=In=gn=null,nd=!1,Rd=0,ox.current=null,n===null||n.return===null){Pn=1,Od=t,Nn=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Gn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,u=d.tag;if(!(d.mode&1)&&(u===0||u===11||u===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=LE(o);if(g!==null){g.flags&=-257,IE(g,o,a,s,t),g.mode&1&&NE(s,c,t),t=g,l=c;var p=t.updateQueue;if(p===null){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}else{if(!(t&1)){NE(s,c,t),ux();break e}l=Error(Pe(426))}}else if(cn&&a.mode&1){var f=LE(o);if(f!==null){!(f.flags&65536)&&(f.flags|=256),IE(f,o,a,s,t),Hv(Il(l,a));break e}}s=l=Il(l,a),Pn!==4&&(Pn=2),id===null?id=[s]:id.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=AN(s,l,t);EE(s,y);break e;case 1:a=l;var _=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ho===null||!ho.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=kN(s,a,t);EE(s,x);break e}}s=s.return}while(s!==null)}HN(n)}catch(b){t=b,Nn===n&&n!==null&&(Nn=n=n.return);continue}break}while(!0)}function GN(){var e=Hg.current;return Hg.current=Vg,e===null?Vg:e}function ux(){(Pn===0||Pn===3||Pn===2)&&(Pn=4),zn===null||!(pa&268435455)&&!(am&268435455)||Js(zn,Gn)}function Yg(e,t){var n=Lt;Lt|=2;var r=GN();(zn!==e||Gn!==t)&&(cs=null,ta(e,t));do try{pO();break}catch(i){$N(e,i)}while(!0);if(Xv(),Lt=n,Hg.current=r,Nn!==null)throw Error(Pe(261));return zn=null,Gn=0,Pn}function pO(){for(;Nn!==null;)VN(Nn)}function mO(){for(;Nn!==null&&!jz();)VN(Nn)}function VN(e){var t=XN(e.alternate,e,$r);e.memoizedProps=e.pendingProps,t===null?HN(e):Nn=t,ox.current=null}function HN(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lO(n,t),n!==null){n.flags&=32767,Nn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pn=6,Nn=null;return}}else if(n=aO(n,t,$r),n!==null){Nn=n;return}if(t=t.sibling,t!==null){Nn=t;return}Nn=t=e}while(t!==null);Pn===0&&(Pn=5)}function Ro(e,t,n){var r=Gt,i=hi.transition;try{hi.transition=null,Gt=1,fO(e,t,n,r)}finally{hi.transition=i,Gt=r}return null}function fO(e,t,n,r){do xl();while(Ks!==null);if(Lt&6)throw Error(Pe(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Pe(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Zz(e,s),e===zn&&(Nn=zn=null,Gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gu||(Gu=!0,YN(Ng,function(){return xl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hi.transition,hi.transition=null;var o=Gt;Gt=1;var a=Lt;Lt|=4,ox.current=null,dO(e,n),BN(n,e),D5(h_),Ig=!!u_,h_=u_=null,e.current=n,uO(n),Uz(),Lt=a,Gt=o,hi.transition=s}else e.current=n;if(Gu&&(Gu=!1,Ks=e,Xg=i),s=e.pendingLanes,s===0&&(ho=null),Vz(n.stateNode),Dr(e,wn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wg)throw Wg=!1,e=P_,P_=null,e;return Xg&1&&e.tag!==0&&xl(),s=e.pendingLanes,s&1?e===M_?sd++:(sd=0,M_=e):sd=0,Co(),null}function xl(){if(Ks!==null){var e=AT(Xg),t=hi.transition,n=Gt;try{if(hi.transition=null,Gt=16>e?16:e,Ks===null)var r=!1;else{if(e=Ks,Ks=null,Xg=0,Lt&6)throw Error(Pe(331));var i=Lt;for(Lt|=4,Xe=e.current;Xe!==null;){var s=Xe,o=s.child;if(Xe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Xe=c;Xe!==null;){var d=Xe;switch(d.tag){case 0:case 11:case 15:rd(8,d,s)}var u=d.child;if(u!==null)u.return=d,Xe=u;else for(;Xe!==null;){d=Xe;var h=d.sibling,g=d.return;if(DN(d),d===c){Xe=null;break}if(h!==null){h.return=g,Xe=h;break}Xe=g}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var f=m.sibling;m.sibling=null,m=f}while(m!==null)}}Xe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Xe=o;else e:for(;Xe!==null;){if(s=Xe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rd(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Xe=y;break e}Xe=s.return}}var _=e.current;for(Xe=_;Xe!==null;){o=Xe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Xe=v;else e:for(o=_;Xe!==null;){if(a=Xe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:om(9,a)}}catch(b){yn(a,a.return,b)}if(a===o){Xe=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,Xe=x;break e}Xe=a.return}}if(Lt=i,Co(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(Qp,e)}catch{}r=!0}return r}finally{Gt=n,hi.transition=t}}return!1}function VE(e,t,n){t=Il(n,t),t=AN(e,t,1),e=uo(e,t,1),t=br(),e!==null&&(du(e,1,t),Dr(e,t))}function yn(e,t,n){if(e.tag===3)VE(e,e,n);else for(;t!==null;){if(t.tag===3){VE(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ho===null||!ho.has(r))){e=Il(n,e),e=kN(t,e,1),t=uo(t,e,1),e=br(),t!==null&&(du(t,1,e),Dr(t,e));break}}t=t.return}}function _O(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=br(),e.pingedLanes|=e.suspendedLanes&n,zn===e&&(Gn&n)===n&&(Pn===4||Pn===3&&(Gn&130023424)===Gn&&500>wn()-lx?ta(e,0):ax|=n),Dr(e,t)}function WN(e,t){t===0&&(e.mode&1?(t=Mu,Mu<<=1,!(Mu&130023424)&&(Mu=4194304)):t=1);var n=br();e=ks(e,t),e!==null&&(du(e,t,n),Dr(e,n))}function yO(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),WN(e,n)}function vO(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Pe(314))}r!==null&&r.delete(t),WN(e,n)}var XN;XN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fr.current)Mr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mr=!1,oO(e,t,n);Mr=!!(e.flags&131072)}else Mr=!1,cn&&t.flags&1048576&&JT(t,Og,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;tg(e,t),e=t.pendingProps;var i=Cl(t,sr.current);vl(t,n),i=tx(null,t,r,e,i,n);var s=nx();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(r)?(s=!0,Dg(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Zv(t),i.updater=sm,t.stateNode=i,i._reactInternals=t,b_(t,r,e,n),t=S_(null,t,r,!0,s,n)):(t.tag=0,cn&&s&&Gv(t),fr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(tg(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=bO(r),e=Si(r,e),i){case 0:t=E_(null,t,r,e,n);break e;case 1:t=FE(null,t,r,e,n);break e;case 11:t=PE(null,t,r,e,n);break e;case 14:t=ME(null,t,r,Si(r.type,e),n);break e}throw Error(Pe(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Si(r,i),E_(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Si(r,i),FE(e,t,r,i,n);case 3:e:{if(LN(t),e===null)throw Error(Pe(387));r=t.pendingProps,s=t.memoizedState,i=s.element,rN(e,t),Ug(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Il(Error(Pe(423)),t),t=RE(e,t,r,n,i);break e}else if(r!==i){i=Il(Error(Pe(424)),t),t=RE(e,t,r,n,i);break e}else for(Xr=co(t.stateNode.containerInfo.firstChild),Yr=t,cn=!0,Ti=null,n=tN(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tl(),r===i){t=Cs(e,t,n);break e}fr(e,t,r,n)}t=t.child}return t;case 5:return iN(t),e===null&&y_(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,g_(r,i)?o=null:s!==null&&g_(r,s)&&(t.flags|=32),NN(e,t),fr(e,t,o,n),t.child;case 6:return e===null&&y_(t),null;case 13:return IN(e,t,n);case 4:return Jv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Nl(t,null,r,n):fr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Si(r,i),PE(e,t,r,i,n);case 7:return fr(e,t,t.pendingProps,n),t.child;case 8:return fr(e,t,t.pendingProps.children,n),t.child;case 12:return fr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,qt(Bg,r._currentValue),r._currentValue=o,s!==null)if(Pi(s.value,o)){if(s.children===i.children&&!Fr.current){t=Cs(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ys(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),v_(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Pe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),v_(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}fr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,vl(t,n),i=gi(i),r=r(i),t.flags|=1,fr(e,t,r,n),t.child;case 14:return r=t.type,i=Si(r,t.pendingProps),i=Si(r.type,i),ME(e,t,r,i,n);case 15:return CN(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Si(r,i),tg(e,t),t.tag=1,Rr(r)?(e=!0,Dg(t)):e=!1,vl(t,n),SN(t,r,i),b_(t,r,i,n),S_(null,t,r,!0,e,n);case 19:return PN(e,t,n);case 22:return TN(e,t,n)}throw Error(Pe(156,t.tag))};function YN(e,t){return bT(e,t)}function xO(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(e,t,n,r){return new xO(e,t,n,r)}function hx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function bO(e){if(typeof e=="function")return hx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Iv)return 11;if(e===Pv)return 14}return 2}function po(e,t){var n=e.alternate;return n===null?(n=li(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ig(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")hx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Xa:return na(n.children,i,s,t);case Lv:o=8,i|=8;break;case H0:return e=li(12,n,t,i|2),e.elementType=H0,e.lanes=s,e;case W0:return e=li(13,n,t,i),e.elementType=W0,e.lanes=s,e;case X0:return e=li(19,n,t,i),e.elementType=X0,e.lanes=s,e;case iT:return lm(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nT:o=10;break e;case rT:o=9;break e;case Iv:o=11;break e;case Pv:o=14;break e;case Ws:o=16,r=null;break e}throw Error(Pe(130,e==null?e:typeof e,""))}return t=li(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function na(e,t,n,r){return e=li(7,e,r,t),e.lanes=n,e}function lm(e,t,n,r){return e=li(22,e,r,t),e.elementType=iT,e.lanes=n,e.stateNode={isHidden:!1},e}function If(e,t,n){return e=li(6,e,null,t),e.lanes=n,e}function Pf(e,t,n){return t=li(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wO(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hf(0),this.expirationTimes=hf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hf(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gx(e,t,n,r,i,s,o,a,l){return e=new wO(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=li(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zv(s),e}function EO(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function qN(e){if(!e)return yo;e=e._reactInternals;e:{if(Sa(e)!==e||e.tag!==1)throw Error(Pe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Pe(171))}if(e.tag===1){var n=e.type;if(Rr(n))return qT(e,n,t)}return t}function ZN(e,t,n,r,i,s,o,a,l){return e=gx(n,r,!0,e,i,s,o,a,l),e.context=qN(null),n=e.current,r=br(),i=go(n),s=ys(r,i),s.callback=t??null,uo(n,s,i),e.current.lanes=i,du(e,i,r),Dr(e,r),e}function cm(e,t,n,r){var i=t.current,s=br(),o=go(i);return n=qN(n),t.context===null?t.context=n:t.pendingContext=n,t=ys(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=uo(i,t,o),e!==null&&(Ii(e,i,o,s),Qh(e,i,o)),o}function qg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function HE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function px(e,t){HE(e,t),(e=e.alternate)&&HE(e,t)}function SO(){return null}var JN=typeof reportError=="function"?reportError:function(e){console.error(e)};function mx(e){this._internalRoot=e}dm.prototype.render=mx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Pe(409));cm(e,t,null,null)};dm.prototype.unmount=mx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ma(function(){cm(null,e,null,null)}),t[As]=null}};function dm(e){this._internalRoot=e}dm.prototype.unstable_scheduleHydration=function(e){if(e){var t=TT();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zs.length&&t!==0&&t<Zs[n].priority;n++);Zs.splice(n,0,e),n===0&&LT(e)}};function fx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function um(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function WE(){}function AO(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=qg(o);s.call(c)}}var o=ZN(t,r,e,0,null,!1,!1,"",WE);return e._reactRootContainer=o,e[As]=o.current,Ld(e.nodeType===8?e.parentNode:e),ma(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=qg(l);a.call(c)}}var l=gx(e,0,!1,null,null,!1,!1,"",WE);return e._reactRootContainer=l,e[As]=l.current,Ld(e.nodeType===8?e.parentNode:e),ma(function(){cm(t,l,n,r)}),l}function hm(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=qg(o);a.call(l)}}cm(t,o,e,i)}else o=AO(n,t,e,i,r);return qg(o)}kT=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Tc(t.pendingLanes);n!==0&&(Rv(t,n|1),Dr(t,wn()),!(Lt&6)&&(Pl=wn()+500,Co()))}break;case 13:ma(function(){var r=ks(e,1);if(r!==null){var i=br();Ii(r,e,1,i)}}),px(e,1)}};Dv=function(e){if(e.tag===13){var t=ks(e,134217728);if(t!==null){var n=br();Ii(t,e,134217728,n)}px(e,134217728)}};CT=function(e){if(e.tag===13){var t=go(e),n=ks(e,t);if(n!==null){var r=br();Ii(n,e,t,r)}px(e,t)}};TT=function(){return Gt};NT=function(e,t){var n=Gt;try{return Gt=e,t()}finally{Gt=n}};r_=function(e,t,n){switch(t){case"input":if(Z0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=nm(r);if(!i)throw Error(Pe(90));oT(r),Z0(r,i)}}}break;case"textarea":lT(e,n);break;case"select":t=n.value,t!=null&&ml(e,!!n.multiple,t,!1)}};mT=cx;fT=ma;var kO={usingClientEntryPoint:!1,Events:[hu,Ja,nm,gT,pT,cx]},lc={findFiberByHostInstance:$o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},CO={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vT(e),e===null?null:e.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||SO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{Qp=Vu.inject(CO),Qi=Vu}catch{}}Jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kO;Jr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fx(t))throw Error(Pe(200));return EO(e,t,null,n)};Jr.createRoot=function(e,t){if(!fx(e))throw Error(Pe(299));var n=!1,r="",i=JN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=gx(e,1,!1,null,null,n,!1,r,i),e[As]=t.current,Ld(e.nodeType===8?e.parentNode:e),new mx(t)};Jr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Pe(188)):(e=Object.keys(e).join(","),Error(Pe(268,e)));return e=vT(t),e=e===null?null:e.stateNode,e};Jr.flushSync=function(e){return ma(e)};Jr.hydrate=function(e,t,n){if(!um(t))throw Error(Pe(200));return hm(null,e,t,!0,n)};Jr.hydrateRoot=function(e,t,n){if(!fx(e))throw Error(Pe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=JN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=ZN(t,null,e,1,n??null,i,!1,s,o),e[As]=t.current,Ld(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new dm(t)};Jr.render=function(e,t,n){if(!um(t))throw Error(Pe(200));return hm(null,e,t,!1,n)};Jr.unmountComponentAtNode=function(e){if(!um(e))throw Error(Pe(40));return e._reactRootContainer?(ma(function(){hm(null,null,e,!1,function(){e._reactRootContainer=null,e[As]=null})}),!0):!1};Jr.unstable_batchedUpdates=cx;Jr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!um(n))throw Error(Pe(200));if(e==null||e._reactInternals===void 0)throw Error(Pe(38));return hm(e,t,n,!1,r)};Jr.version="18.3.1-next-f1338f8080-20240426";function QN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QN)}catch(e){console.error(e)}}QN(),QC.exports=Jr;var To=QC.exports,XE=To;G0.createRoot=XE.createRoot,G0.hydrateRoot=XE.hydrateRoot;var TO=Object.create,gm=Object.defineProperty,NO=Object.defineProperties,LO=Object.getOwnPropertyDescriptor,IO=Object.getOwnPropertyDescriptors,KN=Object.getOwnPropertyNames,YE=Object.getOwnPropertySymbols,PO=Object.getPrototypeOf,eL=Object.prototype.hasOwnProperty,MO=Object.prototype.propertyIsEnumerable,Mf=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),FO=e=>{throw TypeError(e)},qE=(e,t,n)=>t in e?gm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,be=(e,t)=>{for(var n in t||(t={}))eL.call(t,n)&&qE(e,n,t[n]);if(YE)for(var n of YE(t))MO.call(t,n)&&qE(e,n,t[n]);return e},yt=(e,t)=>NO(e,IO(t)),tL=(e,t)=>function(){return t||(0,e[KN(e)[0]])((t={exports:{}}).exports,t),t.exports},pu=(e,t)=>{for(var n in t)gm(e,n,{get:t[n],enumerable:!0})},RO=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of KN(t))eL.call(e,i)||i===n||gm(e,i,{get:()=>t[i],enumerable:!(r=LO(t,i))||r.enumerable});return e},_x=(e,t,n)=>(n=e!=null?TO(PO(e)):{},RO(e&&e.__esModule?n:gm(n,"default",{value:e,enumerable:!0}),e)),fa=(e,t,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(c){i(c)}},o=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(e,t)).next())}),DO=function(e,t){this[0]=e,this[1]=t},zO=e=>{var t,n=e[Mf("asyncIterator")],r=!1,i={};return n==null?(n=e[Mf("iterator")](),t=s=>i[s]=o=>n[s](o)):(n=n.call(e),t=s=>i[s]=o=>{if(r){if(r=!1,s==="throw")throw o;return o}return r=!0,{done:!1,value:new DO(new Promise(a=>{var l=n[s](o);l instanceof Object||FO("Object expected"),a(l)}),1)}}),i[Mf("iterator")]=()=>i,t("next"),"throw"in n?t("throw"):i.throw=s=>{throw s},"return"in n&&t("return"),i},nL=tL({"node_modules/@linkurious/ogma-parsers/dist/ogma-parsers.umd.js"(e,t){var n,r;n=e,r=function(i){/**
* Ogma Parsers
* @description Parsers for Ogma
* @version 0.0.20 (built on Fri Jan 12 2024 15:00:46 GMT+0000 (Coordinated Universal Time))
* @author Alexander Milevski - Leo Nicolle - Sylvain Milan - Marco Liberati
* @license (c) Linkurious 2024. All rights reserved.
* @preserve
*/function s(Y,ne,ae){ae=ae||ne,ne in Y&&(Y.attributes[ae]=Y[ne])}function o(Y,ne,ae){if(Y&&typeof Y=="object"){if(Array.isArray(Y))return Y.forEach(ce=>o(ce,ne,ae));if(function(he){return he.type==="vertex"||he._type==="vertex"||he.inE||he.outE||he._inE||he._outE}(Y)){const ce={};Y.properties&&Object.keys(Y.properties).forEach(me=>{ce[me]=Y.properties[me][0].value});const he=l(Y);ne.push({id:he,data:{id:Y.id+"",categories:[Y.label],properties:ce}});for(const me in Y)me!=="properties"&&o(Y[me],ne,ae);return}if(function(he){return he.type==="edge"||he._type==="edge"||he.inV||he.outV||he._outV||he._inV}(Y)){const ce=l(Y);ae.push({id:ce,source:a(Y,["inV","_inV"]),target:a(Y,["outV","_outV"]),data:{id:ce,type:Y.label,properties:Y.properties||{}}});for(const he in Y)he!=="properties"&&o(Y[he],ne,ae);return}Object.keys(Y).forEach(ce=>o(Y[ce],ne,ae))}}function a(Y,ne){for(const ae of ne)if(Y[ae])return l(Y[ae])}function l(Y){if(typeof Y=="string"||isFinite(Y))return String(Y);const ne=Y;return String(ne.id||ne._id)}const c=Y=>Y.charCodeAt(0),d=c(" "),u=c("<"),h=c(">"),g=c('"'),p=c(`
`),m=c("\r"),f=c("/"),y=c("\\"),_=c("a"),v=c("z"),x=c("A"),b=c("Z"),w=c("0"),S=c("9"),A=c(":"),C=-1,k=-2,T=-3,M=-4;function D(Y,ne,ae,ce){const he=ce.length;if(ae-ne!==he)return!1;for(let me=0;me<he;++me)if(Y[ne+me]!==ce[me])return!1;return!0}function B(Y,ne,ae,ce){return I(Y.tags,ne,ae,ce)}function I(Y,ne,ae,ce){const he=Y.length;for(let me=0;me<he;++me)if(D(ne,ae,ce,Y[me]))return me;return Y.push(ne.slice(ae,ce)),he}function N(Y,ne,ae){let ce=$(ne,ae),he=ne[ce];if(he===h||he===f)return ce;let me=ce;ce=se(ne,ce);const Me=function(Te,ot,st,It){return I(Te.attributes,ot,st,It)}(Y,ne,me,ce);for(;ne[ce]!==g;)++ce;for(++ce,me=ce;(he=ne[ce])!==g;)he===y&&++ce,++ce;return Y.tokens.push(T,Me,me,ce),ce+1}function V(Y){return Y===d||Y===p||Y===m}function $(Y,ne){for(;V(Y[ne]);)++ne;return ne}function Q(Y){return Y>=_&&Y<=v||Y>=x&&Y<=b||Y===A||Y>=w&&Y<=S}function se(Y,ne){for(;Q(Y[ne]);)++ne;return ne}function te(Y,ne){const ae=["return {","  id: undefined,","  attributes: {","    text: undefined,","    color: undefined,",`    ${Y?"radius":"width"}: undefined`,Y?"  ,x: undefined":"",Y?"  ,y: undefined":"","  },"];Y||ae.push("  source: undefined,","  target: undefined,");const ce=Object.keys(ne);ce.length&&ae.push("  data: {");for(let he=0;he<ce.length;++he){const me=ne[ce[he]],Me=me.title;ae.push(`  "${Me}": ${me.default!==void 0?JSON.stringify(me.default):void 0}${he===ce.length-1?"":","}`)}return ce.length&&ae.push("}"),ae.push("};"),new Function(ae.join(`
`))}function de(Y){return Y.indexOf("\\")===-1||(Y=Y.replace(/\\"/g,'"')),Y}function Ee(Y,ne){let ae=0;for(let ce=0;ce<20;++ce){const he=ae+Y[ce]+ne[ce];ae=+(he>=10),Y[ce]=he%10}}const oe=new class{constructor(){this._decimalPowerOfTwo=new Uint8Array(20),this._binaryNumber=new Uint8Array(64),this._decimalNumber=new Uint8Array(20)}int64ToString({low:ne,high:ae}){if(ne===0&&ae===0)return"0";(function(Ce,Te,ot){for(let st=0;st<32;++st)ot[st]=+!!(Ce&1<<st);for(let st=0;st<32;++st)ot[st+32]=+!!(Te&1<<st);return ot})(ne,ae,this._binaryNumber),this._decimalNumber.fill(0),this._decimalPowerOfTwo.fill(0),this._decimalPowerOfTwo[0]=1;const ce=this._binaryNumber[63]===1;ce&&function(Ce){for(let Te=0;Te<64;++Te)Ce[Te]^=1;for(let Te=0;Te<64&&!(Ce[Te]^=1);++Te);}(this._binaryNumber);for(let Me=0;Me<64;++Me)this._binaryNumber[Me]&&Ee(this._decimalNumber,this._decimalPowerOfTwo),Ee(this._decimalPowerOfTwo,this._decimalPowerOfTwo);const he=[];let me=this._decimalNumber.length-1;for(ce&&he.push("-");!this._decimalNumber[me];)me-=1;for(let Me=me;Me>=0;--Me)he.push(String(this._decimalNumber[Me]));return he.join("")}};function _e(Y){return oe.int64ToString(Y)}function De(Y){return typeof Y=="object"&&"high"in Y&&"low"in Y}const We=Y=>"start"in Y&&"end"in Y&&"type"in Y,Ye=Y=>"segments"in Y;function pe(Y,ne,ae,ce){if(ne)if(Array.isArray(ne))ne.forEach(he=>pe(Y,he,ae,ce));else if(Ye(ne))(function(me,Me,Ce,Te){Me.segments.forEach(ot=>{pe(me,ot.start,Ce,Te),pe(me,ot.end,Ce,Te),pe(me,ot.relationship,Ce,Te)})})(Y,ne,ae,ce);else if(function(me){if(typeof me!="object"||me===null)throw new Error("Ogma can only retrieve nodes and relationships from Neo4j. Please make sure that your Cypher query returns nodes and edges, not values.");const Me=Object.keys(me.properties);for(const Ce of Me){const Te=me.properties[Ce];De(Te)&&(me.properties[Ce]=_e(Te))}if(me.identity!==void 0){if(De(me.identity)&&(me.identity=_e(me.identity)),function(Te){return"start"in Te&&"end"in Te}(me)){const Ce=me.start.identity||me.start,Te=me.end.identity||me.end;De(Ce)&&(me.start=_e(Ce)),De(Te)&&(me.end=_e(Te))}}else me.id&&(me.identity=me.id)}(ne),We(ne))ce.has(ne.identity)||(ce.add(ne.identity),Y.edges.push({id:ne.identity,source:ne.start,target:ne.end,data:{neo4jType:ne.type,neo4jProperties:ne.properties}}));else{const he=ne;ae.has(he.identity)||(ae.add(he.identity),Y.nodes.push({id:he.identity,attributes:{},data:{neo4jLabels:he.labels,neo4jProperties:he.properties}}))}}const ye={boolean:Y=>Y.toLowerCase()==="true",int:parseFloat,long:parseFloat,float:parseFloat,double:parseFloat,string:Y=>Y};function Ke(Y,ne,ae){const ce=Y.getElementsByTagName("data"),he={};for(let me=0;me<ce.length;me++){const Me=ce[me],Ce=Me.getAttribute("key");if(Ce===null)continue;const Te=ne[Ce];typeof Te>"u"?he[Ce]=Me.textContent:Me.textContent&&Me.textContent.length!==0&&(he[Te.name]=Te.parse(Me.textContent))}for(const me in ae)me in he||(he[me]=ae[me]);return he}function tt(Y){return Y.color?Y.color:Y.r&&Y.g&&Y.b?`rgb(${Y.r}, ${Y.g}, ${Y.b})`:void 0}const dt=new Set(["x","y","size","color","r","g","b","label"]);function it(Y){const ne={};for(const ae in Y)dt.has(ae)||Y[ae]===void 0||(ne[ae]=Y[ae]);return ne}i.gexf=function(ne){if(ne.indexOf("<gexf")===-1)throw new Error("not a GEXF file");const ae=function(H){const q=new Int32Array(H.length);for(let re=0,ue=H.length;re<ue;++re)q[re]=H.charCodeAt(re);return q}(ne),ce=function(H,q){let re,ue;const fe={tags:[],attributes:[],tokens:[]},ie=fe.tokens;let ge=$(H,q);for(;ge<H.length;){let Se=H[ge];if(Se===u){if(ge=$(H,++ge),H[ge]===f)for(ie.push(k);H[++ge]!==h;);else{re=ge,ge=se(H,re);const Le=B(fe,H,re,ge);for(ie.push(C,Le),Se=H[ge];Se!==h&&Se!==f;)ge=N(fe,H,ge),Se=H[ge];if(Se===f)for(ie.push(k);H[++ge]!==h;);}ge+=1}else{for(re=ge;H[++ge]!==u;);for(ue=ge-1;V(H[ue]);)--ue;ie.push(M,re,ue+1)}ge=$(H,ge)}return fe}(ae,ne.indexOf("<gexf ")),he={},me={};ce.tags.forEach((K,H)=>{const q=String.fromCharCode.apply(null,K);he[q]=H}),ce.attributes.forEach((K,H)=>{const q=String.fromCharCode.apply(null,K);me[q]=H});const Me=he.attributes,Ce=he.attribute,Te=he.node,ot=he.edge,st=he.default,It=he["viz:position"],Pt=he["viz:size"],Mt=he["viz:color"],Ht=he.attvalue,Bt=me.class,lt=me.id,kt=me.type,jt=me.title,Ft=me.label,Ct=me.source,vt=me.target,Vt=me.x,Qt=me.y,qn=me.r,mt=me.g,xt=me.b,gt=me.a,Ut=me.value,Wt=me.for,An=me.weight,On={float:1,double:1,integer:2,boolean:3,string:4,"list-string":5};let mn=0;const Mn=ce.tokens,kr=Mn.length,zi=new Array(16);let $t=0,xn=0,kn=0,z=!0;const U={},Z={};let G,le,Ne="",He="",Oe="",Be={attributes:{}},nt=0,pt=0,_t=0,ut=1,ht="",F=!1,j=!0,R=null,O=null;const W=[],J=[];let X=0,ee={};for(;mn<kr;){const K=Mn[mn];if(K===C)xn=$t,$t=Mn[mn+1],zi[kn]=$t,kn+=1,$t===Te?(R||(R=te(!0,U)),Be=R(),j=!0,ee=U):$t===ot&&(O||(O=te(!1,Z)),Be=O(),j=!1,ee=Z),mn+=2;else if(K===k){if(Ne&&$t===Ce){ee=z?U:Z;const H=On[He];let q=G;q&&(H===1?q=+q:H===2?q=0|+q:H===3?q=q==="true":H===5&&(q=q.split(" ").filter(re=>re))),ee[Ne]={title:Oe||Ne,default:q,type:H},Ne="",Oe="",He="",G=void 0}else if($t===Te&&kn===4)F&&Be.attributes&&(Be.attributes.color=`rgba(${nt}, ${pt}, ${_t}, ${ut})`,nt=0,pt=0,_t=0,ut=1,F=!1),Be.id||(Be.id=++X),W.push(Be);else if($t===ot&&kn===4)Be.id||(Be.id=++X),J.push(Be);else if($t===Ht&&kn===6&&ht){const H=(j?U:Z)[ht];if(H){if(le===void 0)le=H.default;else{const q=H.type;q&&(q===1?le=+le:q===2?le=0|+le:q===3?le=le==="true":q===5?le=le.split(" ").filter(re=>re).map(re=>de(re)):typeof ae=="string"&&(le=de(le)))}Be.data[ee[ht].title]=le}ht="",le=null}kn-=1,$t=xn,xn=zi[kn-2],mn+=1}else if(K===T){const H=Mn[mn+1],q=ne.substring(Mn[mn+2],Mn[mn+3]);if($t===Me)H===Bt&&(z=q!=="edge"&&q!=="edges");else if($t===Ce)H===lt?Ne=q:H===kt?He=q:H===jt&&(Oe=q);else if($t!==Te&&$t!==ot||kn!==4)if($t===It&&kn===5){if(H===Vt)Be.attributes.x=parseFloat(q);else if(H===Qt){const re=parseFloat(q);Be.attributes.y=re===0?re:-re}}else $t===Mt&&kn===5?(F=!0,H===qn?nt=parseInt(q):H===mt?pt=parseInt(q):H===xt?_t=parseInt(q):H===gt&&(ut=parseFloat(q))):$t===Pt&&kn===5?H===Ut&&(j?Be.attributes.radius=+q:Be.attributes.width=+q):$t===Ht&&kn===6&&(H===Wt||H===lt?ht=q:H===Ut&&(le=q));else H===lt?Be.id=q:H===Ft?Be.attributes.text=q:H===Ct?Be.source=q:H===vt?Be.target=q:H===An&&(Be.attributes.width=+q);mn+=4}else{if(K!==M)throw new Error(`at index ${mn}: token ${K}`);{const H=ne.substring(Mn[mn+1],Mn[mn+2]);$t===st&&(G=H),mn+=3}}}return{nodes:W,edges:J}},i.graphml=function(ne,ae){if(!ae){if(typeof DOMParser>"u")throw new Error("DOMParser is not available. You need to provide a DOMParser instance as second argument, if you are not in the browser environment");ae=new DOMParser}const ce=ae.parseFromString(ne,"application/xml"),he=ce.getElementsByTagName("key"),me=ce.getElementsByTagName("node"),Me=ce.getElementsByTagName("edge"),{definitions:Ce,defaults:Te}=function(Mt){const Ht={graph:{},node:{},edge:{}},Bt={graph:{},node:{},edge:{}};for(let lt=0;lt<Mt.length;lt++){const kt=Mt[lt],jt=kt.getAttribute("for")||"node",Ft=kt.getAttribute("id"),Ct=kt.getAttribute("attr.name"),vt=kt.getAttribute("attr.type")||"string",Vt=kt.getElementsByTagName("default"),Qt=Vt.length!==0?Vt[0].textContent:void 0;Ht[jt][Ft]={name:Ct,parse:ye[vt]},typeof Qt<"u"&&(Bt[jt][Ct]=Qt)}return{definitions:Ht,defaults:Bt}}(he),ot=[],st=new Set;for(let Pt=0;Pt<me.length;Pt++){const Mt=me[Pt],Ht=Mt.getAttribute("id"),Bt=Mt.getAttribute("href")||void 0,lt=Ke(Mt,Ce.node,Te.node);st.add(Ht);const kt={id:Ht,attributes:{x:lt.x,y:lt.y,radius:lt.size,color:tt(lt),text:lt.label},data:it(lt)};lt.x!==void 0&&(kt.attributes.x=lt.x),lt.y!==void 0&&(kt.attributes.y=lt.y),lt.size!==void 0&&(kt.attributes.radius=lt.size),lt.label!==void 0&&(kt.attributes.text=lt.label);const jt=tt(lt);jt!==void 0&&(kt.attributes.color=jt),Bt!==void 0&&(kt.data.href=Bt),ot.push(kt)}const It=[];for(let Pt=0;Pt<Me.length;Pt++){const Mt=Me[Pt],Ht=Mt.getAttribute("id")||Pt,Bt=Mt.getAttribute("source"),lt=Mt.getAttribute("target"),kt=Mt.getAttribute("xlink:href")||void 0;if(!st.has(Bt)||!st.has(lt))throw new Error(`Invalid edge: ${Bt} -> ${lt}`);const jt=Ke(Mt,Ce.edge,Te.edge),Ft={id:Ht,source:Bt,target:lt,attributes:{},data:it(jt)},Ct=tt(jt);Ct!==void 0&&(Ft.attributes.color=Ct),kt!==void 0&&(Ft.data.href=kt),It.push(Ft)}return{nodes:ot,edges:It}},i.janus=function(ne){const ae=[],ce=[];return o(typeof ne=="string"?JSON.parse(ne):ne,ae,ce),{nodes:ae,edges:ce}},i.json=function(ne,ae=ce=>ce){const ce=ae(JSON.parse(ne)),he=ce.nodes||[],me=ce.edges||[];for(let Me=0;Me<he.length;Me++){const Ce=he[Me];Ce.attributes||(Ce.attributes={}),typeof Ce.size=="string"&&(Ce.size=+Ce.size),typeof Ce.x=="string"&&(Ce.x=+Ce.x),typeof Ce.y=="string"&&(Ce.y=+Ce.y),s(Ce,"x"),s(Ce,"y"),s(Ce,"size","radius"),s(Ce,"color"),s(Ce,"text")}for(let Me=0;Me<me.length;Me++){const Ce=me[Me];Ce.attributes||(Ce.attributes={}),typeof Ce.size=="string"&&(Ce.size=+Ce.size),s(Ce,"size","width"),s(Ce,"color"),s(Ce,"text")}return{nodes:he,edges:me}},i.mtx=Y=>{const ne=Y.split(`
`).filter(he=>!he.startsWith("%")),[ae]=ne[0].split(" ").map(Number),ce=ne.slice(1).map(he=>he.split(" ").slice(0,2).map(Number)).filter(he=>he.length===2);return{nodes:Array.from({length:Number(ae)},(he,me)=>({id:me})),edges:ce.map(([he,me])=>({source:he%ae,target:me%ae}))}},i.neo4j=function(ne){let ae=typeof ne=="string"?JSON.parse(ne):ne;const ce={nodes:[],edges:[]},he=new Set,me=new Set;return(Me=>"queryKeys"in Me&&"values"in Me)(ae)&&(ae=function(Ce){const Te=[];return Ce.values.forEach(ot=>{const{nodes:st=[],relationships:It=[],segments:Pt=[]}=ot.adapted,Mt=[{segments:Pt,properties:{}}];Te.push({_fields:[...st,...It,...Mt]})}),{records:Te}}(ae)),ae.records.forEach(({_fields:Me})=>Me.forEach(Ce=>pe(ce,Ce,he,me))),ce},Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})},typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):r((n=typeof globalThis<"u"?globalThis:n||self).ogmaParsers={})}}),OO=tL({"node_modules/@linkurious/ogma-generators/dist/ogma-generators.umd.js"(e,t){var n,r;n=e,r=function(i){/**
* Ogma Generators
* @description Graphs Generators for Ogma
* @version 0.0.13 (built on Tue Nov 14 2023 10:49:46 GMT+0000 (Coordinated Universal Time))
* @author Alexander Milevski - Leo Nicolle - Sylvain Milan - Marco Liberati
* @license (c) Linkurious 2023. All rights reserved.
* @preserve
*/const s=Object.freeze(Object.defineProperty({__proto__:null,configure:({nodes:w=10,edges:S=10,texts:A=!1,scale:C=100}={})=>({nodes:w,edges:S,texts:A,scale:C}),generate:function({nodes:S,scale:A,texts:C,edges:k}){const T=[],M=[];for(let D=0;D<S;D++)T.push({id:D,attributes:{x:Math.random()*A,y:Math.random()*A,text:C?`Node ${D}`:void 0}});for(let D=0;D<k;D++)M.push({id:D,source:Math.random()*S|0,target:Math.random()*S|0,attributes:{text:C?`Edge ${D}`:void 0}});return{nodes:T,edges:M}}},Symbol.toStringTag,{value:"Module"})),o=Object.freeze(Object.defineProperty({__proto__:null,configure:({rows:w=4,columns:S=4,columnDistance:A=20,rowDistance:C=20,xmin:k=0,ymin:T=0}={})=>({rows:w,columns:S,columnDistance:A,rowDistance:C,xmin:k,ymin:T}),generate:function({rows:S,columns:A,columnDistance:C,rowDistance:k,xmin:T,ymin:M}){const D={nodes:[],edges:[]};let B=0;for(let I=0;I<S;++I)for(let N=0;N<A;++N){const V=I*A+N;D.nodes.push({id:V,attributes:{x:T+N*C,y:M+I*k}}),N!==A-1&&(D.edges.push({id:B,source:V,target:I*A+N+1}),B++),I!==S-1&&(D.edges.push({id:B,source:V,target:(I+1)*A+N}),B++)}return D}},Symbol.toStringTag,{value:"Module"})),a=Object.freeze(Object.defineProperty({__proto__:null,configure:({length:w=5,scale:S=100}={})=>({length:w,scale:S}),generate:function({length:S,scale:A}){const C={nodes:[],edges:[]};if(S<=0)return C;C.nodes.push({id:0,attributes:{x:Math.random()*A,y:Math.random()*A}});for(let k=1;k<S;++k)C.nodes.push({id:k,attributes:{x:Math.random()*A,y:Math.random()*A}}),C.edges.push({id:k-1,source:k-1,target:k});return C}},Symbol.toStringTag,{value:"Module"}));function l(w){return typeof w=="number"&&isFinite(w)?w:void 0}const c=Object.freeze(Object.defineProperty({__proto__:null,configure:function({children:S=2,height:A=3}={}){if(!function(k){return typeof k=="number"&&isFinite(k)&&k>0?k:void 0}(S))throw new TypeError('Invalid argument: "children" is not a positive number, was '+S);if(!function(k){return typeof k=="number"&&isFinite(k)&&k>=0?k:void 0}(A))throw new TypeError('Invalid argument: "height" is not a positive number, was '+A);return{children:S,height:A}},generate:function({children:S,height:A}){A+=1;const C=Math.pow(S,A),k=[],T=[];let M=1,D=0,B=0;for(let I=0;I<A;++I){const N=C/(M+1)/1.5;for(let V=0;V<M;++V){const $=D++;if(k.push({id:$,attributes:{x:(V+1)*N*10,y:20*I}}),I!==A-1)for(let Q=0;Q<S;++Q)T.push({id:B,source:$,target:$*S+Q+1}),B+=1}M*=S}return{nodes:k,edges:T}}},Symbol.toStringTag,{value:"Module"})),d=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:S=20,edges:A,p:C,scale:k=100}={}){if(!l(S)||S<3)throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was "+S);if(A!==void 0&&C!==void 0)throw new TypeError("Invalid argument: choose between options.edges and options.p");return A===void 0&&C===void 0&&(C=.1),C===void 0&&(C=-1),A===void 0&&(A=-1),{nodes:S,p:C,edges:A,scale:k}},generate:function(S){const A={nodes:[],edges:[]},C=S.nodes,k=S.p,T=S.scale;if(k>=0){let M=0;for(let D=0;D<C;D++){A.nodes.push({id:D,attributes:{x:Math.random()*T,y:Math.random()*T}});for(let B=0;B<D;B++)Math.random()<k&&A.edges.push({id:M++,source:D,target:B})}}else{const M=[],D=S.edges;for(let I=0;I<C;I++){A.nodes.push({id:I,attributes:{x:100*Math.random(),y:100*Math.random()}});for(let N=I+1;N<C;N++)M.push({source:I,target:N})}let B=M.length-1;for(let I=0;I<D;I++){const N=M.splice(Math.floor(Math.random()*B),1)[0];N.id=I,A.edges.push(N),B--}}return A}},Symbol.toStringTag,{value:"Module"})),u=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:S=40,m0:A=5,m:C=1,scale:k=100}={}){if(!l(S)||S<3)throw new TypeError("Invalid argument: options.nodes is not a number >= 3, was "+S);if(!l(A)||A>=S)throw new TypeError(`Invalid argument: options.m0 is not a number < ${S}, was ${A}`);if(!l(A)||C>=A)throw new TypeError(`Invalid argument: options.m is not a number <= ${A}, was ${C}`);if(!l(k)||k<0)throw new TypeError("Invalid argument: options.scale is not a number or is less than 0");return{nodes:S,m0:A,m:C,scale:k}},generate:function({scale:S,nodes:A,m0:C,m:k}){const T={nodes:[],edges:[]},M={},D=[],B=S/10;let I=0;for(let N=0;N<C;N++)T.nodes.push({id:N,attributes:{x:Math.random()*B,y:Math.random()*B}}),D[N]=0;for(let N=0;N<C;N++)for(let V=N+1;V<C;V++){const $={id:I++,source:N,target:V};M[$.source+"-"+$.target]=$,T.edges.push($),D[N]++,D[V]++}for(let N=C;N<A;N++){T.nodes.push({id:N,attributes:{x:Math.random()*S,y:Math.random()*S}}),D[N]=0;let V=0;for(let Q=0;Q<N;Q++)V+=D[Q];let $=0;for(let Q=0;Q<k;Q++){const se=Math.random();let te=0;for(let de=0;de<N;de++)if(!M[`${N}-${de}`]&&!M[`${de}-${N}`]&&(te=N===1?1:te+D[de]/V+$/(N-Q),se<=te)){$+=D[de]/V;const Ee={id:I++,source:N,target:de};M[`${Ee.source}-${Ee.target}`]=Ee,T.edges.push(Ee),D[N]++,D[de]++;break}}}return T}},Symbol.toStringTag,{value:"Module"})),h=Object.freeze(Object.defineProperty({__proto__:null,configure:function({nodes:S=50,width:A=100,height:C=100,x:k=0,y:T=0}={}){if(!isFinite(S)||S<1)throw new RangeError("Tree generator: number of nodes must be a positive integer");return{nodes:S,width:A,height:C,x:k,y:T}},generate:function({nodes:S,x:A,y:C,width:k,height:T}){const M=A-k/2,D=C-T/2;return{nodes:new Array(S).fill(0).map((B,I)=>({id:I,attributes:{x:M+Math.random()*k,y:D+Math.random()*T}})),edges:new Array(S-1).fill(0).map((B,I)=>({id:I,source:Math.floor(Math.sqrt(I)),target:I+1}))}}},Symbol.toStringTag,{value:"Module"})),g=5,p=10,m=10,f=2.7,y=.2;function _(w){return Math.pow(f,w)*p}function v(w){return g+_(w)/m}function x(w,S,A,C,k){if(A===0)return k;const T=_(A),M=v(A),D=M*y;let B=-Math.PI;const I=2*Math.PI/S,N=C.attributes.x||0,V=C.attributes.y||0;for(let $=0;$<S;++$){const Q={id:k,attributes:{x:N+T*Math.cos(B),y:V+T*Math.sin(B),radius:M}},se={id:k,source:C.id,target:k,attributes:{width:D}};w.nodes.push(Q),w.edges.push(se),k=x(w,S,A-1,Q,k+1),B+=I}return k}const b=Object.freeze(Object.defineProperty({__proto__:null,configure:function({depth:S=3,breadth:A=3,nodes:C}){return C!==void 0?(A=5,S=Math.ceil(Math.log(C)/Math.log(5))):C=-1,{depth:S,breadth:A,nodes:C}},generate:function({depth:S,breadth:A,nodes:C}){const k={id:0,attributes:{x:0,y:0,radius:v(S+1)}},T={nodes:[k],edges:[]};return x(T,A,S,k,1),C!==void 0&&C>=0&&(T.nodes=T.nodes.slice(0,C),T.edges=T.edges.slice(0,Math.max(C-1,0))),T}},Symbol.toStringTag,{value:"Module"}));i.balancedTree=c,i.barabasiAlbert=u,i.erdosRenyi=d,i.flower=b,i.grid=o,i.path=a,i.random=s,i.randomTree=h,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})},typeof e=="object"&&typeof t<"u"?r(e):typeof define=="function"&&define.amd?define(["exports"],r):r((n=typeof globalThis<"u"?globalThis:n||self).ogmaGenerators={})}}),Jt=class{constructor(e){this._ogma=e}},yx={};function rL(e,t,n,r,i,s){let o=0;for(let a=0;a<r;a++)for(let l=0;l<r;l++){const c=s[a],d=s[l];if(c!==d){const u=e[c][d]*i,h=1/(u*u);if(h){const g=t[c]-t[d],p=n[c]-n[d];o+=h*Math.pow(u-Math.sqrt(g*g+p*p),2)}}}return o}function iL(e,t,n,r,i,s,o){let a=0;if(i===-1)return 0;for(let l=0;l<r;l++)for(let c=0;c<r;c++){const d=o[l],u=o[c];if(d!==u&&(d===i||u===i)){const h=e[d][u]*s,g=1/(h*h);if(g){const p=t[d]-t[u],m=n[d]-n[u];a+=g*Math.pow(h-Math.sqrt(p*p+m*m),2)}}}return a}function D_(e,t,n,r,i,s,o,a){o=o||0;let l=0,c=0;for(let d=0;d<r;d++)for(let u=0;u<r;u++){const h=a[d],g=a[u];if(h!==g){const p=e[h][g]*s,m=1/(p*p);if(m){const f=t[h]-t[g],y=n[h]-n[g],_=m*Math.pow(p-Math.sqrt(f*f+y*y),2);l+=_,h!==i&&g!==i||(c+=_)}}}return(1-o)*l+o*c}function z_(e,t,n,r,i,s,o,a,l){o=o||0;const c=t,d=n;(i=i===void 0?-1:i)===-1&&(o=0);const u=t[i],h=n[i];for(let g=0;g<r;g++){const p=a[g],m=l(e[i][g]),f=o/(m*m);if(m===0)continue;let y=0,_=0,v=0;const x=t[p],b=n[p];for(let S=0;S<r;S++){const A=a[S];if(A!==p){const C=e[p][A]*s,k=1/(C*C),T=t[A],M=n[A];if(k!==0){const D=x-T,B=b-M,I=D*D+B*B,N=I<1e-12?0:1/Math.sqrt(I);_+=(1-o)*k*(T+C*(x-T)*N),v+=(1-o)*k*(M+C*(b-M)*N)}y+=k}}const w=(1-o)*y+f;if(w!==0){const S=x-u,A=b-h;let C=S*S+A*A;C=C<1e-12?0:1/Math.sqrt(C);const k=m===0?0:f*(m*C);c[p]=(_+k*t[p])/w,d[p]=(v+k*n[p])/w}}return{x:c,y:d}}function BO(e,t,n,r,i,s,o,a){o=o||0;const l=t,c=n;let d;(i=i===void 0?-1:i)===-1&&(o=0);for(let u=0;u<r;u++){const h=a[u];let g=0,p=0,m=0;const f=t[h],y=n[h];for(let _=0;_<r;_++){const v=a[_];let x=0;if(v!==h){let b=0;const w=e[h][v]*s,S=1/(w*w);h!==i&&v!==i||(b=S);const A=(1-o)*S+o*b;if(g+=A,S!==0){const C=t[v],k=n[v],T=f-C,M=y-k,D=T*T+M*M;D>1e-6&&(x=1/Math.sqrt(D)),p+=A*(C+w*(f-C)*x),m+=A*(k+w*(y-k)*x)}}}d=g,d!==0&&(l[h]=p/d,c[h]=m/d)}return{x:l,y:c}}function vx(e=(i,s)=>i-s,t=[],n={},r=i=>i){let i=t.length;function s(a){for(;;){const l=2*a+1,c=l+1;let d=a;if(l<i&&e(t[l],t[d])<0&&(d=l),c<i&&e(t[c],t[d])<0&&(d=c),d===a)return a;const u=t[d];t[d]=t[a],t[a]=u,n[r(t[d])]=d,n[r(u)]=a,a=d}}return{get keys(){return n},get size(){return i},heapify:s,pop(){if(i<=0)return;if(i===1)return i--,t[0];const a=t[0];return t[0]=t[i-1],i--,s(0),a},decreaseKey(a,l){for(l!==void 0&&(t[a]=l,n[r(l)]=a);a>0;){const c=a-1>>1;if(!(e(t[c],t[a])>0))break;{const d=t[a];t[a]=t[c],t[c]=d,n[r(t[a])]=a,n[r(d)]=c,a=c}}return a},min:()=>t[0],remove(a){return this.decreaseKey(a,Number.NEGATIVE_INFINITY),this.pop()},push(a){i++;let l=i-1;for(t[l]=a;l>0;){const c=l-1>>1;if(!(e(t[c],t[l])>0))break;{const d=t[l];t[l]=t[c],t[c]=d,n[r(t[l])]=l,n[r(d)]=c,l=c}}return l},empty:()=>i<=0,toArray:()=>t.slice(0,i)}}function xx({sources:e,targets:t,weights:n,source:r,target:i,undirected:s=!1,indexes:o,N:a}){if(!(a=o?o.length:a)||!isFinite(a)||a===0)throw new Error("Invalid number of nodes "+a);const l=new Float32Array(a),c=new Int32Array(a),d={},u=Number.POSITIVE_INFINITY;if(!n){n=[];for(let m=0;m<a;m++)n[m]=1}if(!o){o=new Uint32Array(a);for(let m=0;m<a;m++)o[m]=m+1}for(let m=0;m<a;m++)l[m]=u,c[m]=-1,d[o[m]]=m;l[d[r]]=0;let h=!1;for(let m=1;m<=a;m++){for(let f=0;f<n.length;f++){const y=e[f],_=t[f],v=d[y],x=d[_];if(v!==void 0&&x!==void 0){const b=n[f];let w=l[v]+b;l[v]!==u&&w<l[x]&&(l[x]=w,c[x]=y,h=!0),s&&(w=l[x]+b,l[x]!==u&&w<l[v]&&(l[v]=w,c[v]=_,h=!0))}}if(!h)break}if(h)for(let m=0;m<n.length;m++){const f=e[m],y=t[m],_=d[f],v=d[y];if(_!==void 0&&v!==void 0){const x=n[m];if(l[_]+x<l[v])return null}}let g=null,p=null;if(i!==void 0){const m=d[i];if(m!==void 0&&l[m]!==u){g=[];for(let f=i;f!==-1;f=c[d[f]])g.push(f);g=g.reverse(),p=l[m]}}return{distances:l,path:g,pathLength:p}}function bx(e,t,n,r,i,s,o){r=r||e.map((f,y)=>y+1);const a=r.length,l=new Float32Array(a),c=new Int32Array(a),d=new Uint32Array(a),u=Number.POSITIVE_INFINITY,h={};if(a===0)return{distances:l,path:null,pathLength:null};if(!i){i={};for(let f=0;f<a;f++)i[r[f]]=f}for(let f=0;f<a;f++)l[f]=u,c[f]=-1,d[f]=h[f]=f;const g=vx((f,y)=>l[f]-l[y],d,h);for(l[i[t]]=0,g.decreaseKey(h[i[t]]);g.size!==0;){const f=g.pop(),y=l[f],_=e[f];if(y===u)break;for(let v=0,x=_.nodes.length;v<x;v++){const b=_.nodes[v],w=s?1:o?o(r[f],b):_.weights?_.weights[v]:1,S=i[b];if(S===void 0)continue;const A=y+w;A<l[S]&&(l[S]=A,c[S]=f,g.decreaseKey(h[S]))}}let p=null,m=null;if(n!==void 0){const f=i[n];if(l[f]!==u){p=[];for(let y=f;y!==-1;y=c[y])p.push(r[y]);p.reverse(),m=l[n]}}return{distances:l,path:p,pathLength:m}}function O_({sources:e,targets:t,weights:n,indexes:r,adjacency:i,undirected:s,ignoreWeights:o}){const a=Number.POSITIVE_INFINITY,l=r?r.length:i.length;if(!r){r=new Uint32Array(l);for(let m=0;m<l;m++)r[m]=m+1}const c=new Array(l),d={};for(let m=0;m<l;m++){c[m]=new Float32Array(l);for(let f=0;f<l;f++)c[m][f]=m===f?0:a;d[r[m]]=m}const u=l,h=n.length;e=e.slice(),t=t.slice(),n=n.slice();for(let m=0;m<l;m++)e[h+m]=u,t[h+m]=r[m],n[h+m]=0,o&&(n[m]=1);const g=xx({sources:e,targets:t,weights:n,undirected:s,N:l+1,source:u});if(g===null)throw new Error("Graph has negative weight loops");const p=g.distances;for(let m=0;m<n.length;m++){const f=d[e[m]],y=d[t[m]];f!==void 0&&y!==void 0&&(n[m]=n[m]+p[f]-p[y])}e=e.slice(0,h),t=t.slice(0,h),n=n.slice(0,h);for(let m=0;m<l;m++){const f=r[m],{distances:y}=bx(i,f,void 0,r,d,!!o);for(let _=0;_<l;_++)c[m][_]=m===_?0:y[_]}return c}function Lc(e,t){for(let n=1,r=e.length;n<r;n++){const i=e[n];let s=n;for(;s>0&&t.get(e[s-1])>t.get(i);)e[s]=e[s-1],--s;e[s]=i}return e}function jO(e,t){for(let n=1,r=e.length;n<r;n++){const i=e[n];let s=n;for(;s>0&&t.get(e[s-1])<t.get(i);)e[s]=e[s-1],--s;e[s]=i}return e}function Vn(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function B_(e){return Array.isArray(e)?e:[e]}function sL(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n];if(Array.isArray(r))for(let i=0;i<r.length;++i)t.push(r[i]);else t.push(r)}return t}function UO(...e){if(e.length===0)return[];const t=e[0].constructor;let n=0;for(const s of e)n+=s.length;const r=new t(n);let i=0;for(const s of e){for(let o=0;o<s.length;o++)r[i+o]=s[o];i+=s.length}return r}function $O(e,t){const n=e.indexOf(t);return n!==-1&&(e.splice(n,1),!0)}function oL(e,t){let n,r,i=0,s=e.length-1;for(;i<=s;)if(n=(i+s)/2|0,r=e[n],r<t)i=n+1;else{if(!(r>t))return n;s=n-1}return-1}pu(yx,{CyclesFinder:()=>kL,Quadtree:()=>xL,bellmanFord:()=>xx,betweenness:()=>TL,circlePack:()=>pL,circleSpread:()=>uB,constrainedStress:()=>D_,convexhull:()=>cB,detectCyclesDirected:()=>SL,detectCyclesUndirected:()=>ZB,detectCyclesUndirectedDFS:()=>JB,dijkstra:()=>bx,distanceStress:()=>iL,johnson:()=>O_,kruskal:()=>CL,largestEmptyCircle:()=>cL,minDisk:()=>Ex,minHeap:()=>vx,removeRadialOverlap:()=>U_,stressMinimizationStep:()=>z_,stressMinimizationStepGeneral:()=>BO,weightedStress:()=>rL});var Bd=(e,t)=>{const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return n},vs=11102230246251565e-32,Kn=134217729,GO=(3+8*vs)*vs;function Ff(e,t,n,r,i){let s,o,a,l,c=t[0],d=r[0],u=0,h=0;d>c==d>-c?(s=c,c=t[++u]):(s=d,d=r[++h]);let g=0;if(u<e&&h<n)for(d>c==d>-c?(o=c+s,a=s-(o-c),c=t[++u]):(o=d+s,a=s-(o-d),d=r[++h]),s=o,a!==0&&(i[g++]=a);u<e&&h<n;)d>c==d>-c?(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++u]):(o=s+d,l=o-s,a=s-(o-l)+(d-l),d=r[++h]),s=o,a!==0&&(i[g++]=a);for(;u<e;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=t[++u],s=o,a!==0&&(i[g++]=a);for(;h<n;)o=s+d,l=o-s,a=s-(o-l)+(d-l),d=r[++h],s=o,a!==0&&(i[g++]=a);return s===0&&g!==0||(i[g++]=s),g}function VO(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function mu(e){return new Float64Array(e)}var HO=(3+16*vs)*vs,WO=(2+12*vs)*vs,XO=(9+64*vs)*vs*vs,Ra=mu(4),ZE=mu(8),JE=mu(12),QE=mu(16),ur=mu(4);function YO(e,t,n,r,i,s,o){let a,l,c,d,u,h,g,p,m,f,y,_,v,x,b,w,S,A;const C=e-i,k=n-i,T=t-s,M=r-s;x=C*M,h=Kn*C,g=h-(h-C),p=C-g,h=Kn*M,m=h-(h-M),f=M-m,b=p*f-(x-g*m-p*m-g*f),w=T*k,h=Kn*T,g=h-(h-T),p=T-g,h=Kn*k,m=h-(h-k),f=k-m,S=p*f-(w-g*m-p*m-g*f),y=b-S,u=b-y,Ra[0]=b-(y+u)+(u-S),_=x+y,u=_-x,v=x-(_-u)+(y-u),y=v-w,u=v-y,Ra[1]=v-(y+u)+(u-w),A=_+y,u=A-_,Ra[2]=_-(A-u)+(y-u),Ra[3]=A;let D=VO(4,Ra),B=WO*o;if(D>=B||-D>=B||(u=e-C,a=e-(C+u)+(u-i),u=n-k,c=n-(k+u)+(u-i),u=t-T,l=t-(T+u)+(u-s),u=r-M,d=r-(M+u)+(u-s),a===0&&l===0&&c===0&&d===0)||(B=XO*o+GO*Math.abs(D),D+=C*d+M*a-(T*c+k*l),D>=B||-D>=B))return D;x=a*M,h=Kn*a,g=h-(h-a),p=a-g,h=Kn*M,m=h-(h-M),f=M-m,b=p*f-(x-g*m-p*m-g*f),w=l*k,h=Kn*l,g=h-(h-l),p=l-g,h=Kn*k,m=h-(h-k),f=k-m,S=p*f-(w-g*m-p*m-g*f),y=b-S,u=b-y,ur[0]=b-(y+u)+(u-S),_=x+y,u=_-x,v=x-(_-u)+(y-u),y=v-w,u=v-y,ur[1]=v-(y+u)+(u-w),A=_+y,u=A-_,ur[2]=_-(A-u)+(y-u),ur[3]=A;const I=Ff(4,Ra,4,ur,ZE);x=C*d,h=Kn*C,g=h-(h-C),p=C-g,h=Kn*d,m=h-(h-d),f=d-m,b=p*f-(x-g*m-p*m-g*f),w=T*c,h=Kn*T,g=h-(h-T),p=T-g,h=Kn*c,m=h-(h-c),f=c-m,S=p*f-(w-g*m-p*m-g*f),y=b-S,u=b-y,ur[0]=b-(y+u)+(u-S),_=x+y,u=_-x,v=x-(_-u)+(y-u),y=v-w,u=v-y,ur[1]=v-(y+u)+(u-w),A=_+y,u=A-_,ur[2]=_-(A-u)+(y-u),ur[3]=A;const N=Ff(I,ZE,4,ur,JE);x=a*d,h=Kn*a,g=h-(h-a),p=a-g,h=Kn*d,m=h-(h-d),f=d-m,b=p*f-(x-g*m-p*m-g*f),w=l*c,h=Kn*l,g=h-(h-l),p=l-g,h=Kn*c,m=h-(h-c),f=c-m,S=p*f-(w-g*m-p*m-g*f),y=b-S,u=b-y,ur[0]=b-(y+u)+(u-S),_=x+y,u=_-x,v=x-(_-u)+(y-u),y=v-w,u=v-y,ur[1]=v-(y+u)+(u-w),A=_+y,u=A-_,ur[2]=_-(A-u)+(y-u),ur[3]=A;const V=Ff(N,JE,4,ur,QE);return QE[V-1]}function Hu(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,c=Math.abs(o+a);return Math.abs(l)>=HO*c?l:-YO(e,t,n,r,i,s,c)}var KE=Math.pow(2,-52),Wu=new Uint32Array(512),aL=class lL{static from(t,n=KO,r=eB){const i=t.length,s=new Float64Array(2*i);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new lL(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,c=-1/0,d=-1/0;for(let C=0;C<o;C++){const k=t[2*C],T=t[2*C+1];k<a&&(a=k),T<l&&(l=T),k>c&&(c=k),T>d&&(d=T),this._ids[C]=C}const u=(a+c)/2,h=(l+d)/2;let g,p,m;for(let C=0,k=1/0;C<o;C++){const T=Rf(u,h,t[2*C],t[2*C+1]);T<k&&(g=C,k=T)}const f=t[2*g],y=t[2*g+1];for(let C=0,k=1/0;C<o;C++){if(C===g)continue;const T=Rf(f,y,t[2*C],t[2*C+1]);T<k&&T>0&&(p=C,k=T)}let _=t[2*p],v=t[2*p+1],x=1/0;for(let C=0;C<o;C++){if(C===g||C===p)continue;const k=JO(f,y,_,v,t[2*C],t[2*C+1]);k<x&&(m=C,x=k)}let b=t[2*m],w=t[2*m+1];if(x===1/0){for(let T=0;T<o;T++)this._dists[T]=t[2*T]-t[0]||t[2*T+1]-t[1];il(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let k=0;for(let T=0,M=-1/0;T<o;T++){const D=this._ids[T],B=this._dists[D];B>M&&(C[k++]=D,M=B)}return this.hull=C.subarray(0,k),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Hu(f,y,_,v,b,w)<0){const C=p,k=_,T=v;p=m,_=b,v=w,m=C,b=k,w=T}const S=QO(f,y,_,v,b,w);this._cx=S.x,this._cy=S.y;for(let C=0;C<o;C++)this._dists[C]=Rf(t[2*C],t[2*C+1],S.x,S.y);il(this._ids,this._dists,0,o-1),this._hullStart=g;let A=3;r[g]=n[m]=p,r[p]=n[g]=m,r[m]=n[p]=g,i[g]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(f,y)]=g,s[this._hashKey(_,v)]=p,s[this._hashKey(b,w)]=m,this.trianglesLen=0,this._addTriangle(g,p,m,-1,-1,-1);for(let C,k,T=0;T<this._ids.length;T++){const M=this._ids[T],D=t[2*M],B=t[2*M+1];if(T>0&&Math.abs(D-C)<=KE&&Math.abs(B-k)<=KE||(C=D,k=B,M===g||M===p||M===m))continue;let I=0;for(let se=0,te=this._hashKey(D,B);se<this._hashSize&&(I=s[(te+se)%this._hashSize],I===-1||I===r[I]);se++);I=n[I];let N,V=I;for(;N=r[V],Hu(D,B,t[2*V],t[2*V+1],t[2*N],t[2*N+1])>=0;)if(V=N,V===I){V=-1;break}if(V===-1)continue;let $=this._addTriangle(V,M,r[V],-1,-1,i[V]);i[M]=this._legalize($+2),i[V]=$,A++;let Q=r[V];for(;N=r[Q],Hu(D,B,t[2*Q],t[2*Q+1],t[2*N],t[2*N+1])<0;)$=this._addTriangle(Q,M,N,i[M],-1,i[Q]),i[M]=this._legalize($+2),r[Q]=Q,A--,Q=N;if(V===I)for(;N=n[V],Hu(D,B,t[2*N],t[2*N+1],t[2*V],t[2*V+1])<0;)$=this._addTriangle(N,M,V,-1,i[V],i[N]),this._legalize($+2),i[N]=$,r[V]=V,A--,V=N;this._hullStart=n[M]=V,r[V]=n[Q]=M,r[M]=Q,s[this._hashKey(D,B)]=M,s[this._hashKey(t[2*V],t[2*V+1])]=V}this.hull=new Uint32Array(A);for(let C=0,k=this._hullStart;C<A;C++)this.hull[C]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(qO(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=Wu[--s];continue}const c=a-a%3,d=l+(t+1)%3,u=c+(a+2)%3,h=n[o],g=n[t],p=n[d],m=n[u];if(ZO(i[2*h],i[2*h+1],i[2*g],i[2*g+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=h;const f=r[u];if(f===-1){let _=this._hullStart;do{if(this._hullTri[_]===u){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,f),this._link(a,r[o]),this._link(o,u);const y=c+(a+1)%3;s<Wu.length&&(Wu[s++]=y)}else{if(s===0)break;t=Wu[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}};function qO(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Rf(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function ZO(e,t,n,r,i,s,o,a){const l=e-o,c=t-a,d=n-o,u=r-a,h=i-o,g=s-a,p=d*d+u*u,m=h*h+g*g;return l*(u*m-p*g)-c*(d*m-p*h)+(l*l+c*c)*(d*g-u*h)<0}function JO(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,d=o*o+a*a,u=l*l+c*c,h=.5/(o*c-a*l),g=(c*d-a*u)*h,p=(o*u-l*d)*h;return g*g+p*p}function QO(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,c=s-t,d=o*o+a*a,u=l*l+c*c,h=.5/(o*c-a*l);return{x:e+(c*d-a*u)*h,y:t+(o*u-l*d)*h}}function il(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{let i=n+1,s=r;cc(e,n+r>>1,i),t[e[n]]>t[e[r]]&&cc(e,n,r),t[e[i]]>t[e[r]]&&cc(e,i,r),t[e[n]]>t[e[i]]&&cc(e,n,i);const o=e[i],a=t[o];for(;;){do i++;while(t[e[i]]<a);do s--;while(t[e[s]]>a);if(s<i)break;cc(e,i,s)}e[n+1]=e[s],e[s]=o,r-i+1>=s-n?(il(e,t,i,r),il(e,t,n,s-1)):(il(e,t,n,s-1),il(e,t,i,r))}}function cc(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function KO(e){return e[0]}function eB(e){return e[1]}function cL(e,t=1,n=0,r,i){if(!r||!i){const u=e.map(g=>[g.x,g.y]),h=aL.from(u,g=>g[0],g=>g[1]);r=Bd(h.triangles,u),i=Bd(h.hull,u)}if(!i)return[];const s=n*n,o=[],a={};for(let u=0;u<r.length;u+=3)if(tB(i,wx(r[u],r[u+1],r[u+2]))){const h=rB(r[u],r[u+1],r[u+2]);h>s&&(o.push(u),a[u]=h)}if(o.length===0)return[];o.sort((u,h)=>a[u]-a[h]);let l=o[0],c=a[l];const d=[];for(let u=0;u<o.length;u++){const h=o[u],g=a[h];g>c&&g>s&&(l=h,c=g,d.push(l),d.length>t&&d.shift())}return d.map(u=>nB(r[u],r[u+1],r[u+2]))}function tB(e,t){const n=e.length,r=e[n-1],[i,s]=t;let[o,a]=r,l=!1;for(let c=0;c<n;c++){const d=e[c],[u,h]=d;h>s!=a>s&&i<(o-u)*(s-h)/(a-h)+u&&(l=!l),o=u,a=h}return l}function nB(e,t,n){const r=wx(e,t,n);let i=0;for(let s=0;s<3;s++){const o=arguments[s],a=o[0]-r[0],l=o[1]-r[1],c=Math.sqrt(a*a+l*l);c>i&&(i=c)}return[r[0],r[1],i]}function rB(e,t,n){const[r,i]=wx(e,t,n),[s,o]=e,a=r-s,l=i-o;return a*a+l*l}function wx(e,t,n){const r=[(e[0]+t[0])/2,(e[1]+t[1])/2],i=[(t[0]+n[0])/2,(t[1]+n[1])/2],s=-1/((t[1]-e[1])/(t[0]-e[0])),o=-1/((n[1]-t[1])/(n[0]-t[0])),a=r[1]-s*r[0],l=(a-(i[1]-o*i[0]))/(o-s);return[l,s*l+a]}function Ex(e,t,n,r){let i;if(r)i=r;else{i=new Uint32Array(e.length);for(let v=0,x=e.length;v<x;v++)i[v]=v}let s=e[i[0]],o=s,a=t[i[0]],l=a;for(let v=1;v<i.length;v++){const x=i[v],b=e[x],w=t[x];b<s&&(s=b),b>o&&(o=b),w<a&&(a=w),w>l&&(l=w)}const c=(s+o)/2,d=(a+l)/2;for(let v=0;v<i.length;v++){const x=i[v];e[x]-=c,t[x]-=d}function u(v,x,b,w,S,A){const C=b-A+1e-9*Math.max(b,A,1),k=w-v,T=S-x;return C>0&&C*C>k*k+T*T}function h(v,x,b,w,S,A,C){for(let k=0;k<w.length;++k){const T=w[k];if(!u(v,x,b,S[T],A[T],C[T]))return!1}return!0}function g(v,x,b,w,S,A){const C=w-v,k=S-x,T=A-b,M=Math.sqrt(C*C+k*k);return[(v+w+C/M*T)/2,(x+S+k/M*T)/2,(M+b+A)/2]}function p(v,x,b,w,S,A,C,k,T){const M=(v+w+C)/3,D=(x+S+k)/3,B=v-M,I=x-D,N=w-M,V=S-D,$=C-M,Q=k-D,se=B-N,te=B-$,de=I-V,Ee=I-Q,oe=A-b,_e=T-b,De=B*B+I*I-b*b,We=De-N*N-V*V+A*A,Ye=De-$*$-Q*Q+T*T,pe=te*de-se*Ee,ye=(de*Ye-Ee*We)/(2*pe)-B,Ke=(Ee*oe-de*_e)/pe,tt=(te*We-se*Ye)/(2*pe)-I,dt=(se*_e-te*oe)/pe,it=Ke*Ke+dt*dt-1,Y=2*(b+ye*Ke+tt*dt),ne=ye*ye+tt*tt-b*b,ae=-(Math.abs(it)>1e-6?(Y+Math.sqrt(Y*Y-4*it*ne))/(2*it):ne/Y);return[M+B+ye+Ke*ae,D+I+tt+dt*ae,ae]}function m(v,x,b,w){switch(v.length){case 1:const S=v[0];return function(B,I,N){return[B,I,N]}(x[S],b[S],w[S]);case 2:const[A,C]=v;return g(x[A],b[A],w[A],x[C],b[C],w[C]);case 3:const[k,T,M]=v;return p(x[k],b[k],w[k],x[T],b[T],w[T],x[M],b[M],w[M]);default:return null}}function f(v,x,b,w,S,A){const C=b-A,k=w-v,T=S-x;return C<0||C*C<k*k+T*T}function y(v,x,b,w,S){const A=b[x],C=w[x],k=S[x];if(h(A,C,k,v,b,w,S))return[x];for(let T=0;T<v.length;++T){const M=v[T],D=b[M],B=w[M],I=S[M];if(f(A,C,k,D,B,I)){const[N,V,$]=g(D,B,I,A,C,k);if(h(N,V,$,v,b,w,S))return[v[T],x]}}for(let T=0;T<v.length-1;++T)for(let M=T+1;M<v.length;++M){const D=v[T],B=v[M],I=b[D],N=w[D],V=S[D],$=b[B],Q=w[B],se=S[B],te=g(I,N,V,$,Q,se);if(f(te[0],te[1],te[2],A,C,k)){const de=g(I,N,V,A,C,k);if(f(de[0],de[1],de[2],$,Q,se)){const Ee=g($,Q,se,A,C,k);if(f(Ee[0],Ee[1],Ee[2],I,N,V)){const oe=p(I,N,V,$,Q,se,A,C,k);if(h(oe[0],oe[1],oe[2],v,b,w,S))return[D,B,x]}}}}throw new Error}i=function(x){for(let b=x.length-1;b>=0;b--){let w=Math.floor(Math.random()*(b+1));w=Math.max(Math.min(w,b),0);const S=x[b];x[b]=x[w],x[w]=S}return x}(i),n=n||new Array(e.length).fill(0);const _=function(x,b,w,S,A){let C=null,k=[],T=0;for(;T<b;){const M=x[T];C&&u(C[0],C[1],C[2],w[M],S[M],A[M])?T++:(k=y(k,M,w,S,A),C=m(k,w,S,A),T=0)}return C}(i,i.length,e,t,n);_[0]+=c,_[1]+=d;for(let v=0;v<i.length;v++){const x=i[v];e[x]+=c,t[x]+=d}return _}var dL=[1/0,1/0,-1/0,-1/0];function Zg(e,t,n,r,i,s={x:0,y:0}){const o=Math.cos(i),a=Math.sin(i),l=e-n,c=t-r;return s.x=o*l-a*c+n,s.y=a*l+o*c+r,s}function iB(e,t,n=0,r={x:0,y:0}){return r.x=e.x+n*Math.sin(t),r.y=e.y+n*Math.cos(t),r}var En=(e,t,n,r)=>Math.hypot(e-n,t-r);function sg(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function uL(e){const t=Math.sqrt(e.x*e.x+e.y*e.y);return e.x/=t,e.y/=t,e}function j_(e){return 180*e/Math.PI}function sB(e){return e*Math.PI/180}function hL(e,t){return e.minX-=t,e.minY-=t,e.maxX+=t,e.maxY+=t,e.width===void 0&&(e.width=e.maxX-e.minX),e.height===void 0&&(e.height=e.maxY-e.minY),e.width+=2*t,e.height+=2*t,e}function Sx(e,t,n,r,i,s){const o=r-e,a=i-t,l=Math.sqrt(o*o+a*a);if(l>n+s||l<Math.abs(n-s))return null;const c=(n*n-s*s+l*l)/(2*l),d=e+o*c/l,u=t+a*c/l,h=Math.sqrt(n*n-c*c),g=h/l*-a,p=o*(h/l);return[[d+g,u+p],[d-g,u-p]]}function Ax(e,t,n,r,i,s){if(e-i>=0&&n-i<0)return 1;if(e-i<0&&n-i>=0)return-1;if(e-i==0&&n-i==0)return t-r>=0||r-s>=0?t-r:r-t;const o=(e-i)*(r-s)-(n-i)*(t-s);return o<0?1:o>0?-1:(e-i)*(e-i)+(t-s)*(t-s)-((n-i)*(n-i)+(r-s)*(r-s))}function oB([e,t,n],r,i){const s=Math.abs(e-r),o=Math.abs(t-i);return s+o<=n||!(s>n||o>n)&&Math.sqrt(s*s+o*o)<n+1e-12}function aB(e,t,n,r){const i=e[0]-t,s=e[1]-n,o=e[2]-r;return i*i+s*s<o*o+1e-6}function kx(e,t,n,r,i,s,o){const a=e-Math.max(r,Math.min(s,e)),l=t-Math.max(i,Math.min(o,t));return a*a+l*l<n*n}function gL(e,t,n,r,i,s,o,a={x:0,y:0}){const l=a||{x:0,y:0};let c,d,u,h;if(n===e){const y=e-i,_=o*o-y*y;if(_<0)return null;const v=Math.sqrt(_);c=e,u=e,d=s+v,h=s-v}else{const y=(r-t)/(n-e),_=t-y*e,v=_-s,x=y*y+1,b=2*(y*v-i),w=b*b-4*x*(i*i+v*v-o*o);if(w<0)return null;const S=-b,A=Math.sqrt(w),C=2*x;c=(S+A)/C,u=(S-A)/C,d=y*c+_,h=y*u+_}const g=e-c,p=t-d,m=e-u,f=t-h;return g*g+p*p<m*m+f*f?(l.x=c,l.y=d):(l.x=u,l.y=h),l}function U_({X:e,Y:t,sizes:n,indexes:r,R:i,center:s,gap:o=0,epsilon:a=.001,maxLoops:l=5,inPlace:c=!0}){const d=r.length,u=s[0],h=s[1];let g=d;c||(e=e.slice(),t=t.slice());const p=Sx,m=Ax,f=r.slice().sort((k,T)=>m(e[k],t[k],e[T],t[T],u,h)),y=f[d-1],_=e[y],v=t[y];let x=!1;for(let k=0;k<g-1;k++){let T=k%d,M=(k+1)%d;k===-1&&(T=d-1,M=0),T=f[T],M=f[M];const D=e[T],B=t[T];let I=e[M],N=t[M];const V=n[T]+n[M]+o;let $=m(D,B,I,N,u,h);if($===-1&&x&&($=1),!(V>i)){if($===1||V-En(D,B,I,N)>a){const Q=p(u,h,i,D,B,V);if(Q){const se=Q[0];x=I>u&&se[0]<u,I=e[M]=se[0],N=t[M]=se[1]}}else x=!1;if(k%d==d-2){const Q=f[d-1],se=f[0];if(t[Q]>h&&t[se]>h&&e[Q]-n[Q]<e[se]+n[Q]){let te=0;for(g=Math.min(d*l,g+d);t[f[Q]]>h&&t[f[0]]>h&&e[f[Q]]<e[f[0]]&&++te<d;){const de=f.pop();de&&f.unshift(de)}}}}}const b=_-u,w=v-h,S=e[y]-u,A=t[y]-h,C=b===S?0:Math.abs(Math.acos((b*S+w*A)/(Math.sqrt(b*b+w*w)*Math.sqrt(S*S+A*A))));if(C!==0){const k=Math.sin(-C),T=Math.cos(-C);let M;for(let D=0;D<d;D++){M=f[D];const B=e[M]-u,I=t[M]-h;e[M]=B*T-I*k+u,t[M]=B*k+I*T+h}}return{X:e,Y:t}}function eS(e,t,n,r,i,s){const o={},a=n[e];let l=a,c=0;const d=a*i;for(const u in t){const h=t[u];let g=0,p=0;for(let _=0,v=h.length;_<v;_++){const x=n[h[_]];p=Math.max(p,x),g+=2*x+r}const m=g/(2*Math.PI),f=p+l,y=s?c+Math.max(s,f):c*i;c=Math.max(f,c,m,d,y),o[u]=c,l=p}return o[0]=0,o[Number.POSITIVE_INFINITY]=c,o}function lB(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function tS(e){const t=e.length,n=[0,1];let r=2;for(let i=2;i<t;i++){for(;r>1&&lB(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function cB(e){const t=e.length;if(t<3)return null;const n=new Array(t),r=new Array(t);for(let u=0;u<t;u++)n[u]=[+e[u][0],+e[u][1],u];n.sort((u,h)=>u[0]-h[0]||u[1]-h[1]);for(let u=0;u<t;u++)r[u]=[n[u][0],-n[u][1]];const i=tS(n),s=tS(r),o=s[s.length-1],a=i[i.length-1],l=s[0]===i[0],c=o===a?1:0,d=[];for(let u=i.length-1;u>=0;--u)d.push(e[n[i[u]][2]]);for(let u=+l;u<s.length-c;u++)d.push(e[n[s[u]][2]]);return d}var nS=e=>--e*e*e+1,rS=(e,t,n)=>{const r=e-n[0],i=t-n[1];return r*r+i*i},dB=(e,t)=>{let n=1/0,r=-1/0;for(let i=0;i<e.length;i++){const s=e[i],o=t?t[s]:s;n=Math.min(o,n),r=Math.max(o,r)}return{min:n,max:r}};function uB({X:e,Y:t,R:n,center:r,maxSteps:i=1e3,padding:s=5,epsilon:o=1e-9,damping:a=2,pinned:l=-1,indexes:c,onUpdate:d,pushSmallerOut:u=!0}){const h=c?c.length:e.length;let g=c;if(g===void 0){g=new Uint32Array(h);for(let x=0;x<h;x++)g[x]=x}else g=c;if(l!==-1)r=[e[l],t[l]];else if(!r){let x=0,b=0;for(let w=0;w<h;w++)x+=e[g[w]],b+=t[g[w]];r=[x/h,b/h]}const{min:p,max:m}=dB(g,n);function f(x,b){let w=0;for(let k=0;k<h-1;k++)for(let T=k+1;T<h;T++){if(k===T)continue;const M=g[k],D=g[T],B=e[M],I=t[M],N=n[M],V=e[D],$=t[D],Q=n[D],se=V-B,te=$-I,de=N+Q+s,Ee=se*se+te*te;if(Ee<de*de-x){const oe=(de-Math.sqrt(Ee))*b,_e=1/Ee,De=se*_e*oe,We=te*_e*oe,Ye=De*De+We*We;if(D!==l){const pe=N/p;w+=Ye*pe,e[D]+=De*pe,t[D]+=We*pe}if(M!==l){const pe=Q/p;w+=Ye*pe,e[M]-=De*pe,t[M]-=We*pe}}}const S=x*a*(1-b),A=r[0],C=r[1];for(let k=0;k<h;k++){const T=g[k];if(T!==l){const M=e[T],D=t[T],B=n[T],I=u?S*(B/m):S,N=(M-A)*I,V=(D-C)*I;w+=N*N+V*V,e[T]-=N,t[T]-=V}}return w}g.sort((x,b)=>n[b]*rS(e[b],t[b],r)-n[x]*rS(e[x],t[x],r));let y=0,_=0;const v=nS(1/h);for(let x=0;x<i&&(y=f(v,nS((x+1)/i)),d&&setTimeout(()=>d(e,t)),!(Math.abs(y-_)<o));x++)_=y;return{X:e,Y:t}}var Xu=e=>({data:e,next:null,prev:null});function pL(e,t=0,n=0){const r=e.length;if(r===0)return e;const i=e[0];if(i.x=t,i.y=n,r===1)return e;const s=e[1];if(i.x=t-s.radius,s.x=t+i.radius,s.y=n,r===2)return e;const o=e[2];iS(s,i,o);let a=Xu(i),l=Xu(s),c=Xu(o);a.next=c.prev=l,l.next=a.prev=c,c.next=l.prev=a;e:for(let d=3;d<r;d++){c=Xu(e[d]),iS(a.data,l.data,e[d]);let u=l.next,h=a.prev,g=l.data.radius,p=a.data.radius;do if(g<=p){if(sS(u.data,c.data)){l=u,a.next=l,l.prev=a,--d;continue e}g+=u.data.radius,u=u.next}else{if(sS(h.data,c.data)){a=h,a.next=l,l.prev=a,--d;continue e}p+=h.data.radius,h=h.prev}while(u!==h.next);c.prev=a,c.next=l,a.next=l.prev=l=c;let m=oS(a);for(;(c=c.next)!==l;){const f=oS(c);f<m&&(a=c,m=f)}l=a.next}return e}function iS(e,t,n){const r=e.x-t.x;let i,s;const o=e.y-t.y,a=r*r+o*o;let l,c;a?(s=t.radius+n.radius,s*=s,c=e.radius+n.radius,c*=c,s>c?(i=(a+c-s)/(2*a),l=Math.sqrt(Math.max(0,c/a-i*i)),n.x=e.x-i*r-l*o,n.y=e.y-i*o+l*r):(i=(a+s-c)/(2*a),l=Math.sqrt(Math.max(0,s/a-i*i)),n.x=t.x+i*r-l*o,n.y=t.y+i*o+l*r)):(n.x=t.x+n.radius,n.y=t.y)}var hB=1e-6;function sS(e,t){const n=e.radius+t.radius-hB,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function oS(e){const t=e.data,n=e.next.data,r=t.radius+n.radius,i=(t.x*n.radius+n.x*t.radius)/r,s=(t.y*n.radius+n.y*t.radius)/r;return i*i+s*s}var gB=16,pB=class{constructor(e=Int32Array,t=gB,n=8){this._BIG_LIST=new Uint8Array([-1])[0],this._ArrayType=e,this._capacity=t,this._MAX_LIST_SIZE=n,this._freeIndex=-1,this.clear()}clear(){this._buffer=new this._ArrayType(this._capacity*this._MAX_LIST_SIZE),this._sizes=new Uint8Array(this._capacity),this._bigLists=[],this._nextIndex=0,this._idToIndex={},this._constList=new Array(this._MAX_LIST_SIZE)}addEntry(e){let t;return this._freeIndex===-1?t=this._nextIndex++:(t=this._freeIndex,this._freeIndex=-1),this._idToIndex[e]=t,t>=this._capacity&&this._expand(t+1),this._sizes[t]=0,t}getItems(e){const t=this._idToIndex[e];if(t===void 0)return;const n=this._sizes[t],r=this._MAX_LIST_SIZE*t;if(n<=this._MAX_LIST_SIZE){this._constList.length=n;for(let i=0,s=n;i<s;++i)this._constList[i]=this._buffer[r+i];return this._constList}if(n===this._BIG_LIST){let i=this._buffer[r];return this._bigLists[i]}}removeEntry(e){const t=this._idToIndex[e];if(this._sizes[t]===this._BIG_LIST){const n=this._MAX_LIST_SIZE*t,r=this._buffer[n];this._bigLists[r].length=0}this._sizes[t]=0,this._freeIndex=t}size(e){const t=this._idToIndex[e];let n=this._sizes[t];return n<=this._MAX_LIST_SIZE?n:this._bigLists[this._buffer[t*this._MAX_LIST_SIZE]].length}sizes(e){const t=this._sizes,n=this._bigLists,r=this._buffer,i=this._MAX_LIST_SIZE,s=e.length,o=new Array(s);for(let a=0;a<s;a++){const l=this._idToIndex[e[a]],c=t[l];o[a]=c<=i?c:n[r[l*i]].length}return o}addTo(e,t){const n=this._idToIndex[e],r=this._sizes[n],i=n*this._MAX_LIST_SIZE;if(r<this._MAX_LIST_SIZE)this._buffer[i+r]=t,this._sizes[n]=r+1;else if(r===this._BIG_LIST){let s=this._buffer[i];this._bigLists[s].push(t)}else{let s=new Array(this._MAX_LIST_SIZE);for(let o=0;o<this._MAX_LIST_SIZE;++o)s[o]=this._buffer[i+o];s.push(t),this._bigLists.push(s),this._sizes[n]=this._BIG_LIST,this._buffer[i]=this._bigLists.length-1}}removeFrom(e,t){this.removeFromAndGetSize(e,t)}removeFromAndGetSize(e,t){const n=this._idToIndex[e];let r=this._sizes[n],i=this._MAX_LIST_SIZE*n;if(r<=this._MAX_LIST_SIZE){for(let s=i,o=i+r;s<o;++s)if(this._buffer[s]===t)return r-=1,this._buffer[s]=this._buffer[o-1],this._sizes[n]=r,r}else if(r===this._BIG_LIST){let s=this._buffer[i],o=this._bigLists[s],a=o.indexOf(t);if(a!==-1)return o.splice(a,1),o.length}}reserve(e){this._capacity<e&&this._expand(e)}_expand(e){this._capacity=Math.pow(2,Math.ceil(Math.log2(e))),this._buffer=aS(this._buffer,this._capacity*this._MAX_LIST_SIZE),this._sizes=aS(this._sizes,this._capacity)}has(e){const t=this._idToIndex[e];return!(t===void 0||t>=this._capacity)&&this._sizes[t]!==0}get averageSize(){let e=0;for(let t=0;t<this._capacity;t++)e+=this._sizes[t];return e/this._capacity}};function aS(e,t){let n=new e.constructor(t);return n.set(e),n}var dc,lS,uc,Da,hc,Ho=[0,1],og=[0,2];for(uc=4;uc<65535;uc<<=2)for(dc=0,lS=Ho.length;dc<lS;dc++)Ho.push(Ho[dc]|uc),og.push((Ho[dc]|uc)<<1);function Ci(e,t){return(og[255&t]|Ho[255&e])+65536*(og[t>>8&255]|Ho[e>>8&255])+4294967296*(og[t>>16&255]|Ho[e>>16&255])}function cS(e,t=[0,0]){if(e>0xffffffffffff)throw"Only morton codes up to 48 bits are supported.";if(!Da){Da={},hc={};for(var n=0;n<256;n++)Da[Ci(n,0)]=n,hc[Ci(0,n)]=n}var r=Da[21845&e],i=hc[43690&e];return e>65535&&(r|=Da[21845&(e/=65536)]<<8,i|=hc[43690&e]<<8,e>65535&&(r|=Da[21845&(e/=65536)]<<16,i|=hc[43690&e]<<16)),t[0]=r,t[1]=i,t}Ci.code=function(t,n,r){if(t>24)throw"Morton codes are only supported up to Z=24";var i=1<<24-t;return Ci(n*i,r*i)},Ci.range=function(t,n,r){if(t>24)throw"Morton ranges are only supported up to Z=24";var i=1<<24-t,s=Ci(n*i,r*i);return[s,s+i*i-1]},Ci.reverse=cS,Ci.decode=function(t,n){var r=cS(n),i=1<<24-t;return[r[0]/i,r[1]/i]},Ci.min=function(t,n){var r=1431655765&t,i=1431655765&n,s=2863311530&t,o=2863311530&n;return Math.min(r,i)+Math.min(s,o)};var mB=1e-6,fB=1e-12;function mL(){for(var e=arguments,t=e.length-1,n=t,r=[],i=0;i<=t&&Math.abs(e[i])<=fB;i++)t--;switch(t){case 1:_B(e[n],e[n-1],r);break;case 2:yB(e[n],e[n-1],e[n-2],r);break;case 3:vB(e[n],e[n-1],e[n-2],e[n-3],r)}return r}function _B(e,t,n=[]){return t!==0&&n.push(-e/t),n}function yB(e,t,n,r=[]){var i=t/n,s=i*i-4*(e/n);if(s>0){var o=Math.sqrt(s);r.push(.5*(-i+o)),r.push(.5*(-i-o))}else s===0&&r.push(.5*-i);return r}function vB(e,t,n,r,i=[]){var s,o,a=n/r,l=t/r,c=(3*l-a*a)/3,d=(2*a*a*a-9*l*a+27*(e/r))/27,u=a/3,h=d*d/4+c*c*c/27,g=d/2;if(Math.abs(h)<=mB&&(h=0),h>0){var p=Math.sqrt(h);o=(s=-g+p)>=0?Math.pow(s,1/3):-Math.pow(-s,1/3),(s=-g-p)>=0?o+=Math.pow(s,1/3):o-=Math.pow(-s,1/3),i.push(o-u)}else if(h<0){var m=Math.sqrt(-c/3),f=Math.atan2(Math.sqrt(-h),-g)/3,y=Math.cos(f),_=Math.sin(f),v=Math.sqrt(3);i.push(2*m*y-u),i.push(-m*(y+v*_)-u),i.push(-m*(y-v*_)-u)}else s=g>=0?-Math.pow(g,1/3):Math.pow(-g,1/3),i.push(2*s-u),i.push(-s-u);return i}function Os(e,t,n,r,i,s,o,a,l,c,d){for(var u,h,g=Math.min(o,l),p=Math.min(a,c),m=Math.max(o,l),f=Math.max(a,c),y=mL((u=a-c)*(e+-2*n+i)+(h=l-o)*(t+-2*r+s),u*(-2*e+2*n)+h*(-2*t+2*r),u*e+h*t+(o*c-l*a)),_=0;_<y.length;_++){var v=y[_];if(0<=v&&v<=1){var x=e+(n-e)*v,b=t+(r-t)*v,w=x+(n+(i-n)*v-x)*v,S=b+(r+(s-r)*v-b)*v;if(o===l){if(p<=S&&S<=f){if(!d)return 1;d.push(w,S)}}else if(a===c){if(g<=w&&w<=m){if(!d)return 1;d.push(w,S)}}else if(w>=g&&S>=p&&w<=m&&S<=f){if(!d)return 1;d.push(w,S)}}}return d?d.length/2:0}function fL(e,t,n,r,i,s,o,a,l,c,d){return d?(Os(e,t,n,r,i,s,o,a,l,a,d),Os(e,t,n,r,i,s,l,a,l,c,d),Os(e,t,n,r,i,s,o,c,l,c,d),Os(e,t,n,r,i,s,o,a,o,c,d),d.length/2):o<=e&&l>=e&&a<=t&&c>=t||o<=i&&l>=i&&a<=s&&c>=s||Os(e,t,n,r,i,s,o,a,l,a)||Os(e,t,n,r,i,s,l,a,l,c)||Os(e,t,n,r,i,s,o,c,l,c)||Os(e,t,n,r,i,s,o,a,o,c)?1:0}function Bs(e,t,n,r,i,s,o,a,l,c,d,u,h){for(var g,p,m=Math.min(l,d),f=Math.min(c,u),y=Math.max(l,d),_=Math.max(c,u),v=mL((g=c-u)*(-1*e+3*n+-3*i+o)+(p=d-l)*(-1*t+3*r+-3*s+a),g*(3*e+-6*n+3*i)+p*(3*t+-6*r+3*s),g*(-3*e+3*n)+p*(-3*t+3*r),g*e+p*t+(l*u-d*c)),x=0;x<v.length;x++){var b=v[x];if(0<=b&&b<=1){var w=e+(n-e)*b,S=t+(r-t)*b,A=n+(i-n)*b,C=r+(s-r)*b,k=w+(A-w)*b,T=S+(C-S)*b,M=k+(A+(i+(o-i)*b-A)*b-k)*b,D=T+(C+(s+(a-s)*b-C)*b-T)*b;if(l===d){if(f<=D&&D<=_){if(!h)return 1;h.push(M,D)}}else if(c===u){if(m<=M&&M<=y){if(!h)return 1;h.push(M,D)}}else if(M>=m&&D>=f&&M<=y&&D<=_){if(!h)return 1;h.push(M,D)}}}return h?h.length/2:0}function _L(e,t,n,r,i,s,o,a,l,c,d,u,h){return h?(Bs(e,t,n,r,i,s,o,a,l,c,d,c,h),Bs(e,t,n,r,i,s,o,a,d,c,d,u,h),Bs(e,t,n,r,i,s,o,a,l,u,d,u,h),Bs(e,t,n,r,i,s,o,a,l,c,l,u,h),h.length/2):l<=e&&d>=e&&c<=t&&u>=t||l<=o&&d>=o&&c<=a&&u>=a||Bs(e,t,n,r,i,s,o,a,l,c,d,c)||Bs(e,t,n,r,i,s,o,a,d,c,d,u)||Bs(e,t,n,r,i,s,o,a,l,u,d,u)||Bs(e,t,n,r,i,s,o,a,l,c,l,u)?1:0}var dS=typeof Map>"u"?class{constructor(){this._values={},this._size=0}get size(){return this._size}has(t){return!!this._values[t]}set(t,n){t in this._values||this._size++,this._values[t]=n}get(t){return this._values[t]}delete(t){t in this._values&&(delete this._values[t],this._size--)}keys(){return Object.keys(this._values)}clear(){this._values={},this._size=0}}:Map,xB=typeof Set>"u"?class{constructor(){this._values={},this._size=0}get size(){return this._size}has(t){return!!this._values[t]}add(t){t in this._values||this._size++,this._values[t]=!0}delete(t){t in this._values&&(delete this._values[t],this._size--)}keys(){return Object.keys(this._values)}clear(){this._values={},this._size=0}}:Set,yL=class{constructor(){this._intersects=null,this._getBounds=null}setBoundsGetter(e){return this._getBounds=e,this}setIntersector(e){return this._intersects=e,this}},bB=65536,wB=16,EB=16,SB=class extends yL{constructor(e,t,n=EB,r=bB,i=Int32Array,s=wB){super(),this._occupied=0,this._idToCode=new dS,this._codeCache=[0,0,0],this.code=(o,a,l)=>l|Ci(o,a)<<this._bitsForZoom,this.decode=(o,a)=>(Ci.reverse(o>>this._bitsForZoom,a),a[2]=o&this._zoomMask,a),this._intersects=e,this._getBounds=t,this._cells=new pB(i),this._offset=r,this._maxLevels=s,this._mortonMax=(1<<this._maxLevels)-1,this._bitsForZoom=Math.log2(this._maxLevels),this._zoomMask=(1<<this._bitsForZoom)-1,this._objectsAtLevel=new Array(this._maxLevels).fill(0),this._min=-r,this._max=r,this._resolution=this._mortonMax/(this._max-this._min),this._minCellSize=n*this._resolution,this._bounds=new Array(4*this._maxLevels);for(let o=0;o<this._maxLevels;o++)this._bounds[4*o]=1/0,this._bounds[4*o+1]=1/0,this._bounds[4*o+2]=-1/0,this._bounds[4*o+3]=-1/0}setMinCellSize(e){return this._minCellSize=e,this}setOffset(e){return this._offset=e,this._min=-e,this._max=e,this._resolution=this._mortonMax/(this._max-this._min),this}insert(e,t,n,r,i){t===void 0&&([t,n,r,i]=this._getBounds(e));const s=Math.max(r-t,i-n);let o,a=this._minCellSize;for(o=0;a<s&&o<this._maxLevels-1;o++)a*=2;const l=this._resolution,c=this._min,d=l*(.5*(r+t)-c)/a|0,u=l*(.5*(i+n)-c)/a|0,h=this.code(d,u,o);this._cells.has(h)||this._cells.addEntry(h),this._cells.addTo(h,e),this._objectsAtLevel[o]++,this._occupied|=1<<o;const g=4*o,p=this._bounds;return d<p[g]&&(p[g]=d),u<p[g+1]&&(p[g+1]=u),d>p[g+2]&&(p[g+2]=d),u>p[g+3]&&(p[g+3]=u),this._idToCode.set(e,h),h}has(e){return this._idToCode.has(e)}update(e,t,n,r,i){return this.remove(e),this.insert(e,t,n,r,i)}remove(e){const t=this._idToCode.get(e);this.decode(t,this._codeCache);const n=this._codeCache[2];return--this._objectsAtLevel[n]==0&&(this._occupied&=~(1<<n),this._bounds[4*n]=1/0,this._bounds[4*n+1]=1/0,this._bounds[4*n+2]=-1/0,this._bounds[4*n+3]=-1/0),this._cells.removeFrom(t,e),this._idToCode.delete(e),this}query(e,t,n,r){const i=this._cells,s=this._bounds,o=this._intersects,a=this._min,l=this._resolution;let c=this._minCellSize,d=this._occupied;const u=[];for(let h=0;h<this._maxLevels&&d!==0;c*=2,d>>=1,h++){if(!(1&d))continue;const g=1/c,p=4*h,m=Math.max(s[p],l*(e-a)*g-1|0),f=Math.max(s[p+1],l*(t-a)*g-1|0),y=Math.min(s[p+2],l*(n-a)*g+1|0),_=Math.min(s[p+3],l*(r-a)*g+1|0);for(let v=m;v<=y;v++)for(let x=f;x<=_;x++){const b=this.code(v,x,h),w=i.getItems(b);if(w!==void 0)for(let S=0;S<w.length;S++){const A=w[S];o(A,e,t,n,r)&&u.push(A)}}}return u}traverse(e,t,n,r,i){const s=this._cells,o=this._bounds,a=this._intersects,l=this._min,c=this._resolution;let d=this._minCellSize,u=this._occupied;const h=[];for(let g=0;g<this._maxLevels&&u!==0;d*=2,u>>=1,g++){if(!(1&u))continue;const p=1/d,m=4*g,f=Math.max(o[m],c*(e-l)*p-1|0),y=Math.max(o[m+1],c*(t-l)*p-1|0),_=Math.min(o[m+2],c*(n-l)*p+1|0),v=Math.min(o[m+3],c*(r-l)*p+1|0);for(let x=f;x<=_;x++)for(let b=y;b<=v;b++){const w=this.code(x,b,g),S=s.getItems(w);if(S!==void 0)for(let A=0;A<S.length;A++){const C=S[A];if(a(C,e,t,n,r)&&(h.push(C),i(C)))return h}}}return h}collisions(e,t=this._getBounds){if(typeof t!="function")throw new Error("getBounds function is required to get the object bounds");const n=Array.from(this._idToCode.keys()),r=this._min,i=this._resolution,s=this._cells,o=new dS,a=[];for(let l=0;l<n.length;l++){let c=0,d=this._minCellSize,u=this._occupied;const h=n[l];let[g,p,m,f]=t(h);const y=Math.max(m-g,f-p);for(c=0;d<y;c++)d*=2,u>>=1;g=i*(g-r),p=i*(p-r),m=i*(m-r),f=i*(f-r);for(let _=c;_<this._maxLevels&&u!==0;d*=2,u>>=1,_++){if(!(1&u))continue;const v=1/d,x=p*v-1|0,b=m*v+1|0,w=f*v+1|0;for(let S=g*v-1|0;S<=b;S++)for(let A=x;A<=w;A++){const C=this.code(S,A,_);if(o.get(C)===l)continue;o.set(C,l);const k=s.getItems(C);if(k!==void 0)for(let T=0;T<k.length;T++){const M=k[T],[D,B,I,N]=this._getBounds(M);M!==h&&e(h,D,B,I,N)&&a.push(h,M)}}}}return AB(a)}clear(){this._occupied=0,this._cells.clear(),this._idToCode.clear(),this._objectsAtLevel=new Array(this._maxLevels).fill(0),this._bounds=new Array(4*this._maxLevels);for(let e=0;e<this._maxLevels;e++)this._bounds[4*e]=1/0,this._bounds[4*e+1]=1/0,this._bounds[4*e+2]=-1/0,this._bounds[4*e+3]=-1/0;return this}keyToBBox(e){const[t,n,r]=this.decode(e,[0,0,0]),i=this._minCellSize*(1<<r),s=this._min,o=this._resolution;return[t*i/o+s,n*i/o+s,(t+1)*i/o+s,(n+1)*i/o+s]}keys(){return Object.keys(this._cells._idToIndex)}get averageCellOccupancy(){return this._cells.averageSize}get size(){return this._idToCode.size}getBoxes(){return Array.from(this._idToCode.keys()).map(e=>this._getBounds(e))}};function AB(e){const t=new xB,n=[];for(let r=0;r<e.length;r+=2){const i=e[r],s=e[r+1],o=i<s?i*s+(s-i-1)*(s-i-1)/4:i*s+(i-s-1)*(i-s-1)/4;t.has(o)||(t.add(o),n.push(i,s))}return n}function kB(e,t,n,r,i,s,o,a){return e>i&&e<o&&t>s&&t<a||n>i&&n<o&&r>s&&r<a}function ls(e,t,n,r,i,s,o,a){return r>=s&&t<=a&&n>=i&&e<=o}var is=(e,t,n,r,i,s)=>({minX:e,minY:t,maxX:n,maxY:r,leaf:!0,level:s,parent:i,objects:[],final:!1,children:null});function vL(e){const{minX:t,minY:n,maxX:r,maxY:i}=e;return[t,n,r,i]}function Ic(e,t,n,r,i,s,o,a){return e>=i&&n<=o&&t>=s&&r<=a}var CB=0,TB=1,NB=2,LB=3;function Yu(e,t,n,r,i,s,o,a){const l=(s+a)/2,c=(t+r)/2;return(e+n)/2<=(i+o)/2?c<=l?CB:TB:c<=l?LB:NB}var IB=e=>e,$a=class extends yL{constructor(e=IB,t=10,n,r=0){super(),this._nodeCapacity=10,this._root=null,this._objects={},this._size=0,this._rootLevel=0,this._maxLevel=30,this._idToCell={},this._nodeCapacity=t,this._root=null,this._getBounds=e,this._rootLevel=r,this._maxLevel=r+30,this._idToCell={},n&&(this._root=is(n[0],n[1],n[2],n[3],null,r))}get size(){return this._size}get root(){return this._root}clear(){return this._root=null,this._objects={},this._size=0,this._idToCell={},this._rootLevel=0,this._maxLevel=this._rootLevel+30,this}insert(e,t,n,r,i,s=this._root){if(t||([t,n,r,i]=this._getBounds(e)),this._objects[e])return;if(this._objects[e]=!0,this._size++,!this._root){const g=Math.max(Math.abs(r-t),Math.abs(i-n));return this._root=is(t,n,t+g,n+g,null,this._rootLevel),this._idToCell[e]=[this._root],this._root.objects=[e],e}let o,a=[s],l=!1;const c=this._nodeCapacity,d=this._idToCell,u=this._maxLevel;let h;for(;h=a.pop();){o=h;const{minX:g,minY:p,maxX:m,maxY:f}=o;ls(t,n,r,i,g,p,m,f)&&(o.leaf?o.objects&&(o.objects.length<c||o.final)?(o.objects.push(e),d[e]?d[e].push(o):d[e]=[o],l=!0,(o.level>=u||Math.abs(m-g)<=Math.abs(r-t)||Math.abs(f-p)<=Math.abs(i-n))&&(o.final=!0)):(this.splitNode(o),a.push(o)):a.push.apply(a,o.children))}if(!Ic(t,n,r,i,(s=this._root).minX,s.minY,s.maxX,s.maxY)){let g=this._rootLevel;for(;!Ic(t,n,r,i,this._root.minX,this._root.minY,this._root.maxX,this._root.maxY);){s=this._root;const{minX:p,minY:m,maxX:f,maxY:y}=s;let _=p,v=m,x=f,b=y;const w=Math.abs(f-p),S=Math.abs(y-m);if(S===0&&w===0)break;const A=Math.max(w,S);t<p?(_-=A,n<m?v-=A:b+=A):(x+=A,n<m?v-=A:b+=A);const C=is(_,v,x,b,null,--g);this.splitNode(C),C.children[Yu(p,m,f,y,_,v,x,b)]=s,this._root=s.parent=C}for(a=[this._root],this._root.level=this._rootLevel;h=a.shift();)if(o=h,!o.leaf)for(let p=0;p<4;p++){const m=o.children[p];m.level=o.level+1,a.push(m)}s=this._root;for(let p=0;p<4;p++){const m=s.children[p];m&&m.leaf&&m.objects&&(m.objects.push(e),d[e]?d[e].push(m):d[e]=[m])}}return l?e:void 0}removeById(e){if(!this._objects[e])return e;this._size--;const t=this._idToCell[e];for(let n=0;n<t.length;n++){const r=t[n].objects||[];for(let i=0,s=r.length;i<s;i++)if(r[i]===e){r.splice(i,1);break}}return delete this._objects[e],delete this._idToCell[e],e}remove(e){const[t,n,r,i]=this._getBounds(e),s=[this._root];let o,a;const l=[];for(;o=s.pop();)if(ls(t,n,r,i,o.minX,o.minY,o.maxX,o.maxY))if(o.leaf){const c=o.objects||[];for(let d=0,u=c.length;d<u;d++)if(c[d]===e){c.splice(d,1),u===1&&l.push(o);break}}else s.push.apply(s,o.children);if(delete this._idToCell[e],delete this._objects[e],this._size--,l.length)for(;a=l.pop();){let c=a.parent,d=!0;for(;c&&d;){if(!c.leaf){for(let u=0;u<4;u++)if(o=c.children[u],!o.leaf||o.objects&&o.objects.length!==0){d=!1;break}d&&(c.leaf=!0,c.children=[],c.objects=[])}c=c.parent}}return e}splitNode(e){const{minX:t,minY:n,maxX:r,maxY:i}=e,s=(t+r)/2,o=(n+i)/2,a=e.level+1,l=this._idToCell,c=this._maxLevel,d=[is(t,n,s,o,e,a),is(t,o,s,i,e,a),is(s,o,r,i,e,a),is(s,n,r,o,e,a)];if(e.objects!==null){const u=e.objects,h=this._getBounds;for(let g=0,p=u.length;g<p;g++){const m=u[g],f=h(m);let y=l[m];for(let _=0;_<4;_++){const v=d[_],{minX:x,minY:b,maxX:w,maxY:S}=v;ls(f[0],f[1],f[2],f[3],x,b,w,S)&&(v.objects&&v.objects.push(m),(v.level>=c||Math.abs(w-x)<=Math.abs(f[2]-f[0])||Math.abs(S-b)<=Math.abs(f[3]-f[1]))&&(v.final=!0),y?y.push(v):y=[v])}y&&y.splice(y.indexOf(e),1)}}e.children=d,e.objects=null,e.leaf=!1}point(e,t,n){let r=[];const i=[this._root];let s,o,a;const l=this._getBounds;for(;s=i.pop();)if(e>=s.minX&&e<=s.maxX&&t>=s.minY&&t<=s.maxY){if(s.leaf){n&&s.objects&&(r=s.objects);const c=s.objects||[];for(let d=0,u=c.length;d<u;d++)a=c[d],o=l(a),e>=o[0]&&e<=o[2]&&t>=o[1]&&t<=o[3]&&r.push(a);break}i.push.apply(i,s.children)}return r.length?r:null}neigbours(e,t){let n,r=[];const i=[this._root];for(;n=i.pop();)if(e>=n.minX&&e<=n.maxX&&t>=n.minY&&t<=n.maxY){if(n.leaf){r=n.objects;break}i.push.apply(i,n.children)}return r}query(e,t,n,r){const i=[],s=[this._root];let o,a,l;const c=this._getBounds,d={},u=this._intersects;let h;for(;o=s.pop();)if(ls(e,t,n,r,o.minX,o.minY,o.maxX,o.maxY))if(o.leaf){const g=o.objects||[];for(let p=0,m=g.length;p<m;p++)l=g[p],d[l]||(a=c(l),ls(e,t,n,r,a[0],a[1],a[2],a[3])&&(u&&!u(l,e,t,n,r)||i.push(l)),d[l]=!0)}else h=Yu(e,t,n,r,o.minX,o.minY,o.maxX,o.maxY),s.push(o.children[(h+3)%4],o.children[(h+2)%4],o.children[(h+1)%4],o.children[h]);return i}traverse(e,t,n,r,i){const s=[],o=[this._root];let a,l,c;const d=this._getBounds,u={},h=this._intersects;let g;for(;a=o.pop();)if(ls(e,t,n,r,a.minX,a.minY,a.maxX,a.maxY))if(a.leaf){const p=a.objects||[];for(let m=0,f=p.length;m<f;m++)if(c=p[m],!u[c]){if(l=d(c),ls(e,t,n,r,l[0],l[1],l[2],l[3])&&(!h||h(c,e,t,n,r))&&(s.push(c),i(c)))return s;u[c]=!0}}else g=Yu(e,t,n,r,a.minX,a.minY,a.maxX,a.maxY),o.push(a.children[(g+3)%4],a.children[(g+2)%4],a.children[(g+1)%4],a.children[g]);return s}getOverlaps(){const e=[this._root];let t,n,r;const i=[],s=this._getBounds,o={};for(;t=e.pop();)if(t.leaf){const a=t.objects||[],l=a.length;for(let c=0;c<l;c++)for(let d=0;d<l;d++)if(n=a[c],r=a[d],c!==d&&!o[n+":"+r]&&!o[r+":"+n]){o[n+":"+r]=!0;const u=s(n),h=s(r);ls(u[0],u[1],u[2],u[3],h[0],h[1],h[2],h[3])&&i.push(n,r)}}else e.push.apply(e,t.children);return i}cover(e,t,n,r){if(this._root===null)return this._root=is(e,t,n,r,null,0),this;let i=this._root;if(!Ic(e,t,n,r,i.minX,i.minY,i.maxX,i.maxY)){let s=this._rootLevel;for(;!Ic(e,t,n,r,this._root.minX,this._root.minY,this._root.maxX,this._root.maxY);){i=this._root;const{minX:c,minY:d,maxX:u,maxY:h}=i;let g=c,p=d,m=u,f=h;const y=Math.abs(u-c),_=Math.abs(h-d);if(_===0&&y===0)break;const v=Math.max(y,_);e<c?(g-=v,t<d?p-=v:f+=v):(m+=v,t<d?p-=v:f+=v);const x=is(g,p,m,f,null,--s);this.splitNode(x),x.children[Yu(c,d,u,h,g,p,m,f)]=i,this._root=i.parent=x}const o=[this._root];let a,l;for(this._root.level=this._rootLevel;a=o.shift();)if(l=a,!l.leaf)for(let c=0;c<4;c++){const d=l.children[c];d.level=l.level+1,o.push(d)}}return this}getAll(){return Object.keys(this._objects).map(e=>Number(e))}forEach(e,t){const n=[this._root];let r;for(;r=n.pop();)if(r.leaf&&r.objects)for(let i=0,s=r.objects.length;i<s;i++)e.call(t,r.objects[i]);else n.push.apply(n,r.children);return this}getLeafs(){const e=[this._root],t=[];let n;for(;n=e.pop();)n.leaf?t.push(n):e.push.apply(e,n.children);return t}traverseFromRoot(e,t){const n=[this._root];let r;for(;r=n.pop();)e.call(t,r,r.objects)||r.leaf||n.push.apply(n,r.children);return this}update(e,t,n,r,i){return this.remove(e),this.insert(e,t,n,r,i),this}getNodeBounds(e){return vL(e)}};$a.flatAccessor=(e,t)=>n=>{const r=t*n;return e.slice(r,r+t)},$a.inside=Ic,$a.intersects=kB,$a.overlaps=ls,$a.getNodeBBox=vL;var xL=$a;function PB(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return bL(this.cover(t,n),t,n,e)}function bL(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s,o,a,l,c,d,u,h,g=e._root,p={data:r},m=e._x0,f=e._y0,y=e._x1,_=e._y1;if(!g)return e._root=p,e;for(;g.length;)if((c=t>=(s=(m+y)/2))?m=s:y=s,(d=n>=(o=(f+_)/2))?f=o:_=o,i=g,!(g=g[u=d<<1|c]))return i[u]=p,e;if(a=+e._x.call(null,g.data),l=+e._y.call(null,g.data),t===a&&n===l)return p.next=g,i?i[u]=p:e._root=p,e;do i=i?i[u]=new Array(4):e._root=new Array(4),(c=t>=(s=(m+y)/2))?m=s:y=s,(d=n>=(o=(f+_)/2))?f=o:_=o;while((u=d<<1|c)==(h=(l>=o)<<1|a>=s));return i[h]=g,i[u]=p,e}function MB(e){var t,n,r,i,s=e.length,o=new Array(s),a=new Array(s),l=1/0,c=1/0,d=-1/0,u=-1/0;for(n=0;n<s;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(o[n]=r,a[n]=i,r<l&&(l=r),r>d&&(d=r),i<c&&(c=i),i>u&&(u=i));if(l>d||c>u)return this;for(this.cover(l,c).cover(d,u),n=0;n<s;++n)bL(this,o[n],a[n],e[n]);return this}function FB(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o,a,l=i-n||1,c=this._root;n>e||e>=i||r>t||t>=s;)switch(a=(t<r)<<1|e<n,(o=new Array(4))[a]=c,c=o,l*=2,a){case 0:i=n+l,s=r+l;break;case 1:n=i-l,s=r+l;break;case 2:i=n+l,r=s-l;break;case 3:n=i-l,r=s-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function RB(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function DB(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function yr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function zB(e,t,n){var r,i,s,o,a,l,c,d=this._x0,u=this._y0,h=this._x1,g=this._y1,p=[],m=this._root;for(m&&p.push(new yr(m,d,u,h,g)),n==null?n=1/0:(d=e-n,u=t-n,h=e+n,g=t+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>h||(s=l.y0)>g||(o=l.x1)<d||(a=l.y1)<u))if(m.length){var f=(i+o)/2,y=(s+a)/2;p.push(new yr(m[3],f,y,o,a),new yr(m[2],i,y,f,a),new yr(m[1],f,s,o,y),new yr(m[0],i,s,f,y)),(c=(t>=y)<<1|e>=f)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var _=e-+this._x.call(null,m.data),v=t-+this._y.call(null,m.data),x=_*_+v*v;if(x<n){var b=Math.sqrt(n=x);d=e-b,u=t-b,h=e+b,g=t+b,r=m.data}}return r}function OB(e){if(isNaN(s=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,s,o,a,l,c,d,u,h,g=this._root,p=this._x0,m=this._y0,f=this._x1,y=this._y1;if(!g)return this;if(g.length)for(;;){if((c=s>=(a=(p+f)/2))?p=a:f=a,(d=o>=(l=(m+y)/2))?m=l:y=l,t=g,!(g=g[u=d<<1|c]))return this;if(!g.length)break;(t[u+1&3]||t[u+2&3]||t[u+3&3])&&(n=t,h=u)}for(;g.data!==e;)if(r=g,!(g=g.next))return this;return(i=g.next)&&delete g.next,r?(i?r.next=i:delete r.next,this):t?(i?t[u]=i:delete t[u],(g=t[0]||t[1]||t[2]||t[3])&&g===(t[3]||t[2]||t[1]||t[0])&&!g.length&&(n?n[h]=g:this._root=g),this):(this._root=i,this)}function BB(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function jB(){return this._root}function UB(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function $B(e){var t,n,r,i,s,o,a=[],l=this._root;for(l&&a.push(new yr(l,this._x0,this._y0,this._x1,this._y1));t=a.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,s=t.x1,o=t.y1)&&l.length){var c=(r+s)/2,d=(i+o)/2;(n=l[3])&&a.push(new yr(n,c,d,s,o)),(n=l[2])&&a.push(new yr(n,r,d,c,o)),(n=l[1])&&a.push(new yr(n,c,i,s,d)),(n=l[0])&&a.push(new yr(n,r,i,c,d))}return this}function GB(e){var t,n=[],r=[];for(this._root&&n.push(new yr(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var s,o=t.x0,a=t.y0,l=t.x1,c=t.y1,d=(o+l)/2,u=(a+c)/2;(s=i[0])&&n.push(new yr(s,o,a,d,u)),(s=i[1])&&n.push(new yr(s,d,a,l,u)),(s=i[2])&&n.push(new yr(s,o,u,d,c)),(s=i[3])&&n.push(new yr(s,d,u,l,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function VB(e){return e[0]}function HB(e){return arguments.length?(this._x=e,this):this._x}function WB(e){return e[1]}function XB(e){return arguments.length?(this._y=e,this):this._y}function wL(e,t,n){var r=new Cx(t??VB,n??WB,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function Cx(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function uS(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var hr=wL.prototype=Cx.prototype;hr.copy=function(){var e,t,n=new Cx(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=uS(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=uS(t));return n},hr.add=PB,hr.addAll=MB,hr.cover=FB,hr.data=RB,hr.extent=DB,hr.find=zB,hr.remove=OB,hr.removeAll=BB,hr.root=jB,hr.size=UB,hr.visit=$B,hr.visitAfter=GB,hr.x=HB,hr.y=XB;var gc=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i},YB=function(e){const t=[];let n,r,i,s,o,a,l,c=this._root;for(c&&t.push(new gc(c,this._x0,this._y0,this._x1,this._y1));(n=t.pop())&&(l=e(c=n.node,i=n.x0,s=n.y0,o=n.x1,a=n.y1),l!=="break");)if(!l&&c.length){const d=(i+o)/2,u=(s+a)/2;(r=c[3])&&t.push(new gc(r,d,u,o,a)),(r=c[2])&&t.push(new gc(r,i,u,d,a)),(r=c[1])&&t.push(new gc(r,d,s,o,u)),(r=c[0])&&t.push(new gc(r,i,s,d,u))}return this};function Tx(e,t,n,r,i){const s=new Array(e.length);for(let o=0;o<t.length;o++){const a=r[t[o]],l=r[n[o]];s[a]=s[a]||[],s[a].push(l),i&&(s[l]=s[l]||[],s[l].push(a))}return s}function jd(e,t){return e[t]===-1?t:jd(e,e[t])}function qB(e,t,n){const r=jd(e,t),i=jd(e,n);e[r]=i}function ZB(e,t,n,r=!1){const i=new Int32Array(e.length),s={};for(let o=0;o<e.length;o++)i[o]=-1,s[e[o]]=o;for(let o=0;o<t.length;o++){const a=s[t[o]],l=s[n[o]];if(r&&a===l)return!0;const c=jd(i,a),d=jd(i,l);if(c===d)return!0;qB(i,c,d)}return!1}function EL(e,t,n,r,i,s,o,a){if(r[e]=i,n[e])return!0;if(t[e])return!1;t[e]=1,n[e]=1;const l=s[e];if(l){for(const c of l)if(EL(c,t,n,r,e,s,o,a))return o.push(a[c]),!0}return n[e]=0,!1}function SL(e,t,n){const r=e.length,i=new Uint8Array(r),s=new Uint8Array(r),o=new Int32Array(r),a={};for(let c=0;c<r;c++)a[e[c]]=c;const l=Tx(e,t,n,a,!1);for(let c=0;c<r;c++){const d=[];if(EL(c,i,s,o,-1,l,d,e)&&d.length>1){const u=d[0];for(let h=1;h<d.length;h++)if(d[h]===u){d.length=h;break}return d.push(u),d.reverse()}}return!1}function AL(e,t,n,r,i,s,o){t[e]=1,r[e]=n;const a=i[e];if(a){for(const l of a)if(t[l]){if(l!==n)return r[l]=e,s.push(o[l]),!0}else if(AL(l,t,e,r,i,s,o))return s.push(o[l]),!0}return!1}function JB(e,t,n){const r=e.length,i=new Uint8Array(r),s=new Int32Array(r),o={};for(let l=0;l<r;l++)o[e[l]]=l,s[l]=-1;const a=Tx(e,t,n,o,!0);for(let l=0;l<t.length;l++){const c=o[t[l]],d=o[n[l]];a[c]=a[c]||[],a[c].push(d)}for(let l=0;l<r;l++){const c=l,d=[];if(!i[c]&&AL(c,i,-1,s,a,d,e))return!0}return!1}wL.prototype.visit2=YB;var kL=class{constructor(e,t,n){this.cycles=[],this.visitedLength=0,this.visitedStack=[],this.stack=[],this.idToIndex={},this.removed={},this.nodes=e,this.visited=new Uint8Array(this.nodes.length);for(let r=0;r<e.length;r++)this.idToIndex[e[r]]=r;this.adjacency=Tx(e,t,n,this.idToIndex)}getCycles(){this.visited=new Uint8Array(this.nodes.length),this.visitedStack=[];for(let e=0;e<this.nodes.length;e++)for(this.backtrack(e,e);this.visitedLength!==0;){const t=this.visitedStack.pop();t!==void 0&&this.visited[t]&&(this.visited[t]=0,this.visitedLength--)}return this.cycles}backtrack(e,t){let n=!1;this.stack.push(t),this.visited[t]||(this.visited[t]=1,this.visitedLength++),this.visitedStack.push(t);const r=this.adjacency[t]||[];for(const i of r)if(this.removed[t]=this.removed[t]||{},!this.removed[t][i]){if(i<e)this.removed[t][i]=!0;else if(i===e){n=!0;const s=[];for(let o=0,a=!1;o<this.stack.length;o++){const l=this.stack[o];e===l&&(a=!0),a&&s.push(this.nodes[l])}this.cycles.push(s)}else if(!this.visited[i]){const s=this.backtrack(e,i);n=n||s}}if(n){let i;do i=this.visitedStack.pop(),this.visited[i]&&(this.visited[i]=0,this.visitedLength--);while(i!==t)}return this.stack.pop(),n}};function QB(){return{index:{},parent:[],count:0}}function KB(e,t){e.index[t]===void 0&&(e.count+=1,e.index[t]=e.parent.push(-e.count))}function hS(e,t){let n=e.index[t];if(n===void 0)return-1;for(;n>=0;)t=n,n=e.parent[n];return t}function e4(e,t,n){e.parent[n]=t,e.count-=1}function t4(e){return e.count<=1}function CL(e,t,n,r,i){i&&t.sort((a,l)=>i(a)-i(l));const s=[],o=QB();e.forEach(a=>KB(o,a));for(let a=0;a<t.length&&!t4(o);a++){const l=hS(o,n(t[a])),c=hS(o,r(t[a]));l!==c&&l>0&&c>0&&(e4(o,l,c),s.push(t[a]))}return s}function TL({adjacency:e,directed:t=!1,normalized:n=!0}){const r=[],i=[],s={},o={},a={},l={};let c;const d=new Array(e.length),u={},h={},g={};for(let _=0;_<e.length;_++){const v=e[_];g[v.id]=v.adj,u[v.id]=!0,h[v.id]=_,t||v.adj.forEach(x=>{u[x]=!0})}const p=Object.keys(u).map(_=>+_);for(let _=0;_<p.length;_++)d[_]=0;for(let _=0;_<p.length;_++)c=p[_],y(c),f();const m=n?p.length>2?1/((p.length-1)*(p.length-2)):0:t?0:.5;if(m)for(let _=0;_<d.length;_++)d[_]*=m;return d;function f(){for(let _=0;_<p.length;_++)l[p[_]]=0;for(;i.length;){const _=i.pop(),v=(1+l[_])/a[_],x=s[_];for(let b=0;b<x.length;++b){const w=x[b];l[w]+=a[w]*v}_!==c&&(d[h[_]]+=l[_])}}function y(_){for(let v=0;v<p.length;v++){const x=p[v];s[x]=[],o[x]=-1,a[x]=0}for(o[_]=0,a[_]=1,r.push(_);r.length;){const v=r.shift();i.push(v),g[v].forEach(x=>{o[x]===-1&&(o[x]=o[v]+1,r.push(x)),o[x]===o[v]+1&&(a[x]+=a[v],s[x].push(v))})}}}var NL=class{constructor(e){this._heap=[],this._size=0,this._keyToValue=e,this._keyToIndex=new Int32Array(e.length),this._keyToIndex.fill(-1)}add(e){let t=this._keyToIndex[e];t===-1&&(t=this._size++,this._heap[t]=e),this._keyToIndex[e]=this._bubble(t)}removeMin(){if(this._size===0)return NaN;const e=this._heap[0];return this._heap[0]=this._heap[--this._size],this._bubble(0),e}isEmpty(){return this._size===0}has(e){return this._keyToIndex[e]!==-1}_bubble(e){const t=this._indexToValue(e),n=this._getParentIndex(e),r=this._indexToValue(n);let i=e;if(e!==0&&r>t)i=this._swap(e,n);else{const s=this._getLeftChildIndex(e),o=this._getRightChildIndex(e),a=this._indexToValue(s),l=this._indexToValue(o),c=Math.min(t,a,l);c===t||(i=c===a?this._swap(e,s):this._swap(e,o))}return i===e?e:this._bubble(i)}_indexToValue(e){return e>=this._size?1/0:this._keyToValue[this._heap[e]]}_getParentIndex(e){return(e-1)/2|0}_getLeftChildIndex(e){return 2*e+1}_getRightChildIndex(e){return 2*e+2}_swap(e,t){const n=this._heap[e],r=this._heap[t];return this._heap[e]=r,this._heap[t]=n,this._keyToIndex[n]=t,this._keyToIndex[r]=e,t}},n4=(()=>{let e=0;return typeof requestAnimationFrame<"u"?requestAnimationFrame:function(t){const n=Date.now(),r=Math.min(16,Math.max(0,16-(n-e))),i=e=n+r;return setTimeout(()=>t(i),r)}})(),LL=50,r4=typeof cancelAnimationFrame<"u"?cancelAnimationFrame:function(e){return clearTimeout(e)};function Nx(e,t){return n4(n=>{e.call(t,n)})}function IL(e){e&&r4(e)}var i4=typeof global=="object"&&global!==null&&global.it!==void 0,Ts=typeof document<"u",vo=typeof window<"u",pm=vo&&!window.__OGMA_HEADLESS,mm=pm&&Ts,s4=typeof navigator<"u"&&navigator.userAgent!==void 0?navigator.userAgent.toLowerCase():"",o4=vo&&/mac/.test(s4);function a4(e){return typeof e=="number"&&e%1==0}function $_(e){return Array.isArray(e)?e.join("."):e}function _a(e){if(!e)return[];if(typeof e=="string")return e.split(".");if(Array.isArray(e)){for(let t=0;t<e.length;++t)if(typeof e[t]!="string")throw new TypeError(`${e[t]} is not a string`);return e.slice()}throw new TypeError(`invalid property path "${e}": expected string or array of strings`)}function fm(e,t,n){let r,i,s;if(t===0)return function(){e.apply(n,arguments)};const o=function(){r=!1,i&&(s.apply(n,i),i=null)};return s=function(){let a;return r?i=arguments:(a=e.apply(n,arguments),setTimeout(o,t),r=!0),a},s}function l4(e,t,n){let r,i,s,o,a;const l=t===0||t===void 0?100:t;function c(){const u=Date.now()-o;u<l&&u>=0?r=setTimeout(c,l-u):(r=null,n||(a=e.apply(s,i),s=i=null))}const d=function(){s=this,i=arguments,o=Date.now();const u=n&&!r;return r||(r=setTimeout(c,t)),u&&(a=e.apply(s,i),s=i=null),a};return d.clear=function(){r&&(clearTimeout(r),r=null)},d.flush=function(){r&&(a=e.apply(s,i),s=i=null,clearTimeout(r),r=null)},d}function PL(e,t,n,r,i){n(e[t],t,e,r,i).then(s=>{t===e.length-1?r(s):PL(e,t+1,n,r,i)}).catch(i)}function c4(e,t){return new Promise((n,r)=>PL(e,0,t,n,r))}function _m(){return new Uint8Array(new Uint32Array([305419896]).buffer)[0]===120}function ML(e){return e.reduce((t,n)=>t.then(n),Promise.resolve())}function G_(e,t,n,r,i,s,o,a){return e+i+256*(t+s)+65536*(n+o)+16777216*(r+a)}function d4(e,t){return e<t?e*t+Math.pow(t-e-1,2)/4:e*t+Math.pow(e-t-1,2)/4}function ya(e){return!(e===null||typeof e!="object"||Vn(e)||e instanceof RegExp||typeof HTMLElement<"u"&&e instanceof HTMLElement)}function od(e){const t=Object.keys(e),n=new Array(t.length);for(let r=0;r<t.length;++r)n[r]=e[t[r]];return n}function Ji(e,t,n){if(Array.isArray(e))return e.forEach(t,n);if(!ya(e))throw new Error("forEach: invalid argument "+JSON.stringify(e));const r=Object.keys(e);if(n!==void 0)for(let i=0;i<r.length;++i){const s=r[i];t.call(n,e[s],s)}else for(let i=0;i<r.length;++i){const s=r[i];t(e[s],s)}}function un(e){if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;++i)r[i]=un(e[i]);return r}if(!Sn(e))return e;const t={},n=Object.keys(e);for(const r of n)t[r]=un(e[r]);return t}function u4(e,t){t.forEach(n=>{e.indexOf(n)===-1&&e.push(n)})}function xs(e,t,n){const r=typeof t=="string"?t.split("."):t;for(let i=0;i<r.length-1;++i){const s=r[i];let o=e[s];o||(o={},e[s]=o),e=o}e[r[r.length-1]]=n}function ln(e,t){const n=_a(t);if(!n.length)return e;if(e){for(let r=0;r<n.length-1;++r){const i=e[n[r]];if(!i)return;e=i}return e[n[n.length-1]]}}function Ud(e,t,n="."){t||(t=s=>!ya(s));const r={},i=Object.keys(e);for(let s=0;s<i.length;++s){const o=i[s],a=e[o];if(t(a))r[o]=a;else{const l=Ud(a,t),c=Object.keys(l);for(let d=0;d<c.length;d++){const u=c[d];r[`${o}${n}${u}`]=l[u]}}}return r}function V_(e){const t={},n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];xs(t,i,e[i])}return t}function va(e,t,n=[]){const r=Object.keys(e);for(let i=0;i<r.length;++i){const s=r[i],o=e[s],a=t?t+s:s;Sn(o)?va(o,a+".",n):n.push(a)}return n}var FL=Object.prototype.hasOwnProperty;function RL(e,t){const n=[e];let r;for(;n.length>0;)if(r=n.pop(),r)if(Sn(r))for(const i in r)FL.call(r,i)&&n.push(r[i]);else t(r)}function h4(e){const t={};return RL(e,n=>t[n.getName()]=n),t}function ym(e,t=[]){if(Sn(e)){const n=Object.keys(e);for(const r of n)ym(e[r],t)}else t.push(e);return t}function vm(e){for(const t in e)typeof e[t]=="function"&&delete e[t];return e}function Kr(e,t){if(e===void 0)return un(t);if(!ya(e))return e;const n={},r=Object.keys(t);for(const i of r){const s=t[i],o=e[i];ya(s)?n[i]=Kr(o,s):n[i]=o===void 0?un(s):o}return n}function Sn(e){return e&&(e.constructor===Object||!e.constructor)}function Jg(e,t){if(!Sn(t)||!Sn(e))return t;const n=Object.assign({},e),r=Object.keys(t);for(const i of r)n[i]=Jg(n[i],t[i]);return n}function H_(e,t){return t==null?e:t.reduce((n,r)=>(n[r]=e[r],n),{})}var sl=(...e)=>{const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)FL.call(r,i)&&(Array.isArray(t[i])&&Array.isArray(r[i])?t[i]=Array.from(new Set(t[i].concat(r[i]))):Sn(t[i])&&Sn(r[i])?t[i]=sl(t[i],r[i]):t[i]=r[i])}return t},g4={},DL=g4,ag={},zL={},W_=e=>null;if(typeof global=="object"&&(ag=global),typeof window=="object"&&(zL=window),typeof Zc=="object"&&typeof Zc.require=="function"){const e=Zc.require.bind(Zc);W_=t=>{try{return e(t)}catch{return null}}}else typeof ag.require=="function"&&(W_=e=>{const t=ag.require;try{return t(e)}catch{return null}});function mi(e,{throwOnError:t}={}){let n=null;if(!n&&e&&(n=DL[e]),!n&&e&&(n=W_(e)),!n&&e&&(n=zL[e]),!n&&e&&(n=ag[e]),!n&&t){const r=[`unable to find module "${e}"; make sure one of these statements is true:`,`- Ogma.libraries['${e}'] is set to the right library`,`- require('${e}') returns the right library`,`- window['${e}'] is set to the right library`].join(`
`);throw new Error(r)}return n}var OL=typeof performance<"u"&&performance.now?()=>0|performance.now():()=>Date.now(),p4=OL();function ir(){return OL()-p4}function BL(){const e=new Date,t=e.getDate(),n=e.getMonth()+1;return`${e.getFullYear()}-${n<10?"0"+n:n}-${t<10?"0"+t:t}`}function jL(){const e=new Date;return`[${qu((e.getUTCHours()-(e.getTimezoneOffset()/60|0))%24)}:${qu(e.getUTCMinutes())}:${qu(e.getUTCSeconds())}:${qu(e.getUTCMilliseconds(),3)}]`}function qu(e,t=2){let n=Math.pow(10,t-1),r=String(e);for(;n>1;)e<n&&(r="0"+r),n/=10;return r}function mo(e){!i4&&console.warn(jL()+" "+e)}function m4(e,t){t.forEach(n=>{Object.getOwnPropertyNames(n.prototype).forEach(r=>{Object.defineProperty(e.prototype,r,Object.getOwnPropertyDescriptor(n.prototype,r)||Object.create(null))})})}var Df,xa,Lx,UL,wt=()=>{},Qg=()=>!1,Ix=()=>!0,Kg=()=>null,Mi=e=>e,X_=class Pc{constructor(){this.method=null,this.url=null,this.status=0,this.readyState=0,this.headers={},this.responseText=null,this.response=null,Pc.onCreate&&Pc.onCreate(this)}open(t,n){this.method=t,this.url=n,Pc.onSend&&Pc.onSend(this)}respond(t,n,r){this.readyState=4,this.status=t,this.headers=n,this.responseText=r,this.response=r,this.onreadystatechange()}send(){this.readyState=4}};X_.onCreate=wt,X_.onSend=wt;var $L=X_,Y_=class Mc{constructor(){this.onload=wt,Mc.onCreate&&Mc.onCreate(this)}readAsDataURL(t){this._blob=t,Mc.onRead&&Mc.onRead(this)}load(t){this.result=typeof t=="function"?t(this._blob):t,this.onload&&this.onload()}};Y_.onCreate=wt,Y_.onRead=wt;var GL=Y_;function Ns(){return xa||{createElementNS:()=>null,createElement:()=>null,implementation:{createDocument(){throw new Error('unable to create XML document; if you use Node JS install the "xmldom" package')}}}}Df=mi("xmldom"),xa=Ts?document:Df?new Df.DOMImplementation().createDocument():null,Lx=typeof XMLHttpRequest<"u"?XMLHttpRequest:$L,UL=typeof FileReader<"u"?FileReader:GL;var f4=class{observe(){}unobserve(){}disconnect(){}},_4=typeof ResizeObserver>"u"?f4:ResizeObserver,VL=e=>new _4(e);function HL(e,t){if(document&&document.defaultView){let n=e.style[t];if((!n||n==="auto")&&Ns().defaultView){const r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return n==="auto"?null:n?n.toString():null}return null}var WL=class{constructor(){this.onmousewheel=wt,this.__dummy=!0,this.style={},this.clientWidth=0,this.clientHeight=0,this.childNodes=[],this.style={width:"0px",height:"0px",top:void 0,left:void 0,position:"",backgroundColor:void 0}}get offsetWidth(){return parseFloat(this.style.width||"0")}get offsetHeight(){return parseFloat(this.style.height||"0")}get firstChild(){return null}get parentNode(){return null}get classList(){return{length:0,value:"",add(){},remove(){},contains:e=>!1,item:null}}get innerHTML(){return""}set innerHTML(e){}appendChild(e){return this.childNodes.push(e),e}removeChild(){}addEventListener(){}removeEventListener(){}insertBefore(){}contains(e){return!1}};function ep(){return new WL}var zr=vo?()=>window.devicePixelRatio:()=>1;function XL(e){const t=";base64,";let n,r,i;if(e.indexOf(t)===-1)return n=e.split(","),r=n[0].split(":")[1],i=decodeURIComponent(n[1]),$d(i,r);n=e.split(t),r=n[0].split(":")[1],i=window.atob(n[1]);const s=i.length,o=new Uint8Array(s);for(let a=0;a<s;++a)o[a]=i.charCodeAt(a);return $d([o],r)}var YL=class{constructor(e,t){this.data=e,this.type=t}};function $d(e,t){return typeof Blob<"u"?new Blob(e,{type:t}):new YL(e,t)}function y4(e){return typeof Blob<"u"&&e instanceof Blob||e instanceof YL}function v4(e,t){return t==="blob"?e:t==="dataURL"?XL(e):$d([e],"text/xml")}function No(e,t,n){if(!pm)return e;let r=null,i=null,s=null;window.Blob?(r=v4(e,n),i=window.URL.createObjectURL(r)):s="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(e);const o=document.createElement("a");return o.setAttribute("href",i||s),o.setAttribute("download",t),document.body.appendChild(o),o.click(),document.body.removeChild(o),i&&setTimeout(()=>window.URL.revokeObjectURL(i),0),e}function tp(e,t,n,r=zr()){if(ba(e,t+"px",n+"px"),e.tagName==="IMG"||e.tagName==="CANVAS"){const i=e;i.width=t*r,i.height=n*r}}function Px(e,t){Ji(t,(n,r)=>{n!==void 0&&e.setAttribute(r,n)})}var Mx="http://www.w3.org/2000/svg",q_="http://www.w3.org/2000/xmlns/",qL="http://www.w3.org/1999/xlink",x4=1;function zt(e,t){const n=xa.createElementNS(Mx,e);return n.style||(n.style={}),t&&Px(n,t),n}function Z_(e){const t=xa.createElement("div"),n=e.trim().replace(/\s+/g," ");if(t.innerHTML=n,!t.firstChild||t.firstChild.nodeType!==x4)throw new Error(`Failed to create element from: "${e}". Expected an HTML string`);return t.firstChild}function Fx(e){if(xa)return xa.createTextNode(e)}function ZL(e){return typeof Image>"u"?Promise.resolve(null):new Promise(t=>{const n=new Image;n.src=e,n.onload=()=>t(n),n.onerror=()=>t(null)})}function JL(e){if(e.indexOf("http://")===0||e.indexOf("https://")===0)return e;const t=window.location.origin,n=window.location.pathname,r=n.lastIndexOf("/");return r===-1?t+"/"+e:t+n.substr(0,r)+"/"+e}function Jl(e){return new Promise((t,n)=>{const r=new Lx;r.open("GET",JL(e),!0),r.onreadystatechange=function(){if(r.readyState===4){const i=r.status;i===200?t(r.responseText):n(i!==0?new Error(`cannot retrieve file at url "${e}"; the server responded with status code ${i}.`):new Error(`cannot send XMLHttpRequest to url "${e}"; if you're using the local file protocol this is most likely the cause.`))}},r.onerror=function(){n(new Error(`cannot retrieve file at url "${e}"; the XMLHttpRequest failed.`))},r.send()})}function QL(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function np(e,t){e.style.cursor=t,e.style.cursor!==t&&(e.style.cursor=`-webkit-${t}`)}function KL(e){return new Promise((t,n)=>{const r=new Lx;r.responseType="blob",r.open("GET",JL(e),!0),r.onreadystatechange=()=>{if(r.readyState===4){if(r.status===200)return t(r.response);n(r.status)}},r.onerror=i=>n(i),r.send()})}function eI(e){return KL(e).then(t=>new Promise((n,r)=>{const i=new UL;i.onerror=r,i.onload=()=>n(i.result),i.readAsDataURL(t)}))}function ol(e,t=!0){const n=t?"&#13;":`
`;return(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,n).replace(/[\r\n]/g,n)}var Rx={0:"left",1:"middle",2:"right"};function tI(e){if(e.baseURI)return e.baseURI;const t=e.getElementsByTagName("base");return t.length>0?t[0].href:e.URL||(e.location?e.location.href:"")}function nI(e,t,n,r){return new Promise(i=>{let s=t;const o=Date.now(),a=(n-t)*Math.min(1,1/(r/16));(function l(){Date.now()-o<r?(s=Math.min(1,Math.max(0,s+a)),e.style.opacity=s.toString(),Nx(l)):i()})()})}function ba(e,t,n){e.style.width=t,e.style.height=n}var rI=vo&&!!window.PointerEvent,xm="pointerdown",bm="pointermove",wm="pointerup",fu="pointercancel",Ml={},rp=0,iI=e=>e.pointerType==="mouse",sI=e=>e.pointerType!=="mouse";function b4(){if(Ts&&rp===0&&rI){const e=document.documentElement;e.addEventListener(xm,oI,!0),e.addEventListener(bm,aI,!0),e.addEventListener(wm,ip,!0),e.addEventListener(fu,ip,!0)}rp++}function w4(){if(rp--,Ts&&rp===0){const e=document.documentElement;e.removeEventListener(xm,oI,!0),e.removeEventListener(bm,aI,!0),e.removeEventListener(wm,ip,!0),e.removeEventListener(fu,ip,!0)}}function oI(e){Ml[e.pointerId]=e}function aI(e){Ml[e.pointerId]&&(Ml[e.pointerId]=e)}function ip(e){delete Ml[e.pointerId]}function Em(e,t){e.touches=[];for(const n in Ml)e.touches.push(Ml[n]);e.changedTouches=[e],t(e)}function E4(e,t,n){const r=i=>{iI(i)||(sI(i)&&i.preventDefault(),Em(i,n))};return e(t,xm,r,!1),r}function S4(e,t,n){const r=i=>{sI(i)&&i.preventDefault(),Em(i,n)};return e(t,fu,r,!1),r}function A4(e,t,n){const r=i=>{iI(i)&&i.buttons===0||Em(i,n)};return e(t,bm,r,!1),r}function k4(e,t,n){const r=i=>Em(i,n);return e(t,wm,r,!1),e(t,fu,r,!1),r}function gS(e,t,n,r){return n==="touchstart"?e(t,xm,r,!1):n==="touchmove"?e(t,bm,r,!1):n==="touchend"?(e(t,wm,r,!1),e(t,fu,r,!1)):void 0}var ct=class{constructor(e){this._ogma=e}_setModules(e){this._modules=e}onMounted(){}onReady(e){}destroy(e){}},C4=["graphics","legend","brand"],zf=300,Of=300,T4=200,N4=class extends ct{constructor(){super(...arguments),this._width=zf,this._height=Of,this._resizeObserver=VL(()=>this._resize()),this._layers={},this._focus=!1,this._container=null,this._isFullScreen=!1,this._beforeNextFramePromises=[],this._afterNextFramePromises=[],this._refreshUntil=0,this._currentTime=ir(),this._timeouts=[],this._isDestroyed=!1,this._onDetachDom=[],this._isRealBrowser=pm,this._isDocumentReady=mm,this._inFrame=!1,this._mustRefresh=!1,this._nextFrame=null,this._onWindowFocus=()=>this.refresh(),this._onFullscreenChange=()=>{this._isFullScreen=ad()},this._resize=e=>{if(!this._container&&!e)return;const t=this._width,n=this._height;let r,i;if(this._container){const s=this._modules.settings.get("minimumWidth"),o=this._modules.settings.get("minimumHeight"),a=this._container.clientWidth||1,l=this._container.clientHeight||1;r=Math.max(s,e?e.width:a),i=Math.max(o,e?e.height:l)}else e!=null&&(r=e.width,i=e.height);r===t&&i===n||(this._width=r,this._height=i,Ji(this._layers,({element:s,automaticResize:o})=>{o&&tp(s,r,i)}),this._modules.events.fire("resize",{prevWidth:t,prevHeight:n,width:r,height:i,difWidth:r-t,difHeight:i-n}))}}onMounted(){this._modules.settings.register("minimumWidth",zf,()=>this._resize(),!1),this._modules.settings.register("minimumHeight",Of,()=>this._resize(),!1),this._modules.events.register(["beforeNewFrame","frame","afterNewFrame","setContainer","resize"]),this._onDetachDom=[],b4(),this.addWindowEventListener("focus",this._onWindowFocus)}onReady(e){var t,n;e.container&&this.setContainer(e.container),(t=e.options)!=null&&t.width||(n=e.options)!=null&&n.height?this._resize({width:e.options.width||zf,height:e.options.height||Of}):this._resize()}addWindowEventListener(e,t,n){return this._isRealBrowser&&this.addElementEventListener(window,e,t,n),this}addDirectWindowEventListener(e,t,n){this._isRealBrowser&&window.addEventListener(e,t,n)}removeDirectWindowEventListener(e,t){this._isRealBrowser&&window.removeEventListener(e,t)}addDocumentEventListener(e,t,n){return this._isDocumentReady&&this.addElementEventListener(document.documentElement,e,t,n),t}removeDocumentEventListener(e,t){this._isDocumentReady&&document.documentElement.removeEventListener(e,t)}addMediaListener(e,t){if(this._isDocumentReady&&typeof window.matchMedia=="function"){const n=window.matchMedia(e);n.addListener(t),this._onDetachDom.push(()=>n.removeListener(t))}}addElementEventListener(e,t,n,r){return this._isDestroyed||(e.addEventListener(t,n,r),this._onDetachDom.push(()=>e.removeEventListener(t,n,r))),n}detachFromDom(){this._onDetachDom.forEach(e=>e()),this._onDetachDom=[],this._emptyContainer()}setTimeout(e,t=0){const n=setTimeout(()=>{this._timeouts.splice(this._timeouts.indexOf(n),1),e()},t);return this._timeouts.push(n),n}clearTimeout(e){return e&&(clearTimeout(e),this._timeouts.splice(this._timeouts.indexOf(e),1)),null}clearAllTimeouts(){this._timeouts.forEach(clearTimeout),this._timeouts=[]}stopFrames(){this._isDestroyed=!0,this._nextFrame&&(IL(this._nextFrame),this._nextFrame=null)}isDestroyed(){return this._isDestroyed}getDimensions(){return{width:this._width,height:this._height}}setDimensions(e){this._resize(e)}setLayer(e,t,{automaticResize:n=!1}={}){t&&(t._ogmaLayer=e,n&&(t.style.position="absolute",t.style.top="0px",t.style.left="0px",tp(t,this._width,this._height,zr()))),this._layers[e]={element:t,automaticResize:n},this._updateContainerContent()}setContainer(e){let t;if(typeof e=="string"){if(t=document.getElementById(e),!t)throw new Error(`unable to find DOM element with id "${e}"`)}else t=e;if(t===this._container)return;t===null&&this._emptyContainer();const n=this._container;this._isFullScreen=!1,this._container&&this._resizeObserver.unobserve(this._container),this._container=t,this._container&&(["fullscreenchange","webkitfullscreenchange"].forEach(r=>{this.addElementEventListener(this._container,r,this._onFullscreenChange)}),this._resizeObserver.observe(this._container)),this._resize(),this._updateContainerContent(),this._modules.events.fire("setContainer",{element:t,prevElement:n})}getContainer(){return this._container}appendElement(e){this._container!==null&&this._container.appendChild(e)}focus(){this._focus=!0}blur(){this._focus=!1}hasFocus(){return this._focus}forceResize(){this._resize()}_beforeOrAfterNextFrame(e){const t=e?this._afterNextFramePromises:this._beforeNextFramePromises,n=new Promise(r=>{t.push(()=>(r(void 0),n))});return this._refresh(),n}beforeNextFrame(){return this._beforeOrAfterNextFrame(!1)}afterNextFrame(){return this._beforeOrAfterNextFrame(!0)}refresh(e){e&&(this._refreshUntil=Math.max(this._refreshUntil,e)),this._refresh()}_emptyContainer(){if(this._container){const e=[];for(let t=0;t<this._container.childNodes.length;++t){const n=this._container.childNodes[t];n._ogmaLayer&&e.push(n)}for(let t=0;t<e.length;++t)this._container.removeChild(e[t])}}_fillContainer(){if(this._container){const e=HL(this._container,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&(this._container.style.position="relative");const t=this._container.firstChild;C4.forEach(n=>{const r=this._layers[n];r&&r.element&&this._container&&this._container.insertBefore(r.element,t)})}}_updateContainerContent(){this._emptyContainer(),this._fillContainer()}_refresh(){this._inFrame?this._mustRefresh=!0:this._nextFrame||this._isDestroyed||(this._nextFrame=Nx(()=>this._playFrame()))}_playFrame(){const e=ir(),t=e-this._currentTime,n=sL([this._beforeNextFramePromises,()=>this._modules.events.fire("beforeNewFrame",{elapsed:t}),()=>this._modules.events.fire("frame",{elapsed:t}),()=>this._modules.events.fire("afterNewFrame",{elapsed:t}),this._afterNextFramePromises,()=>{this._inFrame=!1,(this._mustRefresh||e<this._refreshUntil+17)&&(this._mustRefresh=!1,this._refresh())}]);this._inFrame=!0,this._nextFrame=null,this._mustRefresh=!1,this._currentTime=e,this._beforeNextFramePromises=[],this._afterNextFramePromises=[],n.reduce((r,i)=>r.then(()=>{if(!this._isDestroyed)return i()}),Promise.resolve())}isPlayingFrame(){return this._inFrame||!!this._nextFrame}setFullScreen(e){let t=Promise.resolve();return e!==this._isFullScreen?(this._container&&(t=e?L4(this._container):I4()),t.then(()=>new Promise(n=>{this.setTimeout(()=>{this._isFullScreen=ad(),n(void 0)},T4)}))):t}isFullScreen(){return ad()}debounceBeforeFrame(e){let t=!1,n=[];const r=()=>{const i=n;t=!1,n=[],e(),i.forEach(s=>s())};return()=>new Promise(i=>{n.push(i),t||(t=!0,this.beforeNextFrame().then(r))})}destroy(){this._resizeObserver.disconnect(),w4(),this.detachFromDom(),this.clearAllTimeouts(),this.stopFrames()}};function ad(){return typeof document<"u"&&!!(document.fullscreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}function L4(e){return ad()?Promise.resolve():e.requestFullscreen?e.requestFullscreen():e.requestFullScreen?e.requestFullScreen():e.webkitRequestFullScreen?Promise.resolve(e.webkitRequestFullScreen()):e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():Promise.resolve()}function I4(){return ad()?typeof document>"u"?Promise.resolve():document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen?Promise.resolve(document.webkitCancelFullScreen()):document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():Promise.resolve():Promise.resolve()}var P4=class extends ct{constructor(){super(...arguments),this._nodeChanges=[],this._edgeChanges=[],this._shouldTriggerEvents=!1}onMounted(){this._nodeDataList=this._modules.graph.createAttribute(!0,{name:"data",storage:"any"},!1),this._edgeDataList=this._modules.graph.createAttribute(!1,{name:"data",storage:"any"},!1),this._nodeList=this._modules.graph.getNodeAttribute("object"),this._edgeList=this._modules.graph.getEdgeAttribute("object"),this._modules.events.register(["setData","updateNodeData","updateEdgeData"]),this._modules.events.on("addNodes",({nodes:e,objects:t})=>this._onAddElements(e,t)).on("addEdges",({edges:e,objects:t})=>this._onAddElements(e,t)).on("beforeNewFrame",()=>{this._shouldTriggerEvents&&(this._shouldTriggerEvents=!1,this._triggerEvents())})}_onAddElements(e,t){const{isNode:n,size:r,_indexes:i}=e,s=this[n?"_nodeDataList":"_edgeDataList"];for(let o=0;o<r;++o)s.set(i[o],t[o].data)}setProperty(e,t,n,{dispatch:r=!1,virtual:i=!1}={}){this._setDataProperty(e.isNode,e._indexes,t,n,r,i),this._modules.events.fire("setData",{elements:e,virtual:i})}getProperty(e,t){return this._getDataProperty(e.isNode,e._indexes,t)}_setDataProperty(e,t,n,r,i,s){i&&typeof r=="function"&&(i=!1);const o=pS(n),a=typeof r=="function",l=e?this._nodeList:this._edgeList,c=e?this._nodeDataList:this._edgeDataList,d=M4(e?this._nodeChanges:this._edgeChanges,o);for(let u=0;u<t.length;++u){const h=t[u];let g=c.get(h);const p=l.get(h),m=i?r[u]:r;let f,y;if(o===null)f=g,y=a?m(p):m,c.set(h,y);else{g==null&&(g={},c.set(h,g));const _=o.length;for(let v=0;v<_;v++){const x=o[v];let b=g[x];v<_-1?(b==null&&(b={},g[x]=b),g=b):(f=b,y=a?m(p):m,g[x]=y)}}d.indexes.push(h),d.previousValues.push(f),d.newValues.push(y),d.virtual=s}this._scheduleEvents()}_getDataProperty(e,t,n,r){const i=pS(n);r||(r=new Array(t.length));const s=e?this._nodeDataList:this._edgeDataList;for(let o=0;o<t.length;++o){const a=t[o];let l,c=s.get(a);if(i!==null&&i.length)if(c==null)l=void 0;else{const d=i.length;for(let u=0;u<d&&c;++u)l=c=c[i[u]]}else l=c;r[o]=l}return r}_scheduleEvents(){this._shouldTriggerEvents=!0,this._modules.dom.refresh()}_triggerEvents(){const e=this._prepareEvtPayload(!0),t=this._prepareEvtPayload(!1);this._modules.events.fire("updateNodeData",e),this._modules.events.fire("updateEdgeData",t)}_prepareEvtPayload(e){const t=e?this._modules.graph.nodeList:this._modules.graph.edgeList,n=e?"_nodeChanges":"_edgeChanges";let r=[];const i=this[n];this[n]=[];const s=[];for(let o=0;o<i.length;++o){const{indexes:a,property:l,newValues:c,previousValues:d,virtual:u}=i[o];r=r.concat(a||[]),e?s.push({property:l,newValues:c,previousValues:d,virtual:u,nodes:t(a)}):s.push({property:l,newValues:c,previousValues:d,virtual:u,edges:t(a)})}return e?{nodes:t(r).dedupe(),isNode:e,changes:s}:{edges:t(r).dedupe(),isNode:e,changes:s}}};function M4(e,t){for(let r=0;r<e.length;++r){const i=e[r],s=i.property;if(t===null&&s===null)return i;if(t&&s&&s.length===t.length){let o=!0;for(let a=0;a<s.length;++a)if(s[a]!==t[a]){o=!1;break}if(o)return i}}const n={property:t&&t.slice(),indexes:[],previousValues:[],newValues:[],nodes:null,virtual:!1,edges:null};return e.push(n),n}function pS(e){return typeof e=="string"?e.split("."):Vn(e)?e:null}function lI(e,t,n){const r=e.getObjectList(t.isNode);for(let i=0;i<t._indexes.length;++i){const s=t._indexes[i];n(r.get(s),i)}}function cI(e,t,n){const r=new Array(t.size),i=e.getObjectList(t.isNode);for(let s=0;s<t._indexes.length;++s){const o=t._indexes[s],a=i.get(o);r[s]=n(a,s)}return r}function dI(e,t,n){n=n||Ix;const r=t.isNode,i=e.acquireIndexList(r),s=e.getObjectList(r),o=e.getListFactory(r);for(let a=0;a<t._indexes.length;++a){const l=t._indexes[a],c=s.get(l);c&&n(c,a)&&i.push(l)}return o(i.sliceAndReset())}function uI(e,t,n,r){const i=e.getListFactory(t.isNode);if(!n)return{valid:t,invalid:i()};const s=e.acquireIndexList(t.isNode),o=e.acquireIndexList(t.isNode),a=e.getObjectList(t.isNode);for(let l=0;l<t._indexes.length;l++){const c=t._indexes[l],d=a.get(c);d!==void 0&&(n(d,r)?s:o).pushUnchecked(c)}return{valid:i(s.sliceAndReset()),invalid:i(o.sliceAndReset())}}function hI(e,t,n,r){const i=e.getObjectList(t.isNode);let s=r;for(let o=0;o<t._indexes.length;++o){const a=t._indexes[o];s=n(s,i.get(a),o)}return s}function gI(e,t){const n=t.isNode,r=e.topology.getDeduper(n),i=e.acquireIndexList(n),s=e.getListFactory(n);for(let o=0;o<t._indexes.length;o++){const a=t._indexes[o];r.get(a)===0&&(r.set(a,1),i.push(a))}return s(i.sliceAndReset())}function pI(e,t,n){const r=t.isNode,i=n.topology.getDeduper(r),s=n.acquireIndexList(r),o=n.getListFactory(r);for(let a=0;a<t._indexes.length;a++){const l=t._indexes[a];i.set(l,1)}for(let a=0;a<e._indexes.length;a++){const l=e._indexes[a];i.get(l)===0&&s.push(l)}return o(s.sliceAndReset())}function mI(e,t){const n=t.isNode,r=e.storage.fetch(n),i=r.getFlexArray("excluded"),s=r.getMaxIndex(),o=e.topology.getDeduper(n),a=e.acquireIndexList(n),l=e.getListFactory(n);for(let c=0;c<t._indexes.length;c++)o.set(t._indexes[c],1);for(let c=1;c<=s;++c)o.get(c)===0&&i.get(c)===0&&a.push(c);return l(a.sliceAndReset())}function fI(e,t,n){const r=e.getListFactory(t.isNode),i=new Uint32Array(t._indexes.length+n._indexes.length);return i.set(t._indexes),i.set(n._indexes,t._indexes.length),r(i)}function _I(e,t){return e.getObjectList(t.isNode).getMultiple(t._indexes)}function Sm(e,t){const n=e.getStorage(t.isNode);if(t.isList){const r=new Array(t.size);for(let i=0;i<t._indexes.length;++i)r[i]=n.getId(t._indexes[i]);return r}return n.getId(t._index)}function yI(e,t){return e.topology.getExtremity(!0,t)}function vI(e,t){return e.topology.getExtremity(!1,t)}function xI(e,t,n){return e.getObjectList(t.isNode).get(t._indexes[n])}function bI(e,t,n){const r=e.getListFactory(t.isNode),i=e.getObjectList(t.isNode),s=t._indexes.slice();return s.sort((o,a)=>{const l=i.get(o),c=i.get(a);return n(l,c)}),r(s)}var F4=[];function wI(e){typeof e=="object"&&e!==null||(e={});const t=typeof e.data=="function"?e.data:Mi;return{attributes:Array.isArray(e.attributes)?e.attributes:e.attributes||F4,data:t}}function Am(e,t){for(const n of e){const r=t;Object.keys(r).forEach(i=>{const s=r[i];n.prototype[i]=function(o,a){return mo(`Deprecated method "${i}"; please use "${s}" instead.`),this[s](o,a)}})}}function mS(e){const t=e.getFlexArray("removed"),n=e.getFlexArray("excluded"),r=e.getFlexArray("virtual");return{all:i=>t.get(i)===0,visible:i=>n.get(i)===0,excluded:i=>n.get(i)===1,raw:i=>r.get(i)===0&&t.get(i)===0,_all:i=>!0}}function fS(e,t,n){return{all:Zu(n.all,e,t),visible:Zu(n.visible,e,t),raw:Zu(n.raw,e,t),_all:Zu(n._all,e,t)}}function Zu(e,t,n){let r=null;return{getList(){if(!r){const i=t(),s=n();s.reset();for(let o=1;o<=i;++o)e(o)&&s.push(o);r=s.sliceAndReset()}return r},invalidList(){r=null}}}function R4(e){if(e===void 0)return Math.round(Math.random()*Number.MAX_SAFE_INTEGER);if(typeof e!="string"&&(typeof e!="number"||!isFinite(e)))throw new Error(`${e} is not a valid id, expected string or number`);return e}var _S=new Uint32Array(1),xo=class{constructor(e,t){this.size=1,this.isNode=!1,this.isList=!1,this._index=e,this._ogma=t}get _indexes(){return _S[0]=this._index,_S}setAttributes(e,t){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,e,t)}setAttribute(e,t,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,e,t,n)}getAttributes(e){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,e)[0]}getAttribute(e){return this._ogma.modules.individualAttributes.getSingleAttribute(this,e)[0]}resetAttributes(e,t){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,e,t)}replaceOriginalAttributes(e,t){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,e,t)}getPreviousAttributes(e){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,e)[0]}isInView(e){return this._ogma.modules.locate.isElementInView(this,e)}hasParallelEdges(){return this._ogma.modules.graph.hasParallelEdges(this)}getParallelEdges(e){return this._ogma.modules.graph.getParallelEdges(this,e)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetEdgesAdjacentElements(this)}getAdjacentElements(){const{nodes:e,edges:t}=this.fastGetAdjacentElements();return{nodes:e.dedupe(),edges:t.filter(n=>n!==this).dedupe()}}isVisible(){return!this.isExcluded()}isExcluded(){return this._ogma.modules.graph.isExcluded(this)[0]}setExcluded(e){return this._ogma.modules.graph.setExcluded(this,e)}setVisible(e){return this.setExcluded(!e)}toList(){return this._ogma.modules.graph.edgeList(new Uint32Array([this._index]))}getId(){return Sm(this._ogma.modules.graph,this)}getSource(){return yI(this._ogma.modules.graph,this)}getTarget(){return vI(this._ogma.modules.graph,this)}getExtremities(){return this._ogma.modules.graph.nodeList(new Uint32Array([this.getSource()._index,this.getTarget()._index]))}setSource(e){this._ogma.modules.graph.setSource(this,e)}setTarget(e){this._ogma.modules.graph.setTarget(this,e)}slice(){return this.toList()}toJSON(e={}){const{attributes:t,data:n}=wI(e);return{id:this.getId(),source:this.getSource().getId(),target:this.getTarget().getId(),attributes:this.getAttributes(t),data:n(un(this.getData()))}}get(e){return e===0?this:void 0}setSelected(e){this._ogma.modules.selection.setActive(this,e)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(e){return this._ogma.modules.locate.locateElements(this,e)}getBoundingBox({includeTexts:e=!1,ignoreCurvature:t=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,e,e,t)}setData(e,t){return arguments.length<2&&(t=e,e=null),this._ogma.modules.data.setProperty(this,e,t),this}getData(e){return this._ogma.modules.data.getProperty(this,e||null)[0]}addClass(e,t){return this._ogma.modules.classes.addClassesToElements([e],this,t)}addClasses(e,t){return this._ogma.modules.classes.addClassesToElements(e,this,t)}removeClass(e,t){return this._ogma.modules.classes.removeClassesFromElements([e],this,t)}removeClasses(e,t){return this._ogma.modules.classes.removeClassesFromElements(e,this,t)}hasClass(e){return this._ogma.modules.classes.hasSingleElementClass(e,this)}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)[0]}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)[0]}isVirtual(){return this._ogma.modules.transformations.isElementVirtual(this)}getTransformation(){return this._ogma.modules.transformations.getElementTransformation(this)}getMetaEdge(){return this._ogma.modules.transformations.getMetaEdge(this)}getSubEdges(){return this._ogma.modules.transformations.getSubEdges(this)}pulse(e){return this._ogma.modules.pulses.pulse(this,e)}};Am([xo],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute"});var Aa=class{constructor(e,t){this.isList=!0,this.isNode=!1,this._indexes=e,this._ogma=t}get size(){return this._indexes.length}setAttributes(e,t){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,e,t)}setAttribute(e,t,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,e,t,n)}getAttributes(e){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,e)}getAttribute(e){return this._ogma.modules.individualAttributes.getSingleAttribute(this,e)}resetAttributes(e,t){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,e,t)}replaceOriginalAttributes(e,t){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,e,t)}getPreviousAttributes(e){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,e)}getPreviousAttribute(e){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,e)}getParallelEdges(e){return this._ogma.modules.graph.getParallelEdges(this,e)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetEdgesAdjacentElements(this)}getAdjacentElements(){const{nodes:e,edges:t}=this.fastGetAdjacentElements();return{nodes:e.dedupe(),edges:t.subtract(this).dedupe()}}isVisible(){return this.isExcluded().map(e=>!e)}isExcluded(){return this._ogma.modules.graph.isExcluded(this)}isVirtual(){return this.map(e=>this._ogma.modules.transformations.isElementVirtual(e))}setExcluded(e){return this._ogma.modules.graph.setExcluded(this,e)}setVisible(e){return this.setExcluded(!e)}toList(){return this}toArray(){return _I(this._ogma.modules.graph,this)}clone(){return this._ogma.modules.graph.edgeList(this._indexes.slice())}getId(){return Sm(this._ogma.modules.graph,this)}getSource(){return yI(this._ogma.modules.graph,this)}getTarget(){return vI(this._ogma.modules.graph,this)}getExtremities(){return this.getSource().concat(this.getTarget())}get(e){return xI(this._ogma.modules.graph,this,e)}forEach(e){lI(this._ogma.modules.graph,this,e)}map(e){return cI(this._ogma.modules.graph,this,e)}[Symbol.iterator](){let e=-1;return{next:()=>({value:this.get(++e),done:e>=this.size})}}filter(e){return dI(this._ogma.modules.graph,this,e)}reduce(e,t){return hI(this._ogma.modules.graph,this,e,t)}concat(e){return fI(this._ogma.modules.graph,this,e)}dedupe(){return gI(this._ogma.modules.graph,this)}subtract(e){return pI(this,e,this._ogma.modules.graph)}slice(e,t){return this._ogma.modules.graph.edgeList(this._indexes.slice(e,t))}indexOf(e){return e instanceof xo?this._indexes.indexOf(e._index):-1}includes(e){return this.indexOf(e)!==-1}sort(e){return bI(this._ogma.modules.graph,this,e)}inverse(){return mI(this._ogma.modules.graph,this)}toJSON(e={}){return this.map(t=>t.toJSON(e))}setSelected(e){this._ogma.modules.selection.setActive(this,e)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(e){return this._ogma.modules.locate.locateElements(this,e)}getBoundingBox({includeTexts:e=!1,ignoreCurvature:t=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,e,e,t)}setData(e,t){if(arguments.length<2&&(t=e,e=null),typeof t!="function"&&!Vn(t))throw new Error(`invalid argument ${t}; expected array or function`);return this._ogma.modules.data.setProperty(this,e,t,{dispatch:!0}),this}fillData(e,t){return arguments.length<2&&(t=e,e=null),this._ogma.modules.data.setProperty(this,e,t,{dispatch:!1}),this}getData(e){return this._ogma.modules.data.getProperty(this,e||null)}addClass(e,t){return this._ogma.modules.classes.addClassesToElements([e],this,t)}addClasses(e,t){return this._ogma.modules.classes.addClassesToElements(e,this,t)}removeClass(e,t){return this._ogma.modules.classes.removeClassesFromElements([e],this,t)}removeClasses(e,t){return this._ogma.modules.classes.removeClassesFromElements(e,this,t)}hasClass(e){return this.map(t=>this._ogma.modules.classes.hasSingleElementClass(e,t))}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)}getMetaEdge(){return this._ogma.modules.transformations.getMetaEdges(this)}getSubEdges(){return this.map(this._ogma.modules.transformations.getSubEdges)}pulse(e){return this._ogma.modules.pulses.pulse(this,e)}};Am([Aa],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute"});var Yi="geo.latitude",qi="geo.longitude",yS="geo.prevLat",Bf="geo.prevLng",J_=85.0511287798,D4=6378137,sp=1,z4='Map data &copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap contributors</a>',Wo={latitudePath:"latitude",longitudePath:"longitude",maxZoomLevel:22,minZoomLevel:0,wrapCoordinates:!0,tileUrlTemplate:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",tileUrlSubdomains:"abc",attribution:null,attributionOptions:void 0,backgroundColor:"silver",opacity:1,duration:0,disableNodeDragging:!0,tileBuffer:1,sizeRatio:1,tiles:{url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png",subdomains:"abc",tms:!1,wms:!1},crs:void 0},O4={maxBoundsViscosity:1,worldCopyJump:!0,zoomControl:!1,attributionControl:!1};function eo(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function fi(e,t,n){return Math.max(t,Math.min(n,e))}function Q_(e,t,n){return e+(t-e)*n}function Dt(e,t,n){return e*(1-n)+t*n}function al(e){if(!e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n){const i=e[n];i>t&&(t=i)}return t}function ms(e){if(!e.length)return 1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n){const i=e[n];i<t&&(t=i)}return t}var EI=(e,t)=>Math.log(e)/Math.log(t),op=e=>e<-Math.PI?e+2*Math.PI:e>Math.PI?e-2*Math.PI:e,B4=class{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],s=e+i,o=Math.abs(e)<Math.abs(i)?e-(s-i):i-(s-e);o&&(t[n++]=o),e=s}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,s=0;if(i>0){for(s=e[--i];i>0&&(t=s,n=e[--i],s=t+n,r=n-(s-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=s+n,n==t-s&&(s=t))}return s}};function*j4(e){for(const t of e)yield*zO(t)}function SI(e){return Array.from(j4(e))}var Zt=1e-6,U4=1e-12,Nt=Math.PI,ci=Nt/2,vS=Nt/4,Fi=2*Nt,ss=180/Nt,Ur=Nt/180,vn=Math.abs,$4=Math.atan,Fl=Math.atan2,dn=Math.cos,sn=Math.sin,G4=Math.sign||function(e){return e>0?1:e<0?-1:0},_u=Math.sqrt;function AI(e){return e>1?0:e<-1?Nt:Math.acos(e)}function Rl(e){return e>1?ci:e<-1?-ci:Math.asin(e)}function Fc(){}function ap(e,t){e&&bS.hasOwnProperty(e.type)&&bS[e.type](e,t)}var xS={Feature:function(e,t){ap(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)ap(n[r].geometry,t)}},bS={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){K_(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)K_(n[r],t,0)},Polygon:function(e,t){wS(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)wS(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)ap(n[r],t)}};function K_(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function wS(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)K_(e[n],t,1);t.polygonEnd()}function V4(e,t){e&&xS.hasOwnProperty(e.type)?xS[e.type](e,t):ap(e,t)}function ey(e){return[Fl(e[1],e[0]),Rl(e[2])]}function Dl(e){var t=e[0],n=e[1],r=dn(n);return[r*dn(t),r*sn(t),sn(n)]}function Ju(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function lp(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function jf(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Qu(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ty(e){var t=_u(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function ny(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return(r=t.invert(r,i))&&e.invert(r[0],r[1])}),n}function ry(e,t){return vn(e)>Nt&&(e-=Math.round(e/Fi)*Fi),[e,t]}function H4(e,t,n){return(e%=Fi)?t||n?ny(SS(e),AS(t,n)):SS(e):t||n?AS(t,n):ry}function ES(e){return function(t,n){return vn(t+=e)>Nt&&(t-=Math.round(t/Fi)*Fi),[t,n]}}function SS(e){var t=ES(e);return t.invert=ES(-e),t}function AS(e,t){var n=dn(e),r=sn(e),i=dn(t),s=sn(t);function o(a,l){var c=dn(l),d=dn(a)*c,u=sn(a)*c,h=sn(l),g=h*n+d*r;return[Fl(u*i-g*s,d*n-h*r),Rl(g*i+u*s)]}return o.invert=function(a,l){var c=dn(l),d=dn(a)*c,u=sn(a)*c,h=sn(l),g=h*i-u*s;return[Fl(u*i+h*s,d*n+g*r),Rl(g*n-d*r)]},o}function W4(e,t,n,r,i,s){if(n){var o=dn(t),a=sn(t),l=r*n;i==null?(i=t+r*Fi,s=t-l/2):(i=kS(o,i),s=kS(o,s),(r>0?i<s:i>s)&&(i+=r*Fi));for(var c,d=i;r>0?d>s:d<s;d-=l)c=ey([o,-a*dn(d),-a*sn(d)]),e.point(c[0],c[1])}}function kS(e,t){(t=Dl(t))[0]-=e,ty(t);var n=AI(-t[1]);return((-t[2]<0?-n:n)+Fi-Zt)%Fi}function kI(){var e,t=[];return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Fc,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function lg(e,t){return vn(e[0]-t[0])<Zt&&vn(e[1]-t[1])<Zt}function Ku(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function CI(e,t,n,r,i){var s,o,a=[],l=[];if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,f,y=p[0],_=p[m];if(lg(y,_)){if(!y[2]&&!_[2]){for(i.lineStart(),s=0;s<m;++s)i.point((y=p[s])[0],y[1]);return void i.lineEnd()}_[0]+=2*Zt}a.push(f=new Ku(y,p,null,!0)),l.push(f.o=new Ku(y,null,f,!1)),a.push(f=new Ku(_,p,null,!1)),l.push(f.o=new Ku(_,null,f,!0))}}),a.length){for(l.sort(t),CS(a),CS(l),s=0,o=l.length;s<o;++s)l[s].e=n=!n;for(var c,d,u=a[0];;){for(var h=u,g=!0;h.v;)if((h=h.n)===u)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(g)for(s=0,o=c.length;s<o;++s)i.point((d=c[s])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(g)for(c=h.p.z,s=c.length-1;s>=0;--s)i.point((d=c[s])[0],d[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,g=!g}while(!h.v);i.lineEnd()}}}function CS(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Uf(e){return vn(e[0])<=Nt?e[0]:G4(e[0])*((vn(e[0])+Nt)%Fi-Nt)}function X4(e,t){var n=Uf(t),r=t[1],i=sn(r),s=[sn(n),-dn(n),0],o=0,a=0,l=new B4;i===1?r=ci+Zt:i===-1&&(r=-ci-Zt);for(var c=0,d=e.length;c<d;++c)if(h=(u=e[c]).length)for(var u,h,g=u[h-1],p=Uf(g),m=g[1]/2+vS,f=sn(m),y=dn(m),_=0;_<h;++_,p=x,f=w,y=S,g=v){var v=u[_],x=Uf(v),b=v[1]/2+vS,w=sn(b),S=dn(b),A=x-p,C=A>=0?1:-1,k=C*A,T=k>Nt,M=f*w;if(l.add(Fl(M*C*sn(k),y*S+M*dn(k))),o+=T?A+C*Fi:A,T^p>=n^x>=n){var D=lp(Dl(g),Dl(v));ty(D);var B=lp(s,D);ty(B);var I=(T^A>=0?-1:1)*Rl(B[2]);(r>I||r===I&&(D[0]||D[1]))&&(a+=T^A>=0?1:-1)}}return(o<-Zt||o<Zt&&l<-U4)^1&a}function TI(e,t,n,r){return function(i){var s,o,a,l=t(i),c=kI(),d=t(c),u=!1,h={point:g,lineStart:m,lineEnd:f,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=v,o=[],s=[]},polygonEnd:function(){h.point=g,h.lineStart=m,h.lineEnd=f,o=SI(o);var x=X4(s,r);o.length?(u||(i.polygonStart(),u=!0),CI(o,q4,x,n,i)):x&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),o=s=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(x,b){e(x,b)&&i.point(x,b)}function p(x,b){l.point(x,b)}function m(){h.point=p,l.lineStart()}function f(){h.point=g,l.lineEnd()}function y(x,b){a.push([x,b]),d.point(x,b)}function _(){d.lineStart(),a=[]}function v(){y(a[0][0],a[0][1]),d.lineEnd();var x,b,w,S,A=d.clean(),C=c.result(),k=C.length;if(a.pop(),s.push(a),a=null,k)if(1&A){if((b=(w=C[0]).length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),x=0;x<b;++x)i.point((S=w[x])[0],S[1]);i.lineEnd()}}else k>1&&2&A&&C.push(C.pop().concat(C.shift())),o.push(C.filter(Y4))}return h}}function Y4(e){return e.length>1}function q4(e,t){return((e=e.x)[0]<0?e[1]-ci-Zt:ci-e[1])-((t=t.x)[0]<0?t[1]-ci-Zt:ci-t[1])}ry.invert=ry;var TS=TI(function(){return!0},Z4,Q4,[-Nt,-ci]);function Z4(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var a=s>0?Nt:-Nt,l=vn(s-n);vn(l-Nt)<Zt?(e.point(n,r=(r+o)/2>0?ci:-ci),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(a,r),e.point(s,r),t=0):i!==a&&l>=Nt&&(vn(n-i)<Zt&&(n-=i*Zt),vn(s-a)<Zt&&(s-=a*Zt),r=J4(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(a,r),t=0),e.point(n=s,r=o),i=a},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function J4(e,t,n,r){var i,s,o=sn(e-n);return vn(o)>Zt?$4((sn(t)*(s=dn(r))*sn(n)-sn(r)*(i=dn(t))*sn(e))/(i*s*o)):(t+r)/2}function Q4(e,t,n,r){var i;if(e==null)i=n*ci,r.point(-Nt,i),r.point(0,i),r.point(Nt,i),r.point(Nt,0),r.point(Nt,-i),r.point(0,-i),r.point(-Nt,-i),r.point(-Nt,0),r.point(-Nt,i);else if(vn(e[0]-t[0])>Zt){var s=e[0]<t[0]?Nt:-Nt;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function K4(e){var t=dn(e),n=2*Ur,r=t>0,i=vn(t)>Zt;function s(l,c){return dn(l)*dn(c)>t}function o(l,c,d){var u=[1,0,0],h=lp(Dl(l),Dl(c)),g=Ju(h,h),p=h[0],m=g-p*p;if(!m)return!d&&l;var f=t*g/m,y=-t*p/m,_=lp(u,h),v=Qu(u,f);jf(v,Qu(h,y));var x=_,b=Ju(v,x),w=Ju(x,x),S=b*b-w*(Ju(v,v)-1);if(!(S<0)){var A=_u(S),C=Qu(x,(-b-A)/w);if(jf(C,v),C=ey(C),!d)return C;var k,T=l[0],M=c[0],D=l[1],B=c[1];M<T&&(k=T,T=M,M=k);var I=M-T,N=vn(I-Nt)<Zt;if(!N&&B<D&&(k=D,D=B,B=k),N||I<Zt?N?D+B>0^C[1]<(vn(C[0]-T)<Zt?D:B):D<=C[1]&&C[1]<=B:I>Nt^(T<=C[0]&&C[0]<=M)){var V=Qu(x,(-b+A)/w);return jf(V,v),[C,ey(V)]}}}function a(l,c){var d=r?e:Nt-e,u=0;return l<-d?u|=1:l>d&&(u|=2),c<-d?u|=4:c>d&&(u|=8),u}return TI(s,function(c){var d,u,h,g,p;return{lineStart:function(){g=h=!1,p=1},point:function(m,f){var y,_=[m,f],v=s(m,f),x=r?v?0:a(m,f):v?a(m+(m<0?Nt:-Nt),f):0;if(!d&&(g=h=v)&&c.lineStart(),v!==h&&(!(y=o(d,_))||lg(d,y)||lg(_,y))&&(_[2]=1),v!==h)p=0,v?(c.lineStart(),y=o(_,d),c.point(y[0],y[1])):(y=o(d,_),c.point(y[0],y[1],2),c.lineEnd()),d=y;else if(i&&d&&r^v){var b;x&u||!(b=o(_,d,!0))||(p=0,r?(c.lineStart(),c.point(b[0][0],b[0][1]),c.point(b[1][0],b[1][1]),c.lineEnd()):(c.point(b[1][0],b[1][1]),c.lineEnd(),c.lineStart(),c.point(b[0][0],b[0][1],3)))}!v||d&&lg(d,_)||c.point(_[0],_[1]),d=_,h=v,u=x},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return p|(g&&h)<<1}}},function(c,d,u,h){W4(h,e,n,u,c,d)},r?[0,-e]:[-Nt,e-Nt])}function ej(e,t,n,r,i,s){var o,a=e[0],l=e[1],c=0,d=1,u=t[0]-a,h=t[1]-l;if(o=n-a,u||!(o>0)){if(o/=u,u<0){if(o<c)return;o<d&&(d=o)}else if(u>0){if(o>d)return;o>c&&(c=o)}if(o=i-a,u||!(o<0)){if(o/=u,u<0){if(o>d)return;o>c&&(c=o)}else if(u>0){if(o<c)return;o<d&&(d=o)}if(o=r-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<d&&(d=o)}else if(h>0){if(o>d)return;o>c&&(c=o)}if(o=s-l,h||!(o<0)){if(o/=h,h<0){if(o>d)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<d&&(d=o)}return c>0&&(e[0]=a+c*u,e[1]=l+c*h),d<1&&(t[0]=a+d*u,t[1]=l+d*h),!0}}}}}var Rc=1e9,eh=-Rc;function tj(e,t,n,r){function i(c,d){return e<=c&&c<=n&&t<=d&&d<=r}function s(c,d,u,h){var g=0,p=0;if(c==null||(g=o(c,u))!==(p=o(d,u))||l(c,d)<0^u>0)do h.point(g===0||g===3?e:n,g>1?r:t);while((g=(g+u+4)%4)!==p);else h.point(d[0],d[1])}function o(c,d){return vn(c[0]-e)<Zt?d>0?0:3:vn(c[0]-n)<Zt?d>0?2:1:vn(c[1]-t)<Zt?d>0?1:0:d>0?3:2}function a(c,d){return l(c.x,d.x)}function l(c,d){var u=o(c,1),h=o(d,1);return u!==h?u-h:u===0?d[1]-c[1]:u===1?c[0]-d[0]:u===2?c[1]-d[1]:d[0]-c[0]}return function(c){var d,u,h,g,p,m,f,y,_,v,x,b=c,w=kI(),S={point:A,lineStart:function(){S.point=C,u&&u.push(h=[]),v=!0,_=!1,f=y=NaN},lineEnd:function(){d&&(C(g,p),m&&_&&w.rejoin(),d.push(w.result())),S.point=A,_&&b.lineEnd()},polygonStart:function(){b=w,d=[],u=[],x=!0},polygonEnd:function(){var T=function(){for(var I=0,N=0,V=u.length;N<V;++N)for(var $,Q,se=u[N],te=1,de=se.length,Ee=se[0],oe=Ee[0],_e=Ee[1];te<de;++te)$=oe,Q=_e,oe=(Ee=se[te])[0],_e=Ee[1],Q<=r?_e>r&&(oe-$)*(r-Q)>(_e-Q)*(e-$)&&++I:_e<=r&&(oe-$)*(r-Q)<(_e-Q)*(e-$)&&--I;return I}(),M=x&&T,D=(d=SI(d)).length;(M||D)&&(c.polygonStart(),M&&(c.lineStart(),s(null,null,1,c),c.lineEnd()),D&&CI(d,a,T,s,c),c.polygonEnd()),b=c,d=u=h=null}};function A(k,T){i(k,T)&&b.point(k,T)}function C(k,T){var M=i(k,T);if(u&&h.push([k,T]),v)g=k,p=T,m=M,v=!1,M&&(b.lineStart(),b.point(k,T));else if(M&&_)b.point(k,T);else{var D=[f=Math.max(eh,Math.min(Rc,f)),y=Math.max(eh,Math.min(Rc,y))],B=[k=Math.max(eh,Math.min(Rc,k)),T=Math.max(eh,Math.min(Rc,T))];ej(D,B,e,t,n,r)?(_||(b.lineStart(),b.point(D[0],D[1])),b.point(B[0],B[1]),M||b.lineEnd(),x=!1):M&&(b.lineStart(),b.point(k,T),x=!1)}f=k,y=T,_=M}return S}}var NS=e=>e,zl=1/0,cp=zl,Gd=-zl,dp=Gd,nj={point:rj,lineStart:Fc,lineEnd:Fc,polygonStart:Fc,polygonEnd:Fc,result:function(){var e=[[zl,cp],[Gd,dp]];return Gd=dp=-(cp=zl=1/0),e}};function rj(e,t){e<zl&&(zl=e),e>Gd&&(Gd=e),t<cp&&(cp=t),t>dp&&(dp=t)}var LS=nj;function Dx(e){return function(t){var n=new iy;for(var r in e)n[r]=e[r];return n.stream=t,n}}function iy(){}function zx(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),V4(n,e.stream(LS)),t(LS.result()),r!=null&&e.clipExtent(r),e}function NI(e,t,n){return zx(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function ij(e,t,n){return NI(e,[[0,0],t],n)}function sj(e,t,n){return zx(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function oj(e,t,n){return zx(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}iy.prototype={constructor:iy,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var IS=16,aj=dn(30*Ur);function PS(e,t){return+t?cj(e,t):lj(e)}function lj(e){return Dx({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function cj(e,t){function n(r,i,s,o,a,l,c,d,u,h,g,p,m,f){var y=c-r,_=d-i,v=y*y+_*_;if(v>4*t&&m--){var x=o+h,b=a+g,w=l+p,S=_u(x*x+b*b+w*w),A=Rl(w/=S),C=vn(vn(w)-1)<Zt||vn(s-u)<Zt?(s+u)/2:Fl(b,x),k=e(C,A),T=k[0],M=k[1],D=T-r,B=M-i,I=_*D-y*B;(I*I/v>t||vn((y*D+_*B)/v-.5)>.3||o*h+a*g+l*p<aj)&&(n(r,i,s,o,a,l,T,M,C,x/=S,b/=S,w,m,f),f.point(T,M),n(T,M,C,x,b,w,c,d,u,h,g,p,m,f))}}return function(r){var i,s,o,a,l,c,d,u,h,g,p,m,f={point:y,lineStart:_,lineEnd:x,polygonStart:function(){r.polygonStart(),f.lineStart=b},polygonEnd:function(){r.polygonEnd(),f.lineStart=_}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function _(){u=NaN,f.point=v,r.lineStart()}function v(A,C){var k=Dl([A,C]),T=e(A,C);n(u,h,d,g,p,m,u=T[0],h=T[1],d=A,g=k[0],p=k[1],m=k[2],IS,r),r.point(u,h)}function x(){f.point=y,r.lineEnd()}function b(){_(),f.point=w,f.lineEnd=S}function w(A,C){v(i=A,C),s=u,o=h,a=g,l=p,c=m,f.point=v}function S(){n(u,h,d,g,p,m,s,o,i,a,l,c,IS,r),f.lineEnd=x,x()}return f}}var dj=Dx({point:function(e,t){this.stream.point(e*Ur,t*Ur)}});function uj(e){return Dx({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function hj(e,t,n,r,i){function s(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function MS(e,t,n,r,i,s){if(!s)return hj(e,t,n,r,i);var o=dn(s),a=sn(s),l=o*e,c=a*e,d=o/e,u=a/e,h=(a*n-o*t)/e,g=(a*t+o*n)/e;function p(m,f){return[l*(m*=r)-c*(f*=i)+t,n-c*m-l*f]}return p.invert=function(m,f){return[r*(d*m-u*f+h),i*(g-u*m-d*f)]},p}function gj(e){return pj(function(){return e})()}function pj(e){var t,n,r,i,s,o,a,l,c,d,u=150,h=480,g=250,p=0,m=0,f=0,y=0,_=0,v=0,x=1,b=1,w=null,S=TS,A=null,C=NS,k=.5;function T(I){return l(I[0]*Ur,I[1]*Ur)}function M(I){return(I=l.invert(I[0],I[1]))&&[I[0]*ss,I[1]*ss]}function D(){var I=MS(u,0,0,x,b,v).apply(null,t(p,m)),N=MS(u,h-I[0],g-I[1],x,b,v);return n=H4(f,y,_),a=ny(t,N),l=ny(n,a),o=PS(a,k),B()}function B(){return c=d=null,T}return T.stream=function(I){return c&&d===I?c:c=dj(uj(n)(S(o(C(d=I)))))},T.preclip=function(I){return arguments.length?(S=I,w=void 0,B()):S},T.postclip=function(I){return arguments.length?(C=I,A=r=i=s=null,B()):C},T.clipAngle=function(I){return arguments.length?(S=+I?K4(w=I*Ur):(w=null,TS),B()):w*ss},T.clipExtent=function(I){return arguments.length?(C=I==null?(A=r=i=s=null,NS):tj(A=+I[0][0],r=+I[0][1],i=+I[1][0],s=+I[1][1]),B()):A==null?null:[[A,r],[i,s]]},T.scale=function(I){return arguments.length?(u=+I,D()):u},T.translate=function(I){return arguments.length?(h=+I[0],g=+I[1],D()):[h,g]},T.center=function(I){return arguments.length?(p=I[0]%360*Ur,m=I[1]%360*Ur,D()):[p*ss,m*ss]},T.rotate=function(I){return arguments.length?(f=I[0]%360*Ur,y=I[1]%360*Ur,_=I.length>2?I[2]%360*Ur:0,D()):[f*ss,y*ss,_*ss]},T.angle=function(I){return arguments.length?(v=I%360*Ur,D()):v*ss},T.reflectX=function(I){return arguments.length?(x=I?-1:1,D()):x<0},T.reflectY=function(I){return arguments.length?(b=I?-1:1,D()):b<0},T.precision=function(I){return arguments.length?(o=PS(a,k=I*I),B()):_u(k)},T.fitExtent=function(I,N){return NI(T,I,N)},T.fitSize=function(I,N){return ij(T,I,N)},T.fitWidth=function(I,N){return sj(T,I,N)},T.fitHeight=function(I,N){return oj(T,I,N)},function(){return t=e.apply(this,arguments),T.invert=t.invert&&M,D()}}function mj(e){return function(t,n){var r=dn(t),i=dn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*sn(t),s*sn(n)]}}function fj(e){return function(t,n){var r=_u(t*t+n*n),i=e(r),s=sn(i),o=dn(i);return[Fl(t*s,r*o),Rl(r&&n*s/r)]}}var LI=mj(function(e){return(e=AI(e))&&e/sn(e)});function _j(){return gj(LI).scale(79.4188).clipAngle(179.999)}function FS(e,t){e&&t!==void 0&&isFinite(t)&&e.setOpacity&&e.setOpacity(t)}function RS(){return vo||typeof global<"u"&&!global.process}function $f(e){return Math.log2(e)+sp}function yj(e){return 2**(e-sp)}function DS(e){return e!=null&&!isNaN(e)}function II(e,t){return MI(e,t,"longitude")}function PI(e,t){return MI(e,t,"latitude")}function MI(e,t,n){if(isNaN(t))throw new TypeError(`node ${e}: ${t} is not a valid ${n}`)}LI.invert=fj(function(e){return e});var vj=e=>Math.pow(2,Math.ceil(Math.log2(e)));function xj(e,t){return t==null&&e.url===Wo.tiles.url?z4:null}function bj(e={},t){const{tileUrlSubdomains:n,tileUrlTemplate:r,attribution:i,attributionOptions:s,latitudePath:o,longitudePath:a,sizeRatio:l,tiles:c}=e;if(r!=null&&typeof r!="string")throw new TypeError("Geo mode: tileUrlTemplate must be a URL string");if(n!=null&&typeof n!="string")throw new TypeError("Geo mode: tileUrlTemplate must be a string");if(c!=null){if(!(Sn(c)||c instanceof t.Layer))throw new TypeError("Geo mode: tiles must be a object or L.Layer instance");const d=c;if(d.url!=null&&typeof d.url!="string")throw new TypeError("Geo mode: tiles.url must be a string");if(d.subdomains!=null&&typeof d.subdomains!="string")throw new TypeError("Geo mode: tiles.subdomains must be a string");if(d.tms&&typeof d.tms!="boolean")throw new TypeError("Geo mode: tiles.tms must be a boolean");if(d.wms&&typeof d.wms!="boolean")throw new TypeError("Geo mode: tiles.wms must be a boolean")}if(i!=null&&typeof i!="string")throw new TypeError("Geo mode: Map attribution must be a string");if(s!=null&&!Sn(s))throw new TypeError("Geo mode: attributionOptions must to be a BrandOptions object");if(o!=null&&typeof o!="string"&&!Array.isArray(o))throw new TypeError("Geo mode: Latitude path must be a valid property path: a string or an array of strings.");if(a!=null&&typeof a!="string"&&!Array.isArray(a))throw new TypeError("Geo mode: Longitude path must be a valid property path: a string or an array of strings.");if(l!=null&&(!isFinite(l)||l<=0))throw new TypeError("Geo mode: sizeRatio must be a positive number.")}function wj(e,t={}){if(t.tiles===void 0||t.tileUrlTemplate||t.tileUrlSubdomains){const n=Wo.tiles;return be(be(be({},t.tiles||{}),Wo.tiles),{url:t.tileUrlTemplate||n.url,subdomains:t.tileUrlSubdomains||n.subdomains})}return Sn(t.tiles)?be(be({},e.tiles),t.tiles):t.tiles}function Ej(e,t){return e.attribution!==t.attribution||e.tiles!==t.tiles}var Sj=Ns().createElement("div");function Aj(e){const t=Ns().createElement("div");t.className="ogma-geo-container",ba(t,"100%","100%");const n=e||Sj;return n.insertBefore(t,n.firstChild),t}function kj(e){const t=[[1/0,1/0],[-1/0,-1/0]];return e.getGeoCoordinates().reduce((n,{latitude:r,longitude:i})=>{const[s,o]=n;return s[0]=Math.min(s[0],r),s[1]=Math.min(s[1],i),o[0]=Math.max(o[0],r),o[1]=Math.max(o[1],i),n},t)}function Cj(e,t,n,r){const i=t._indexes;e.getNodeAttribute(Yi).setMultiple(i,n),e.getNodeAttribute(qi).setMultiple(i,r)}function Tj(e,t,n){const{longitudePath:r,latitudePath:i,wrapCoordinates:s}=n,[o,a]=e.getAttributes(!0,[Yi,qi]),l=t._indexes,c=t.getId(),d=l.length,u=t.getData(i),h=t.getData(r);for(let g=0;g<d;g++){let p=h[g],m=u[g];const f=l[g],y=c[g];m!=null&&p!=null&&(II(y,p),PI(y,m),s&&(p%=180,m=fi(+m,-J_,J_)),a.set(f,p),o.set(f,m))}}function Nj(e,{longitudePath:t,latitudePath:n,wrapCoordinates:r},i){const s=e.getData(t),o=e.getData(n);return s!=null&&o!=null&&(!(!r&&!i)||Math.abs(o)<=J_&&Math.abs(s)<=180)}function th(e,t,n,r){Lj(e,!0,t,n,r)}function Lj(e,t,n,r,i){const s=e.getAttribute(t,r),o=e.getAttribute(t,i),a=n._indexes;o.setMultiple(a,s.getMultiple(a))}function Ij(e){return e.reduce((t,{nodes:n,newValues:r})=>{if(!n)return t;const i=n.filter((s,o)=>r[o]!=null);return t?t.concat(i):i},null)}function Pj(e,t){return e.getAttributes(["text.minVisibleSize","text.size","text.scale","radius"]).forEach(({text:n,radius:r},i)=>{t[e.get(i).getId()]={"text.minVisibleSize":n.minVisibleSize,"text.size":n.size,"text.scale":n.scale,minVisibleSize:n.minVisibleSize,size:Math.max(1,Number(r))}}),t}function zS(e,t){return e.getAttributes(["text.minVisibleSize","text.size","text.scale","minVisibleSize","width"]).forEach(({text:n,minVisibleSize:r,width:i},s)=>{t[e.get(s).getId()]={"text.minVisibleSize":n.minVisibleSize,"text.size":n.size,"text.scale":n.scale,minVisibleSize:r,size:Math.max(1,Number(i))}}),t}function Mj(e,t,n){if(!t||!Object.keys(t).length)return Promise.resolve();const r=e.getId().filter(i=>t[i]).map(i=>{if(!t[i])return 0;const s=Number(t[i]["text.minVisibleSize"]),o=Number(t[i].minVisibleSize),a=Number(t[i]["text.size"]),l=Number(t[i]["text.scale"]),c=Number(t[i].size)*l*n;return c<=o||c<=s?0:a});return e.setAttribute("text.size",r)}function Fj(e,t){const n=e.getId().map(r=>{const i=t[r]||{};return Number(i["text.size"])});return e.setAttribute("text.size",n)}var Rj=e=>_j().rotate([-e.longitude,-e.latitude]).scale(D4),OS=new Uint32Array(1),es=class{constructor(e,t){this.size=1,this.isNode=!0,this.isList=!1,this._index=e,this._ogma=t}get _indexes(){return OS[0]=this._index,OS}setAttributes(e,t){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,e,t)}setAttribute(e,t,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,e,t,n)}resetAttributes(e,t){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,e,t)}getAttributes(e){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,e)[0]}getAttribute(e){return this._ogma.modules.individualAttributes.getSingleAttribute(this,e)[0]}getPosition(){return this.getAttributes(["x","y"])}getPositionOnScreen(){return this._ogma.modules.camera.graphToScreenCoordinates(this.getPosition())}isInScreen(){const e=this.getPositionOnScreen(),t=this._ogma.modules.camera;return e.x>=0&&e.x<=t.width&&e.y>=0&&e.y<=t.height}replaceOriginalAttributes(e,t){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,e,t)}getPreviousAttributes(e){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,e)[0]}getPreviousAttribute(e){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,e)}isInView(e){return this._ogma.modules.locate.isElementInView(this,e)}getAdjacentNodes(e){return this._ogma.modules.graph.getAdjacentNodes(this,e)}getAdjacentEdges(e){return this._ogma.modules.graph.getAdjacentEdges(this,e)}getAdjacentElements(e){return{nodes:this._ogma.modules.graph.getAdjacentNodes(this,e).dedupe(),edges:this._ogma.modules.graph.getAdjacentEdges(this,e).dedupe()}}getDegree(e){return this._ogma.modules.graph.getDegree(this,e)[0]}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetNodesAdjacentElements(this)}getConnectedComponent(e){return this._ogma.modules.graph.getConnectedComponentByNode(this,e)[0]}isVisible(){return!this.isExcluded()}isExcluded(){return this._ogma.modules.graph.isExcluded(this)[0]}setExcluded(e){return this._ogma.modules.graph.setExcluded(this,e)}setVisible(e){return this.setExcluded(!e)}toList(){return this._ogma.nodeList(new Uint32Array([+this._index]))}getId(){return Sm(this._ogma.modules.graph,this)}slice(){return this.toList()}toJSON(e={}){const{attributes:t,data:n}=wI(e),r=this.getAttributes(t);return{id:this.getId(),attributes:r,data:n(un(this.getData()))}}get(e){return e===0?this:void 0}setSelected(e){this._ogma.modules.selection.setActive(this,e)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(e){return this._ogma.modules.locate.locateElements(this,e)}getBoundingBox({includeTexts:e=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,e,e)}setData(e,t){return arguments.length<2&&(t=e,e=null),this._ogma.modules.data.setProperty(this,e,t),this}getData(e){return this._ogma.modules.data.getProperty(this,e||null)[0]}addClass(e,t){return this._ogma.modules.classes.addClassesToElements([e],this,t)}addClasses(e,t){return this._ogma.modules.classes.addClassesToElements(e,this,t)}removeClass(e,t){return this._ogma.modules.classes.removeClassesFromElements([e],this,t)}removeClasses(e,t){return this._ogma.modules.classes.removeClassesFromElements(e,this,t)}hasClass(e){return this._ogma.modules.classes.hasSingleElementClass(e,this)}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)[0]}getGeoCoordinates(){const e=this._ogma.modules.graph,t=e.getNodeAttribute(Yi).get(this._index),n=e.getNodeAttribute(qi).get(this._index);return{latitude:DS(t)?t:void 0,longitude:DS(n)?n:void 0}}setGeoCoordinates(e){return this.toList().setGeoCoordinates([e]).then(()=>this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)[0]}isVirtual(){return this._ogma.modules.transformations.isElementVirtual(this)}getTransformation(){return this._ogma.modules.transformations.getElementTransformation(this)}getMetaNode(){return this._ogma.modules.transformations.getMetaNode(this)}getSubNodes(){return this._ogma.modules.transformations.getSubNodes(this)}pulse(e){return this._ogma.modules.pulses.pulse(this,e)}};Am([es],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute",setPosition:"setAttributes"});var Ms=class{constructor(e,t){this.isList=!0,this.isNode=!0,this._indexes=e,this._ogma=t}get size(){return this._indexes.length}setAttributes(e,t){return this._ogma.modules.individualAttributes.setMultipleAttributes(this,e,t)}setAttribute(e,t,n){return this._ogma.modules.individualAttributes.setSingleAttribute(this,e,t,n)}getAttributes(e){return this._ogma.modules.individualAttributes.getMultipleAttributes(this,e)}getAttribute(e){return this._ogma.modules.individualAttributes.getSingleAttribute(this,e)}resetAttributes(e,t){return this._ogma.modules.individualAttributes.resetMultipleAttributes(this,e,t)}getPosition(){return this.getAttributes(["x","y"])}getPositionOnScreen(){return this.getPosition().map(e=>this._ogma.modules.camera.graphToScreenCoordinates(e))}replaceOriginalAttributes(e,t){return this._ogma.modules.individualAttributes.replaceOriginalAttributes(this,e,t)}getPreviousAttributes(e){return this._ogma.modules.individualAttributes.getMultiplePreviousAttributes(this,e)}getPreviousAttribute(e){return this._ogma.modules.individualAttributes.getSinglePreviousAttribute(this,e)}getAdjacentNodes(e){return this._ogma.modules.graph.getAdjacentNodes(this,e)}getAdjacentEdges(e){return this._ogma.modules.graph.getAdjacentEdges(this,e)}getAdjacentElements(e){return{nodes:this._ogma.modules.graph.getAdjacentNodes(this,e).dedupe(),edges:this._ogma.modules.graph.getAdjacentEdges(this,e).dedupe()}}getDegree(e){return this._ogma.modules.graph.getDegree(this,e)}getConnectedComponents(e){return this._ogma.modules.graph.getConnectedComponents(this,e)}fastGetAdjacentElements(){return this._ogma.modules.graph.fastGetNodesAdjacentElements(this)}isVisible(){return this.isExcluded().map(e=>!e)}isExcluded(){return this._ogma.modules.graph.isExcluded(this)}isVirtual(){return this.map(e=>this._ogma.modules.transformations.isElementVirtual(e))}setExcluded(e){return this._ogma.modules.graph.setExcluded(this,e)}setVisible(e){return this.setExcluded(!e)}toList(){return this}toArray(){return _I(this._ogma.modules.graph,this)}clone(){return this._ogma.modules.graph.nodeList(this._indexes.slice())}getId(){return Sm(this._ogma.modules.graph,this)}get(e){return xI(this._ogma.modules.graph,this,e)}forEach(e){lI(this._ogma.modules.graph,this,e)}map(e){return cI(this._ogma.modules.graph,this,e)}[Symbol.iterator](){let e=-1;return{next:()=>({value:this.get(++e),done:e>=this.size})}}filter(e){return dI(this._ogma.modules.graph,this,e)}reduce(e,t){return hI(this._ogma.modules.graph,this,e,t)}concat(e){return fI(this._ogma.modules.graph,this,e)}dedupe(){return gI(this._ogma.modules.graph,this)}subtract(e){return pI(this,e,this._ogma.modules.graph)}slice(e,t){return this._ogma.modules.graph.nodeList(this._indexes.slice(e,t))}indexOf(e){return e instanceof es?this._indexes.indexOf(e._index):-1}includes(e){return this.indexOf(e)!==-1}inverse(){return mI(this._ogma.modules.graph,this)}sort(e){return bI(this._ogma.modules.graph,this,e)}toJSON(e={}){return this.map(t=>t.toJSON(e))}setSelected(e){this._ogma.modules.selection.setActive(this,e)}isSelected(){return this._ogma.modules.selection.areActive(this)}locate(e){return this._ogma.modules.locate.locateElements(this,e)}getBoundingBox({includeTexts:e=!1}={}){return this._ogma.modules.locate.getBoundingBox(this,e,e)}setData(e,t){if(arguments.length<2&&(t=e,e=null),typeof t!="function"&&!Vn(t))throw new Error(`invalid argument ${t}; expected array or function`);return this._ogma.modules.data.setProperty(this,e,t,{dispatch:!0}),this}fillData(e,t){return arguments.length<2&&(t=e,e=null),this._ogma.modules.data.setProperty(this,e,t,{dispatch:!1}),this}getData(e){return this._ogma.modules.data.getProperty(this,e||null)}addClass(e,t){return this._ogma.modules.classes.addClassesToElements([e],this,t)}addClasses(e,t){return this._ogma.modules.classes.addClassesToElements(e,this,t)}removeClass(e,t){return this._ogma.modules.classes.removeClassesFromElements([e],this,t)}removeClasses(e,t){return this._ogma.modules.classes.removeClassesFromElements(e,this,t)}hasClass(e){return this.map(t=>this._ogma.modules.classes.hasSingleElementClass(e,t))}getClassList(){return this._ogma.modules.classes.getElementsClassList(this)}getGeoCoordinates(){const e=this._ogma.modules.graph,t=new Array(this._indexes.length),n=e.getNodeAttribute(Yi).getMultiple(this._indexes),r=e.getNodeAttribute(qi).getMultiple(this._indexes);for(let i=0,s=this._indexes.length;i<s;i++)t[i]={latitude:n[i],longitude:r[i]};return t}setGeoCoordinates(e){const t=this._ogma.modules.geo,n=this.getId(),r=this._indexes,i=new Array(r.length),s=new Array(r.length);if(e===null&&(e=new Array(r.length).fill(null)),e.length!==r.length)throw new RangeError("You must provide coordinates for each node in the NodeList");for(let l=0,c=r.length;l<c;l++){let{latitude:d,longitude:u}=e[l]||{latitude:void 0,longitude:void 0};const h=n[l];d==null&&u==null?d=u=void 0:(PI(h,d),II(h,u)),i[l]=d,s[l]=u}this.setData(t.latitudePath,i),this.setData(t.longitudePath,s);const{dom:o,graph:a}=this._ogma.modules;return Cj(a,this,i,s),this._ogma.modules.geo.isEnabled()?o.afterNextFrame().then(()=>o.afterNextFrame()).then(()=>this):o.afterNextFrame().then(()=>this)}getAnimationInformation(){return this._ogma.modules.graphics.getAnimationInformation(this)}getMetaNode(){return this._ogma.modules.transformations.getMetaNodes(this)}getSubNodes(){return this.map(this._ogma.modules.transformations.getSubNodes)}pulse(e){return this._ogma.modules.pulses.pulse(this,e)}};function up(e,t,n={},r={}){return Vd(e,t,[n],r).get(0)}function Dj(e,{nodes:t=[],edges:n=[]},r={}){if(e.fireEvent("preAddGraph",{name:"preAddGraph"}),!r.batchSize)return Promise.all([Vd(e,!0,t,r),Vd(e,!1,n,r)]).then(([s,o])=>(e.fireEvent("postAddGraph",{name:"postAddGraph"}),e.fireEvent("addGraph",{nodes:s,edges:o}),{nodes:s,edges:o}));let i;return Ol(e,!0,t,r).then(s=>(i=s,Ol(e,!1,n,r))).then(s=>({nodes:i,edges:s})).then(s=>(e.fireEvent("postAddGraph",{name:"postAddGraph"}),e.fireEvent("addGraph",{name:"addGraph"}),s))}function Ol(e,t,n,r={}){if(r.batchSize){const i=[];for(let a=0;a<n.length;a+=r.batchSize)i.push(n.slice(a,a+r.batchSize));const s=(a,l)=>{let c;return a.then(d=>(c=d,e.getDom().afterNextFrame())).then(()=>Vd(e,t,l,r)).then(d=>c.concat(d))},o=t?e.nodeList():e.edgeList();return i.reduce(s,Promise.resolve(o))}return Promise.resolve(Vd(e,t,n,r))}function Vd(e,t,n,r){const{virtual:i=!1}=r;e.fireEvent("preAddElements",{name:"preAddElements",objects:n,virtual:i,isNode:t});const s=!!r.ignoreInvalid,o=e.storage.fetch(t),a=[],l=[],c=[],d=[],u=new Set;for(const b of n){if(typeof b!="object"||b===null||Array.isArray(b)){if(s)continue;throw new Error(`${b} is not a valid ${t?"node":"edge"}`)}const w=R4(b.id);if(!o.getIndex(w,!1)&&!u.has(w)){if(!t){const S=b,A=e.getExtremityIndex(w,S.source,0,s),C=e.getExtremityIndex(w,S.target,1,s);if(s&&(!A||!C))continue;c.push(A),d.push(C)}l.push(w),a.push(b),u.add(w)}}const h=o.addElements(l);t?e.topology.allocateNodes(h):e.topology.allocateEdges(h,c,d);const g=o.getFlexArray("object"),p=o.getFlexArray("excluded"),m=o.getFlexArray("removed"),f=o.getFlexArray("virtual"),y=t?e.node:e.edge,_=t?e.nodeList:e.edgeList,v=e.getCacheLists(t),x=_(h);for(let b=0;b<h.length;b++){const w=h[b];g.set(w,y(w))}return p.setMultiple(h,0),m.setMultiple(h,0),f.setMultiple(h,i?1:0),v.visible.invalidList(),v.all.invalidList(),v._all.invalidList(),i||v.raw.invalidList(),x.size!==0&&(t?e.fireEvent("addNodes",{virtual:i,objects:a,nodes:x}):e.fireEvent("addEdges",{virtual:i,objects:a,edges:x})),x}function zj(e,t,n){return yu(e,!0,[t],n)}function Oj(e,t,n){return yu(e,!1,[t],n)}function Bj(e,t,n){return yu(e,!0,t,n)}function jj(e,t,n){return yu(e,!1,t,n)}function yu(e,t,n,r={}){Array.isArray(n)||n instanceof(t?Ms:Aa)||(n=[n]);const{virtual:i=!1}=r,s={elementsToRemove:e.getElements(t,n)};e.fireEvent("requestElementsToDelete",s);let{elementsToRemove:o}=s;if(!o.size)return Promise.resolve();o=o.dedupe();const a=e.storage.fetch(t),l=a.getFlexArray("removed");o=o.filter(h=>l.get(h._index)===0),t&&yu(e,!1,o.getAdjacentEdges({filter:"all"}),r);const c=o._indexes,d=e.getCacheLists(t),u={virtual:i,[t?"nodes":"edges"]:o};if(e.fireEvent(t?"beforeRemoveNodes":"beforeRemoveEdges",u),d.visible.invalidList(),d.all.invalidList(),d.raw.invalidList(),e.setExcluded(o,!0),l.setMultiple(c,1),!t)for(let h=0;h<c.length;++h)e.topology.removeFromAdjacencyList(c[h]);return a.removeElements(c),e.fireEvent(t?"removeNodes":"removeEdges",u),e.fireEvent(t?"afterRemoveNodes":"afterRemoveEdges",u),Promise.resolve()}Am([Ms],{setStyle:"setAttributes",resetStyle:"resetAttributes",getStyle:"getAttribute",setPosition:"setAttributes"});var Uj=class{addNodes(e,t){return Ol(this.modules.graph,!0,e,t)}addEdges(e,t){return Ol(this.modules.graph,!1,e,t)}addNode(e,t){return up(this.modules.graph,!0,e,t)}addEdge(e,t){return up(this.modules.graph,!1,e,t)}removeNodes(e,t){return Bj(this.modules.graph,e,t)}removeEdges(e,t){return jj(this.modules.graph,e,t)}removeNode(e,t){return zj(this.modules.graph,e,t)}removeEdge(e,t){return Oj(this.modules.graph,e,t)}getNodes(e){return this.modules.graph.getNodes(e)}getEdges(e){return this.modules.graph.getEdges(e)}getNode(e){return this.modules.graph.getNode(e)}getEdge(e){return this.modules.graph.getEdge(e)}clearGraph(){this.modules.graph.clear()}setGraph(e,t){return this.modules.graph.clear(),this.addGraph(e,t)}addGraph(e,t){const n=this.modules.graph.getNodes().size===0,r=Dj(this.modules.graph,e,t);return n?this.modules.locate.locateGraph({padding:30,ignoreZoomLimits:!0,duration:0}).then(()=>r):r}createNodeList(){return this.getNodes([])}createEdgeList(){return this.getEdges([])}getConnectedComponents(e={}){return this.modules.graph.getConnectedComponents(this.getNodes(e.filter),e)}getConnectedComponentByNode(e,t){const n=this.modules.graph.getNode(e);if(n===void 0)throw new Error(`getComponentByNode: cannot find node ${e}`);return this.modules.graph.getConnectedComponentByNode(n,t)[0]}},js=()=>(e,t)=>e[t],Us=()=>(e,t,n)=>{e[t]=n},BS={1:Gf(1),2:Gf(2),4:Gf(4),8:js(),16:js(),32:js(),int8:js(),int16:js(),int32:js(),float:js(),any:js()},jS={1:Vf(1),2:Vf(2),4:Vf(4),8:Us(),16:Us(),32:Us(),int8:Us(),int16:Us(),int32:Us(),float:Us(),any:Us()};function Gf(e){const t=8/e,n=(1<<e)-1;return(r,i)=>r[i/t|0]>>i%t*e&n}function Vf(e){const t=8/e,n=Math.pow(2,e)-1;return(r,i,s)=>{const o=i%t*e,a=i/t|0,l=s<<o,c=255-(n-s<<o);r[a]=r[a]&c|l}}function $j(e,t){return e===void 0&&t!=="any"&&t!=="resource"?0:e}var Gj={get(e){return this._getArrayElt(this._buffer,e)},set(e,t){this._setArrayElt(this._buffer,e,t)}},Vj={get(e){return this._byIndex[this._getArrayElt(this._buffer,e)]},set(e,t){let n=this._byName[t];n===void 0&&(n=this._nextIndex++,this._byIndex.push(t),this._getElementBitSize()>this._elementSize&&this.increaseElementSize(),this._byName[t]=n),this._setArrayElt(this._buffer,e,n)}},Hj=0,hp=class{constructor(e){this._id=Hj++,this._initialized=!1;const t=e.name,n=e.storage,r=e.size||0,i=$j(e.default,n),s=Math.max(8,US(r+1)),o=n==="resource"?1:n;this._name=t,this._storage=n,this._getArrayElt=BS[o],this._setArrayElt=jS[o],this._elementSize=o,this._nbElements=s,this._fallback=null,this._byName=void 0,this._byIndex=void 0,this._nextIndex=void 0,this._defaultValue=i,this._BASE_VALUE=n==="any"?void 0:0,this._methods=Gj,this._initialized=!1,this._buffer=null,n==="resource"&&(this._methods=Vj,this._byName=Object.create(null),this._byIndex=[],this._nextIndex=1,this._byName[i]=0,this._byIndex.push(i))}getValues(){return Object.keys(this._byName||{})}getName(){return this._name||""}setDefaultValue(e){this._defaultValue=e,this._storage==="resource"&&(this._byName[e]=0,this._byIndex[0]=e)}get(e){return this._get(e)}set(e,t){this._set(e,t)}_get(e){return this._defaultValue}_set(e,t){t!==this._defaultValue&&(this._initialize(),this._set(e,t))}setFallback(e){this._fallback=e,this.get=this._getWithFallback}_getWithFallback(e){const t=this._get(e);return t===void 0&&this._fallback?this._fallback.get(e):t}_initialize(){this._initialized=!0,this._buffer=Hf(this._nbElements,this._elementSize),this._get=this._methods.get,this._set=this._methods.set,this._storage!=="resource"&&this._defaultValue!==this._BASE_VALUE&&this._reset(0)}grow(e){const t=US(e+1);if(!(t<=this._nbElements)){if(this._initialized)if(this._elementSize==="any")for(let n=this._nbElements;n<t;++n)this._buffer.push(this._defaultValue);else{const n=Hf(t,this._elementSize);n.set(this._buffer),this._buffer=n,this._storage!=="resource"&&this._defaultValue!==this._BASE_VALUE&&this._reset(this._nbElements)}this._nbElements=t}}increaseElementSize(){const e=this._elementSize;if(typeof e!="number"||e===32)throw new Error("FlexArray: cannot increase element size");const t=2*e,n=BS[t],r=jS[t];if(this._initialized){const i=this._nbElements,s=this._getArrayElt,o=this._buffer,a=Hf(i,t);if(e>=8)a.set(o);else for(let l=0;l<i;++l)r(a,l,s(o,l));this._buffer=a}this._elementSize=t,this._getArrayElt=n,this._setArrayElt=r}buffer(){if(!this._buffer)throw new Error("FlexArray: buffer not instantiated");return this._buffer}elementBitSize(){return this._elementSize}capacity(){return this._nbElements}byteSize(){return this._nbElements*this._elementSize/8}isInitialized(){return this._initialized||this._fallback&&this._fallback.isInitialized()}getMultiple(e,t){const n=e.length;t===void 0&&(t=new Array(n));for(let r=0,i=n;r<i;++r)t[r]=this.get(e[r]);return t}fill(e,t){for(let n=0,r=e.length;n<r;++n)this.set(e[n],t)}setMultiple(e,t,n){if(n||!Array.isArray(t)&&!ArrayBuffer.isView(t))for(let r=0,i=e.length;r<i;++r)this.set(e[r],t);else for(let r=0,i=e.length;r<i;++r)this.set(e[r],t[r])}reset(){return this._initialized&&this._reset(0),this}_reset(e){const t=this._storage==="resource"?0:this._defaultValue;if(this._buffer)if(typeof this._elementSize!="number"||this._elementSize>=8)this._buffer.fill(t,e);else{const n=8/this._elementSize;let r=0;for(let i=0;i<n;++i)r<<=this._elementSize,r+=t;if(e===void 0)this._buffer.fill(r);else{const i=e+(8-e%8);for(let s=e;s<i;++s)this._setArrayElt(this._buffer,s,t);this._buffer.fill(r,i/8)}}}_getElementBitSize(){if(this._nextIndex)return Math.pow(2,Math.ceil(Math.log2(Math.log2(this._nextIndex))))}};function US(e){let t=2;for(;t<e;)t*=2;return t}function Hf(e,t){return t==="any"?new Array(e):t==="float"?new Float32Array(e):t==="int8"?new Int8Array(e):t==="int16"?new Int16Array(e):t==="int32"?new Int32Array(e):t===32?new Uint32Array(e):t===16?new Uint16Array(e):new Uint8Array(Math.ceil(e/8*t))}var $S=4,FI=class{constructor(){this._buffer=new Uint32Array($S),this._capacity=$S,this._size=0,this._busy=!1}isBusy(){return this._busy}markBusy(){return this._busy=!0,this}sliceAndReset(){this._busy=!1;const e=this.slice(0,this._size);return this.reset(),e}reset(){return this._size=0,this}reserve(e){return e>this._capacity&&this._setCapacity(eo(e)),this}_setCapacity(e){const t=new Uint32Array(e);t.set(this._buffer),this._buffer=t,this._capacity=e}push(e){return this._size===this._capacity&&this._setCapacity(2*this._capacity),this._buffer[this._size++]=e,this}pushUnchecked(e){return this._buffer[this._size++]=e,this}slice(e=0,t=this._size){return this._buffer.slice(e,t)}getBuffer(){return this._buffer}getLength(){return this._size}getCapacity(){return this._capacity}setLength(e){return this._size=e,this}isEmpty(){return this._size===0}},GS=class{constructor(e){this._nextIndex=1,this._freeIndexes=[],this._indexesToBeFreed=[],this._idToIndex=Object.create(null),this._indexToId=[void 0],this._flexArrays=[],this._defaultValues=[],this._flexArraysByName={},this._indexLists=[],this._name=e?"node":"edge",this._nextIndex=1,this._freeIndexes=[],this._indexesToBeFreed=[],this._idToIndex=Object.create(null),this._indexToId=[void 0],this._idFlexArray=new hp({storage:"int32"}),this._idFlexArray.get=t=>this._indexToId[t],this._idFlexArray.getMultiple=t=>{const n=new Array(t.length);for(let r=0;r<t.length;++r)n[r]=this._indexToId[t[r]];return n},this._flexArraysByName.id=this._idFlexArray}addElements(e){const t=[];for(let n=0,r=e.length;n<r;++n){const i=e[n];let s=this._idToIndex[i];s===void 0&&(s=this._getNextIndex(),this._idToIndex[i]=s,this._indexToId[s]=i),t.push(s)}for(const n of this._flexArrays)n.grow(this._nextIndex);for(const n of this._indexLists)n.reserve(this._nextIndex);return new Uint32Array(t)}removeElements(e){for(let t=0,n=e.length;t<n;++t){const r=e[t],i=this._indexToId[r];i!==void 0&&(delete this._idToIndex[i],this._removeIndex(r))}}clear(){this._idToIndex=Object.create(null),this._indexToId=[void 0],this._nextIndex=1,this._freeIndexes=[];for(const e of this._flexArrays)e.reset();for(const e of this._indexLists)e.reset()}has(e){return this._indexToId[e]!==void 0}getIndex(e,t=!1){const n=this._idToIndex[e];if(n===void 0&&t)throw new Error(`${this._name} id "${e}" not found`);return n}createFlexArray(e,t){const{name:n}=e;if(n&&t&&this._flexArraysByName[n])throw new Error(`${this._name} flexArray "${n}" already exists`);let r=e.default;r===void 0&&e.storage!=="any"&&e.storage!=="resource"&&(r=0);const i=this._nextIndex,s={storage:e.storage,size:i,name:n,default:r};let o;return o=(r===void 0&&e.storage!=="any"&&e.storage,new hp(s)),this._flexArrays.push(o),this._defaultValues.push(e.default),n&&t&&(this._flexArraysByName[n]=o),o}getFlexArray(e){return this._flexArraysByName[e]}getAllFlexArrays(){return this._flexArraysByName}createIndexList(){const e=new FI;return e.reserve(this._nextIndex),this._indexLists.push(e),e}getId(e){return this._indexToId[e]}getMaxIndex(){return this._nextIndex-1}_removeIndex(e){this._indexesToBeFreed.push(e)}_getNextIndex(){let e=this._freeIndexes.pop();return e===void 0&&(e=this._nextIndex++),e}freeIndexes(){for(const e of this._indexesToBeFreed)this._indexToId[e]=void 0,this._freeIndexes.push(e);for(let e=0;e<this._flexArrays.length;++e){const t=this._flexArrays[e],n=this._defaultValues[e];for(const r of this._indexesToBeFreed)t.set(r,n)}this._indexesToBeFreed=[]}},VS=(e,t)=>(e+t)*(e+t+1)/2+t;function pc(e,t){const n=e<t?e:t;return 67108864*n+(e+t-n)}var Wj=8,sy=class{constructor(){this._BIG_LIST=255,this._MAX_LIST_SIZE=8,this._capacity=Wj,this._buffer=new Uint32Array(this._capacity*this._MAX_LIST_SIZE),this._sizes=new Uint8Array(this._capacity),this._bigLists=[],this._nextIndex=0,this._constList=new Array(this._MAX_LIST_SIZE)}addEntry(t){return t===void 0&&(t=this._nextIndex++),t>=this._capacity&&this._reserve(t+1),this._sizes[t]=0,t}get(t){const n=this._sizes[t],r=this._MAX_LIST_SIZE*t;if(n<=this._MAX_LIST_SIZE){this._constList.length=n;for(let i=0,s=n;i<s;++i)this._constList[i]=this._buffer[r+i];return this._constList}if(n===this._BIG_LIST){const i=this._buffer[r];return this._bigLists[i]}throw new Error(`Table: ${t} out of bounds (${n})`)}size(t){const n=this._sizes[t];return n<=this._MAX_LIST_SIZE?n:this._bigLists[this._buffer[t*this._MAX_LIST_SIZE]].length}sizes(t){const n=this._sizes,r=this._bigLists,i=this._buffer,s=this._MAX_LIST_SIZE,o=t.length,a=new Array(o);for(let l=0;l<o;l++){const c=t[l],d=n[c];a[l]=d<=s?d:r[i[c*s]].length}return a}addTo(t,n){const r=this._sizes[t],i=t*this._MAX_LIST_SIZE;if(r<this._MAX_LIST_SIZE)this._buffer[i+r]=n,this._sizes[t]=r+1;else if(r===this._BIG_LIST){const s=this._buffer[i];this._bigLists[s].push(n)}else{const s=new Array(this._MAX_LIST_SIZE);for(let o=0;o<this._MAX_LIST_SIZE;++o)s[o]=this._buffer[i+o];s.push(n),this._bigLists.push(s),this._sizes[t]=this._BIG_LIST,this._buffer[i]=this._bigLists.length-1}return this}removeFrom(t,n){return this.removeFromAndGetSize(t,n),this}removeFromAndGetSize(t,n){const r=this._MAX_LIST_SIZE*t;let i=this._sizes[t];if(i<=this._MAX_LIST_SIZE){for(let s=r,o=r+i;s<o;++s)if(this._buffer[s]===n)return i-=1,this._buffer[s]=this._buffer[o-1],this._sizes[t]=i,i}else if(i===this._BIG_LIST){const s=this._buffer[r],o=this._bigLists[s],a=o.indexOf(n);if(a!==-1)return o.splice(a,1),o.length}throw new Error('topology: Table: "removeFrom" failed, should not happen')}reserve(t){return this._capacity<t&&this._reserve(t),this}_reserve(t){this._capacity=Math.pow(2,Math.ceil(Math.log2(t))),this._buffer=HS(this._buffer,this._capacity*this._MAX_LIST_SIZE),this._sizes=HS(this._sizes,this._capacity)}};function HS(e,t){const n=new e.constructor(t);return n.set(e),n}var Xj=1,Yj=2,qj=3,Zj=4,Jj=5,Qj=6,oy="_visible",ay="_data",ld="_hovered",ly="_hoverExtremityHighlighted",tn="_selected",cy="_selectionExtremityHighlighted",cg="_dragged",RI="_rewirable",Xo="_export",DI="_faded",zI="_transparent",Kj="_visual_groups",vu=-1,nh="in",rh="out",Wf="both",WS=[tn,cg,cy,ld,ly,RI,Xo,DI,zI,Kj],OI=2,BI=3,e6=3,t6=4,jI=-1,n6=["hover","zoom","panning","rotation","gesture","drag","selection","tooltip","user","interactions","resizing","rewiring","connectNodes","lasso"],za=void 0,r6=class{constructor(e){this._neighborTable=new sy,this._parallelTable=new sy,this._parallelEdgesIndex=[],this._hasParallelEdges=new Set,this._fakeDeduper={get:()=>0,set:wt,reset(){return this}},this._fakeInvertedDeduper={get:()=>1,set:wt,reset(){return this}},this._graph=e,this.nodeDeduper=e.createNodeAttribute({storage:1},!1),this.edgeDeduper=e.createEdgeAttribute({storage:1},!1),this._sourceList=e.getEdgeAttribute("source"),this._targetList=e.getEdgeAttribute("target")}getAdjacentDirections(e){return this._neighborTable.get(e)}getEdgeIndexesInDirection(e){return this._parallelTable.get(e)}allocateNodes(e){this._neighborTable.reserve(e.length);for(let t=0;t<e.length;++t)this._neighborTable.addEntry(e[t])}allocateEdges(e,t,n){this._parallelTable.reserve(Math.floor(e.length/2));for(let r=0;r<e.length;r++){const i=e[r],s=t[r],o=n[r];this._sourceList.set(i,s),this._targetList.set(i,o),this.addToAdjacencyList(i)}}getExtremity(e,t){const n=e?this._sourceList:this._targetList;if(t.isList){const r=this._graph.acquireIndexList(!0);for(let i=0;i<t._indexes.length;i++)r.push(n.get(t._indexes[i]));return this._graph.nodeList(r.sliceAndReset())}return this._graph.getObjectList(!0).get(n.get(t._index))}setExtremities(e,t,n){for(let r=0;r<e.length;++r)this.removeFromAdjacencyList(e[r]);t!==null&&this._sourceList.setMultiple(e,t),n!==null&&this._targetList.setMultiple(e,n);for(let r=0;r<e.length;++r)this.addToAdjacencyList(e[r])}addToAdjacencyList(e){const t=this._sourceList.get(e),n=this._targetList.get(e),r=pc(t,n);let i=this._parallelEdgesIndex[r];if(i===za)i=this._parallelTable.addEntry(),this._parallelEdgesIndex[r]=i,this._neighborTable.addTo(t,i),t!==n&&this._neighborTable.addTo(n,i);else{this._hasParallelEdges.add(e);const s=this._parallelTable.get(+i);if(s)for(const o of s)this._hasParallelEdges.add(o)}this._parallelTable.addTo(i,e)}hasParallelEdges(e){return this._hasParallelEdges.has(e)}removeFromAdjacencyList(e){const t=this._sourceList.get(e),n=this._targetList.get(e),r=pc(t,n),i=this._parallelEdgesIndex[r];i!==za&&this._parallelTable.removeFromAndGetSize(i,e)===0&&(this._neighborTable.removeFrom(t,i),t!==n&&this._neighborTable.removeFrom(n,i),this._parallelEdgesIndex[r]=za,this._hasParallelEdges.delete(e))}getParallelEdges(e,t={}){const n=t.filter||"visible",r=this._graph.acquireIndexList(!1),i=this._graph.getFilter(!1,n);for(let s=0;s<e._indexes.length;s++){const o=e._indexes[s],a=pc(this._sourceList.get(o),this._targetList.get(o)),l=this._parallelEdgesIndex[a];if(l!==za){const c=this._parallelTable.get(+l);if(c)for(const d of c)i(d)&&r.push(d)}}return this._graph.edgeList(r.sliceAndReset())}fastGetNodesAdjacentElements(e){const t=this._graph.acquireIndexList(!0),n=this._graph.acquireIndexList(!1),r=this._sourceList,i=this._targetList;for(let s=0;s<e.length;s++){const o=e[s],a=this._neighborTable.get(o);for(const l of a){const c=this._parallelTable.get(l),d=c[0],u=r.get(d),h=i.get(d);if(u!==0&&h!==0){t.push(u+h-o);for(const g of c)n.push(g)}}}return{nodes:this._graph.nodeList(t.sliceAndReset()),edges:this._graph.edgeList(n.sliceAndReset())}}fastGetEdgesAdjacentElements(e){const t=this._graph.acquireIndexList(!0),n=this._graph.acquireIndexList(!1),r=this._sourceList,i=this._targetList;for(let s=0;s<e.length;s++){const o=e[s],a=r.get(o),l=i.get(o),c=pc(a,l),d=this._parallelEdgesIndex[c];if(d!==za){const u=this._parallelTable.get(+d);if(u)for(const h of u)n.push(h)}t.push(a),t.push(l)}return{nodes:this._graph.nodeList(t.sliceAndReset()),edges:this._graph.edgeList(n.sliceAndReset())}}getDeduper(e){return(e?this.nodeDeduper:this.edgeDeduper).reset()}collectAdjacentEdges(e,t,n,r=!1,i=!1){const s=t===nh,o=!(t===rh||s||i),a=this._graph.acquireIndexList(!1),l=this._graph.getFilter(!1,n),c=r?this.getDeduper(!1):this._fakeDeduper;let d=this._fakeInvertedDeduper;const u=this._sourceList,h=this._targetList;if(i){d=this.getDeduper(!0);for(let g=0;g<e.length;g++)d.set(e[g],1)}for(let g=0;g<e.length;g++){const p=e[g],m=this._neighborTable.get(p);for(const f of m){const y=this._parallelTable.get(f);if(o)for(const _ of y)l(_)&&c.get(_)===0&&(a.push(_),c.set(_,1));else for(const _ of y){const v=u.get(_),x=h.get(_),b=v+x-p;s!==(x===p)&&v!==x||!l(_)||c.get(_)!==0||d.get(b)!==1||(a.push(_),c.set(_,1))}}}return a.sliceAndReset()}collectAdjacentNodes(e,t,n,r=!1,i,s){const o=t!==nh,a=t!==rh,l=this._graph.acquireIndexList(!0),c=this._graph.getFilter(!1,n),d=r?this.getDeduper(!0):this._fakeDeduper,u=this._sourceList,h=this._targetList;if(i)for(let g=0;g<i.length;g++){const p=i[g];l.push(p),d.set(p,1)}if(s)for(let g=0;g<s.length;g++){const p=s[g];d.set(p,1)}for(let g=0;g<e.length;g++){const p=e[g],m=this._neighborTable.get(p);for(const f of m){const y=this._parallelTable.get(f);for(const _ of y)if(c(_)){const v=u.get(_),x=h.get(_),b=v+x-p;if((a&&p===x||o&&p===v)&&d.get(b)===0){l.push(b),d.set(b,1);break}}}}return l.sliceAndReset()}getAdjacentElements(e,t,n={}){const r=n.direction||Wf,i=n.filter||"visible",s=n.policy||"union",o=!!n.bothExtremities;if(e){const a=s==="include-sources"?t:null,l=s==="exclude-sources"?t:null;return this.collectAdjacentNodes(t,r,i,!0,a,l)}return this.collectAdjacentEdges(t,r,i,!0,o)}getEdgesBetweenTwoNodes(e,t){const n=pc(e,t),r=this._parallelEdgesIndex[n];if(r===za)return new Uint32Array;const i=this._parallelTable.get(+r);return new Uint32Array(i)}getConnectedComponents(e,{filter:t="visible",returnIds:n=!1,internalIndexes:r=!1}={}){const i=this._graph,s=[],o={},a=i.acquireIndexList(!0);let l;typeof t=="string"?l=i.getFilter(!0,t):(l=t,t="visible");for(let u=0;u<e.length;u++){const h=e[u];l(h)&&a.push(h)}const c=a.sliceAndReset(),d={filter:t};for(let u=0;u<c.length;u++){const h=c[u];if(!o[h]){const g=[h],p=[];for(;g.length!==0;){const m=g.pop();!o[m]&&l(m)&&(g.push.apply(g,this.getAdjacentElements(!0,new Uint32Array([m]),d)),o[m]=!0,p.push(m))}p.length>0&&s.push(p)}}if(n){const u=i.getNodeAttribute("id");for(let h=0;h<s.length;h++)s[h]=u.getMultiple(s[h])}else if(!r)for(let u=0;u<s.length;u++)s[u]=i.nodeList(new Uint32Array(s[u]));return s}getAdjacencyList({directed:e,ids:t,weight:n,nodes:r}){const i=e?rh:Wf,s=new Array(r.length),o=this._graph;for(let p=0;p<r.length;++p)s[p]=this.collectAdjacentEdges(new Uint32Array([r[p]]),i,"all");const a=o.getEdgeAttribute("source"),l=o.getEdgeAttribute("target"),c=o.getEdgeAttribute("width"),d=o.getNodeAttribute("id"),u=[],h=typeof n=="number",g=typeof n!="function"&&!h&&!!n;for(let p=0;p<s.length;p++){const m=s[p],f=r[p],y=m.length,_=t?new Array(y):new Uint32Array(y),v=new Array(y);for(let b=0;b<y;b++){const w=m[b],S=a.get(w),A=l.get(w);let C=e||f===S?A:S;if(t&&(C=d.get(C)),_[b]=C,n){if(h&&(v[b]=n),typeof n=="function"){const k=o.getNode(S),T=o.getNode(A);v[b]=n(k,T)}g&&(v[b]=c.get(w)||1)}}const x=be({nodes:_,id:t?d.get(f):f},n&&{weights:v});u.push(x)}return u}degrees(e,t){if(t!==nh&&t!==rh)return this._neighborTable.sizes(e);const n=new Array(e.length),r=t===nh;for(let i=0,s=e.length;i<s;i++)n[i]=this._degree(e[i],r);return n}_degree(e,t){const n=this._neighborTable.get(e),r=this._sourceList,i=this._targetList;let s=0;for(let o=0;o<n.length;++o){const a=this._parallelTable.get(n[o]);for(let l=0;l<a.length;++l){const c=a[l],d=r.get(c),u=i.get(c);if(t&&u===e||!t&&d===e){s+=1;break}}}return s}getDegree(e,t){const{direction:n,filter:r}=this._getDegreeOptions(t),i=new Array(e.length),s=new Uint32Array(1);for(let o=0;o<e.length;++o)s[0]=e[o],i[o]=this.collectAdjacentNodes(s,n,r).length;return i}_getDegreeOptions(e){const t={direction:Wf,filter:"visible"};return typeof e=="string"?t.direction=e:e&&(typeof e.direction=="string"&&(t.direction=e.direction),typeof e.filter=="string"&&(t.filter=e.filter)),t}},i6=class extends ct{constructor(){super(...arguments),this.storage={nodes:new GS(!0),edges:new GS(!1),fetch(e){return e?this.nodes:this.edges}},this._promisesToResolve=[],this._nodeIndexLists=[],this._edgeIndexLists=[],this._onNewFrame=()=>{this.storage.nodes.freeIndexes(),this.storage.edges.freeIndexes()}}onMounted(){this._modules.events.register(["preAddElements","addNodes","addEdges","preAddGraph","postAddGraph","addGraph","excludedStateChange","clearGraph","afterRemoveNodes","beforeRemoveNodes","requestElementsToDelete","removeNodes","beforeRemoveEdges","afterRemoveEdges","removeEdges"]),[{name:"excluded",storage:1,default:1},{name:"removed",storage:1,default:1},{name:"virtual",storage:1,default:0}].forEach(e=>{this.createNodeAttribute(e,!0),this.createEdgeAttribute(e,!0)}),this.node=this._ogma.node,this.edge=this._ogma.edge,this.nodeList=this._ogma.nodeList,this.edgeList=this._ogma.edgeList,this._nodes=this.createAttribute(!0,{name:"object",storage:"any"},!0),this._edges=this.createAttribute(!1,{name:"object",storage:"any"},!0),this.createAttribute(!1,{name:"source",storage:32},!0),this.createAttribute(!1,{name:"target",storage:32},!0),this._nodeFilters=mS(this.storage.nodes),this._edgeFilters=mS(this.storage.edges),this._initialize(),this._modules.events.on("frame",this._onNewFrame)}onReady(e){if(e.graph){const{nodes:t,edges:n}=e.graph;t&&this.addNodes(t),n&&this.addEdges(n)}}createIndexList(e){return this.storage.fetch(e).createIndexList()}getDom(){return this._modules.dom}acquireIndexList(e){const t=e?this._nodeIndexLists:this._edgeIndexLists;let n=t.find(r=>!r.isBusy());return n||(n=this.createIndexList(e),t.push(n)),n.markBusy(),n}getObjectList(e){return e?this._nodes:this._edges}getListFactory(e){return e?this.nodeList:this.edgeList}getStorage(e){return e?this.storage.nodes:this.storage.edges}getFilter(e,t){const n=e?this._nodeFilters:this._edgeFilters;return n[t]||n.visible}fireEvent(e,t){this._modules.events.fire(e,t)}getCacheLists(e){return e?this._nodeCacheLists:this._edgeCacheLists}_resolvePromises(){const e=this._promisesToResolve;this._promisesToResolve=[],e.forEach(t=>t())}_initialize(){this._nodeCacheLists=fS(()=>this.getNodeMaxIndex(),()=>this.acquireIndexList(!0),this._nodeFilters),this._edgeCacheLists=fS(()=>this.getEdgeMaxIndex(),()=>this.acquireIndexList(!1),this._edgeFilters),this.topology=new r6(this),this._resolvePromises()}getNodeMaxIndex(){return this.storage.nodes.getMaxIndex()}getEdgeMaxIndex(){return this.storage.edges.getMaxIndex()}isExcluded(e){return this.storage.fetch(e.isNode).getFlexArray("excluded").getMultiple(e._indexes)}setExcluded(e,t){const n=t?1:0,r=e.isNode,i=this.storage.fetch(r),s=i.getFlexArray("excluded"),o=i.getFlexArray("removed"),a=this.acquireIndexList(r),l=this.getListFactory(r);for(let d=0;d<e._indexes.length;d++){const u=e._indexes[d],h=s.get(u),g=o.get(u);n!==h&&g===0&&a.push(u)}const c=a.sliceAndReset();if(c.length){this.getCacheLists(e.isNode).visible.invalidList();const d=l(c);s.setMultiple(c,n),this._modules.events.fire("excludedStateChange",{elements:d,value:t})}}addNode(e,t){return up(this,!0,e,t)}addEdge(e,t){return up(this,!1,e,t)}addNodes(e,t){return Ol(this,!0,e,t)}addEdges(e,t){return Ol(this,!1,e,t)}getExtremityIndex(e,t,n,r){if(t instanceof es)return t._index;{const i=this.storage.nodes.getIndex(t);if(!i&&!r)throw new Error(`addEdge(s): invalid ${n===0?"source":"target"} for edge "${e}"; node "${t}" does not exist`);return i}}getNodes(e){return this.getElements(!0,e)}getEdges(e){return this.getElements(!1,e)}getElements(e,t){const n=e?this.nodeList:this.edgeList,r=e?Ms:Aa,i=e?es:xo;if(t&&typeof t!="string"){const s=this.acquireIndexList(e),o=this.storage.fetch(e);if(t instanceof i)s.push(t._index);else if(Vn(t)){const a=t;for(const l of a)if(l instanceof i)s.push(l._index);else{const c=o.getIndex(l);c&&s.push(c)}}else if(t instanceof r){const a=this.getFilter(e,"all"),l=t;for(let c=0;c<l._indexes.length;c++){const d=l._indexes[c];a(d)&&s.push(d)}}return n(s.sliceAndReset())}{const s=t||"visible",o=this.getCacheLists(e)[s];if(!o)throw new Error(`getNodes/getEdges: unexpected argument "${s}"`);return n(o.getList())}}getNode(e){return this._getElement(!0,e)}getEdge(e){return this._getElement(!1,e)}_getElement(e,t){if(t instanceof(e?es:xo))return t;const n=this.getStorage(e),r=this.getObjectList(e),i=n.getIndex(t);return i?r.get(i):void 0}clear(){this._modules.events.fire("clearGraph",{nodes:this.getNodes("all"),edges:this.getEdges("all")}),this.storage.nodes.clear(),this.storage.edges.clear(),this._initialize()}createAttribute(e,t,n=!1){return this.storage.fetch(e).createFlexArray(t,n)}createNodeAttribute(e,t){return this.createAttribute(!0,e,t)}createEdgeAttribute(e,t){return this.createAttribute(!1,e,t)}getAttribute(e,t){return this.storage.fetch(e).getFlexArray(t)}getAttributes(e,t){return t.map(n=>this.getAttribute(e,n))}getNodeAttribute(e){return this.storage.nodes.getFlexArray(e)}getNodeAttributes(e){return this.getAttributes(!0,e)}getEdgeAttribute(e){return this.storage.edges.getFlexArray(e)}getEdgeAttributes(e){return this.getAttributes(!1,e)}getAllNodeAttributes(){return this.storage.nodes.getAllFlexArrays()}getAllEdgeAttributes(){return this.storage.edges.getAllFlexArrays()}setSource(e,t){const n=this.getNode(t);n&&this.topology.setExtremities(e._indexes,n._indexes,null)}setTarget(e,t){const n=this.getNode(t);n&&this.topology.setExtremities(e._indexes,null,n._indexes)}getParallelEdges(e,t={}){return this.topology.getParallelEdges(e,t)}hasParallelEdges(e){return this.topology.hasParallelEdges(e._index)}getEdgesBetweenTwoNodes(e,t){return this.edgeList(this.topology.getEdgesBetweenTwoNodes(e._index,t._index))}getAdjacentDirections(e){return this.topology.getAdjacentDirections(e)}getEdgeIndexesInDirection(e){return this.topology.getEdgeIndexesInDirection(e)}fastGetNodesAdjacentElements(e){const t=this._ogma.getNodes();let n=!1;if(t.size===e.size){const r=new Set(e._indexes);for(let i=0;i<t.size;i++)r.delete(t._indexes[i]);n=r.size===0}return n?{nodes:t,edges:this._ogma.getEdges()}:this.topology.fastGetNodesAdjacentElements(e._indexes)}fastGetEdgesAdjacentElements(e){const t=this._ogma.getEdges();let n=!1;if(t.size===e.size){const r=new Set(e._indexes);for(let i=0;i<t.size;i++)r.delete(t._indexes[i]);n=r.size===0}return n?{nodes:this._ogma.getNodes(),edges:t}:this.topology.fastGetEdgesAdjacentElements(e._indexes)}getAdjacentNodes(e,t){return this.nodeList(this.topology.getAdjacentElements(!0,e._indexes,t))}getAdjacentEdges(e,t){return this.edgeList(this.topology.getAdjacentElements(!1,e._indexes,t))}getDegree(e,t){return this.topology.getDegree(e._indexes,t)}degrees(e,t){return this.topology.degrees(e,t)}getAdjacencyList({directed:e=!1,internalIndexes:t=!1,weight:n=1,nodes:r,indexes:i}={}){return this.topology.getAdjacencyList({directed:e,weight:n,ids:!t,nodes:i||this.getNodes(r)._indexes})}getConnectedComponents(e,t){return this.topology.getConnectedComponents(e._indexes,t)}getConnectedComponentByNode(e,t){return this.topology.getConnectedComponents(e._indexes,t)}},Ox=512,Bx=128,UI=Math.round(Math.log2(Ox)),jx=Math.round(Math.log2(Bx)),s6=UI+jx,ll=255,o6=32767,$I=65535,dy=15,cl=3,gp=15,dg=32,Ys=128,uy=8,hy=1/16,gy=Math.round(Math.sqrt(gp+1)),py=Ys*gy,nr=16,bo=1,wi=256,a6=128,l6=128,pp=1.5,GI=1,Bl=56,c6=16,d6=2*Bl+c6,ug=6,VI=3,HI=3,pr=41,km=5,mp=5,WI=.9721,Hd=24,u6=1.4142,h6=/^rgba?\((\d+),?\s*(\d+),?\s*(\d+),?\s*((\d+)?\.?\d+)*\)$/;function Ux(e,t=[0,0,0,0]){const n=h6.exec(e);return n?(t[0]=parseInt(n[1])/255,t[1]=parseInt(n[2])/255,t[2]=parseInt(n[3])/255,t[3]=n[4]===void 0?1:parseFloat(n[4]),t):null}function hg(e){return e<16?"0"+e.toString(16):e.toString(16)}function XI([e,t,n,r=1]){return`rgba(${256*e|0},${256*t|0},${256*n|0},${r})`}function $x(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,s)=>r+r+i+i+s+s);const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1]:null}var Xf=["AliceBlue","#F0F8FF","AntiqueWhite","#FAEBD7","Aqua","#00FFFF","Aquamarine","#7FFFD4","Azure","#F0FFFF","Beige","#F5F5DC","Bisque","#FFE4C4","Black","#000000","BlanchedAlmond","#FFEBCD","Blue","#0000FF","BlueViolet","#8A2BE2","Brown","#A52A2A","BurlyWood","#DEB887","CadetBlue","#5F9EA0","Chartreuse","#7FFF00","Chocolate","#D2691E","Coral","#FF7F50","CornflowerBlue","#6495ED","Cornsilk","#FFF8DC","Crimson","#DC143C","Cyan","#00FFFF","DarkBlue","#00008B","DarkCyan","#008B8B","DarkGoldenRod","#B8860B","DarkGray","#A9A9A9","DarkGrey","#A9A9A9","DarkGreen","#006400","DarkKhaki","#BDB76B","DarkMagenta","#8B008B","DarkOliveGreen","#556B2F","DarkOrange","#FF8C00","DarkOrchid","#9932CC","DarkRed","#8B0000","DarkSalmon","#E9967A","DarkSeaGreen","#8FBC8F","DarkSlateBlue","#483D8B","DarkSlateGray","#2F4F4F","DarkSlateGrey","#2F4F4F","DarkTurquoise","#00CED1","DarkViolet","#9400D3","DeepPink","#FF1493","DeepSkyBlue","#00BFFF","DimGray","#696969","DimGrey","#696969","DodgerBlue","#1E90FF","FireBrick","#B22222","FloralWhite","#FFFAF0","ForestGreen","#228B22","Fuchsia","#FF00FF","Gainsboro","#DCDCDC","GhostWhite","#F8F8FF","Gold","#FFD700","GoldenRod","#DAA520","Gray","#808080","Grey","#808080","Green","#008000","GreenYellow","#ADFF2F","HoneyDew","#F0FFF0","HotPink","#FF69B4","IndianRed","#CD5C5C","Indigo","#4B0082","Ivory","#FFFFF0","Khaki","#F0E68C","Lavender","#E6E6FA","LavenderBlush","#FFF0F5","LawnGreen","#7CFC00","LemonChiffon","#FFFACD","LightBlue","#ADD8E6","LightCoral","#F08080","LightCyan","#E0FFFF","LightGoldenRodYellow","#FAFAD2","LightGray","#D3D3D3","LightGrey","#D3D3D3","LightGreen","#90EE90","LightPink","#FFB6C1","LightSalmon","#FFA07A","LightSeaGreen","#20B2AA","LightSkyBlue","#87CEFA","LightSlateGray","#778899","LightSlateGrey","#778899","LightSteelBlue","#B0C4DE","LightYellow","#FFFFE0","Lime","#00FF00","LimeGreen","#32CD32","Linen","#FAF0E6","Magenta","#FF00FF","Maroon","#800000","MediumAquaMarine","#66CDAA","MediumBlue","#0000CD","MediumOrchid","#BA55D3","MediumPurple","#9370DB","MediumSeaGreen","#3CB371","MediumSlateBlue","#7B68EE","MediumSpringGreen","#00FA9A","MediumTurquoise","#48D1CC","MediumVioletRed","#C71585","MidnightBlue","#191970","MintCream","#F5FFFA","MistyRose","#FFE4E1","Moccasin","#FFE4B5","NavajoWhite","#FFDEAD","Navy","#000080","OldLace","#FDF5E6","Olive","#808000","OliveDrab","#6B8E23","Orange","#FFA500","OrangeRed","#FF4500","Orchid","#DA70D6","PaleGoldenRod","#EEE8AA","PaleGreen","#98FB98","PaleTurquoise","#AFEEEE","PaleVioletRed","#DB7093","PapayaWhip","#FFEFD5","PeachPuff","#FFDAB9","Peru","#CD853F","Pink","#FFC0CB","Plum","#DDA0DD","PowderBlue","#B0E0E6","Purple","#800080","RebeccaPurple","#663399","Red","#FF0000","RosyBrown","#BC8F8F","RoyalBlue","#4169E1","SaddleBrown","#8B4513","Salmon","#FA8072","SandyBrown","#F4A460","SeaGreen","#2E8B57","SeaShell","#FFF5EE","Sienna","#A0522D","Silver","#C0C0C0","SkyBlue","#87CEEB","SlateBlue","#6A5ACD","SlateGray","#708090","SlateGrey","#708090","Snow","#FFFAFA","SpringGreen","#00FF7F","SteelBlue","#4682B4","Tan","#D2B48C","Teal","#008080","Thistle","#D8BFD8","Tomato","#FF6347","Turquoise","#40E0D0","Violet","#EE82EE","Wheat","#F5DEB3","White","#FFFFFF","WhiteSmoke","#F5F5F5","Yellow","#FFFF00","YellowGreen","#9ACD32"],mc=[0,0,0,0],Wd=new Map;Wd.set(null,[0,0,0,0]),Wd.set("transparent",[0,0,0,0]);for(let e=0;e<Xf.length;e+=2){const t=Xf[e].toLowerCase(),n=Xf[e+1];Wd.set(t,$x(n))}var or=e=>{let t=Wd.get(e);if(t===void 0){const n=e+"",r=n.charAt(0)==="#"?$x(n):Ux(n);Wd.set(e,r),t=r}return t},my=e=>{const t=or(e);if(!t)return null;const[n,r,i]=t;return`#${hg(255*n)}${hg(255*r)}${hg(255*i)}`},Ga=e=>{let t=1,n=e;return n&&Ux(e,mc)&&(n=`rgb(${255*+mc[0]},${255*+mc[1]},${255*+mc[2]})`,t=parseFloat(mc[3].toString())),{color:n,opacity:t}},xu=class{on(e,t){if(typeof e!="string")throw new TypeError("Event name must be string");if(typeof t!="function")throw new TypeError("Event handler must be function");const n=this._events=this._events||{};return(n[e]=n[e]||[]).push(t),this}off(e,t){if(typeof e!="string")throw new TypeError("Event name must be string");const n=this._events=this._events||{},r=n[e];if(Vn(r))if(typeof t!="function")n[e]=null;else{const i=r.indexOf(t);i!==-1&&r.splice(i,1),r.length===0&&(n[e]=null)}return this}fire(e,...t){if(typeof e!="string")throw new TypeError("Event name must be string");const n=(this._events=this._events||{})[e];if(Vn(n)){const r=t;for(let i=0;i<n.length;i++){const s=n[i];s&&s.apply(this,r)}}return this}once(e,t){const n=this,r=function(...i){t.apply(n,i),n.off(e,r)};return r.handler=t,this.on(e,r)}hasListener(e,t){if(!e||!t)return!1;const n=(this._events=this._events||{})[e];if(Vn(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];if(s===t||s.handler===t)return!0}return!1}clearEvents(){this._events={}}getListeners(e){return(this._events=this._events||{})[e]}};function YI(e){if(e.keys)return Array.from(e.keys());const t=[];return e.forEach((n,r)=>t.push(r)),t}function qI(e){if(e.values)return Array.from(e.values());const t=[];return e.forEach(n=>t.push(n)),t}var ZI=class{constructor(){this._map=new Map}reset(){this._map.clear()}set(e,t,n){this._map.set(VS(e,t),n)}get(e,t){return this._map.get(VS(e,t))}},g6=class{constructor({elementSize:e,sideElementSize:t,nbSideElementsPerMainElement:n,id:r,depth:i,elementType:s,animated:o,stencilUsage:a}){this._nbCellsAllocated=0,this._nbCellsFreed=0,this._isFullyAllocated=!1,this._isFullyFreed=!1,this._mustUpdate=!0,this._capacity=Ox,this.version=0,this._id=r,this.depth=i,this.type=s,this.animated=o,this.stencilUsage=a,this.elementSize=e,this._nbSideElementsPerMainElement=n,this._totalSideElementsSize=n*t,this._byteCapacity=this._capacity*this.elementSize,this._byteArray=new Uint8Array(this._byteCapacity),this._dataView=new DataView(this._byteArray.buffer),this._sideByteCapacity=this._capacity*this._totalSideElementsSize,this._sideByteArray=new Uint8Array(this._sideByteCapacity),this._sideDataView=new DataView(this._sideByteArray.buffer)}update(){this._mustUpdate&&(this.version+=1,this._mustUpdate=!1,this._isFullyAllocated&&this._nbCellsFreed===this._nbCellsAllocated&&(this._isFullyFreed=!0))}allocate(e){let t=-1;return!this._isFullyAllocated&&this._nbCellsAllocated+e<=this._capacity?(t=this._nbCellsAllocated,this._nbCellsAllocated+=e,this._mustUpdate=!0):this._isFullyAllocated=!0,t}free(e,t){for(let n=0;n<t;n++){const r=(e+n)*this.elementSize;this._dataView.setUint16(r,0)}this._mustUpdate=!0,this._nbCellsFreed+=t}triggerUpdate(){this._mustUpdate=!0}isEmpty(){return this._nbCellsFreed===this._nbCellsAllocated}isFullyFreed(){return this._isFullyFreed}getId(){return this._id}getDataView(){return this._dataView}getByteArray(){return this._byteArray}getSize(){return this._nbCellsAllocated}getNbSideElementsPerMainElement(){return this._nbSideElementsPerMainElement}hasSideData(){return this._nbSideElementsPerMainElement>0}getSideDataView(){return this._sideDataView}getSideByteArray(){return this._sideByteArray}getTotalSideElementsSize(){return this._totalSideElementsSize}},XS=8,p6=class{constructor(){this.version=0,this.version=0,this._blockInfo={buffer:null,offset:0,size:0,address:0},this._init_()}reset(){this._init_()}_init_(){this._buffersByDepth=new Array(100),this._buffersById=[],this._buffersByAscendingDepth=[],this._buffersByDescendingDepth=[],this._mustUpdate=!0}_fillBlockInfo(e,t,n,r){return this._blockInfo.buffer=e,this._blockInfo.offset=t,this._blockInfo.size=n,this._blockInfo.address=r,this._blockInfo}_createBuffer(e,t,n,r,i){const s=t?d6:Bl,o=this._buffersById.length,a=new g6({elementSize:s,sideElementSize:ug,nbSideElementsPerMainElement:r,id:o,depth:n,elementType:e,animated:t,stencilUsage:i});return this._buffersById.push(a),a}getBlockInfo(e){return this._fillBlockInfo(this._buffersById[e>>s6],(e>>jx)%Ox,e%Bx,e)}allocateBlock(e,t,n,r,i,s,o){const a=f6(s,XS);this._mustUpdate=!0;let l=null,c=-1;if(e){const u=this.getBlockInfo(e),h=u.buffer,g=u.offset,p=u.size,m=u.size===i,f=h.depth===r,y=h.type===t,_=h.animated===n,v=h.getNbSideElementsPerMainElement()===a,x=h.stencilUsage===o;m&&f&&y&&_&&v&&x?(h.triggerUpdate(),l=h,c=g):h.free(g,p)}if(c===-1){const u=+n,h=a/XS,g=this._buffersByDepth[r]||Array(2);this._buffersByDepth[r]=g;const p=g[u]||[];g[u]=p;const m=p[t]||Array(16);p[t]=m;const f=m[h]||Array(4);m[h]=f;const y=f[o]||[];f[o]=y;const _=y[y.length-1];_&&(l=_,c=_.allocate(i)),c===-1&&(l=this._createBuffer(t,n,r,a,o),c=l.allocate(i),y.push(l))}const d=m6(l.getId(),c,i);return this._fillBlockInfo(l,c,i,d)}freeBlock(e){if(e){this._mustUpdate=!0;const t=this.getBlockInfo(e);t.buffer.free(t.offset,t.size)}return 0}_sortBuffersByDepth(){const e=[];for(let t=0;t<this._buffersByDepth.length;t++){const n=this._buffersByDepth[t];if(n)for(let r=0;r<n.length;r++){const i=n[r];if(i)for(let s=0;s<i.length;s++){const o=i[s];if(o)for(let a=0;a<o.length;a++){const l=o[a];if(l)for(let c=0;c<l.length;c++){const d=l[c];if(d)for(let u=0;u<d.length;u++){const h=d[u];h.update(),h.isFullyFreed()?(this._buffersById[h.getId()]=void 0,d.splice(u,1),u-=1):e.push(h)}}}}}}this._buffersByAscendingDepth=e,this._buffersByDescendingDepth=e.slice().reverse()}update(){this._mustUpdate&&(this._sortBuffersByDepth(),this.version+=1,this._mustUpdate=!1)}getBuffers(){return this._buffersById}getBuffersByAscendingDepth(){return this._buffersByAscendingDepth}getBuffersByDescendingDepth(){return this._buffersByDescendingDepth}};function m6(e,t,n){return((e<<UI)+t<<jx)+n}function f6(e,t){let n=0;for(;n<e;)n+=t;return n}var Ni=1,ra=2,fp=3,ar=1,fo=2,Yo=3,bu=4,ia=5,sa=6,wo=7,_i=1,Cm=2,Gx=3,Vx=4,zo=5,qo=6,bl=1,JI=2,QI=3;function YS(){return{pieceId:0,shape:"circle",x1:0,y1:0,x2:0,y2:0,rectWidthOrSourceRadiusScaled:0,rectWidthOrSourceRadiusFixed:0,rectHeightOrTargetRadiusScaled:0,rectHeightOrTargetRadiusFixed:0,thicknessOrFontSizeScaled:0,thicknessOrFontSizeFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,offsetScaled:0,offsetFixed:0,pattern:{id:void 0,type:ar,attributes:{}},opacity:1,fillColor:null,strokeColor:null,patternColor:null,globalMinVisibleSize:0,strokeMinVisibleSize:0,patternMinVisibleSize:0,offsetAngle:0,patternScale:0,symbolicSize:-1,curvature:0,dashLength:0,gapLength:0,hasHead:!1,hasTail:!1,isBodyTriangle:!1,isSelfLoop:!1,isText:!1,adjustTextAngle:!1,isBadge:!1,unusedFlag2:!1,unusedFlag3:!1}}function qS(e={}){return e.pieceId=0,e.shape="",e.x1=0,e.y1=0,e.x2=0,e.y2=0,e.rectWidthOrSourceRadiusScaled=0,e.rectWidthOrSourceRadiusFixed=0,e.rectHeightOrTargetRadiusScaled=0,e.rectHeightOrTargetRadiusFixed=0,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=0,e.offsetFixed=0,e.pattern=e.pattern||{type:ar,attributes:{}},e.pattern.type=ar,e.opacity=1,e.fillColor=null,e.strokeColor=null,e.patternColor=null,e.globalMinVisibleSize=0,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=0,e.patternScale=0,e.symbolicSize=0,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isBodyTriangle=!1,e.isSelfLoop=!1,e.isText=!1,e.adjustTextAngle=!1,e.isBadge=!1,e.unusedFlag2=!1,e.unusedFlag3=!1,e}function _6(e={}){return e.duration=0,e.beginTime=-1,e.easing="linear",e}function Hx(){return{valid:!1,id:void 0,end:YS(),start:YS(),animation:{duration:0,beginTime:-1,easing:"linear"}}}function KI(e,t,n,r){e.width=t*r,e.height=n*r,ba(e,`${t}px`,`${n}px`)}var y6=class{constructor(){this._capacity=Bx,this._id=0,this.size=0,this.depth=0,this.animated=!1,this.stencilUsage=bl,this.type=Ni,this._list=Array(this._capacity);for(let e=0;e<this._capacity;++e)this._list[e]=Hx()}reset(e,t,n,r){return this.type=e,this.animated=t,this.depth=n,r!==void 0&&(this._id=r),this.stencilUsage=bl,this.size=0,this}next(){if(this.size>=this._capacity)throw new Error("internal error: block.next() was called on a full block");return this._list[this.size++]}nextAndReset(){const e=this.next();return e.end=qS(e.end),e.start=qS(e.start),e.animation=_6(e.animation),e}forEach(e){this._list.forEach(e)}getElement(e){return this._list[e]}getCurrentElement(){return this._list[this.size-1]}getElements(){return this._list}getId(){return this._id}setGlobalAnimation(e,t,n){for(let r=0;r<this.size;++r){const i=this._list[r].animation;i.duration=e,i.beginTime=t,i.easing=n}}},v6=class{constructor(){this._version=0,this._initialize()}reset(){this._initialize()}_initialize(){this._mustUpdate=!0,this.maxCoord=0,this.maxScaledSize=0,this.maxMinVisibleSize=0,this.maxSymbolicSize=0,this.maxDashLength=0,this.maxGapLength=0,this.maxPatternScale=0}set({maxCoord:e,maxScaledSize:t,maxMinVisibleSize:n,maxSymbolicSize:r,maxDashLength:i,maxGapLength:s,maxPatternScale:o}){const a=this.maxCoord<e||this.maxScaledSize<t||this.maxMinVisibleSize<n||this.maxSymbolicSize<r||this.maxDashLength<i||this.maxGapLength<s||this.maxPatternScale<o;return a&&(this.maxCoord=e,this.maxScaledSize=t,this.maxMinVisibleSize=n,this.maxSymbolicSize=r,this.maxDashLength=i,this.maxGapLength=s,this.maxPatternScale=o,this._mustUpdate=!0),a}update(){return this._mustUpdate&&(this._version+=1,this._mustUpdate=!1),this}getVersion(){return this._version}},x6={linear:[0,1,0,0],quadraticIn:[0,0,1,0,0,0,0,0],quadraticOut:[0,2,-1,0,0,0,0,0],quadraticInOut:[0,0,2,0,-1,4,-2,0],cubicIn:[0,0,0,1],cubicOut:[0,3,-3,1],cubicInOut:[0,0,0,4,-3,12,-12,4]},b6=class{constructor(){this._linearEasing=[0,1,0,0,0,1,0,0],this._nameToPolygon={},this._polygonToName={},this.add(x6)}add(e){Object.keys(e).forEach(t=>{const n=e[t].slice();n.length<8&&(n[4]=n[0],n[5]=n[1],n[6]=n[2],n[7]=n[3]);const r=G_(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]);this._nameToPolygon[t]=n,this._polygonToName[r]=t})}getCoefficients(e){return this._nameToPolygon[e]||this._linearEasing}getName(e,t,n,r,i,s,o,a){const l=G_(e,t,n,r,i,s,o,a);return this._polygonToName[l]||"linear"}},Wx=new b6,w6=0,E6=1,S6=2,A6=3,k6=4,C6=5,T6=6,N6=7,L6=8,I6=9,Tm=10,P6=0,eP=1,tP=2,Xx=30,nP=0,M6=1,F6=2,Yx=3,R6=4,D6=5,qx=6,rP=1e-6,di=Math.PI,cd=2*Math.PI,iP=di*(5/4),sP=di*(7/4),oP=di*(3/4),aP=di*(1/4),ZS=1.1,JS=.07,z6=1,QS=1,KS=.17,O6=1,B6=-di/2,j6=di/2,U6={plain:{dash:0,gap:0},dashed:{dash:3,gap:1},dotted:{dash:1,gap:3}},$6={right:0,top:-Math.PI/2,left:Math.PI,bottom:Math.PI/2,center:0},G6={right:Math.PI,top:-Math.PI/2,left:0,bottom:Math.PI/2,center:0},V6=class{constructor(e,t,n,r,i){this._littleEndian=_m(),this._maxScaledSize=0,this._maxMinVisibleSize=0,this._maxSymbolicSize=0,this._maxDashLength=0,this._maxGapLength=0,this._maxPatternScale=0,this._actualScaledSizeToBytes=o6,this._actualMinVisibleSizeToBytes=dy,this._actualSymbolicSizeToBytes=ll,this._actualDashLengthToBytes=cl,this._actualGapLengthToBytes=cl,this._actualPatternScaleToBytes=ll,this._genericObject=Hx(),this._shapeManager=t,this._patternManager=e,this._textManager=n,this._bufferOffsetToId=r,this._colorParser=i}resizeBoundaries(e,t,n,r,i,s){this._maxScaledSize=e,this._maxMinVisibleSize=t,this._maxSymbolicSize=n,this._maxDashLength=r,this._maxGapLength=i,this._maxPatternScale=s,this._actualScaledSizeToBytes=$I/e,this._actualMinVisibleSizeToBytes=dy/t,this._actualSymbolicSizeToBytes=ll/n,this._actualDashLengthToBytes=cl/r,this._actualGapLengthToBytes=cl/i,this._actualPatternScaleToBytes=ll/s}storeGenericObject(e,t,n){const r=this._shapeManager.getIdFromName(n.shape),i=n.pieceId,s=this._dashLengthToBytes(n.dashLength),o=this._gapLengthToBytes(n.gapLength),a=+n.hasHead,l=+n.hasTail,c=+n.isBodyTriangle,d=+n.isSelfLoop,u=this._patternScaleToBytes(n.patternScale),h=this._offsetAngleToBytes(n.offsetAngle),g=+n.isText,p=+n.adjustTextAngle,m=+n.isBadge,f=+n.unusedFlag2,y=+n.unusedFlag3,_=this._opacityToBytes(n.opacity),v=this._minVisibleSizeToBytes(n.globalMinVisibleSize),x=this._minVisibleSizeToBytes(n.strokeMinVisibleSize),b=this._minVisibleSizeToBytes(n.patternMinVisibleSize),w=this._symbolicSizeToBytes(n.symbolicSize),S=this._curvatureToBytes(n.curvature),A=n.pattern.attributes.colors;A&&(n.pattern.attributes.colors=A.split(";").map(dt=>ih(this._colorToBytes(dt.trim()))).join(";"));const C=this._patternManager.getIdFromDefinition(n.pattern),k=this._colorToBytes(n.fillColor),T=this._colorToBytes(n.strokeColor),M=this._colorToBytes(n.patternColor),{x1:D,y1:B,x2:I,y2:N}=n,V=this._scaledSizeToBytes(n.rectWidthOrSourceRadiusScaled),$=this._fixedSizeToBytes(n.rectWidthOrSourceRadiusFixed),Q=this._scaledSizeToBytes(n.rectHeightOrTargetRadiusScaled),se=this._fixedSizeToBytes(n.rectHeightOrTargetRadiusFixed),te=this._scaledSizeToBytes(n.thicknessOrFontSizeScaled),de=this._fixedSizeToBytes(n.thicknessOrFontSizeFixed),Ee=this._scaledSizeToBytes(n.strokeWidthScaled),oe=this._fixedSizeToBytes(n.strokeWidthFixed),_e=this._scaledSizeToBytes(n.offsetScaled),De=this._fixedSizeToBytes(n.offsetFixed),We=this._fixedSizeToBytes(n.pattern.attributes.paddingTop||0),Ye=this._fixedSizeToBytes(n.pattern.attributes.paddingLeft||0),pe=r+(i<<4)+(s<<8)+(o<<10)+(a<<12)+(l<<13)+(c<<14)+(d<<15),ye=u+(h<<8)+(g<<11)+(p<<12)+(m<<13)+(f<<14)+(y<<15),Ke=_+(v<<4)+(x<<8)+(b<<12),tt=w+(S<<8);this._setUint16(e,t+0,pe),this._setUint16(e,t+2,ye),this._setUint16(e,t+4,Ke),this._setUint16(e,t+6,tt),this._setUint16(e,t+8,C),this._setUint16(e,t+10,k),this._setUint16(e,t+12,T),this._setUint16(e,t+14,M),this._setFloat32(e,t+16,D),this._setFloat32(e,t+20,B),this._setFloat32(e,t+24,I),this._setFloat32(e,t+28,N),this._setUint16(e,t+32,V),this._setUint16(e,t+34,$),this._setUint16(e,t+36,Q),this._setUint16(e,t+38,se),this._setUint16(e,t+40,te),this._setUint16(e,t+42,de),this._setUint16(e,t+44,Ee),this._setUint16(e,t+46,oe),this._setUint16(e,t+48,_e),this._setInt16(e,t+50,De),this._setInt16(e,t+52,We),this._setInt16(e,t+54,Ye)}_setUint16(e,t,n){e.setUint16(t,n,this._littleEndian)}_setInt16(e,t,n){e.setUint16(t,this._signedToUnsignedInt16(n),this._littleEndian)}_setFloat32(e,t,n){e.setFloat32(t,n,this._littleEndian)}_colorToBytes(e){const t=this._colorParser(e);return Math.round(15*t[0])+(Math.round(15*t[1])<<4)+(Math.round(15*t[2])<<8)+(Math.round(15*t[3])<<12)}_scaledSizeToBytes(e){return Math.ceil(Math.min(e,this._maxScaledSize)*this._actualScaledSizeToBytes)}_fixedSizeToBytes(e){return e}_minVisibleSizeToBytes(e){return Math.round(Math.min(e,this._maxMinVisibleSize)*this._actualMinVisibleSizeToBytes)}_symbolicSizeToBytes(e){return Math.round(Math.min(e,this._maxSymbolicSize)*this._actualSymbolicSizeToBytes)}_dashLengthToBytes(e){return Math.round(Math.min(e,this._maxDashLength)*this._actualDashLengthToBytes)}_gapLengthToBytes(e){return Math.round(Math.min(e,this._maxGapLength)*this._actualGapLengthToBytes)}_patternScaleToBytes(e){return Math.round(Math.min(e,this._maxPatternScale)*this._actualPatternScaleToBytes)}_offsetAngleToBytes(e){return Math.round((e+cd)%cd*(8/cd))}_opacityToBytes(e){return Math.round(15*Math.min(e,1))}_curvatureToBytes(e){return this._signedToUnsignedByte(e)}_signedToUnsignedByte(e){return fi(e,-128,127)+128}_signedToUnsignedInt16(e){return fi(e,-32768,32767)+32768}storeAnimationInformation(e,t,{beginTime:n,duration:r},i){this._setAnimationBeginTime(e,t,n),this._setAnimationDuration(e,t,r),this._setAnimationEasing(e,t,i)}_setAnimationBeginTime(e,t,n){this._setFloat32(e,t,n)}_setAnimationDuration(e,t,n){this._setFloat32(e,t+4,n)}_setAnimationEasing(e,t,n){this._setUint16(e,t+8,(n[0]+128<<8)+(n[4]+128)),this._setUint16(e,t+10,(n[1]+128<<8)+(n[5]+128)),this._setUint16(e,t+12,(n[2]+128<<8)+(n[6]+128)),this._setUint16(e,t+14,(n[3]+128<<8)+(n[7]+128))}extractGenericElement(e,t,n){const r=e.type,i=e.animated,s=e.getDataView(),o=t*e.elementSize,a=this._genericObject;if(a.valid=!1,s.getUint16(o)&&(a.valid=!0,this._extractGenericObject(a.end,s,o,n),i&&(this._extractGenericObject(a.start,s,o+Bl,n),this._extractAnimationInformation(a.animation,s,o+2*Bl)),a.id=this._bufferOffsetToId.get(e.getId(),t),r===ra)){const l=e.getSideDataView(),c=t*e.getTotalSideElementsSize(),d=c+e.getTotalSideElementsSize();a.end.pattern=this._textManager.extractTextFromDataView(l,c,d)}return a}_extractGenericObject(e,t,n,{bytesToActualCoord:r,bytesToActualScaledSize:i,bytesToActualMinVisibleSize:s,bytesToActualPatternScale:o,bytesToActualSymbolicSize:a,bytesToActualDashLength:l,bytesToActualGapLength:c}){const d=t,u=n,h=this._littleEndian,g=d.getUint16(u,h),p=en(g,0,4),m=en(g,4,8),f=en(g,8,10),y=en(g,10,12),_=en(g,12,13),v=en(g,13,14),x=en(g,14,15),b=en(g,15,16),w=d.getUint16(u+2,h),S=en(w,0,8),A=en(w,8,11),C=en(w,11,12),k=en(w,12,13),T=en(w,13,14),M=en(w,14,15),D=en(w,15,16),B=d.getUint16(u+4,h),I=en(B,0,4),N=en(B,4,8),V=en(B,8,12),$=en(B,12,16),Q=d.getUint16(u+6,h),se=en(Q,0,8),te=en(Q,8,16),de=d.getUint16(u+8,h),Ee=d.getUint16(u+10,h),oe=d.getUint16(u+12,h),_e=d.getUint16(u+14,h),De=d.getFloat32(u+16,h),We=d.getFloat32(u+20,h),Ye=d.getFloat32(u+24,h),pe=d.getFloat32(u+28,h),ye=d.getUint16(u+32,h),Ke=d.getUint16(u+34,h),tt=d.getUint16(u+36,h),dt=d.getUint16(u+38,h),it=d.getUint16(u+40,h),Y=d.getUint16(u+42,h),ne=d.getUint16(u+44,h),ae=d.getUint16(u+46,h),ce=d.getUint16(u+48,h),he=Yf(d.getUint16(u+50,h)),me=Yf(d.getUint16(u+52,h)),Me=Yf(d.getUint16(u+54,h));e.pieceId=m,e.shape=this._shapeManager.getNameFromId(p),e.x1=ti(De,r),e.y1=ti(We,r),e.x2=ti(Ye,r),e.y2=ti(pe,r),e.rectWidthOrSourceRadiusScaled=ti(ye,i),e.rectWidthOrSourceRadiusFixed=Ke,e.rectHeightOrTargetRadiusScaled=ti(tt,i),e.rectHeightOrTargetRadiusFixed=dt,e.thicknessOrFontSizeScaled=ti(it,i),e.thicknessOrFontSizeFixed=Y,e.strokeWidthScaled=ti(ne,i),e.strokeWidthFixed=ae,e.offsetScaled=ti(ce,i),e.offsetFixed=he,e.pattern=this._patternManager.getDefinitionFromId(de),e.pattern.attributes.paddingTop=me,e.pattern.attributes.paddingLeft=Me,e.opacity=I/15,e.fillColor=ih(Ee),e.strokeColor=ih(oe),e.patternColor=ih(_e),e.globalMinVisibleSize=ti(N,s),e.strokeMinVisibleSize=ti(V,s),e.patternMinVisibleSize=ti($,s),e.offsetAngle=A*(2*Math.PI/8),e.patternScale=S*o,e.symbolicSize=se*a,e.curvature=H6(te),e.dashLength=f*l,e.gapLength=y*c,e.hasHead=!!_,e.hasTail=!!v,e.isBodyTriangle=!!x,e.isSelfLoop=!!b,e.isText=!!C,e.adjustTextAngle=!!k,e.isBadge=!!T,e.unusedFlag2=!!M,e.unusedFlag3=!!D}_extractAnimationInformation(e,t,n){const r=this._littleEndian,i=t.getFloat32(n,r),s=t.getFloat32(n+4,r),o=t.getUint16(n+8,r),a=t.getUint16(n+10,r),l=t.getUint16(n+12,r),c=t.getUint16(n+14,r),d=(o>>8)-128,u=(a>>8)-128,h=(l>>8)-128,g=(c>>8)-128,p=o%256-128,m=a%256-128,f=l%256-128,y=c%256-128;e.beginTime=i,e.duration=s,e.easing=Wx.getName(d,u,h,g,p,m,f,y)}};function en(e,t,n){return e%(1<<n)>>t}function H6(e){return e-128}function Yf(e){return e-32768}function ti(e,t){return e*t}var e2=new Array(65535);function ih(e){let t=e2[e];if(!t){const n=en(e,0,4)/15,r=en(e,4,8)/15,i=en(e,8,12)/15,s=en(e,12,16)/15;t=`rgba(${255*n|0}, ${255*r|0}, ${255*i|0}, ${s})`,n+r+i+s===0&&(t=null),e2[e]=t}return t}var W6={[fo]:"image",[bu]:"piechart",[Yo]:"text",[ia]:"icon",[sa]:"badge"},X6=class{constructor(){this._pixelRatio=1,this._nextPatternId=1,this._version=0,this._init_()}reset(){this._init_()}_init_(){this._mustUpdate=!0,this._nextPatternId=1,this._patterns=[null],this._patternsByHash={},this._pixelRatio=1,this._nullPattern={id:-1,type:ar,attributes:{}}}_increaseNextId(){let e=this._nextPatternId++;for(e%256==255&&(e=this._nextPatternId++);this._patterns.length<=e;)this._patterns.push(void 0);return e}_createPattern({type:e,attributes:t}){const n={id:this._increaseNextId(),type:e,attributes:this._getAttributes(e,t)};return this._patterns[n.id]=n,this._mustUpdate=!0,n}_getAttributes(e,t){return e===fo?{image:t.image,scaled:t.scaled,duplicated:t.duplicated}:e===Yo||e===ia||e===sa?{font:t.font,size:t.size,style:t.style,text:t.text,paddingLeft:t.paddingLeft,paddingTop:t.paddingTop,align:t.align||"center",offset:t.offset||0}:e===bu&&t.colors?{colors:t.colors,colorArray:t.colors.split(";").map(n=>n.trim())}:{}}getPatternList(){return this._patterns.filter(e=>e)}update(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1)}setPixelRatio(e){e!==this._pixelRatio&&(this._pixelRatio=e,this._mustUpdate=!0)}getPixelRatio(){return this._pixelRatio}notifyUpdate(){this._mustUpdate=!0}getIdFromDefinition(e){const{type:t,attributes:n}=e,r=t===Yo||t===ia||t===sa;let i=0;return t&&t!==ar&&t!==wo&&(t!==fo||n.image)&&(!r||n.text&&n.font)&&(i=this._addPattern(e),t===Yo&&n.style==="normal"&&(n.style="bold",this._addPattern(e))),i}_addPattern(e){const t=this._getPatternHash(e);let n=this._patternsByHash[t];return n||(this._nextPatternId>65500?mo("maximum number of pattern exceeded"):(n=this._createPattern(e).id,this._patternsByHash[t]=n)),n}_getPatternHash({type:e,attributes:t}){const n=[W6[e]];return e===fo?n.push(t.scaled?"scaled":"non-scaled",t.duplicated?"duplicated":"non-duplicated",t.image.src||t.image.toDataURL()):e===Yo?n.push(t.text,t.font,t.style,t.size,t.align||"center",t.offset||0):e===ia||e===sa?n.push(t.text,t.font,t.style,t.size,t.paddingLeft,t.paddingTop):n.push(t.colors),n.join("+")}getDefinitionFromId(e){if(e&&this._patterns[e]){const t=this._patterns[e];if(t)return t}return this._nullPattern}getVersion(){return this._version}};function t2(e){return e.map(({x:t,y:n,r=0})=>({x:t,y:n,r}))}var Y6=class{constructor(){this._version=0,this._mustUpdate=!0,this._byName={},this._byId=new Array(gp+1)}register(e,{getDistanceFromStrokeVertically:t,getDistanceFromStrokeHorizontally:n,points:r,hole:i,isSimple:s}){if(this._byName[e])return;let o=s?1:uy;const a=s?uy-1:gp;for(;this._byId[o];)o+=1;if(o>a)throw new Error("max number of shape exceeded");const l={id:o,name:e,getDistanceFromStrokeVertically:t,getDistanceFromStrokeHorizontally:n,points:t2(r.slice()),hole:i?t2(i.slice()):null,isSimple:!!s};return this._mustUpdate=!0,this._byId[o]=l,this._byName[e]=l,l}getIdFromName(e){return this._byName[e].id}getNameFromId(e){const t=this._byId[e];return t?t.name:""}getDefinitionFromName(e){return this._byName[e]}update(){this._mustUpdate&&(this._version+=1,this._mustUpdate=!1)}getVersion(){return this._version}getShapeList(){return this._byId.filter(e=>e)}},fy=300,_y=150,lP=class{constructor(){this.style={},this.width=fy,this.height=_y,this.__context=new cP,this.style={},this.width=fy,this.height=_y}get __dummy(){return!0}get parentNode(){return null}getContext(e){return e==="2d"?this.__context:null}toDataURL(e="png"){return`data:image/${e};base64,`}addEventListener(){}removeEventListener(){}getBoundingClientRect(){return{left:0,top:0,bottom:0,right:0,width:this.width,height:this.height}}},cP=class{constructor(){this._fontSize=10}set font(e){const t=e.match(/\d+/);t&&(this._fontSize=parseFloat(t[0]))}set fillStyle(e){}set textBaseline(e){}set textAlign(e){}set strokeStyle(e){}set lineWidth(e){}fill(){}stroke(){}clearRect(){}fillRect(){}strokeRect(){}beginPath(){}closePath(){}moveTo(){}lineTo(){}rect(){}arc(){}save(){}restore(){}clip(){}translate(){}rotate(){}fillText(){}setLineDash(){}quadraticCurveTo(){}bezierCurveTo(){}drawImage(){}measureText(e){return{width:e.length*Math.ceil(.625*this._fontSize)}}getImageData(){return{width:0,height:0,data:new Uint8ClampedArray(0)}}},sh=mi("canvas")||mi("canvas-prebuilt");function Wn(e=fy,t=_y){if(Ts){const r=document.createElement("canvas");return r.width=e,r.height=t,r}if(sh){let r=null;return r="createCanvas"in sh?sh.createCanvas(e,t):new sh(e,t),r.style={},r}const n=new lP;return n.width=e,n.height=t,n}function yy(e,t,n=e.width,r=e.height){t.clearRect(0,0,n,r)}function Eo(e,t,n,r=""){e.font=`${r} ${n}px ${t}`}function dP(){return Zx(Wn(),{},"webgl")!==null}var uP=e=>{const{canvas:t,width:n,height:r}=be({canvas:document.createElement("canvas"),width:window.innerWidth*devicePixelRatio,height:window.innerHeight*devicePixelRatio},e);t.width=Math.ceil(n),t.height=Math.ceil(r),t.style.width=Math.ceil(n/devicePixelRatio)+"px",t.style.height=Math.ceil(r/devicePixelRatio)+"px";const i=t.getContext("webgl2",{antialias:!0});if(!i)throw new Error("WebGL 2.0 not supported");return i},hP=(e,t,n)=>{const r=uP();return r.canvas.addEventListener("webglcontextlost",n),{context:r,cleanUp:()=>{var i;r.canvas.removeEventListener("webglcontextlost",n),(i=r.getExtension("WEBGL_lose_context"))==null||i.loseContext()}}};function Zx(e,t,n){let r=e.getContext(n,t);return r||(r=e.getContext("experimental-webgl",t)),r||null}function Jx(e,t){if(t<2)return e;const n=e.split(`
`),r=[];for(let i=0;i<n.length;++i){const s=n[i];if(s.length<t)r.push(s);else{const o=gP(n[i],t);for(let a=0;a<o.length;++a)r.push(o[a])}}return r.join(`
`)}function gP(e,t){const n=[""],r=e.split(" ");for(let i=0;i<r.length;i++){const s=n[n.length-1],o=r[i];s.length+1+o.length<=t&&s.length?n[n.length-1]+=(s.length>0?" ":"")+o:n.push(o)}return n}function pP(e,t){if(e===null)return null;const n=(e=e.toString()).split(`
`),r=[];let i=0;for(let s=0;s<n.length;s++){let o=n[s];if(!t||t<=1||o.length<t)r.push(o),i=Math.max(i,o.length);else{const a=gP(n[s],t);for(let l=0;l<a.length;l++)o=a[l],r.push(o),i=Math.max(i,o.length)}}return{data:r,maxLength:i,lines:r.length}}function mP(){const e=mi("@mapbox/mapbox-gl-rtl-text")||mi("mapbox-gl-rtl-text"),t=e?e.processBidirectionalText:vo?window.processBidirectionalText:null,n=e?e.applyArabicShaping:vo?window.applyArabicShaping:null;return{processBidirectionalText:t?i=>{if(i===null||i==null)return"";const s=[];let o=0,a="";const l=i.split(`
`);for(let c=0;c<l.length;c++){const d=l[c],u=l[c].length+o;u>0&&c<l.length-1&&s.push(u),a+=c>0?""+d:d,o+=d.length}return t(a,s).join(`
`)}:i=>i,applyArabicShaping:n?i=>i==null?null:typeof i=="number"?i.toString():n(i):i=>i==null?null:i.toString()}}var qf=_m(),oh=10,q6=1<<17,Z6=65536,J6=256,n2=128,Q6=25,fP=1e3,vy=2,K6=class{constructor(e){this._patternManager=e,this._canvas=Wn(),this._ctx=this._canvas.getContext("2d",{willReadFrequently:!0}),this._processBidirectionalText=mP().processBidirectionalText,this._cornerRadius=0,this._version=0,this._textPattern={id:0,type:wo,attributes:{text:"",font:"",size:0,style:"normal",align:"center"},dimensions:{width:0,height:0}},this._textDimensions={width:0,height:0},this._lineWidthList=new Array(64),this._init()}_init(){this._mustClear=!1,this._clear()}reset(){this._init()}clear(){this._mustClear=!0}_measureChar(e,t,n){return Eo(this._ctx,t,Hd,n),this._ctx.measureText(e).width/Hd}_getAtlas(e,t,n,r){const i=n===vu?0:n,s=this._byFont[e]||(this._byFont[e]={none:void 0,bold:void 0,italic:void 0,normal:void 0}),o=s[r]||(s[r]={}),a=o[t]||(o[t]=new Array(50));return a[i]||(a[i]=new Array(256))}_getMeasurementAtlas(e,t){const n=this._widthAtlases[t];return n[e]||(n[e]=new Array(256))}measureText(e,t,n,r=1){if(!t)return this._textDimensions.width=0,this._textDimensions.height=0,this._textDimensions;const i=this._getMeasurementAtlas(t,n);let s=0,o=0,a=1;for(let l=0;l<e.length;++l){const c=e.charCodeAt(l);if(c===oh)o>s&&(s=o),o=0,a+=1;else{let d=i[c];d===void 0&&(d=this._measureChar(e[l],t,n),i[c]=d),o+=d}}return o>s&&(s=o),this._textDimensions.width=s*r,this._textDimensions.height=a*r,this._textDimensions}_getCharInfo(e,t,n,r,i,s){let o=e[t];if(!o){const a=String.fromCharCode(t);o={ratio:this._measureChar(a,n,r),patternId:0},o.patternId=this._patternManager.getIdFromDefinition({id:0,type:Yo,attributes:{text:a,font:n,style:r,size:i,align:s}}),e[t]=o}return o}storeTextInDataView(e,t,n,r){let i=t;if(r&&r.type===wo){const{font:s,style:o,size:a,align:l}=r.attributes,c=l==="center",d=this._getAtlas(s,o,a,l);let u=0,h=1,g=0,p=0;const m=this._lineWidthList,f=this._processBidirectionalText(r.attributes.text);for(let x=0;x<f.length;++x){const b=f.charCodeAt(x);b===oh?(g>u&&(u=g),m[p]=g,p++,g=0,h++):g+=this._getCharInfo(d,b,s,o,a,l).ratio}m[p]=g,g>u&&(u=g),p=0;let y=-(c?m[p]:u)/2,_=(1-h)/2,v=0;for(let x=0;x<f.length;++x){const b=f.charCodeAt(x),w=d[b];if(b===oh)p+=1,y=-(c?m[p]:u)/2,_+=x===0?.5:1,v=0;else{const S=w.ratio,A=w.patternId;y+=(S+v)/2,v=S;const C=(fi(y*fP+Z6,0,q6-1)<<8)+fi(_*vy+n2,0,J6-1);e.setUint16(i,A,qf),e.setUint32(i+2,C,qf),i+=ug}}}this._fillWithZeros(e,i,n)}extractTextFromDataView(e,t,n){const r=e,i=qf,s=r.getUint16(t,i),o=this._textPattern,a=this._patternManager.getDefinitionFromId(s),{font:l,style:c,size:d,align:u}=a.attributes,h=this._getAtlas(l,c,d,u),g=[];let p=0,m=0,f=0,y=null;for(let v=t;v<n;v+=ug){const x=r.getUint16(v,i);if(!x)break;const b=(r.getUint8(v+2)-n2)/vy,w=this._patternManager.getDefinitionFromId(x);if(!w||!w.attributes||!w.attributes.text)break;const S=w.attributes.text.charCodeAt(0),A=h[S];y===null?y=b:b>y&&(p>m&&(m=p),p=0,f+=1,g.push(oh),y=b),g.push(S),A&&(p+=A.ratio)}p>m&&(m=p);const _=String.fromCharCode.apply(null,g);return o.attributes.style=c,o.attributes.font=l,o.attributes.size=d,o.attributes.align=u,o.attributes.text=this._processBidirectionalText(_),o.dimensions&&(o.dimensions.width=m,o.dimensions.height=f),o}_fillWithZeros(e,t,n){for(let r=t;r<n;r+=ug)e.setUint16(r,0)}_clear(){this._byFont={},this._widthAtlases={normal:{},bold:{},italic:{}}}update(){this._mustClear&&(this._clear(),this._mustClear=!1)}getVersion(){return this._version}getCornerRadius(){return this._cornerRadius}setCornerRadius(e){e!==this._cornerRadius&&(this._cornerRadius=e,this._version++)}};function ah(e,t,n,r,i){const s=1-i;return s*s*s*e+3*i*s*s*t+3*i*i*s*n+i*i*i*r}function dl(e,t,n,r){const i=1-r;return i*i*e+2*i*r*t+r*r*n}var _P=(e,t)=>2/(1+Math.exp(-Math.abs(e*t))),xy=class by extends xu{constructor({bufferList:t,patternManager:n,boundariesManager:r,shapeManager:i,textManager:s,memoryManager:o}){super(),this._firstFrame=!0,this._width=0,this._height=0,this._pixelRatio=0,this._viewX=0,this._viewY=0,this._viewZoom=0,this._viewAngle=0,this._viewAngleCos=0,this._viewAngleSin=0,this._currentTime=0,this._scales={bytesToActualCoord:0,bytesToActualScaledSize:0,bytesToActualMinVisibleSize:0,bytesToActualSymbolicSize:0,bytesToActualDashLength:0,bytesToActualGapLength:0,bytesToActualPatternScale:0},this._shapesVersion=0,this._patternsVersion=0,this._boundariesVersion=0,this._textsVersion=0,this._backgroundRgba=[1,1,1,0],this._renderBackground=!1,this._hideImages=!1,this._genericObject=Hx(),this._littleEndian=_m(),this._bufferList=t,this._shapeManager=i,this._patternManager=n,this._boundariesManager=r,this._textManager=s,this._memoryManager=o}static createInitData(){return null}static getName(){return null}static isAvailable(){return!0}static setEdgeArrowSizeRatio(t){by.edgeArrowSizeRatio=t}static setMinEdgeTipSize(t){by.minEdgeTipSize=t}getDomElement(){return null}_initCanvas(t){t.style.touchAction="none"}export(t){return Promise.resolve()}extractElement(t,n){return this._memoryManager.extractGenericElement(t,n,this._scales)}_compareDimensions(t,n,r){return(t!==this._width||n!==this._height||r!==this._pixelRatio)&&(this._width=t,this._height=n,this._pixelRatio=r,!0)}_compareView(t,n,r,i){return(t!==this._viewX||n!==this._viewY||r!==this._viewZoom||i!==this._viewAngle)&&(this._viewX=t,this._viewY=n,this._viewZoom=r,this._viewAngle=i,this._viewAngleCos=Math.cos(i),this._viewAngleSin=Math.sin(i),!0)}_compareCurrentTime(t){return t!==this._currentTime&&(this._currentTime=t,!0)}_compareBackgroundColor(t,n){return(t!==this._backgroundColor||n!==this._renderBackground)&&(this._renderBackground=n,this._backgroundColor=t,this._backgroundRgba=or(this._backgroundColor),!0)}_compareShapes(){return this._shapesVersion!==this._shapeManager.getVersion()&&(this._shapesVersion=this._shapeManager.getVersion(),!0)}_comparePatterns(){return this._patternsVersion!==this._patternManager.getVersion()&&(this._patternsVersion=this._patternManager.getVersion(),!0)}_compareBoundaries(){return this._boundariesVersion!==this._boundariesManager.getVersion()&&(this._boundariesVersion=this._boundariesManager.getVersion(),!0)}_compareTexts(){return this._textsVersion!==this._textManager.getVersion()&&(this._textsVersion=this._textManager.getVersion(),!0)}_compareIsDisplayableBuffer(t){return this._isBufferDisplayable!==t&&(this._isBufferDisplayable=t,!0)}_compareHideImages(t){return this._hideImages!==t&&(this._hideImages=t,!0)}renderFrame({x:t,y:n,zoom:r,angle:i,width:s,height:o,pixelRatio:a,backgroundColor:l,currentTime:c,isBufferDisplayable:d,hideImages:u,renderBackground:h}){const g=this._compareShapes(),p=this._comparePatterns(),m=this._compareBoundaries(),f=this._compareTexts(),y=this._compareDimensions(s,o,a),_=this._compareView(t,n,r,i),v=this._compareCurrentTime(c),x=this._compareBackgroundColor(l,h),b=this._compareIsDisplayableBuffer(d),w=this._compareHideImages(u);if(m){const S=this._boundariesManager,A=this._scales;A.bytesToActualCoord=1,A.bytesToActualScaledSize=S.maxScaledSize/$I,A.bytesToActualMinVisibleSize=S.maxMinVisibleSize/dy,A.bytesToActualSymbolicSize=S.maxSymbolicSize/ll,A.bytesToActualDashLength=S.maxDashLength/cl,A.bytesToActualGapLength=S.maxGapLength/cl,A.bytesToActualPatternScale=S.maxPatternScale/ll}this._firstFrame&&this._beforeFirstFrame(),this._render({shapesChanged:g,patternsChanged:p,boundariesChanged:m,textsChanged:f,dimensionsChanged:y,viewChanged:_,currentTimeChanged:v,backgroundColorChanged:x,isBufferDisplayableChanged:b,isHideImagesChanged:w}),this._firstFrame&&(this._afterFirstFrame(),this._firstFrame=!1)}_render(t){}_beforeFirstFrame(){}_afterFirstFrame(){}destroy(){}ensureAnimationsReady(){}getImageData(){return null}setViewportClipping(t){}};xy.edgeArrowSizeRatio=VI,xy.minEdgeTipSize=HI;var bs=xy,Qx=()=>({minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),vr=class gg{constructor(t={}){const{xValues:n=[],yValues:r=[],scaledSizeValues:i=[],fixedSizeValues:s=[]}=t;this.minX=ms(n),this.minY=ms(r),this.maxX=al(n),this.maxY=al(r),this.minScaledSize=ms(i),this.maxScaledSize=al(i),this.minFixedSize=ms(s),this.maxFixedSize=al(s),this.cx=this.minX+(this.maxX-this.minX)/2,this.cy=this.minY+(this.maxY-this.minY)/2,this.width=this.maxX-this.minX,this.height=this.maxY-this.minY}reset(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.minScaledSize=1/0,this.maxScaledSize=-1/0,this.minFixedSize=1/0,this.maxFixedSize=-1/0,this.width=0,this.height=0,this.cx=0,this.cy=0,this}addPoint(t,n,r,i){return this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n),r!==void 0&&i!==void 0&&(i==="scaled"?(this.minScaledSize=Math.min(this.minScaledSize,r),this.maxScaledSize=Math.max(this.maxScaledSize,r)):(this.minFixedSize=Math.min(this.minFixedSize,r),this.maxFixedSize=Math.max(this.maxFixedSize,r))),this.cx=this.minX+(this.maxX-this.minX)/2,this.cy=this.minY+(this.maxY-this.minY)/2,this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this}computeForZoom(t){const n=Math.max(this.maxScaledSize,this.maxFixedSize/t);return gg.from({minX:this.minX-n/2,minY:this.minY-n/2,maxX:this.maxX+n/2,maxY:this.maxY+n/2,width:this.width+n,height:this.height+n})}static from({minX:t,minY:n,maxX:r,maxY:i,width:s,height:o}={}){const a=new gg;return t!=null&&(a.minX=t),n!=null&&(a.minY=n),r!=null&&(a.maxX=r),i!=null&&(a.maxY=i),r!=null&&t!=null&&(a.width=s||(r-t)/2,a.cx=(t+r)/2),i!=null&&n!=null&&(a.height=o||(i-n)/2,a.cy=(n+i)/2),a}static fromValues(t,n,r){let i=1/0,s=1/0,o=-1/0,a=-1/0,l=-1/0;for(let d=0;d<t.length;d++){const u=t[d],h=n[d],g=r[d];u-g<i&&(i=u-g),h-g<s&&(s=h-g),u+g>o&&(o=u+g),h+g>a&&(a=h+g),g>l&&(l=g)}const c=gg.from({minX:i,minY:s,maxX:o,maxY:a});return c.maxScaledSize=l,c}pad(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,this.width+=2*t,this.height+=2*t,this}isValid(){return isFinite(this.width)&&isFinite(this.height)}extend(t){return this.addPoint(t.minX,t.minY),this.addPoint(t.maxX,t.maxY),this}bottomLeft(){return{x:this.minX,y:this.minY}}topRight(){return{x:this.maxX,y:this.maxY}}},e8=5,r2=5;function Nm(e,t,n,r,i,s){const o=s||{x1:0,y1:0,x2:0,y2:0},a=(r+r/r2*n)*r2,l=-i+Math.PI,c=-i+Math.PI/2;return o.x1=e+Math.cos(l)*a,o.y1=t+Math.sin(l)*a,o.x2=e+Math.cos(c)*a,o.y2=t+Math.sin(c)*a,o}function ka(e,t,n,r,i,s){const o=s||{x:0,y:0},a=(e+n)/2,l=(t+r)/2,c=e-n,d=t-r,u=Math.sqrt(c*c+d*d);if(u===0)return o.x=a,o.y=l,o;const h=d/u,g=-c/u,p=-u*i/e8;return o.x=a+h*p,o.y=l+g*p,o}function Lm(e,t,n,r,i,s,o,a={x:0,y:0}){return a.x=(1-e)*(1-e)*t+2*(1-e)*e*s+e*e*r,a.y=(1-e)*(1-e)*n+2*(1-e)*e*o+e*e*i,a}function Kx(e,t,n,r,i,s,o,a={x:0,y:0}){return a.x=(2*e-2)*t+(2*r-4*s)*e+2*s,a.y=(2*e-2)*n+(2*i-4*o)*e+2*o,uL(a)}function yP(e,t,n,r,i,s,o,a={x:0,y:0}){return Kx(e,t,n,r,i,s,n,a),Zg(a.x,a.y,0,0,Math.PI/2,a),a}function vP(e,t,n,r,i,s,o,a,l,c=0,d=!1){const u=n-2*o+i,h=r-2*a+s,g=-((n-e)*h-(r-t)*u)/((2*o-2*n)*h-(2*a-2*r)*u);if(g<0||g>1)return!1;let p=l/2;d&&(p*=1-g),p+=c;const m=dl(n,o,i,g),f=dl(r,a,s,g);return En(m,f,e,t)<=p}function t8(e,t){const n=e.getAttribute("curvature"),[r,i]=e.getExtremities().getAttributes(["x","y"]),s=ka(r.x,r.y,i.x,i.y,n);return Lm(t,r.x,r.y,i.x,i.y,s.x,s.y)}function n8(e,t){const n=e.getAttribute("curvature"),[r,i]=e.getExtremities().getAttributes(["x","y"]),s=ka(r.x,r.y,i.x,i.y,n);return yP(t,r.x,r.y,i.x,i.y,s.x,s.y)}function r8(e,t){const n=e.getAttribute("curvature"),[r,i]=e.getExtremities().getAttributes(["x","y"]),s=ka(r.x,r.y,i.x,i.y,n);return Kx(t,r.x,r.y,i.x,i.y,s.x,s.y)}function Xd(e,t,n,r,i,s,o,a,l,c={x:0,y:0}){const d=(1-e)*(1-e)*(1-e),u=3*e*(1-e)*(1-e),h=3*e*e*(1-e),g=e*e*e;return c.x=d*t+u*s+h*a+g*r,c.y=d*n+u*o+h*l+g*i,c}function xP(e,t,n,r,i,s,o,a,l,c,d,u){const h=En(n,r,o,a);if(Math.abs(e-n)>h||Math.abs(t-r)>h)return!1;let g=.5,p=En(e,t,n,r)<En(e,t,i,s)?-.01:.01,m=100;const f=Xd(g,n,r,i,s,o,a,l,c);let y,_=En(e,t,f.x,f.y);const v=d/2+u;for(;m-- >0&&g>=0&&g<=1&&_>v&&(p>.001||p<-.001);)y=_,Xd(g,n,r,i,s,o,a,l,c,f),_=En(e,t,f.x,f.y),_>y?(p=-p/2,g+=p):g+p<0||g+p>1?(p/=2,_=y):g+=p;return _<v}function eb(e,t,n,r,i,s,o=Qx()){const a=e+.6666666666666666*(n-e),l=t+2/3*(r-t);return Im(e,t,a,l,a+1/3*(i-e),l+1/3*(s-t),i,s,o)}function Im(e,t,n,r,i,s,o,a,l=Qx()){const{min:c,max:d,sqrt:u}=Math;let h,g,p,m,f;l.minX=c(e,o),l.maxX=d(e,o),l.minY=c(t,a),l.maxY=d(t,a);for(let y,_,v,x,b,w,S,A=0;A<2;++A)if(A===0?(g=e,p=n,m=i,f=o):(g=t,p=r,m=s,f=a),_=6*g-12*p+6*m,y=-3*g+9*p-9*m+3*f,v=3*p-3*g,_|=0,y|=0,v|=0,y!==0)b=_*_-4*v*y,b<0||(w=(-_+u(b))/(2*y),w>0&&w<1&&(h=Zf(w,g,p,m,f),A===0?(l.minX=c(l.minX,h),l.maxX=d(l.maxX,h)):(l.minY=c(l.minY,h),l.maxY=d(l.maxY,h))),S=(-_-u(b))/(2*y),S>0&&S<1&&(h=Zf(S,g,p,m,f),A===0?(l.minX=c(l.minX,h),l.maxX=d(l.maxX,h)):(l.minY=c(l.minY,h),l.maxY=d(l.maxY,h))));else{if(_===0)continue;x=-v/_,x>0&&x<1&&(h=Zf(x,g,p,m,f),A===0?(l.minX=c(l.minX,h),l.maxX=d(l.maxX,h)):(l.minY=c(l.minY,h),l.maxY=d(l.maxY,h)))}return l}function Zf(e,t,n,r,i){return Math.pow(1-e,3)*t+3*Math.pow(1-e,2)*e*n+3*(1-e)*Math.pow(e,2)*r+Math.pow(e,3)*i}function i8(e,t,n,r,i,s){const o=e-2*n+i,a=t-2*r+s,l=2*n-2*e,c=2*r-2*t,d=4*(o*o+a*a),u=4*(o*l+a*c),h=l*l+c*c,g=2*Math.sqrt(d+u+h),p=Math.sqrt(d),m=2*d*p,f=2*Math.sqrt(h),y=u/p;return(m*g+p*u*(g-f)+(4*h*d-u*u)*Math.log((2*p+y+g)/(y+f)))/(4*m)}function bP(e,t,n,r,i,s,o,a=0,l=!1){const c=En(n,r,i,s),d=(o/2*(l?En(e,t,i,s)/c:1)+a)/c,u=(i-n)*d,h=(s-r)*d,g=n+h,p=r-u,m=e-g,f=t-p,y=n-h-g,_=r+u-p,v=i+h-g,x=s-u-p,b=m*y+f*_,w=m*v+f*x;return b>0&&b<y*y+_*_&&w>0&&w<v*v+x*x}function s8(e,t,n,r,i=!1){if(i&&(lh(e,n)||lh(e,r)||lh(t,n)||lh(t,r)))return!1;let s=(e.y-n.y)*(r.x-n.x)-(e.x-n.x)*(r.y-n.y);const o=(t.x-e.x)*(r.y-n.y)-(t.y-e.y)*(r.x-n.x);if(o===0)return!1;const a=s/o;s=(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y);const l=s/o;return!(a<=0||a>=1||l<=0||l>=1)}function lh(e,t){return e.x===t.x&&e.y===t.y}function jl(e,t,n,r){return Math.atan2(r-t,n-e)}function o8(e,t,n){const r=jl(e.x,e.y,t.x,t.y)-jl(n.x,n.y,t.x,t.y);return r<0?r+2*Math.PI:r}function a8(e,t,n,r,i,s,o,a){const l=(a-s)*(n-e)-(o-i)*(r-t);if(l===0)return null;let c=t-s;return c=((o-i)*c-(a-s)*(e-i))/l,{x:e+c*(n-e),y:t+c*(r-t)}}function Dc(e,t,n,r,i,s,o,a){const l=e-n,c=t-r,d=i-o,u=s-a,h=l*u-d*c,g=(c*(e-i)-l*(t-s))/h;if(g<0||g>1)return null;const p=(d*(s-t)+u*(e-i))/h;return p>=0&&p<=1?{x:e-p*l,y:t-p*c}:null}function wP(e,t,n,r,i,s,o,a){let l;const c=[];return l=Dc(e,t,n,r,i,s,i,a),l&&c.push(l),l=Dc(e,t,n,r,i,a,o,a),l&&c.push(l),l=Dc(e,t,n,r,o,a,o,s),l&&c.push(l),l=Dc(e,t,n,r,o,s,i,s),l&&c.push(l),c}function ul(e,t,n,r,i,s,o,a){const l=((o-i)*(t-s)-(a-s)*(e-i))/((a-s)*(n-e)-(o-i)*(r-t)),c=((n-e)*(t-s)-(r-t)*(e-i))/((a-s)*(n-e)-(o-i)*(r-t));return l>=0&&l<=1&&c>=0&&c<=1}function tb(e,t,n,r,i,s,o,a){return e>=i&&t>=s&&e<=o&&t<=a||n>=i&&r>=s&&n<=o&&r<=a||!!ul(e,t,n,r,i,s,i,a)||!!ul(e,t,n,r,o,s,o,a)||!!ul(e,t,n,r,i,s,o,s)||!!ul(e,t,n,r,i,a,o,a)}function EP(e,t,n){return Math.sqrt(nb(e.x,e.y,t.x,t.y,n.x,n.y))}function nb(e,t,n,r,i,s){const o=sg(n,r,i,s);if(o===0)return sg(e,t,n,r);let a=((e-n)*(i-n)+(t-r)*(s-r))/o;return a=Math.max(0,Math.min(1,a)),sg(e,t,n+a*(i-n),r+a*(s-r))}function SP(e,t,n,r,i,s){const o=i-n,a=s-r;if(o===0&&a===0)return{x:n,y:r};const l=((e-n)*o+(t-r)*a)/(o*o+a*a);return l<0?{x:n,y:r}:l>1?{x:i,y:s}:{x:n+l*o,y:r+l*a}}function l8(e,t,n,r,i,s){const o=i-n,a=s-r,l=((e-n)*o+(t-r)*a)/(o*o+a*a);return{x:n+o*l,y:r+a*l}}function Pm(e,t,n,r,i,s){const o=s||{x:0,y:0},a=(e+n)/2,l=(t+r)/2,c=e-n,d=t-r,u=Math.sqrt(c*c+d*d);if(u===0)return o.x=a,o.y=l,o;const h=d/u,g=-c/u,p=-u*i/km;return o.x=a+h*p,o.y=l+g*p,o}function rb(e,t,n,r,i,s){const o=s||{x1:0,y1:0,x2:0,y2:0},a=(r+r/mp*n)*mp,l=-i+di,c=di/2-i;return o.x1=e+Math.cos(l)*a,o.y1=t+Math.sin(l)*a,o.x2=e+Math.cos(c)*a,o.y2=t+Math.sin(c)*a,o}var c8={left:{x:-1,y:0},right:{x:1,y:0},top:{x:0,y:-1},bottom:{x:0,y:1},center:{x:0,y:0}},d8=[{name:"topLeft",dx:-1,dy:-1},{name:"topRight",dx:1,dy:-1},{name:"bottomLeft",dx:-1,dy:1},{name:"bottomRight",dx:1,dy:1}],us={x:0,y:0};function u8(e,t,n,r,i,s,o,a,l,c,d,u){s=s||o.getNodes()._indexes;const h=l.getZoom(),g=o.getObjectList(!0),p=a.getFlexArrays().nodes.current;let m=1/0,f=0,y=-1/0;a.update();for(let _=0;_<s.length;++_){const v=s[_];if(p.excluded.get(v)||!p.detectable.get(v)||d.has(v))continue;const x=p.x.get(v),b=p.y.get(v),w=p.layer.get(v);if(w<y)continue;us.x=x,us.y=b;const S=l.graphToScreenCoordinates(us),A=S.x,C=S.y,k=p.shape.get(v),T=p.scalingMethod.get(v)==="scaled",M=p.radius.get(v)*(T?h:1),D=M+i,B=(e-A)/D,I=(t-C)/D;if(us.x=e,us.y=t,!(r&&AP(us,v,a,l,c)))if(c.checkShapeHit(k,B,I)){const N=o.getAttribute(!0,"virtual").get(v)!==0;if(D>m&&N)continue;m=D}else{if(!n)continue;{const N=u(p.text.content.get(v)||null),V=p.textHidden.get(v),$=p.text.minVisibleSize.get(v);if(V||!N||(T?2*M:1/0)<$)continue;const Q=Jx(N,p.text.maxLineLength.get(v)),se=p.innerStroke.width.get(v),te=p.text.margin.get(v),de=p.text.padding.get(v),Ee=p.text.size.get(v),oe=p.text.scale.get(v),_e=p.text.scaling.get(v),De=p.text.font.get(v),We=p.text.style.get(v),Ye=p.text.position.get(v),pe=c.measureText(Q,De,We,1),ye=_e?oe*M*2:Ee,Ke=pe.width*ye/2+de,tt=pe.height*ye/2+de,dt=c8[Ye],it=se+te+M,Y=A+(it+Ke)*dt.x,ne=C+(it+tt)*dt.y;if(e<=Y-Ke||e>=Y+Ke||t<=ne-tt||t>=ne+tt)continue}}f=v,y=w}return g.get(f)||null}var i2=Math.cos(Math.PI/4);function AP(e,t,n,r,i){const s=n.getFlexArrays().nodes.current,o=r.getZoom(),a=s.scalingMethod.get(t)==="scaled",l=s.radius.get(t)*(a?o:1),c=s.x.get(t),d=s.y.get(t);for(let u=0;u<4;u++){const{name:h,dx:g,dy:p}=d8[u],m=s.badges[h].stroke.width.get(t),f=s.badges[h].stroke.scalingMethod.get(t)==="scaled",y=s.badges[h].scale.get(t)*l+(f?o:1)*m,_=s.badges[h].minVisibleSize.get(t)/2,v=s.badges[h].positionScale.get(t);if(!s.badges[h].text.content.get(t)&&!s.badges[h].image.url.get(t)||y<_)continue;const x=r.graphToScreenCoordinates({x:c+s.radius.get(t)*v*g*i2,y:d+s.radius.get(t)*v*p*i2}),{x:b,y:w}=x,S=(e.x-b)/y,A=(e.y-w)/y;if(i.checkShapeHit("circle",S,A))return h}}function h8(e,t,n,r,i,s,o,a,l){i=i||s.getEdges()._indexes;const c=s.getObjectList(!1),d=l.getFlexArrays(),u=d.edges.current,h=d.nodes.current,g=o.getZoom(),p=r/g;us.x=e,us.y=t;const m=o.screenToGraphCoordinates(us),f=m.x,y=m.y;let _=0;l.update();for(let v=0;v<i.length;++v){const x=i[v],b=u.source.get(x),w=u.target.get(x),S=u.excluded.get(x),A=u.detectable.get(x),C=a.has(b),k=a.has(w);if(S||!A||C||k)continue;const T=b===w,M=u.curvature.get(x),D=u.shape.body.get(x)==="triangle",B=u.scalingMethod.get(x)==="scaled",I=u.width.get(x)/(B?1:g),N=h.x.get(b),V=h.y.get(b),$=h.x.get(w),Q=h.y.get(w);if(T){const se=h.scalingMethod.get(b)==="scaled",te=rb(N,V,M,h.radius.get(b)/(se?1:g),0);if(!xP(f,y,N,V,N,V,te.x1,te.y1,te.x2,te.y2,I,p))continue}else if(M!==0){const se=Pm(N,V,$,Q,M);if(!vP(f,y,N,V,$,Q,se.x,se.y,I,p,D))continue}else if(!bP(f,y,N,V,$,Q,I,p,D))continue;_=x}return c.get(_)||null}function g8(e){const t=e.getNodeAttribute("radius"),n=e.getEdgeAttribute("width"),r=e.getNodes(),i=e.getEdges();let s=0,o=0;for(let a=0;a<r._indexes.length;a++){const l=r._indexes[a],c=t.get(l);c>s&&(s=c)}for(let a=0;a<i._indexes.length;a++){const l=i._indexes[a],c=n.get(l);c>o&&(o=c)}return Math.max(2*s,o)}function p8(e){return e===null?"none":e==="webgl"?"WebGL":e==="svg"?"SVG":e==="canvas"?"Canvas":e}function kP(e,t,n,r){const i=(e-t)/n,s=i*i,o=s*i,a=Wx.getCoefficients(r),l=i<.5?0:4;return fi(a[l]+a[l+1]*i+a[l+2]*s+a[l+3]*o,0,1)}function zc(e,t,n,r){if(e===t)return e;const[i,s,o,a]=or(e),[l,c,d,u]=or(t);return`rgba(${Math.round(255*Dt(i,l,n))},${Math.round(255*Dt(s,c,n))},${Math.round(255*Dt(o,d,n))},${Dt(a,u,r)})`}function m8(e,t){const[n,r,i,s]=or(e);return`rgba(${255*n},${255*r},${255*i},${s*t})`}var ch=1/pr,CP=class extends bs{constructor(e){super(e),this._cachePoints=[],this._nextCachePoint=0,this._tmp={x1:0,y1:0,x2:0,y2:0},this._pointCopies=Array(128),this._clipViewport=!0}_resetCachePoints(){this._nextCachePoint=0}_point(e,t){let n=this._cachePoints[this._nextCachePoint++];return n||(n={x:0,y:0},this._cachePoints.push(n)),n.x=e,n.y=t,n}setViewportClipping(e){this._clipViewport=e}_displayBuffer(e){const t=e.getSize(),n=e.animated;for(let r=0;r<t;++r){const i=this.extractElement(e,r);i.valid&&this._displayElement(i,n)}}_mixAttributes(e,t,n){const r=kP(this._currentTime,n.beginTime,n.duration,n.easing);return e.dashLength=Dt(t.dashLength,e.dashLength,r),e.gapLength=Dt(t.gapLength,e.gapLength,r),e.offsetAngle=Dt(t.offsetAngle,e.offsetAngle,r),e.opacity=Dt(t.opacity,e.opacity,r),e.globalMinVisibleSize=Dt(t.globalMinVisibleSize,e.globalMinVisibleSize,r),e.strokeMinVisibleSize=Dt(t.strokeMinVisibleSize,e.strokeMinVisibleSize,r),e.patternMinVisibleSize=Dt(t.patternMinVisibleSize,e.patternMinVisibleSize,r),e.symbolicSize=Dt(t.symbolicSize,e.symbolicSize,r),e.curvature=Dt(t.curvature,e.curvature,r),e.fillColor=zc(t.fillColor,e.fillColor,r,r),e.strokeColor=zc(t.strokeColor,e.strokeColor,r,r),e.patternColor=zc(t.patternColor,e.patternColor,r,r),e.x1=Dt(t.x1,e.x1,r),e.y1=Dt(t.y1,e.y1,r),e.x2=Dt(t.x2,e.x2,r),e.y2=Dt(t.y2,e.y2,r),e.rectWidthOrSourceRadiusScaled=Dt(t.rectWidthOrSourceRadiusScaled,e.rectWidthOrSourceRadiusScaled,r),e.rectWidthOrSourceRadiusFixed=Dt(t.rectWidthOrSourceRadiusFixed,e.rectWidthOrSourceRadiusFixed,r),e.rectHeightOrTargetRadiusScaled=Dt(t.rectHeightOrTargetRadiusScaled,e.rectHeightOrTargetRadiusScaled,r),e.rectHeightOrTargetRadiusFixed=Dt(t.rectHeightOrTargetRadiusFixed,e.rectHeightOrTargetRadiusFixed,r),e.thicknessOrFontSizeScaled=Dt(t.thicknessOrFontSizeScaled,e.thicknessOrFontSizeScaled,r),e.thicknessOrFontSizeFixed=Dt(t.thicknessOrFontSizeFixed,e.thicknessOrFontSizeFixed,r),e.strokeWidthScaled=Dt(t.strokeWidthScaled,e.strokeWidthScaled,r),e.strokeWidthFixed=Dt(t.strokeWidthFixed,e.strokeWidthFixed,r),e.offsetScaled=Dt(t.offsetScaled,e.offsetScaled,r),e.offsetFixed=Dt(t.offsetFixed,e.offsetFixed,r),e}_computeRenderInfo(e){const t=this._viewZoom,n=this._point(e.x1,e.y1),r=this._point(e.x2,e.y2);return{shape:this._shapeManager.getDefinitionFromName(e.shape),pieceId:e.pieceId,dashLength:e.dashLength,gapLength:e.gapLength,hasHead:e.hasHead,hasTail:e.hasTail,isBodyTriangle:e.isBodyTriangle,isSelfLoop:e.isSelfLoop,patternScale:e.patternScale,offsetAngle:op(e.offsetAngle),isText:e.isText,adjustTextAngle:e.adjustTextAngle,isBadge:e.isBadge,unusedFlag2:e.unusedFlag2,unusedFlag3:e.unusedFlag3,opacity:e.opacity,globalMinVisibleSize:e.globalMinVisibleSize,strokeMinVisibleSize:e.strokeMinVisibleSize,patternMinVisibleSize:e.patternMinVisibleSize,symbolicSize:e.symbolicSize===0?1/0:e.symbolicSize*t,curvature:e.curvature,pattern:e.pattern,fillColor:e.fillColor,strokeColor:e.strokeColor,patternColor:e.patternColor,pos1OnGraph:n,pos2OnGraph:r,pos1:this._graphToScreenCoordinates(n),pos2:this._graphToScreenCoordinates(r),rectWidthOrSourceRadius:e.rectWidthOrSourceRadiusScaled*t+e.rectWidthOrSourceRadiusFixed,rectHeightOrTargetRadius:e.rectHeightOrTargetRadiusScaled*t+e.rectHeightOrTargetRadiusFixed,thicknessOrFontSize:e.thicknessOrFontSizeScaled*t+e.thicknessOrFontSizeFixed,strokeWidth:e.strokeWidthScaled*t+e.strokeWidthFixed,offset:e.offsetScaled*t+e.offsetFixed}}_applyBackgroundBlending(e){e.opacity!==1&&(e.fillColor=this._blendColor(e.fillColor,e.opacity),e.strokeColor=this._blendColor(e.strokeColor,e.opacity),e.textColor=this._blendColor(e.textColor,e.opacity))}_pointArray(e){let t=this._pointCopies[e];if(!t){t=new Array(e),this._pointCopies[e]=t;for(let n=0;n<e;++n)t[n]={x:0,y:0,r:0}}return t}_scalePoints(e,t,n,r){const i=e.shape.points.length,s=this._pointArray(i);for(let l=0;l<i;++l){const c=e.shape.points[l],d=s[l];d.x=t.x+c.x*n,d.y=t.y+c.y*r,d.r=c.r*n}const o=e.pos2OnGraph.x-e.pos1OnGraph.x,a=e.pos2OnGraph.y-e.pos1OnGraph.y;if(o!==0||a!==0){const l=Math.sqrt(o*o+a*a),c=o/l,d=a/l;for(const u of s){const h=u.x-t.x,g=u.y-t.y;u.x=t.x+c*h+d*g,u.y=t.y-d*h+c*g}}return s}_drawPoints(e,t=!1){e.length===1?this._drawCircle(e[0],e[0].r):this._drawPolygon(e,t)}_computeCenter(e){const t=Math.cos(e.offsetAngle),n=Math.sin(e.offsetAngle),r=(e.pos1.x+e.pos2.x)/2+t*e.offset,i=(e.pos1.y+e.pos2.y)/2+n*e.offset;return this._point(r,i)}_displayTextBox(e,t,n,r){const i=this._computeCenter(e),s=e.rectWidthOrSourceRadius/2,o=e.rectHeightOrTargetRadius/2;(t||r)&&this._drawRoundedRectangle(i,s,o,0,e.fillColor)}_displayNodeComponent(e,t,n,r){const i=this._computeCenter(e);if(e.pattern.type!==wo){const s=e.rectWidthOrSourceRadius/2,o=e.rectHeightOrTargetRadius/2,a=this._scalePoints(e,i,s,o);if((t||r)&&this._drawPoints(a,!0),t&&this._fill(e.fillColor),r){if(this._startClip(),e.pattern.type===bu){let l=e.pattern.attributes.colorArray;e.opacity!==1&&(l=l.map(c=>this._blendColor(c,e.opacity))),this._displayPieChart(i,s,l)}else if(e.pattern.type===ia||e.pattern.type===sa){const c=Math.round(e.rectHeightOrTargetRadius*e.patternScale),d=e.pattern.attributes.text,u=e.patternColor,h=e.pattern.attributes.font,g=e.pattern.attributes.style,p=e.pattern.attributes.align,m=e.rectWidthOrSourceRadius,f=e.pattern.attributes.paddingTop,y=e.pattern.attributes.paddingLeft;this._displayText(i,0,d,u,h,c,g,p,m,y,f,!0)}else if(e.pattern.type===fo){const l=e.pattern.attributes.image;if(l.isDummy||l.width&&l.height){const c=e.pattern.attributes.duplicated,d=c?1:e.patternScale,u=e.rectWidthOrSourceRadius*d,h=e.rectHeightOrTargetRadius*d,g=e.pattern.attributes.scaled,p=e.opacity;this._displayImage(i,u,h,l,g,c,p)}}this._endClip()}if(n){const l=e.strokeWidth/2,c=this._scalePoints(e,i,s+l,o+l);this._drawPoints(c),this._stroke(e.strokeColor,e.strokeWidth)}}else if(r){const o=e.thicknessOrFontSize,a=e.pattern.attributes.text,l=e.patternColor,c=e.pattern.attributes.font,d=e.pattern.attributes.style,u=e.pattern.attributes.align,h=e.rectWidthOrSourceRadius;this._displayText(i,0,a,l,c,o,d,u,h,0,0,!1)}}_displayElement(e,t){if(!e.end||!e.end.shape||!e.end.pieceId||t&&(!e.start||!e.animation))return;this._resetCachePoints();const n=t?this._mixAttributes(e.end,e.start,e.animation):e.end,r=this._computeRenderInfo(n);if(r.symbolicSize<r.globalMinVisibleSize||r.opacity===0)return;this._applyBackgroundBlending(r);const i=!!(r.strokeColor&&r.strokeWidth>0&&r.symbolicSize>=r.strokeMinVisibleSize),s=r.pattern.type!==ar&&r.symbolicSize>=r.patternMinVisibleSize,o=!!r.fillColor;if(r.pieceId===_i)return this._displayNodeComponent(r,o,i,s);if(r.pieceId===qo)return this._displayTextBox(r,o,i,s);const a=r.pos2.x-r.pos1.x,l=r.pos2.y-r.pos1.y,c=Math.sqrt(a*a+l*l);let d,u=null,h=null;if(r.isSelfLoop){const g=r.pieceId===zo||r.pieceId===zo+qo?r.strokeWidth/2:r.rectWidthOrSourceRadius,{x1:p,y1:m,x2:f,y2:y}=this._getSelfLoopControlPoints(r.pos1,r.curvature,g);u=this._point(p,m),h=this._point(f,y),d=_8(r.pos1,u,h,r.pos2,1)}else r.curvature?(u=this._getQuadraticCurveControlPoint(r),d=f8(r.curvature,c,1)):d=c;if(r.pieceId===zo||r.pieceId===zo+qo){const g=r.strokeWidth,p=this._getPointOnLine(r.pos1,u,h,r.pos2,.5),m=this._getTangentOnLine(r.pos1,u,h,r.pos2,.5);if(r.rectWidthOrSourceRadius>=d-g&&!r.isSelfLoop){if(!r.adjustTextAngle)return;m.x=1,m.y=0}let f=-Math.atan2(m.y,m.x);const y=op(r.offsetAngle-f);(!r.isSelfLoop&&y<0||r.isSelfLoop&&r.offsetAngle<0)&&(m.x*=-1,m.y*=-1),(f>Math.PI/2||f<-Math.PI/2)&&(f+=Math.PI);const _=this._getOrthogonal(m),v=p.x+_.x*r.offset,x=p.y+_.y*r.offset;if(r.pieceId===zo+qo){if(!r.fillColor)return;const b=r.rectWidthOrSourceRadius/2,w=r.rectHeightOrTargetRadius/2;this._drawRoundedRectangle(this._point(v,x),b,w,y+Math.PI/2,r.fillColor)}else{const b=this._point(v,x),w=f,S=r.thicknessOrFontSize,A=r.pattern.attributes.text,C=r.patternColor,k=r.pattern.attributes.font,T=r.pattern.attributes.style,M=r.pattern.attributes.align,D=r.rectWidthOrSourceRadius;this._displayText(b,w,A,C,k,S,T,M,D,0,0,!1)}}else{const g=r.pieceId===Gx,p=r.pieceId===Vx,m=Math.cos(r.offsetAngle),f=Math.sin(r.offsetAngle);r.pos1.x+=m*r.offset,r.pos1.y+=f*r.offset,r.pos2.x+=m*r.offset,r.pos2.y+=f*r.offset;const y=r.shape.name==="line",_=r.thicknessOrFontSize,v=r.rectWidthOrSourceRadius,x=r.rectHeightOrTargetRadius,b=+r.hasHead,w=+r.hasTail,S=Math.max(bs.minEdgeTipSize,_*bs.edgeArrowSizeRatio),A=b*Math.min(5*v,S),C=w*Math.min(5*x,S),k=r.isSelfLoop?1/0:c-v-x,T=Math.min(0,k-A-C)/2,M=_/2;let D=v>M?v-Math.sqrt(v*v-M*M):M;const B=Math.max(v+C+w*T,0)-(1-b)*D;D=v>M?x-Math.sqrt(x*x-M*M):M;const I=Math.max(x+A+b*T,0)-(1-w)*D;if(g||p){const N=p?-1:1,V=(g?d-I:B)-N;let $=null,Q=null;if(r.isSelfLoop&&u&&h){const se=this._getTFromLengthOnCubicCurve(r.pos1,u,h,r.pos2,V-r.strokeWidth/2*N);$=this._getPointOnCubicCurve(r.pos1,u,h,r.pos2,se),Q=this._getTangentOnCubicCurve(r.pos1,u,h,r.pos2,se)}else if(r.curvature&&u){const se=this._getTFromLengthOnQuadraticCurve(r.pos1,u,r.pos2,V-r.strokeWidth/2*N);$=this._getPointOnQuadraticCurve(r.pos1,u,r.pos2,se),Q=this._getTangentOnQuadraticCurve(r.pos1,u,r.pos2,se)}else{const se=V/d;$=this._mixPoints(r.pos1,r.pos2,se),Q=this._point(a/c,l/c)}if(Q.x*=N,Q.y*=N,o){if(r.shape.hole){const te=this._makeEdgeExtremityPoints($,Q,S,r.shape.hole);this._drawPoints(te),this._startReverseClip()}const se=this._makeEdgeExtremityPoints($,Q,S,r.shape.points);this._drawPoints(se),this._fill(r.fillColor),r.shape.hole&&this._endReverseClip()}if(i){if(r.shape.hole){const de=this._makeEdgeExtremityPoints($,Q,S,r.shape.hole);this._drawPoints(de),this._stroke(r.strokeColor,r.strokeWidth)}const se=S+r.strokeWidth/2,te=this._makeEdgeExtremityPoints($,Q,se,r.shape.points);this._drawPoints(te),this._stroke(r.strokeColor,r.strokeWidth)}}else{if(d-B-I<=0)return;if(y){const N=y8(d,_,B,I,r.dashLength,r.gapLength);i&&(this._drawLine(r.pos1,u,h,r.pos2),this._stroke(r.strokeColor,_+2*r.strokeWidth,N)),o&&(this._drawLine(r.pos1,u,h,r.pos2),this._stroke(r.fillColor,_,N))}else{const N=B,V=d-I;if(i){const $=this._makeTriangleEdgeBody(r.pos1,u,h,r.pos2,N,V,_+r.strokeWidth/2,r.strokeWidth/2);this._drawPoints($),this._stroke(r.strokeColor,r.strokeWidth)}if(o){const $=this._makeTriangleEdgeBody(r.pos1,u,h,r.pos2,N,V,_,0);this._drawPoints($),this._fill(r.fillColor)}}}}}_makeTriangleEdgeBody(e,t,n,r,i,s,o,a){return t?n?this._makeSelfLoopTriangleEdge(e,t,n,r,i,s,o,a):this._makeCurveTriangleEdge(e,t,r,i,s,o,a):this._makeStraightTriangleEdge(e,r,i,s,o,a)}_makeCurveTriangleEdge(e,t,n,r,i,s,o){const a=2*pr+2,l=this._pointArray(a),c=this._getTFromLengthOnQuadraticCurve(e,t,n,r),d=(this._getTFromLengthOnQuadraticCurve(e,t,n,i)-c)/pr,u=(o-s)/pr/2;let h=s/2,g=c;for(let p=0;p<=pr;++p){const m=this._getPointOnQuadraticCurve(e,t,n,g),f=this._getTangentOnQuadraticCurve(e,t,n,g),y=this._getOrthogonal(f),_=y.x*h,v=y.y*h,x=l[p],b=l[a-1-p];x.x=m.x+_,x.y=m.y+v,b.x=m.x-_,b.y=m.y-v,g+=d,h+=u}return l}_makeSelfLoopTriangleEdge(e,t,n,r,i,s,o,a){const l=2*pr+2,c=this._pointArray(l),d=this._getTFromLengthOnCubicCurve(e,t,n,r,i),u=(this._getTFromLengthOnCubicCurve(e,t,n,r,s)-d)/pr,h=(a-o)/pr/2;let g=o/2,p=d;for(let m=0;m<=pr;++m){const f=this._getPointOnCubicCurve(e,t,n,r,p),y=this._getTangentOnCubicCurve(e,t,n,r,p),_=this._getOrthogonal(y),v=_.x*g,x=_.y*g,b=c[m],w=c[l-1-m];b.x=f.x+v,b.y=f.y+x,w.x=f.x-v,w.y=f.y-x,p+=u,g+=h}return c}_makeStraightTriangleEdge(e,t,n,r,i,s){const o=t.x-e.x,a=t.y-e.y,l=Math.sqrt(o*o+a*a),c=this._point(o/l,a/l),d=this._getOrthogonal(c),u=i/2,h=s/2,g=this._pointArray(4),p=g[0],m=g[1],f=g[2],y=g[3],_=e.x+c.x*n,v=e.y+c.y*n,x=e.x+c.x*r,b=e.y+c.y*r,w=d.x*u,S=d.y*u,A=d.x*h,C=d.y*h;return p.x=_+w,p.y=v+S,m.x=_-w,m.y=v-S,f.x=x-A,f.y=b-C,y.x=x+A,y.y=b+C,g}_makeEdgeExtremityPoints(e,t,n,r){const i=this._pointArray(r.length),s=n/2,o=e.x+t.x*s,a=e.y+t.y*s,l=t.x,c=t.y;for(let d=0;d<r.length;++d){const u=r[d],h=i[d],g=(l*u.x-c*u.y)*s,p=(c*u.x+l*u.y)*s;h.x=o+g,h.y=a+p,h.r=u.r*s}return i}_drawLine(e,t,n,r){t?n?this._drawCubicCurve(e,t,n,r):this._drawQuadraticCurve(e,t,r):this._drawStraightLine(e,r)}_getSelfLoopControlPoints(e,t,n){return rb(e.x,e.y,t,n,this._viewAngle,this._tmp)}_getQuadraticCurveControlPoint(e){return Pm(e.pos1.x,e.pos1.y,e.pos2.x,e.pos2.y,e.curvature,this._point(0,0))}_graphToScreenCoordinates(e){const t=this._width/2,n=this._height/2,r=(e.x-this._viewX)*this._viewZoom,i=(e.y-this._viewY)*this._viewZoom,s=this._viewAngleCos,o=this._viewAngleSin,a=s*r+o*i+t,l=-o*r+s*i+n;return this._point(a,l)}_blendColor(e,t){return e&&this._backgroundColor?zc(this._backgroundColor,e,t,1):e?m8(e,t):null}_getTangentOnLine(e,t,n,r,i){return t?n?this._getTangentOnCubicCurve(e,t,n,r,i):this._getTangentOnQuadraticCurve(e,t,r,i):this._getTangentOnStraightLine(e,r)}_getTangentOnStraightLine(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);return this._point(n/i,r/i)}_getTangentOnQuadraticCurve(e,t,n,r){const i=1-r,s=i*t.x+r*n.x-(i*e.x+r*t.x),o=i*t.y+r*n.y-(i*e.y+r*t.y),a=Math.sqrt(s*s+o*o);return this._point(s/a,o/a)}_getTangentOnCubicCurve(e,t,n,r,i){const s=1-i,o=s*s,a=i*i,l=o*(t.x-e.x)+2*s*i*(n.x-t.x)+a*(r.x-n.x),c=o*(t.y-e.y)+2*s*i*(n.y-t.y)+a*(r.y-n.y),d=Math.sqrt(l*l+c*c);return this._point(l/d,c/d)}_mixPoints(e,t,n){const r=Dt(e.x,t.x,n),i=Dt(e.y,t.y,n);return this._point(r,i)}_getOrthogonal(e){return this._point(-e.y,e.x)}_getPointOnLine(e,t,n,r,i){return t?n?this._getPointOnCubicCurve(e,t,n,r,i):this._getPointOnQuadraticCurve(e,t,r,i):this._mixPoints(e,r,i)}_getPointOnQuadraticCurve(e,t,n,r){const i=dl(e.x,t.x,n.x,r),s=dl(e.y,t.y,n.y,r);return this._point(i,s)}_getPointOnCubicCurve(e,t,n,r,i){const s=ah(e.x,t.x,n.x,r.x,i),o=ah(e.y,t.y,n.y,r.y,i);return this._point(s,o)}_getTFromLengthOnCubicCurve(e,t,n,r,i){let s=e.x,o=e.y,a=0,l=0;for(let c=0;c<pr;++c){a+=ch;const d=ah(e.x,t.x,n.x,r.x,a),u=ah(e.y,t.y,n.y,r.y,a),h=d-s,g=u-o,p=Math.sqrt(h*h+g*g),m=l+p;if(m>i)return a-ch*((m-i)/p);l=m,s=d,o=u}return 1}_getTFromLengthOnQuadraticCurve(e,t,n,r){let i=e.x,s=e.y,o=0,a=0;for(let l=0;l<pr;++l){o+=ch;const c=dl(e.x,t.x,n.x,o),d=dl(e.y,t.y,n.y,o),u=c-i,h=d-s,g=Math.sqrt(u*u+h*h),p=a+g;if(p>r)return o-ch*((p-r)/g);a=p,i=c,s=d}return 1}};function f8(e,t,n){const r=Math.abs(e)/km+rP,i=r*r,s=n-.5,o=s*s,a=1/(16*i),l=Math.sqrt(o+a),c=.5/r*Math.sqrt(i+.25);return Math.abs(2*r)*(s*l+.5*c+a*Math.log(Math.abs((s+l)/(-.5+c))))*t}function _8(e,t,n,r,i){const s=(e.x+t.x+n.x)/3,o=(e.y+t.y+n.y)/3,a=s-t.x,l=o-t.y,c=t.x-n.x,d=t.y-n.y,u=a*a+l*l,h=(c*c+d*d)/4,g=Math.sqrt(u-h);return 2*WI*g*3.14159265359*i}function y8(e,t,n,r,i,s){const o=[];if(n&&o.push(0,n),i&&s){const a=i*t,l=s*t,c=a+l,d=e-r-n-c;let u=0;for(;u<d;)o.push(a,l),u+=c;const h=e-r-n-u,g=Math.min(a,h),p=Math.max(h-g,0);o.push(g,p)}else o.push(e-r-n,0);return r&&o.push(0,r),o}var hl=0,dd=1,ud=2,Oo=3,s2=4,ib=0,wy=1,v8={[hl]:{min:"NEAREST",mag:"NEAREST",mipmap:!1},[dd]:{min:"LINEAR",mag:"LINEAR",mipmap:!1},[ud]:{min:"LINEAR",mag:"LINEAR",mipmap:!1},[Oo]:{min:"LINEAR_MIPMAP_LINEAR",mag:"LINEAR",mipmap:!0}},x8={[ib]:"ALPHA",[wy]:"RGBA"};function Ul(e){return Math.ceil((e+2*bo)/nr)*nr}function b8(e,t,n,r,i){for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.x,c=a.y,d=l+r,u=c+i;let h=d<n&&u<n;if(h){for(let g=l;g<d;++g)if(t[g+c*n]===1){h=!1;break}}if(h){for(let g=c;g<u;++g)if(t[l+g*n]===1){h=!1;break}}if(h){for(let g=l;g<d;++g)for(let p=c;p<u;++p)t[g+p*n]=1;return e.splice(s,1),e.push({x:l,y:u},{x:d,y:c}),a}}return null}function o2(e,t,n,r,i,s,o){const a=4*e,l=t>>1<<7,c=t%2<<7;o[a]=n/nr,o[a+1]=r/nr,o[a+2]=l+i/nr,o[a+3]=c+s/nr}function w8(e,t,n,r,i,s,o){r|=0,i|=0,s|=0,o|=0,t|=0;for(let a=0;a<s;++a)for(let l=0;l<o;++l){const c=4*(r+a+(i+l)*t),d=4*(a+l*s);e[c]=n[d],e[c+1]=n[d+1],e[c+2]=n[d+2],e[c+3]=n[d+3]}}function E8(e,t){let n=0,r=4;for(let s=0;s<e.length;++s){const{width:o,height:a}=e[s],l=Ul(o),c=Ul(a);n+=l*c,r=Math.max(r,Math.max(l,c))}const i=eo(Math.max(r,Math.sqrt(n)));return Math.min(i,t)}function a2(e,t){return Math.floor((t-e)/2)}function l2(e,t,n,r,i,s,o){const{min:a,mag:l,mipmap:c}=v8[s],d=e[x8[o]];if(o===ib){const u=new Uint8Array(i*i);for(let h=0;h<u.length;++h)u[h]=r[4*h+3];r=u}e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,d,i,i,0,d,e.UNSIGNED_BYTE,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e[l]),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e[a]),c&&e.generateMipmap(e.TEXTURE_2D)}function TP(e,t,n,r,i){const s=new Uint8Array(n*n*4),o=Math.ceil(n/nr),a=new Uint8Array(o*o),l=[{x:0,y:0}];for(let c=0;c<t.length;++c){const d=t[c],u=d.id,h=Ul(d.width)/nr,g=Ul(d.height)/nr,p=b8(l,a,o,h,g);if(p){const m=d.width,f=d.height,y=d.pixels,_=h*nr,v=g*nr,x=p.x*nr+a2(m,_),b=p.y*nr+a2(f,v);w8(s,n,y,x,b,m,f),o2(u,e,x,b,_,v,i)}else{if(n<r)return TP(e,t,2*n,r,i);mo(`exceeded max WebGL texture size of ${r}; some texts/icons/images won't be displayed`),o2(u,e,0,0,0,0,i)}}return{texture:s,size:n}}function S8(e,t,n,r){const{getDistanceFromStrokeVertically:i,getDistanceFromStrokeHorizontally:s}=e,o=t*(1-n)/2,a=(t-1)/2;for(let l=0;l<t;++l)for(let c=0;c<t;++c){const d=4*(c*t+l),u=(l-a)/o,h=(c-a)/o,g=fi(i(u,h),-1,1),p=fi(s(u,h),-1,1);A8(r,d,c2(g),c2(p))}}function c2(e){const t=(e+1)/2;return Math.floor(32768*t)}function A8(e,t,n,r){e[t]=n>>8,e[t+1]=n%256,e[t+2]=r>>8,e[t+3]=r%256}function NP(e,t){let n=-Math.PI/2;const r=2*Math.PI/e.length;for(const i of e){const s=n+r;t(i,n,s),n=s}}function LP(e,t,n,r,i){NP(t,(s,o,a)=>{e.beginPath(),e.moveTo(n,r),e.arc(n,r,i,o,a),e.fillStyle=s,e.fill()})}var k8=!Wn().__dummy,C8=class extends CP{constructor(e){super(e),this._canvas=Wn(),this._imgCanvas=Wn(),this._initCanvas(this._canvas),this._ctx=this._canvas.getContext("2d"),this._imgCtx=this._imgCanvas.getContext("2d")}static getName(){return"Canvas"}static isAvailable(){return k8}getDomElement(){return this._canvas}_render({dimensionsChanged:e}){e&&KI(this._canvas,this._width,this._height,this._pixelRatio);const t=this._ctx,n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;t.clearRect(0,0,n,r),this._backgroundColor&&this._renderBackground&&(t.fillStyle=this._backgroundColor,t.fillRect(0,0,n,r));const i=this._bufferList.getBuffersByAscendingDepth();for(const s of i)this._isBufferDisplayable(s)&&this._displayBuffer(s)}_drawRoundedRectangle(e,t,n,r,i){const s=this._ctx,o=this._pixelRatio,a=e.x*o,l=e.y*o;t*=o,n*=o;const c=this._textManager.getCornerRadius(),d=Math.min(c*o,n);t+=d/2,s.save(),s.translate(a,l),s.rotate(r),s.beginPath(),s.arc(t-d,n-d,d,0,Math.PI/2),s.arc(-t+d,n-d,d,Math.PI/2,Math.PI),s.arc(-t+d,-n+d,d,Math.PI,3*Math.PI/2),s.arc(t-d,-n+d,d,3*Math.PI/2,0),i&&(s.fillStyle=i,s.fill()),s.restore()}_drawCircle(e,t){const n=this._ctx,r=this._pixelRatio,i=e.x*r,s=e.y*r,o=t*r;n.beginPath(),n.arc(i,s,o,0,2*Math.PI)}_drawPolygon(e){const t=this._ctx,n=this._pixelRatio;t.beginPath();const r=e[0];t.moveTo(r.x*n,r.y*n);for(let i=1;i<e.length;++i){const s=e[i];t.lineTo(s.x*n,s.y*n)}t.closePath()}_drawStraightLine(e,t){const n=this._ctx,r=this._pixelRatio;n.beginPath(),n.moveTo(e.x*r,e.y*r),n.lineTo(t.x*r,t.y*r)}_drawQuadraticCurve(e,t,n){const r=this._ctx,i=this._pixelRatio;r.beginPath(),r.moveTo(e.x*i,e.y*i),r.quadraticCurveTo(t.x*i,t.y*i,n.x*i,n.y*i)}_drawCubicCurve(e,t,n,r){const i=this._ctx,s=this._pixelRatio;i.beginPath(),i.moveTo(e.x*s,e.y*s),i.bezierCurveTo(t.x*s,t.y*s,n.x*s,n.y*s,r.x*s,r.y*s)}_fill(e){const t=this._ctx;t.fillStyle=e,t.fill()}_stroke(e,t,n=[]){if(t===0)return;const r=this._ctx,i=this._pixelRatio;r.setLineDash(n.map(s=>s*this._pixelRatio)),r.lineWidth=t*i,r.strokeStyle=e,r.stroke()}_startClip(){this._ctx.save(),this._ctx.clip()}_endClip(){this._ctx.restore()}_startReverseClip(){this._ctx.save(),this._ctx.rect(0,0,this._canvas.width,this._canvas.height),this._ctx.clip("evenodd")}_endReverseClip(){this._ctx.restore()}_displayText(e,t,n,r,i,s,o,a,l,c,d){const u=this._ctx,h=this._pixelRatio,g=e.x*h,p=e.y*h,m=s*h,f=a==="center"?0:-l/2;if(d=d*this._viewZoom*h,c=c*this._viewZoom*h,u.save(),u.translate(g,p+h),u.rotate(-t),u.textBaseline="middle",u.textAlign=a,Eo(u,i,m,o),u.fillStyle=r,n.indexOf(`
`)!==-1){const y=n.split(`
`),_=y.length;let v=(1-_)/2*m;for(let x=0;x<_;++x)u.fillText(y[x],c+f,d+v),v+=m}else u.fillText(n,c+f,d);u.restore()}_displayImage(e,t,n,r,i,s,o){if(this._hideImages||"isDummy"in r)return;let a=r;o!==1&&(a=this._blendImageOnBackground(r,o));const l=this._ctx,c=this._pixelRatio,d=e.x*c,u=e.y*c,h=t*c,g=n*c,p=a.width*c,m=a.height*c;if(i)l.drawImage(a,d-h/2,u-g/2,h,g);else if(s){const f=d-h/2,y=u-g/2,_=d+h/2,v=u+g/2;let x=d-p/2,b=u-m/2;for(;x>f;)x-=p;for(;b>y;)b-=m;const w=b;for(;x<_;){for(;b<v;)l.drawImage(a,x,b,p,m),b+=m;x+=p,b=w}}else l.drawImage(a,d-p/2,u-m/2,p,m)}_displayPieChart(e,t,n){const r=this._ctx,i=this._pixelRatio,s=e.x*i,o=e.y*i,a=t*i*2,l=2*a;n.length===1&&(r.fillStyle=n[0],r.fillRect(s-a,o-a,l,l)),n.length>1&&LP(r,n,s,o,a)}_blendImageOnBackground(e,t){const n=this._backgroundRgba,r=`rgb(${Math.round(255*n[0])},${Math.round(255*n[1])},${Math.round(255*n[2])})`;return this._imgCanvas.width=e.width,this._imgCanvas.height=e.height,this._imgCtx.clearRect(0,0,e.width,e.height),this._imgCtx.globalAlpha=1,this._imgCtx.fillStyle=r,this._imgCtx.fillRect(0,0,e.width,e.height),this._imgCtx.globalAlpha=t,this._imgCtx.drawImage(e,0,0),this._imgCanvas}getImageData(){return this._ctx.getImageData(0,0,this._canvas.width,this._canvas.height)}},IP=!1;try{IP=!!zt("svg")}catch{}var fc="none",T8={left:"start",center:"middle",right:"end"},si="data-element-id",d2="data-text-component",N8="node-text",L8="edge-text",I8="badge-text";function Zo(e){return Math.round(1e3*e)/1e3}function u2(e,t,n,r,i,s){const o=zt("image");return o.setAttribute("width",Zo(r)),o.setAttribute("height",Zo(i)),o.setAttribute("x",Zo(t)),o.setAttribute("y",Zo(n)),o.setAttribute("href",e),s&&s.appendChild(o),o}function P8(e,t,n,r,i,s=1,o){const a=zt("rect");return a.setAttribute("x",e),a.setAttribute("y",t),a.setAttribute("width",n),a.setAttribute("height",r),a.setAttribute("fill",i),a.setAttribute("fill-opacity",s),o&&o.appendChild(a),a}var M8=class extends CP{constructor(e){super(e),this._svg=zt("svg"),this._defs=zt("defs"),this._styles=zt("g",{class:"styles"}),this._background=zt("rect",{width:"100%",height:"100%",fill:"none",class:"ogma-svg-background"}),this._currentElementId="0",this._currentClipPathId=null,this._clipPathCounter=0,this._defs.appendChild(this._styles),this._svg.setAttribute("pointer-events","none"),this._svg.style.userSelect="none",this._svg.appendChild(this._defs),this._svg.appendChild(this._background),this._clear()}static getName(){return"SVG"}static isAvailable(){return IP}getDomElement(){return this._svg}_render({dimensionsChanged:e}){if(e&&Px(this._svg,{width:this._width,height:this._height}),this._backgroundColor&&this._renderBackground){const n=Ga(this._backgroundColor);this._background.setAttribute("fill",n.color),this._background.setAttribute("fill-opacity",n.opacity)}const t=this._bufferList.getBuffersByAscendingDepth();this._clear(),this._svg.removeChild(this._container);for(let n=0;n<t.length;++n){const r=t[n];this._isBufferDisplayable(r)&&this._displayBuffer(r)}this._svg.appendChild(this._container)}_clear(){this._container&&this._svg.removeChild(this._container),this._container=zt("g"),this._svg.appendChild(this._container),this._clipPaths&&this._defs.removeChild(this._clipPaths),this._clipPaths=zt("g"),this._defs.appendChild(this._clipPaths),this._clipPaths.setAttribute("class","clip-paths"),this._filters&&this._defs.removeChild(this._filters),this._filters=zt("g"),this._defs.appendChild(this._filters)}_displayElement(e,t){this._currentElementId=e.id>=0?`n${e.id}`:"e"+-e.id,super._displayElement(e,t)}_addBackgroundBlendingFilter(e){const t=or(this._backgroundColor),n=e,r=1-e,i=[n,0,0,0,t[0]*r,0,n,0,0,t[1]*r,0,0,n,0,t[2]*r,0,0,0,1,0].join(" "),s=`filter-${this._currentElementId}`,o=zt("filter",{id:s}),a=zt("feColorMatrix",{in:"SourceGraphic",type:"matrix",values:i});return o.appendChild(a),this._filters.appendChild(o),s}_drawRoundedRectangle(e,t,n,r,i){const s=e.x,o=e.y,a=Math.min(this._textManager.getCornerRadius(),n);t+=a/2;const l=zt("path"),c=`M ${s+t-a} ${o+n}     A ${a} ${a} 0 0 0 ${s+t} ${o+n-a}     L ${s+t} ${o-n+a}     A ${a} ${a} 0 0 0 ${s+t-a} ${o-n}     L ${s-t+a} ${o-n}     A ${a} ${a} 0 0 0 ${s-t} ${o-n+a}     L ${s-t} ${o+n-a}     A ${a} ${a} 0 0 0 ${s-t+a} ${o+n}     L ${s+t-a} ${o+n}`;l.setAttribute("d",c),l.setAttribute("fill",fc),l.setAttribute("transform",`rotate(${j_(r)} ${e.x} ${e.y})`),l.setAttribute(si,this._currentElementId),this._container.appendChild(l),this._element=l,i&&this._fill(i)}_drawCircle(e,t){const{x:n,y:r}=e,i=`M ${n-t}, ${r} a ${t},${t} 0 1,0 ${2*t},0 a ${t},${t} 0 1,0 -${2*t},0`,s=zt("path");s.setAttribute("d",i),s.setAttribute("fill",fc),s.setAttribute(si,this._currentElementId),this._container.appendChild(s),this._element=s}_drawPolygon(e,t){const n=zt("path");let r="";for(let i=0;i<e.length;i++){const{x:s,y:o}=e[i];r+=`${i===0?"M":"L"}${s},${o} `}r+="Z",n.setAttribute("d",r),n.setAttribute(si,this._currentElementId),n.setAttribute("fill",fc),t&&n.setAttribute(d2,!0),this._container.appendChild(n),this._element=n}_drawStraightLine(e,t){const n=zt("path"),r=`M ${e.x},${e.y} L${t.x},${t.y}`;n.setAttribute("d",r),n.setAttribute(si,this._currentElementId),this._container.appendChild(n),this._element=n}_drawQuadraticCurve(e,t,n){const r=zt("path"),i=`M ${e.x},${e.y} Q${t.x},${t.y} ${n.x},${n.y}`;r.setAttribute("d",i),r.setAttribute("fill",fc),r.setAttribute(si,this._currentElementId),this._container.appendChild(r),this._element=r}_drawCubicCurve(e,t,n,r){const i=zt("path"),s=`M ${e.x},${e.y} C${t.x},${t.y} ${n.x},${n.y} ${r.x},${r.y}`;i.setAttribute("d",s),i.setAttribute("fill",fc),i.setAttribute(si,this._currentElementId),this._container.appendChild(i),this._element=i}_fill(e){const t=Ga(e);this._element.setAttribute("fill",t.color),this._element.setAttribute("fill-opacity",t.opacity),this._currentClipPathId&&this._element.setAttribute("clip-path",`url(#${this._currentClipPathId})`)}_stroke(e,t,n=[]){if(t===0)return;const r=this._element;r.setAttribute("stroke-width",t);const i=Ga(e);r.setAttribute("stroke",i.color),r.setAttribute("stroke-opacity",i.opacity),n.length>0&&r.setAttribute("stroke-dasharray",n.map(Zo).toString())}_startClip(){const e=zt("clipPath"),t=this._element.cloneNode(!1);this._currentClipPathId="clip-path-"+ ++this._clipPathCounter,e.appendChild(t),this._clipPaths.appendChild(e),e.setAttribute("id",this._currentClipPathId)}_endClip(){this._currentClipPathId=null}_startReverseClip(){const e=zt("clipPath"),t=this._element.cloneNode(!1),n=t.getAttribute("d");t.setAttribute("clip-rule","evenodd"),t.setAttribute("d",`${n} M 0 0 L ${this._width} 0 L ${this._width} ${this._height} L 0 ${this._height}`),this._currentClipPathId="clip-path-"+ ++this._clipPathCounter,e.appendChild(t),this._clipPaths.appendChild(e),e.setAttribute("id",this._currentClipPathId)}_endReverseClip(){this._currentClipPathId=null}_displayText(e,t,n,r,i,s,o="normal",a,l,c,d,u){const h=zt("g");h.setAttribute(si,this._currentElementId),h.setAttribute(d2,!0);let g=this._currentElementId[0]==="n"?N8:L8;u&&(g+=" "+I8),h.setAttribute("class",g);const p=Ga(r),m=p.opacity,f=Ga(p.color),y=e.x+c*this._viewZoom,_=e.y+1+d*this._viewZoom,v=Zo(y);h.setAttribute("font-family",i),h.setAttribute("font-size",s),o==="bold"?h.setAttribute("font-weight",o):h.setAttribute("font-style",o),h.setAttribute("fill",f.color),h.setAttribute("fill-opacity",m),t&&h.setAttribute("transform",`rotate(${j_(-t)} ${y}, ${_})`),h.setAttribute("text-anchor",T8[a]||"middle"),h.setAttribute("dominant-baseline","middle");const x=n.split(`
`),b=x.length,w=Zo(_-(b+1)/2*s),S=a==="center"?0:-l/2;for(let A=0;A<b;A++){const C=zt("text");C.appendChild(Fx(x[A])),C.setAttribute("x",v+S),C.setAttribute("y",w+(A+1)*s),h.appendChild(C)}this._currentClipPathId&&h.setAttribute("clip-path",`url(#${this._currentClipPathId})`),this._container.appendChild(h)}_displayImage(e,t,n,r,i,s,o){const a=e.x,l=e.y;if(this._hideImages||!("isDummy"in r)&&(!r.width||!r.height))return;const c=t,d=n;let u,h=r.width,g=r.height;if(i&&(h=c,g=d),s){const p=a-c/2,m=l-d/2,f=a+c/2,y=l+d/2;let _=a-h/2,v=l-g/2;for(u=zt("g"),u.setAttribute(si,this._currentElementId);_>p;)_-=h;for(;v>m;)v-=g;const x=v;for(;_<f;){for(;v<y;)u2(r.src,_,v,h,g,u),v+=g;v=x,_+=h}}else u=u2(r.src,a-h/2,l-g/2,h,g),u.setAttribute(si,this._currentElementId);if(this._currentClipPathId&&u.setAttribute("clip-path",`url(#${this._currentClipPathId})`),o!==1){const p=this._addBackgroundBlendingFilter(o);u.setAttribute("filter",`url(#${p})`)}this._container.appendChild(u)}_displayPieChart(e,t,n){const r=2*t,i=2*r,s=e.x,o=e.y;let a;const l=zt("g");l.setAttribute(si,this._currentElementId),n.length===1&&(a=P8(s-r,o-r,i,i,n[0],1,l)),n.length>1&&NP(n,(c,d,u)=>{const h=s+t*Math.cos(u),g=o+t*Math.sin(u),p=s+t*Math.cos(d),m=o+t*Math.sin(d),f=u-d<=Math.PI?0:1,y=`M ${h},${g} A ${t},${t} 0 ${f} 0 ${p},${m} L ${s},${o} L ${h},${g}`;a=zt("path"),a.setAttribute("d",y),a.setAttribute("fill",c),a.setAttribute("stroke-width",0),l.appendChild(a)}),this._currentClipPathId&&l.setAttribute("clip-path",`url(#${this._currentClipPathId})`),this._container.appendChild(l)}},F8=6,R8=class{constructor({gl:e,ext:t,staticProgram:n,animationProgram:r}){this._version=0,this._used=!1,this._dataBufferChanged=!1,this._gl=e,this._ext=t,this._staticProgram=n,this._animationProgram=r,this._glBuffer=this._gl.createBuffer()}setDataBuffer(e){this._dataBuffer!==e&&(this._program=e.animated?this._animationProgram:this._staticProgram,this._dataBuffer=e,this._dataBufferChanged=!0,e.hasSideData()&&!this._sideGlBuffer?this._sideGlBuffer=this._gl.createBuffer():!e.hasSideData()&&this._sideGlBuffer&&(this._gl.deleteBuffer(this._sideGlBuffer),delete this._sideGlBuffer))}setPrograms(e,t){this._staticProgram=e,this._animationProgram=t}markAsUnused(){return this._used=!1,this}getProgram(){return this._program}markAsUsed(){return this._used=!0,this}isUsed(){return this._used}draw(){const e=this._gl,t=this._dataBuffer.type,n=t===ra,r=n?this._dataBuffer.getNbSideElementsPerMainElement():1,i=t===fp?pr:1,s=this._dataBuffer.getSize(),o=this._dataBuffer.stencilUsage,a=this._dataBuffer.version,l=this._version!==a||this._dataBufferChanged;this._program.setupBaseAttributes({glBuffer:this._glBuffer,dataBuffer:l?this._dataBuffer.getByteArray():null,divisor:r}),this._program.setupTextAttributes({glBuffer:this._sideGlBuffer,dataBuffer:l&&n?this._dataBuffer.getSideByteArray():null,divisor:1}),this._program.setupStencil(o),l&&(this._version=a,this._dataBufferChanged=!1),this._ext.drawArraysInstancedANGLE(e.TRIANGLES,0,F8*i,s*r)}destroy(){this._gl.deleteBuffer(this._glBuffer),this._sideGlBuffer&&this._gl.deleteBuffer(this._sideGlBuffer)}},D8={byte:1,ubyte:1,short:2,ushort:2,ulong:4,float:4},z8={byte:"BYTE",ubyte:"UNSIGNED_BYTE",short:"SHORT",ushort:"UNSIGNED_SHORT",ulong:"UNSIGNED_LONG",float:"FLOAT"},h2=class{constructor({gl:e,ext:t,specialGlBuffers:n,metaData:r,programWrapper:i}){this._stencilUsage=bl,this._gl=e,this._ext=t,this._specialGlBuffers=n,this._metaData=un(r),this._programWrapper=i}_finishInit(){const e=this._gl,t=this._ext,n=this._programWrapper.getError();if(n)throw new Error(`WebGL compilation at step "${n.step}:
${n.message}"`);const r=this._programWrapper.getProgram();this._program=r,e.useProgram(r),this._metaData.attributes.forEach(o=>{o.location=e.getAttribLocation(this._program,o.name),o.byteSize=o.size*D8[o.type],o.glType=z8[o.type]}),this._specialAttributes=this._createSpecialAttributesFunctions();const i=[],s=[];for(const o of this._metaData.attributes)o.location!==-1&&(o.name.startsWith("a_text")?s.push(o):i.push(o));this._baseAttributes=Jf(i,e,t),this._textAttributes=Jf(s,e,t),this._setupUniforms=B8(this._metaData.uniforms,e,r)}_createSpecialAttributesFunctions(){return Jf([{location:this._gl.getAttribLocation(this._program,this._metaData.vertexInfoAttribute),size:3,glType:"BYTE",byteSize:3,type:"byte",name:"special"}],this._gl,this._ext)}startPass(e){this._program||this._finishInit(),this._gl.useProgram(this._program),this._resetStencil(),this._setupUniforms(this._gl,e),this._specialAttributes.enable(this._gl),this._specialAttributes.setup(this._specialGlBuffers.vertexInfo,null,0)}_setupAttributes(e,{glBuffer:t,dataBuffer:n,divisor:r}){e.enabled&&!t?e.disable(this._gl):!e.enabled&&t&&e.enable(this._gl),t&&e.setup(t,n,r)}setupBaseAttributes(e){this._setupAttributes(this._baseAttributes,e)}setupTextAttributes(e){this._setupAttributes(this._textAttributes,e)}_resetStencil(){const e=this._gl;this._stencilUsage=bl,e.disable(e.STENCIL_TEST)}setupStencil(e){if(e!==this._stencilUsage){const t=this._gl;e!==bl?(t.enable(t.STENCIL_TEST),e===JI?(t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.stencilFunc(t.ALWAYS,1,1)):e===QI&&(t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.stencilFunc(t.EQUAL,0,1))):t.disable(t.STENCIL_TEST),this._stencilUsage=e}}endPass(){const e=this._gl;this._specialAttributes.disable(e),this._baseAttributes.disable(e),this._textAttributes.disable(e)}};function O8(e,t,n){return(r,i,s)=>{let o=0,a=0;for(let l=0;l<e.length;l++)a+=e[l].byteSize;t.bindBuffer(t.ARRAY_BUFFER,r),i&&t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW);for(let l=0;l<e.length;l++){const{location:c,size:d,glType:u,byteSize:h}=e[l];t.vertexAttribPointer(c,d,t[u],!1,a,o),o+=h,n.vertexAttribDivisorANGLE(c,s)}}}function B8(e,t,n){const r={};for(let i=0;i<e.length;++i){const{id:s,name:o}=e[i],a=t.getUniformLocation(n,o);a&&(r[s]=a)}return(i,s)=>{for(let o=0;o<e.length;++o){const{id:a,type:l}=e[o],c=r[a],d=s[a];if(c)switch(l){case"int":case"sampler2D":i.uniform1i(c,d);break;case"float":i.uniform1f(c,d);break;case"vec2":i.uniform2f(c,d[0],d[1]);break;case"vec3":i.uniform3f(c,d[0],d[1],d[2]);break;case"vec4":i.uniform4f(c,d[0],d[1],d[2],d[3])}}}}function j8(e){return t=>{for(let n=0;n<e.length;n++){const r=e[n].location;t.enableVertexAttribArray(r)}}}function U8(e){return t=>{for(let n=0;n<e.length;++n){const r=e[n].location;t.disableVertexAttribArray(r)}}}function Jf(e,t,n){const r=j8(e),i=U8(e);return{enable(s){r(s),this.enabled=!0},disable(s){i(s),this.enabled=!1},setup:O8(e,t,n),enabled:!1}}var Qf=`#define D3D9_FIX 0
precision highp float;
precision mediump int;
uniform vec3 u_backgroundColor;
uniform sampler2D u_patternNearestTexture;
uniform sampler2D u_patternLinearTexture;
uniform sampler2D u_patternLinearSdfTexture;
uniform sampler2D u_patternMipmapTexture;
uniform sampler2D u_shapeTexture;
varying vec4 dn;
varying vec4 dp;
varying vec4 dq;
varying vec2 dr;
varying vec2 ds;
varying vec4 ei;
varying float dt;
#if D3D9_FIX
#else
varying float dy;
varying vec2 dz;
varying vec2 ea;
varying vec2 eb;
varying float ec;
varying float ed;
varying vec2 ee;
varying vec2 ef;
varying float eg;
varying float eh;
#endif
const float FILTER_NEAREST = 0.0;
const float FILTER_LINEAR = 0.0;
const float FILTER_LINEAR_SDF = 0.0;
const float FILTER_MIPMAP = 0.0;
const float SDF_GAMMA = 0.0;
const float EPSILON = 0.000000001;
const float SDF_BUFFER = (256.0 - 64.0) / 256.0; 
vec4 abg(in vec4 um, in vec4 abh) {
float abi = abh.a;
float abj = um.a + EPSILON;
float abk = min(abi + abj, 1.0);
float r = abi / abk;
return vec4(mix(um.rgb, abh.rgb, r), abk);
}
float abl(in float abm, in float fp) {
float abn = (abm * 256.0 + fp) * 256.0;
float abo = abn / 32768.0;
return abo * 2.0 - 1.0;
}
bool mn(float ml, float mm) {
return abs(ml - mm) < EPSILON;
}
float abp(float ma) {
float abt = 2.;
vec2 wz = abs(dq.rg) - dq.ba - vec2(abt) + vec2(ma);
float es = min(max(wz.x, wz.y), 0.0) + length(max(wz, 0.0)) - ma;
return smoothstep(0.1, .5, (1. - es) / 10.);
}
void main() {
#if D3D9_FIX
#else
float aby = eb.x;
float abz = eb.y;
float aca = ee.x;
float acb = ee.y;
#endif
vec4 of = texture2D(u_shapeTexture, dr);
float acc = abl(of.b, of.a) * ef.x;
float acd = abl(of.r, of.g) * ef.y;
float zv = float(ei.z > EPSILON);
float tm = float(ei.w > EPSILON);
float aci = 1. - smoothstep(
0.01,
0.25760,
distance(ei.xy * ei.z - vec2(0.0586), dr * ei.z)
);
aci = aci * 2.5 - 1.5;
aci *= 0.5;
aci *= ef.x;
float acj = abp(dt) ;
vec4 hj = dn;
vec4 hk = dp;
if (eh > -EPSILON) {
vec2 ip = ds;
float aco =
step(dz.x, ip.x) *
step(ip.x, ea.x) *
step(dz.y, ip.y) *
step(ip.y, ea.y);
float acp = aco;
vec4 hl;
if (mn(eh, FILTER_NEAREST)) {
hl = texture2D(u_patternNearestTexture, ip);
} else if (mn(eh, FILTER_LINEAR)) { 
hl = texture2D(u_patternLinearTexture, ip);
} else if (mn(eh, FILTER_LINEAR_SDF)) { 
hl = texture2D(u_patternLinearSdfTexture, ip);
hl.a = smoothstep(SDF_BUFFER - eg, SDF_BUFFER + eg, hl.a);
} else if (mn(eh, FILTER_MIPMAP)) { 
hl = texture2D(u_patternMipmapTexture, ip);
}
hl.rgb += dq.rgb;
hl.a *= acp;
hj = abg(hj, hl);
}
float acu = (1. - zv) * min(acc, acd)
+ zv * aci;
acu = (1. - tm) * acu + tm * acj;
float adc = clamp(acu, 0.0, 1.0);
float adf = clamp(acu - dy, 0.0, 1.0);
float adg = adc - adf;
adg = 1.0 - clamp(acu - dy, 0.0, 1.0);
hj.a *= adf;
hk.a *= adg * step(EPSILON, dy);
vec4 adj = abg(hj, hk);
float adk = adc;
adj.rgb = mix(u_backgroundColor, adj.rgb, aby);
if (ed > EPSILON) {
float adv = fract(acb) * ed;
float adw = clamp(min(adv, aca - adv), 0.0, 1.0);
adk *= adw;
}
if (ec < 0.0 || ec > 1.0 || adk < EPSILON) {
discard;
}
adj.a *= adk;
adj.rgb *= adj.a;
gl_FragColor = adj;
}
`,Kf=`#define D3D9_FIX 0
#define ANIMATED 0
precision highp float;
precision mediump int;
attribute /*ushort*/ vec4 a_final_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature;
attribute /*ushort*/ vec4 a_final_patternId_fillRGBA_strokeRGBA_patternRGBA;
attribute /*float*/ vec4 a_final_x1_y1_x2_y2;
attribute /*ushort*/ vec4 a_final_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed;
attribute /*ushort*/ vec4 a_final_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed;
attribute /*ushort*/ vec4 a_final_offsetScaled_offsetFixed_paddingTop_paddingLeft;
attribute /*ushort*/ vec4 a_prev_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature;
attribute /*ushort*/ vec4 a_prev_patternId_fillRGBA_strokeRGBA_patternRGBA;
attribute /*float*/ vec4 a_prev_x1_y1_x2_y2;
attribute /*ushort*/ vec4 a_prev_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed;
attribute /*ushort*/ vec4 a_prev_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed;
attribute /*ushort*/ vec4 a_prev_offsetScaled_offsetFixed_paddingTop_paddingLeft;
attribute /*float*/ vec2 a_animationBeginTime_animationDuration; 
attribute /*ushort*/ vec4 a_animationEasing; 
attribute /*ushort*/ vec3 a_text_charId_charOffsetXY; 
attribute vec3 a_vertexInfo;
uniform float u_viewWidth;
uniform float u_viewHeight;
uniform float u_viewX;
uniform float u_viewY;
uniform float u_viewAngle;
uniform float u_viewZoom;
uniform float u_currentTime;
uniform float u_pixelRatio;
uniform sampler2D u_patternInfoTexture;
varying vec4 dn;
varying vec4 dp;
varying vec4 dq;
varying vec2 dr;
varying vec2 ds;
varying float dt;
#if D3D9_FIX
#else
varying float dy;
varying vec2 dz;
varying vec2 ea;
varying vec2 eb;
varying float ec;
varying float ed;
varying vec2 ee;
varying vec2 ef;
varying float eg;
varying float eh;
#endif
varying vec4 ei;
const float EPSILON = 0.000001;
const float INFINITY = 10000000.0;
const float PI = 3.14159265359;
const float P2_17 = 131072.0;
const float P2_16 = 65536.0;
const float P2_14 = 32768.0;
const float P2_12 = 4096.0;
const float P2_8 = 256.0;
const float P2_7 = 128.0;
const float P2_6 = 64.0;
const float P2_5 = 32.0;
const float P2_4 = 16.0;
const float P2_3 = 8.0;
const float P2_2 = 4.0;
const float P2_1 = 2.0;
const float MAX_PROGRESS = 1.0;
uniform float BYTES_TO_COORD;
uniform float BYTES_TO_SCALED_SIZE;
uniform float BYTES_TO_MIN_VISIBLE_SIZE;
uniform float BYTES_TO_SYMBOLIC_SIZE;
uniform float BYTES_TO_CURVATURE;
uniform float BYTES_TO_DASH_LENGTH;
uniform float BYTES_TO_GAP_LENGTH;
uniform float BYTES_TO_PATTERN_SCALE;
uniform float PATTERN_POSITION_UNIT_SIZE;
uniform float PATTERN_INFO_TEXTURE_SIZE;
uniform float PATTERN_NEAREST_TEXTURE_SIZE;
uniform float PATTERN_LINEAR_TEXTURE_SIZE;
uniform float PATTERN_LINEAR_SDF_TEXTURE_SIZE;
uniform float PATTERN_MIPMAP_TEXTURE_SIZE;
uniform float ROUNDED_BOX_RADIUS;
const float BYTES_TO_OFFSET_ANGLE = 0.0;
const float BYTES_TO_COLOR = 0.0;
const float SDF_FONT_SIZE = 0.0;
const float SDF_GAMMA = 0.0;
const float CURVATURE_RATIO = 0.0;
const float PATTERN_PADDING = 0.0;
const float TEXT_WIDTH_MULTIPLIER = 0.0;
const float TEXT_HEIGHT_MULTIPLIER = 0.0;
const float SELF_LOOP_CURVATURE_RATIO = 0.0;
const float EDGE_ARROW_SIZE_RATIO = 0.0;
const float EDGE_MIN_TIP_SIZE = 0.0;
const float CURVE_SUBDIVISIONS = 0.0;
const float PIECE_NODE_COMPONENT = 0.0;
const float PIECE_TEXT_BOX = 0.0;
const float PIECE_EDGE_BODY = 0.0;
const float PIECE_EDGE_HEAD = 0.0;
const float PIECE_EDGE_TAIL = 0.0;
const float PIECE_EDGE_TEXT = 0.0;
const float MAX_TEXT_SIZE = 0.0;
const float BYTES_TO_TEXT_OFFSET_X = 0.0;
const float BYTES_TO_TEXT_OFFSET_Y = 0.0;
const float FILTER_NEAREST = 0.0;
const float FILTER_LINEAR = 0.0;
const float FILTER_LINEAR_SDF = 0.0;
const float FILTER_MIPMAP = 0.0;
const float SHAPE_TEXTURE_SIZE = 0.0;
const float SIMPLE_SHAPE_SAMPLING_SIZE = 0.0;
const float COMPLEX_SHAPE_SAMPLING_SIZE = 0.0;
const float SHAPE_SAMPLING_BUFFER_RATIO = 0.0;
const float MAX_SHAPES = 0.0;
const float FIRST_COMPLEX_SHAPE_ID = 0.0;
const float SELF_LOOP_TO_CIRCLE_APPROX = 0.0;
const float NB_SHAPES_BY_SIDE = SHAPE_TEXTURE_SIZE / COMPLEX_SHAPE_SAMPLING_SIZE;
const float SHAPE_FILL_PERCENT = 1.0 - SHAPE_SAMPLING_BUFFER_RATIO;
const float T_STEP_PER_CURVE_PIECE = 1.0 / CURVE_SUBDIVISIONS;
const float HEAD_TAIL_PX_ADJUST = 1.5;
const float SDF_SMOOTH_FACTOR = 2.0;
struct gk {
float gl;
float gm;
float gn;
float go;
float gp;
float gq;
float gr;
float gs;
};
struct gt {
float gu;
float gv;
float gw;
float gx;
float gy;
float gz;
float ha;
};
struct hb {
float gl;
float gm;
float gn;
float go;
float gp;
float gq;
float gr;
float gs;
float gu;
float gv;
float gw;
float gx;
float gy;
float gz;
float ha;
float hc;
float hd;
float he;
float hf;
float hg;
float hh;
float hi;
vec4 hj;
vec4 hk;
vec4 hl;
float hm;
float hn;
float ho;
float hp;
float hq;
float hr;
float hs;
float ht;
float hu;
float hv;
float hw;
float hx;
float hy;
float hz;
float ia;
float ib;
float ic;
float id;
float ie;
};
struct ig {
float ih;
vec2 ii;
vec4 hj;
vec4 hk;
float hc;
float ij;
float ik;
float gn;
float il;
vec2 im;
float io;
vec2 ip;
vec2 iq;
vec2 ir;
float is;
float it;
vec4 hl;
vec2 iu;
float iv;
float eu;
vec2 iw;
vec2 ix;
vec2 iy;
};
float iz(float cf, float ja, float jb) {
float jc = mod(cf, pow(2.0, jb));
return floor(jc / pow(2.0, ja));
}
gk jd(float cf) {
gk je;
je.gl = iz(cf, 0.0, 4.0);
je.gm = iz(cf, 4.0, 8.0);
je.gn = iz(cf, 8.0, 10.0);
je.go = iz(cf, 10.0, 12.0);
je.gp = iz(cf, 12.0, 13.0);
je.gq = iz(cf, 13.0, 14.0);
je.gr = iz(cf, 14.0, 15.0);
je.gs = iz(cf, 15.0, 16.0);
return je;
}
gt jf(float cf) {
gt je;
je.gu = iz(cf, 0.0, 8.0);
je.gv = iz(cf, 8.0, 11.0);
je.gw = iz(cf, 11.0, 12.0);
je.gx = iz(cf, 12.0, 13.0);
je.gy = iz(cf, 13.0, 14.0);
je.gz = iz(cf, 14.0, 15.0);
je.ha = iz(cf, 15.0, 16.0);
return je;
}
vec4 jg(in float cf) {
return vec4(
iz(cf, 0.0, 4.0),
iz(cf, 4.0, 8.0),
iz(cf, 8.0, 12.0),
iz(cf, 12.0, 16.0)
);
}
vec2 jh(in float cf) {
return vec2(mod(cf, 256.0), floor(cf / 256.0));
}
vec2 ji(in float cf) {
float jj = floor(cf / P2_6);
float jk = cf - (jj * P2_6);
return vec2(jj, jk);
}
vec2 jl(in float cf) {
float jm = floor(cf / P2_7);
float jn = cf - (jm * P2_7);
return vec2(jm, jn);
}
vec2 jo(in vec2 jp, in float jq) {
float jr = cos(jq);
float js = sin(jq);
return vec2(jr * jp.x + js * jp.y, -js * jp.x + jr * jp.y);
}
vec4 jt(in vec4 ju) {
return floor(ju / 256.0) - 128.0;
}
vec4 jv(in vec4 ju) {
return mod(ju, 256.0) - 128.0;
}
float jw(float cf) {
return cf - 128.0;
}
vec2 jw(vec2 cf) {
return cf - 128.0;
}
vec2 jx(vec2 jy) {
return vec2(-jy.y, jy.x);
}
vec2 jz(vec2 ka, vec2 kb, vec2 kc, float t) {
float kd = 1.0 - t;
return (kd * kd * ka) + (2.0 * kd * t * kb) + (t * t * kc);
}
vec2 ke(vec2 ka, vec2 kf, vec2 kg, vec2 kc, float t) {
float kd = 1.0 - t;
float kh = kd * kd;
float ki = kh * kd;
float kj = t * t;
float kk = kj * t;
return (ki * ka) + (3.0 * kh * t * kf) + (3.0 * kd * kj * kg) + (kk * kc);
}
vec2 kl(vec2 ka, vec2 kb, vec2 kc, float t) {
float kd = (1.0 - t);
vec2 jp = (kd * kb + t * kc) - (kd * ka + t * kb);
return normalize(jp);
}
vec2 km(vec2 ka, vec2 kb, vec2 kc, float t) {
return jx(kl(ka, kb, kc, t));
}
vec2 kn(vec2 ka, vec2 kf, vec2 kg, vec2 kc, float t) {
float kd = 1.0 - t;
float kh = kd * kd;
float kj = t * t;
vec2 jp = kh * (kf - ka) + 2.0 * kd * t * (kg - kf) + kj * (kc - kg);
return normalize(jp);
}
vec2 ko(vec2 ka, vec2 kf, vec2 kg, vec2 kc, float t) {
return jx(kn(ka, kf, kg, kc, t));
}
float ld(float hh, float le, float t) {
float y = abs(hh) / CURVATURE_RATIO + EPSILON;
float hp = y * y;
float kd = t - 0.5;
float kh = kd * kd;
float lf = 1.0 / (16.0 * hp);
float lg = sqrt(kh + lf);
float lh = (0.5 / y) * sqrt(hp + 0.25);
float li = (abs(2.0 * y)) * ((kd * lg) + (0.5 * lh) + (lf * log(abs((kd + lg) / (-0.5 + lh)))));
return li * le;
}
float lj(vec2 ka, vec2 lk, vec2 ll, vec2 kc, float lm) {
vec2 iu = (ka + lk + ll) / 3.0;
vec2 ln = iu - lk;
vec2 lo = lk - ll;
float lp = dot(ln, ln);
float lq = dot(lo, lo) / 4.0;
float ma = sqrt(lp - lq) * SELF_LOOP_TO_CIRCLE_APPROX * 1.55;
return 2.0 * PI * ma * lm;
}
float mb(float cf) {
return cf - 32.0;
}
float mc(float cf) {
return cf - 512.0;
}
float md(float cf) {
return cf - P2_14;
}
void me() {
gl_Position = vec4(-10.0, -10.0, 1.0, 1.0);
}
vec4 mf(vec2 mg) {
return vec4(((vec2(mg.x, u_viewHeight - mg.y) / vec2(u_viewWidth, u_viewHeight)) * 2.0 - 1.0), 0.5, 1.0);
}
float mk(float ml, float mm) {
return step(ml - EPSILON, mm) * step(mm, ml + EPSILON);
}
bool mn(float ml, float mm) {
return abs(ml - mm) < EPSILON;
}
bool mo(float cf) {
return cf > 0.5;
}
vec2 mp(vec2 mq) {
return jo((mq - vec2(u_viewX, u_viewY)) * u_viewZoom, u_viewAngle) + vec2(u_viewWidth, u_viewHeight) / 2.0;
}
float mr(float eu) {
return max(EDGE_MIN_TIP_SIZE, eu * EDGE_ARROW_SIZE_RATIO);
}
float ms(float mt, float mu) {
return mt * BYTES_TO_SCALED_SIZE * u_viewZoom + mu;
}
float nb(float ij, float mz, float na) {
float nc = na - mz;
float a = 1.0 / nc;
float b = -mz / nc;
return ij * a + b;
}
struct nd {
vec2 ne;
vec2 nf;
};
nd ng(vec2 nh, float ma, float hh) {
nd cj;
float ni = (ma + ma / SELF_LOOP_CURVATURE_RATIO * hh) * SELF_LOOP_CURVATURE_RATIO;
float nj = -u_viewAngle + PI;
float nk = -u_viewAngle + PI / 2.0;
cj.ne = nh + vec2(cos(nj), sin(nj)) * ni;
cj.nf = nh + vec2(cos(nk), sin(nk)) * ni;
return cj;
}
float nq(vec2 nr, vec2 lk, vec2 ll, vec2 ns, float nt) {
vec2 nu = nr;
float t = 0.0;
float nv = 0.0;
float nw = lj(nr, lk, ll, ns, 1.0);
return nt / nw;
}
hb nx(
vec4 ny,
vec4 nz,
vec4 oa,
vec4 ob,
vec4 oc,
vec4 od,
vec3 oe
) {
hb a;
gk of = jd(ny.x);
gt og = jf(ny.y);
vec4 oh = jg(ny.z);
vec2 oi = jh(ny.w);
a.gl = of.gl;
a.gm = of.gm;
a.gn = of.gn;
a.go = of.go;
a.gp = of.gp;
a.gq = of.gq;
a.gr = of.gr;
a.gs = of.gs;
a.gu = og.gu;
a.gv = og.gv;
a.gw = og.gw;
a.gx = og.gx;
a.gy = og.gy;
a.gz = og.gz;
a.ha = og.ha;
a.hc = oh.x;
a.hd = oh.y;
a.he = oh.z;
a.hf = oh.w;
a.hg = oi.x;
a.hh = oi.y;
a.hi = nz.x;
a.hj = jg(nz.y);
a.hk = jg(nz.z);
a.hl = jg(nz.w);
a.hm = oa.x;
a.hn = oa.y;
a.ho = oa.z;
a.hp = oa.w;
a.hq = ob.x;
a.hr = ob.y;
a.hs = ob.z;
a.ht = ob.w;
a.hu = oc.x;
a.hv = oc.y;
a.hw = oc.z;
a.hx = oc.w;
a.hy = od.x;
a.hz = md(od.y);
a.id = md(od.z);
a.ie = md(od.w);
a.ia = oe.x;
float x = oe.y;
float y = mod(x, P2_8);
if (oe.z > 0.0) x += oe.z * P2_16;
a.ib = ((x - y) / P2_8) - P2_16;
a.ic = (y - P2_7) * BYTES_TO_TEXT_OFFSET_Y;
return a;
}
bool pp(const in hb a, out ig cj) {
float gl = a.gl;
float gm = a.gm;
float gn = a.gn * BYTES_TO_DASH_LENGTH;
float go = a.go * BYTES_TO_GAP_LENGTH;
float gp = a.gp;
float gq = a.gq;
float gr = a.gr;
float gs = a.gs;
float gu = a.gu * BYTES_TO_PATTERN_SCALE;
float gv = a.gv * BYTES_TO_OFFSET_ANGLE;
float gw = a.gw;
float gx = a.gx;
float gy = a.gy;
float gz = a.gz;
float ha = a.ha;
float hc = a.hc * BYTES_TO_COLOR;
float hd = a.hd * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float he = a.he * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float hf = a.hf * BYTES_TO_MIN_VISIBLE_SIZE - EPSILON;
float hg = a.hg * BYTES_TO_SYMBOLIC_SIZE * u_viewZoom + step(a.hg, EPSILON) * INFINITY;
float hh = jw(a.hh);
float hi = a.hi;
vec4 hj = a.hj * BYTES_TO_COLOR;
vec4 hk = a.hk * BYTES_TO_COLOR;
vec4 hl = a.hl * BYTES_TO_COLOR;
vec2 pq = vec2(a.hm, a.hn) * BYTES_TO_COORD;
vec2 pr = vec2(a.ho, a.hp) * BYTES_TO_COORD;
vec2 nr = mp(pq);
vec2 ns = mp(pr);
float ps = ms(a.hq, a.hr);
float pt = ms(a.hs, a.ht);
float pu = ms(a.hu, a.hv);
float ih = ms(a.hw, a.hx);
float on = ms(a.hy, a.hz);
vec2 pv = a_vertexInfo.xy;
vec2 pw = vec2(0.0, 0.0);
float px = ps;
float py = pt;
float pz = pt * gu;
if (gw > EPSILON) {
if (a.ia < EPSILON) return false;
pz = pu;
hi = a.ia;
ps = pz * TEXT_WIDTH_MULTIPLIER * u_pixelRatio;
pt = pz * TEXT_HEIGHT_MULTIPLIER * u_pixelRatio;
}
bool qz = abs(hh) > EPSILON && mk(gm, PIECE_EDGE_BODY) < EPSILON;
bool ra = qz && a_vertexInfo.z > EPSILON;
if (gl < EPSILON || gm < EPSILON || hg < hd || ra) {
return false;
}
ih *= step(he, hg);
float rp = 0.0;
float rq = 1.0;
float rm = 0.0;
float ro = 1.0;
float rr = 0.0;
float sb = 1.0;
float sd = 1.0;
float so = 0.0;
float sp = 0.0;
vec2 iu;
vec2 iw;
vec2 ix;
vec2 iy;
float eu;
float iv;
float tk = 0.0;
float tl = 1.0;
bool tm = mk(gm, PIECE_TEXT_BOX) > EPSILON;
if (mk(gm, PIECE_NODE_COMPONENT) > EPSILON || tm) {
iu = ceil((nr + ns) / 2.0);
if(length(pr - pq) > EPSILON){
iw = normalize(pr - pq) * vec2(1.,-1.);
}else{
iw = vec2(1.0, 0.0);
}
ix = jx(iw);
iy = ix;
eu = ps;
iv = pt;
} else {
sd = 0.0;
float uf = distance(nr, ns);
vec2 ug = normalize(ns - nr);
vec2 uh = (nr + ns) / 2.0;
vec2 ui = jx(ug);
vec2 uj = uh + (ui * uf * -hh / CURVATURE_RATIO);
if (mk(gm, PIECE_EDGE_TEXT) > 0.0
|| mk(gm, PIECE_EDGE_TEXT + PIECE_TEXT_BOX) > 0.0
) {
tm = mk(gm, PIECE_EDGE_TEXT + PIECE_TEXT_BOX) > 0.0;
float un;
float uo = ih;
ih = 0.0;
if (gs > EPSILON) {
nd kb = ng(nr, uo / 2.0, hh);
iu = ke(nr, kb.ne, kb.nf, ns, 0.5);
iw = kn(nr, kb.ne, kb.nf, ns, 0.5);
ix = jx(iw);
iy = ix;
un = lj(nr, kb.ne, kb.nf, ns, 0.5);
} else if (abs(hh) > EPSILON) {
iu = jz(nr, uj, ns, 0.5);
iw = kl(nr, uj, ns, 0.5);
ix = jx(iw);
iy = ix;
un = ld(hh, uf, 1.0);
} else {
iu = uh;
iw = ug;
ix = ui;
iy = ui;
un = uf;
}
eu = ps;
iv = pt;
if(px > un - uo && gs < EPSILON){
if(gx > EPSILON){
iw = vec2(1.0, 0.0);
ix = vec2(0.0, 1.0);
iy = vec2(0.0, 1.0);
} else {
iw = vec2(0,0);
ix = vec2(0.0, 0.0);
iy = vec2(0.0, 0.0);
}
} else {
float jq = -atan(iw.y, iw.x);
tk = jq;
gv -= jq;
if ((jq > PI / 2.0 || jq < -PI / 2.0)) {
gv += (1.0 - gs) * PI;
tl = -1.0;
iw *= -1.0;
ix *= -1.0;
iy *= -1.0;
}
}
} else {
float uz = ps;
float va = pt;
float vb = mr(pu);
float vc = gp 
* min(5. * uz, vb);
float vd = gq 
* min(5. * va, vb);
float ve = mk(gm, PIECE_EDGE_HEAD);
float vf = mk(gm, PIECE_EDGE_TAIL);
float vg = INFINITY * gs + uf - uz - va;
float vq = min(0., vg - vc - vd)/2.;
float vz = pu / 2.;
float wa =
uz > vz
? uz - sqrt(uz * uz - vz * vz)
: vz;
float wb = max( uz +
vd
+ gq * vq, 
0.) - (1. - gp) * wa;
wa =
va > vz
? va - sqrt(va * va - vz * vz)
: vz;
float wc = max( va + 
vc
+ gp * vq
, 0.) - (1. - gq) * wa;
if (ve > EPSILON || vf > EPSILON) {
vec2 wf = ve * ns + vf * nr;
float on = ve * wc + vf * wb + (HEAD_TAIL_PX_ADJUST - 0.5);
float wg = ve * vc + vf * vd;
vec2 wh;
if (gs > EPSILON) {
nd kb = ng(nr, uz, hh);
float un = lj(nr, kb.ne, kb.nf, ns, 1.0);
float nt = ve * (un - wc) + vf * wb;
float t = nq(nr, kb.ne, kb.nf, ns, nt);
wh = ke(nr, kb.ne, kb.nf, ns, t);
} else {
float un = ld(hh, uf, 1.0);
float t = (ve * (un - wc) + vf * wb) / un;
wh = jz(nr, uj, ns, t);
}
iw = normalize(wf - wh);
ix = jx(iw);
iy = ix;
iu = wf - iw * (on - wg / 2.0);
eu = wg;
iv = wg;
gn = 0.0;
go = 0.0;
} else {
float wl;
float wm;
float wn;
if (abs(hh) < EPSILON) {
iu = uh;
iw = ug;
ix = ui;
iy = ix;
eu = uf;
wl = uf;
wm = 0.0;
wn = uf;
} else {
float wp = a_vertexInfo.z;
float wq = wp * T_STEP_PER_CURVE_PIECE;
float kj = wq + T_STEP_PER_CURVE_PIECE;
if (gs < EPSILON) {
vec2 wr = jz(nr, uj, ns, wq);
vec2 ws = jz(nr, uj, ns, kj);
iu = (wr + ws) / 2.0;
iw = normalize(ws - wr);
ix = km(nr, uj, ns, wq);
iy = km(nr, uj, ns, kj);
eu = distance(wr, ws);
wl = ld(hh, uf, 1.0);
wm = ld(hh, uf, wq);
wn = ld(hh, uf, kj);
} else {
nd kb = ng(nr, uz, hh);
vec2 lk = kb.ne;
vec2 ll = kb.nf;
vec2 wr = ke(nr, lk, ll, ns, wq);
vec2 ws = ke(nr, lk, ll, ns, kj);
iu = (wr + ws) / 2.0;
iw = normalize(ws - wr);
ix = ko(nr, lk, ll, ns, wq);
iy = ko(nr, lk, ll, ns, kj);
eu = distance(wr, ws);
wl = lj(nr, lk, ll, ns, 1.0);
wm = lj(nr, lk, ll, ns, wq);
wn = lj(nr, lk, ll, ns, kj);
}
}
iv = pu;
rm = (wb - 1.0) / wl - 0.015 * gs;
ro = MAX_PROGRESS + 0.015 * gs
- (wc - HEAD_TAIL_PX_ADJUST) / wl;
rp = wm / wl;
rq = wn / wl;
rr = wl;
if (gr > 0.0 && vg > 5.0) {
float wx = (wl * iv) / (wl - wb);
float nw = wl;
float hm = wb;
float ho = wl - wc;
float a = -wx / nw;
float b = wx;
float hn = a * hm + b;
float hp = a * ho + b;
float wy = hn / (hm - ho);
float wz = -wy * ho;
iv = min(min(wz, uz), va);;
sp = wy * nw + wz + 1.0;
}
}
}
}
vec2 ip = vec2(0.0, 0.0);
vec2 iq = vec2(EPSILON, EPSILON);
vec2 ir = vec2(-EPSILON, -EPSILON);
float is = -1.0;
float it = 0.0;
bool xb = false;
vec2 xc = vec2(0,0);
vec2 xd = vec2(0,0);
vec2 xe = vec2(0,0);
if (hi > EPSILON && hg > hf) {
float xi = floor(hi / PATTERN_INFO_TEXTURE_SIZE);
float xj = hi - (xi * PATTERN_INFO_TEXTURE_SIZE);
vec4 xk = texture2D(u_patternInfoTexture, vec2(xj, xi) / 255.0) * 255.0;
vec2 xl = jl(xk.z);
vec2 xm = jl(xk.w);
is = xl.x * 2.0 + xm.x;
float xn = 0.0;
if (mn(is, FILTER_NEAREST)) { 
xn = PATTERN_NEAREST_TEXTURE_SIZE;
} else if (mn(is, FILTER_LINEAR)) { 
xn = PATTERN_LINEAR_TEXTURE_SIZE;
} else if (mn(is, FILTER_LINEAR_SDF)) { 
xn = PATTERN_LINEAR_SDF_TEXTURE_SIZE;
xb = true;
} else if (mn(is, FILTER_MIPMAP)) { 
xn = PATTERN_MIPMAP_TEXTURE_SIZE;
}
float xu = 1.0 / xn;
vec2 xv = (vec2(xl.y, xm.y) * PATTERN_POSITION_UNIT_SIZE) * xu / 2.0;
xd += (xk.xy * PATTERN_POSITION_UNIT_SIZE * xu) + xv;
xv -= PATTERN_PADDING * xu * 2.0;
vec2 xw = vec2(eu / 2.0, iv / 2.0) * xu;
vec2 xx = vec2(ih, ih) * xu;
float ya = 1.0 * u_pixelRatio;
float yb = SDF_SMOOTH_FACTOR;
if (gu > EPSILON) {
if (xb) { 
if (a.gy > EPSILON) {
yb = SDF_SMOOTH_FACTOR * u_pixelRatio / SDF_GAMMA;
xc = vec2(-a.ie,-a.id);
}
it = yb * SDF_GAMMA / pz / u_pixelRatio;
ya = SDF_FONT_SIZE / pz;
} else { 
ya = (xv.y / xw.y) / gu;
}
}
xe = (xw + xx) * ya;
xv += PATTERN_PADDING * xu;
iq = xd - xv;
ir = xd + xv;
}
if (gw > EPSILON) {
pw.y = (a.ic) * pz;
sb = 0.0;
sd = 0.0;
pw.x = a.ib * pz * BYTES_TO_TEXT_OFFSET_X;
pw = jo(pw, tk);
pw *= tl;
}
vec2 yg = vec2(cos(gv), sin(gv)) * on;
vec2 yh = iu + yg + pw;
float yi = ih * 2.0;
float yj = eu + sd * (yi + 1.0);
float yk = iv + sb * (yi + 1.0);
vec2 yl = iw * yj / 2.0;
vec2 ym = ix * yk / 2.0;
vec2 yn = iy * yk / 2.0;
float yo = (rq - rp);
float yp = pv.x / 2.0 + 0.5;
float ij = rp + yo * yp;
float io = so + (sp - so) * ij / 2.0;
float yq = step(gl, FIRST_COMPLEX_SHAPE_ID - EPSILON);
float yr = yq * SIMPLE_SHAPE_SAMPLING_SIZE + (1.0 - yq) * COMPLEX_SHAPE_SAMPLING_SIZE;
float ys = yr / COMPLEX_SHAPE_SAMPLING_SIZE;
float yt = ys * SHAPE_SAMPLING_BUFFER_RATIO / 2.0;
float yu = ys * (1.0 - SHAPE_SAMPLING_BUFFER_RATIO);
vec2 ze = vec2(
mod(gl, NB_SHAPES_BY_SIDE),
floor(gl / NB_SHAPES_BY_SIDE)
);
vec2 zh = ze + vec2(yt) +
vec2(rp * yu, 0.0);
vec2 zk = vec2(yo, 1.0) * yu;
vec2 ii = (zh + zk * (pv / 2.0 + 0.5)) / NB_SHAPES_BY_SIDE;
vec2 im = vec2(yj / yo, yk) / 2.0;
float zr = gn * pu;
float zs = go * pu;
float ik = zr + zs;
float il = (ij * rr) / ik;
ip = xd
+ xe
* (pv + xc / im * u_viewZoom);
cj.ii = ii;
float zv = float(gl == 1.);
ei = vec4(
(zh + zk * (vec2(0.5,0.5) / 2.0 + 0.5)) / NB_SHAPES_BY_SIDE,
NB_SHAPES_BY_SIDE * (1. - gw) * zv,
float(tm)
);
cj.im = im;
cj.ih = ih;
cj.hj = hj;
cj.hk = hk;
cj.hc = hc;
cj.ij = nb(ij, rm, ro);
cj.ik = ik;
cj.gn = zr;
cj.il = il;
cj.io = io;
cj.ip = ip;
cj.iq = iq;
cj.ir = ir;
cj.is = is;
cj.it = it;
cj.hl = hl;
cj.iu = yh;
cj.eu = yj + zv;
cj.iv = yk + zv;
cj.iw = iw;
cj.ix = ix;
cj.iy = iy;
return true;
}
float aad(float aae, float aaf, vec4 aag) {
float aah = clamp(((u_currentTime - aae) / aaf), 0.0, 1.0);
float r = aah;
float aai = r * r;
float aaj = aai * r;
vec4 aak = aah < 0.5 ? jt(aag) : jv(aag);
float aal = aak.x;
float aam = aak.y;
float aan = aak.z;
float aao = aak.w;
float aap = aal + aam * r + aan * aai + aao * aaj;
return aap;
}
void main() {
hb a_final = nx(
a_final_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature,
a_final_patternId_fillRGBA_strokeRGBA_patternRGBA,
a_final_x1_y1_x2_y2,
a_final_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed,
a_final_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed,
a_final_offsetScaled_offsetFixed_paddingTop_paddingLeft,
a_text_charId_charOffsetXY
);
#if ANIMATED
float aae = a_animationBeginTime_animationDuration.x;
float aaf = a_animationBeginTime_animationDuration.y;
vec4 aag = a_animationEasing;
float po = aad(aae, aaf, aag);
hb a_prev = nx(
a_prev_shapeInfo_miscInfo_opacityAndAllMinVisibleSizes_symbolicSizeAndCurvature,
a_prev_patternId_fillRGBA_strokeRGBA_patternRGBA,
a_prev_x1_y1_x2_y2,
a_prev_rectWidthOrSourceRadiusScaled_rectWidthOrSourceRadiusFixed_rectHeightOrTargetRadiusScaled_rectHeightOrTargetRadiusFixed,
a_prev_thicknessOrFontSizeScaled_thicknessOrFontSizeFixed_strokeWidthScaled_strokeWidthFixed,
a_prev_offsetScaled_offsetFixed_paddingTop_paddingLeft,
a_text_charId_charOffsetXY
);
const float ONE = 1.0;
a_final.gl = mix(a_prev.gl, a_final.gl, ONE);
a_final.gn = mix(a_prev.gn, a_final.gn, po);
a_final.go = mix(a_prev.go, a_final.go, po);
a_final.gp = mix(a_prev.gp, a_final.gp, ONE);
a_final.gq = mix(a_prev.gq, a_final.gq, ONE);
a_final.gm = mix(a_prev.gm, a_final.gm, ONE);
a_final.gu = mix(a_prev.gu, a_final.gu, ONE);
a_final.gw = mix(a_prev.gw, a_final.gw, ONE);
a_final.gx = mix(a_prev.gx, a_final.gx, ONE);
a_final.gy = mix(a_prev.gy, a_final.gy, ONE);
a_final.gz = mix(a_prev.gz, a_final.gz, ONE);
a_final.gs = mix(a_prev.gs, a_final.gs, ONE);
a_final.gv = mix(a_prev.gv, a_final.gv, po);
a_final.hc = mix(a_prev.hc, a_final.hc, po);
a_final.hd = mix(a_prev.hd, a_final.hd, po);
a_final.he = mix(a_prev.he, a_final.he, po);
a_final.hf = mix(a_prev.hf, a_final.hf, po);
a_final.hg =mix(a_prev.hg, a_final.hg, po);
a_final.hh = mix(a_prev.hh, a_final.hh, po);
a_final.hi = mix(a_prev.hi, a_final.hi, ONE);
a_final.hj = mix(a_prev.hj, a_final.hj, po);
a_final.hk = mix(a_prev.hk, a_final.hk, po);
a_final.hl = mix(a_prev.hl, a_final.hl, po);
a_final.hm = mix(a_prev.hm, a_final.hm, po);
a_final.hn = mix(a_prev.hn, a_final.hn, po);
a_final.ho = mix(a_prev.ho, a_final.ho, po);
a_final.hp = mix(a_prev.hp, a_final.hp, po);
a_final.hq = mix(a_prev.hq, a_final.hq, po);
a_final.hr = mix(a_prev.hr, a_final.hr, po);
a_final.hs = mix(a_prev.hs, a_final.hs, po);
a_final.ht = mix(a_prev.ht, a_final.ht, po);
a_final.hu = mix(a_prev.hu, a_final.hu, po);
a_final.hv = mix(a_prev.hv, a_final.hv, po);
a_final.hw = mix(a_prev.hw, a_final.hw, po);
a_final.hx = mix(a_prev.hx, a_final.hx, po);
a_final.hy = mix(a_prev.hy, a_final.hy, po);
a_final.hz = mix(a_prev.hz, a_final.hz, po);
a_final.ia = mix(a_prev.ia, a_final.ia, ONE);
a_final.ib = mix(a_prev.ib, a_final.ib, ONE);
a_final.ic = mix(a_prev.ic, a_final.ic, ONE);
#endif
ig cj;
bool aau = pp(a_final, cj);
if (!aau) {
me();
return;
}
vec2 pv = a_vertexInfo.xy;
dn = cj.hj;
dp = cj.hk;
dq = cj.hl;
dr = cj.ii;
ds = cj.ip;
#if D3D9_FIX
#else
dy = cj.ih;
dz = cj.iq;
ea = cj.ir;
eb = vec2(cj.hc, cj.io);
ec = cj.ij;
ed = cj.ik;
ee = vec2(cj.gn, cj.il);
ef = cj.im;
eg = cj.it;
eh = cj.is;
#endif
float aaz = step(pv.x, 0.0);
float aba = 1.0 - aaz;
dt = min(cj.iv, ROUNDED_BOX_RADIUS * 2.) * u_pixelRatio;
vec2 mg = cj.iu
+ cj.iw * (cj.eu / 2.0) * pv.x
+ (aaz * cj.ix + aba * cj.iy) * cj.iv / 2.0 * pv.y;
dq = dq * (1. - ei.w)
+ vec4(
pv.x * cj.eu,
pv.y * cj.iv,
cj.eu,
cj.iv
) * u_pixelRatio * ei.w;
gl_Position = mf(mg);
}
`,hd=1e20,$8=class{constructor({fontSize:e=24,buffer:t=8,radius:n=6,cutoff:r=.25}={}){this._maxDimension=1,this._gridSize=1,this._fontSize=e,this._buffer=t,this._radius=n,this._cutoff=r,this._height=Math.ceil(this._fontSize+2*this._buffer*pp),this._canvas=Wn(),this._canvas.height=this._height,this._canvas.width=1;const i=this._canvas.getContext("2d",{willReadFrequently:!0});this._ctx=i,i.textBaseline="middle",i.textAlign="center",i.fillStyle="black"}setOptions({fontSize:e=24,buffer:t=8,cutoff:n=.25,radius:r=6}){this._fontSize=e,this._buffer=t,this._cutoff=n,this._radius=r,this._height=Math.ceil(this._fontSize+2*this._buffer*pp)}draw(e,t,n){Eo(this._ctx,t,this._fontSize,n);const r=G8(this._ctx.measureText(e).width+2*this._buffer)-2*bo,i=this._height,s=r*i,o=Math.max(r,i);this._canvas.width<r&&(this._canvas.width=r,Eo(this._ctx,t,this._fontSize,n),this._ctx.textAlign="center",this._ctx.textBaseline="middle",this._ctx.fillStyle="black"),s>this._gridSize&&(this._gridOuter=new Float64Array(s),this._gridInner=new Float64Array(s),this._gridSize=s),o>this._maxDimension&&(this._f=new Float64Array(o),this._d=new Float64Array(o),this._z=new Float64Array(o+1),this._v=new Int16Array(o),this._maxDimension=o),this._ctx.clearRect(0,0,r,i),this._ctx.fillText(e,r/2,i/2);const a=this._ctx.getImageData(0,0,r,i),l=new Uint8ClampedArray(s);for(let c=0;c<s;c++){const d=a.data[4*c+3]/255;this._gridOuter[c]=d===1?0:d===0?hd:Math.pow(Math.max(0,.5-d),2),this._gridInner[c]=d===1?hd:d===0?0:Math.pow(Math.max(0,d-.5),2)}g2(this._gridOuter,r,i,this._f,this._d,this._v,this._z),g2(this._gridInner,r,i,this._f,this._d,this._v,this._z);for(let c=0;c<s;c++){const d=this._gridOuter[c]-this._gridInner[c];l[c]=Math.max(0,Math.min(255,Math.round(255-255*(d/this._radius+this._cutoff))))}return{height:i,width:r,distance:l}}};function g2(e,t,n,r,i,s,o){for(let a=0;a<t;a++){for(let l=0;l<n;l++)r[l]=e[l*t+a];p2(r,i,s,o,n);for(let l=0;l<n;l++)e[l*t+a]=i[l]}for(let a=0;a<n;a++){for(let l=0;l<t;l++)r[l]=e[a*t+l];p2(r,i,s,o,t);for(let l=0;l<t;l++)e[a*t+l]=Math.sqrt(i[l])}}function p2(e,t,n,r,i){n[0]=0,r[0]=-hd,r[1]=+hd;for(let s=1,o=0;s<i;s++){let a=(e[s]+s*s-(e[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);for(;a<=r[o];)o--,a=(e[s]+s*s-(e[n[o]]+n[o]*n[o]))/(2*s-2*n[o]);o++,n[o]=s,r[o]=a,r[o+1]=+hd}for(let s=0,o=0;s<i;s++){for(;r[o+1]<s;)o++;t[s]=(s-n[o])*(s-n[o])+e[n[o]]}}function G8(e){return Math.ceil((e+2*bo)/nr)*nr}var dh=256,V8=.275,H8=.25,W8=6,X8=l6-2*bo,Y8=a6-2*bo,m2={fontSize:Hd,cutoff:V8,radius:W8},q8={fontSize:Hd,cutoff:H8,radius:8},Z8=class{constructor(e,t){this._patternIdToInfoTexture=new Uint8Array(dh*dh*4),this._glTextures=[],this._textureSizes=[],this._pixelRatio=1,this._gl=e,this._glUnit=t;const n=Wn(wi,wi),r=n.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("Pattern: could not get 2d context");this._imageCanvasContext=r,this._imageCanvas=n,this._canvasForDuplicatedImage,this._sdfGenerator=new $8(m2),this._maxTextureSize=Math.min(4096,e.getParameter(e.MAX_TEXTURE_SIZE))}refresh(e){this._pixelRatio=e.getPixelRatio();const t=this._gl,n=this._getPatternsByFilter(e.getPatternList());for(let s=0;s<n.length;++s){const o=s,a=n[s],l=E8(a,this._maxTextureSize),{texture:c,size:d}=TP(o,a,l,this._maxTextureSize,this._patternIdToInfoTexture),u=this._glTextures[o]||(this._glTextures[o]=t.createTexture()),h=o===hl?ib:wy;l2(t,u,this._glUnit+1+o,c,d,o,h),this._textureSizes[o]=d}const r=this._glTextureInfo||(this._glTextureInfo=t.createTexture()),i=this._patternIdToInfoTexture;l2(t,r,this._glUnit,i,dh,hl,wy)}bindMetaDataTexture(){const e=this._gl;e.activeTexture(e.TEXTURE0+this._glUnit),e.bindTexture(e.TEXTURE_2D,this._glTextureInfo)}getInfoTextureUnit(){return this._glUnit}getNearestTextureUnit(){return this._glUnit+1+hl}getLinearTextureUnit(){return this._glUnit+1+dd}getLinearSdfTextureUnit(){return this._glUnit+1+ud}getMipmapTextureUnit(){return this._glUnit+1+Oo}getInfoTextureSize(){return dh}getNearestTextureSize(){return this._textureSizes[hl]}getLinearTextureSize(){return this._textureSizes[dd]}getLinearSdfTextureSize(){return this._textureSizes[ud]}getMipmapTextureSize(){return this._textureSizes[Oo]}_getPatternsByFilter(e){const t=new Array(s2);for(let n=0;n<s2;++n)t[n]=[];for(let n=0;n<e.length;++n){const r=this._getPatternPixels(e[n]);t[r.filter].push(r)}return t}_getPatternPixels({id:e,type:t,attributes:n}){let r;const{text:i,font:s,style:o,image:a,scaled:l,duplicated:c,colorArray:d}=n;switch(t){case fo:r=c?this._getDuplicatedImagePixels(a):l?this._getScaledImagePixels(a):this._getNonScaledImagePixels(a);break;case Yo:r=this._getSdfTextPixels(i,s,o);break;case ia:r=this._getIconPixels(i,s,o);break;case sa:r=this._getBadgeIconPixels(i,s,o);break;case bu:r=this._getPieChartPixels(d);break;default:throw new Error(`pattern type "${t}" does not exist`)}return r.id=e,r}_getScaledImagePixels(e){let t=e.width,n=e.height;if(t>0){const r=wi/Math.max(e.width,e.height);t*=r,n*=r}return t&&n&&(t=Ul(t),n=Ul(n)),t-=2*bo,n-=2*bo,this._getImagePixels(e,t,n)}_getNonScaledImagePixels(e){return this._getImagePixels(e,e.width,e.height)}_getDuplicatedImagePixels(e){if(e.width===0||e.height===0)return this._getImagePixels(e,0,0);this._canvasForDuplicatedImage||(this._canvasForDuplicatedImage=Wn(wi,wi));const t=this._canvasForDuplicatedImage,n=t.getContext("2d"),r=e.width,i=e.height;let s=(wi-r)/2,o=(wi-i)/2;for(;s>0;)s-=r;for(;o>0;)o-=i;for(let a=s;a<wi;a+=r)for(let l=o;l<wi;l+=i)n.drawImage(e,a,l);return this._getImagePixels(t,wi,wi)}_getImagePixels(e,t,n){let r;if(t===0||n===0)r=new Uint8Array(0);else{(this._imageCanvas.width<t||this._imageCanvas.height<n)&&(this._imageCanvas.width=t,this._imageCanvas.height=n);const i=this._imageCanvasContext;yy(this._imageCanvas,i,t,n);try{i.drawImage(e,0,0,t,n)}catch{}r=i.getImageData(0,0,t,n).data}return{width:t,height:n,pixels:r,filter:Oo}}_getPieChartPixels(e){const t=Y8,n=this._imageCanvasContext,r=t/2,i=t/2;return yy(this._imageCanvas,n,t,t),n.save(),n.rect(0,0,t,t),n.clip(),LP(n,e,r,i,t),n.restore(),{width:t,height:t,pixels:n.getImageData(0,0,t,t).data,filter:dd}}_getTextPixels(e,t,n,r,i,s){const o=this._imageCanvasContext,a=i*this._pixelRatio;Eo(o,n,a,r);let l=Math.ceil(o.measureText(t).width);l===0&&(l=a);let c=0,d=0;e===Oo||(c=2*Math.ceil(a*pp/2),d=2*Math.ceil(l*GI/2));const u=Math.ceil(l+d),h=Math.ceil(a+c),g=this._imageCanvas.height<h||this._imageCanvas.width<u;return this._imageCanvas.height<h&&(this._imageCanvas.height=h),this._imageCanvas.width<u&&(this._imageCanvas.width=u),g&&Eo(o,n,a,r),o.clearRect(0,0,u,h),o.fillStyle="black",o.textBaseline="middle",o.textAlign="left",o.fillText(t,s+d/2,h/2),{width:u,height:h,pixels:o.getImageData(0,0,u,h).data,filter:e}}_getIconPixels(e,t,n){return this._getTextPixels(Oo,e,t,n,X8,0)}_getBadgeIconPixels(e,t,n){return this._sdfGenerator.setOptions(q8),this._getSdfPixels(e,t,n)}_getSdfTextPixels(e,t,n){return this._sdfGenerator.setOptions(m2),this._getSdfPixels(e,t,n)}_getSdfPixels(e,t,n){const{width:r,height:i,distance:s}=this._sdfGenerator.draw(e,t,n),o=new Uint8Array(r*i*4);for(let a=0;a<s.length;++a)o[4*a+3]=s[a];return{width:r,height:i,pixels:o,filter:ud}}},J8=class{constructor(e,t){this._gl=e,this._glTextureUnit=t,this._simpleShapePixels=new Uint8Array(dg*dg*4),this._complexShapePixels=new Uint8Array(Ys*Ys*4),this._shapesWritten=[]}refresh(e){const t=e.getShapeList();for(const n of t)if(!this._shapesWritten.includes(n.id)){const r=n.isSimple?dg:Ys,i=n.isSimple?this._simpleShapePixels:this._complexShapePixels;S8(n,r,hy,i),this._loadShapeInGpu(n.id,r,i),this._shapesWritten.push(n.id)}}_loadShapeInGpu(e,t,n){const r=this._gl,i=py,s=e%gy*Ys,o=Math.floor(e/gy)*Ys;if(this._texture)r.bindTexture(r.TEXTURE_2D,this._texture);else{const a=new Uint8Array(i*i*4);this._texture=r.createTexture(),r.activeTexture(r.TEXTURE0+this._glTextureUnit),r.bindTexture(r.TEXTURE_2D,this._texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,i,i,0,r.RGBA,r.UNSIGNED_BYTE,a)}r.texSubImage2D(r.TEXTURE_2D,0,s,o,t,t,r.RGBA,r.UNSIGNED_BYTE,n)}getTextureSize(){return py}getSamplingSize(){return Ys}getBufferRatio(){return hy}getTextureUnit(){return this._glTextureUnit}},f2=class{constructor(e,{vertex:t,fragment:n,constants:r,macros:i}){this._state=0,this._gl=e,this._vertexSource=t,this._fragmentSource=n,this._constants=un(r||{}),this._macros=un(i||{})}setConstant(e,t){this._constants[e]=t}setMacro(e,t){this._macros[e]=t}getState(){return this._state}getProgram(){return this._program}compile(){const e=this._gl,t=_2(this._vertexSource,this._macros,this._constants),n=_2(this._fragmentSource,this._macros,this._constants);this._program&&(e.deleteProgram(this._program),e.deleteShader(this._vertexShader),e.deleteShader(this._fragmentShader));const r=e.createProgram(),i=e.createShader(e.VERTEX_SHADER),s=e.createShader(e.FRAGMENT_SHADER);if(!(r&&i&&s))throw new Error("Error instantiating WebGL program");this._program=r,this._vertexShader=i,this._fragmentShader=s,e.shaderSource(this._vertexShader,t),e.compileShader(this._vertexShader),e.attachShader(this._program,this._vertexShader),e.shaderSource(this._fragmentShader,n),e.compileShader(this._fragmentShader),e.attachShader(this._program,this._fragmentShader),e.linkProgram(this._program),this._state=1}getError(){const e=this._gl;if(!e.getShaderParameter(this._vertexShader,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(this._vertexShader)||"";let n=t;const r=t.match(/ERROR: (\d+):(\d+):(.*)\n/g);if(r&&r.length){const i=this._vertexSource.split(`
`);n=r.map(s=>{const o=s.match(/ERROR: (\d+):(\d+):(.*)\n/);if(!o)return s;const[a,l]=o.slice(2);return`${i[+a]}
${i[+a+1]}
~~~~~~~~~~~
${i[+a+2]}
 -> ${l}`}).join(`
`)}return{step:"vertex",message:n}}return e.getShaderParameter(this._fragmentShader,e.COMPILE_STATUS)?e.getProgramParameter(this._program,e.LINK_STATUS)?(this._state=2,null):{step:"link",message:e.getProgramInfoLog(this._program)||""}:{step:"fragment",message:e.getShaderInfoLog(this._fragmentShader)||""}}};function _2(e,t,n){const r=Object.keys(t),i=Object.keys(n);for(let s=0;s<r.length;++s){const o=r[s],a=t[o];e=e.replace(`#define ${o} 0`,`#define ${o} ${a}`)}for(let s=0;s<i.length;++s){const o=i[s],a=n[o],l=a+(a%1==0?".0":"");e=e.replace(`const float ${o} = 0.0;`,`const float ${o} = ${l};`)}return e}function Q8(){return typeof window<"u"&&!!window.FORCE_WEBGL}/** @preserve instance id */var y2=dP(),K8={stencil:!0,antialias:!1,alpha:!0,premultipliedAlpha:!0,failIfMajorPerformanceCaveat:!Q8()},eU=0,tU=1,nU={NO_WEBGL:'Unable to create a WebGL context: `canvas.getContext("webgl")` and `canvas.getContext("experimental-webgl")` returned `null`',NO_ANGLE_INSTANCED_ARRAYS:'WebGL extension "ANGLE_instanced_arrays" unavailable: `gl.getExtension("ANGLE_instanced_arrays")` returned `null`'},PP=class extends Error{};function e0(e,t){if(!e&&t){const n=new PP(nU[t]);throw n.code=t,n}}var rU=class MP extends bs{constructor(t){super(t),this._2dcanvas=Wn(),this._ctx=this._2dcanvas.getContext("2d"),this._bufferDrawers=[],this._mustResize=!1,this._error=null,this._onContextLost=l=>{l.preventDefault(),this._error=new PP("WebGL context lost"),this.fire("error",this._error)};const n=MP.createInitData(),{canvas:r,gl:i,ext:s,staticProgramWrapper:o,animationProgramWrapper:a}=n;e0(i,"NO_WEBGL"),e0(s,"NO_ANGLE_INSTANCED_ARRAYS"),this._glCanvas=r,this._gl=i,this._ext=s,this._staticProgramWrapper=o,this._animationProgramWrapper=a,this._shapeTexture=new J8(this._gl,eU),this._patternTexture=new Z8(this._gl,tU),this._initCanvas(this._glCanvas),this._computeShaderInfo(),this._initSpecialGlBuffers(),this._initGlPrograms(),this._initGl()}_initCanvas(t){super._initCanvas(t),t.addEventListener("webglcontextlost",this._onContextLost,!1)}static isAvailable(){return y2||e0(null,"NO_WEBGL"),y2}static createInitData(){const t=Wn(),n=Zx(t,K8,"webgl"),r=n&&typeof n.getExtension=="function"?n.getExtension("ANGLE_instanced_arrays"):null,i=oU(),s=new f2(n,{vertex:Kf,fragment:Qf,constants:i,macros:{ANIMATED:0}}),o=new f2(n,{vertex:Kf,fragment:Qf,constants:i,macros:{ANIMATED:1}});return n&&r&&(s.compile(),n.flush()),{canvas:t,gl:n,ext:r,staticProgramWrapper:s,animationProgramWrapper:o}}static getName(){return"WebGL"}_beforeFirstFrame(){this._animationProgramWrapper.getState()===0&&this._animationProgramWrapper.compile()}ensureAnimationsReady(){const t=this._animationProgramWrapper.getState();t!==2&&(t===0&&this._animationProgramWrapper.compile(),this._animationProgramWrapper.getError())}getDomElement(){return this._glCanvas}_initGl(){const t=this._gl;t.clearColor(0,0,0,0),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}_computeShaderInfo(){this._shaderMetadata=iU(Kf,Qf)}_initGlPrograms(){this._staticProgram=new h2({gl:this._gl,ext:this._ext,specialGlBuffers:this._specialGlBuffers,metaData:this._shaderMetadata,programWrapper:this._staticProgramWrapper}),this._animationProgram=new h2({gl:this._gl,ext:this._ext,specialGlBuffers:this._specialGlBuffers,metaData:this._shaderMetadata,programWrapper:this._animationProgramWrapper})}_initSpecialGlBuffers(){const t=this._gl,n=t.createBuffer(),r=new Int8Array(18*pr);for(let i=0;i<pr;++i){const s=[-1,-1,i,1,-1,i,1,1,i,-1,-1,i,-1,1,i,1,1,i],o=i*s.length;for(let a=0;a<s.length;a++)r[a+o]=s[a]}t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),this._specialGlBuffers={vertexInfo:n}}_computeUniforms(){return{viewWidth:this._width,viewHeight:this._height,viewX:this._viewX,viewY:this._viewY,viewZoom:this._viewZoom,viewAngle:this._viewAngle,currentTime:this._currentTime,pixelRatio:this._pixelRatio,backgroundColor:this._backgroundRgba,patternInfoTexture:this._patternTexture.getInfoTextureUnit(),patternNearestTexture:this._patternTexture.getNearestTextureUnit(),patternLinearTexture:this._patternTexture.getLinearTextureUnit(),patternLinearSdfTexture:this._patternTexture.getLinearSdfTextureUnit(),patternMipmapTexture:this._patternTexture.getMipmapTextureUnit(),shapeTexture:this._shapeTexture.getTextureUnit(),BYTES_TO_COORD:this._scales.bytesToActualCoord,BYTES_TO_SCALED_SIZE:this._scales.bytesToActualScaledSize,BYTES_TO_MIN_VISIBLE_SIZE:this._scales.bytesToActualMinVisibleSize,BYTES_TO_SYMBOLIC_SIZE:this._scales.bytesToActualSymbolicSize,BYTES_TO_DASH_LENGTH:this._scales.bytesToActualDashLength,BYTES_TO_GAP_LENGTH:this._scales.bytesToActualGapLength,BYTES_TO_PATTERN_SCALE:this._scales.bytesToActualPatternScale,PATTERN_INFO_TEXTURE_SIZE:this._patternTexture.getInfoTextureSize(),PATTERN_NEAREST_TEXTURE_SIZE:this._patternTexture.getNearestTextureSize(),PATTERN_LINEAR_TEXTURE_SIZE:this._patternTexture.getLinearTextureSize(),PATTERN_LINEAR_SDF_TEXTURE_SIZE:this._patternTexture.getLinearSdfTextureSize(),PATTERN_MIPMAP_TEXTURE_SIZE:this._patternTexture.getMipmapTextureSize(),PATTERN_POSITION_UNIT_SIZE:nr,ROUNDED_BOX_RADIUS:this._textManager.getCornerRadius(),SHAPE_TEXTURE_SIZE:this._shapeTexture.getTextureSize(),SHAPE_SAMPLING_SIZE:this._shapeTexture.getSamplingSize(),SHAPE_SAMPLING_BUFFER_RATIO:this._shapeTexture.getBufferRatio(),NB_SHAPES_BY_SIDE:this._shapeTexture.getTextureSize()/this._shapeTexture.getSamplingSize(),SHAPE_DIMENSIONS:this._shapeTexture.getSamplingSize()/this._shapeTexture.getTextureSize(),SHAPE_ACTUAL_RATIO:1-this._shapeTexture.getBufferRatio()}}_render({shapesChanged:t,patternsChanged:n,dimensionsChanged:r,backgroundColorChanged:i}){const s=this._gl;if(this._error)throw this._error;if(t&&(this._shapeTexture.refresh(this._shapeManager),this._patternTexture.bindMetaDataTexture()),n&&this._patternTexture.refresh(this._patternManager),r&&(this._mustResize=!0),i){const[l,c,d,u]=this._renderBackground?this._backgroundRgba:[0,0,0,0];s.clearColor(l*u,c*u,d*u,u)}const o=this._computeUniforms(),a=this._getSortedBufferList();this._mustResize&&a.length&&(tp(this._glCanvas,this._width,this._height,this._pixelRatio),s.viewport(0,0,this._width*this._pixelRatio,this._height*this._pixelRatio),this._mustResize=!1),s.clear(s.COLOR_BUFFER_BIT|s.STENCIL_BUFFER_BIT);for(let l=0;l<a.length;++l)this._displayBuffer(a[l],o);this._endFrame()}_displayBuffer(t,n){const r=t.getProgram();r!==this._currentProgram&&(this._currentProgram&&this._currentProgram.endPass(),this._currentProgram=r,this._currentProgram.startPass(n)),t.markAsUsed(),t.draw()}_getSortedBufferList(){const t=this._bufferList.getBuffersByAscendingDepth(),n=[];for(let r=0;r<this._bufferDrawers.length;++r){const i=this._bufferDrawers[r];i&&i.markAsUnused()}for(let r=0;r<t.length;++r){const i=t[r],s=this._getBufferDrawer(i);s.markAsUsed(),!i.isEmpty()&&this._isBufferDisplayable(i)&&n.push(s)}for(let r=0;r<this._bufferDrawers.length;++r){const i=this._bufferDrawers[r];i&&!i.isUsed()&&(i.destroy(),this._bufferDrawers[r]=void 0)}return n}_endFrame(){this._currentProgram&&(this._currentProgram.endPass(),this._currentProgram=null)}_getBufferDrawer(t){const n=t.getId();let r=this._bufferDrawers[n];if(!r){for(;this._bufferDrawers.length<=n;)this._bufferDrawers.push(void 0);r=new R8({gl:this._gl,ext:this._ext,staticProgram:this._staticProgram,animationProgram:this._animationProgram}),this._bufferDrawers[n]=r}return r.setDataBuffer(t),r}destroy(){this._glCanvas&&this._glCanvas.removeEventListener("webglcontextlost",this._onContextLost);const t=this._gl.getExtension("WEBGL_lose_context");t&&t.loseContext()}getImageData(){const t=this._glCanvas.width,n=this._glCanvas.height;return(this._2dcanvas.width<t||this._2dcanvas.height<n)&&(this._2dcanvas.width=t,this._2dcanvas.height=n),this._ctx.clearRect(0,0,t,n),this._ctx.drawImage(this._glCanvas,0,0),this._ctx.getImageData(0,0,t,n)}_getImageDataFlippedYAxis(){const t=this._gl,n=this._glCanvas.width,r=this._glCanvas.height,i=this._ctx.createImageData(n,r),s=new Uint8Array(i.data.buffer);return t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,s),i}setConstant(t,n){this._staticProgramWrapper.setConstant(t,n),this._animationProgramWrapper.setConstant(t,n),this._staticProgramWrapper.compile(),this._animationProgramWrapper.compile(),this._initGlPrograms(),this._bufferDrawers.forEach(r=>{r==null||r.destroy()}),this._bufferDrawers=[]}};function iU(e,t){const n={vertexInfoAttribute:"a_vertexInfo",attributes:[],uniforms:[]};return v2(n,e),v2(n,t),n}var sU={float:1,vec2:2,vec3:3,vec4:4};function v2(e,t){const n=/(?:attribute\s+\/\*\s*(byte|ubyte|short|ushort|float)\s*\*\/\s*(float|vec2|vec3|vec4)\s+(\w+)\s*;)|(?:#if\s*(\w+))|(?:#endif)/g,r=/uniform\s+(float|vec2|vec3|vec4|sampler2D|int)\s+(\w+)\s*;/g,i=[];let s=n.exec(t);for(;s;){const o=s[0];o==="#endif"?i.pop():o.startsWith("#if")?i.push(s[4]):e.attributes.push({name:s[3],size:sU[s[2]],type:s[1],tags:i.slice(),location:null,byteSize:0,glType:null}),s=n.exec(t)}for(s=r.exec(t);s;){if(!e.uniforms.some(({id:o})=>o===s[1])){const o=s[1],a=s[2],l=a.replace("u_","");e.uniforms.push({id:l,name:a,type:o})}s=r.exec(t)}}function oU(){return{BYTES_TO_OFFSET_ANGLE:2*Math.PI/8,BYTES_TO_COLOR:1/15,SDF_FONT_SIZE:Hd,CURVATURE_RATIO:km,PATTERN_PADDING:bo,TEXT_WIDTH_MULTIPLIER:GI,TEXT_HEIGHT_MULTIPLIER:pp,SELF_LOOP_CURVATURE_RATIO:mp,EDGE_ARROW_SIZE_RATIO:bs.edgeArrowSizeRatio,EDGE_MIN_TIP_SIZE:bs.minEdgeTipSize,CURVE_SUBDIVISIONS:pr,PIECE_NODE_COMPONENT:_i,PIECE_TEXT_BOX:qo,PIECE_EDGE_BODY:Cm,PIECE_EDGE_HEAD:Gx,PIECE_EDGE_TAIL:Vx,PIECE_EDGE_TEXT:zo,MAX_TEXT_SIZE:Q6,BYTES_TO_TEXT_OFFSET_X:1/fP,BYTES_TO_TEXT_OFFSET_Y:1/vy,FILTER_NEAREST:hl,FILTER_LINEAR:dd,FILTER_LINEAR_SDF:ud,FILTER_MIPMAP:Oo,SHAPE_TEXTURE_SIZE:py,SIMPLE_SHAPE_SAMPLING_SIZE:dg,COMPLEX_SHAPE_SAMPLING_SIZE:Ys,SHAPE_SAMPLING_BUFFER_RATIO:hy,MAX_SHAPES:gp.toString(),FIRST_COMPLEX_SHAPE_ID:uy,SELF_LOOP_TO_CIRCLE_APPROX:WI,SDF_GAMMA:u6}}var aU={x:0,y:0,zoom:1,angle:0,width:80,height:60,pixelRatio:1,backgroundColor:null,currentTime:0,isBufferDisplayable:Ix,hideImages:!1,renderBackground:!1},uh={webgl:rU,canvas:C8,svg:M8},x2=[0,0,0,0],t0={webgl:null,svg:null,canvas:null},n0=class extends xu{constructor(e){super(),this._view=un(aU),this._domWrapper=Ts?document.createElement("div"):ep(),this._domElement=this._domWrapper.appendChild(Ts?document.createElement("div"):ep()),this._currentElementSize=0,this._currentBlockOffset=0,this._currentByteOffset=0,this._blockIdToAddress=new Uint32Array(0),this._renderersByType={},this._switchMainRenderer=!0,this._refreshTexts=!1,this._backgroundColor=null,this._initData=e||{},this._patternManager=new X6,this._shapeManager=new Y6,this._boundariesManager=new v6,this._textManager=new K6(this._patternManager),this._bufferOffsetToId=new ZI,this._memoryManager=new V6(this._patternManager,this._shapeManager,this._textManager,this._bufferOffsetToId,t=>this.parseColor(t)||x2),this._bufferList=new p6}static createInitData(){const e={};for(const t in uh)e[t]=uh[t].createInitData();return e}static cacheInitData(e){t0=e}static getCachedInitData(){return t0}static clearCachedInitData(){t0={webgl:null,svg:null,canvas:null}}freeBlock(e){this._checkBlockId(e);const t=this._blockIdToAddress[e],n=this._bufferList.freeBlock(t);return this._blockIdToAddress[e]=n,n}_ensureDomElementsFitParent(){const e=this._domElement.parentNode;!e||e.offsetWidth===this._view.width&&e.offsetHeight===this._view.height||ba(e,`${this._view.width}px`,`${this._view.height}px`)}_ensureCorrectBackgroundColor(){const e=this._domElement.parentNode;this._backgroundColor!==this._view.backgroundColor&&e&&(e.style.backgroundColor=this._view.backgroundColor||"",this._backgroundColor=this._view.backgroundColor)}createGroup(){return new y6}parseColor(e){return or(e)}clear(){this._blockIdToAddress.fill(0),this._patternManager.reset(),this._boundariesManager.reset(),this._textManager.reset(),this._bufferList.reset(),this._bufferOffsetToId.reset()}notifyFontsReloaded(){this._patternManager.notifyUpdate(),this._textManager.clear(),this._refreshTexts=!0}notifyPatternUpdate(){this._patternManager.notifyUpdate()}getShapePoints(e){return this._shapeManager.getDefinitionFromName(e).points}checkShapeHit(e,t,n){const{getDistanceFromStrokeVertically:r,getDistanceFromStrokeHorizontally:i}=this._shapeManager.getDefinitionFromName(e);return Math.min(r(t,n),i(t,n))>=0}setGlobalBoundaries(e){const{maxBlockId:t=0,maxScaledSize:n,maxMinVisibleSize:r,maxSymbolicSize:i,maxDashLength:s,maxGapLength:o,maxPatternScale:a}=e;return t>this._blockIdToAddress.length&&this._resizeBlockArray(t),!!this._boundariesManager.set(e)&&(this._memoryManager.resizeBoundaries(n,r,i,s,o,a),!0)}_resizeBlockArray(e){const t=new Uint32Array(e);t.set(this._blockIdToAddress),this._blockIdToAddress=t}registerShape(e,t){this._shapeManager.register(e,t)}_bindBlock(e,t,n,r,i,s,o){this._checkBlockId(e);const a=this._blockIdToAddress[e],l=this._bufferList.allocateBlock(a,t,n,r,i,s,o);return this._blockIdToAddress[e]=l.address,this._currentDataView=l.buffer.getDataView(),this._currentElementSize=l.buffer.elementSize,this._currentBlockOffset=l.offset,this._currentByteOffset=this._currentBlockOffset*this._currentElementSize,this._currentSideDataView=l.buffer.getSideDataView(),this._currentSideElementSize=l.buffer.getTotalSideElementsSize(),this._currentSideByteOffset=this._currentBlockOffset*this._currentSideElementSize,l}_setItemIndex(e){const t=this._currentBlockOffset+e;this._currentByteOffset=t*this._currentElementSize,this._currentSideByteOffset=t*this._currentSideElementSize}_checkBlockId(e){e>=this._blockIdToAddress.length&&this._resizeBlockArray(eo(e+1))}_setTextCharacters(e){this._textManager.storeTextInDataView(this._currentSideDataView,this._currentSideByteOffset,this._currentSideByteOffset+this._currentSideElementSize,e)}_storeElement(e,t){this._memoryManager.storeGenericObject(this._currentDataView,this._currentByteOffset,e.end),t&&(this._memoryManager.storeGenericObject(this._currentDataView,this._currentByteOffset+Bl,e.start),this._memoryManager.storeAnimationInformation(this._currentDataView,this._currentByteOffset+2*Bl,e.animation,Wx.getCoefficients(e.animation.easing)))}storeGroup(e,t){if(!t||t.size===0)return this.freeBlock(e);const n=t.type,r=t.depth,i=t.size,s=t.getElements(),o=t.animated,a=t.stencilUsage,l=t.getId();let c=0;if(n===ra)for(let u=0;u<i;++u){const h=s[u],{start:g,end:p}=h;if(p.pattern.type===wo){const m=p.pattern.attributes.text;c=Math.max(c,m.length)}if(o&&g.pattern.type===wo){const m=g.pattern.attributes.text;c=Math.max(c,m.length)}}const d=this._bindBlock(e,n,o,r,i,c,a);for(let u=0;u<i;++u){const h=s[u];this._setItemIndex(u),this._storeElement(h,o),this._bufferOffsetToId.set(d.buffer.getId(),d.offset+u,l)}if(n===ra)for(let u=0;u<i;++u){const h=s[u];this._setItemIndex(u),this._setTextCharacters(h.end.pattern)}return d.address}_refreshTextElements(){const e=this._bufferList.getBuffers();for(const t of e)if(t&&t.type===ra){const n=t.getSideDataView(),r=t.getTotalSideElementsSize(),i=t.getSize();let s=0,o=r;for(let a=0;a<i;++a){const l=this._textManager.extractTextFromDataView(n,s,o);this._textManager.storeTextInDataView(n,s,o,l),s=o,o+=r}t.triggerUpdate()}}extractElement(e,t=0){if(!e)return null;const n=this._bufferList.getBlockInfo(e);return this._renderer.extractElement(n.buffer,n.offset+t)}getDomElement(){return this._domElement}getDomWrapper(){return this._domWrapper}measureText(e,t,n,r=1){return this._textManager.measureText(e,t,n,r)}setRenderType(e){this._renderType!==e&&(this._renderType=e,this._switchMainRenderer=!0)}setEdgeArrowSizeRatio(e){bs.setEdgeArrowSizeRatio(e),this._renderersByType.webgl&&this._renderersByType.webgl.setConstant("EDGE_ARROW_SIZE_RATIO",e)}setEdgeMinTipSize(e){bs.setMinEdgeTipSize(e),this._renderersByType.webgl&&this._renderersByType.webgl.setConstant("EDGE_MIN_TIP_SIZE",e)}_ensureMainRendererReady(){if(this._switchMainRenderer){this._renderType===null&&(this._renderType="canvas");const e=uh[this._renderType];e&&e.isAvailable()||(this._renderType="canvas"),this._renderer=this._renderersByType[this._renderType],this._renderer||(this._renderer=this._instanciateRenderer(this._renderType),this._renderer.on("error",t=>this.fire("error",t)),this._renderersByType[this._renderType]=this._renderer),this._updateDomElement()}}_updateDomElement(){const e=this._renderer&&this._renderer.getDomElement(),t=this._domElement;for(;t&&t.firstChild;)t.removeChild(t.firstChild);e&&this._appendDomChild(e)}_appendDomChild(e){e.style.position="absolute",e.style.left="0",e.style.top="0",this._domElement.appendChild(e)}_instanciateRenderer(e){return new(e===null?bs:uh[e])({initData:e===null?null:this._initData[e],bufferList:this._bufferList,shapeManager:this._shapeManager,patternManager:this._patternManager,boundariesManager:this._boundariesManager,textManager:this._textManager,memoryManager:this._memoryManager})}setView(e){this._view=be(be({},this._view),e)}getTextManager(){return this._textManager}_updateManagers(){this._patternManager.setPixelRatio(this._view.pixelRatio),this._shapeManager.update(),this._patternManager.update(),this._textManager.update(),this._boundariesManager.update(),this._bufferList.update(),this._refreshTexts&&(this._refreshTexts=!1,this._refreshTextElements())}_resizeCanvas(e){KI(e,this._view.width,this._view.height,this._view.pixelRatio)}render(){this._ensureMainRendererReady(),this._ensureDomElementsFitParent(),this._ensureCorrectBackgroundColor(),this._updateManagers(),this._renderer.renderFrame(this._view)}ensureAnimationsReady(){this._ensureMainRendererReady(),this._renderer.ensureAnimationsReady()}export(e,t,n){const r=this._instanciateRenderer(e),i=be(be({},this._view),t);return"setViewportClipping"in r&&r.setViewportClipping(!1),this._updateManagers(),r.renderFrame(i),r.export(n).then(()=>r.getDomElement())}getCurrentTime(){return ir()}getImageData(){return this._renderer&&this._renderer.getImageData()}destroy(){for(const e of Object.keys(this._renderersByType)){const t=this._renderersByType[e];t&&t.destroy()}}transparentify(e){const t=this.parseColor(e)||x2;return`rgba(${Math.round(255*t[0])},${Math.round(255*t[1])},${Math.round(255*t[2])},0)`}initDebugRenderingLoop({triggerKey:e="r",start:t=!0}={}){let n=t;document.addEventListener("keydown",({key:i})=>{i===e&&(n=!n)});const r=i=>{(n||i)&&(this.setView({currentTime:ir()}),this.render()),window.requestAnimationFrame(()=>{r()})};window.requestAnimationFrame(()=>{document.body.appendChild(this.getDomElement()),r(!0)})}},lU=mm&&document.fonts,cU=200,r0="/qwerty/ [HELLO] ",b2="serif",dU=16,uU=class{constructor(){this._fontFaceSet=lU?document.fonts:null,this._canvas=Wn(),this._ctx=this._canvas.getContext("2d")}_measureText(e,t){return this._ctx.font=`12px ${t}`,this._ctx.measureText(e).width}check(e){if(e===b2)return!0;const t=this._measureText(r0,b2);return this._measureText(r0,e)!==t}load(e){return this._fontFaceSet&&this._fontFaceSet.load?this._fontFaceSet.load(`12px ${e}`):(this._ctx.font=`12px ${e}`,this._ctx.fillText(r0,10,50),Promise.resolve())}},hU=class{constructor(e,t){this._fontLoaderCounter=0,this._loaded=!1,this._value=null,this._timeout=0,this._fontFaceSet=e,this._fontName=t,this._loaded=!1,this._value=null,this._timeout=0,mm&&!this._fontFaceSet.check(this._fontName)||this._setLoaded()}_setLoaded(){this._loaded=!0,this._value=this._fontName}getValue(){return this._value}isLoaded(){return this._loaded}destroy(){clearTimeout(this._timeout)}load(){return this._tryLoad(cU).then(()=>{this._setLoaded()})}_tryLoad(e){return this._fontFaceSet.load(this._fontName).then(()=>{if(!this._fontFaceSet.check(this._fontName)&&this._fontLoaderCounter<dU)return new Promise(t=>{e<6e4&&(this._timeout=setTimeout(t,e))}).then(()=>(this._fontLoaderCounter++,this._tryLoad(1.5*e)))})}},gU=class{constructor(){this._fontFaceSet=new uU,this._fonts={},this._onFontLoaded=[],this._hideUntilFontsLoaded=!0}setHideUntilFontsLoaded(e){this._hideUntilFontsLoaded=e}getFont(e){let t=this._fonts[e];return t||(t=new hU(this._fontFaceSet,e),this._fonts[e]=t,t.isLoaded()||t.load().then(()=>this._triggerFontLoaded(e))),!this._hideUntilFontsLoaded&&e||t.getValue()}onFontLoaded(e){this._onFontLoaded.push(e)}destroy(){this._onFontLoaded=[],Object.keys(this._fonts).forEach(e=>this._fonts[e].destroy())}_triggerFontLoaded(e){this._onFontLoaded.forEach(t=>t(e))}};function pU(e,t,n,r){sb(e,t,n,r),e.thicknessOrFontSizeScaled=t.widthScaled,e.thicknessOrFontSizeFixed=t.widthFixed,e.strokeWidthScaled=t.stroke.widthScaled,e.strokeWidthFixed=t.stroke.widthFixed,e.offsetScaled=0,e.offsetFixed=0,e.fillColor=t.color,e.strokeColor=t.stroke.color,e.globalMinVisibleSize=t.minVisibleSize,e.strokeMinVisibleSize=t.stroke.minVisibleSize,e.offsetAngle=0,e.symbolicSize=t.widthScaled,e.dashLength=t.shape.dashLength,e.gapLength=t.shape.gapLength,e.hasHead=!!t.shape.head,e.hasTail=!!t.shape.tail,e.isBodyTriangle=t.shape.isBodyTriangle}function sb(e,t,n,r){e.pieceId=n,e.shape=r,e.x1=t.sourceX,e.y1=t.sourceY,e.x2=t.targetX,e.y2=t.targetY,e.rectWidthOrSourceRadiusScaled=t.sourceRadiusScaled,e.rectWidthOrSourceRadiusFixed=t.sourceRadiusFixed,e.rectHeightOrTargetRadiusScaled=t.targetRadiusScaled,e.rectHeightOrTargetRadiusFixed=t.targetRadiusFixed,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=0,e.offsetFixed=0,e.pattern.type=ar,e.opacity=t.opacity,e.fillColor=null,e.strokeColor=null,e.patternColor=null,e.globalMinVisibleSize=t.minVisibleSize,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=0,e.patternScale=0,e.symbolicSize=t.widthScaled,e.curvature=t.curvature,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=t.isSelfLoop,e.isText=!1}function mU(e,t,n){const r=t.widthScaled+2*t.halo.widthScaled,i=t.widthFixed+2*t.halo.widthFixed;sb(e,t,n,"line"),e.thicknessOrFontSizeScaled=r,e.thicknessOrFontSizeFixed=i,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=0,e.offsetFixed=0,e.fillColor=t.halo.color,e.strokeColor=null,e.globalMinVisibleSize=t.minVisibleSize,e.strokeMinVisibleSize=0,e.offsetAngle=0,e.symbolicSize=t.widthScaled,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isBodyTriangle=!1}function fU(e,t,n,r){sb(e,t,n,r);const i=t.widthFixed*KS+O6;e.thicknessOrFontSizeScaled=t.widthScaled*QS,e.thicknessOrFontSizeFixed=t.widthFixed*QS,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=t.widthScaled*KS,e.offsetFixed=i,e.fillColor=t.outline.color,e.strokeColor=null,e.globalMinVisibleSize=Math.max(t.minVisibleSize,t.outline.minVisibleSize),e.strokeMinVisibleSize=0,e.offsetAngle=Math.PI/2,e.symbolicSize=t.widthScaled,e.dashLength=t.shape.dashLength,e.gapLength=t.shape.gapLength,e.hasHead=!!t.shape.head,e.hasTail=!!t.shape.tail,e.isBodyTriangle=t.shape.isBodyTriangle}function _U(e,t,n){FP(e,t,n),e.pattern.type=wo,e.pattern.attributes.text=t.content,e.pattern.attributes.size=vu,e.pattern.attributes.font=t.font,e.pattern.attributes.style=t.style,e.pattern.attributes.align=t.align,e.patternColor=t.color,e.patternScale=1,e.thicknessOrFontSizeScaled=t.sizeScaled,e.thicknessOrFontSizeFixed=t.sizeFixed,e.isText=!0}function yU(e,t,n){FP(e,t,n),e.pieceId+=qo,e.fillColor=t.backgroundColor,e.shape="square"}function FP(e,t,n){const r=t.position==="centered"?0:(n.widthScaled+t.heightScaled)/2+n.stroke.widthScaled,i=t.position==="centered"?0:(n.widthFixed+t.heightFixed)/2+n.stroke.widthFixed+t.padding+t.margin;if(e.pieceId=zo,e.shape="square",e.x1=n.sourceX,e.y1=n.sourceY,e.x2=n.targetX,e.y2=n.targetY,!n.isSelfLoop&&n.curvature===0){const s=Math.atan2(e.y2-e.y1,e.x2-e.x1),o=n.sourceRadiusScaled-n.targetRadiusScaled,a=Math.cos(s),l=Math.sin(s);e.x1+=a*o,e.y1+=l*o}e.rectWidthOrSourceRadiusScaled=t.widthScaled,e.rectWidthOrSourceRadiusFixed=t.widthFixed+2*t.padding+1,e.rectHeightOrTargetRadiusScaled=t.heightScaled,e.rectHeightOrTargetRadiusFixed=t.heightFixed+2*t.padding,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=n.sourceRadiusScaled+n.targetRadiusScaled,e.strokeWidthFixed=n.sourceRadiusFixed+n.targetRadiusFixed,e.offsetScaled=r,e.offsetFixed=i,e.pattern.type=ar,e.opacity=n.opacity,e.fillColor=null,e.strokeColor=null,e.patternColor=null,e.globalMinVisibleSize=Math.max(t.minVisibleSize,n.minVisibleSize),e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=t.offsetAngle,e.patternScale=0,e.symbolicSize=n.widthScaled,e.curvature=n.curvature,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=n.isSelfLoop,e.isText=!1,e.adjustTextAngle=t.adjustAngle}var vU=e=>!!e||e===0;function Ri(e,t,n=0){return e==="inherit"?Array.isArray(t)?t[((n/(2*Math.PI)*t.length|0)+1)%t.length]:t:e}function xU(e,t,n){return e==="source"?Array.isArray(t)?t[0]:t:e==="target"?Array.isArray(n)?n[0]:n:e}function bU(e){const t=e.depth;return t===tP||t===eP||(t-Xx)%qx>=Yx}function RP(e){const t=(e.depth-Xx)%qx;return t>=0&&t!==nP&&t!==Yx}var wu="shifted",wU="centered";_x(nL());function w2(e,t,n,r,i,s){EU(e,t,n,r,i,s),E2(e,t,n,r.text,i.texts.primary,s.texts.primary,s),E2(e,t,n,r.text.secondary,i.texts.secondary,s.texts.secondary,s)}function EU(e,t,n,r,i,s){if(r.width.get(n)!==0){if(i0(i.body,s,pU),i.halo.body){const o=r.halo.width.get(n),a=+(r.halo.scalingMethod.get(n)==="scaled");s.halo.widthScaled=o*a,s.halo.widthFixed=o*(1-a),i0(i.halo,s,mU)}i.outline.body&&(s.outline.color=r.outline.color.get(n),s.outline.minVisibleSize=r.outline.minVisibleSize.get(n),i0(i.outline,s,fU))}}function i0(e,t,n){n(e.body,t,Cm,t.shape.body),e.head&&n(e.head,t,Gx,t.shape.head),e.tail&&n(e.tail,t,Vx,t.shape.tail)}function E2(e,t,n,r,i,s,o){if(i.text&&s.content){const a=r,l=a.scaling.get(n);if(s.font=t.fontManager.getFont(a.font.get(n)),s.color=Ri(a.color.get(n),o.color),s.position=a.position?a.position.get(n):wu,s.style=a.style.get(n),s.minVisibleSize=a.minVisibleSize.get(n),s.margin=a.margin.get(n),s.padding=a.padding.get(n),s.maxLineLength=a.maxLineLength.get(n),s.content=Jx(s.content,s.maxLineLength),s.adjustAngle=a.adjustAngle.get(n),s.align=a.align.get(n),l){const d=a.scale.get(n);s.sizeScaled=o.widthScaled*d,s.sizeFixed=o.widthFixed*d}else s.sizeFixed=a.size.get(n),s.sizeScaled=0;const c=e.measureText(s.content,s.font,s.style);s.widthScaled=c.width*s.sizeScaled,s.widthFixed=c.width*s.sizeFixed,s.heightScaled=c.height*s.sizeScaled,s.heightFixed=c.height*s.sizeFixed,s.offsetAngle=s===o.texts.primary?B6:j6,_U(i.text,s,o),i.background&&yU(i.background,s,o)}}function S2(e,t){s0(e.body,t,!0,!0),s0(e.outline,t,t.outline.enabled,!0),s0(e.halo,t,!!t.halo.color,!1),A2(e.texts.primary,t.texts.primary),A2(e.texts.secondary,t.texts.secondary)}function s0(e,t,n,r){e.body=n,e.head=n&&r&&!!t.shape.head,e.tail=n&&r&&!!t.shape.tail}function A2(e,t){e.text=!t.hidden&&!!t.content,e.background=e.text&&!!t.backgroundColor}function k2(e,t,n,r,i,s){SU(e,t,n,r,i,s),C2(e,t.texts.primary,n.text,r,t),C2(e,t.texts.secondary,n.text.secondary,r,t)}function SU(e,t,n,r,i,s){const o=i.source,a=i.target,l=n.source.get(r),c=n.target.get(r),d=o.x.get(l),u=o.y.get(l),h=o.radius.get(l),g=o.color.get(l),p=+(o.scalingMethod.get(l)==="scaled"),m=a.x.get(c),f=a.y.get(c),y=a.radius.get(c),_=a.color.get(c),v=+(a.scalingMethod.get(c)==="scaled"),x=xU(n.color.get(r),g,_),b=n.width.get(r),w=n.scalingMethod.get(r)==="scaled"?1:0,S=n.stroke.width.get(r),A=n.stroke.scalingMethod.get(r)==="scaled"?1:0,C=U6[n.shape.style.get(r)],k=n.adjustAnchors.get(r);if(t.source=l,t.target=c,t.sourceX=d,t.sourceY=u,t.targetX=m,t.targetY=f,t.sourceRadiusScaled=h*p,t.sourceRadiusFixed=h*(1-p),t.targetRadiusScaled=y*v,t.targetRadiusFixed=y*(1-v),t.widthScaled=b*w,t.widthFixed=b*(1-w),t.curvature=n.curvature.get(r),t.isSelfLoop=l===c,t.color=x,t.opacity=n.opacity.get(r),t.minVisibleSize=n.minVisibleSize.get(r),t.shape.body=n.shape.body.get(r),t.shape.head=n.shape.head.get(r),t.shape.tail=n.shape.tail.get(r),t.shape.dashLength=C.dash,t.shape.gapLength=C.gap,t.shape.isBodyTriangle=t.shape.body==="triangle",t.stroke.color=Ri(n.stroke.color.get(r),x),t.stroke.widthScaled=S*A,t.stroke.widthFixed=S*(1-A),t.stroke.minVisibleSize=n.stroke.minVisibleSize.get(r),t.halo.color=n.halo.color.get(r),t.outline.enabled=n.outline.enabled.get(r),t.textHidden=n.textHidden.get(r)===1,k&&(t.shape.head||t.shape.tail||t.shape.body==="triangle")){const T=t,M=T.curvature,D=T.sourceX,B=T.sourceY,I=T.targetX,N=T.targetY;let V=1,$=1;if(M){if(!T.isSelfLoop){const Q=Pm(D,B,I,N,M/2);V=hh(T,s,o,l,D,B,Q.x,Q.y),$=hh(T,s,a,c,I,N,Q.x,Q.y)}}else V=hh(T,s,o,l,D,B,I,N),$=hh(T,s,a,c,I,N,D,B);t.sourceRadiusScaled*=V,t.sourceRadiusFixed*=V,t.targetRadiusScaled*=$,t.targetRadiusFixed*=$}}function C2(e,t,n,r,i){t.hidden=i.textHidden,t.content=e.formatText(n.content.get(r)),t.backgroundColor=Ri(n.backgroundColor.get(r),i.color)}function hh(e,t,n,r,i,s,o,a){const l=t.angle||0;let c,d=Math.atan2(a-s,o-i)-l,u=1,h=0;d<-di?d+=cd:d>di&&(d-=cd),d<-di/2?(h=iP,c=n.badges.topLeft):d<0?(h=sP,c=n.badges.topRight):d<di/2?(h=aP,c=n.badges.bottomRight):(h=oP,c=n.badges.bottomLeft),h+=l;const g=c.text.content&&c.text.content.get(r),p=c.image.url&&c.image.url.get(r);if(vU(g)||p){const m=c.positionScale.get(r),f=c.scale.get(r),y=gL(o,a,i,s,i+Math.cos(h)*m,s+Math.sin(h)*m,f);if(y){const _=y.x-i,v=y.y-s,x=Math.sqrt(_*_+v*v);u=Math.max(u,x)}}if(n.shape.get(r)==="square"){const m=Math.abs(Math.cos(d)),f=Math.abs(Math.sin(d)),y=1/Math.max(m,f);u=Math.max(u,y)}return u}function T2(){return{source:0,target:0,sourceX:0,sourceY:0,targetX:0,targetY:0,sourceRadiusScaled:0,sourceRadiusFixed:0,targetRadiusScaled:0,targetRadiusFixed:0,widthScaled:0,widthFixed:0,curvature:0,isSelfLoop:!1,color:"",opacity:0,minVisibleSize:0,shape:{body:"line",head:null,tail:null,dashLength:0,gapLength:0,isBodyTriangle:!1},stroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,color:""},outline:{enabled:!1,color:"",minVisibleSize:0},textHidden:!1,texts:{primary:N2(),secondary:N2()}}}function N2(){return{align:"left",hidden:!1,content:"",backgroundColor:"",font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",minVisibleSize:0,margin:0,padding:0,position:wu,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,adjustAngle:!1,offsetAngle:0}}function AU(e){return e===null?e:void 0}function Un(e){return typeof e=="boolean"||e===0||e===1?e:void 0}function oa(e){return typeof e=="number"&&isFinite(e)?e:void 0}function nn(e){return typeof e=="number"&&isFinite(e)&&e>=0?e:void 0}var DP=-100,kU=400,zP=e=>typeof e=="number"&&isFinite(e)&&e>=DP&&e<=kU?e:void 0;function fs(e){return e===null||typeof e=="string"||typeof e=="number"?e:void 0}function to(e){return e==="fixed"||e==="scaled"?e:void 0}function no(e){return or(e)?e:void 0}function CU(e){return e===wU||e===wu?e:void 0}function tr(e){return e==="inherit"||or(e)?e:void 0}function TU(e){return e==="source"||e==="target"||or(e)?e:void 0}function wl(e){return e===null?null:typeof e=="string"?e.split(",").map(t=>{const n=t.trim(),r=n.indexOf(" ")!==-1,i=n[0];return r&&i!=='"'&&i!=="'"?`"${n}"`:n}).join(","):void 0}function El(e){return e==="none"?"normal":e==="normal"||e==="italic"||e==="bold"||e==="italic bold"||e==="bold italic"?e:void 0}function _p(e){return e==="left"||e==="center"?e:void 0}function NU(e){return e==="equilateral"?"pentagon":e==="circle"||e==="square"||e==="cross"||e==="diamond"||e==="pentagon"||e==="star"?e:void 0}function LU(e){return["line","tapered","arrow","dashed","dotted"].includes(e)?e:void 0}function IU(e){return e==="line"||e==="triangle"?e:void 0}function L2(e){return[null,"arrow","circle-hole-arrow","triangle-hole-arrow","short-arrow","sharp-arrow","circle","square"].includes(e)?e:void 0}function PU(e){return e==="plain"||e==="dashed"||e==="dotted"?e:void 0}function MU(e){return e==="top"||e==="bottom"||e==="left"||e==="right"||e==="center"?e:void 0}function FU(e){if(or(e))return e;if(Array.isArray(e)){if(e.length<1)return;for(let t=0;t<e.length;++t)if(!or(e[t]))return;return e}}function Ot(e){return function(t){if(typeof t=="number")return isFinite(t)&&t>=0?t:void 0;if(typeof t!="string"||t.charAt(t.length-1)!=="%")return;const n=parseFloat(t);return isNaN(n)?void 0:e*n/100}}function ob(){return{edgeHalo:0,nodeHaloStroke:0,nodeHalo:0,edgeBody:0,edgeTextBackground:0,edgeText:0,nodeBody:0,nodeTextBackground:0,nodeText:0}}function Yd(e,t=ob()){const n=(e-DP)*qx+Xx;return t.edgeHalo=P6,t.nodeHaloStroke=eP,t.nodeHalo=tP,t.edgeBody=n+nP,t.edgeTextBackground=n+M6,t.edgeText=n+F6,t.nodeBody=n+Yx,t.nodeTextBackground=n+R6,t.nodeText=n+D6,t}var RU=(e,t)=>{t.halo.body=t.halo.body||e.halo.body,t.halo.head=t.halo.head||e.halo.head,t.halo.tail=t.halo.tail||e.halo.tail,t.outline.body=t.outline.body||e.outline.body,t.outline.head=t.outline.head||e.outline.head,t.outline.tail=t.outline.tail||e.outline.tail,t.body.body=t.body.body||e.body.body,t.body.head=t.body.head||e.body.head,t.body.tail=t.body.tail||e.body.tail;const n=t.texts,r=e.texts;n.primary.text=n.primary.text||r.primary.text,n.primary.background=n.primary.background||r.primary.background,n.secondary.text=n.secondary.text||r.secondary.text,n.secondary.background=n.secondary.background||r.secondary.background},OP=e=>(t,n)=>{n.halo.body=t.halo.body[e],n.halo.head=t.halo.head[e],n.halo.tail=t.halo.tail[e],n.outline.body=t.outline.body[e],n.outline.head=t.outline.head[e],n.outline.tail=t.outline.tail[e],n.body.body=t.body.body[e],n.body.head=t.body.head[e],n.body.tail=t.body.tail[e],n.texts.primary.text=t.texts.primary.text[e],n.texts.primary.background=t.texts.primary.background[e],n.texts.secondary.text=t.texts.secondary.text[e],n.texts.secondary.background=t.texts.secondary.background[e]},DU=OP("start"),zU=OP("end"),OU=class{constructor({engine:e,imageManager:t,fontManager:n,formatText:r,view:i,attributes:s,attributesPrev:o,nodeAttributes:a,nodeAttributesPrev:l}){this._fullComponents=_c(),this._startComponents=_c(),this._endComponents=_c(),this._startFlags=_c(),this._endFlags=_c(),this._startInput=T2(),this._endInput=T2(),this._depthInfo=ob(),this._nullElt={id:-1,valid:!0},this._engine=e,this._view=i,this._helper={imageManager:t,fontManager:n,formatText:r},this._attributes=s,this._attributesPrev=o,this._nodeAttributes=a,this._nodeAttributesPrev=l,this._layers=I2(()=>e.createGroup()),this._blockIds=I2(()=>0)}drawEdge(e){if(this._computeBlockIds(e),this._attributes.excluded.get(e))return this._freeBlocks();const t=this._engine,n=this._helper,r=-e,i=this._attributes,s=Yd(i.layer.get(e)-(i.detectable.get(e)?0:1),this._depthInfo),o=i.source.get(e),a=i.target.get(e),l=i.curvature.get(e),c=this._attributesPrev.curvature.get(e),d=i.animationDuration.get(e),u=i.animationStart.get(e),h=i.animationEasing.get(e),g=d>0,p=l!==0||g&&c!==0;this._prepareBlocks(g,s,r,p);const m=this._extremitiesAttributes={source:this._nodeAttributes,target:this._nodeAttributes};if(k2(n,this._endInput,i,e,m,this._view),S2(this._endFlags,this._endInput),g){const f=this._nodeAttributes.animationDuration.get(o)>0,y=this._nodeAttributes.animationDuration.get(a)>0;m.source=f?this._nodeAttributesPrev:this._nodeAttributes,m.target=y?this._nodeAttributesPrev:this._nodeAttributes,k2(n,this._startInput,this._attributesPrev,e,m,this._view),S2(this._startFlags,this._startInput),RU(this._endFlags,this._startFlags)}this._initComponents(this._fullComponents,this._endFlags,this._layers),zU(this._fullComponents,this._endComponents),w2(t,n,e,this._attributes,this._endComponents,this._endInput),g&&(DU(this._fullComponents,this._startComponents),w2(t,n,e,this._attributesPrev,this._startComponents,this._startInput),this._setBlocksAnimation(d,u,h)),this._setupHaloMasking(o,a),this._storeBlocks()}_setupHaloMasking(e,t){const n=this._nodeAttributes.halo,r=this._layers,i=n.color.get(e)&&n.hideNonAdjacentEdges.get(e),s=n.color.get(t)&&n.hideNonAdjacentEdges.get(t),o=!i&&!s?QI:bl;r.body.stencilUsage=r.text.stencilUsage=r.textBg.stencilUsage=o}_computeBlockIds(e){const t=e*Tm,n=this._blockIds;n.body=t+C6,n.halo=t+L6,n.text=t+T6,n.textBg=t+N6}_prepareBlocks(e,t,n,r){const i=this._layers;i.body.reset(r?fp:Ni,e,t.edgeBody,n),i.halo.reset(r?fp:Ni,e,t.edgeHalo,n),i.text.reset(ra,e,t.edgeText,n),i.textBg.reset(Ni,e,t.edgeTextBackground,n)}_storeBlocks(){const e=this._engine,t=this._layers,n=this._blockIds;e.storeGroup(n.body,t.body),e.storeGroup(n.halo,t.halo),e.storeGroup(n.text,t.text),e.storeGroup(n.textBg,t.textBg)}_freeBlocks(){const e=this._engine,t=this._blockIds;e.freeBlock(t.body),e.freeBlock(t.halo),e.freeBlock(t.text),e.freeBlock(t.textBg)}_setBlocksAnimation(e,t,n){const r=this._layers;r.body.setGlobalAnimation(e,t,n),r.halo.setGlobalAnimation(e,t,n),r.text.setGlobalAnimation(e,t,n),r.textBg.setGlobalAnimation(e,t,n)}_initComponents(e,t,n){this._initEdgeComponents(e.halo,t.halo,n.halo),this._initEdgeComponents(e.outline,t.outline,n.body),this._initEdgeComponents(e.body,t.body,n.body),this._initTextComponents(e.texts.primary,t.texts.primary,n),this._initTextComponents(e.texts.secondary,t.texts.secondary,n)}_initEdgeComponents(e,t,n){e.head=this._nextElement(t.head,n),e.tail=this._nextElement(t.tail,n),e.body=this._nextElement(t.body,n)}_initTextComponents(e,t,n){e.background=this._nextElement(t.background,n.textBg),e.text=this._nextElement(t.text,n.text)}_nextElement(e,t){return e?t.next():this._nullElt}};function I2(e){return{body:e(),halo:e(),text:e(),textBg:e()}}function _c(){return{halo:{body:void 0,head:void 0,tail:void 0},outline:{body:void 0,head:void 0,tail:void 0},body:{body:void 0,head:void 0,tail:void 0},texts:{primary:{text:void 0,background:void 0},secondary:{text:void 0,background:void 0}}}}function BU(e,t,n){BP(e,t,n),t.imageContent!==null?(e.pattern.type=fo,e.pattern.attributes.image=t.imageContent,e.pattern.attributes.scaled=!0,e.pattern.attributes.duplicated=!1,e.patternScale=t.imageScale,e.patternMinVisibleSize=0,e.patternColor=null):(e.fillColor=null,e.strokeColor=null)}function jU(e,t,n){BP(e,t,n),t.textContent&&(e.pattern.type=sa,e.pattern.attributes.text=t.textContent,e.pattern.attributes.font=t.textFont,e.pattern.attributes.style=t.textStyle,e.pattern.attributes.paddingLeft=t.scale*t.textPaddingLeft*2,e.pattern.attributes.paddingTop=t.scale*t.textPaddingTop*2,e.pattern.attributes.size=vu,e.patternMinVisibleSize=0,e.patternColor=t.textColor,e.patternScale=t.textScale,e.isBadge=!0),!t.imageUrl&&t.textContent||(e.fillColor=null,e.strokeColor=null)}function BP(e,t,n){const r=n.diameterScaled*t.scale,i=n.diameterFixed*t.scale,s=n.diameterScaled*t.positionScale/2,o=n.diameterFixed*t.positionScale/2;e.pieceId=_i,e.shape="circle",e.x1=n.x,e.y1=n.y,e.x2=n.x,e.y2=n.y,e.rectWidthOrSourceRadiusScaled=r,e.rectWidthOrSourceRadiusFixed=i,e.rectHeightOrTargetRadiusScaled=r,e.rectHeightOrTargetRadiusFixed=i,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=t.strokeWidthScaled,e.strokeWidthFixed=t.strokeWidthFixed,e.offsetScaled=s,e.offsetFixed=o,e.pattern.type=ar,e.opacity=n.opacity,e.fillColor=t.color,e.strokeColor=t.strokeColor,e.patternColor=null,e.globalMinVisibleSize=t.minVisibleSize,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=t.angle,e.patternScale=0,e.symbolicSize=n.diameterScaled,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=!1,e.isText=!1}function UU(e,t,n){Mm(e,t),e.fillColor=Array.isArray(t.color)?null:t.color,e.strokeColor=t.innerStroke.color,e.strokeMinVisibleSize=t.innerStroke.minVisibleSize,e.strokeWidthScaled=t.innerStroke.widthScaled,e.strokeWidthFixed=t.innerStroke.widthFixed,n&&(e.pattern.type=ar)}function Mm(e,t){e.pieceId=_i,e.x1=t.x,e.y1=t.y,e.x2=t.x,e.y2=t.y,e.rectWidthOrSourceRadiusScaled=t.diameterScaled,e.rectWidthOrSourceRadiusFixed=t.diameterFixed,e.rectHeightOrTargetRadiusScaled=t.diameterScaled,e.rectHeightOrTargetRadiusFixed=t.diameterFixed,e.shape=t.shape,e.opacity=t.opacity,e.symbolicSize=t.diameterScaled,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=0,e.offsetFixed=0,e.fillColor=null,e.strokeColor=null,e.globalMinVisibleSize=0,e.strokeMinVisibleSize=0,e.offsetAngle=0,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=!1,e.isText=!1}function $U(e,t){const n=t.diameterScaled+2*t.halo.widthScaled,r=t.diameterFixed+2*t.halo.widthFixed;e.pieceId=_i,e.shape="circle",e.x1=t.x,e.y1=t.y,e.x2=t.x,e.y2=t.y,e.rectWidthOrSourceRadiusScaled=n,e.rectWidthOrSourceRadiusFixed=r,e.rectHeightOrTargetRadiusScaled=n,e.rectHeightOrTargetRadiusFixed=r,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=0,e.offsetFixed=0,e.pattern.type=ar,e.opacity=t.opacity,e.fillColor=t.halo.color,e.strokeColor=null,e.patternColor=null,e.globalMinVisibleSize=0,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=0,e.patternScale=0,e.symbolicSize=t.diameterScaled,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=!1,e.isText=!1}function GU(e,t){const n=t.diameterScaled+2*t.halo.widthScaled,r=t.diameterFixed+2*t.halo.widthFixed;e.pieceId=_i,e.shape="circle",e.x1=t.x,e.y1=t.y,e.x2=t.x,e.y2=t.y,e.rectWidthOrSourceRadiusScaled=n,e.rectWidthOrSourceRadiusFixed=r,e.rectHeightOrTargetRadiusScaled=n,e.rectHeightOrTargetRadiusFixed=r,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=t.halo.strokeWidthScaled,e.strokeWidthFixed=t.halo.strokeWidthFixed,e.offsetScaled=0,e.offsetFixed=0,e.pattern.type=ar,e.opacity=t.opacity,e.fillColor=null,e.strokeColor=t.halo.strokeColor,e.patternColor=null,e.globalMinVisibleSize=0,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=0,e.patternScale=0,e.symbolicSize=t.diameterScaled,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=!1,e.isText=!1}function VU(e,t){Mm(e,t),e.pattern.type=ia,e.pattern.attributes.text=t.icon.content,e.pattern.attributes.font=t.icon.font,e.pattern.attributes.style=t.icon.style,e.pattern.attributes.size=vu,e.patternMinVisibleSize=t.icon.minVisibleSize,e.patternColor=t.icon.color,e.patternScale=t.icon.scale}function HU(e,t){const n=t.image.fit&&!t.image.tile;Mm(e,t),e.pattern.type=fo,e.pattern.attributes.image=t.image.content,e.pattern.attributes.scaled=n,e.pattern.attributes.duplicated=t.image.tile,e.patternScale=n?t.image.scale:0,e.patternMinVisibleSize=t.image.minVisibleSize,e.patternColor=null}function WU(e,t){const n=t.diameterScaled+2*t.innerStroke.widthScaled,r=t.diameterFixed+2*t.innerStroke.widthFixed;e.pieceId=_i,e.shape=t.shape,e.x1=t.x,e.y1=t.y,e.x2=t.x,e.y2=t.y,e.rectWidthOrSourceRadiusScaled=n,e.rectWidthOrSourceRadiusFixed=r,e.rectHeightOrTargetRadiusScaled=n,e.rectHeightOrTargetRadiusFixed=r,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=t.outerStroke.widthScaled,e.strokeWidthFixed=t.outerStroke.widthFixed,e.offsetScaled=0,e.offsetFixed=0,e.pattern.type=ar,e.opacity=t.opacity,e.fillColor=null,e.strokeColor=t.outerStroke.color,e.patternColor=null,e.globalMinVisibleSize=t.outerStroke.minVisibleSize,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=0,e.patternScale=0,e.symbolicSize=t.diameterScaled,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=!1,e.isText=!1}function XU(e,t){const n=t.diameterScaled*ZS,r=t.diameterFixed*ZS;let i=t.diameterScaled*JS,s=t.diameterFixed*JS+z6;t.outerStroke.color&&(i+=t.outerStroke.widthScaled/2,s+=t.outerStroke.widthFixed/2),e.pieceId=_i,e.shape=t.shape,e.x1=t.x,e.y1=t.y,e.x2=t.x,e.y2=t.y,e.rectWidthOrSourceRadiusScaled=n,e.rectWidthOrSourceRadiusFixed=r,e.rectHeightOrTargetRadiusScaled=n,e.rectHeightOrTargetRadiusFixed=r,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=i,e.offsetFixed=s,e.pattern.type=ar,e.opacity=t.opacity,e.fillColor=t.outline.color,e.strokeColor=null,e.patternColor=null,e.globalMinVisibleSize=t.outline.minVisibleSize,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=1.5707963267948966,e.patternScale=0,e.symbolicSize=t.diameterScaled,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=!1,e.isText=!1}function YU(e,t){Mm(e,t),Array.isArray(t.color)&&(e.pattern.type=bu,e.pattern.attributes.colors=t.color.join(";"),e.patternScale=1,e.patternMinVisibleSize=0,e.patternColor=null)}function qU(e,t,n){jP(e,t,n),e.pattern.type=wo,e.pattern.attributes.text=t.content,e.pattern.attributes.font=t.font,e.pattern.attributes.style=t.style,e.pattern.attributes.align=t.align,e.patternMinVisibleSize=0,e.patternColor=t.color,e.thicknessOrFontSizeScaled=t.sizeScaled,e.thicknessOrFontSizeFixed=t.sizeFixed,e.isText=!0}function ZU(e,t,n){jP(e,t,n),e.fillColor=t.backgroundColor,e.pieceId=qo,e.shape="square"}function JU(e,t,n){const r=Math.ceil(t.margin/2),i=n.diameterScaled/2,s=n.diameterFixed/2+r,o=G6[t.position],a=Math.cos(o),l=Math.sin(o),c=t.margin<12?1:t.margin<30?1-(t.margin-12)/18*.7:.25;e.pieceId=_i,e.shape="triangle",e.x1=n.x-a,e.y1=n.y-l,e.x2=n.x+a,e.y2=n.y+l,e.rectWidthOrSourceRadiusScaled=0,e.rectWidthOrSourceRadiusFixed=t.margin,e.rectHeightOrTargetRadiusScaled=0,e.rectHeightOrTargetRadiusFixed=t.margin*c,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=i,e.offsetFixed=s,e.pattern.type=ar,e.opacity=n.opacity,e.fillColor=t.backgroundColor,e.strokeColor=null,e.patternColor=null,e.globalMinVisibleSize=t.minVisibleSize,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=t.positionAngle,e.patternScale=0,e.symbolicSize=n.diameterScaled,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=!1}function jP(e,t,n){let r=0,i=0;if(t.isPositionCenter||(r+=n.diameterScaled/2,i+=n.diameterFixed/2+t.margin+t.padding),t.isPositionVertical){if(r+=t.heightScaled/2,i+=t.heightFixed/2,t===n.texts.secondary&&n.texts.primary.position==="bottom"){const o=n.texts.primary;r+=o.heightScaled,i+=o.heightFixed+o.margin+2*o.padding}}else t.isPositionHorizontal&&(r+=t.widthScaled/2,i+=t.widthFixed/2);const s=vu;e.pieceId=_i,e.shape="square",e.x1=n.x,e.y1=n.y,e.x2=n.x,e.y2=n.y,e.rectWidthOrSourceRadiusScaled=t.widthScaled,e.rectWidthOrSourceRadiusFixed=t.widthFixed+2*t.padding,e.rectHeightOrTargetRadiusScaled=t.heightScaled,e.rectHeightOrTargetRadiusFixed=t.heightFixed+2*t.padding,e.thicknessOrFontSizeScaled=0,e.thicknessOrFontSizeFixed=0,e.strokeWidthScaled=0,e.strokeWidthFixed=0,e.offsetScaled=r,e.offsetFixed=i,e.pattern.type=ar,e.pattern.attributes.size=s,e.opacity=n.opacity,e.fillColor=null,e.strokeColor=null,e.patternColor=null,e.globalMinVisibleSize=t.minVisibleSize,e.strokeMinVisibleSize=0,e.patternMinVisibleSize=0,e.offsetAngle=t.positionAngle,e.patternScale=1,e.symbolicSize=n.diameterScaled,e.curvature=0,e.dashLength=0,e.gapLength=0,e.hasHead=!1,e.hasTail=!1,e.isSelfLoop=!1,e.isText=!1}function P2(e,t,n,r,i,s){const o=i.badges,a=r.badges,l=s.badges;QU(e,t,n,r,i,s),M2(e,t,n,r.text,i.texts.primary,s.texts.primary,s),M2(e,t,n,r.text.secondary,i.texts.secondary,s.texts.secondary,s),gh(e,t,n,a.topLeft,o.topLeft,l.topLeft,s),gh(e,t,n,a.topRight,o.topRight,l.topRight,s),gh(e,t,n,a.bottomLeft,o.bottomLeft,l.bottomLeft,s),gh(e,t,n,a.bottomRight,o.bottomRight,l.bottomRight,s)}function QU(e,t,n,r,i,s){if(i.halo){const o=r.halo.width.get(n),a=+(r.halo.scalingMethod.get(n)==="scaled");s.halo.widthScaled=o*a,s.halo.widthFixed=o*(1-a),$U(i.halo,s),i.haloStroke&&(s.halo.strokeWidthScaled=0,s.halo.strokeWidthFixed=r.halo.strokeWidth.get(n),GU(i.haloStroke,s))}if(i.outline&&(s.outline.color=r.outline.color.get(n),s.outline.minVisibleSize=r.outline.minVisibleSize.get(n),XU(i.outline,s)),i.outerStroke&&(s.outerStroke.minVisibleSize=r.outerStroke.minVisibleSize.get(n),WU(i.outerStroke,s)),i.pieChart&&YU(i.pieChart,s),i.image&&(s.image.content=t.imageManager.getImage(s.image.url),s.image.fit=r.image.fit.get(n),s.image.tile=r.image.tile.get(n),s.image.scale=r.image.scale.get(n),s.image.minVisibleSize=r.image.minVisibleSize.get(n),HU(i.image,s)),i.icon&&(s.icon.font=t.fontManager.getFont(r.icon.font.get(n)),s.icon.style=r.icon.style.get(n),s.icon.color=r.icon.color.get(n),s.icon.scale=r.icon.scale.get(n),s.icon.minVisibleSize=r.icon.minVisibleSize.get(n),VU(i.icon,s)),i.body){const o=!i.pieChart&&!i.image&&!i.icon;UU(i.body,s,o)}}function gh(e,t,n,r,i,s,o){if(i.image||i.text){const a=r.stroke.width.get(n),l=+(r.stroke.scalingMethod.get(n)==="scaled");s.color=Ri(r.color.get(n),o.color,s.angle),s.strokeColor=r.stroke.color.get(n),s.strokeWidthScaled=a*l,s.strokeWidthFixed=a*(1-l),s.minVisibleSize=r.minVisibleSize.get(n),s.positionScale=r.positionScale.get(n),s.scale=r.scale.get(n)}if(i.image&&(s.imageContent=t.imageManager.getImage(s.imageUrl),s.imageScale=r.image.scale.get(n),BU(i.image,s,o)),i.text){if(s.textFont=t.fontManager.getFont(r.text.font.get(n)),s.textStyle=r.text.style.get(n),s.textColor=Ri(r.text.color.get(n),o.color),s.textScale=r.text.scale.get(n),s.textPaddingTop=r.text.paddingTop.get(n),s.textPaddingLeft=r.text.paddingLeft.get(n),e.measureText(s.textContent,s.textFont,s.textStyle,s.textScale).width>1){let a=0,l=0;for(;l<s.textContent.length&&a<1;)a+=e.measureText(s.textContent[l],s.textFont,s.textStyle,s.textScale).width,l+=1;l!==s.textContent.length&&(s.textContent=s.textContent.substring(0,l-1)+"‥")}jU(i.text,s,o)}}function M2(e,t,n,r,i,s,o){if(i.text&&s.content){const a=r,l=a.scaling.get(n);if(s.font=t.fontManager.getFont(a.font.get(n)),s.color=Ri(a.color.get(n),o.color),s.style=a.style.get(n),s.align=a.align.get(n),s.minVisibleSize=a.minVisibleSize.get(n),s.margin=a.margin.get(n),s.padding=a.padding.get(n),s.maxLineLength=a.maxLineLength.get(n),s.content=Jx(s.content,s.maxLineLength),l){const d=a.scale.get(n);s.sizeScaled=o.diameterScaled*d,s.sizeFixed=o.diameterFixed*d}else s.sizeFixed=a.size.get(n),s.sizeScaled=0;const c=e.measureText(s.content,s.font,s.style);s.widthScaled=c.width*s.sizeScaled,s.widthFixed=c.width*s.sizeFixed,s.heightScaled=c.height*s.sizeScaled,s.heightFixed=c.height*s.sizeFixed,s.positionAngle=$6[s.position],s.isPositionCenter=s.position==="center",s.isPositionVertical=s.position==="top"||s.position==="bottom",s.isPositionHorizontal=s.position==="left"||s.position==="right",qU(i.text,s,o),i.background&&(ZU(i.background,s,o),i.tip&&JU(i.tip,s,o))}}function F2(e,t){KU(e,t),R2(e.texts.primary,t.texts.primary),R2(e.texts.secondary,t.texts.secondary),ph(e.badges.topLeft,t.badges.topLeft),ph(e.badges.topRight,t.badges.topRight),ph(e.badges.bottomLeft,t.badges.bottomLeft),ph(e.badges.bottomRight,t.badges.bottomRight)}function KU(e,t){e.body=!0,e.icon=!!t.icon.content,e.image=!!t.image.url,e.pieChart=Array.isArray(t.color),e.outerStroke=!!t.outerStroke.color,e.outline=!!t.outline.enabled,e.halo=!!t.halo.color,e.haloStroke=e.halo&&!!t.halo.strokeColor}function R2(e,t){e.text=!t.hidden&&!!t.content,e.background=e.text&&!!t.backgroundColor,e.tip=e.background&&t.tip&&t.position!=="center"}function ph(e,t){e.text=!!t.textContent,e.image=!!t.imageUrl}function D2(e,t,n,r){e$(e,t,n,r),z2(e,t.texts.primary,n.text,r,t),z2(e,t.texts.secondary,n.text.secondary,r,t),mh(e,t.badges.topLeft,n.badges.topLeft,r),mh(e,t.badges.topRight,n.badges.topRight,r),mh(e,t.badges.bottomLeft,n.badges.bottomLeft,r),mh(e,t.badges.bottomRight,n.badges.bottomRight,r)}function e$(e,t,n,r){const i=+(n.scalingMethod.get(r)==="scaled"),s=2*n.radius.get(r),o=n.innerStroke.width.get(r),a=+(n.innerStroke.scalingMethod.get(r)==="scaled"),l=n.outerStroke.width.get(r),c=+(n.outerStroke.scalingMethod.get(r)==="scaled");t.x=n.x.get(r),t.y=n.y.get(r),t.shape=n.shape.get(r),t.color=n.color.get(r),t.opacity=n.opacity.get(r),t.diameterScaled=s*i,t.diameterFixed=s*(1-i),t.innerStroke.color=Ri(n.innerStroke.color.get(r),t.color),t.innerStroke.widthScaled=o*a,t.innerStroke.widthFixed=o*(1-a),t.innerStroke.minVisibleSize=n.innerStroke.minVisibleSize.get(r),t.outerStroke.color=Ri(n.outerStroke.color.get(r),t.color),t.outerStroke.widthScaled=l*c,t.outerStroke.widthFixed=l*(1-c),t.halo.color=n.halo.color.get(r),t.halo.strokeColor=n.halo.strokeColor.get(r),t.icon.content=e.formatText(n.icon.content.get(r)),t.image.url=n.image.url.get(r),t.outline.enabled=n.outline.enabled.get(r),t.textHidden=n.textHidden.get(r)===1}function z2(e,t,n,r,i){if(t.hidden=i.textHidden,t.content=e.formatText(n.content.get(r)),t.backgroundColor=Ri(n.backgroundColor.get(r),i.color),t===i.texts.primary){const s=n;t.tip=s.tip.get(r),t.position=s.position.get(r)}else t.position="bottom"}function mh(e,t,n,r){const i=n.text.content.get(r);t.textContent=e.formatText(i),t.imageUrl=n.image.url.get(r)}function O2(){return{x:0,y:0,shape:"",color:"",opacity:0,diameterScaled:0,diameterFixed:0,innerStroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},outerStroke:{color:"",widthScaled:0,widthFixed:0,minVisibleSize:0},icon:{content:"",font:"",color:"",scale:0,size:0,style:"none",minVisibleSize:0},image:{url:"",content:null,scale:0,minVisibleSize:0},halo:{widthScaled:0,widthFixed:0,strokeWidthScaled:0,strokeWidthFixed:0,color:"",strokeColor:""},outline:{enabled:!1,color:"",minVisibleSize:0},badges:{topLeft:fh(iP),topRight:fh(sP),bottomLeft:fh(oP),bottomRight:fh(aP)},textHidden:!1,texts:{primary:B2(),secondary:B2()}}}function fh(e){return{angle:e,color:"",scale:0,positionScale:0,minVisibleSize:0,strokeColor:"",strokeWidthScaled:0,strokeWidthFixed:0,textContent:"",textFont:"",textColor:"",textScale:0,textStyle:"none",imageUrl:"",imageContent:null,imageScale:0,textPaddingLeft:0,textPaddingTop:0}}function B2(){return{hidden:!1,content:"",position:"",backgroundColor:"",tip:!1,font:"",color:"",sizeScaled:0,sizeFixed:0,style:"none",align:"left",minVisibleSize:0,margin:0,padding:0,maxLineLength:0,widthScaled:0,widthFixed:0,heightScaled:0,heightFixed:0,positionAngle:0,isPositionCenter:!1,isPositionVertical:!1,isPositionHorizontal:!1}}var t$=(e,t)=>{t.haloStroke=t.haloStroke||e.haloStroke,t.halo=t.halo||e.halo,t.outline=t.outline||e.outline,t.outerStroke=t.outerStroke||e.outerStroke,t.body=t.body||e.body,t.pieChart=t.pieChart||e.pieChart,t.image=t.image||e.image,t.icon=t.icon||e.icon;const n=e.badges,r=t.badges;r.topLeft.text=r.topLeft.text||n.topLeft.text,r.topLeft.image=r.topLeft.image||n.topLeft.image,r.topRight.text=r.topRight.text||n.topRight.text,r.topRight.image=r.topRight.image||n.topRight.image,r.bottomLeft.text=r.bottomLeft.text||n.bottomLeft.text,r.bottomLeft.image=r.bottomLeft.image||n.bottomLeft.image,r.bottomRight.text=r.bottomRight.text||n.bottomRight.text,r.bottomRight.image=r.bottomRight.image||n.bottomRight.image;const i=e.texts,s=t.texts;s.primary.text=s.primary.text||i.primary.text,s.primary.background=s.primary.background||i.primary.background,s.primary.tip=s.primary.tip||i.primary.tip,s.secondary.text=s.secondary.text||i.secondary.text,s.secondary.background=s.secondary.background||i.secondary.background,s.secondary.tip=s.secondary.tip||i.secondary.tip},UP=e=>(t,n)=>{n.haloStroke=t.haloStroke[e],n.halo=t.halo[e],n.outline=t.outline[e],n.outerStroke=t.outerStroke[e],n.body=t.body[e],n.pieChart=t.pieChart[e],n.image=t.image[e],n.icon=t.icon[e];const r=t.badges,i=n.badges;i.topLeft.text=r.topLeft.text[e],i.topLeft.image=r.topLeft.image[e],i.topRight.text=r.topRight.text[e],i.topRight.image=r.topRight.image[e],i.bottomLeft.text=r.bottomLeft.text[e],i.bottomLeft.image=r.bottomLeft.image[e],i.bottomRight.text=r.bottomRight.text[e],i.bottomRight.image=r.bottomRight.image[e];const s=t.texts,o=n.texts;o.primary.text=s.primary.text[e],o.primary.background=s.primary.background[e],o.primary.tip=s.primary.tip[e],o.secondary.text=s.secondary.text[e],o.secondary.background=s.secondary.background[e],o.secondary.tip=s.secondary.tip[e]},n$=UP("start"),r$=UP("end"),i$=class{constructor({engine:e,imageManager:t,fontManager:n,formatText:r,attributes:i,attributesPrev:s}){this._fullComponents=yc(),this._startComponents=yc(),this._endComponents=yc(),this._startFlags=yc(),this._endFlags=yc(),this._startInput=O2(),this._endInput=O2(),this._depthInfo=ob(),this._nodePatternAssigned=!1,this._nullElt={id:-1,valid:!0},this._engine=e,this._attributes=i,this._attributesPrev=s,this._helper={imageManager:t,fontManager:n,formatText:r},this._layers=j2(()=>e.createGroup()),this._blockIds=j2(()=>0)}drawNode(e){if(this._computeBlockIds(e),this._attributes.excluded.get(e))return this._freeBlocks();const t=this._engine,n=this._helper,r=e,i=this._attributes,s=Yd(i.layer.get(e)-(i.detectable.get(e)?0:1),this._depthInfo),o=i.animationDuration.get(e),a=o>0;if(this._prepareBlocks(a,s,r),D2(n,this._endInput,i,e),F2(this._endFlags,this._endInput),a&&(D2(n,this._startInput,this._attributesPrev,e),F2(this._startFlags,this._startInput),t$(this._endFlags,this._startFlags)),this._initComponents(this._fullComponents,this._endFlags,this._layers),r$(this._fullComponents,this._endComponents),P2(t,n,e,i,this._endComponents,this._endInput),a&&(n$(this._fullComponents,this._startComponents),P2(t,n,e,this._attributesPrev,this._startComponents,this._startInput)),a){const l=this._attributes.animationStart.get(e),c=this._attributes.animationEasing.get(e);this._setBlocksAnimation(o,l,c)}this._endFlags.halo&&this._attributes.halo.hideNonAdjacentEdges.get(e)&&(this._layers.halo.stencilUsage=this._layers.haloStroke.stencilUsage=JI),this._storeBlocks()}_computeBlockIds(e){const t=e*Tm,n=this._blockIds;n.body=t+w6,n.text=t+E6,n.textBg=t+S6,n.halo=t+A6,n.haloStroke=t+k6}_prepareBlocks(e,t,n){const r=this._layers;r.body.reset(Ni,e,t.nodeBody,n),r.text.reset(ra,e,t.nodeText,n),r.textBg.reset(Ni,e,t.nodeTextBackground,n),r.halo.reset(Ni,e,t.nodeHalo,n),r.haloStroke.reset(Ni,e,t.nodeHaloStroke,n)}_storeBlocks(){const e=this._engine,t=this._layers,n=this._blockIds;e.storeGroup(n.body,t.body),e.storeGroup(n.text,t.text),e.storeGroup(n.textBg,t.textBg),e.storeGroup(n.halo,t.halo),e.storeGroup(n.haloStroke,t.haloStroke)}_freeBlocks(){const e=this._engine,t=this._blockIds;e.freeBlock(t.body),e.freeBlock(t.text),e.freeBlock(t.textBg),e.freeBlock(t.halo),e.freeBlock(t.haloStroke)}_setBlocksAnimation(e,t,n){const r=this._layers;r.body.setGlobalAnimation(e,t,n),r.text.setGlobalAnimation(e,t,n),r.textBg.setGlobalAnimation(e,t,n),r.halo.setGlobalAnimation(e,t,n),r.haloStroke.setGlobalAnimation(e,t,n)}_initComponents(e,t,n){this._nodePatternAssigned=!1,this._initBaseComponents(e,t,n),this._initBadgeComponents(e.badges.topLeft,t.badges.topLeft,n),this._initBadgeComponents(e.badges.topRight,t.badges.topRight,n),this._initBadgeComponents(e.badges.bottomLeft,t.badges.bottomLeft,n),this._initBadgeComponents(e.badges.bottomRight,t.badges.bottomRight,n),this._initTextComponents(e.texts.primary,t.texts.primary,n),this._initTextComponents(e.texts.secondary,t.texts.secondary,n)}_initBaseComponents(e,t,n){e.haloStroke=this._nextElement(t.haloStroke,n.haloStroke),e.halo=this._nextElement(t.halo,n.halo),e.outline=this._nextElement(t.outline,n.body),e.outerStroke=this._nextElement(t.outerStroke,n.body),e.body=this._nextElement(t.body,n.body),e.pieChart=this._getNodePatternElement(t.pieChart,n),e.image=this._getNodePatternElement(t.image,n),e.icon=this._getNodePatternElement(t.icon,n)}_initBadgeComponents(e,t,n){e.image=this._nextElement(t.image,n.body),e.text=this._nextElement(t.text,n.body)}_initTextComponents(e,t,n){e.background=this._nextElement(t.background,n.textBg),e.tip=this._nextElement(t.tip,n.textBg),e.text=this._nextElement(t.text,n.text)}_nextElement(e,t){return e?t.next():this._nullElt}_getNodePatternElement(e,t){return e?this._nodePatternAssigned?t.body.next():(this._nodePatternAssigned=!0,t.body.getCurrentElement()):this._nullElt}};function j2(e){return{body:e(),text:e(),textBg:e(),halo:e(),haloStroke:e()}}function yc(){return{haloStroke:void 0,halo:void 0,outline:void 0,outerStroke:void 0,body:void 0,pieChart:void 0,image:void 0,icon:void 0,badges:{topLeft:{text:void 0,image:void 0},topRight:{text:void 0,image:void 0},bottomLeft:{text:void 0,image:void 0},bottomRight:{text:void 0,image:void 0}},texts:{primary:{text:void 0,background:void 0,tip:void 0},secondary:{text:void 0,background:void 0,tip:void 0}}}}function s$({graph:e,elements:t,engine:n,imageManager:r,fontManager:i,view:s,attributes:o,boundaries:a,formatText:l}){const{nodeAttributes:c,nodeAttributesPrev:d,edgeAttributes:u,edgeAttributesPrev:h}=o$(o),{nodes:g,edges:p}=t,{maxSize:m,maxMinVisibleSize:f}=a;if(!g.size&&!p.size)return;const y=(Math.max(e.getNodeMaxIndex(),e.getEdgeMaxIndex())+1)*Tm,_=n.setGlobalBoundaries({maxBlockId:eo(y),maxScaledSize:eo(8*m),maxMinVisibleSize:eo(f),maxSymbolicSize:eo(m),maxDashLength:3,maxGapLength:1,maxPatternScale:2,maxCoord:-1/0}),v=(_?e.getNodes("_all"):g)._indexes,x=(_?e.getEdges("_all"):p)._indexes;if(v.length){const b=new i$({engine:n,imageManager:r,fontManager:i,formatText:l,attributes:c,attributesPrev:d});for(let w=0;w<v.length;++w)b.drawNode(v[w])}if(x.length){const b=new OU({engine:n,imageManager:r,fontManager:i,formatText:l,view:s,attributes:u,attributesPrev:h,nodeAttributes:c,nodeAttributesPrev:d});for(let w=0;w<x.length;++w)b.drawEdge(x[w])}}function o$(e){const t=sl(e.nodes.current,{text:{secondary:{scaling:e.nodes.current.text.scaling,maxLineLength:e.nodes.current.text.maxLineLength}}});return{nodeAttributes:t,nodeAttributesPrev:sl(e.nodes.previous,{textHidden:t.textHidden,text:{secondary:{scaling:e.nodes.previous.text.scaling,maxLineLength:e.nodes.previous.text.maxLineLength}}}),edgeAttributes:sl(e.edges.current,{text:{secondary:{scaling:e.edges.current.text.scaling,maxLineLength:e.edges.current.text.maxLineLength,adjustAngle:e.edges.current.text.adjustAngle}}}),edgeAttributesPrev:sl(e.edges.previous,{source:e.edges.current.source,target:e.edges.current.target,textHidden:e.edges.current.textHidden,text:{secondary:{scaling:e.edges.previous.text.scaling,maxLineLength:e.edges.previous.text.maxLineLength,adjustAngle:e.edges.previous.text.adjustAngle}}})}}function qd(e,t,n){const r=n.length;let i=r-1,s=!1;for(let o=0;o<r;++o)(n[o].y<t&&n[i].y>=t||n[i].y<t&&n[o].y>=t)&&(n[o].x<=e||n[i].x<=e)&&(s=s!==n[o].x+(t-n[o].y)/(n[i].y-n[o].y)*(n[i].x-n[o].x)<e),i=o;return s}function _h(e){const t=e.x*e.x+e.y*e.y;return{x:e.x/t,y:e.y/t}}function U2(e,t){let n=1/0,r=-1/0;for(let i=0,s=e.length;i<s;i++){const o=e[i],a=o.x*t.x+o.y*t.y;a<n&&(n=a),a>r&&(r=a)}return{x:n,y:r}}function a$(e,t){let n=e[1],r=e[0],i=_h({x:n.x-r.x,y:n.y-r.y}),s=i.x;i.x=-i.y,i.y=s;const o=i;n=e[2],r=e[1],i=_h({x:n.x-r.x,y:n.y-r.y}),s=i.x,i.x=-i.y,i.y=s;const a=i;n=t[1],r=t[0],i=_h({x:n.x-r.x,y:n.y-r.y}),s=i.x,i.x=-i.y,i.y=s;const l=i;return n=t[2],r=t[1],i=_h({x:n.x-r.x,y:n.y-r.y}),s=i.x,i.x=-i.y,i.y=s,[o,a,l,i]}function $P(e,t){const n=a$(e,t);for(let r=0,i=n.length;r<i;r++){const s=n[r],o=U2(e,s),a=U2(t,s);if((o.x<=a.y&&o.y>=a.x?Math.min(o.y,a.y)-Math.max(o.x,a.x):0)===0)return!1}return!0}function l$(e){let t=0,n=0;const r=e.length;if(r===0)throw new Error("Compute centroid: at least one point is required");for(let i=0;i<r;++i){const s=e[i];t+=s.x,n+=s.y}return t/=r,n/=r,{x:t,y:n}}var c$=ab(4),d$=ab(5),u$=ab(10,.4),ro=1/3,h$=[{x:-1,y:-ro},{x:0,y:-ro},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:0,y:ro},{x:-1,y:ro}],g$=[{x:-1,y:-ro},{x:-.55,y:-ro},{x:-1,y:-1},{x:1,y:0},{x:-1,y:1},{x:-.55,y:ro},{x:-1,y:ro}],$2=[{x:-.6,y:-.3},{x:.1,y:0},{x:-.6,y:.3}],p$={circle:{getDistanceFromStrokeVertically:(e,t)=>1,getDistanceFromStrokeHorizontally:(e,t)=>1-Math.sqrt(e*e+t*t),points:[{x:0,y:0,r:1}],isSimple:!0},square:{getDistanceFromStrokeVertically:(e,t)=>.996-Math.abs(t),getDistanceFromStrokeHorizontally:(e,t)=>.996-Math.abs(e),points:[{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],isSimple:!0},line:{getDistanceFromStrokeVertically:(e,t)=>1-Math.abs(t),getDistanceFromStrokeHorizontally:(e,t)=>1,points:[{x:-1,y:0},{x:1,y:0}],isSimple:!0},triangle:{getDistanceFromStrokeVertically:(e,t)=>(1-e)/2-Math.abs(t),getDistanceFromStrokeHorizontally:(e,t)=>1-Math.abs(e),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],isSimple:!0},arrow:{getDistanceFromStrokeVertically:(e,t)=>(1-e)/2-Math.abs(t),getDistanceFromStrokeHorizontally:(e,t)=>1-Math.abs(e),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],isSimple:!0},"circle-hole-arrow":{getDistanceFromStrokeVertically:(e,t)=>Math.min(Math.sqrt((e+.4)*(e+.4)+t*t)-.27,(1-e)/2-Math.abs(t)),getDistanceFromStrokeHorizontally:(e,t)=>1-Math.abs(e),points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],hole:[{x:-.4,y:0,r:.3}],isSimple:!0},"triangle-hole-arrow":{getDistanceFromStrokeVertically:(e,t)=>{const n=Math.min((1-e)/2-Math.abs(t),1-Math.abs(e)),r=-GP(e,t,$2);return Math.min(n,r)},getDistanceFromStrokeHorizontally:(e,t)=>1,points:[{x:-1,y:-1},{x:-1,y:1},{x:1,y:0}],hole:$2,isSimple:!0},"short-arrow":vc(h$,!1),"sharp-arrow":vc(g$,!1),cross:{getDistanceFromStrokeVertically:(e,t)=>1,getDistanceFromStrokeHorizontally:(e,t)=>{const n=Math.abs(e),r=Math.abs(t),i=.31-Math.min(n,r),s=1-Math.max(n,r);return Math.min(i,s)},points:[{x:-1,y:.31},{x:-1,y:-.31},{x:-.31,y:-.31},{x:-.31,y:-1},{x:.31,y:-1},{x:.31,y:-.31},{x:1,y:-.31},{x:1,y:.31},{x:.31,y:.31},{x:.31,y:1},{x:-.31,y:1},{x:-.31,y:.31}],isSimple:!1},diamond:vc(c$),pentagon:vc(d$),star:vc(u$)},m$=["circle","square","triangle","line"],f$=["cross","diamond","pentagon","star"],_$=["arrow","triangle-hole-arrow","circle-hole-arrow","short-arrow","sharp-arrow"];function G2(e,t){for(const s of m$)o0(e,s);const n=t.nodes.current.shape.getValues(),r=t.edges.current.shape.head.getValues(),i=t.edges.current.shape.tail.getValues();for(const s of f$)n.includes(s)&&o0(e,s);for(const s of _$)s&&(r.includes(s)||i.includes(s))&&o0(e,s)}function o0(e,t){e.registerShape(t,p$[t])}function GP(e,t,n){let r=1/0;const i={x:e,y:t};for(let s=0;s<n.length;++s){const o=n[s],a=n[(s+1)%n.length];r=Math.min(r,EP(i,o,a))}return r*(qd(e,t,n)?1:-1)}function ab(e,t=1){const n=-Math.PI/2+rP,r=[],i=2*Math.PI/e;let s=n;for(let o=0;o<e;++o){const a=o%2==1?t:1;r.push({x:Math.cos(s)*a,y:Math.sin(s)*a}),s+=i}return r}function vc(e,t=!1){return{getDistanceFromStrokeVertically:()=>1,getDistanceFromStrokeHorizontally:(n,r)=>GP(n,r,e),points:e,isSimple:t}}var y$=class extends xu{constructor(e,t){super(),this.isDummy=!0,this.width=0,this.height=0}set src(e){e&&(this._src=e,setTimeout(()=>{this.onload&&this.onload.call(this),this.width=1,this.height=1,this.fire("load")},10))}get src(){return this._src}addEventListener(e,t){this.on(e,t)}};function v$(e,t){return new(typeof Image<"u"?Image:y$)(e,t)}var x$=class{constructor(){this._images={},this._crossOrigin="anonymous",this._whenReady=[],this._onFetch=[],this._nbLoaded=0,this._nbToLoad=0}setImgCrossOrigin(e){this._crossOrigin=e}clear(){this._images={},this._nbLoaded=0,this._nbToLoad=0}getImage(e){let t=this._images[e];return t===void 0&&(this._nbToLoad+=1,t=v$(),t.crossOrigin=this._crossOrigin,t.onload=()=>this._onImgLoad(e),t.onerror=()=>{this._onImgLoad(e),this._images[e]=null},t.src=e,this._images[e]=t),t}_onImgLoad(e){this._nbLoaded+=1,this._onFetch.forEach(t=>t(e)),this._nbLoaded===this._nbToLoad&&(this._whenReady.forEach(t=>t()),this._whenReady=[])}onFetch(e){this._onFetch.push(e)}whenReady(){return this._nbLoaded===this._nbToLoad?Promise.resolve():new Promise(e=>this._whenReady.push(e))}destroy(){this._whenReady=[],this._onFetch=[]}},lb={};function b$(e){let t="";for(let n=0;n<e.length;n++)t+=e[n].cssText+`
`;return t}function VP(){const e=Ns(),t=e.styleSheets||[],n=tI(e),r=[],i=[];for(let o=0;o<t.length;o++){const a=t[o];a.href==null?r.push({href:n,content:b$(a.cssRules)}):i.push(a.href)}const s=/@font-face\s*\{[^}]+\}/g;return Promise.all(i.map(o=>Jl(o).then(a=>({href:o,content:a})).catch(Kg))).then(o=>o.concat(r)).then(o=>{const a=[];for(let l=0;l<o.length;l++){const c=o[l];if(c!==null){const{href:d,content:u}=c,h=u.match(s);if(h){const g=E$(h,d);a.push.apply(a,g)}}}return a})}function HP(e,t){return Promise.all(e.map(({formats:n,originalRule:r})=>Promise.all(n.map(({format:i,url:s})=>t?eI(s).then(o=>({format:i,src:o})).catch(Kg):{format:i,src:s})).then(i=>{const s=[];for(const o of i)o!==null&&s.push(`url('${o.src}') format('${o.format}')`);if(s.length!==0){const o=`src: ${s.join(",")}`;return r.replace(/@font-face\s*{([^}]*);?}/,`@font-face{$1;${o}}`).replace(/\s+/," ").replace(/;+/,";")}return r})))}pu(lb,{BUTTON_MAPPING:()=>Rx,BoundingBox:()=>vr,DummyCanvas:()=>lP,DummyCanvasRenderingContext2D:()=>cP,DummyDomElement:()=>WL,DummyFileReader:()=>GL,DummyTextNode:()=>QP,DummyXHR:()=>$L,ElementSet:()=>Eu,EventTarget:()=>xu,FlexArray:()=>hp,IndexList:()=>FI,MOUSE_WHEEL_THROTTLE:()=>LL,Map2:()=>ZI,PathMap:()=>XP,PrioritySet:()=>NL,SVG_NS:()=>Mx,Table:()=>sy,XLINK:()=>qL,XML_NS:()=>q_,applyCursorStyle:()=>np,baseURI:()=>tI,binaryIndexOf:()=>oL,cancelAnimFrame:()=>IL,clamp:()=>fi,clearCanvas:()=>yy,componentsToRGBA:()=>XI,computeMax:()=>al,computeMin:()=>ms,concatenateArrays:()=>UO,createBlob:()=>$d,createCanvas:()=>Wn,createDummyDomElement:()=>ep,createDummyXmlDocument:()=>eM,createElement:()=>Z_,createSvgElement:()=>zt,createTextNode:()=>Fx,createWebGL2Context:()=>uP,createWorker:()=>ZP,createXmlDocument:()=>tM,dataUrlToBlob:()=>XL,debounce:()=>l4,deepCopy:()=>un,displayPixelsOnScreen:()=>P$,ensureTransferable:()=>vm,escapeDOMAttribute:()=>ol,extendList:()=>u4,fadeElement:()=>nI,fetch:()=>Jl,fetchBinary:()=>KL,fetchBinaryAsBase64:()=>eI,flatten:()=>Ud,flattenArray:()=>sL,forEach:()=>Ji,formatAngle:()=>op,formatHex:()=>hg,formatWorkerMessage:()=>qP,getBaseLog:()=>EI,getCurrentTime:()=>ir,getDate:()=>BL,getDocument:()=>Ns,getDocumentFontRules:()=>VP,getEmbeddedFontRules:()=>HP,getFlattenedKeys:()=>va,getGlContext:()=>hP,getImage:()=>ZL,getLeafValues:()=>ym,getOptions:()=>Kr,getPixelRatio:()=>zr,getProperty:()=>ln,getResizeObserver:()=>VL,getStyle:()=>HL,getTime:()=>jL,getValues:()=>od,getWebglContext:()=>Zx,hash8:()=>G_,indexArrayToArray:()=>Bd,indexByName:()=>h4,insertSortAsc:()=>Lc,insertSortDesc:()=>jO,isArray:()=>Vn,isBlob:()=>y4,isHTMLElement:()=>QL,isInteger:()=>a4,isLittleEndian:()=>_m,isObject:()=>Sn,isRawObject:()=>ya,isWebGLSupported:()=>dP,lerp:()=>Dt,mapKeys:()=>YI,mapValues:()=>qI,merge:()=>sl,mergeValues:()=>Jg,mix:()=>Q_,nextPowerOfTwo:()=>eo,objToValueList:()=>Fm,parseColor:()=>or,parseColorHex:()=>$x,parseColorRgba:()=>Ux,pick:()=>H_,processQueue:()=>c4,promiseQueue:()=>ML,promptDownload:()=>No,propertyPathToString:()=>$_,removeFromArray:()=>$O,requestAnimFrame:()=>Nx,resizeElement:()=>tp,resolvePath:()=>WP,rgbaToRgb:()=>Ga,serializeXMLDocument:()=>cb,setAttributes:()=>Px,setCtxFont:()=>Eo,setElementSize:()=>ba,setKeys:()=>C$,setProperty:()=>xs,setValues:()=>Oc,smartRequire:()=>mi,throttle:()=>fm,toArray:()=>B_,toHexa:()=>my,toPropertyPath:()=>_a,traverse:()=>RL,unflatten:()=>V_,unorderedHash:()=>d4,workerIsAvailable:()=>YP});var w$={"embedded-opentype":!0,svg:!0};function E$(e,t){const n=/url\(['"]?([^'")]+)['"]?\)\s+format\(['"]?([^'")]+)['"]?\)/g,r=/font-family\s*:\s*['"]?([^;'"]+)['"]?;/,i=[];for(let s=0;s<e.length;s++){const o=e[s],a=o.match(r);if(a){const l=a[1],c=[];let d;for(;d=n.exec(o);){const u=d[1],h=d[2];w$[h.toLowerCase()]||c.push({format:h,url:WP(u,t)})}i.push({name:l,formats:c,originalRule:o})}}return i}function WP(e,t){if(/^http(s)?:/.test(e))return e;if(e[0]==="/"){const i=t.match(/((\w+:\/\/)([^/]+))/);return i?i[1]+e:e}const n=e.split("/"),r=t.split("/");for(t[t.length-1]!=="/"&&r.pop();n[0]==="..";)n.shift(),r.pop();return r.concat(n).join("/").replace(/[\w](\/{2,})/g,i=>i[0]+"/")}function S$(e){return e instanceof RegExp||e instanceof Date}var A$=typeof HTMLElement>"u"?e=>!1:e=>e instanceof HTMLElement,k$=function(e){return typeof e!="object"||e===null||Vn(e)||S$(e)};function Fm(e,t=[],n=[]){if(!A$(e)){if(k$(e))t.push({path:n.slice(),value:e});else{const r=Object.keys(e);for(let i=0;i<r.length;++i){const s=r[i],o=n.slice();o.push(s),Fm(e[s],t,o)}}return t}}var XP=class{constructor(){this._keys=[],this._values=[],this._size=0,this._cachedPath=[],this._cachedIndex=-1}get size(){return this._size}set(e,t){const n=this._getIndex(e);n!==-1?this._values[n]=t:(a0(this._cachedPath,e)&&(this._cachedIndex=this._keys.length),this._keys.push(e),this._values.push(t),this._size+=1)}get(e){const t=this._getIndex(e);if(t!==-1)return this._values[t]}has(e){return this._getIndex(e)!==-1}keys(){return this._keys.slice()}_getIndex(e){if(a0(e,this._cachedPath))return this._cachedIndex;this._cachedPath=e.slice();const t=this._keys;for(let n=0;n<t.length;++n)if(a0(t[n],e))return this._cachedIndex=n,n;return this._cachedIndex=-1,-1}};function a0(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}var Ey,C$=function(t){return Array.from(t.keys())},Oc=function(t){return Array.from(t.values())},Zd=mi("web-worker"),YP=!!Zd||typeof Worker<"u"&&typeof Blob<"u";function qP(e){return Zd?Sy(e):e}function Sy(e){if(ArrayBuffer.isView(e))return Array.from(e);if(Array.isArray(e)){for(let t=0;t<e.length;t++)e[t]=Sy(e[t]);return e}if(Sn(e)){const t=Object.keys(e);for(const n of t)e[n]=Sy(e[n]);return e}return e}function ZP(e){return Zd?N$(e):T$(e)}function T$(e){const t=new Blob([e],{type:"application/javascript"}),n=URL.createObjectURL(t);return new Worker(n)}function N$(e){if(Zd)return new Zd("data:application/javascript,"+e.replace(/\n/g,""))}var V2=mi("xmldom");Ey=typeof XMLSerializer<"u"?XMLSerializer:V2?V2.XMLSerializer:null;var L$=class JP{constructor(t){this._attributes={},this._children=[],this._name=t}setAttribute(t,n){this._attributes[t]=n}appendChild(t){this._children.push(t)}get tagName(){return this._name}get children(){return this._children}get childNodes(){return this._children}get firstChild(){return this._children[0]||null}serialize(){const t=this._name,n=this._attributes,r=this._children,i=Object.keys(n).filter(o=>n[o]!==void 0).map(o=>` ${o}="${""+n[o]}"`).join(""),s=r.map(o=>o.serialize()).join("");return s.length?`<${t}${i}>${s}</${t}>`:`<${t}${i}/>`}cloneNode(t){const n=new JP(this._name),r=Object.keys(this._attributes);for(const i of r)n.setAttribute(i,this._attributes[i]);if(t)for(let i=0;i<this._children.length;i++)n.appendChild(this._children[i].cloneNode(t));return n}},QP=class KP{constructor(t){this._text=t}serialize(){return this._text}cloneNode(){return new KP(this._text)}},I$=class{constructor(){this._children=[],this._meta=[],this._children=[],this._meta=[]}appendChild(e){this._children.push(e)}serialize(){return this._meta.concat(this._children.map(e=>e.serialize())).join("")}createElement(e){return new L$(e)}createTextNode(e){return new QP(e)}},eM=()=>new I$;function cb(e){if(Ey)return new Ey().serializeToString(e)}var tM=()=>Ns().implementation.createDocument("","",null),Eu=class{constructor(e,t){this._graph=e,this._nodes={elementList:e.nodeList,flexArray:e.createNodeAttribute({storage:1,name:t},!!t),indexList:e.createIndexList(!0)},this._edges={elementList:e.edgeList,flexArray:e.createEdgeAttribute({storage:1,name:t},!!t),indexList:e.createIndexList(!1)}}_get(e){return e.isNode?this._nodes:this._edges}addOrRemoveElements(e,t){return t?this.addElements(e):this.removeElements(e)}addElements(e){const{elementList:t,flexArray:n,indexList:r}=this._get(e),i=r.getLength();for(let s=0;s<e._indexes.length;s++){const o=e._indexes[s];n.get(o)!==1&&(n.set(o,1),r.pushUnchecked(o))}return t(r.slice(i))}removeElements(e){const{elementList:t,flexArray:n,indexList:r}=this._get(e),i=r.getLength(),s=r.getBuffer();if(i>s.length)return this.clear(),this.addElements(e),e;let o=0;for(let a=0;a<e._indexes.length;a++){const l=e._indexes[a];n.get(l)!==0&&(n.set(l,0),o+=1)}if(o===i)return t(r.sliceAndReset());if(o===0)return t();{const a=this._graph.acquireIndexList(e.isNode);let l=0;for(let c=0;c<i;++c){const d=s[c];n.get(d)===0?(l+=1,a.pushUnchecked(d)):s[c-l]=d}return r.setLength(i-o),t(a.sliceAndReset())}}hasElement(e){return!!this._get(e).flexArray.get(e._index)}clear(){this._nodes.indexList.isEmpty()||(this._nodes.indexList.reset(),this._nodes.flexArray.reset()),this._edges.indexList.isEmpty()||(this._edges.indexList.reset(),this._edges.flexArray.reset())}isEmpty(){return this._nodes.indexList.isEmpty()&&this._edges.indexList.isEmpty()}getElements(){return{nodes:this._nodes.elementList(this._nodes.indexList.slice()),edges:this._edges.elementList(this._edges.indexList.slice())}}};function P$(e,t,n,r=0){t===void 0&&(t=n=Math.sqrt(e.length/4)),n===void 0&&(n=t);const i=document.createElement("canvas"),s=i.getContext("2d");if(s){const o=s.createImageData(t,n);i.style.imageRendering="pixelated",i.style.border="1px solid black",i.style.margin="2px",i.style.position="absolute",i.style.top=i.style.left="0px",i.width=t,i.height=n,o.data.set(e),s.putImageData(o,0,0);const a=document.getElementById("graph-container");a&&(a.style.position="static"),setTimeout(()=>document.body.appendChild(i),r)}}var M$=class{constructor(e,t){this._attributesManager=e,this._id=t}getDefinition(){return this._attributesManager.getAttributeLayerDefinition(this._id)}update(e){this._attributesManager.updateAttributeLayer(this._id,e)}destroy(){this._attributesManager.destroyAttributeLayer(this._id)}updateElements(e){this._attributesManager.updateElementsForAttributeLayer(this._id,e)}updateAll(){this._attributesManager.updateAllForAttributeLayer(this._id)}setAttributeValues(e,t,n){this._attributesManager.setAttributeLayerValues(this._id,e,t,n)}getUsedAttributeNames(e){return this._attributesManager.getUsedAttributeLayerAttributes(this._id,e)}getFlexArrays(){return this._attributesManager.getAttributeLayerFlexArrays(this._id)}},db={};pu(db,{cubicIn:()=>z$,cubicInOut:()=>B$,cubicOut:()=>O$,linear:()=>yp,quadraticIn:()=>F$,quadraticInOut:()=>D$,quadraticOut:()=>R$});var yp=e=>e,F$=e=>e*e,R$=e=>e*(2-e),D$=e=>(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1),z$=e=>e*e*e,O$=e=>--e*e*e+1,B$=e=>(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2),j$={name:"animationStart",storage:32,default:0},U$={name:"animationDuration",storage:16,default:0},$$={name:"animationEasing",storage:"resource",default:"linear"},G$={self:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},adjacentNodes:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},adjacentEdges:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},allNodes:void 0,allEdges:void 0},V$={self:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},extremities:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},parallelEdges:{attributes:"all",tags:[],selection:!0,hover:!1,data:!0},allNodes:void 0,allEdges:void 0},H$={x:1,y:1,radius:1,"halo.hideNonAdjacentEdges":1};function gd(e){return typeof e=="string"}var _r="Arial",So="black",vp="rgba(255,255,255,0)",$l=12,Jd=3,ub=7,W$=!0,hb=10,X$=5,nM=.08,rM="rgba(255,255,255,0)",iM="normal",sM="center",oM=!1,aM=0,Ay="red",lM="rgb(220, 220, 220)",cM="red",dM="rgb(220, 220, 220)",ky=1,uM="scaled",hM="grey",gM=1,pM=0,mM=0,fM=!0,_M=0,yM=!0,vM="line",xM=null,bM=null,wM="plain",EM="inherit",Cy=0,SM="fixed",AM=0,kM=null,Ty=10,CM="fixed",TM=1e3,NM=800,LM="rgba(0, 0, 0, 0.6)",IM="rgba(0, 0, 0, 0)",PM=10,MM=1,FM=2,RM="rgba(0, 0, 0, 0.36)",DM=0,Y$=1,zM="normal",OM="center",BM=2,Ny=2,jM=wu,UM=4,$M=!0,GM=4,Ly=2,Iy=12,VM=2;function q$(e,t,n){let r,i,s,o;n==="line"?(r="line",i="plain",s=null,o=null):n==="arrow"?(r="line",i="plain",s="arrow",o=null):n==="tapered"?(r="triangle",i="plain",s=null,o=null):n==="dashed"?(r="line",i="dashed",s=null,o=null):n==="dotted"&&(r="line",i="dotted",s=null,o=null),e.shape.body.set(t,r),e.shape.style.set(t,i),e.shape.head.set(t,s),e.shape.tail.set(t,o)}var HM={width:{_flexArray:ky,_check:Ot(ky)},scalingMethod:{_flexArray:uM,_check:to},color:{_flexArray:hM,_check:TU},opacity:{_flexArray:gM,_check:nn},minVisibleSize:{_flexArray:pM,_check:nn},layer:{_flexArray:mM,_check:zP},detectable:{_flexArray:fM,_check:Un},curvature:{_flexArray:_M,_check:oa},adjustAnchors:{_flexArray:yM,_check:Un},shape:{_check:LU,_set:q$,type:"shape.head",body:{_flexArray:vM,_check:IU},head:{_flexArray:xM,_check:L2},tail:{_flexArray:bM,_check:L2},style:{_flexArray:wM,_check:PU}},stroke:{color:{_flexArray:EM,_check:tr},width:{_flexArray:Cy,_check:Ot(Cy)},scalingMethod:{_flexArray:SM,_check:to},minVisibleSize:{_flexArray:AM,_check:nn}},strokeWidth:"stroke.width",halo:{_alias:"halo.color",color:{_flexArray:kM,_check:no},width:{_flexArray:Ty,_check:Ot(Ty)},scalingMethod:{_flexArray:CM,_check:to},size:"halo.width"},pulse:{enabled:{_flexArray:!1,_check:Un},duration:{_flexArray:TM,_check:nn},interval:{_flexArray:NM,_check:nn},startColor:{_flexArray:LM,_check:tr},endColor:{_flexArray:IM,_check:tr},width:{_flexArray:PM,_check:nn},startRatio:{_flexArray:MM,_check:nn},endRatio:{_flexArray:FM,_check:nn}},outline:{_alias:"outline.enabled",enabled:{_flexArray:!1,_check:Un},color:{_flexArray:RM,_check:no},minVisibleSize:{_flexArray:DM,_check:nn}},text:{_alias:"text.content",content:{_flexArray:null,_check:fs},font:{_flexArray:_r,_check:wl},color:{_flexArray:So,_check:no},size:{_flexArray:$l,_check:Ot($l)},scale:{_flexArray:1,_check:nn},style:{_flexArray:zM,_check:El},align:{_flexArray:OM,_check:_p},margin:{_flexArray:BM,_check:oa},padding:{_flexArray:Ny,_check:Ot(Ny)},backgroundColor:{_flexArray:vp,_check:tr},minVisibleSize:{_flexArray:UM,_check:nn},position:{_flexArray:jM,_check:CU},adjustAngle:{_flexArray:$M,_check:Un},scaling:{_flexArray:oM,_check:Un},maxLineLength:{_flexArray:aM,_check:nn},secondary:{_alias:"text.secondary.content",content:{_flexArray:null,_check:fs},font:{_flexArray:_r,_check:wl},color:{_flexArray:So,_check:no},size:{_flexArray:Iy,_check:Ot(Iy)},scale:{_flexArray:nM,_check:nn},style:{_flexArray:iM,_check:El},align:{_flexArray:sM,_check:_p},margin:{_flexArray:VM,_check:oa},padding:{_flexArray:Ly,_check:Ot(Ly)},backgroundColor:{_flexArray:rM,_check:tr},minVisibleSize:{_flexArray:GM,_check:nn}}}},WM="grey",XM="white",gb=2,YM=null,pb=5,Py=0,qM="rgba(0, 0, 0, 0.36)",Z$=1,J$="circle",My=12,Bc="white",yh=12,jc="black",gl=2,Uc="black",mb=40,ZM=null,JM=null,fb=1,QM="black",KM=1e3,eF=800,tF=1,nF=2,rF="rgba(0, 0, 0, 0.0)",iF="rgba(0, 0, 0, 0.6)",sF=50,Q$=.1,qs=12,vh=24,Qd=1,H2=Qd/2,W2=.45,X2=.7,K$=10,oF=K$/2,aF=5,eG=Ot(aF),tG=Ot($l),nG=Ot(hb),rG=Ot(gb),iG=Ot(pb),sG=Ot(ub),Y2=Ot(Jd),oG=Ot(oF),aG=Ot(mb),lG=Ot(fb);function xh(e){return{_check:fs,_set:(t,n,r)=>{t.badges[e].text.content.set(n,r),r==null&&t.badges[e].image.url.set(n,r)},_get:(t,n)=>t.badges[e].text.content.get(n),color:{_flexArray:Bc,_check:tr},scale:{_flexArray:W2,_check:Ot(W2)},positionScale:{_flexArray:1,_check:nn},minVisibleSize:{_flexArray:qs,_check:Ot(qs)},image:{_alias:`badges.${e}.image.url`,url:{_flexArray:null,_check:fs},scale:{_flexArray:Qd,_check:Ot(Qd)}},stroke:{color:{_flexArray:jc,_check:tr},width:{_flexArray:gl,_check:Ot(gl)},scalingMethod:{_flexArray:"fixed",_check:to}},text:{_alias:`badges.${e}.text.content`,content:{_flexArray:null,_check:fs},color:{_flexArray:Uc,_check:tr},font:{_flexArray:_r,_check:wl},style:{_flexArray:"normal",_check:El},scale:{_flexArray:H2,_check:Ot(H2)},paddingLeft:{_flexArray:0,_check:oa},paddingTop:{_flexArray:0,_check:oa}}}}var lF={x:{_flexArray:0,_check:oa,_disableMemoryOptimization:!0},y:{_flexArray:0,_check:oa,_disableMemoryOptimization:!0},radius:{_flexArray:aF,_check:eG},scalingMethod:{_flexArray:"scaled",_check:to},color:{_flexArray:WM,_check:FU},opacity:{_flexArray:1,_check:nn},shape:{_flexArray:"circle",_check:NU},layer:{_flexArray:0,_check:zP},detectable:{_flexArray:!0,_check:Un},draggable:{_flexArray:!0,_check:Un},layoutable:{_flexArray:!0,_check:Un},innerStroke:{_alias:"innerStroke.color",width:{_flexArray:gb,_check:rG},scalingMethod:{_flexArray:"fixed",_check:to},color:{_flexArray:XM,_check:tr},minVisibleSize:{_flexArray:My,_check:Ot(My)}},outerStroke:{_alias:"outerStroke.color",width:{_flexArray:pb,_check:iG},scalingMethod:{_flexArray:"fixed",_check:to},color:{_flexArray:YM,_check:tr},minVisibleSize:{_flexArray:Py,_check:Ot(Py)}},badges:{_check:AU,_set(e,t,n){e.badges.topLeft.text.content.set(t,n),e.badges.topLeft.image.url.set(t,n),e.badges.topRight.text.content.set(t,n),e.badges.topRight.image.url.set(t,n),e.badges.bottomLeft.text.content.set(t,n),e.badges.bottomLeft.image.url.set(t,n),e.badges.bottomRight.text.content.set(t,n),e.badges.bottomRight.image.url.set(t,n)},topLeft:xh("topLeft"),topRight:xh("topRight"),bottomLeft:xh("bottomLeft"),bottomRight:xh("bottomRight")},halo:{_alias:"halo.color",color:{_flexArray:ZM,_check:no},width:{_flexArray:mb,_check:aG},scalingMethod:{_flexArray:"fixed",_check:to},strokeColor:{_flexArray:JM,_check:no},strokeWidth:{_flexArray:fb,_check:lG},clustering:{_flexArray:!1,_check:Un},hideNonAdjacentEdges:{_flexArray:!1,_check:Un}},pulse:{enabled:{_flexArray:!1,_check:Un},duration:{_flexArray:KM,_check:nn},interval:{_flexArray:eF,_check:nn},startColor:{_flexArray:iF,_check:tr},endColor:{_flexArray:rF,_check:tr},width:{_flexArray:sF,_check:nn},startRatio:{_flexArray:tF,_check:nn},endRatio:{_flexArray:nF,_check:nn}},icon:{_alias:"icon.content",content:{_flexArray:null,_check:fs},font:{_flexArray:_r,_check:wl},color:{_flexArray:QM,_check:no},scale:{_flexArray:X2,_check:Ot(X2)},style:{_flexArray:"normal",_check:El},minVisibleSize:{_flexArray:qs,_check:Ot(qs)}},image:{_alias:"image.url",url:{_flexArray:null,_check:fs},scale:{_flexArray:Qd,_check:Ot(Qd)},fit:{_flexArray:!0,_check:Un},tile:{_flexArray:!1,_check:Un},minVisibleSize:{_flexArray:qs,_check:Ot(qs)}},outline:{_alias:"outline.enabled",enabled:{_flexArray:!1,_check:Un},color:{_flexArray:qM,_check:no},minVisibleSize:{_flexArray:qs,_check:Ot(qs)}},text:{_alias:"text.content",content:{_flexArray:null,_check:fs},font:{_flexArray:_r,_check:wl},color:{_flexArray:So,_check:tr},size:{_flexArray:$l,_check:tG},scale:{_flexArray:Q$,_check:nn},style:{_flexArray:"normal",_check:El},align:{_flexArray:"center",_check:_p},margin:{_flexArray:ub,_check:sG},padding:{_flexArray:Jd,_check:Y2},backgroundColor:{_flexArray:null,_check:tr},tip:{_flexArray:!0,_check:Un},minVisibleSize:{_flexArray:vh,_check:Ot(vh)},scaling:{_flexArray:!1,_check:Un},position:{_flexArray:"bottom",_check:MU},maxLineLength:{_flexArray:0,_check:nn},truncateLength:{_flexArray:0,_check:nn},secondary:{_alias:"text.secondary.content",content:{_flexArray:null,_check:fs},font:{_flexArray:_r,_check:wl},color:{_flexArray:So,_check:tr},size:{_flexArray:hb,_check:nG},scale:{_flexArray:.08,_check:nn},style:{_flexArray:"normal",_check:El},align:{_flexArray:"center",_check:_p},margin:{_flexArray:oF,_check:oG},padding:{_flexArray:Jd,_check:Y2},backgroundColor:{_flexArray:null,_check:tr},minVisibleSize:{_flexArray:vh,_check:Ot(vh)}}}},cG=e=>(t,n)=>t[e].get(n),dG=(e,t)=>(n,r)=>n[e][t].get(r),uG=(e,t,n)=>(r,i)=>r[e][t][n].get(i),hG=(e,t,n,r)=>(i,s)=>i[e][t][n][r].get(s),gG=e=>(t,n,r)=>t[e].set(n,r),pG=(e,t)=>(n,r,i)=>n[e][t].set(r,i),mG=(e,t,n)=>(r,i,s)=>r[e][t][n].set(i,s),fG=(e,t,n,r)=>(i,s,o)=>i[e][t][n][r].set(s,o),_G=[cG,dG,uG,hG],yG=[gG,pG,mG,fG];function q2(e,t){if(!e._check)throw new Error(`error somewhere for ${t}`);const n=t.split("."),r=n.length-1,i=_G[r].apply(null,n),s=yG[r].apply(null,n);return{check:e._check,set:s,get:i,nested:{}}}function xp(e,t){const n=t?lF:HM,r=typeof e=="string"?[e]:va(e,"",[]);let i=!1;const s=[];for(let o=0;o<r.length;o++){const a=r[o].split(".");let l=n[a[0]];for(let d=1;d<a.length;d++)l=l[a[d]];l.type&&(r[o]=l.type),l._alias&&(r[o]=l._alias),r[o]==="badges"&&(r[o]="badges.topLeft.text.content",i=!0);const c=a[a.length-1];c!=="topLeft"&&c!=="topRight"&&c!=="bottomLeft"&&c!=="bottomRight"||(r[o]=`badges.${c}.text.content`,s.push(`badges.${c}.image.url`)),r[o]==="strokeWidth"&&(r[o]="stroke.width")}return i&&(r.push("badges.topLeft.image.url"),r.push("badges.topRight.text.content"),r.push("badges.topRight.image.url"),r.push("badges.bottomLeft.text.content"),r.push("badges.bottomLeft.image.url"),r.push("badges.bottomRight.text.content"),r.push("badges.bottomRight.image.url")),r.push(...s),r}var bh=e=>(t,n)=>({url:t.badges[e].image.url.get(n),scale:t.badges[e].image.scale.get(n)}),wh=e=>(t,n)=>({color:t.badges[e].stroke.color.get(n),width:t.badges[e].stroke.width.get(n),scalingMethod:t.badges[e].stroke.scalingMethod.get(n)}),Eh=e=>(t,n)=>({content:t.badges[e].text.content.get(n),color:t.badges[e].text.color.get(n),font:t.badges[e].text.font.get(n),style:t.badges[e].text.style.get(n),scale:t.badges[e].text.scale.get(n),paddingLeft:t.badges[e].text.paddingLeft.get(n),paddingTop:t.badges[e].text.paddingTop.get(n)}),Sh=e=>(t,n)=>({color:t.badges[e].color.get(n),scale:t.badges[e].scale.get(n),positionScale:t.badges[e].positionScale.get(n),minVisibleSize:t.badges[e].minVisibleSize.get(n),image:{url:t.badges[e].image.url.get(n),scale:t.badges[e].image.scale.get(n)},stroke:{color:t.badges[e].stroke.color.get(n),width:t.badges[e].stroke.width.get(n),scalingMethod:t.badges[e].stroke.scalingMethod.get(n)},text:{content:t.badges[e].text.content.get(n),color:t.badges[e].text.color.get(n),font:t.badges[e].text.font.get(n),style:t.badges[e].text.style.get(n),scale:t.badges[e].text.scale.get(n),paddingLeft:t.badges[e].text.paddingLeft.get(n),paddingTop:t.badges[e].text.paddingTop.get(n)}}),$s={topLeft:Sh("topLeft"),topRight:Sh("topRight"),bottomLeft:Sh("bottomLeft"),bottomRight:Sh("bottomRight")},Ei={stroke:(e,t)=>({color:e.stroke.color.get(t),width:e.stroke.width.get(t),scalingMethod:e.stroke.scalingMethod.get(t),minVisibleSize:e.stroke.minVisibleSize.get(t)}),innerStroke:(e,t)=>({width:e.innerStroke.width.get(t),scalingMethod:e.innerStroke.scalingMethod.get(t),color:e.innerStroke.color.get(t),minVisibleSize:e.innerStroke.minVisibleSize.get(t)}),outerStroke:(e,t)=>({width:e.outerStroke.width.get(t),scalingMethod:e.outerStroke.scalingMethod.get(t),color:e.outerStroke.color.get(t),minVisibleSize:e.outerStroke.minVisibleSize.get(t)}),pulse:(e,t)=>({enabled:e.pulse.enabled.get(t),duration:e.pulse.duration.get(t),interval:e.pulse.interval.get(t),startColor:e.pulse.startColor.get(t),endColor:e.pulse.endColor.get(t),width:e.pulse.width.get(t),startRatio:e.pulse.startRatio.get(t),endRatio:e.pulse.endRatio.get(t)}),outline:(e,t)=>({enabled:e.outline.enabled.get(t),color:e.outline.color.get(t),minVisibleSize:e.outline.minVisibleSize.get(t)}),halo:(e,t)=>({color:e.halo.color.get(t),width:e.halo.width.get(t),scalingMethod:e.halo.scalingMethod.get(t),strokeColor:e.halo.strokeColor.get(t),strokeWidth:e.halo.strokeWidth.get(t),clustering:e.halo.clustering.get(t),hideNonAdjacentEdges:e.halo.hideNonAdjacentEdges.get(t)}),"text.secondary":(e,t)=>({content:e.text.secondary.content.get(t),font:e.text.secondary.font.get(t),color:e.text.secondary.color.get(t),size:e.text.secondary.size.get(t),scale:e.text.secondary.scale.get(t),style:e.text.secondary.style.get(t),align:e.text.secondary.align.get(t),margin:e.text.secondary.margin.get(t),padding:e.text.secondary.padding.get(t),backgroundColor:e.text.secondary.backgroundColor.get(t),minVisibleSize:e.text.secondary.minVisibleSize.get(t)}),text:(e,t)=>({content:e.text.content.get(t),font:e.text.font.get(t),color:e.text.color.get(t),size:e.text.size.get(t),scale:e.text.scale.get(t),style:e.text.style.get(t),align:e.text.align.get(t),margin:e.text.margin.get(t),padding:e.text.padding.get(t),backgroundColor:e.text.backgroundColor.get(t),tip:e.text.tip.get(t),minVisibleSize:e.text.minVisibleSize.get(t),scaling:e.text.scaling.get(t),position:e.text.position.get(t),maxLineLength:e.text.maxLineLength.get(t),truncateLength:e.text.truncateLength.get(t),secondary:Ei["text.secondary"](e,t)}),image:(e,t)=>({url:e.image.url.get(t),scale:e.image.scale.get(t),fit:e.image.fit.get(t),tile:e.image.tile.get(t),minVisibleSize:e.image.minVisibleSize.get(t)}),icon:(e,t)=>({content:e.icon.content.get(t),font:e.icon.font.get(t),color:e.icon.color.get(t),scale:e.icon.scale.get(t),style:e.icon.style.get(t),minVisibleSize:e.icon.minVisibleSize.get(t)}),badges:(e,t)=>({topLeft:$s.topLeft(e,t),topRight:$s.topRight(e,t),bottomLeft:$s.bottomLeft(e,t),bottomRight:$s.bottomRight(e,t)}),"badges.topLeft":$s.topLeft,"badges.topRight":$s.topRight,"badges.bottomLeft":$s.bottomLeft,"badges.bottomRight":$s.bottomRight,"badges.topLeft.image":bh("topLeft"),"badges.topLeft.stroke":wh("topLeft"),"badges.topLeft.text":Eh("topLeft"),"badges.topRight.image":bh("topRight"),"badges.topRight.stroke":wh("topRight"),"badges.topRight.text":Eh("topRight"),"badges.bottomLeft.image":bh("bottomLeft"),"badges.bottomLeft.stroke":wh("bottomLeft"),"badges.bottomLeft.text":Eh("bottomLeft"),"badges.bottomRight.image":bh("bottomRight"),"badges.bottomRight.stroke":wh("bottomRight"),"badges.bottomRight.text":Eh("bottomRight"),all:(e,t)=>({x:e.x.get(t),y:e.y.get(t),radius:e.radius.get(t),scalingMethod:e.scalingMethod.get(t),color:e.color.get(t),opacity:e.opacity.get(t),shape:e.shape.get(t),layer:e.layer.get(t),detectable:e.detectable.get(t),draggable:e.draggable.get(t),layoutable:e.layoutable.get(t),innerStroke:Ei.innerStroke(e,t),outerStroke:Ei.outerStroke(e,t),badges:Ei.badges(e,t),halo:Ei.halo(e,t),pulse:Ei.pulse(e,t),icon:Ei.icon(e,t),image:Ei.image(e,t),outline:Ei.outline(e,t),text:Ei.text(e,t)})},Gs={shape:(e,t)=>({body:e.shape.body.get(t),head:e.shape.head.get(t),tail:e.shape.tail.get(t),style:e.shape.style.get(t)}),"text.secondary":(e,t)=>({content:e.text.secondary.content.get(t),font:e.text.secondary.font.get(t),color:e.text.secondary.color.get(t),size:e.text.secondary.size.get(t),scale:e.text.secondary.scale.get(t),style:e.text.secondary.style.get(t),align:e.text.secondary.align.get(t),margin:e.text.secondary.margin.get(t),padding:e.text.secondary.padding.get(t),backgroundColor:e.text.secondary.backgroundColor.get(t),minVisibleSize:e.text.secondary.minVisibleSize.get(t)}),text:(e,t)=>({content:e.text.content.get(t),font:e.text.font.get(t),color:e.text.color.get(t),size:e.text.size.get(t),scale:e.text.scale.get(t),style:e.text.style.get(t),align:e.text.align.get(t),margin:e.text.margin.get(t),padding:e.text.padding.get(t),position:e.text.position.get(t),backgroundColor:e.text.backgroundColor.get(t),minVisibleSize:e.text.minVisibleSize.get(t),adjustAngle:e.text.adjustAngle.get(t),scaling:e.text.scaling.get(t),maxLineLength:e.text.maxLineLength.get(t),secondary:Gs["text.secondary"](e,t)}),outline:(e,t)=>({enabled:e.outline.enabled.get(t),color:e.outline.color.get(t),minVisibleSize:e.outline.minVisibleSize.get(t)}),pulse:(e,t)=>({enabled:e.pulse.enabled.get(t),duration:e.pulse.duration.get(t),interval:e.pulse.interval.get(t),startColor:e.pulse.startColor.get(t),endColor:e.pulse.endColor.get(t),width:e.pulse.width.get(t),startRatio:e.pulse.startRatio.get(t),endRatio:e.pulse.endRatio.get(t)}),stroke:(e,t)=>({color:e.stroke.color.get(t),width:e.stroke.width.get(t),scalingMethod:e.stroke.scalingMethod.get(t),minVisibleSize:e.stroke.minVisibleSize.get(t)}),halo:(e,t)=>({color:e.halo.color.get(t),width:e.halo.width.get(t),scalingMethod:e.halo.scalingMethod.get(t)}),all:(e,t)=>({width:e.width.get(t),scalingMethod:e.scalingMethod.get(t),color:e.color.get(t),opacity:e.opacity.get(t),minVisibleSize:e.minVisibleSize.get(t),layer:e.layer.get(t),detectable:e.detectable.get(t),curvature:e.curvature.get(t),adjustAnchors:e.adjustAnchors.get(t),shape:Gs.shape(e,t),stroke:Gs.stroke(e,t),halo:Gs.halo(e,t),pulse:Gs.pulse(e,t),outline:Gs.outline(e,t),text:Gs.text(e,t)})};function _b(e,t,n,r=!0){if((t=t||e)._flexArray!==void 0)return q2(t,n);let i={check:Mi,get:wt,set:wt,nested:{}};if(gd(t)||t._alias){const s=gd(t)?t:t._alias;i=q2(ln(e,s),s)}else{if(t._set?(i.set=t._set,i.check=t._check):(i.set=wt,i.check=wt),t._get)i.get=t._get;else{const s=r?Ei:Gs;i.get=s[n||"all"]}i.nested={}}if(!gd(t)){const s=Object.keys(t);for(const o of s){const a=t[o];o.startsWith("_")||(i.nested[o]=_b(e,a,n?n+"."+o:o,r))}}return i}var vG=_b(lF,void 0,void 0,!0),xG=_b(HM,void 0,void 0,!1),bG=[];function Z2(e){let t=bG;return e.output===void 0?(typeof e.attributes=="function"&&(t="all"),Sn(e.attributes)&&(t=va(e.attributes))):e.output&&(t=e.output.attributes),yb(t,e.allAttributePaths)}function wG(e,t,n,r){if(r>n){for(const i of t.attributes)for(const s of e.attributes)if(s===i)return!0}for(const i of t.tags)for(const s of e.tags)if(i===s)return!0;return!1}function Ui(e,t,n,r,i,s){wG(n,r,i,s)&&e.push(t)}function EG(e){let t=e.dependencies;t===void 0?t=G$:Sn(t)||(t={});const n=ym(e.attributes).some(o=>typeof o=="function"),r=e.selector&&!e.standaloneSelector,i=!(!n&&!r);let s=t.adjacentEdges;return!s&&t.adjacentNodes&&(s=!0),{self:Zi(t.self,i,e.allAttributePaths),adjacentNodes:Zi(t.adjacentNodes,i,e.allAttributePaths),adjacentEdges:Zi(s,i,e.allAttributePaths),allNodes:Zi(t.allNodes,i,e.allAttributePaths),allEdges:Zi(t.allEdges,i,e.allAttributePaths)}}function SG(e){let t=e.dependencies;t===void 0?t=V$:Sn(t)||(t={});const n=ym(e.attributes).some(s=>typeof s=="function"),r=e.selector&&!e.standaloneSelector,i=!(!n&&!r);return{self:Zi(t.self,i,e.allAttributePaths),extremities:Zi(t.extremities,i,e.allAttributePaths),parallelEdges:Zi(t.parallelEdges,i,e.allAttributePaths),allNodes:Zi(t.allNodes,i,e.allAttributePaths),allEdges:Zi(t.allEdges,i,e.allAttributePaths)}}function Zi(e,t,n){if(!t)return{attributes:[],tags:[]};if(e===!0)return{attributes:[],tags:[oy]};const r={attributes:yb((e=e||{}).attributes,n),tags:CG(e.tags)};return e.data&&r.tags.push(ay),e.selection&&r.tags.push(tn),e.hover&&r.tags.push(ld),r}function AG(e){return Array.isArray(e)?e.join("."):e}function kG(e){return e.map(AG).filter(gd)}function yb(e,t){if(e==="all")return t.slice();if(!Array.isArray(e))return[];const n=kG(e);return t?t.filter(r=>n.some(i=>r.startsWith(i))):n}function CG(e){return Array.isArray(e)?e.filter(gd):[]}var J2={storage:1,default:0},bp=class{constructor({graph:e,isNode:t,includeRemovedElements:n}){this._all=!1,this._isNode=t,this._graph=e,this._includeRemovedElements=n,this._eltList=t?this._graph.nodeList:this._graph.edgeList,this._flexArray=t?e.createNodeAttribute(J2,!1):e.createEdgeAttribute(J2,!1),this._all=!1,this._indexList=e.createIndexList(t)}_getAllIndexes(){const e=this._isNode?this._graph.getNodeMaxIndex():this._graph.getEdgeMaxIndex(),t=new Uint32Array(e);for(let n=1;n<=e;++n)t[n-1]=n;return t}addAll(){this._all=!0}add(e){if(!this._all)for(let t=0;t<e._indexes.length;t++){const n=e._indexes[t];this.addIndex(n)}}addIndex(e){this._flexArray.get(e)===0&&(this._flexArray.set(e,1),this._indexList.push(e))}isEmpty(){return!this._all&&this._indexList.isEmpty()}isFull(){return this._all}getListAndClear(){const e=this.getList();return this.clear(),e}getList(){let e;if(this._all&&!this._includeRemovedElements)e=this._isNode?this._graph.getNodes("all"):this._graph.getEdges("all");else{const t=this._all?this._getAllIndexes():this._indexList.slice();e=this._eltList(t)}return e}clear(){this._all=!1,this._indexList.isEmpty()||(this._indexList.reset(),this._flexArray.reset())}addSet(e){if(e._all)this.addAll();else{const t=e._indexList.getBuffer(),n=e._indexList.getLength();for(let r=0;r<n;++r)this.addIndex(t[r])}}};function cF(e,t=[],n=""){return e.constructor===hp?e.isInitialized()&&t.push(n):e.constructor===Object&&Object.keys(e).forEach(r=>{cF(e[r],t,n?n+"."+r:r)}),t}var Q2=class{constructor(e,t,n){this._updatedAttributes=new Set,this._updatedAttributesTmp=new Set,this._allUsedAttributes=new Set,this._graph=e,this._eltName=t?"node":"edge",this._accessors=t?vG:xG,this._createFlexArrays=n;const r=this._createFlexArrays(e,{original:!0,useDefaultValues:!0});this._finalFlexArrays=r;const i=this._createFlexArrays(e,{original:!1,useDefaultValues:!0});this._prevFlexArrays=i;const s=this._createFlexArrays(e,{original:!1,useDefaultValues:!0});this._defaultFlexArrays=s,this._currentFlexArrays=this._defaultFlexArrays,this.setLastFlexArrays(this._defaultFlexArrays),this._elementsToRedraw=new bp({graph:e,isNode:t,includeRemovedElements:!0}),this._elementsUpdated=new bp({graph:e,isNode:t,includeRemovedElements:!1}),this._finalFlexArraysWrapped=be(yt(be({},this._finalFlexArrays),{excluded:e.getAttribute(t,"excluded"),textHidden:e.getAttribute(t,"textHidden"),animationStart:e.createAttribute(t,j$),animationDuration:e.createAttribute(t,U$),animationEasing:e.createAttribute(t,$$),id:this._graph.getAttribute(t,"id")}),!t&&{source:e.getEdgeAttribute("source"),target:e.getEdgeAttribute("target")})}clear(){this._elementsToRedraw.clear(),this._elementsUpdated.clear(),this._updatedAttributes.clear(),this._updatedAttributesTmp.clear()}getAttributeFlexArrays(){return this._finalFlexArraysWrapped}getPrevAttributeFlexArrays(){return this._prevFlexArrays}getAnimationInformation(e){const t=e._indexes,n=Array(t.length),r=this._finalFlexArraysWrapped;for(let i=0;i<t.length;i++){const s=t[i];n[i]={duration:r.animationDuration.get(s),start:r.animationStart.get(s),easing:r.animationEasing.get(s)}}return n}setDefaultAttributes(e){va(e).forEach(t=>{const n=ln(this._currentFlexArrays,t),r=ln(this._prevFlexArrays,t),i=ln(this._defaultFlexArrays,t),s=ln(this._finalFlexArrays,t);if(!n)return;const o=ln(e,t);n.setDefaultValue(o),i.setDefaultValue(o),r.setDefaultValue(o),s.setDefaultValue(o)}),this.redrawAll()}startUpdate(){}prepareFlexArraysUpdate(e){this._currentFlexArrays=e.inputFlexArrays}setLastFlexArrays(e){this._lastFlexArrays=e}updateFlexArrays(e){const{attributes:t,selector:n,context:r,outputFlexArrays:i,toUpdate:s,formattedOutput:o}=e;this._elementsUpdated.addSet(s),this._elementsToRedraw.addSet(s);const a=s.getListAndClear();if(t&&a.size){const{valid:l,invalid:c}=uI(this._graph,a,n,r);for(const d of o.attributes){const u=ln(i,d);for(let h=0;h<c._indexes.length;h++){const g=c._indexes[h];u.set(g,void 0)}}this._assignAttributesToFlexArrays(this._accessors,i,l,t,r),this._addUpdatedAttributes(e)}}endUpdate(){const e=this._elementsUpdated.getList(),t=Oc(this._updatedAttributesTmp);for(const n of t){const r=ln(this._lastFlexArrays,n),i=ln(this._finalFlexArrays,n);for(let s=0;s<e._indexes.length;s++){const o=e._indexes[s];i.set(o,r.get(o))}}this._updatedAttributesTmp.clear(),this._currentFlexArrays=this._finalFlexArrays}setAttributeValues(e,t,n,r,i){const s=e.outputFlexArrays,o=this._accessors;this._assignAttributesToFlexArrays(o,s,t,n,null),this._addUpdatedAttributes(e,r),this._elementsUpdated.add(t),this._elementsToRedraw.add(t)}notifyLayerDestroyed(e){this._addUpdatedAttributes(e)}_addUpdatedAttributes(e,t){const{outputFlexArrays:n,formattedOutput:r}=e,i=Array.isArray(t)?yb(t):r.attributes;for(const s of i)ln(n,s).isInitialized()&&(this._updatedAttributes.add(s),this._updatedAttributesTmp.add(s),this._allUsedAttributes.add(s))}addUpdatedAttribute(e){this._updatedAttributes.add(e),this._updatedAttributesTmp.add(e),this._allUsedAttributes.add(e)}getUsedAttributeNames(e){return cF(e.outputFlexArrays)}redrawElements(e){this._elementsToRedraw.add(e)}redrawAll(){this._elementsToRedraw.addAll()}getAndResetElementsToRedraw(){return this._elementsToRedraw.getListAndClear()}getAndResetElementsUpdated(){return this._elementsUpdated.getListAndClear()}getAndResetAttributesUpdated(){const e=Oc(this._updatedAttributes);return this._updatedAttributes.clear(),e}getUpdatedAttributes(){return this._updatedAttributes}getUpdatedElementsList(){return this._elementsUpdated.getList()}getUpdatedAttributesSet(){return new Set(this._updatedAttributes)}createFlexArrays(){return this._createFlexArrays(this._graph,{original:!1,useDefaultValues:!1})}getAttributeValues(e,t,n,r){const i=r?this._prevFlexArrays:this._currentFlexArrays;return n?this._getMultipleAttributeValues(e,t,i):this._getSingleAttributeValues(e,t,i)}_getAccessor(e=""){let t=this._accessors;const n=_a(e);for(const r of n)if(t=t.nested[r],!t)throw new Error(`${this._eltName} attribute "${n.join("")}" does not exist`);return t}_getSingleAttributeValues(e,t,n){const r=this._getAccessor(t),i=e._indexes,s=Array(i.length);for(let o=0;o<i.length;o++)s[o]=r.get(n,i[o]);return s}_getMultipleAttributeValues(e,t,n){if(!t||t==="all")return this._getSingleAttributeValues(e,"",n);const r=Array(e.size);for(let i=0;i<r.length;++i)r[i]={};for(let i=0;i<t.length;i++){const s=t[i],o=this._getSingleAttributeValues(e,s,n);for(let a=0;a<r.length;++a)xs(r[a],s,o[a])}return r}setAnimationAttributes(e,{duration:t,startTime:n,easing:r}){const i=e._indexes,s=this._finalFlexArraysWrapped,o=s.animationDuration,a=s.animationStart,l=s.animationEasing,c=Oc(this._allUsedAttributes);if(t){let d=!1;for(const u of c){if(u==="x"||u==="y"){d=!0;continue}const h=ln(this._finalFlexArrays,u),g=ln(this._prevFlexArrays,u);for(let p=0;p<i.length;p++){const m=i[p];g.set(m,h.get(m))}}if(d){const u=ir(),h=this._finalFlexArrays.x,g=this._finalFlexArrays.y,p=this._prevFlexArrays.x,m=this._prevFlexArrays.y;for(let f=0;f<i.length;f++){const y=i[f],_=o.get(y);if(_){const v=a.get(y),x=l.get(y),b=(db[x]||yp)(Math.min((u-v)/_,1)),w=Q_(p.get(y),h.get(y),b),S=Q_(m.get(y),g.get(y),b);p.set(y,w),m.set(y,S)}else p.set(y,h.get(y)),m.set(y,g.get(y))}}}o.fill(i,t),a.fill(i,n),l.fill(i,r)}resetAnimationAttributes(e){this._finalFlexArraysWrapped.animationDuration.fill(e._indexes,0)}getUsedAttributes(){return Oc(this._allUsedAttributes)}getDefaultFlexArrays(){return this._defaultFlexArrays}_assignAttributesToFlexArrays(e,t,n,r,i,s=[]){if(typeof r=="function"){const o=s.join(".");for(let a=0;a<n.size;++a){const l=n.get(a);if(l){const c=r(l,i,o);this._assignSingleValueToFlexArray(t,l,e,c,s)}}}else if(Sn(r)){const o=Object.keys(r);for(let a=0;a<o.length;++a){const l=o[a];s.push(l);const c=this._getNestedAccessor(e,l,s),d=r[l];this._assignAttributesToFlexArrays(c,t,n,d,i,s),s.pop()}}else if((Array.isArray(r)||ArrayBuffer.isView(r))&&s[0]!=="color")if(s.length===0)for(let o=0;o<n.size;++o)this._assignSingleValueToFlexArray(t,n.get(o),e,r[o],s);else for(let o=0;o<n.size;++o){const a=n._indexes[o],l=e.check(r[o]);e.set(t,a,l)}else{const o=e.check(r);for(let a=0;a<n.size;++a){const l=n.get(a);e.set(t,l._index,o)}}}_getNestedAccessor(e,t,n){const r=e.nested[t];if(!r)throw new Error(`${this._eltName} attribute "${n.join(".")}" does not exist`);return r}_assignSingleValueToFlexArray(e,t,n,r,i){if(Sn(r)){const s=Object.keys(r);for(const o of s){i.push(o);const a=r[o],l=this._getNestedAccessor(n,o,i);this._assignSingleValueToFlexArray(e,t,l,a,i),i.pop()}}else{const s=n.check(r);n.set(e,t._index,s)}}};function TG(e,{original:t,useDefaultValues:n}){const r="resource";return{width:e.createAttribute(!1,{storage:r,default:n?ky:void 0,name:"width"},t),scalingMethod:e.createAttribute(!1,{storage:r,default:n?uM:void 0,name:"scalingMethod"},t),color:e.createAttribute(!1,{storage:r,default:n?hM:void 0,name:"color"},t),opacity:e.createAttribute(!1,{storage:r,default:n?gM:void 0,name:"opacity"},t),minVisibleSize:e.createAttribute(!1,{storage:r,default:n?pM:void 0,name:"minVisibleSize"},t),layer:e.createAttribute(!1,{storage:r,default:n?mM:void 0,name:"layer"},t),detectable:e.createAttribute(!1,{storage:r,default:n?fM:void 0,name:"detectable"},t),curvature:e.createAttribute(!1,{storage:r,default:n?_M:void 0,name:"curvature"},t),adjustAnchors:e.createAttribute(!1,{storage:r,default:n?yM:void 0,name:"adjustAnchors"},t),shape:{body:e.createAttribute(!1,{storage:r,default:n?vM:void 0,name:"shape.body"},t),head:e.createAttribute(!1,{storage:r,default:n?xM:void 0,name:"shape.head"},t),tail:e.createAttribute(!1,{storage:r,default:n?bM:void 0,name:"shape.tail"},t),style:e.createAttribute(!1,{storage:r,default:n?wM:void 0,name:"shape.style"},t)},stroke:{color:e.createAttribute(!1,{storage:r,default:n?EM:void 0,name:"stroke.color"},t),width:e.createAttribute(!1,{storage:r,default:n?Cy:void 0,name:"stroke.width"},t),scalingMethod:e.createAttribute(!1,{storage:r,default:n?SM:void 0,name:"stroke.scalingMethod"},t),minVisibleSize:e.createAttribute(!1,{storage:r,default:n?AM:void 0,name:"stroke.minVisibleSize"},t)},halo:{color:e.createAttribute(!1,{storage:r,default:n?kM:void 0,name:"halo.color"},t),width:e.createAttribute(!1,{storage:r,default:n?Ty:void 0,name:"halo.width"},t),scalingMethod:e.createAttribute(!1,{storage:r,default:n?CM:void 0,name:"halo.scalingMethod"},t)},pulse:{enabled:e.createAttribute(!1,{storage:r,default:!n&&void 0,name:"pulse.enabled"},t),duration:e.createAttribute(!1,{storage:r,default:n?TM:void 0,name:"pulse.duration"},t),interval:e.createAttribute(!1,{storage:r,default:n?NM:void 0,name:"pulse.interval"},t),startColor:e.createAttribute(!1,{storage:r,default:n?LM:void 0,name:"pulse.startColor"},t),endColor:e.createAttribute(!1,{storage:r,default:n?IM:void 0,name:"pulse.endColor"},t),width:e.createAttribute(!1,{storage:r,default:n?PM:void 0,name:"pulse.width"},t),startRatio:e.createAttribute(!1,{storage:r,default:n?MM:void 0,name:"pulse.startRatio"},t),endRatio:e.createAttribute(!1,{storage:r,default:n?FM:void 0,name:"pulse.endRatio"},t)},outline:{enabled:e.createAttribute(!1,{storage:r,default:!n&&void 0,name:"outline.enabled"},t),color:e.createAttribute(!1,{storage:r,default:n?RM:void 0,name:"outline.color"},t),minVisibleSize:e.createAttribute(!1,{storage:r,default:n?DM:void 0,name:"outline.minVisibleSize"},t)},text:{content:e.createAttribute(!1,{storage:r,default:n?null:void 0,name:"text.content"},t),font:e.createAttribute(!1,{storage:r,default:n?_r:void 0,name:"text.font"},t),color:e.createAttribute(!1,{storage:r,default:n?So:void 0,name:"text.color"},t),size:e.createAttribute(!1,{storage:r,default:n?$l:void 0,name:"text.size"},t),scale:e.createAttribute(!1,{storage:r,default:n?Y$:void 0,name:"text.scale"},t),style:e.createAttribute(!1,{storage:r,default:n?zM:void 0,name:"text.style"},t),align:e.createAttribute(!1,{storage:r,default:n?OM:void 0,name:"text.align"},t),margin:e.createAttribute(!1,{storage:r,default:n?BM:void 0,name:"text.margin"},t),padding:e.createAttribute(!1,{storage:r,default:n?Ny:void 0,name:"text.padding"},t),position:e.createAttribute(!1,{storage:r,default:n?jM:void 0,name:"text.position"},t),backgroundColor:e.createAttribute(!1,{storage:r,default:n?vp:void 0,name:"text.backgroundColor"},t),minVisibleSize:e.createAttribute(!1,{storage:r,default:n?UM:void 0,name:"text.minVisibleSize"},t),adjustAngle:e.createAttribute(!1,{storage:r,default:n?$M:void 0,name:"text.adjustAngle"},t),scaling:e.createAttribute(!1,{storage:r,default:n?oM:void 0,name:"text.scaling"},t),maxLineLength:e.createAttribute(!1,{storage:r,default:n?aM:void 0,name:"text.maxLineLength"},t),secondary:{content:e.createAttribute(!1,{storage:r,default:n?null:void 0,name:"text.secondary.content"},t),font:e.createAttribute(!1,{storage:r,default:n?_r:void 0,name:"text.secondary.font"},t),color:e.createAttribute(!1,{storage:r,default:n?So:void 0,name:"text.secondary.color"},t),size:e.createAttribute(!1,{storage:r,default:n?Iy:void 0,name:"text.secondary.size"},t),scale:e.createAttribute(!1,{storage:r,default:n?nM:void 0,name:"text.secondary.scale"},t),style:e.createAttribute(!1,{storage:r,default:n?iM:void 0,name:"text.secondary.style"},t),align:e.createAttribute(!1,{storage:r,default:n?sM:void 0,name:"text.secondary.align"},t),margin:e.createAttribute(!1,{storage:r,default:n?VM:void 0,name:"text.secondary.margin"},t),padding:e.createAttribute(!1,{storage:r,default:n?Ly:void 0,name:"text.secondary.padding"},t),backgroundColor:e.createAttribute(!1,{storage:r,default:n?rM:void 0,name:"text.secondary.backgroundColor"},t),minVisibleSize:e.createAttribute(!1,{storage:r,default:n?GM:void 0,name:"text.secondary.minVisibleSize"},t)}}}}function NG(e,{original:t,useDefaultValues:n}){const r="resource";return{x:e.createAttribute(!0,{storage:"any",default:n?0:void 0,name:"x"},t),y:e.createAttribute(!0,{storage:"any",default:n?0:void 0,name:"y"},t),radius:e.createAttribute(!0,{storage:r,default:n?5:void 0,name:"radius"},t),scalingMethod:e.createAttribute(!0,{storage:r,default:n?"scaled":void 0,name:"scalingMethod"},t),color:e.createAttribute(!0,{storage:r,default:n?WM:void 0,name:"color"},t),opacity:e.createAttribute(!0,{storage:r,default:n?Z$:void 0,name:"opacity"},t),shape:e.createAttribute(!0,{storage:r,default:n?J$:void 0,name:"shape"},t),layer:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"layer"},t),detectable:e.createAttribute(!0,{storage:r,default:!!n||void 0,name:"detectable"},t),draggable:e.createAttribute(!0,{storage:r,default:!!n||void 0,name:"draggable"},t),layoutable:e.createAttribute(!0,{storage:r,default:!!n||void 0,name:"layoutable"},t),innerStroke:{width:e.createAttribute(!0,{storage:r,default:n?gb:void 0,name:"innerStroke.width"},t),scalingMethod:e.createAttribute(!0,{storage:r,default:n?"fixed":void 0,name:"innerStroke.scalingMethod"},t),color:e.createAttribute(!0,{storage:r,default:n?XM:void 0,name:"innerStroke.color"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?My:void 0,name:"innerStroke.minVisibleSize"},t)},outerStroke:{width:e.createAttribute(!0,{storage:r,default:n?pb:void 0,name:"outerStroke.width"},t),scalingMethod:e.createAttribute(!0,{storage:r,default:n?"fixed":void 0,name:"outerStroke.scalingMethod"},t),color:e.createAttribute(!0,{storage:r,default:n?YM:void 0,name:"outerStroke.color"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?Py:void 0,name:"outerStroke.minVisibleSize"},t)},badges:{topLeft:{color:e.createAttribute(!0,{storage:r,default:n?Bc:void 0,name:"badges.topLeft.color"},t),scale:e.createAttribute(!0,{storage:r,default:n?.45:void 0,name:"badges.topLeft.scale"},t),positionScale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"badges.topLeft.positionScale"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?yh:void 0,name:"badges.topLeft.minVisibleSize"},t),image:{url:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"badges.topLeft.image.url"},t),scale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"badges.topLeft.image.scale"},t)},stroke:{color:e.createAttribute(!0,{storage:r,default:n?jc:void 0,name:"badges.topLeft.stroke.color"},t),width:e.createAttribute(!0,{storage:r,default:n?gl:void 0,name:"badges.topLeft.stroke.width"},t),scalingMethod:e.createAttribute(!0,{storage:r,default:n?"fixed":void 0,name:"badges.topLeft.stroke.scalingMethod"},t)},text:{content:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"badges.topLeft.text.content"},t),color:e.createAttribute(!0,{storage:r,default:n?Uc:void 0,name:"badges.topLeft.text.color"},t),font:e.createAttribute(!0,{storage:r,default:n?_r:void 0,name:"badges.topLeft.text.font"},t),style:e.createAttribute(!0,{storage:r,default:n?"normal":void 0,name:"badges.topLeft.text.style"},t),scale:e.createAttribute(!0,{storage:r,default:n?.5:void 0,name:"badges.topLeft.text.scale"},t),paddingLeft:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"badges.topLeft.text.paddging.left"},t),paddingTop:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"badges.topLeft.text.paddging.top"},t)}},topRight:{color:e.createAttribute(!0,{storage:r,default:n?Bc:void 0,name:"badges.topRight.color"},t),scale:e.createAttribute(!0,{storage:r,default:n?.45:void 0,name:"badges.topRight.scale"},t),positionScale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"badges.topRight.positionScale"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?yh:void 0,name:"badges.topRight.minVisibleSize"},t),image:{url:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"badges.topRight.image.url"},t),scale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"badges.topRight.image.scale"},t)},stroke:{color:e.createAttribute(!0,{storage:r,default:n?jc:void 0,name:"badges.topRight.stroke.color"},t),width:e.createAttribute(!0,{storage:r,default:n?gl:void 0,name:"badges.topRight.stroke.width"},t),scalingMethod:e.createAttribute(!0,{storage:r,default:n?"fixed":void 0,name:"badges.topRight.stroke.scalingMethod"},t)},text:{content:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"badges.topRight.text.content"},t),color:e.createAttribute(!0,{storage:r,default:n?Uc:void 0,name:"badges.topRight.text.color"},t),font:e.createAttribute(!0,{storage:r,default:n?_r:void 0,name:"badges.topRight.text.font"},t),style:e.createAttribute(!0,{storage:r,default:n?"normal":void 0,name:"badges.topRight.text.style"},t),scale:e.createAttribute(!0,{storage:r,default:n?.5:void 0,name:"badges.topRight.text.scale"},t),paddingTop:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"badges.topRight.text.paddging.left"},t),paddingLeft:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"badges.topRight.text.paddging.top"},t)}},bottomLeft:{color:e.createAttribute(!0,{storage:r,default:n?Bc:void 0,name:"badges.bottomLeft.color"},t),scale:e.createAttribute(!0,{storage:r,default:n?.45:void 0,name:"badges.bottomLeft.scale"},t),positionScale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"badges.bottomLeft.positionScale"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?yh:void 0,name:"badges.bottomLeft.minVisibleSize"},t),image:{url:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"badges.bottomLeft.image.url"},t),scale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"badges.bottomLeft.image.scale"},t)},stroke:{color:e.createAttribute(!0,{storage:r,default:n?jc:void 0,name:"badges.bottomLeft.stroke.color"},t),width:e.createAttribute(!0,{storage:r,default:n?gl:void 0,name:"badges.bottomLeft.stroke.width"},t),scalingMethod:e.createAttribute(!0,{storage:r,default:n?"fixed":void 0,name:t?"badges.bottomLeft.stroke.scalingMethod":void 0})},text:{content:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"badges.bottomLeft.text.content"},t),color:e.createAttribute(!0,{storage:r,default:n?Uc:void 0,name:"badges.bottomLeft.text.color"},t),font:e.createAttribute(!0,{storage:r,default:n?_r:void 0,name:"badges.bottomLeft.text.font"},t),style:e.createAttribute(!0,{storage:r,default:n?"normal":void 0,name:"badges.bottomLeft.text.style"},t),scale:e.createAttribute(!0,{storage:r,default:n?.5:void 0,name:"badges.bottomLeft.text.scale"},t),paddingLeft:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"badges.bottomLeft.text.paddging.left"},t),paddingTop:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"badges.bottomLeft.text.paddging.top"},t)}},bottomRight:{color:e.createAttribute(!0,{storage:r,default:n?Bc:void 0,name:"badges.bottomRight.color"},t),scale:e.createAttribute(!0,{storage:r,default:n?.45:void 0,name:"badges.bottomRight.scale"},t),positionScale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"badges.bottomRight.positionScale"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?yh:void 0,name:"badges.bottomRight.minVisibleSize"},t),image:{url:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"badges.bottomRight.image.url"},t),scale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"badges.bottomRight.image.scale"},t)},stroke:{color:e.createAttribute(!0,{storage:r,default:n?jc:void 0,name:"badges.bottomRight.stroke.color"},t),width:e.createAttribute(!0,{storage:r,default:n?gl:void 0,name:"badges.bottomRight.stroke.width"},t),scalingMethod:e.createAttribute(!0,{storage:r,default:n?"fixed":void 0,name:t?"badges.bottomRight.stroke.scalingMethod":void 0})},text:{content:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"badges.bottomRight.text.content"},t),color:e.createAttribute(!0,{storage:r,default:n?Uc:void 0,name:"badges.bottomRight.text.color"},t),font:e.createAttribute(!0,{storage:r,default:n?_r:void 0,name:"badges.bottomRight.text.font"},t),style:e.createAttribute(!0,{storage:r,default:n?"normal":void 0,name:"badges.bottomRight.text.style"},t),scale:e.createAttribute(!0,{storage:r,default:n?.5:void 0,name:"badges.bottomRight.text.scale"},t),paddingLeft:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"badges.bottomRight.text.paddging.left"},t),paddingTop:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"badges.bottomRight.text.paddging.top"},t)}}},halo:{color:e.createAttribute(!0,{storage:r,default:n?ZM:void 0,name:"halo.color"},t),width:e.createAttribute(!0,{storage:r,default:n?mb:void 0,name:"halo.width"},t),scalingMethod:e.createAttribute(!0,{storage:r,default:n?"fixed":void 0,name:"halo.scalingMethod"},t),strokeColor:e.createAttribute(!0,{storage:r,default:n?JM:void 0,name:"halo.strokeColor"},t),strokeWidth:e.createAttribute(!0,{storage:r,default:n?fb:void 0,name:"halo.strokeWidth"},t),clustering:e.createAttribute(!0,{storage:r,default:!n&&void 0,name:"halo.clustering"},t),hideNonAdjacentEdges:e.createAttribute(!0,{storage:r,default:!n&&void 0,name:"halo.hideNonAdjacentEdges"},t)},pulse:{enabled:e.createAttribute(!0,{storage:r,default:!n&&void 0,name:"pulse.enabled"},t),duration:e.createAttribute(!0,{storage:r,default:n?KM:void 0,name:"pulse.duration"},t),interval:e.createAttribute(!0,{storage:r,default:n?eF:void 0,name:"pulse.interval"},t),startColor:e.createAttribute(!0,{storage:r,default:n?iF:void 0,name:"pulse.startColor"},t),endColor:e.createAttribute(!0,{storage:r,default:n?rF:void 0,name:"pulse.endColor"},t),width:e.createAttribute(!0,{storage:r,default:n?sF:void 0,name:"pulse.width"},t),startRatio:e.createAttribute(!0,{storage:r,default:n?tF:void 0,name:"pulse.startRatio"},t),endRatio:e.createAttribute(!0,{storage:r,default:n?nF:void 0,name:"pulse.endRatio"},t)},icon:{content:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"icon.content"},t),font:e.createAttribute(!0,{storage:r,default:n?_r:void 0,name:"icon.font"},t),color:e.createAttribute(!0,{storage:r,default:n?QM:void 0,name:"icon.color"},t),scale:e.createAttribute(!0,{storage:r,default:n?.7:void 0,name:"icon.scale"},t),style:e.createAttribute(!0,{storage:r,default:n?"normal":void 0,name:"icon.style"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?12:void 0,name:"icon.minVisibleSize"},t)},image:{url:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"image.url"},t),scale:e.createAttribute(!0,{storage:r,default:n?1:void 0,name:"image.scale"},t),fit:e.createAttribute(!0,{storage:r,default:!!n||void 0,name:"image.fit"},t),tile:e.createAttribute(!0,{storage:r,default:!n&&void 0,name:"image.tile"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?12:void 0,name:"image.minVisibleSize"},t)},outline:{enabled:e.createAttribute(!0,{storage:r,default:!n&&void 0,name:"outline.enabled"},t),color:e.createAttribute(!0,{storage:r,default:n?qM:void 0,name:"outline.color"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?12:void 0,name:"outline.minVisibleSize"},t)},text:{content:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"text.content"},t),font:e.createAttribute(!0,{storage:r,default:n?_r:void 0,name:"text.font"},t),color:e.createAttribute(!0,{storage:r,default:n?So:void 0,name:"text.color"},t),size:e.createAttribute(!0,{storage:r,default:n?$l:void 0,name:"text.size"},t),scale:e.createAttribute(!0,{storage:r,default:n?.1:void 0,name:"text.scale"},t),style:e.createAttribute(!0,{storage:r,default:n?"normal":void 0,name:"text.style"},t),align:e.createAttribute(!0,{storage:r,default:n?"center":void 0,name:"text.align"},t),margin:e.createAttribute(!0,{storage:r,default:n?ub:void 0,name:"text.margin"},t),padding:e.createAttribute(!0,{storage:r,default:n?Jd:void 0,name:"text.padding"},t),backgroundColor:e.createAttribute(!0,{storage:r,default:n?vp:void 0,name:"text.backgroundColor"},t),tip:e.createAttribute(!0,{storage:r,default:n?W$:void 0,name:"text.tip"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?24:void 0,name:"text.minVisibleSize"},t),scaling:e.createAttribute(!0,{storage:r,default:!n&&void 0,name:"text.scaling"},t),position:e.createAttribute(!0,{storage:r,default:n?"bottom":void 0,name:"text.position"},t),maxLineLength:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"text.maxLineLength"},t),truncateLength:e.createAttribute(!0,{storage:r,default:n?0:void 0,name:"text.truncateLength"},t),secondary:{content:e.createAttribute(!0,{storage:r,default:n?null:void 0,name:"text.secondary.content"},t),font:e.createAttribute(!0,{storage:r,default:n?_r:void 0,name:"text.secondary.font"},t),color:e.createAttribute(!0,{storage:r,default:n?So:void 0,name:"text.secondary.color"},t),size:e.createAttribute(!0,{storage:r,default:n?hb:void 0,name:"text.secondary.size"},t),scale:e.createAttribute(!0,{storage:r,default:n?.08:void 0,name:"text.secondary.scale"},t),style:e.createAttribute(!0,{storage:r,default:n?"normal":void 0,name:"text.secondary.style"},t),align:e.createAttribute(!0,{storage:r,default:n?"center":void 0,name:"text.secondary.align"},t),margin:e.createAttribute(!0,{storage:r,default:n?X$:void 0,name:"text.secondary.margin"},t),padding:e.createAttribute(!0,{storage:r,default:n?Jd:void 0,name:"text.secondary.padding"},t),backgroundColor:e.createAttribute(!0,{storage:r,default:n?vp:void 0,name:"text.secondary.backgroundColor"},t),minVisibleSize:e.createAttribute(!0,{storage:r,default:n?24:void 0,name:"text.secondary.minVisibleSize"},t)}}}}var LG=class{constructor(e){this.nodes=new Q2(e,!0,NG),this.edges=new Q2(e,!1,TG)}setNodeDefaultAttributes(e){this.nodes.setDefaultAttributes(e)}setEdgeDefaultAttributes(e){this.edges.setDefaultAttributes(e)}getFlexArrays(){return{nodes:{current:this.nodes.getAttributeFlexArrays(),previous:this.nodes.getPrevAttributeFlexArrays()},edges:{current:this.edges.getAttributeFlexArrays(),previous:this.edges.getPrevAttributeFlexArrays()}}}redrawAll(){this.nodes.redrawAll(),this.edges.redrawAll()}clear(){this.nodes.clear(),this.edges.clear()}redrawElements(e){this._fetch(e).redrawElements(e)}getAnimationInformation(e){return this._fetch(e).getAnimationInformation(e)}redrawNodes(e){this.nodes.redrawElements(e)}getUsedAttributes(e,t){return this._fetch(t).getUsedAttributeNames(t.isNode?e.nodes:e.edges)}startUpdate(){this.nodes.startUpdate(),this.edges.startUpdate()}notifyDestroyed(e){this.nodes.notifyLayerDestroyed(e.nodes),this.edges.notifyLayerDestroyed(e.edges)}prepareUpdate(e){this.nodes.prepareFlexArraysUpdate(e.nodes),this.edges.prepareFlexArraysUpdate(e.edges)}onUpdate(e){this.nodes.updateFlexArrays(e.nodes),this.edges.updateFlexArrays(e.edges)}afterLayersUpdate(){this.nodes.endUpdate(),this.edges.endUpdate()}getAndResetElementsToRedraw(){return{nodes:this.nodes.getAndResetElementsToRedraw(),edges:this.edges.getAndResetElementsToRedraw()}}getAndResetElementsUpdated(){const e=this.nodes,t=this.edges;return{nodes:e.getAndResetElementsUpdated(),edges:t.getAndResetElementsUpdated(),nodeAttributesSet:e.getUpdatedAttributesSet(),nodeAttributes:e.getAndResetAttributesUpdated(),edgeAttributes:t.getAndResetAttributesUpdated()}}setAnimationAttributes({nodes:e,edges:t},n){this.nodes.setAnimationAttributes(e,n),this.edges.setAnimationAttributes(t,n)}resetAnimationAttributes({nodes:e,edges:t}){this.nodes.resetAnimationAttributes(e),this.edges.resetAnimationAttributes(t)}setLastOutput(e,t){this.nodes.setLastFlexArrays(e),this.edges.setLastFlexArrays(t)}getCurrentInput(){const e=un(this.nodes.getDefaultFlexArrays()),t=un(this.edges.getDefaultFlexArrays());return{currentNodeFlexArrays:e,currentEdgeFlexArrays:t,allNodeAttributePaths:va(e),allEdgeAttributePaths:va(t)}}initializeLayer(e,t,n){e.nodes.allAttributePaths=t,e.edges.allAttributePaths=n,e.nodes.formattedDependencies=EG(e.nodes),e.edges.formattedDependencies=SG(e.edges),e.nodes.formattedOutput={attributes:Z2(e.nodes),tags:e.tag?[e.tag]:[]},e.edges.formattedOutput={attributes:Z2(e.edges),tags:e.tag?[e.tag]:[]},e.nodes.redrawAdjacentEdges=e.nodes.formattedOutput.attributes.some(r=>H$[r]),e.initialized=!0}connectLayerInputOutput(e,t,n){const r=e.nodes.formattedOutput,i=e.edges.formattedOutput;for(const s of r.attributes){const o=ln(t,s),a=ln(e.nodes.outputFlexArrays,s);a.setFallback(o),xs(t,s,a)}for(const s of i.attributes){const o=ln(n,s),a=ln(e.edges.outputFlexArrays,s);a.setFallback(o),xs(n,s,a)}}setupLayerDependencies(e,t){if(e===t)return;const n=e.priority,r=t.priority,i=e.nodes.formattedOutput,s=e.edges.formattedOutput,o=t.nodes.formattedDependencies,a=t.edges.formattedDependencies;Ui(e.depsNodeSelf,t,i,o.self,n,r),Ui(e.depsNodeAdjacentNodes,t,i,o.adjacentNodes,n,r),Ui(e.depsNodeAdjacentEdges,t,s,a.extremities,n,r),Ui(e.depsNodeAllNodes,t,i,o.allNodes,n,r),Ui(e.depsNodeAllEdges,t,s,a.allNodes,n,r),Ui(e.depsEdgeSelf,t,s,a.self,n,r),Ui(e.depsEdgeExtremities,t,i,o.adjacentEdges,n,r),Ui(e.depsEdgeParallelEdges,t,s,a.parallelEdges,n,r),Ui(e.depsEdgeAllNodes,t,i,o.allEdges,n,r),Ui(e.depsEdgeAllEdges,t,s,a.allEdges,n,r)}createAttributeLayerData(e,t,n,{tag:r,onBeforeUpdate:i,standaloneSelectors:s}){const o=!!s;return{index:-1,id:t,name:e,tag:r||null,priority:0,depsNodeSelf:[],depsNodeAdjacentNodes:[],depsNodeAdjacentEdges:[],depsNodeAllNodes:[],depsNodeAllEdges:[],depsEdgeSelf:[],depsEdgeExtremities:[],depsEdgeParallelEdges:[],depsEdgeAllNodes:[],depsEdgeAllEdges:[],initialized:!1,onBeforeUpdate:i,nodes:{type:"node",name:e,standaloneSelector:o,toUpdate:new bp({graph:n,isNode:!0,includeRemovedElements:!1}),outputFlexArrays:this.nodes.createFlexArrays(),inputFlexArrays:null,formattedDependencies:null,formattedOutput:null},edges:{type:"edge",name:e,standaloneSelector:o,toUpdate:new bp({graph:n,isNode:!1,includeRemovedElements:!1}),outputFlexArrays:this.edges.createFlexArrays(),inputFlexArrays:null,formattedDependencies:null,formattedOutput:null}}}setAttributeValues(e,t,n,r,i){this._fetch(t).setAttributeValues(e,t,n,r,i)}getAttributeValues(e,t,n,r){return this._fetch(e).getAttributeValues(e,t,n,r)}_fetch(e){return e.isNode?this.nodes:this.edges}},IG=(e,t)=>new M$(e,t),PG=class{constructor(e,{graph:t,dom:n}){this._layerIdCounter=0,this._layers=[],this._destroyedLayers=[],this._layersNeedUpdate=!1,this._updateOngoing=!1,this._needUpdate=!1,this._ogma=e,this._graph=t,this._dom=n,this._emptySubgraph={nodes:e.nodeList(),edges:e.edgeList()},this._textHiddenSet=new Eu(this._graph,"textHidden"),this._layerController=new LG(this._graph)}_getLayerById(e){for(let t=0;t<this._layers.length;++t){const n=this._layers[t];if(n.id===e)return n.index=t,n}throw new Error("usage of a destroyed style rule or class")}setDefaultAttributes(e,t){this._layerController.setNodeDefaultAttributes(e),this._layerController.setEdgeDefaultAttributes(t)}getFlexArrays(){return this._layerController.getFlexArrays()}clear(){this._updateOngoing=!1,this._needUpdate=!1,this._destroyedLayers=[],this._layerController.clear(),this.updateAllForAllAttributeLayers()}redrawElements(e){e.size&&(this._layerController.redrawElements(e),this._dom.refresh())}redrawAll(){this._layerController.redrawAll(),this._dom.refresh()}_triggerUpdate(){this._needUpdate=!0,this._dom.refresh()}_reconstructAttributeLayersIfNecessary(){return!!this._layersNeedUpdate&&(this._reconstructAttributeLayers(),this._layersNeedUpdate=!1,this._dom.refresh(),!0)}getAnimationInformation(e){return this._layerController.getAnimationInformation(e)}update(){if(!this._needUpdate||this._updateOngoing||!this._ogma._token)return!1;this._reconstructAttributeLayersIfNecessary(),this._updateOngoing=!0,this._layerController.startUpdate();for(const e of this._destroyedLayers)e.initialized&&this._layerController.notifyDestroyed(e);for(const e of this._layers)this._layerController.prepareUpdate(e),typeof e.onBeforeUpdate=="function"&&e.onBeforeUpdate(e,this,this._layerController),this._layerController.onUpdate(e);return this._layerController.afterLayersUpdate(),this._updateOngoing=!1,this._needUpdate=!1,!0}setAttributeLayerValues(e,t,n,r){const i=this._getLayerById(e),s=t.isNode?i.nodes:i.edges;this._reconstructAttributeLayersIfNecessary(),this._layerController.setAttributeValues(s,t,n,r,i),this._updateElementsForAttributeLayers([i],t)}getAttributeLayerFlexArrays(e){const t=this._getLayerById(e);return{nodes:t.nodes.outputFlexArrays,edges:t.edges.outputFlexArrays}}getUsedAttributeLayerAttributes(e,t){const n=this._getLayerById(e);return this._layerController.getUsedAttributes(n,t)}getUpdatedElements(){return{elementsToRedraw:this._layerController.getAndResetElementsToRedraw(),elementsUpdated:this._layerController.getAndResetElementsUpdated()}}addAttributeLayer(e){const{name:t,layerFactory:n=IG}=e;if(!t)throw new Error("Attribute layer must have a name");if(t&&this._layers.find(i=>i.name===t))throw new Error(`attribute layer with name "${e.name}" already exists`);const r=this._layerController.createAttributeLayerData(t,++this._layerIdCounter,this._graph,e);return this._layers.push(r),this._updateLayer(r,e),n(this,this._layerIdCounter)}_reconstructAttributeLayers(){this._layers.sort((i,s)=>i.priority-s.priority);const{currentNodeFlexArrays:e,currentEdgeFlexArrays:t,allNodeAttributePaths:n,allEdgeAttributePaths:r}=this._layerController.getCurrentInput();for(const i of this._layers)this._layerController.initializeLayer(i,n,r);for(const i of this._layers){i.nodes.inputFlexArrays=un(e),i.edges.inputFlexArrays=un(t),i.depsNodeSelf=[],i.depsNodeAdjacentNodes=[],i.depsNodeAdjacentEdges=[],i.depsNodeAllNodes=[],i.depsNodeAllEdges=[],i.depsEdgeSelf=[],i.depsEdgeExtremities=[],i.depsEdgeParallelEdges=[],i.depsEdgeAllNodes=[],i.depsEdgeAllEdges=[],i.nodes.toUpdate.addAll(),i.edges.toUpdate.addAll(),this._layerController.connectLayerInputOutput(i,e,t);for(const s of this._layers)this._layerController.setupLayerDependencies(i,s)}this._layerController.setLastOutput(e,t);for(const i of this._layers)i.nodes.needAdjacentElements=i.nodes.redrawAdjacentEdges||i.depsNodeAdjacentNodes.length>0||i.depsNodeAdjacentEdges.length>0,i.edges.needAdjacentElements=i.depsEdgeExtremities.length>0||i.depsEdgeParallelEdges.length>0}_updateLayer(e,{priority:t,fullOverwrite:n,nodeAttributes:r,nodeSelector:i,nodeContext:s,nodeDependencies:o,nodeOutput:a,edgeAttributes:l,edgeSelector:c,edgeContext:d,edgeDependencies:u,edgeOutput:h}={}){r!==void 0&&(e.nodes.attributes=n?r:Jg(e.nodes.attributes,r)),i!==void 0&&(e.nodes.selector=i),s!==void 0&&(e.nodes.context=s),o!==void 0&&(e.nodes.dependencies=o),a!==void 0&&(e.nodes.output=a),l!==void 0&&(e.edges.attributes=n?l:Jg(e.edges.attributes,l)),c!==void 0&&(e.edges.selector=c),d!==void 0&&(e.edges.context=d),u!==void 0&&(e.edges.dependencies=u),h!==void 0&&(e.edges.output=h),t!==void 0&&(e.priority=t),this._triggerLayerUpdate()}_triggerLayerUpdate(){this._layersNeedUpdate=!0,this._triggerUpdate()}updateAllForAttributeLayer(e){const t=this._getLayerById(e);this._updateAllForAttributeLayer(t)}updateAllForAllAttributeLayers(){for(const e of this._layers)this._updateAllForAttributeLayer(e)}_updateAllForAttributeLayer(e,t=!0,n=!0){if(t&&!e.nodes.toUpdate.isFull()){e.nodes.toUpdate.addAll();for(const r of e.depsNodeSelf)this._updateAllForAttributeLayer(r,!0,!1);for(const r of e.depsNodeAdjacentNodes)this._updateAllForAttributeLayer(r,!0,!1);for(const r of e.depsNodeAdjacentEdges)this._updateAllForAttributeLayer(r,!1,!0);for(const r of e.depsNodeAllNodes)this._updateAllForAttributeLayer(r,!0,!1);for(const r of e.depsNodeAllEdges)this._updateAllForAttributeLayer(r,!1,!0)}if(n&&!e.edges.toUpdate.isFull()){e.edges.toUpdate.addAll();for(const r of e.depsEdgeSelf)this._updateAllForAttributeLayer(r,!1,!0);for(const r of e.depsEdgeExtremities)this._updateAllForAttributeLayer(r,!0,!1);for(const r of e.depsEdgeParallelEdges)this._updateAllForAttributeLayer(r,!1,!0);for(const r of e.depsEdgeAllNodes)this._updateAllForAttributeLayer(r,!0,!1);for(const r of e.depsEdgeAllEdges)this._updateAllForAttributeLayer(r,!1,!0)}this._triggerUpdate()}updateElementsForAttributeLayer(e,t){const n=this._getLayerById(e);this._updateElementsForAttributeLayers([n],t)}updateForAllAttributeLayers(e){this._updateElementsForAttributeLayers(this._layers,e)}_updateElementsForAttributeLayers(e,t){let n=this._emptySubgraph;if(t.isNode){for(const r of e)if(!r.nodes.toUpdate.isFull()){r.nodes.needAdjacentElements&&(n=n===this._emptySubgraph?t.fastGetAdjacentElements():n),r.nodes.toUpdate.add(t);for(const i of r.depsNodeSelf)i.nodes.toUpdate.add(t);for(const i of r.depsNodeAdjacentNodes)i.nodes.toUpdate.add(n.nodes);for(const i of r.depsNodeAdjacentEdges)i.edges.toUpdate.add(n.edges);for(const i of r.depsNodeAllNodes)this._updateAllForAttributeLayer(i,!0,!1);for(const i of r.depsNodeAllEdges)this._updateAllForAttributeLayer(i,!1,!0);r.nodes.redrawAdjacentEdges&&this._layerController.redrawElements(n.edges)}}else for(const r of e)if(!r.edges.toUpdate.isFull()){r.edges.needAdjacentElements&&(n=n===this._emptySubgraph?t.fastGetAdjacentElements():n),r.edges.toUpdate.add(t);for(const i of r.depsEdgeSelf)i.edges.toUpdate.add(t);for(const i of r.depsEdgeExtremities)i.nodes.toUpdate.add(n.nodes);for(const i of r.depsEdgeParallelEdges)i.edges.toUpdate.add(n.edges);for(const i of r.depsEdgeAllNodes)this._updateAllForAttributeLayer(i,!0,!1);for(const i of r.depsEdgeAllEdges)this._updateAllForAttributeLayer(i,!1,!0)}this._triggerUpdate()}destroyAttributeLayer(e){const t=this._getLayerById(e);this._destroyedLayers.push(t),this._layers.splice(t.index,1),this._triggerLayerUpdate()}updateAttributeLayer(e,t){const n=this._getLayerById(e);this._updateLayer(n,t)}getAttributeLayerDefinition(e){const t=this._getLayerById(e),{priority:n,nodes:r,edges:i}=t;return{priority:n,nodeAttributes:r.attributes,nodeSelector:r.selector,nodeContext:r.context,nodeDependencies:r.dependencies,nodeOutput:r.output,edgeAttributes:i.attributes,edgeSelector:i.selector,edgeContext:i.context,edgeDependencies:i.dependencies,edgeOutput:i.output}}getAttributeValues(e,t,n,r){return this.update(),this._layerController.getAttributeValues(e,t,n,r)}setAnimationAttributes(e,t){return this._layerController.setAnimationAttributes(e,t)}resetAnimationAttributes(e){return this._layerController.resetAnimationAttributes(e)}setTextHidden(e,t){const n=this._textHiddenSet.addOrRemoveElements(e,t);this.redrawElements(n)}resetTextHidden(){const{nodes:e,edges:t}=this._textHiddenSet.getElements();this._textHiddenSet.clear(),this._layerController.redrawElements(e),this._layerController.redrawElements(t)}getUsedNodeAttributes(){return this._layerController.nodes.getUsedAttributes()}getUsedEdgeAttributes(){return this._layerController.edges.getUsedAttributes()}interpolateAttributes(e){const t=ir(),n=this._ogma.modules.graphics.getAttributesManager(),r=this._layerController,i=e.isNode?n.getUsedNodeAttributes():n.getUsedEdgeAttributes(),{animationDuration:s,animationEasing:o,animationStart:a}=r.getFlexArrays().nodes.current,l=s.getMultiple(e._indexes),c=o.getMultiple(e._indexes),d=a.getMultiple(e._indexes),u=[];for(let h=0;h<e.size;h++){const g={};i.forEach(p=>{const m=typeof p=="string"?p:p.join("."),f=ln(r.getFlexArrays().nodes.previous,p),y=ln(r.getFlexArrays().nodes.current,p);if(!y)return;const _=kP(t,d[h],l[h],c[h]);isNaN(_)?g[m]=y.get(e._indexes[h]):m.match(/color/gi)?g[m]=zc(f.get(e._indexes[h]),y.get(e._indexes[h]),_,_):g[m]=Dt(f.get(e._indexes[h]),y.get(e._indexes[h]),_)}),u.push(g)}return u}},MG=1e-12;function K2(e){return((e=Math.exp(e))+1/e)/2}function FG(e){return((e=Math.exp(e))-1/e)/2}function RG(e){return((e=Math.exp(2*e))-1)/(e+1)}var DG=function e(t,n,r){function i(s,o){var a,l,c=s[0],d=s[1],u=s[2],h=o[0],g=o[1],p=o[2],m=h-c,f=g-d,y=m*m+f*f;if(y<MG)l=Math.log(p/u)/t,a=function(S){return[c+S*m,d+S*f,u*Math.exp(t*S*l)]};else{var _=Math.sqrt(y),v=(p*p-u*u+r*y)/(2*u*n*_),x=(p*p-u*u-r*y)/(2*p*n*_),b=Math.log(Math.sqrt(v*v+1)-v),w=Math.log(Math.sqrt(x*x+1)-x);l=(w-b)/t,a=function(S){var A=S*l,C=K2(b),k=u/(n*_)*(C*RG(t*A+b)-FG(b));return[c+k*m,d+k*f,u*C/K2(t*A+b)]}}return a.duration=1e3*l*t/Math.SQRT2,a}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o;return e(o,a,a*a)},i}(Math.SQRT2,2,4),zG="cubicOut",OG=({graphWidth:e,graphHeight:t,viewWidth:n,viewHeight:r})=>.2*Math.min(n/e,r/t),BG=({smallestNodeSize:e,viewWidth:t,viewHeight:n})=>e===1/0?1/0:Math.min(t,n)/e*.5;function jG(e,t,n){return t===void 0?UG(e):t==="alt"?e.altKey:t==="shift"?e.shiftKey:t==="space"?n.isPressed("space"):void 0}function UG(e){return!e.altKey&&(o4?e.metaKey:e.ctrlKey)&&!e.shiftKey}var Fy=Math.SQRT2,Ry=.15,$G=class extends ct{constructor(e,t){super(e),this._zooming=!1,this.debug=!1,this._smoothZoom=fm((n,r,i)=>{const s=this._modules.settings,o=s.get("interactions.zoom.duration"),a=s.get("interactions.zoom.easing"),l=this._modules.camera.getZoom(),c={duration:o,easing:a};this._zooming||(this._zooming=!0,this._updateVisibility("zoom",!0));const d=s.get("interactions.zoom.speed")||Ry;let u=_P(n,d);n<0&&u!==0&&(u=1/u);const h=l*u;this._modules.camera.setZoom(h,c,{x:r,y:i}).then(()=>{this._zooming&&(this._zooming=!1,this._updateVisibility("zoom",!1))})},LL),this.debug=t}onMounted(){const e=this._modules.settings;e.register("interactions.zoom.enabled",!0),e.register("interactions.zoom.onDoubleClick",!1),e.register("interactions.zoom.duration",150),e.register("interactions.zoom.modifier",Fy),e.register("interactions.zoom.speed",Ry),e.register("interactions.zoom.easing",zG),e.register("interactions.zoom.minValue",this.debug?null:OG),e.register("interactions.zoom.maxValue",this.debug?null:BG),e.register("interactions.zoom.hideNodes",!1),e.register("interactions.zoom.hideEdges",!1),e.register("interactions.zoom.hideNodeTexts",!1),e.register("interactions.zoom.hideEdgeTexts",!1),e.register("interactions.zoom.scrollToPan",!1),e.register("interactions.zoom.metaKey",void 0),e.register("interactions.pan.enabled",!0),e.register("interactions.pan.hideNodes",!1),e.register("interactions.pan.hideEdges",!1),e.register("interactions.pan.hideNodeTexts",!1),e.register("interactions.pan.hideEdgeTexts",!1),e.register("interactions.rotation.enabled",!0),e.register("interactions.rotation.hideNodes",!1),e.register("interactions.rotation.hideEdges",!1),e.register("interactions.rotation.hideNodeTexts",!1),e.register("interactions.rotation.hideEdgeTexts",!1),e.register("interactions.gesture.enabled",!0),e.register("interactions.gesture.hideNodes",!1),e.register("interactions.gesture.hideEdges",!1),e.register("interactions.gesture.hideNodeTexts",!1),e.register("interactions.gesture.hideEdgeTexts",!1),this._setupInteractions()}_setupInteractions(){this._modules.interactions.onMouseWheel({priority:"zoom",check:()=>!!this._modules.settings.get("interactions.zoom.enabled"),handler:({x:e,y:t,delta:n,dx:r,dy:i,domEvent:s})=>{const o=r%1!=0||i%1!=0,a=this._modules.settings;!a.get("interactions.zoom.scrollToPan")||jG(s,a.get("interactions.zoom.metaKey"),this._modules.keyboard)||o?this._smoothZoom(n,e,t):this._modules.camera.move({x:r,y:i})}}),this._modules.interactions.onDoubleClick({priority:"zoom",check:()=>{const e=this._modules.settings.get("interactions.zoom.enabled"),t=this._modules.settings.get("interactions.zoom.onDoubleClick");return!(!e||!t)},handler:({x:e,y:t})=>this._smoothZoom(1,e,t)}),this._modules.interactions.onDrag({priority:"panning",disableDetection:!0,check:({button:e})=>{const t=!!this._modules.settings.get("interactions.pan.enabled");return e==="left"&&t},onStart:()=>this._updateVisibility("pan",!0),onProgress:({dx:e,dy:t})=>this._modules.camera.move({x:-e,y:-t}),onStop:()=>this._updateVisibility("pan",!1)}),this._modules.interactions.onDrag({priority:"rotation",disableDetection:!0,check:({button:e,domEvent:t})=>(e==="right"||t&&t.buttons===2)&&!!this._modules.settings.get("interactions.rotation.enabled"),onStart:({x:e,y:t})=>{this._rotationStart={x:e,y:t},this._updateVisibility("rotation",!0)},onProgress:({x:e,y:t})=>this._rotate({x:e,y:t}),onStop:()=>this._updateVisibility("rotation",!1)}),this._modules.interactions.onGesture({priority:"gesture",disableDetection:!0,check:()=>!!this._modules.settings.get("interactions.gesture.enabled"),onStart:()=>this._updateVisibility("gesture",!0),onProgress:({dx:e,dy:t,rotation:n,scale:r,x:i,y:s})=>{this._modules.settings.get("interactions.rotation.enabled")&&this._modules.camera.rotate(-n),this._modules.camera.zoomIn({modifier:r},{x:i,y:s}),this._modules.camera.move({x:-e,y:-t})},onStop:()=>this._updateVisibility("gesture",!0)})}_rotate({x:e,y:t}){const{width:n,height:r}=this._modules.camera.getSize(),i=n/2,s=r/2,o=this._rotationStart.x-i,a=this._rotationStart.y-s,l=e-i,c=t-s,d=Math.atan2(a,o)-Math.atan2(c,l);this._rotationStart.x=e,this._rotationStart.y=t,this._modules.camera.rotate(d)}_updateVisibility(e,t){const n=!t,r=this._modules.settings,i=r.get(`interactions.${e}.hideNodes`),s=r.get(`interactions.${e}.hideEdges`),o=r.get(`interactions.${e}.hideNodeTexts`),a=r.get(`interactions.${e}.hideEdgeTexts`);i&&this._modules.graphics.setNodesVisibility(n),o&&this._modules.graphics.setNodeTextsVisibility(n),s&&this._modules.graphics.setEdgesVisibility(n),a&&this._modules.graphics.setEdgeTextsVisibility(n)}},eA=1e-8,tA=1e8,l0={duration:0,startAfter:0,ignoreZoomLimits:!1,callback:wt,easing:"quadraticOut"};function Ah(e){return Math.abs(e)<1e-9}var GG=80,VG=class dF extends ct{constructor(){super(...arguments),this._minZoom=eA,this._maxZoom=tA,this._timeout=0}onMounted(){this._reset(),this._modules.settings.register("minZoom",eA,t=>{this._minZoom=t,this._zoom<t&&(this._zoom=t,this._modules.events.fire("move"))}),this._modules.settings.register("maxZoom",tA,t=>{this._maxZoom=t,this._zoom>t&&(this._zoom=t,this._modules.events.fire("move"))}),this._modules.events.on("setContainer",()=>{this._reset(),this._modules.events.fire("move")}).on("resize",()=>{this._reloadDimensions(),this._modules.events.fire("move")})}get x(){return this._x}get y(){return this._y}get zoom(){return this._zoom}get angle(){return this._angle}get width(){return this._dimensions.width}get height(){return this._dimensions.height}moveEnd(t){this._modules.dom.clearTimeout(this._timeout),this._timeout=this._modules.dom.setTimeout(()=>{this._modules.events.fire("viewChanged",{type:t})},GG)}getSize(){return{width:this._dimensions.width,height:this._dimensions.height}}getCenter(){return{x:this._x,y:this._y}}setCenter({x:t,y:n},r){const i=this._x,s=this._y,o=t-this._x,a=n-this._y;return Ah(o)&&Ah(a)?Promise.resolve():new Promise(l=>{this._moveAnimation&&this._modules.animations.cancel(this._moveAnimation);const c=this._modules.animations.play(d=>{this._x=i+o*d,this._y=s+a*d,this._modules.events.fire("move").fire("pan")},yt(be(be({},l0),r),{callback:()=>this.moveEnd("pan"),resolve:l}));c&&(this._moveAnimation=c)})}move({x:t,y:n},r){const i=nA({x:t,y:n},this._zoom,this._sinAngle,this._cosAngle);return this.setCenter({x:this._x+i.x,y:this._y+i.y},r)}getZoom(){return this._zoom}setZoom(t,n,r={x:void 0,y:void 0}){const{x:i,y:s}=r;let o=fi(t,this._minZoom,this._maxZoom);return n&&n.ignoreZoomLimits||(o=this._applyZoomLimits(o)),Ah(this._zoom-o)?Promise.resolve():new Promise(a=>{const l=yt(be(be({},l0),n),{callback:()=>this.moveEnd("zoom"),resolve:a}),c=this._dimensions.width/2,d=this._dimensions.height/2,u=this._zoom,h=c/u-c/o;if(i!==void 0&&s!==void 0){const p=(i-c)/u-(i-c)/o,m=(s-d)/u-(s-d)/o,f=this._cosAngle,y=this._sinAngle,_=f*p-y*m,v=y*p+f*m;this.setCenter({x:this._x+_,y:this._y+v},n)}this._zoomAnimation&&this._modules.animations.cancel(this._zoomAnimation),this._modules.dom.afterNextFrame().then(()=>{this._modules.events.fire("zoomStart",{duration:l.duration,easing:l.easing,startZoom:u,endZoom:o})});const g=this._modules.animations.play(p=>{this._zoom=c/(c/u-h*p),this._modules.events.fire("move").fire("zoom")},l);g&&(this._zoomAnimation=g)})}_applyZoomLimits(t){const n=this._modules.settings.get("interactions.zoom.minValue"),r=this._modules.settings.get("interactions.zoom.maxValue"),{minScaledSize:i,maxScaledSize:s,width:o,height:a,cx:l}=this._modules.locate.getGraphBoundingBox(),c=this._zoom,d=this.getSize();let u=t;if(!isNaN(l)){const h={smallestNodeSize:i,biggestNodeSize:s,graphWidth:o+s,graphHeight:a+s,viewWidth:d.width,viewHeight:d.height},g=n&&n(h),p=r&&r(h);rA(g)&&u<g?u<c&&(u=Math.min(c,g)):rA(p)&&u>p&&u>c&&(u=Math.max(c,p))}return u}zoomIn(t,n={x:void 0,y:void 0}){let r=1;return t===void 0&&(t={}),typeof t=="number"&&(t={modifier:t}),r=typeof t.modifier!="number"?this._modules.settings.get("interactions.zoom.modifier")||Fy:t.modifier,this.setZoom(this._zoom*r,t,n)}moveToBounds(t,n={}){const r=this._modules.locate.computeConfigForBounds(t,{ignoreZoomLimits:!0});return this.moveTo(r,n)}moveTo(t,n={}){const r=this.getZoom(),i=this.getCenter(),s=t.zoom||this._zoom;return n.duration===0?this.setView(t):new Promise(o=>{const a=Math.min(this.width,this.height),l=DG([i.x,i.y,a/r],[t.x,t.y,a/s]),c=l.duration,d=n.duration||c;this._moveAnimation&&this._modules.animations.cancel(this._moveAnimation);const u=this._modules.animations.play(h=>{const[g,p,m]=l(h);this._x=g,this._y=p,this._zoom=a/m,this._modules.events.fire("move"),this._modules.events.fire("pan")},{duration:d,easing:n.easing,callback:()=>this.moveEnd("pan"),resolve:o});u&&(this._moveAnimation=u)})}zoomOut(t,n={x:void 0,y:void 0}){let r=1;return t===void 0&&(t={}),typeof t=="number"&&(t={modifier:t}),r=typeof t.modifier!="number"?this._modules.settings.get("interactions.zoom.modifier")||Fy:t.modifier,this.setZoom(this._zoom/r,t,n)}getAngle(){return this._angle}setAngle(t,n){const r=this._angle,i=t-r;return Ah(i)?Promise.resolve():new Promise(s=>{this._rotateAnimation&&this._modules.animations.cancel(this._rotateAnimation);const o=this._modules.animations.play(a=>{for(this._angle=r+i*a;this._angle>Math.PI;)this._angle-=2*Math.PI;for(;this._angle<-Math.PI;)this._angle+=2*Math.PI;this._sinAngle=Math.sin(this._angle),this._cosAngle=Math.cos(this._angle),this._modules.events.fire("move").fire("rotate")},yt(be(be({},l0),n),{callback:()=>this.moveEnd("rotate"),resolve:s}));o&&(this._rotateAnimation=o)})}rotate(t,n){return this.setAngle(this._angle+t,n)}getScreenCenter(){return{x:this._dimensions.width/2,y:this._dimensions.height/2}}graphToScreenCoordinates({x:t,y:n},r={x:0,y:0}){const i=this._dimensions.width/2,s=this._dimensions.height/2;return Zg((t-this._x)*this._zoom+i,(n-this._y)*this._zoom+s,i,s,-this._angle,r)}screenToGraphCoordinates({x:t,y:n},r={x:0,y:0}){return Zg(this._x+(t-this._dimensions.width/2)/this._zoom,this._y+(n-this._dimensions.height/2)/this._zoom,this._x,this._y,this._angle,r)}projectBounds(t,n=t){const[r,i,s,o]=t,a=this._x,l=this._y,c=this._dimensions.width/2,d=this._dimensions.height/2,u=this._sinAngle,h=this._cosAngle,g=1/this._zoom;let p=1/0,m=1/0,f=-1/0,y=-1/0;const _=[r,i,r,o,s,o,s,i];for(let v=0;v<_.length;v+=2){let x=_[v],b=_[v+1];x=a+(x-c)*g,b=l+(b-d)*g;const w=x-a,S=b-l;x=h*w-u*S+a,b=u*w+h*S+l,x<p&&(p=x),x>f&&(f=x),b<m&&(m=b),b>y&&(y=b)}return n[0]=p,n[1]=m,n[2]=f,n[3]=y,n}screenToGraphVector({x:t,y:n}){return nA({x:t,y:n},this._zoom,this._sinAngle,this._cosAngle)}getView(){return{x:this._x,y:this._y,zoom:this._zoom,angle:this._angle,width:this._dimensions.width,height:this._dimensions.height}}setView(t,n){const{x:r,y:i,zoom:s,angle:o}=be({x:this._x,y:this._y,zoom:this._zoom,angle:this._angle},t);return Promise.all([this.setCenter({x:r,y:i},n),this.setZoom(s,n),this.setAngle(o,n)]).then(wt)}_reloadDimensions(){this._dimensions=this._modules.dom.getDimensions()}animationInProgress(){const t=this._moveAnimation,n=this._zoomAnimation,r=this._rotateAnimation;return!!(t&&!t.done||n&&!n.done||r&&!r.done)}getProjectedScreenBounds(t=0){const{width:n,height:r}=this._dimensions,i=Math.max(n,r)*t;return this.projectBounds([0-i,0-i,n+i,r+i])}_reset(){this._zoom=1,this._x=0,this._y=0,this._angle=0,this._sinAngle=0,this._cosAngle=1,this._dimensions=this._modules.dom.getDimensions()}clone(t){const n=new dF(this._ogma);return n._zoom=t.zoom||this._zoom,n._x=t.x||this._x,n._y=t.y||this._y,n._angle=t.angle||this._angle,n._sinAngle=Math.sin(n._angle),n._cosAngle=Math.cos(n._angle),n._dimensions={width:t.width||this._dimensions.width,height:t.height||this._dimensions.height},n}};function nA({x:e,y:t},n,r,i){return{x:i*(e/=n)-r*(t/=n),y:r*e+i*t}}function rA(e){return typeof e=="number"&&isFinite(e)}function HG(e){const t=e.filter(n=>isFinite(n)&&n>0);return t.length?ms(t):1}var WG="anonymous",XG="white",YG="default",qG={maxBlockId:1024,maxCoord:-1/0,maxScaledSize:16,maxPixelSize:255,maxMinVisibleSize:64,maxDashOffset:4,maxDashLength:3,maxGapLength:1,maxSymbolicSize:0,maxPatternScale:0},ZG=pm?"webgl":null,iA=5,JG=class extends ct{constructor(){super(...arguments),this._debug=!1,this._initDone=!1,this._boundaries={maxSize:10,maxMinVisibleSize:64},this._visibility={nodes:0,edges:0,nodeTexts:0,edgeTexts:0},this._nextAnimationId=1,this._animations=[],this._rendererState={type:null,code:null,state:"ok",message:""},this._cursorStyle=[],this._fontsNewlyLoaded=[],this._nextGeIndex=1,this._availableGeIndexes=[],this._renderOnNewFrame=!0,this._isBufferDisplayable=e=>{const t=bU(e),n=RP(e),r=t?this._visibility.nodes:this._visibility.edges,i=t?this._visibility.nodeTexts:this._visibility.edgeTexts;return r===0&&(!n||i===0)},this._onRendererChange=e=>{this._updateRendererState({type:e,state:"requested",code:null,message:void 0}),this._engine.setRenderType(e),this._modules.dom.refresh()},this._onNewFrame=()=>{this._processAnimations(),this._loadGraphInGraphicsEngine(),this._renderOnNewFrame&&this._render()},this._applyCursorStyle=()=>{const e=this._cursorStyle[this._cursorStyle.length-1]||this._modules.settings.get("cursor.default");np(this._domWrapper,e)},this._updateImageCrossOrigin=()=>{this._imageManager.setImgCrossOrigin(this._modules.settings.get("imgCrossOrigin")||null)}}onMounted(){this._debug=this._ogma.isDebug(),this._renderOnNewFrame=!0,this._formatText=mP().applyArabicShaping,this._attributesManager=new PG(this._ogma,this._modules),this._imageManager=new x$,this._fontManager=new gU,this._engine=new n0(n0.getCachedInitData()),this._domWrapper=this._engine.getDomWrapper(),this._engine.on("error",this._onNewFrame),this._nodeAnimationMap=new Map,this._edgeAnimationMap=new Map,this._movingNodes=new Set,this._movingEdges=new Set,this._modules.events.register(["reloadFonts","rendererStateChange","beforeUpdateAttributes","updateAttributes","animate","move","pan","zoom","rotate","viewExportStart","viewExportEnd","afterImageExport","viewChanged","zoomStart"]),this._modules.settings.register("renderer",ZG,this._onRendererChange),this._modules.settings.register("edgeTipRatio",VI,e=>{this._engine.setEdgeArrowSizeRatio(e),this._modules.dom.refresh()}),this._modules.settings.register("edgeMinTipSize",HI,e=>{this._engine.setEdgeMinTipSize(e),this._modules.dom.refresh()}),this._modules.settings.register("backgroundColor",XG,e=>{this._engine.parseColor(e)?this._modules.dom.refresh():(mo(`Invalid background color "${e}" specified; will default to black.`),this._modules.settings.set("backgroundColor","black"))}),this._modules.settings.register("texts.hideUntilFontsLoaded",!0,e=>{this._fontManager.setHideUntilFontsLoaded(!!e)}),this._modules.settings.register("texts.cornerRadius",iA,e=>{this._engine.getTextManager().setCornerRadius(typeof e=="number"?e:iA),this._modules.dom.refresh()}),this._modules.settings.register("imgCrossOrigin",WG,this._updateImageCrossOrigin),this._modules.settings.register("cursor.default",YG,this._applyCursorStyle),this._modules.dom.setLayer("graphics",this._domWrapper),this._engine.setGlobalBoundaries(qG),this._modules.dom.beforeNextFrame().then(()=>{this._initDone=!0,this._fireRendererStateChangeEvent()}),this._imageManager.onFetch(()=>{this._engine.notifyPatternUpdate(),this._modules.dom.refresh()}),this._fontManager.onFontLoaded(e=>{this._fontsNewlyLoaded.push(e),this._engine.notifyPatternUpdate(),this._engine.notifyFontsReloaded(),this._modules.dom.refresh()}),this._modules.dom.addMediaListener("(min-resolution: 2dppx)",()=>this._modules.dom.refresh()),this._visibleAttributeLayer=this._attributesManager.addAttributeLayer({priority:0,name:`internal(${oy})`,tag:oy,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),this._dataAttributeLayer=this._attributesManager.addAttributeLayer({priority:0,name:`internal(${ay})`,tag:ay,nodeDependencies:void 0,edgeDependencies:void 0}),G2(this._engine,this._attributesManager.getFlexArrays()),this._modules.events.on("move",()=>this._modules.dom.refresh()).on("frame",this._onNewFrame).on("viewExportStart",()=>{this._renderOnNewFrame=!1}).on("viewExportEnd",()=>{this._renderOnNewFrame=!0}).on("clearGraph",()=>{this._nextGeIndex=1,this._availableGeIndexes=[],this._engine.clear(),this._attributesManager.clear(),this._modules.dom.refresh(),this._animations=[],this._nodeAnimationMap.clear(),this._edgeAnimationMap.clear()}).on("viewChanged",({type:e})=>{if(e==="rotate"){const t=this._modules.graph.getEdges().filter(n=>n.getAttribute("adjustAnchors"));this._attributesManager.redrawElements(t)}}).on("addNodes",e=>{this._attributesManager.updateForAllAttributeLayers(e.nodes)}).on("addEdges",e=>{this._attributesManager.updateForAllAttributeLayers(e.edges)}).on("excludedStateChange",e=>{this._visibleAttributeLayer.updateElements(e.elements)}).on("setData",e=>{this._dataAttributeLayer.updateElements(e.elements)}),n0.clearCachedInitData(),this._modules.dom.addWindowEventListener("unload",()=>this.destroy())}onReady(e){e.renderer!==void 0&&this._ogma.setOptions({renderer:e.renderer}),e.imgCrossOrigin!==void 0&&this._ogma.setOptions({imgCrossOrigin:e.imgCrossOrigin})}getTransparentBackgroundColor(){const e=this._modules.settings.get("backgroundColor");return e?this._engine.transparentify(e):null}_render(){const e=this._modules.dom.getDimensions(),t=this._modules.camera.getView(),n=zr(),r=ir(),i=this._modules.settings.get("backgroundColor"),s=this._isBufferDisplayable;this._engine.setView({x:t.x,y:t.y,zoom:t.zoom,angle:t.angle,width:e.width,height:e.height,pixelRatio:n,currentTime:r,backgroundColor:i,isBufferDisplayable:s});try{this._engine.render(),this._rendererState.state==="requested"&&this._updateRendererState({state:"ok"})}catch(o){if(this._debug)throw o;const{message:a,code:l="OTHER"}=o,c=this._rendererState.type,d=p8(c);let u=this._rendererState.state==="requested"?`Error while initializing the ${d} renderer`:`The ${d} renderer encountered an unexpected runtime error`,h=null;c==="webgl"&&(u+="; fallbacking on canvas renderer",h="canvas"),mo(a||""),mo(u),this._updateRendererState({state:"error",code:l,message:a}),this._modules.settings.set("renderer",h)}}_fireRendererStateChangeEvent(){const e=this._rendererState;this._modules.events.fire("rendererStateChange",{type:e.type,state:e.state,code:e.code,message:e.message})}_updateRendererState({type:e,state:t,code:n,message:r}){let i=!1;e!==void 0&&this._rendererState.type!==e&&(this._rendererState.type=e,i=!0),t!==void 0&&this._rendererState.state!==t&&(this._rendererState.state=t,i=!0),n!==void 0&&this._rendererState.code!==n&&(this._rendererState.code=n,i=!0),r!==void 0&&this._rendererState.message!==r&&(this._rendererState.message=r,i=!0),i&&this._initDone&&this._fireRendererStateChangeEvent()}getImageData(){return this._modules.dom.afterNextFrame().then(()=>this._engine.getImageData())}getNodeAttributes(){return this._attributesManager.getFlexArrays().nodes.current}getEdgeAttributes(){return this._attributesManager.getFlexArrays().edges.current}getGraphicsEngine(){return this._engine}getImageManager(){return this._imageManager}getFontManager(){return this._fontManager}allocateGraphicsEngineBlockId(){return this._availableGeIndexes.length?this._availableGeIndexes.pop():this._nextGeIndex++*Tm+I6}releaseGraphicsEngineBlockId(e){this._engine.freeBlock(e),this._availableGeIndexes.push(e),this._modules.dom.refresh()}addCursorStyle(e){e&&(this._cursorStyle.push(e),this._applyCursorStyle())}removeCursorStyle(e){if(!e)return;const t=this._cursorStyle.lastIndexOf(e);t!==-1&&(this._cursorStyle.splice(t,1),this._applyCursorStyle())}reloadFonts(){this._modules.events.fire("reloadFonts"),this._engine.notifyFontsReloaded(),this._modules.dom.refresh()}getDomElement(){return this._domWrapper}setTextHidden(e,t){this._attributesManager.setTextHidden(e,t)}resetTextHidden(){this._attributesManager.resetTextHidden(),this._modules.dom.refresh()}getAttributesManager(){return this._attributesManager}_checkFontsNewlyLoaded(){return!!this._fontsNewlyLoaded.length&&(this._fontsNewlyLoaded=[],!0)}_loadGraphInGraphicsEngine(){this._attributesManager.update(),this._checkFontsNewlyLoaded()&&this._attributesManager.redrawAll(),this._modules.events.fire("beforeUpdateAttributes");const{elementsToRedraw:e,elementsUpdated:t}=this._attributesManager.getUpdatedElements(),n=t.nodes.size>0||t.edges.size>0;(t.nodeAttributesSet.has("radius")||t.edgeAttributes.includes("width"))&&(this._boundaries.maxSize=g8(this._modules.graph)),(t.nodeAttributesSet.has("shape")||t.edgeAttributes.includes("shape.head")||t.edgeAttributes.includes("shape.tail"))&&G2(this._engine,this._attributesManager.getFlexArrays()),s$({graph:this._modules.graph,elements:e,engine:this._engine,imageManager:this._imageManager,fontManager:this._fontManager,view:this._modules.camera.getView(),attributes:this._attributesManager.getFlexArrays(),boundaries:this._boundaries,formatText:this._formatText}),n&&this._modules.events.fire("updateAttributes",t)}_forceCompleteGraphRefresh(){this._attributesManager.redrawAll(),this._loadGraphInGraphicsEngine()}export(e,t,n,r){let i;return Promise.all([this._modules.graph.getNodes().addClass(Xo),this._modules.graph.getEdges().addClass(Xo)]).then(()=>this.resolveAtNextFrame()).then(()=>this._imageManager.whenReady()).then(()=>{n==="all"?(i=eV(this._modules.graph),this._forceCompleteGraphRefresh()):this._loadGraphInGraphicsEngine();const s=this._modules.camera.clone(be({},t));return this._modules.events.fire("viewExportStart",{preventOverlap:r.preventOverlap,camera:s,view:s.getView()}),this._ogma.view.afterNextFrame().then(()=>this._engine.export(e,t,r))}).then(s=>Promise.all([this._modules.graph.getNodes().removeClass(Xo),this._modules.graph.getEdges().removeClass(Xo)]).then(()=>s)).then(s=>(n==="all"&&(tV(i),this._forceCompleteGraphRefresh()),this._modules.events.fire("viewExportEnd"),s))}addAttributeLayer(e){return this._attributesManager.addAttributeLayer(e)}getAttributeValues(e,t,n,r){return this._attributesManager.getAttributeValues(e,t,n,r)}forceAttributesComputation(){this._attributesManager.update()}resolveAtNextFrame(e){return this._modules.dom.afterNextFrame().then(()=>e)}isMoving(e){return(e.isNode?this._movingNodes:this._movingEdges).has(e._index)}animate(e,t,n,r){const i=QG(r);return i.duration&&this._engine.ensureAnimationsReady(),this._animate(e,t,n,i)}isAnimating(){return this._animations.length>0}getAnimationInformation(e){return this._attributesManager.getAnimationInformation(e)}_toSubGraph(e){if(e instanceof Ms||e instanceof es)return{nodes:e.toList(),edges:e.getAdjacentEdges()};if(e instanceof Aa||e instanceof xo)return{nodes:this._modules.graph.nodeList(),edges:e.toList()};const t=e,n={nodes:t.nodes||this._modules.graph.nodeList(),edges:t.edges||this._modules.graph.edgeList()};return n.nodes.size&&(n.edges.size?n.edges=n.edges.concat(n.nodes.getAdjacentEdges()).dedupe():n.edges=n.nodes.getAdjacentEdges()),n}_animate(e,t,n,{duration:r,easing:i}){if((!this._animations.length||n)&&!r)return t(e),Promise.resolve(e);const s=this._toSubGraph(e),o=s.nodes,a=s.edges;if(o.size===0&&a.size===0)return t(e),Promise.resolve(e);if(o.size){if(n)for(let h=0;h<o._indexes.length;h++)this._movingNodes.add(o._indexes[h]);this._modules.events.fire("animate",{elements:o,duration:r,updatesPositions:n,easing:i})}if(a.size){if(n)for(let h=0;h<a._indexes.length;h++)this._movingEdges.add(a._indexes[h]);this._modules.events.fire("animate",{elements:a,duration:r,updatesPositions:n,easing:i})}const l={id:this._nextAnimationId++,startTime:ir(),finished:!1,func:()=>t(e),duration:r,easing:i,nodes:o,edges:a,started:!1,updatesPositions:n,resolve:wt};let c=l;const d=new Set;if(c=this._getLongestAnimation(c,l.nodes,d),c=this._getLongestAnimation(c,l.edges,d),c.updatesPositions){for(let h=0;h<o._indexes.length;h++)this._nodeAnimationMap.set(o._indexes[h],c);for(let h=0;h<a._indexes.length;h++)this._edgeAnimationMap.set(a._indexes[h],c);l.duration=c.duration,l.startTime=c.startTime}if(l.duration===0&&c.id===l.id)return t(e),Promise.resolve(e);const u=new Promise(h=>l.resolve=()=>h(e));return this._animations.push(l),this._modules.dom.refresh(),r||this._processAnimations(),u}_removeFinishedAnimations(){this._animations=this._animations.filter(e=>!e.finished)}_getAnimationElements(e){return{nodes:e.nodes,edges:e.edges}}_resetAnimationAttributes({nodes:e,edges:t}){this._attributesManager.resetAnimationAttributes({nodes:e,edges:t});for(let n=0;n<e._indexes.length;n++)this._nodeAnimationMap.delete(e._indexes[n]),this._movingNodes.delete(e._indexes[n]);for(let n=0;n<t._indexes.length;n++)this._edgeAnimationMap.delete(t._indexes[n]),this._movingEdges.delete(e._indexes[n])}_getLongestAnimation(e,t,n){const r=t.isNode?this._nodeAnimationMap:this._edgeAnimationMap;for(let i=0;i<t._indexes.length;i++){const s=r.get(t._indexes[i]);s&&!n.has(s.id)&&(n.add(s.id),(e.updatesPositions||!s.updatesPositions)&&s.duration+s.startTime<e.duration+e.startTime||(e=s))}return e}_processAnimations(){if(!this._animations.length)return;const e=ir(),t=[];this._attributesManager.update();for(const n of this._animations)n.started||(n.started=!0,t.push(n.func),this._attributesManager.setAnimationAttributes(this._getAnimationElements(n),n));for(const n of t)n();for(const n of this._animations)e>=n.startTime+n.duration&&(this._resetAnimationAttributes(this._getAnimationElements(n)),n.resolve(n.elements),n.finished=!0);this._removeFinishedAnimations(),this._animations.length&&this._modules.dom.refresh()}hideTexts(){this.setNodeTextsVisibility(!1),this.setEdgeTextsVisibility(!1)}showTexts(){this.setNodeTextsVisibility(!0),this.setEdgeTextsVisibility(!0)}setNodesVisibility(e){return this._updateVisibilityCounter("nodes",e)}setNodeTextsVisibility(e){return this._updateVisibilityCounter("nodeTexts",e)}setEdgesVisibility(e){return this._updateVisibilityCounter("edges",e)}setEdgeTextsVisibility(e){return this._updateVisibilityCounter("edgeTexts",e)}_updateVisibilityCounter(e,t){this._visibility[e]+=t?-1:1,this._modules.dom.refresh()}detectNode(e,t,n,r,i,s){return u8(e,t,n,r,i,s,this._modules.graph,this._attributesManager,this._modules.camera,this._engine,this._movingNodes,this._formatText)}detectEdge(e,t,n,r,i){return h8(e,t,n,r,i,this._modules.graph,this._modules.camera,this._movingNodes,this._attributesManager)}getVisibilityCounters(){return this._visibility}destroy(){this.getGraphicsEngine().destroy(),this.getImageManager().destroy(),this.getFontManager().destroy()}};function QG(e){return typeof e=="number"?e={duration:e}:typeof e=="object"&&e!==null||(e={duration:0}),{duration:KG(e.duration),easing:e.easing||"linear",chain:!!e.chain}}function KG(e){return typeof e!="number"||!isFinite(e)||e<0?0:e}function sA(e,t){const n=t?e.getNodeAttribute("excluded"):e.getEdgeAttribute("excluded"),r=(t?e.getNodes("all"):e.getEdges("all"))._indexes,i=n.getMultiple(r);return n.fill(r,0),{excludedList:n,indexes:r,values:i}}function oA({excludedList:e,indexes:t,values:n}){e.setMultiple(t,n)}function eV(e){return{nodes:sA(e,!0),edges:sA(e,!1)}}function tV({nodes:e,edges:t}){oA(e),oA(t)}var nV=250,rV=50,iV=class extends ct{constructor(){super(...arguments),this._onAnyEvents=[],this._registeredEvents={},this.onIdle=fm(()=>this.fire("idle"),rV)}onMounted(){this._registeredEvents={},this.register(["idle"]),this._ogma.onReady(()=>{this.on(["viewChanged","layoutEnd","addNodes","addEdges","removeNodes","removeEdges","animate","setMultipleAttributes","transformationRefresh"],()=>{this._modules.dom.clearTimeout(this._idleTimeout),this._idleTimeout=this._modules.dom.setTimeout(this.onIdle,nV)})})}isRegistered(e){return!!this._registeredEvents[e]}register(e,t=[]){e.forEach(n=>{if(this._registeredEvents[n])throw new Error(`event "${n}" already exists`);this._registeredEvents[n]=new sV(!1,n)})}onAnyEvent(e){this._onAnyEvents.push(e)}on(e,t){return Array.isArray(e)?(e.forEach(n=>this.on(n,t)),this):this._registeredEvents[e]?(this._registeredEvents[e].on(t),this):this}off(e){return Object.values(this._registeredEvents).forEach(t=>{t.off(e)}),this}fire(e,t=null){const n=this._getEvent(e);return this._onAnyEvents.forEach(r=>r(t,e)),n.trigger(t),this}once(e,t){const n=this,r=function(){t.apply(null,arguments),n.off(r)};return this.on(e,r)}_getEvent(e){if(!(e in this._registeredEvents))throw new Error(`Event ${e} does not exist`);return this._registeredEvents[e]}destroy(){Object.values(this._registeredEvents).forEach(e=>{e.destroy()})}},sV=class{constructor(e,t){this._subscribers=[],this._handlers=[],this._reverseOrder=e,this._name=t}trigger(e){for(const t of this._handlers)t(e,this._name);return this}on(e){if(typeof e!="function")throw new Error("handler is not a function");const t=this._reverseOrder?0:this._subscribers.length;return this._handlers.splice(t,0,e),this._subscribers.splice(t,0,e),this}off(e){let t;for(;(t=this._subscribers.indexOf(e))!==-1;)this._subscribers.splice(t,1),this._handlers.splice(t,1);return this}destroy(){this._subscribers=[],this._handlers=[]}},oV=class extends ct{onMounted(){this._graphics=this._modules.graphics,this._modules.events.register(["setMultipleAttributes"]),this._modules.events.on(["addNodes","addEdges"],({nodes:e,edges:t,objects:n})=>{this._onAddElements(e||t,n)}),this._originalAttributesLayer=this._graphics.addAttributeLayer({name:"original-attributes",priority:Xj,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0}),this._individualAttributesLayer=this._graphics.addAttributeLayer({name:"individual-attributes",priority:Zj,nodeOutput:{attributes:"all"},edgeOutput:{attributes:"all"},nodeDependencies:void 0,edgeDependencies:void 0})}_onAddElements(e,t){const n=t.map(r=>r.attributes);this._originalAttributesLayer.setAttributeValues(e,n)}getOriginalAttributes(){return this._originalAttributesLayer.getFlexArrays()}getIndividualAttributes(){return this._individualAttributesLayer.getFlexArrays()}setMultipleAttributes(e,t,n){const r=Array.isArray(t)?t.length&&t[0]?xp(t[0],e.isNode):[]:xp(t,e.isNode),i=r.includes("x")||r.includes("y"),s=[];return this._modules.events.fire("setMultipleAttributes",{elements:e,values:t,updatedAttributes:r,options:n,promises:s}),this._graphics.animate(e,()=>{this._individualAttributesLayer.setAttributeValues(e,t)},i,n).then(o=>Promise.all(s).then(()=>o))}setSingleAttribute(e,t,n,r){const i={};return xs(i,t,n),this.setMultipleAttributes(e,i,r)}resetMultipleAttributes(e,t,n){const r=t||this._individualAttributesLayer.getUsedAttributeNames(e),i=r&&(r.includes("x")||r.includes("y")),s={};for(const o of r)xs(s,o,void 0);return this._graphics.animate(e,()=>{this._individualAttributesLayer.setAttributeValues(e,s)},i,n)}getMultipleAttributes(e,t){return this._graphics.getAttributeValues(e,t,!0,!1)}getSingleAttribute(e,t){return this._graphics.getAttributeValues(e,t,!1,!1)}replaceOriginalAttributes(e,t,n=[]){const r={},i=this._originalAttributesLayer.getUsedAttributeNames(e).filter(s=>!n.includes(s));for(let s=0;s<i.length;++s)xs(r,i[s],void 0);this._originalAttributesLayer.setAttributeValues(e,r),this._originalAttributesLayer.setAttributeValues(e,t)}getSinglePreviousAttribute(e,t){return this._graphics.getAttributeValues(e,t,!1,!0)}getMultiplePreviousAttributes(e,t){return this._graphics.getAttributeValues(e,t,!0,!0)}},aV=class extends ct{constructor(){super(...arguments),this._currentValue={},this._onChange={},this._defaultValues={},this._keys=[]}onReady(e){e.renderer&&this.update({renderer:e.renderer}),e.options&&this.update(e.options)}register(e,t,n,r){return r===void 0&&(r=!0),this._keys.push(e),this._currentValue[e]=t,this._defaultValues[e]=t,this._onChange[e]=n||wt,n&&r&&n(t),this}update(e){e=Ud(e);const t=this._keys,n={},r=this._currentValue;for(let s=0;s<t.length;++s){const o=t[s];if(o in e){let a=e[o];a===void 0&&(a=this._defaultValues[o]),n[o]=r[o],r[o]=a}}const i=Object.keys(n);for(let s=0;s<i.length;++s){const o=i[s],a=this._currentValue[o],l=n[o];a!==l&&this._onChange[o](a,l)}return V_(n)}get(e){return arguments.length===0?V_(this._currentValue):this._currentValue[e]}set(e,t){const n=this._currentValue[e],r=this._onChange[e];this._currentValue[e]=t,r&&r(t,n)}},lV=class{constructor(e,t){this._classes=e,this._name=t}getName(){return this._name}getIndex(){return this._classes.getIndex(this._name)}setIndex(e){return this._classes.setIndex(this._name,e)}update(e){return this._classes.update(this._name,e),this}getDefinition(){return this._classes.getDefinition(this._name)}getNodes(e){return this._classes.getElementsByClass(this._name,e).nodes}getEdges(e){return this._classes.getElementsByClass(this._name,e).edges}clearNodes(e){this.getNodes(e).removeClass(this._name)}clearEdges(e){this.getEdges(e).removeClass(this._name)}add(e){e.addClass(this._name)}remove(e){e.removeClass(this._name)}destroy(){const e=this._classes.getElementsByClass(this._name);return Promise.all([e.nodes.removeClass(this._name),e.edges.removeClass(this._name)]).then(()=>this._classes.removeClass(this._name))}},cV=1e3,dV=.5/cV,uV=class extends ct{constructor(){super(...arguments),this._builtinClasses=[],this._userClasses=[],this._classesByName={},this._onExcludedStateChange=({elements:e,value:t})=>{if(t){const n=this._builtinClasses.map(r=>r.name);this._addOrRemoveClassesToElements(n,e,!1)}},this._onClearGraph=()=>{this._builtinClasses.concat(this._userClasses).forEach(e=>e.elementSet.clear())},this._onRemoveElements=({nodes:e,edges:t})=>{const n=e||t;this._builtinClasses.concat(this._userClasses).forEach(r=>r.elementSet.removeElements(n))}}onMounted(){this._modules.events.on("excludedStateChange",this._onExcludedStateChange).on("clearGraph",this._onClearGraph).on("removeEdges",this._onRemoveElements).on("removeNodes",this._onRemoveElements)}_getClassList(e){return e?this._builtinClasses:this._userClasses}createClass({name:e,isBuiltin:t=!1,after:n,nodeAttributes:r,nodeDependencies:i,nodeOutput:s,edgeAttributes:o,edgeDependencies:a,edgeOutput:l}={}){if(typeof e!="string")throw new Error('the "name" argument should be a string');const c=this._getClassList(t),d=n?hV(c,n)+1:c.length;if(d===-1)throw new Error(`createClass: class specified as \`after\` parameter "${n}" does not exist`);if(t&&!e.startsWith("_"))throw new Error(`invalid builtin class name "${e}": builtin classes should start with '_'`);const u=new Eu(this._modules.graph),h=new lV(this,e),g={name:e,elementSet:u,attributeLayer:this._modules.graphics.addAttributeLayer({name:`class(${e})`,tag:e,standaloneSelectors:!0,nodeAttributes:r||void 0,edgeAttributes:o||void 0,nodeSelector:(p,m)=>m.hasElement(p),edgeSelector:(p,m)=>m.hasElement(p),nodeContext:u,edgeContext:u,nodeOutput:s,edgeOutput:l,nodeDependencies:i,edgeDependencies:a}),isBuiltin:t,wrapper:h};return c.splice(d,0,g),t&&c.sort((p,m)=>WS.indexOf(p.name)-WS.indexOf(m.name)),this._updatePriorities(t),this._classesByName[e]=g,this._modules.events.register([Oa(e,!0,!0),Oa(e,!0,!1),Oa(e,!1,!0),Oa(e,!1,!1)]),h}removeClass(e){const t=this._get(e),n=this._getClassList(t.isBuiltin),r=n.indexOf(t);if(r===-1)throw new Error(`class "${e}" does not exist`);return n.splice(r,1),t.attributeLayer.destroy(),delete this._classesByName[e],this._updatePriorities(t.isBuiltin),Promise.resolve(void 0)}_updatePriorities(e){const t=this._getClassList(e),n=Jj+(e?.5:0);for(let r=0;r<t.length;++r){const i=t[r],s=n+dV*r;i.attributeLayer.update({priority:s})}}_get(e){const t=this._classesByName[e];if(!t)throw new Error(`class "${e}" does not exist`);return t}getIndex(e){const t=this._get(e);return this._getClassList(t.isBuiltin).indexOf(t)}setIndex(e,t){const n=this._get(e),r=this._getClassList(n.isBuiltin),i=r.indexOf(n),s=fi(t,0,r.length-1);r.splice(i,1),r.splice(s,0,n),this._updatePriorities(n.isBuiltin)}update(e,{nodeAttributes:t,edgeAttributes:n,nodeDependencies:r,edgeDependencies:i,nodeOutput:s,edgeOutput:o,fullOverwrite:a}={}){this._get(e).attributeLayer.update({nodeAttributes:t,edgeAttributes:n,nodeDependencies:r,edgeDependencies:i,nodeOutput:s,edgeOutput:o,fullOverwrite:a})}getDefinition(e){const t=this._get(e),{nodeAttributes:n,nodeDependencies:r,nodeOutput:i,edgeAttributes:s,edgeDependencies:o,edgeOutput:a}=t.attributeLayer.getDefinition();return{nodeAttributes:n||void 0,edgeAttributes:s||void 0,nodeDependencies:r,edgeDependencies:o,nodeOutput:i,edgeOutput:a}}_addOrRemoveClassesToElements(e,t,n){const r=t.isNode;for(let i=0;i<e.length;++i){const s=e[i],{elementSet:o,attributeLayer:a}=this._get(s),l=o.addOrRemoveElements(t,n),c=Oa(s,r,n);l.size&&(a.updateElements(l),this._modules.events.fire(c,r?{nodes:l}:{edges:l}))}}_animatedAttributesUpdatePositions(e,t){for(let n=0;n<e.length;++n){const r=e[n],i=this.getDefinition(r);if(t.isNode&&i.nodeAttributes&&(i.nodeAttributes.x||i.nodeAttributes.y))return!0}return!1}_getAnimatedAtrributes(e,t){return e.reduce((n,r)=>{const i=this.getDefinition(r);return t.isNode&&i.nodeAttributes&&n.push(...xp(i.nodeAttributes,!0)),!t.isNode&&i.edgeAttributes&&n.push(...xp(i.edgeAttributes,!1)),n},[])}addClassesToElements(e,t,n){const r=t.toList(),i=this._animatedAttributesUpdatePositions(e,r);return this._modules.graphics.animate(t,()=>{this._addOrRemoveClassesToElements(e,r,!0)},i,n)}removeClassesFromElements(e,t,n){const r=t.toList(),i=this._animatedAttributesUpdatePositions(e,r);return this._modules.graphics.animate(t,()=>{this._addOrRemoveClassesToElements(e,r,!1)},i,n)}hasSingleElementClass(e,t){return this._get(e).elementSet.hasElement(t)}getElementsClassList(e,t={}){const{includeBuiltinClasses:n=!1}=t,r=new Array(e.size);for(let i=0;i<r.length;++i)r[i]=[];return this._addClassNamesToList(r,e,this._userClasses),n&&this._addClassNamesToList(r,e,this._builtinClasses),r}_addClassNamesToList(e,t,n){const r=t.toList();for(let i=0;i<n.length;++i){const{name:s,elementSet:o}=n[i];for(let a=0;a<r.size;++a){const l=r.get(a);o.hasElement(l)&&e[a].push(s)}}}getClassByName(e,t=!1){const n=this._classesByName[e]||null;if(t&&!n)throw new Error(`class "${e}" does not exist`);return n&&n.wrapper}getClassList(){return this._userClasses.map(e=>e.wrapper)}getElementsByClass(e,t="visible"){const{elementSet:n}=this._get(e),r=n.getElements();let i=r.nodes,s=r.edges;return t==="visible"?(i=i.filter(o=>o.isVisible()),s=s.filter(o=>o.isVisible())):t==="raw"&&(i=i.filter(o=>!o.isVirtual()),s=s.filter(o=>!o.isVirtual())),{nodes:i,edges:s}}_onClassEvent(e,t,n,r){const i=Oa(e,n,r);this._modules.events.on(i,t)}onNodeClassAdded(e,t){this._onClassEvent(e,t,!0,!0)}onNodeClassRemoved(e,t){this._onClassEvent(e,t,!0,!1)}onEdgeClassAdded(e,t){this._onClassEvent(e,t,!1,!0)}onEdgeClassRemoved(e,t){this._onClassEvent(e,t,!1,!1)}};function Oa(e,t,n){return`${t?"node":"edge"}Class${n?"Added":"Removed"}_${e}`}function hV(e,t){for(let n=0;n<e.length;++n)if(e[n].name===t)return n;return-1}var uF=()=>({x:0,y:0,x1:0,y1:0,x2:0,y2:0});function aA(e,t,n,{cells:r=!0,boxes:i=!0,query:s=!0}={}){const o=t.keys().map(l=>t.keyToBBox(Number(l))),a=t.getBoxes();if(r&&(e.beginPath(),e.lineWidth=1,e.strokeStyle="#707070",o.forEach(l=>{e.rect(l[0],l[1],l[2]-l[0],l[3]-l[1])}),e.stroke()),i&&(e.beginPath(),e.lineWidth=1,e.strokeStyle="#ff7070",a.forEach(l=>{e.rect(l[0],l[1],l[2]-l[0],l[3]-l[1])}),e.closePath(),e.stroke()),s&&n){const l=n;e.beginPath(),e.lineWidth=2,e.strokeStyle="#3030ff",e.rect(l[0],l[1],l[2]-l[0],l[3]-l[1]),e.closePath(),e.stroke()}}function gV(e){const[t,n,r]=e.getNodeAttributes(["x","y","radius"]),[i,s,o]=e.getEdgeAttributes(["source","target","curvature"]),a=uF(),l=Qx();return c=>{if(c<0){c=-c;const d=i.get(c),u=s.get(c),h=o.get(c),g=t.get(d),p=n.get(d),m=t.get(u),f=n.get(u);d===u?(Nm(g,p,h,r.get(d),0,a),Im(g,p,a.x1,a.y1,a.x2,a.y2,m,f,l)):h===0?(l.minX=Math.min(g,m),l.minY=Math.min(p,f),l.maxX=Math.max(g,m),l.maxY=Math.max(p,f)):(ka(g,p,m,f,h,a),eb(g,p,a.x,a.y,m,f,l))}else{const d=t.get(c),u=n.get(c),h=r.get(c);l.minX=d-h,l.minY=u-h,l.maxX=d+h,l.maxY=u+h}return[l.minX,l.minY,l.maxX,l.maxY]}}var pV=["x","y","radius"],mV=["width","curvature"],fV=.5,_V=class extends ct{constructor(){super(...arguments),this._minCellSize=8,this._clear=()=>{this._index.clear(),this._elementsToUpdate.clear()},this._onGraphUpdate=e=>{if(e.nodes&&(!e.nodeAttributes||e.nodeAttributes.some(t=>pV.includes(t)))){const t=e.nodes.fastGetAdjacentElements().edges;this._elementsToUpdate.addElements(e.nodes),this._elementsToUpdate.addElements(t)}e.edges&&(e.edgeAttributes&&!e.edgeAttributes.some(t=>mV.includes(t))||this._elementsToUpdate.addElements(e.edges))}}onMounted(){this._index=new SB(this._getIntersector(),gV(this._modules.graph),this._minCellSize,1e6),this._elementsToUpdate=new Eu(this._modules.graph),this._removedNodes=this._modules.graph.getNodeAttribute("removed"),this._removedEdges=this._modules.graph.getEdgeAttribute("removed"),this._excludedNodes=this._modules.graph.getNodeAttribute("excluded"),this._excludedEdges=this._modules.graph.getEdgeAttribute("excluded"),this._queryResult={edges:[],nodes:[]},this._queryBounds=[0,0,0,0],this._modules.events.on(["addNodes","addEdges","removeNodes","removeEdges","updateAttributes"],this._onGraphUpdate).on("excludedStateChange",({elements:e})=>{this._elementsToUpdate.addElements(e)}).on("clearGraph",this._clear)}_getIntersector(){const e=this._modules.graph,[t,n,r]=e.getNodeAttributes(["x","y","radius"]),[i,s,o,a]=e.getEdgeAttributes(["source","target","width","curvature"]),l=uF();return(c,d,u,h,g)=>{if(c<0){c=-c;const p=i.get(c),m=s.get(c),f=a.get(c),y=o.get(c)/2,_=t.get(p),v=n.get(p),x=t.get(m),b=n.get(m);return p===m?(Nm(_,v,f,r.get(p),0,l),_L(_,v,l.x1,l.y1,l.x2,l.y2,x,b,d-y,u-y,h+y,g+y)):f===0?tb(_,v,x,b,d-y,u-y,h+y,g+y):(ka(_,v,x,b,f,l),fL(_,v,l.x,l.y,x,b,d-y,u-y,h+y,g+y))}return kx(t.get(c),n.get(c),r.get(c),d,u,h,g)}}reindex(){this._modules.graphics.forceAttributesComputation(),this._index.clear(),this._elementsToUpdate.clear(),this._updateItems(this._modules.graph.getNodes("all")._indexes,this._modules.graph.getEdges("all")._indexes)}getSize(){return this._index.size}_updateIndex(){if(!this._elementsToUpdate.isEmpty()){const{nodes:e,edges:t}=this._elementsToUpdate.getElements();if(e._indexes.length/this._modules.graph.getNodes("all").size>fV)return void this.reindex();this._updateItems(e._indexes,t._indexes),this._elementsToUpdate.clear()}}_updateItems(e,t){const n=this._index,r=this._removedNodes,i=this._removedEdges,s=this._excludedNodes,o=this._excludedEdges,a=[],l=[];if(r&&s)for(let c=0;c<e.length;c++){const d=e[c];r.get(d)!==0||s.get(d)!==0?a.push(d):(n.has(d)&&a.push(d),l.push(d))}if(i&&o)for(let c=0;c<t.length;c++){const d=-t[c];i.get(-d)!==0||o.get(-d)!==0?a.push(d):(n.has(d)&&a.push(d),l.push(d))}for(const c of a)n.remove(c);for(const c of l)n.insert(c)}getNodesInScreenByDistance(e){const{x:t,y:n}=e.getPositionOnScreen();return this._modules.graph.getNodes().filter(r=>r.isInScreen()&&r!==e).sort((r,i)=>{const s=r.getPositionOnScreen(),o=i.getPositionOnScreen();return En(s.x,s.y,t,n)-En(o.x,o.y,t,n)})}getNearestNodesForNode(e,t=240,n){const{x:r,y:i}=e.getPosition();return this.getNearestNodes(r,i,t,n,e)}getNearestNodes(e,t,n,r,i){if(this._updateIndex(),r){const s=this._modules.camera.screenToGraphVector({x:n,y:n});n=En(0,0,s.x,s.y)}return this._getNearestNodes(e,t,n,i)}_getNearestNodes(e,t,n,r){const i=[],s=n*n,o=r?r._index:0,a=this._modules.graph.getNodes()._indexes,[l,c]=this._modules.graph.getNodeAttributes(["x","y"]);for(let d=0,u=a.length;d<u;d++){const h=a[d];if(h===o)continue;const g=e-l.get(h),p=t-c.get(h);g*g+p*p<=s&&i.push(h)}return this._modules.graph.nodeList(new Uint32Array(i))}queryRaw(e,t,n,r){this._updateIndex();const i=this._queryBounds;i[0]=e,i[1]=t,i[2]=n,i[3]=r;const s=this._index.query(e,t,n,r),{nodes:o,edges:a}=this._queryResult;o.length=a.length=0;for(let l=0;l<s.length;l++){const c=s[l];c<0?a.push(-c):o.push(c)}return this._queryResult}queryRawProjected(e,t,n,r){const i=this._queryBounds;return i[0]=e,i[1]=t,i[2]=n,i[3]=r,this._modules.camera.projectBounds(i),this.queryRaw(i[0],i[1],i[2],i[3])}query(e,t,n,r){const i=this._modules.graph,{nodes:s,edges:o}=this.queryRaw(e,t,n,r);return{nodes:i.nodeList(new Uint32Array(s.slice())),edges:i.edgeList(new Uint32Array(o.slice()))}}queryProjected(e,t,n,r){const i=this._modules.graph,{nodes:s,edges:o}=this.queryRawProjected(e,t,n,r);return{nodes:i.nodeList(new Uint32Array(s.slice())),edges:i.edgeList(new Uint32Array(o.slice()))}}getNodesByBoundingBox(e,t,n,r,i){if(this._updateIndex(),i){let u;u=this._modules.camera.screenToGraphVector({x:e,y:t}),e=u.x,t=u.y,u=this._modules.camera.screenToGraphVector({x:n,y:r}),n=u.x,r=u.y}const s=this._modules.graph,o=s.getNodes()._indexes,a=[],l=s.getNodeAttribute("excluded"),[c,d]=s.getNodeAttributes(["x","y"]);for(let u=0,h=o.length;u<h;u++){const g=o[u];if(l&&l.get(g))continue;const p=c&&c.get(g),m=d&&d.get(g);p>=e&&p<=n&&m>=t&&m<=r&&a.push(g)}return s.nodeList(new Uint32Array(a))}toggleDebug(e){e?(this._layer=this._modules.layers.addCanvasLayer(t=>{aA(t,this._index,this._queryBounds)},{isStatic:!1,noClear:!1}),this._layer.moveToTop()):this._layer&&(this._layer.destroy(),this._layer=null)}renderDebug(e){if(!this._layer)return this.toggleDebug(!0);this._layer.refresh(t=>{aA(t,this._index,this._queryBounds,e)})}},hF={};function Rm(e,t,n,r,i=0,s=Math.sin(i),o=Math.cos(i),a=[0,0,0,0]){const l=n/2,c=r/2,d=e+l,u=t+c;if(i===0)return a[0]=e,a[1]=t,a[2]=e+n,a[3]=t+r,a;let h,g,p,m,f,y,_,v;return p=-l,m=-c,h=d+p*o-m*s,g=u+p*s+m*o,f=_=h,y=v=g,p=-l,m=c,h=d+p*o-m*s,g=u+p*s+m*o,h<f?f=h:h>_&&(_=h),g<y?y=g:g>v&&(v=g),p=l,m=c,h=d+p*o-m*s,g=u+p*s+m*o,h<f?f=h:h>_&&(_=h),g<y?y=g:g>v&&(v=g),p=l,m=-c,h=d+p*o-m*s,g=u+p*s+m*o,h<f?f=h:h>_&&(_=h),g<y?y=g:g>v&&(v=g),a[0]=f,a[1]=y,a[2]=_,a[3]=v,a}function Su(e,t,n,r,i=0){const s=n/2,o=r/2,a=e+s,l=t+o;if(i===0)return[{x:e,y:t},{x:e+n,y:t},{x:e+n,y:t+r},{x:e,y:t+r}];const c=Math.sin(i),d=Math.cos(i);let u,h,g,p;g=-s,p=-o,u=a+g*d-p*c,h=l+g*c+p*d;const m={x:u,y:h};g=-s,p=o,u=a+g*d-p*c,h=l+g*c+p*d;const f={x:u,y:h};g=s,p=o,u=a+g*d-p*c,h=l+g*c+p*d;const y={x:u,y:h};return g=s,p=-o,u=a+g*d-p*c,h=l+g*c+p*d,[m,f,y,{x:u,y:h}]}function Dy(e,t=0,n=1,r=dL.slice()){const i=n*Math.sin(t),s=n*Math.cos(t);return r[0]=e[0]+i,r[1]=e[1]+s,r[2]=e[2]+i,r[3]=e[3]+s,r}function yV(e,t){return hL(e,t)}function vV(e,t){return gF(e[0],e[1],e[2],e[3],t[0],t[1],t[2],t[3])}function xV(e,t,n,r,i,s,o,a){return e>i&&e<o&&t>s&&t<a||n>i&&n<o&&r>s&&r<a}function gF(e,t,n,r,i,s,o,a){return r>=s&&t<=a&&n>=i&&e<=o}pu(hF,{angle:()=>o8,circleCircleIntersection:()=>Sx,circleContainsCircle:()=>aB,circleContainsPoint:()=>oB,circleIntersectsBox:()=>kx,circleLineIntersection:()=>gL,circleSortCompare:()=>Ax,computeCentroid:()=>l$,cubicBezierAABB:()=>_L,defaultAABB:()=>dL,degreesToRadians:()=>sB,distToSegmentSquared:()=>nb,distance:()=>En,distancePointSegment:()=>EP,extendBounds:()=>hL,getAABB:()=>Rm,getBezierCurveBoundingBox:()=>Im,getClosestPointOnLine:()=>l8,getClosestPointOnSegment:()=>SP,getNormalOnEdge:()=>n8,getNormalOnQuadraticCurve:()=>yP,getOBBPoints:()=>Su,getPointOnBezierCurve:()=>Xd,getPointOnEdge:()=>t8,getPointOnQuadraticCurve:()=>Lm,getQuadraticBezierCurveLength:()=>i8,getQuadraticCurveBoundingBox:()=>eb,getQuadraticCurveControlPoint:()=>ka,getSelfLoopControlPoints:()=>Nm,getTangentOnEdge:()=>r8,getTangentOnQuadraticCurve:()=>Kx,intersects:()=>xV,isPointInLine:()=>bP,isPointInPolygon:()=>qd,isPointOnBezierCurve:()=>xP,isPointOnQuadraticCurve:()=>vP,lineAABB:()=>tb,lineAngle:()=>jl,lineIntersection:()=>a8,lineLine:()=>ul,move:()=>iB,moveAABB:()=>Dy,normalize:()=>uL,overlaps:()=>gF,overlapsAABB:()=>vV,padBounds:()=>yV,polygonsIntersect:()=>$P,quadBezierAABB:()=>fL,radiansToDegrees:()=>j_,rotate:()=>Zg,segmentIntersection:()=>Dc,segmentRectangleIntersection:()=>wP,squaredDistance:()=>sg,twoSegmentsIntersect:()=>s8});var kh=40;function pF(e,t){const n=e.getAttribute("curvature"),r=e.getSource(),i=e.getTarget(),s=r.getPositionOnScreen();if(r===i){const m=(n+r.getAttribute("radius"))*mp*t,f=s.x,y=s.y,_=f-m,v=y,x=f,b=y+m;return[s,...[.2,.4,.6,.8].map(w=>Xd(w,f,y,f,y,_,v,x,b)),s]}const o=i.getPositionOnScreen();if(n===0)return[s,o];const a=o.x-s.x,l=o.y-s.y,c=Math.sqrt(a*a+l*l),d=(s.x+o.x)/2,u=(s.y+o.y)/2,h=n*(c/km)*2,g=d+l/c*h,p=u+-a/c*h;return[s,...[.25,.5,.75].map(m=>Lm(m,s.x,s.y,o.x,o.y,g,p)),o]}function bV(e,t,n){const r=e.getSource(),i=e.getTarget(),s=r.getPositionOnScreen(),o=i.getPositionOnScreen();if(qd(s.x,s.y,t)||qd(o.x,o.y,t))return!0;const a=pF(e,n);for(let l=0;l<a.length-1;++l){const c=a[l],d=a[l+1];for(let u=0;u<t.length-1;++u){const h=t[u],g=t[u+1];if(ul(c.x,c.y,d.x,d.y,h.x,h.y,g.x,g.y))return!0}}return!1}function wV(e,t,n){const r=e.getPositionOnScreen(),i=Number(e.getAttribute("radius"))*n;return mF(r.x,r.y,i,t)}function mF(e,t,n,r){const i=e-n,s=t-n,o=t+n;return e+n>=r.minX&&i<=r.maxX&&o>=r.minY&&s<=r.maxY}function EV(e,t,n){const r=pF(e,n);for(let i=0;i<r.length-1;++i){const s=r[i],o=r[i+1];if(tb(s.x,s.y,o.x,o.y,t.minX,t.minY,t.maxX,t.maxY))return!0}return!1}function lA(e,t,n,r){typeof n=="number"&&(n={left:n,right:n,top:n,bottom:n});const i=n.left===void 0?kh:n.left,s=n.right===void 0?kh:n.right,o=n.top===void 0?kh:n.top,a=n.bottom===void 0?kh:n.bottom,l=i+s,c=o+a,d=e.width===0?e.maxFixedSize:e.width,u=e.height===0?e.maxFixedSize:e.height,h=HG([(t.width-l)/(d+e.maxScaledSize),(t.height-c)/(u+e.maxScaledSize),(t.width-l-e.maxFixedSize)/d,(t.height-c-e.maxFixedSize)/u,r/e.maxScaledSize||NaN]);return{x:e.cx+(s-i)/(2*h),y:e.cy+(a-o)/(2*h),zoom:h}}var SV="cubicOut",cA=200,AV=class extends ct{constructor(){super(...arguments),this._isLocating=!1,this._cacheValid=!0,this._cachedGraphBoundingBox=new vr,this._onLocateStart=()=>{this._isLocating=!0},this._onLocated=()=>{this._isLocating=!1,this._modules.events.fire("locate")},this._invalidCache=()=>{this._cacheValid=!1}}onMounted(){this._modules.events.register(["locate"]),this._modules.events.on(["addNodes","removeNodes","addEdges","removeEdges","excludedStateChange","clearGraph","updateAttributes"],this._invalidCache)}onReady(){this.locateGraph({},!0)}locateGraph(e,t=!1){return this._onLocateStart(),t?this._locateGraph(e):this._modules.transformations.whenApplied().then(()=>this._locateGraph(e))}_locateGraph(e){return this._locateBoundingBox(this.getGraphBoundingBox(),e).then(this._onLocated)}locateElements(e,t){return this._modules.transformations.whenApplied().then(()=>this._locateBoundingBox(this.getBoundingBox(e),t)).then(this._onLocated)}locateRawGraph(e,t){return this._onLocateStart(),this._locateBoundingBox(this.getRawGraphBoundingBox(e),t).then(this._onLocated)}isLocating(){return this._isLocating}getGraphBoundingBox(e=!1){return e?this.getBoundingBox(this._ogma.getNodes(),!0,e):(this._cacheValid||this._updateCache(),Object.assign({},this._cachedGraphBoundingBox))}forceInvalidCache(){this._invalidCache()}_updateCache(){this._cacheValid=!0,this._cachedGraphBoundingBox=this.getBoundingBox(this._modules.graph.getNodes())}getBoundingBox(e,t=!1,n=!1,r){let i;if(i=e.isNode?this._getNodesBoundingBox(e.toList(),t):this._getEdgesBoundingBox(e.toList(),r),n){const s=this._ogma.modules.labels.getTextsBoundingBox(e.isNode?e.toList():null,e.isNode?null:e.toList());i=i.extend(s)}return i}_getNodesBoundingBox(e,t=!1){this._modules.graphics.forceAttributesComputation();const n=this._modules.graphics.getNodeAttributes(),r=[],i=[],s=[],o=[];for(let a=0;a<e.size;++a){const l=e._indexes[a];if(n.excluded.get(l)===0){const c=n.x.get(l),d=n.y.get(l),u=n.radius.get(l),h=2*u;n.scalingMethod.get(l)==="scaled"?s.push(h):o.push(h),t?(r.push(c-u,c+u),i.push(d-u,d+u)):(r.push(c),i.push(d))}}return new vr({xValues:r,yValues:i,scaledSizeValues:s,fixedSizeValues:o})}_getEdgesBoundingBox(e,t=!1){this._modules.graphics.forceAttributesComputation();const n=this._modules.graphics.getEdgeAttributes(),r=this._modules.graphics.getNodeAttributes(),i={x1:0,y1:0,x2:0,y2:0},s={x:0,y:0},o={minX:0,minY:0,maxX:0,maxY:0},a=[],l=[],c=[],d=[];for(let u=0;u<e.size;++u){const h=e._indexes[u],g=n.source.get(h),p=n.target.get(h),m=n.curvature.get(h),f=r.x.get(g),y=r.y.get(g),_=r.scalingMethod.get(g)==="scaled",v=2*r.radius.get(g),x=r.x.get(p),b=r.y.get(p),w=r.scalingMethod.get(p)==="scaled",S=2*r.radius.get(p);_?c.push(v):d.push(v),w?c.push(S):d.push(S),t||m===0?(a.push(f,x),l.push(y,b)):g===p?(rb(f,y,m,v/2,0,i),Im(f,y,i.x1,i.y1,i.x2,i.y2,x,b,o),a.push(o.minX,o.maxX),l.push(o.minY,o.maxY)):(Pm(f,y,x,b,m,s),eb(f,y,s.x,s.y,x,b,o),a.push(o.minX,o.maxX),l.push(o.minY,o.maxY))}return new vr({xValues:a,yValues:l,scaledSizeValues:c,fixedSizeValues:d})}getRawGraphBoundingBox(e){const t=e.nodes.length,n=new Array(t),r=new Array(t),i=new Array(t);for(let s=0;s<t;s++){const o=e.nodes[s].attributes||{};n[s]=o.x||0,r[s]=o.y||0,i[s]=o.radius||5}return new vr({xValues:n,yValues:r,scaledSizeValues:i})}_locateBoundingBox(e,t={}){if(isNaN(e.cx))return Promise.resolve();const{padding:n={},easing:r=SV,duration:i=0,maxNodeSizeOnScreen:s=cA,ignoreZoomLimits:o=!1}=t,a=lA(e,this._modules.dom.getDimensions(),n,s),l=a.x,c=a.y,d=a.zoom,u=d/this._modules.camera.getZoom();return this._moveCamera(l,c,d,i,r,u,o)}_moveCamera(e,t,n,r,i,s,o){const a={duration:r,easing:i,ignoreZoomLimits:o},l=this._modules.camera.setCenter({x:e,y:t},a);return s>1.01||s<.99?this._modules.camera.setZoom(n,a):l}computeConfigForBounds(e,t={}){const{padding:n={},maxNodeSizeOnScreen:r=cA}=t;return lA(e,this._modules.dom.getDimensions(),n,r)}layoutDataBoundingBox({x:e,y:t,indexes:n}){const r=this._modules.graphics.getNodeAttributes(),i=[],s=[],o=[],a=[];for(let l=0;l<n.length;++l){const c=n[l],d=e[l],u=t[l],h=2*r.radius.get(c),g=r.scalingMethod.get(c)==="scaled";i.push(d),s.push(u),g?o.push(h):a.push(h)}return new vr({xValues:i,yValues:s,scaledSizeValues:o,fixedSizeValues:a})}isEdgeInPolygon(e,t){return bV(e,t,this._modules.camera.getZoom())}isElementInView(e,{margin:t=0}={}){const{width:n,height:r}=this._modules.camera.getSize(),i={minX:-t,minY:-t,maxX:n+t,maxY:r+t};return e.isNode?this.isNodeInRectangle(e,i):this.isEdgeInRectangle(e,i)}isNodeInRectangle(e,t){if(this._modules.geo.isEnabled()){const n=this._modules.geo.getContainerCoord(e);return mF(n.x,n.y,Number(e.getAttribute("radius")),t)}return wV(e,t,this._modules.camera.getZoom())}isNodeInPolygon(e,t){const n=e.getPositionOnScreen();return qd(n.x,n.y,t)}isEdgeInRectangle(e,t){return EV(e,t,this._modules.camera.getZoom())}},kV=vo&&typeof navigator<"u"&&"msLaunchUri"in navigator&&Ts&&!("documentMode"in document);function CV(e){return kV?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/zr():e.deltaY&&e.deltaMode===1?20*-e.deltaY:e.deltaY&&e.deltaMode===2?60*-e.deltaY:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?20*-e.detail:e.detail?e.detail/-32765*60:0}var TV=6,NV=class extends ct{constructor(){super(...arguments),this._px=0,this._py=0,this._pressX=0,this._pressY=0,this._left=!1,this._middle=!1,this._right=!1,this._clickCounter={left:0,middle:0,right:0},this._buttons={left:!1,middle:!1,right:!1},this._skipNextMove=!1,this._onMouseWheel=e=>{this._isEnabled()&&this._isWheelEnabled()&&(!this._disableWheelUntilMouseDown()||this._modules.dom.hasFocus())&&(e.preventDefault(),e.stopPropagation(),this._applyMouseWheelZoom(e))},this._onMouseMove=e=>{if(!this._isEnabled()||!this._setXY(e))return;const t=this._modules.position.x,n=this._modules.position.y,r=t-this._px,i=n-this._py;r===0&&i===0||(this._skipNextMove?this._skipNextMove=!1:En(t,n,this._pressX,this._pressY)>=TV&&(this._resetClickCounter(),this._modules.events.fire("mousemoveInternal",{x:t,y:n,dx:r,dy:i,domEvent:this._evt})))},this._onDocumentMouseMove=e=>{if(!this._isEnabled()||!this._setXY(e))return;const t=this._modules.position.x,n=this._modules.position.y,r=this._bounds,i=t-this._px,s=n-this._py;(t<0||t>r.width||n<0||n>r.height)&&this._modules.events.fire("documentMouseMove",{x:t,y:n,dx:i,dy:s,domEvent:this._evt})},this._onMouseUp=e=>{if(!this._isEnabled()||!this._setXY(e))return;const t=this._modules.position.x,n=this._modules.position.y,r=this._button,i=this._evt;this._buttons[r]=!1,this._clickCounter[this._button]===1?this._modules.events.fire("clickInternal",{button:r,x:t,y:n,domEvent:i}):this._clickCounter[r]>1&&(this._modules.events.fire("doubleclickInternal",{button:r,x:t,y:n,domEvent:i}),this._resetClickCounter(r)),this._modules.events.fire("mouseupInternal",{button:r,x:t,y:n,domEvent:i})},this._onDocumentMouseup=e=>{if(!this._isEnabled()||!this._setXY(e))return;const t=this._modules.position.x,n=this._modules.position.y,r=this._button;this._buttons[r]=!1;const i=this._modules.dom;this._modules.events.fire("documentMouseUp",{button:r,x:t,y:n,domEvent:this._evt}),i.removeDirectWindowEventListener("mousemove",this._onDocumentMouseMove),i.removeDirectWindowEventListener("mouseup",this._onDocumentMouseup)},this._onMouseDown=e=>{if(!this._isEnabled()||!this._setXY(e))return;const t=this._modules.position.x,n=this._modules.position.y,r=this._button,i=this._modules.dom;this._skipNextMove=!0,this._pressX=t,this._pressY=n,this._lastMouseDownTarget=e.target,i.focus(),this._buttons[r]=!0,this._clickCounter[r]+=1;const s=r;this._dbclickTimer=i.setTimeout(()=>{this._resetClickCounter(s,0)},this._getDoubleClickTimer()),this._modules.events.fire("mousedownInternal",{button:r,x:t,y:n,domEvent:this._evt}),i.addDirectWindowEventListener("mousemove",this._onDocumentMouseMove),i.addDirectWindowEventListener("mouseup",this._onDocumentMouseup)},this._onDrop=e=>{if(!this._isEnabled()||!this._setXY(e))return;e.preventDefault();const{x:t,y:n}=this._modules.camera.screenToGraphCoordinates(this._modules.position);this._modules.events.fire("drop",{domEvent:this._evt,x:t,y:n})}}onMounted(){this._domElt=this._modules.graphics.getDomElement(),this._modules.settings.register("mouse.enabled",!0),this._modules.settings.register("mouse.wheelEnabled",!0),this._modules.settings.register("mouse.disableWheelUntilMouseDown",!1),this._modules.settings.register("mouse.doubleClickTimer",500),this._modules.events.register(["mousedownInternal","mouseupInternal","mousemoveInternal","mousewheelInternal","clickInternal","doubleclickInternal","mouseoverInternal","mouseoutInternal","documentMouseUp","documentMouseMove","drop"]),this._modules.dom.afterNextFrame().then(()=>this._initializeListeners())}get x(){return this._modules.position.x}get y(){return this._modules.position.y}get left(){return this._left}get right(){return this._right}get middle(){return this._middle}_isEnabled(){return this._modules.settings.get("mouse.enabled")}_isWheelEnabled(){return this._modules.settings.get("mouse.wheelEnabled")}_disableWheelUntilMouseDown(){return this._modules.settings.get("mouse.disableWheelUntilMouseDown")}_getDoubleClickTimer(){return this._modules.settings.get("mouse.doubleClickTimer")}_resetClickCounter(e,t=0){e?this._clickCounter[e]=t:(this._clickCounter.left=t,this._clickCounter.middle=t,this._clickCounter.right=t),this._modules.dom.clearTimeout(this._dbclickTimer),this._lastMouseDownTarget=null}_setXY(e){const t=this._domElt.getBoundingClientRect();return this._bounds=t,!!t&&(this._evt=e,this._button=Rx[e.button],this._px=this._modules.position.x,this._py=this._modules.position.y,this._modules.position.x=e.clientX-t.left,this._modules.position.y=e.clientY-t.top,this._left=this._buttons.left,this._right=this._buttons.right,this._middle=this._buttons.middle,!0)}_applyMouseWheelZoom(e){this._setXY(e)&&this._modules.events.fire("mousewheelInternal",{delta:CV(e),dx:e.deltaX,dy:e.deltaY,x:this._modules.position.x,y:this._modules.position.y,domEvent:this._evt})}_initializeListeners(){const e=this._domElt,t=this._modules.dom;mm&&this._modules.dom.addElementEventListener(document,"contextmenu",r=>{this._lastMouseDownTarget&&r.target!==this._lastMouseDownTarget&&r.preventDefault()}),t.addElementEventListener(e,"contextmenu",r=>{this._setXY(r),this._modules.dom.hasFocus()&&this._modules.settings.get("mouse.enabled")&&r.preventDefault()},!1);const n="onwheel"in e?"wheel":e.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";t.addElementEventListener(e,n,this._onMouseWheel),t.addElementEventListener(e,"mousemove",this._onMouseMove),t.addElementEventListener(e,"mouseleave",r=>{if(!this._isEnabled())return;this._modules.dom.blur();const i=e.getBoundingClientRect();r.clientX>=i.left+1&&r.clientX<=i.right-1&&r.clientY>=i.top+1&&r.clientY<=i.bottom-1||this._modules.events.fire("mouseout",{domEvent:this._evt})}),t.addElementEventListener(e,"mousedown",this._onMouseDown),t.addElementEventListener(e,"mouseup",this._onMouseUp),t.addElementEventListener(e,"dragover",r=>{r.preventDefault()}),t.addElementEventListener(e,"drop",this._onDrop)}},LV={doubleTapTimer:500,touchEventRate:15},IV=class extends ct{constructor(){super(...arguments),this._pressed=!1,this._addEvent=(e,t,n,r)=>{this._modules.dom.addElementEventListener(e,t,n,r)},this._addWinEvent=(e,t,n,r)=>{this._modules.dom.addDirectWindowEventListener(t,n,r)},this._removeWinEvent=(e,t,n)=>{this._modules.dom.removeDirectWindowEventListener(t,n)}}onMounted(){this._domElt=this._modules.graphics.getDomElement(),this._modules.settings.register("touch.enabled",!0),this._modules.events.register(["touchDown","touchUp","touchTap","touchDoubleTap","touchMove","touchStartGesture","touchProgressGesture","touchEndGesture","documentTouchMove","documentTouchUp"]),this._modules.dom.afterNextFrame().then(()=>{this._initialize(this)})}get x(){return this._modules.position.x}get y(){return this._modules.position.y}get pressed(){return this._pressed}_listen(e,t,n){if(rI){if(t==="touchstart")return E4(this._addEvent,e,n);if(t==="touchmove")return A4(this._addWinEvent,e,n);if(t==="touchend")return k4(this._addWinEvent,e,n);if(t==="touchcancel")return S4(this._addWinEvent,e,n)}return this._modules.dom.addElementEventListener(e,t,n)}_initialize(e){let t=0,n=0,r=0,i=0,s=!1,o="left",a=0,l=!1,c=!1,d=0,u=null,h=null;const g=()=>{this._modules.position.x=t,this._modules.position.y=n,this._pressed=s},p=(x,b)=>{const w=this._domElt.getBoundingClientRect();if(!w||x.touches==null)return null;const[S,A]=x.touches,C=S.clientX-w.left,k=S.clientY-w.top,T=A.clientX-w.left,M=A.clientY-w.top,D=(C+T)/2,B=(k+M)/2,I=D-t,N=B-n,V=En(C,k,T,M),$=this._modules.settings.get("interactions.zoom.speed")||Ry,Q=_P(V,$),se=jl(C,k,T,M),te={dx:I,dy:N,rotation:se-d,scale:Q};return((de,Ee,oe,_e)=>{d=Ee,t=oe,n=_e,g()})(0,se,D,B),te},m=x=>{if(x.touches&&x.touches.length===2&&c){const b=p(x);if(b){const{dx:w,dy:S,rotation:A,scale:C}=b;this._modules.events.fire("touchProgressGesture",{dx:w,dy:S,rotation:A,scale:C,x:t,y:n,domEvent:u,button:o})}}},f=x=>{if(o=Rx[x.button],!x.touches)return!1;if(x.touches.length!==1)return s=!1,x.touches.length>1&&this._modules.events.fire("touchUp",{x:t,y:n,domEvent:u,button:o}),!1;const b=this._domElt.getBoundingClientRect();return b&&(r=t,i=n,t=x.touches[0].clientX-b.left|0,n=x.touches[0].clientY-b.top|0,s=!0,u=x,g()),!0},y=()=>{a=0,this._modules.dom.clearTimeout(h)},_=x=>{if(x.preventDefault(),!x.touches)return;if(x.touches.length!==2&&c&&(c=!1,this._modules.events.fire("touchEndGesture",{domEvent:u})),f(x),x.touches.length===0){const w={x:t,y:n,domEvent:u,button:o};a===1&&this._modules.events.fire("touchTap",w),a>1&&(this._modules.events.fire("touchDoubleTap",w),y()),this._modules.events.fire("touchUp",w)}const b=Ns().documentElement;gS(this._removeWinEvent,b,"touchmove",this._onMove),gS(this._removeWinEvent,b,"touchend",this._onEnd)},v=x=>{m(x),l?l=!1:(y(),f(x)&&this._modules.events.fire("touchMove",{x:t,y:n,dx:t-r,dy:n-i,domEvent:u,button:o}))};this._listen(this._domElt,"touchstart",x=>{if(!x.touches)return;x.touches.length!==2||c||p(x)&&(c=!0,this._modules.events.fire("touchStartGesture",{domEvent:u})),f(x)&&(this._modules.dom.focus(),this._modules.events.fire("touchDown",{x:t,y:n,domEvent:u,button:o}),a+=1,h=this._modules.dom.setTimeout(y,LV.doubleTapTimer),l=!0);const b=Ns().documentElement;this._onMove=this._listen(b,"touchmove",v),this._onEnd=this._listen(b,"touchend",_)})}},PV=class{getHoveredElement(){return this.modules.captor.getPointedElement()}getPointerInformation(){return this.modules.captor.getCursorInformation()}},MV=class{getNodesByClassName(e,t){return this.modules.classes.getClassByName(e,!0).getNodes(t)}getEdgesByClassName(e,t){return this.modules.classes.getClassByName(e,!0).getEdges(t)}},vb={};pu(vb,{gexf:()=>fF,gexfFromUrl:()=>xb,graphml:()=>xF,graphmlFromUrl:()=>bF,janus:()=>_F,json:()=>yF,jsonFromUrl:()=>bb,mtx:()=>FV,mtxFromUrl:()=>RV,neo4j:()=>vF});var ns=_x(nL()),fF=e=>Promise.resolve(ns.gexf(e)),xb=e=>Jl(e).then(t=>ns.gexf(t)),_F=e=>Promise.resolve(ns.janus(e)),yF=(e,t)=>Promise.resolve(ns.json(e,t)),bb=(e,t)=>Jl(e).then(n=>ns.json(n,t)),vF=e=>Promise.resolve(ns.neo4j(e)),xF=e=>Promise.resolve(ns.graphml(e)),bF=e=>Jl(e).then(t=>ns.graphml(t)),FV=e=>Promise.resolve(ns.mtx(e)),RV=e=>Jl(e).then(t=>ns.mtx(t)),DV=class extends Jt{constructor(){super(...arguments),this.wait=e=>new Promise(t=>setTimeout(t,e)),this.initRandomGraph=e=>this._ogma.generate.random(e).then(this._ogma.setGraph).then(()=>this._ogma.view.locateGraph()).then(()=>this._ogma.view.afterNextFrame()),this.initGrid=e=>{const t=Math.ceil(Math.sqrt(e));return this._ogma.generate.grid({rows:t,columns:t}).then(n=>this._ogma.setGraph(n)).then(()=>this._ogma.view.locateGraph())},this.initLine=e=>(this._ogma.setGraph({nodes:[{id:0,attributes:{x:0,y:0}},{id:1,attributes:e?{x:0,y:50}:{x:50,y:0}}],edges:[{id:0,source:1,target:0}]}),this._ogma.view.locateGraph()),this.initSingleNode=()=>(this._ogma.setGraph({nodes:[{id:0,attributes:{x:0,y:0}}],edges:[]}),this._ogma.view.locateGraph()),this.initContinuousRenderLoop=({triggerKey:e="r",start:t=!0}={})=>{let n=t;const r=()=>{n&&this._ogma.modules.dom.beforeNextFrame().then(r)};document.addEventListener("keydown",({key:i})=>{i===e&&(n=!n,r())}),r()},this.appendToBody=()=>{const e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.bottom="0",e.style.right="0",document.body.appendChild(e),this._ogma.setContainer(e)},this.loadFile=e=>(e.endsWith(".gexf")?xb(e):bb(e)).then(t=>this._ogma.setGraph(t)).then(()=>this._ogma.view.locateGraph()).then(()=>this._ogma.view.afterNextFrame()),this.enableLasso=e=>{this._ogma.events.on("dragStart",()=>{this._ogma.keyboard.isKeyPressed("ctrl")&&this._ogma.tools.lasso.enable(e)})},this.randomizeGraph=({minX:e=0,minY:t=0,maxX:n=500,maxY:r=500}={})=>this._ogma.getNodes().setAttributes(this._ogma.getNodes().map(()=>({x:e+Math.random()*(n-e),y:t+Math.random()*(r-t)})))}},zV=class{setContainer(e){this.modules.dom.setContainer(e)}getContainer(){return this.modules.dom.getContainer()}},OV=class extends Jt{constructor(){super(...arguments),this.once=(e,t)=>(this._ogma.modules.events.once(e,t),this),this.removeListener=e=>{this._ogma.modules.events.off(e)},this.onNodesAdded=e=>(this._ogma.events.on("addNodes",e),this._ogma),this.onBeforeNodesRemoved=e=>(this._ogma.events.on("beforeRemoveNodes",e),this._ogma),this.onNodesRemoved=e=>(this._ogma.events.on("removeNodes",e),this._ogma),this.onEdgesAdded=e=>(this._ogma.events.on("addEdges",e),this._ogma),this.onBeforeEdgesRemoved=e=>(this._ogma.events.on("beforeRemoveEdges",e),this._ogma),this.onEdgesRemoved=e=>(this._ogma.events.on("removeEdges",e),this._ogma),this.onGraphCleared=e=>(this._ogma.events.on("clearGraph",e),this._ogma),this.onNodesClassAdded=(e,t)=>(this._ogma.modules.classes.onNodeClassAdded(e,t),this._ogma),this.onNodesClassRemoved=(e,t)=>(this._ogma.modules.classes.onNodeClassRemoved(e,t),this._ogma),this.onEdgesClassAdded=(e,t)=>(this._ogma.modules.classes.onEdgeClassAdded(e,t),this._ogma),this.onEdgesClassRemoved=(e,t)=>(this._ogma.modules.classes.onEdgeClassRemoved(e,t),this._ogma),this.onNodeDragStart=e=>(this._ogma.events.on("nodesDragStart",e),this._ogma),this.onNodeDragProgress=e=>(this._ogma.events.on("nodesDragProgress",e),this._ogma),this.onNodeDragEnd=e=>(this._ogma.events.on("nodesDragEnd",e),this._ogma),this.onDrop=e=>(this._ogma.events.on("drop",e),this._ogma),this.onNodesSelected=e=>this.onNodesClassAdded(tn,e),this.onNodesUnselected=e=>this.onNodesClassRemoved(tn,e),this.onEdgesSelected=e=>this.onEdgesClassAdded(tn,e),this.onEdgesUnselected=e=>this.onEdgesClassRemoved(tn,e),this.onNodeDataChange=e=>(this._ogma.events.on("updateNodeData",e),this._ogma),this.onEdgeDataChange=e=>(this._ogma.events.on("updateEdgeData",e),this._ogma),this.onAnimate=e=>(this._ogma.events.on("animate",e),this._ogma),this.onMouseMove=e=>(this._ogma.events.on("mousemove",e),this._ogma),this.onMouseButtonDown=e=>(this._ogma.events.on("mousedown",e),this._ogma),this.onMouseButtonUp=e=>(this._ogma.events.on("mouseup",e),this._ogma),this.onClick=e=>(this._ogma.events.on("click",e),this._ogma),this.onDoubleClick=e=>(this._ogma.events.on("doubleclick",e),this._ogma),this.onMouseWheel=e=>(this._ogma.events.on("mousewheel",e),this._ogma),this.onHover=e=>(this._ogma.events.on("mouseover",e),this._ogma),this.onUnhover=e=>(this._ogma.events.on("mouseout",e),this._ogma),this.onDragStart=e=>(this._ogma.events.on("dragStart",e),this._ogma),this.onDragProgress=e=>(this._ogma.events.on("dragProgress",e),this._ogma),this.onDragEnd=e=>(this._ogma.events.on("dragEnd",e),this._ogma),this.onGestureStart=e=>(this._ogma.events.on("gestureStart",e),this._ogma),this.onGestureProgress=e=>(this._ogma.events.on("gestureProgress",e),this._ogma),this.onGestureEnd=e=>(this._ogma.events.on("gestureEnd",e),this._ogma),this.onRendererStateChange=e=>(this._ogma.events.on("rendererStateChange",e),this._ogma),this.onZoomProgress=e=>(this._ogma.events.on("zoom",e),this._ogma),this.onViewChanged=e=>(this._ogma.events.on("viewChanged",e),this._ogma),this.onNodesConnected=e=>(this._ogma.events.on("connectNodes",e),this._ogma),this.onGeoModeEnabled=e=>(this._ogma.events.on("geoEnabled",e),this._ogma),this.onGeoModeDisabled=e=>(this._ogma.events.on("geoDisabled",e),this._ogma),this.onGeoModeLoaded=e=>(this._ogma.events.on("geoLoaded",e),this._ogma),this.onLayoutStart=e=>(this._ogma.events.on("layoutStart",e),this._ogma),this.onLayoutComplete=e=>(this._ogma.events.on("layoutEnd",e),this._ogma),this.onLayoutComputed=e=>(this._ogma.events.on("layoutComputed",e),this._ogma),this.onTooltipShown=e=>(this._ogma.events.on("tooltipShow",e),this._ogma),this.onTooltipHidden=e=>(this._ogma.events.on("tooltipHide",e),this._ogma),this.onTransformationEnabled=e=>(this._ogma.events.on("transformationEnabled",e),this._ogma),this.onTransformationDisabled=e=>(this._ogma.events.on("transformationDisabled",e),this._ogma),this.onTransformationSetIndex=e=>(this._ogma.events.on("transformationSetIndex",e),this._ogma),this.onTransformationDestroyed=e=>(this._ogma.modules.events.on("transformationDestroyed",e),this._ogma),this.onTransformationRefreshed=e=>(this._ogma.events.on("transformationRefresh",e),this._ogma)}on(e,t){return this._ogma.modules.events.on(e,t),this}off(e){return this._ogma.modules.events.off(e),this}onKeyPress(e,t){return this._ogma.modules.keyboard.onKeyPress(e,t),this._ogma}};function wp(e,t,n){if(e!=null)return Array.isArray(e)?e[0]:e}function zy(e){return e==null?null:typeof e=="string"||typeof e=="number"?`${e}`:e&&zy(e.content)}function BV(e){if(e!=null)return typeof e=="string"?e:e.style||"line"}var jV=["color","radius","shape","text.content","x","y"],UV=["color","width","shape.body","text.content"];function $V(e){return e!=="all"?{nodes:["x","y"],edges:[]}:{nodes:jV,edges:UV}}function GV(e,{nodes:t,edges:n}){const r=e.getOriginalAttributes();return{nodes:t.reduce((i,s)=>(i[s.getId()]={x:r.nodes.x.get(s._index),y:r.nodes.y.get(s._index),color:wp(r.nodes.color.get(s._index)),radius:r.nodes.radius.get(s._index),shape:r.nodes.shape.get(s._index),text:{content:r.nodes.text.content.get(s._index)}},i),{}),edges:n.reduce((i,s)=>(i[s.getId()]={color:wp(r.edges.color.get(s._index)),width:r.edges.width.get(s._index),shape:{type:r.edges.shape.body.get(s._index)},text:{content:r.edges.text&&r.edges.text.content&&r.edges.text.content.get(s._index)}},i),{})}}function VV(e){return{nodes:e.nodes.map(({id:t,attributes:n={},data:r})=>{const{color:i,radius:s,shape:o,text:a,x:l,y:c}=n;return{id:t,x:l,y:c,color:wp(i),size:s,shape:o,text:zy(a),data:r}}),edges:e.edges.map(({id:t,source:n,target:r,attributes:i={},data:s})=>{const{color:o,width:a,text:l,shape:c}=i;return{id:t,source:n,target:r,color:wp(o),size:a,shape:BV(c),text:zy(l),data:s}})}}function dA(e){return e instanceof es?e.getId():e}function uA(e){return e instanceof xo?e.getId():e}function hA(e){return e instanceof Ms?e.getId():e instanceof es?[e.getId()]:Vn(e)?e.map(dA):[dA(e)]}function gA(e){return e instanceof Aa?e.getId():e instanceof xo?[e.getId()]:Vn(e)?e.map(uA):[uA(e)]}var wb="visible";function HV(e,t){return e?hA(e):typeof t=="object"?hA(t.nodes):t||wb}function WV(e,t){return e?gA(e):typeof t=="object"?gA(t.edges):t||wb}function wF(e,t,n,r){const i=HV(t,r),s=WV(n,r);return{nodes:e.getNodes(i),edges:e.getEdges(s)}}function EF(e,{nodeAttributes:t,edgeAttributes:n,nodes:r,edges:i,filter:s,nodeData:o,edgeData:a}){const l=wF(e,r,i,s);return{nodes:l.nodes.toJSON({attributes:t,data:o}),edges:l.edges.toJSON({attributes:n,data:a})}}function Dm(e,t,{styles:n,nodes:r,edges:i,filter:s,nodeData:o,edgeData:a}){const{nodes:l,edges:c}=$V(n),d=EF(e,{nodeAttributes:l,edgeAttributes:c,nodes:r,edges:i,filter:s,nodeData:o,edgeData:a});if(n==="original"){const u=GV(t,wF(e,r,i,s));for(const h of d.nodes)h.id!=null&&(h.attributes=u[h.id]);for(const h of d.edges)h.id!=null&&(h.attributes=u[h.id])}return n==="all"&&d.edges.forEach(({source:u,target:h,attributes:g})=>{if(g){const p=e.getNode(u);if(g.color==="source"&&p){const f=p.getAttribute("color");g.color=Array.isArray(f)?f[0]:f}const m=e.getNode(h);if(g.color==="target"&&m){const f=m.getAttribute("color");g.color=Array.isArray(f)?f[0]:f}}}),VV(d)}function XV(e,t){for(let n=0;n<t.length;++n){if(e==null)return;e=e[t[n]]}return e}function YV(e,t,n){for(let r=0;r<t.length-1;++r){const i=t[r];let s=e[i];s===void 0&&(s={},e[i]=s),e=s}e[t[t.length-1]]=n}function qV(e){const t=be({},e[0]);for(const n of e)for(const r of Object.keys(n))r in t||(t[r]=void 0);return Object.keys(t)}function pA(e,t){return e==null||Array.isArray(e)&&!e.length?t:e}function ZV(e){return typeof e=="string"}function JV(e,t,n,r,i){const s=t==="edges",o={};return e.forEach((a,l)=>{const c=i.get(l),d=B_(pA(n(c),t));if(!d.every(ZV))throw Error(`The tab ${t} function returned an invalid value.`);const u=B_(r(a.data,d));d.forEach((h,g)=>{const p=pA(u[g],{}),m=Fm(be(be({internal___id:a.id},s?{internal___source:a.source,internal___target:a.target}:{}),p)).reduce((f,{path:y,value:_})=>(f[y.join(".")]=_,f),{});o[h]=o[h]||[],o[h].push(m)})}),o}function QV(e){if(!e.length)return[];const t=qV(e),n=[t];for(const r of e)n.push(t.map(i=>r[i]));return n[0]=n[0].map(r=>r.replace("internal___","")),n}function KV(e,t,n){const r=new XP;let i=t?1:3;const s=[];for(let a=0;a<e.length;++a){const l=e[a],c=new Array(i);let d=l.data;if(n){const h={};n.forEach(g=>{const p=_a(g),m=XV(d,p);YV(h,p,m)}),d=h}const u=Fm(d);c[0]=l.id,t||(c[1]=l.source,c[2]=l.target);for(let h=0;h<u.length;++h){const{path:g,value:p}=u[h];g.length&&(r.has(g)?c[r.get(g)]=p:(r.set(g,i),c[i]=p,i++))}s.push(c)}const o=[];return o.push("id"),t||(o.push("source"),o.push("target")),r.keys().forEach(a=>o.push(a[a.length-1])),s.unshift(o),s.forEach(a=>a.length=i),s}var e7=/[=+\-@|%]/,t7=e=>e.length>0&&e7.test(e[0])?`'${e=e.replace("|","|")}`:e;function SF(e){return e===void 0?"":e instanceof Date?e.toISOString():t7(""+e)}var n7={what:void 0,dataProperties:void 0,separator:",",textSeparator:'"',download:!0,filename:"graph.csv",filter:"visible",nodes:void 0,edges:void 0,nodeData:Mi,edgeData:Mi,styles:"none"};function r7(e,t){const{what:n,dataProperties:r,nodes:i,edges:s,separator:o,textSeparator:a,download:l,nodeData:c,edgeData:d,filename:u,filter:h}=Kr(typeof t=="string"?{what:t}:t,n7),g=Dm(e.modules.graph,e.modules.individualAttributes,{styles:"none",nodes:i,edges:s,filter:h,nodeData:c,edgeData:d});try{const p=i7(g,{what:n,separator:o,textSeparator:a,dataProperties:r});return l&&No(p,u,"text"),Promise.resolve(p)}catch(p){return Promise.reject(p)}}function i7(e,{what:t,separator:n,textSeparator:r,dataProperties:i}){const s=new RegExp(r,"g");if(r&&r!=='"'&&r!=="'")throw new TypeError(`Invalid argument :"textSeparator" is not single-quote or double-quote, was ${r}`);if(t!=="nodes"&&t!=="edges")throw new TypeError('missing argument: "what": should have value "nodes" or "edges"');const o=t==="nodes";return KV(o?e.nodes:e.edges,o,i).map(a=>a.map(l=>function(d){return r+SF(d).replace(s,`${r}${r}`).replace(/\n/g,"\\n").replace(/\r/g,"")+r}(l))).map(a=>a.join(n)).join(`
`)}var Ba=e=>Math.round(255*e);function mA(e,t){if(t==="integer"&&typeof e=="number"){if(e%1!=0)return"float"}else if(typeof e!="number")return typeof e=="boolean"?"boolean":"string";return t}var Oy=e=>typeof e=="object"&&e!==null&&e.constructor===Object;function By(e,t={}){return Ji(e,(n,r)=>{Oy(n)?By(n,t):t[r]=n}),t}var s7={creator:void 0,description:void 0,styles:"all",download:!0,filename:"graph.gexf",nodes:void 0,edges:void 0,nodeData:e=>e,edgeData:e=>e,filter:"visible"};function o7(e,t={}){const{styles:n,nodes:r,edges:i,download:s,filename:o,creator:a,description:l,filter:c,nodeData:d,edgeData:u}=Kr(t,s7),h=a7(Dm(e.modules.graph,e.modules.individualAttributes,{styles:n,nodes:r,edges:i,filter:c,nodeData:d,edgeData:u}),{creator:a,description:l});return s&&No(h,o,"text"),Promise.resolve(h)}function a7(e,t){const n=eM(),r={},i={};let s,o=0,a=0;const l=n.createElement("gexf");l.setAttribute("xmlns","http://www.gexf.net/1.2draft"),l.setAttribute("xmlns:viz","http://www.gexf.net/1.2draft/viz"),l.setAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),l.setAttribute("xsi:schemaLocation","http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd"),l.setAttribute("version","1.2");const c=n.createElement("meta");if(c.setAttribute("lastmodifieddate",BL()),t.creator){const m=n.createElement("creator");s=n.createTextNode(""+t.creator),m.appendChild(s),c.appendChild(m)}if(t.description){const m=n.createElement("description");s=n.createTextNode(""+t.description),m.appendChild(s),c.appendChild(m)}const d=n.createElement("graph");d.setAttribute("mode","static");const u=n.createElement("nodes");e.nodes.forEach(m=>{const f=n.createElement("node");if(f.setAttribute("id",String(m.id)),m.text&&f.setAttribute("label",ol(m.text)),Oy(m.data)){const _=By(m.data),v=n.createElement("attvalues");Object.keys(_).forEach(x=>{x in r||(r[x]={id:o,type:"integer"},o++);const b=_[x];r[x].type=mA(b,r[x].type);const w=n.createElement("attvalue");w.setAttribute("for",r[x].id),w.setAttribute("value",ol(b)),v.appendChild(w)}),f.appendChild(v)}if(m.color){const _=or(m.color);if(_){const v=n.createElement("viz:color");v.setAttribute("r",Ba(_[0])),v.setAttribute("g",Ba(_[1])),v.setAttribute("b",Ba(_[2])),v.setAttribute("a",_[3]),f.appendChild(v)}}const y=n.createElement("viz:position");if(y.setAttribute("x",m.x),y.setAttribute("y",-m.y),f.appendChild(y),m.size){const _=n.createElement("viz:size");_.setAttribute("value",m.size),f.appendChild(_)}u.appendChild(f)});const h=n.createElement("attributes");h.setAttribute("class","node"),Object.keys(r).forEach(m=>{const f=n.createElement("attribute");f.setAttribute("id",r[m].id),f.setAttribute("title",m),f.setAttribute("type",r[m].type),h.appendChild(f)});const g=n.createElement("edges");e.edges.forEach(m=>{const f=n.createElement("edge");if(f.setAttribute("id",m.id.toString()),f.setAttribute("source",m.source),f.setAttribute("target",m.target),m.size&&f.setAttribute("weight",m.size),m.text&&f.setAttribute("label",ol(m.text)),Oy(m.data)){const y=By(m.data),_=n.createElement("attvalues");Object.keys(y).forEach(v=>{v in i||(i[v]={id:a,type:"integer"},a++);const x=y[v];i[v].type=mA(x,i[v].type);const b=n.createElement("attvalue");b.setAttribute("for",i[v].id),b.setAttribute("value",ol(x)),_.appendChild(b)}),f.appendChild(_)}if(m.color){const y=or(m.color);if(y){const _=n.createElement("viz:color");_.setAttribute("r",Ba(y[0])),_.setAttribute("g",Ba(y[1])),_.setAttribute("b",Ba(y[2])),_.setAttribute("a",y[3]),f.appendChild(_)}}if(m.size){const y=n.createElement("viz:size");y.setAttribute("value",m.size),f.appendChild(y)}g.appendChild(f)});const p=n.createElement("attributes");return p.setAttribute("class","edge"),Object.keys(i).forEach(m=>{const f=n.createElement("attribute");f.setAttribute("id",i[m].id),f.setAttribute("title",m),f.setAttribute("type",i[m].type),p.appendChild(f)}),d.appendChild(h),d.appendChild(p),d.appendChild(u),d.appendChild(g),l.appendChild(c),l.appendChild(d),n.appendChild(l),`<?xml version="1.0" encoding="UTF-8"?>${n.serialize()}`}var l7={graphId:"G",directedEdges:!0,styles:"all",download:!0,filename:"graph.graphml",nodes:void 0,edges:void 0,nodeData:e=>e,edgeData:e=>e,filter:"visible"};function c7(e,t){const{styles:n,nodes:r,edges:i,download:s,filename:o,graphId:a,directedEdges:l,filter:c,nodeData:d,edgeData:u}=Kr(t,l7),h=d7(Dm(e.modules.graph,e.modules.individualAttributes,{styles:n,nodes:r,edges:i,filter:c,nodeData:d,edgeData:u}),{graphId:a,directedEdges:l,noStyles:n==="none"});return s&&No(h,o,"text"),Promise.resolve(h)}function d7(e,t){const n=tM();function r(h,g,p,m,f){p=p||{};const y=n.createElement(g);for(const _ in p){if(!Object.prototype.hasOwnProperty.call(p,_))continue;const v=p[_];v!==void 0&&y.setAttribute(_,v)}return(m!==void 0||f)&&(Object.prototype.toString.call(m)==="[object Object]"&&(m=JSON.stringify(m)),y.appendChild(n.createTextNode(m))),h.appendChild(y),y}const i=["id","source","target"],s=["size","x","y","shape","text","color"],o={size:{for:"all",type:"double"},x:{for:"node",type:"double"},y:{for:"node",type:"double"},shape:{for:"all",type:"string"},color:{for:"all",type:"string"},r:{for:"all",type:"int"},g:{for:"all",type:"int"},b:{for:"all",type:"int"},a:{for:"all",type:"double"},text:{for:"all",type:"string"}};t.noStyles&&(delete o.color,delete o.r,delete o.g,delete o.b,delete o.a,delete o.shape,s.pop());const a=[],l=[];function c(h,g){const p={id:h.id};s.forEach(m=>{let f=h[m];m==="y"&&f&&(f=-parseFloat(f)),f!==void 0&&(p[(g==="edge"?"edge_":"")+m]=f,m==="color"&&function(_,v){const x=or(v);x&&(_.r=x[0],_.g=x[1],_.b=x[2])}(p,f))}),Ji(h.data||{},(m,f)=>{s.indexOf(f)===-1&&i.indexOf(f)===-1&&(o[f]?o[f].for!==g&&(o[f].for="all"):o[f]={for:g,type:"string"},p[f]=m)}),g==="edge"?(p.source=h.source,p.target=h.target,l.push(p)):a.push(p)}e.nodes.forEach(h=>c(h,"node")),e.edges.forEach(h=>c(h,"edge"));const d=r(n,"graphml",{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml","xmlns:java":"http://www.yworks.com/xml/yfiles-common/1.0/java","xmlns:sys":"http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0","xmlns:x":"http://ww.yworks.com/xml/yfiles-common/markup/2.0"});Ji(o,(h,g)=>{h.for!=="node"&&h.for!=="all"||r(d,"key",{"attr.name":g,"attr.type":h.type,for:"node",id:g}),h.for!=="edge"&&h.for!=="all"||r(d,"key",{"attr.name":g,"attr.type":h.type,for:"edge",id:"edge_"+g})}),r(d,"key",{id:"nodegraphics",for:"node","yfiles.type":"nodegraphics","attr.type":"string"}),r(d,"key",{id:"edgegraphics",for:"edge","yfiles.type":"edgegraphics","attr.type":"string"});const u=r(d,"graph",{edgedefault:t.directedEdges||t.directedEdges===void 0?"directed":"undirected",id:t.graphId?t.graphId:"G","parse.nodes":e.nodes.length,"parse.edges":e.edges.length,"parse.order":"nodesfirst"});return a.forEach(h=>{const g=r(u,"node",{id:h.id});(function(m,f){const y=r(m,"data",{key:"nodegraphics"}),_=r(y,"y:ShapeNode");r(_,"y:Geometry",{x:f.x,y:f.y,width:f.size,height:f.size}),t.noStyles||r(_,"y:Fill",{color:my(f.color),transparent:!1}),r(_,"y:NodeLabel",null,f.text||""),r(_,"y:Shape",{type:f.shape})})(g,h),Ji(h,(p,m)=>{i.indexOf(m)===-1&&r(g,"data",{key:m},p,!0)})}),l.forEach(h=>{const g=r(u,"edge",{id:h.id,source:h.source,target:h.target});(function(m,f){const y=r(m,"data",{key:"edgegraphics"}),_=r(y,"y:PolyLineEdge");r(_,"y:LineStyle",{type:f.edge_type,color:t.noStyles?void 0:my(f.edge_color),width:f.edge_size}),r(_,"y:EdgeLabel",null,f.edge_label)})(g,h),Ji(h,(p,m)=>{i.indexOf(m)===-1&&r(g,"data",{key:m},p,!0)})}),`<?xml version="1.0" encoding="UTF-8"?>
${cb(n)}`}var u7={nodeAttributes:["x","y","color","radius","shape","text"],edgeAttributes:["color","width","text"],nodeData:Mi,edgeData:Mi,filter:"visible",pretty:!1,download:!0,filename:"graph.json",anonymize:!1};function h7(e,t={}){t.anonymize&&(t={nodeAttributes:"all",edgeAttributes:"all",nodeData:Kg,edgeData:Kg,filter:t.filter||"all",download:t.download,pretty:t.pretty,filename:t.filename});const{nodeAttributes:n,edgeAttributes:r,nodeData:i,edgeData:s,filter:o,pretty:a,download:l,filename:c}=Kr(t,u7),d=EF(e.modules.graph,{nodeAttributes:n,edgeAttributes:r,filter:o,nodeData:i,edgeData:s}),u=a?JSON.stringify(d,null," "):JSON.stringify(d);return l&&No(u,c,"text"),Promise.resolve(d)}function g7(e,t){return e.getBoundingBox().computeForZoom(t).extend(vr.fromValues(e.getAttribute("x"),e.getAttribute("y"),e.map(n=>n.getAttribute("radius")+n.getAttribute("innerStroke.width")+n.getAttribute("outerStroke.width"))))}function p7(e,t,n){const r=t.view.graphToScreenCoordinates(n.bottomLeft()),i=t.view.graphToScreenCoordinates(n.topRight()),s=Math.abs(i.x-r.x),o=Math.abs(i.y-r.y),a=Math.min(e.width/s,e.height/o);e.width=s*a,e.height=o*a}function AF(e,t={}){const n=e.view.get(),r=typeof t.margin=="number"?t.margin:0,i={pixelRatio:t.pixelRatio||zr(),angle:0,backgroundColor:null,zoom:0,x:0,y:0,width:0,height:0,hideImages:!1,renderBackground:!0,isBufferDisplayable:Qg};if(t.width&&t.height?(i.width=t.width,i.height=t.height):(i.width=n.width,i.height=n.height),t.clip)i.zoom=n.zoom,i.x=n.x,i.y=n.y;else{const s=g7(e.getNodes(t.filter),n.zoom);if(t.texts){const o=e.modules.labels.getTextsBoundingBox();o.isValid()&&s.extend(o)}t.width!=null&&isFinite(t.width)&&t.height!=null&&isFinite(t.height)||p7(i,e,s),i.width=Math.max(i.width,2*r),i.height=Math.max(i.height,2*r),i.x=s.cx,i.y=s.cy,i.zoom=Math.min((i.width-2*r)/s.width,(i.height-2*r)/s.height)}return e.modules.geo.isEnabled()?i.backgroundColor=null:t.background!==void 0&&(i.backgroundColor=t.background),i}function jy(e,t,n,r,i=!1){const s=yt(be({},n),{hideImages:i,angle:n.angle||0,currentTime:ir(),isBufferDisplayable:l=>t.texts||!RP(l)}),o={};if(t.badges===!1){const l={text:null,image:null};o.badges={topLeft:l,topRight:l,bottomRight:l,bottomLeft:l}}const a=e.styles.getClass(Xo);return a&&a.update({nodeAttributes:o}),e.modules.graphics.export(r,s,t.filter||wb,t)}var Ch=e=>({download:!0,filter:"visible",filename:`graph.${e}`,clip:!1,margin:10,width:void 0,height:void 0,background:null,badges:!0,legend:void 0,texts:!0,preventOverlap:!0,images:!0,textWatermark:{content:"",fontFamily:"Arial",fontSize:48,fontStyle:void 0,fontColor:"red",repeat:!1,angle:0,alpha:.65,space:50,x:void 0,y:void 0},imageWatermark:{url:void 0,width:void 0,height:void 0,repeat:!1,angle:0,alpha:.65,space:50,x:void 0,y:void 0},imageCrossOrigin:void 0,layers:!0,pixelRatio:void 0}),m7={png:Ch("png"),jpg:Ch("jpg"),tiff:Ch("tiff"),gif:Ch("gif")};function f7(e){const{canvas:t,parameters:n}=e;return n.textWatermark.content&&fA(t,n.textWatermark,S7,A7),n.imageWatermark.url?ZL(n.imageWatermark.url).then(r=>(r&&(n.imageWatermark.content=r,fA(t,n.imageWatermark,C7,k7)),e)):e}function _7(e){const{ogma:t,canvas:n,parameters:r}=e,i=t.modules.legend;let s=null;return r.legend===void 0&&(s=!!i.enabled()&&i.getCurrentOptions()),r.legend===!0&&(s={}),s&&i.exportOnCanvas(n,s,e.parameters.pixelRatio),e}function y7(e){const{canvas:t,parameters:n,view:r}=e;if(!r.renderBackground)return e;r.renderBackground=!1;const i=t.getContext("2d");return i.fillStyle=n.background,i.fillRect(0,0,t.width,t.height),e}function v7(e){const{ogma:t,view:n}=e;return t.modules.geo.isEnabled()?t.modules.geo.exportBackground(n).then(r=>{const i=n.width*n.pixelRatio,s=n.height*n.pixelRatio,o=Wn(i,s),a=o.getContext("2d");return a.drawImage(r,(i-r.width)/2,(s-r.height)/2),a.drawImage(e.canvas,0,0),e.canvas=o,e}):e}function x7(e){const{ogma:t,view:n,canvas:r,parameters:i}=e;return i.layers?t.modules.layers.export({view:n,canvas:r,below:!0}).then(()=>e):e}function b7(e){const{ogma:t,view:n,canvas:r,parameters:i}=e;return i.layers?t.modules.layers.export({view:n,below:!1,canvas:r}).then(()=>e):e}function w7(e){const{ogma:t,parameters:n,canvas:r,view:i}=e,s=r.getContext("2d");return jy(t,n,i,"canvas",!n.images).then(o=>{try{const a=o.getContext("2d");if(!a)throw new Error("Failed to render graph");return a.getImageData(0,0,1,1),s.drawImage(o,0,0,r.width,r.height),e}catch(a){return mo(a),jy(t,n,i,"canvas",!0).then(l=>(s.drawImage(l,0,0,r.width,r.height),e))}})}function E7({canvas:e,parameters:t,type:n}){const r=e.toDataURL("image/"+n);return t.download&&No(r,t.filename,"dataURL"),r}function Th(e,t,n){const r=Kr(t,m7[n]);r.filename.endsWith(n)||(r.filename+="."+n),r.background===null&&(r.background=e.modules.graphics.getTransparentBackgroundColor());const i=AF(e,r);r.pixelRatio=i.pixelRatio;const s=Wn(i.width*i.pixelRatio,i.height*i.pixelRatio),o={ogma:e,parameters:r,canvas:s,view:i,type:n};return Promise.resolve().then(()=>o).then(y7).then(v7).then(x7).then(w7).then(b7).then(f7).then(_7).then(E7).then(a=>(e.modules.events.fire("afterImageExport"),a))}function S7(e,t,n,r){e.textAlign="center",e.textBaseline="middle",e.fillText(t,n,r)}function A7(e,t,n){return{width:e.measureText(t).width,height:n}}function k7(e,t,n,r,i){return{width:r===void 0?t.width:r,height:i===void 0?t.height:i}}function C7(e,t,n,r,i,s){e.drawImage(t,n-i/2,r-s/2,i,s)}function fA(e,t,n,r){if(!t)return;if(typeof t!="object")t={content:t};else if(!t.content)return;const{fontFamily:i,fontSize:s,fontStyle:o,fontColor:a,repeat:l,alpha:c,space:d,content:u}=t;let h=t.angle;const g=e.getContext("2d"),p=e.width,m=e.height,f=t.x===void 0?p/2:t.x,y=t.y===void 0?m/2:t.y,_=t.height,v=t.width;h=h/180*Math.PI,Eo(g,i,s,o),g.fillStyle=a,g.globalAlpha=c;const x=r(g,u,s,v,_);if(l){const b=x.width+d,w=x.height+d,S=Math.sqrt(p*p+m*m);g.save(),g.translate(0,0),g.rotate(h);for(let A=0;A<S;A+=b)for(let C=0;C<S;C+=w)n(g,u,A,C,x.width,x.height),C!==0&&n(g,u,A,-C,x.width,x.height);g.restore()}else g.save(),g.translate(f,y),g.rotate(h),n(g,u,0,0,x.width,x.height),g.restore()}var T7={download:!0,filename:"graph.svg",width:void 0,height:void 0,background:null,texts:!0,preventOverlap:!0,groupSemantically:!0,images:!0,badges:!0,embedFonts:!1,layers:!0,clip:!1,margin:10,prefix:"ogma"};function N7(e,t){const n=Kr(t,T7),{background:r,filename:i,download:s,layers:o}=n,a=e.modules.graphics;r===null&&(n.background=a.getTransparentBackgroundColor());const l=AF(e,n);return jy(e,n,l,"svg",!n.images).then(c=>(c.removeAttribute("pointer-events"),c.setAttribute("version","1.1"),c.setAttributeNS(q_,"xmlns",Mx),c.setAttributeNS(q_,"xmlns:xlink",qL),c)).then(c=>n.groupSemantically?I7(e,c,n):c).then(c=>M7(c,n)).then(c=>L7(e,l,c)).then(c=>_A(e,l,c,o,!0)).then(c=>_A(e,l,c,o,!1)).then(c=>(e.modules.events.fire("afterImageExport"),c)).then(c=>{const d=`<?xml version="1.0" encoding="utf-8"?>${cb(c)}`;return s&&No(d,i,"text/xml"),d})}function L7(e,t,n){return e.modules.geo.isEnabled()?e.modules.geo.exportBackground(yt(be({},t),{pixelRatio:1})).then(r=>{const i=zt("image",{width:r.width,height:r.height,x:0,y:0,href:r.toDataURL()});return n.insertBefore(i,n.children[0]),n}):Promise.resolve(n)}function _A(e,t,n,r,i=!1){return r?e.modules.layers.export({view:t,svg:n,below:i}).then(()=>n):Promise.resolve(n)}function I7(e,t,n){const r=t.childNodes[2],i=r.childNodes,s={},o=n.prefix;for(let g=0;g<i.length;g++){const p=i[g],m=p.getAttribute(si);m!=null&&(s[m]=s[m]||[],s[m].push(p))}const a=Object.keys(s),l=e.modules.graph,c=l.getNodeAttribute("id"),d=l.getEdgeAttribute("id"),u=zt("g",{class:`${o}-edges`}),h=zt("g",{class:`${o}-nodes`});for(let g=0;g<a.length;g++){const p=a[g],m=p.charAt(0)==="n",f=parseInt(p.substring(1)),y=s[p],_=ol((m?c:d).get(f).toString()),v=zt("g");v.setAttribute(`data-${m?"node":"edge"}-id`,_),v.setAttribute("class",`${o}-${m?"node":"edge"}`);for(let x=0;x<y.length;x++){const b=y[x];v.appendChild(b),b.removeAttribute(si)}(m?h:u).appendChild(v)}return r.appendChild(u),r.appendChild(h),t}function P7(e){const t=[].concat(Array.prototype.slice.call(e.getElementsByTagName("text")||[])),n=[],r={};for(let i=0;i<t.length;i++){const s=t[i].parentNode.getAttribute("font-family");if(typeof s=="string"){const o=s.split(",");for(let a=0;a<o.length;a++){const l=o[a].replace(/['"]/g,"");l===""||r[l]||(r[l]=!0,n.push(l))}}}return{list:n,map:r}}function M7(e,t){const n=P7(e).map;return VP().then(r=>r.filter(i=>n[i.name])).then(r=>HP(r,!!t.embedFonts)).then(r=>{if(r.length!==0){const i=zt("style");for(let s=0;s<r.length;s++)i.appendChild(Fx(r[s]));e.childNodes[0].appendChild(i)}return e})}var F7={what:void 0,dataProperties:void 0,filter:"visible",nodes:void 0,edges:void 0,download:!0,filename:"graph.xlsx",tab:void 0,nodeData:void 0,edgeData:void 0};function R7(e,t={}){typeof t=="string"&&(t={what:t});const{what:n,nodes:r,edges:i,tab:s={nodes:()=>"nodes",edges:()=>"edges"},download:o,filename:a,dataProperties:l,filter:c,nodeData:d,edgeData:u}=Kr(t,F7);s.nodes||(s.nodes=()=>"nodes"),s.edges||(s.edges=()=>"edges");const h=Dm(e.modules.graph,e.modules.individualAttributes,{styles:"none",nodes:r,edges:i,filter:c,nodeData:p=>p,edgeData:p=>p}),g=D7(h,{what:n,tabFunctions:s,tabContentFunctions:{nodes:d||(p=>H_(Ud(p||{}),l)),edges:u||(p=>H_(Ud(p||{}),l))}},{nodes:e.modules.graph.getNodes(h.nodes.map(({id:p})=>p)),edges:e.modules.graph.getEdges(h.edges.map(({id:p})=>p))});return o&&No(g,a,"blob"),Promise.resolve(g)}function D7(e,{what:t,tabFunctions:n,tabContentFunctions:r},i){const s=mi("XLSX")||mi("xlsx",{throwOnError:!0});if(!s)throw Error('The xlsx exports requires the "xlsx" peer dependency to be associated');const o=new O7;if(t){if(t!=="nodes"&&t!=="edges")throw new TypeError(`Invalid argument: "what" is not "nodes" or "edges", was ${t}`);t==="nodes"&&(e.edges=[]),t==="edges"&&(e.nodes=[])}const a={};for(const l of["nodes","edges"]){const c=JV(e[l],l,n[l],r[l],i[l]);for(const d of Object.keys(c))a[d]=[...a[d]||[],...c[d]]}for(const l of Object.keys(a))o.SheetNames.push(l),o.Sheets[l]=z7(s,QV(a[l]));return o.SheetNames.length===0&&(o.SheetNames=["nodes","edges"],o.Sheets.nodes={},o.Sheets.edges={}),$d([B7(s.write(o,{bookType:"xlsx",bookSST:!1,type:"binary"}))])}function z7(e,t){const n={},r={s:{c:1e7,r:1e7},e:{c:0,r:0}};for(let i=0;i!==t.length;++i){const s=t[i];for(let o=0;o!==s.length;++o){const a=s[o];r.s.r>i&&(r.s.r=i),r.s.c>o&&(r.s.c=o),r.e.r<i&&(r.e.r=i),r.e.c<o&&(r.e.c=o);const l={v:SF(a)};n[e.utils.encode_cell({c:o,r:i})]=l}}return r.s.c<1e7&&(n["!ref"]=e.utils.encode_range(r)),n}var O7=class{constructor(){this.SheetNames=[],this.Sheets={}}};function B7(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r!==e.length;++r)n[r]=255&e.charCodeAt(r);return t}var j7=class extends Jt{constructor(e){super(e),this.csv=t=>r7(this._ogma,t),this.xlsx=t=>(t&&t.dataProperties&&void 0,R7(this._ogma,t)),this.gexf=t=>o7(this._ogma,t),this.graphml=(t={})=>c7(this._ogma,t),this.json=(t={})=>h7(this._ogma,t),this.svg=(t={})=>N7(this._ogma,t),this.png=(t={})=>Th(this._ogma,t,"png"),this.jpg=(t={})=>Th(this._ogma,t,"jpg"),this.tiff=(t={})=>Th(this._ogma,t,"tiff"),this.gif=(t={})=>Th(this._ogma,t,"gif"),e.styles.createClass({name:Xo,isBuiltin:!0})}},er=_x(OO()),U7=class extends Jt{constructor(){super(...arguments),this.balancedTree=e=>Promise.resolve(er.balancedTree.generate(er.balancedTree.configure(e))),this.barabasiAlbert=e=>Promise.resolve(er.barabasiAlbert.generate(er.barabasiAlbert.configure(e))),this.erdosRenyi=e=>Promise.resolve(er.erdosRenyi.generate(er.erdosRenyi.configure(e))),this.flower=e=>Promise.resolve(er.flower.generate(er.flower.configure(e))),this.grid=e=>Promise.resolve(er.grid.generate(er.grid.configure(e))),this.path=e=>Promise.resolve(er.path.generate(er.path.configure(e))),this.random=e=>Promise.resolve(er.random.generate(er.random.configure(e))),this.randomTree=e=>Promise.resolve(er.randomTree.generate(er.randomTree.configure(e)))}},$7=class extends Jt{constructor(){super(...arguments),this.enable=e=>this._ogma.modules.geo.enable(e),this.disable=e=>this._ogma.modules.geo.disable(e),this.setOptions=e=>this._ogma.modules.geo.setOptions(e),this.getOptions=()=>this._ogma.modules.geo.getOptions(),this.getMap=()=>this._ogma.modules.geo.getMap(),this.enabled=()=>this._ogma.modules.geo.isEnabled(),this.getCenter=()=>this._ogma.modules.geo.getCenter(),this.getView=()=>this._ogma.modules.geo.getView(),this.getZoom=()=>this._ogma.modules.geo.getZoom(),this.setZoom=e=>this._ogma.modules.geo.setZoom(e),this.setView=(e,t,n)=>this._ogma.modules.geo.setView(e,t,n),this.setCenter=(e,t)=>this._ogma.modules.geo.setCenter(e,t),this.toggle=e=>this._ogma.modules.geo.toggle(e),this.resetCoordinates=()=>this._ogma.modules.geo.resetCoordinates(),this.getUnprojectedCoordinates=e=>this._ogma.modules.geo.getUnprojectedCoordinates(this._ogma.getNodes(e)),this.runLayout=e=>fa(this,[e],function*({type:t,nodes:n,latitudePath:r=Yi,longitudePath:i=qi,options:s,center:o}){if(t===void 0||s===void 0)throw new Error("Ogma.geo.runLayout: Both layout type and options are required");if(n=this._ogma.getNodes(n),o===void 0){let a=0;if(o=n.reduce((l,c)=>{const d=c.getData(r),u=c.getData(i);return isNaN(d)||isNaN(u)||(l.latitude+=d,l.longitude+=u,a++),l},{latitude:0,longitude:0}),isNaN(o.latitude)||isNaN(o.longitude))throw new Error("Ogma.geo.runLayout: No valid center coordinates found");o.latitude/=a,o.longitude/=a}return this._ogma.modules.geo.runLayout({center:o,nodes:n,type:t,options:s,latitudePath:r,longitudePath:i})})}},G7=class{reloadFonts(){this.modules.graphics.reloadFonts()}},V7=class extends Jt{constructor(){super(...arguments),this.gexf=e=>fF(e),this.gexfFromUrl=e=>xb(e),this.janus=e=>_F(e),this.json=(e,t)=>yF(e,t),this.jsonFromUrl=(e,t)=>bb(e,t),this.neo4j=e=>vF(e),this.graphml=e=>xF(e),this.graphmlFromUrl=e=>bF(e)}},H7=class extends Jt{constructor(){super(...arguments),this.isKeyPressed=e=>this._ogma.modules.keyboard.isPressed(e),this.resetKeys=()=>{this._ogma.modules.keyboard.resetKeys()}}},W7=class extends Jt{addLayer(e,t){return this._ogma.modules.layers.addLayer(e,"layer",t)}addCanvasLayer(e,t,n){return this._ogma.modules.layers.addCanvasLayer(e,t,n)}addOverlay(e,t){if(!e.position)throw new Error("options.position argument is required");return this._ogma.modules.layers.addOverlay(e,t)}addSVGLayer(e,t){return e.element||(e.element=document.createElementNS("http://www.w3.org/2000/svg","svg")),e.draw||(e.draw=()=>{}),this._ogma.modules.layers.addSVGLayer(e,t)}},yA={name:"concentric",configure:function(e,{graph:t,data:n}){if(e.centralNode===void 0)throw new Error('concentric layout: missing parameter "centralNode"');const r=yt(be({},e),{centralNode:function(x,b){return b instanceof es?b:x.getNode(b)}(t,e.centralNode)}),{centralNode:i,nodes:s}=r,o=t.getNode(i);if(o===void 0)throw new Error('concentric layout: "centralNode" parameter is not valid');const a=o._index,{x:l,y:c}=o.getPosition(),d=s.getAttribute("layoutable"),u=t.getNodes(s)._indexes,h=Array.from(u.filter((v,x)=>d[x]));h.indexOf(a)===-1&&h.push(a);const g=t.getNodeAttribute("radius").getMultiple(u),p=function(x,b,w,S){if(b)return b==="random"?"random":b==="radius"?S.slice():b==="degree"?w.getDegree():x.getProperty(w,b)}(n,r.sortBy,s,g),m=h.reduce((v,x,b)=>(v[x]=b,v),{}),f=h.map((v,x)=>x),y=new Set(e.edges.getExtremities()._indexes),_=h.map(v=>t.topology.getAdjacentElements(!0,new Uint32Array([v])).filter(x=>y.has(x)).map(x=>m[x]));return{sourceNodeIndex:h.indexOf(a),centerX:typeof r.centerX=="number"?r.centerX:l,centerY:typeof r.centerY=="number"?r.centerY:c,list:h,indexes:f,size:h.length,totalSize:h.length,attributes:{adjacentNodes:_,size:g},sortAttr:p,clockwise:r.clockwise===void 0||r.clockwise,circleHopRatio:r.circleHopRatio||5,allowOverlap:!!r.allowOverlap}},context:function(){return{dijkstra:function(e,t,n,r,i){const s=Math.pow(2,31)-1,o=new Int32Array(r),a=new Int32Array(r),l=new Int8Array(r);o.fill(s),a.fill(-1);for(let d=0;d<r;++d){const u=t[d];u!==void 0&&(o[u]=s,a[u]=-1)}o[i]=0;let c=0;for(;c!==-1;){let d=s;c=-1;for(let u=0;u<n;++u){const h=t[u],g=o[h];!l[h]&&g<d&&(d=g,c=h,l[h]=1)}if(c>-1){const u=e[c],h=d+1;u.forEach(g=>{const p=o[g];h<p&&(o[g]=h,a[g]=c)})}}return o},determinePropertyType:function(e,t,n){return t.some(r=>e[r]!=="number")?"string":"number"}}},update:function(e,t){const{attributes:n,indexes:r,size:i}=e,{sourceNodeIndex:s,centerX:o,centerY:a,sortAttr:l}=e,c=n.adjacentNodes,d=n.size,u=new Array(e.totalSize),h=new Array(e.totalSize),g=t.dijkstra(c,r,e.size,e.totalSize,s);let p=0;const m={};for(let w=0;w<i;w++){const S=d[r[w]];S>p&&(p=S)}const f=p*e.circleHopRatio;let y=0,_=0;const v=Math.PI/9;for(let w=0;w<i;w++){const S=r[w],A=g[S];let C=m[A];C||(C=[],m[A]=C),C.push(S)}const x=function(S,A,C){if(S==="random")return function(){return Math.random()-.5};if(S)return C.determinePropertyType(S,A,A.length)==="number"?function(k,T){return S[k]-S[T]}:function(k,T){return S[k]<S[T]?-1:1}}(l,r,t),b=l==="random"||l;return Object.keys(m).sort((w,S)=>parseInt(w)-parseInt(S)).forEach((w,S)=>{const A=m[w],C=A.length;let k=0,T=_;const M=2*Math.PI/C;if(S!==0&&!e.allowOverlap){const D=2*Math.PI*y;let B=0;k+=A.reduce((I,N)=>I+d[N],0),B=2*k*Math.SQRT2,B>D&&(y+=B/(2*Math.PI)-y)}b&&(A.sort(x),e.clockwise||A.reverse());for(let D=0;D<C;D++){const B=A[D];u[B]=Math.cos(T)*y+o,h[B]=Math.sin(T)*y+a;const I=d[B];T+=M*(e.allowOverlap?1:I/k*C)}y+=f,_+=v}),{x:u,y:h,indexes:e.list}},isRunning:function(){return!1},onSync:function({indexes:e,x:t,y:n}){return{indexes:e,x:t,y:n}}},X7=e=>(e.modules.layouts.register(yA),t=>e.modules.layouts.start(yA.name,t)),Y7=Object.defineProperty,Je=(e,t)=>Y7(e,"name",{value:t,configurable:!0}),q7=Je((e,t)=>e.map(n=>t*n),"Z"),Z7=Je((e,t)=>e.map(t),"g"),J7=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),Q7=Je(()=>({[WebGL2RenderingContext.FLOAT]:"uniform1f",[WebGL2RenderingContext.FLOAT_VEC2]:"uniform2fv",[WebGL2RenderingContext.FLOAT_VEC3]:"uniform3fv",[WebGL2RenderingContext.FLOAT_VEC4]:"uniform4fv",[WebGL2RenderingContext.INT]:"uniform1i",[WebGL2RenderingContext.INT_VEC2]:"uniform2iv",[WebGL2RenderingContext.INT_VEC3]:"uniform3iv",[WebGL2RenderingContext.INT_VEC4]:"uniform4iv",[WebGL2RenderingContext.UNSIGNED_INT]:"uniform1ui",[WebGL2RenderingContext.UNSIGNED_INT_VEC2]:"uniform2uiv",[WebGL2RenderingContext.UNSIGNED_INT_VEC3]:"uniform2uiv",[WebGL2RenderingContext.UNSIGNED_INT_VEC4]:"uniform2uiv",[WebGL2RenderingContext.FLOAT_MAT2]:"uniformMatrix2fv",[WebGL2RenderingContext.FLOAT_MAT3]:"uniformMatrix3fv",[WebGL2RenderingContext.FLOAT_MAT4]:"uniformMatrix4fv",[WebGL2RenderingContext.SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.INT_SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.UNSIGNED_INT_SAMPLER_2D]:"uniform1i",[WebGL2RenderingContext.SAMPLER_CUBE]:"uniform1i"}),"te"),Jo=new Map,c0=new Map,K7=Je((e,t,n,r)=>{Jo.has(e)||Jo.set(e,Jo.size);const i=`${Jo.get(e)}:${t}:${n}`;return c0.has(i)||c0.set(i,r()),c0.get(i)},"re"),d0=new Map,eH=Je((e,t)=>(Jo.has(e)||Jo.set(e,Jo.size),d0.has(e)||d0.set(e,t()),d0.get(e)),"oe"),tH=Je(e=>{const t=e.createBuffer();if(!t)throw new Error("Could not create buffer");return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,J7,e.STATIC_DRAW),t},"ne"),Ca=Je((e,t)=>eH(e,()=>{const n=e.getAttribLocation(t,"position");return e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),n}),"w"),vA=Je((e,t,n)=>{const r=e.createShader(t);if(r===null)throw new Error("Cannot create WebGL shader.");return e.shaderSource(r,n),e.compileShader(r),r},"X"),Ta=Je((e,t,n)=>K7(e,t,n,()=>{const r=e.createProgram();if(r===null)throw new Error("Cannot create WebGL program.");if(e.attachShader(r,vA(e,e.VERTEX_SHADER,t)),e.attachShader(r,vA(e,e.FRAGMENT_SHADER,n)),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)){const i=e.getProgramInfoLog(r);throw e.deleteProgram(r),new Error(`Could not link WebGL program: 
${i}`)}return r}),"R"),rs=Je((e,{size:t,data:n,type:r,internalFormat:i=e.RGBA32F,format:s=e.RGBA})=>{const o=e.createTexture();if(!o)throw new Error("Cannot create WebGL texture.");const[a,l]=Z7(t,c=>Math.max(1,c));return n instanceof Float32Array&&n.byteLength===0?n=new Float32Array(a*l*4):n instanceof Uint32Array&&n.byteLength===0&&(n=new Uint32Array(a*l*4)),e.bindTexture(e.TEXTURE_2D,o),e.texImage2D(e.TEXTURE_2D,0,i,a,l,0,s,r,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),{size:t,data:n,type:r,format:s,handle:o}},"F"),ts=Je((e,t)=>{const n=e.createFramebuffer();if(!n)throw new Error("Cannot create WebGL frame buffer.");e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER);if(r!==e.FRAMEBUFFER_COMPLETE)switch(r){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("Framebuffer: Attachment is NOT complete.");case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("Framebuffer: No valid attachment.");case e.FRAMEBUFFER_UNSUPPORTED:throw new Error("Framebuffer: Attachment types are not supported.");default:throw new Error(`Framebuffer: Unknown reason (status: ${r}).`)}return n},"l"),Gl=Je((e,t)=>()=>([e,t]=[t,e],e),"A"),Na=Je((e,t,n)=>{e.useProgram(t);const r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const o=e.getActiveUniform(t,s);if(!o)throw new Error(`Cannot get GL active uniform ${s}.`);const{name:a,size:l,type:c}=o,d=e.getUniformLocation(t,a);if(!d)throw new Error(`Cannot get GL uniform location ${a}.`);r[a]={size:l,data:n[a],type:c,location:d}}return r},"M");function Lo(e,t,n={}){let r=0;const i=Q7();return Object.entries(t).forEach(([s,{location:o,type:a,data:l}])=>{let c=n[s]!==void 0?n[s]:l;(a===e.SAMPLER_2D||a===e.INT_SAMPLER_2D||a===e.UNSIGNED_INT_SAMPLER_2D)&&(e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,c),c=r,r++),e[i[a]](o,c)})}Je(Lo,"b");var zm=Je(e=>Math.ceil(Math.sqrt(e)),"D"),kF=Je(e=>Math.ceil(Math.sqrt(2*e)),"Y"),nH=Je((e,t,n,r)=>{const i=zm(t),s=new Float32Array(4*i**2);for(let o=0;o<t;o++){const a=4*o;s[a]=n[o],s[a+1]=r[o]}return rs(e,{size:[i,i],data:s,type:e.FLOAT,format:e.RGBA,internalFormat:e.RGBA32F})},"ue"),rH=Je((e,t,n,r)=>{const i=zm(t),s=kF(n),o=new Uint32Array(3*i**2);let a=0;for(let l=0;l<t;l++){const c=3*l,d=a,u=Math.floor(d/s),h=d%s;o[c]=h,o[c+1]=u,o[c+2]=r[l],a+=r[l]}return rs(e,{size:[i,i],data:o,type:e.UNSIGNED_INT,format:e.RGB_INTEGER,internalFormat:e.RGB32UI})},"ie"),iH=Je((e,t,n,r,i)=>{const s=zm(t),o=kF(n),a=new Uint32Array(2*o**2),l=Array.from({length:t},()=>[]);r.forEach((d,u)=>{l[d].push(i[u]),l[i[u]].push(d)});let c=0;for(let d=0;d<t;d++)for(const u of l[d]){const h=Math.floor(u/s),g=u%s;a[c]=g,a[c+1]=h,c+=2}return rs(e,{size:[o,o],data:a,type:e.UNSIGNED_INT,format:e.RG_INTEGER,internalFormat:e.RG32UI})},"ae"),sH=Je((e,t,n,r=new Float32Array(t),i=new Uint8Array(t))=>{const s=zm(t),o=new Float32Array(4*s**2);for(let a=0;a<t;a++){const l=4*a;o[l]=n[a],o[l+1]=r[a],o[l+2]=i[a],o[l+3]=0}return rs(e,{size:[s,s],data:o,type:e.FLOAT,format:e.RGBA,internalFormat:e.RGBA32F})},"ce"),xA=Je(e=>{const t=new Map,n={nodes:[],edges:[]};return e.nodes.forEach((r,i)=>{t.has(r.id)&&console.warn(`Duplicated ID ${r.id}@${i}`),n.nodes.push(yt(be({},r),{id:i})),t.set(r.id,i)}),e.edges.forEach(r=>{const i=t.get(r.source),s=t.get(r.target);return i===void 0||s===void 0?console.warn(`Missing source ${r.source}`):void n.edges.push({source:Math.min(i,s),target:Math.max(i,s)})}),n.edges.sort((r,i)=>r.source-i.source||r.target-i.target),n},"De"),bA=Je(({nodes:e,edges:t},[n,r]=[0,0])=>{const i=Math.PI*(3-Math.sqrt(5)),s=e.map(a=>(a.x=(a.x||0)-n,a.y=(a.y||0)-r,a)).map(a=>({n:a,key:a.pinned?0:1+1e6*a.y+a.x})).sort((a,l)=>a.key-l.key);let o=0;return s.forEach(({n:a,key:l},c)=>{if(l*c==0||l!==s[c-1].key)return o=c;const d=Math.sqrt(c-o);a.x=s[o].n.x+d*Math.cos(i*(c-o)),a.y=s[o].n.y+d*Math.sin(i*(c-o))}),{nodes:e,edges:t}},"Be"),wA=Je((e,t)=>{const{nodes:n,edges:r}=t,i=n.length,s=r.length,o=new Uint32Array(s),a=new Uint32Array(s),l=new Uint32Array(i);for(let p=0;p<s;p++){const{source:m,target:f}=r[p];o[p]=m,a[p]=f,l[m]++,l[f]++}const c=new Float32Array(n.map(({x:p})=>p||0)),d=new Float32Array(n.map(({y:p})=>p||0)),u=new Float32Array(n.map(({r:p})=>isNaN(p)?1:p)),h=new Float32Array(n.map((p,m)=>l[m]+1)),g=new Uint8Array(n.map(({pinned:p})=>p?1:0));return{N:i,E:s,bodyTexture:nH(e,i,c,d),nodeTexture:rH(e,i,s,l),topologyTexture:iH(e,i,s,o,a),propertyTexture:sH(e,i,h,u,g)}},"Oe"),EA=Je((e,t)=>{e.deleteTexture(t.bodyTexture.handle),e.deleteTexture(t.nodeTexture.handle),e.deleteTexture(t.topologyTexture.handle),e.deleteTexture(t.propertyTexture.handle)},"We"),La=`#version 300 es

in vec2 position;

void main() {
  gl_Position = vec4(position, 0.0f, 1.0f);
}`,oH=`#version 300 es
precision highp float;uniform int u_0;uniform lowp sampler2D u_1,u_2;uniform int u_3,u_4;out vec4 outColor;void main(){ivec2 o=ivec2(gl_FragCoord.xy);if((o&65535<<u_3)!=o)return;if(outColor=vec4(1e9,1e9,-1e9,-1e9),u_3>0)for(int e;e<4;e++){ivec2 i=o+(ivec2(e&1,e>>1)<<u_3-1);vec4 t=texelFetch(u_2,i,0);outColor=vec4(min(outColor.xy,t.xy),max(outColor.zw,t.zw));}else if(textureSize(u_1,0).x*o.y+o.x<u_0)outColor.xy=outColor.zw=texelFetch(u_1,o,0).xy;if(u_3==u_4){vec2 o=outColor.zw-outColor.xy;o=vec2(max(o.x,o.y),max(o.x,o.y)),outColor=vec4(outColor.xy-vec2(1),o+vec2(2));}}`,aH=Je(e=>1<<Math.ceil(Math.log2(Math.sqrt(e))),"fe"),SA=Je((e,t,n)=>{const r=aH(t),i=new Float32Array(4*r**2);return n&&n.forEach((s,o)=>i[o]=s),rs(e,{size:[r,r],data:i,type:e.FLOAT,format:e.RGBA,internalFormat:e.RGBA32F})},"j"),lH=Je(e=>Math.ceil(Math.log2(Math.sqrt(e)))+1,"_e"),cH=Je((e,t,n)=>{const r=Ta(e,La,oH);Ca(e,r);const i=SA(e,t),s=SA(e,t),o=Gl(i,s),a=ts(e,s.handle),l=ts(e,i.handle),c=Gl(a,l),d=Na(e,r,{u_0:t,u_1:n().handle,u_2:i.handle,u_3:0,u_4:0});let u=i;return{step:(h=lH(t))=>{e.viewport(0,0,i.size[0],i.size[1]),e.useProgram(r);for(let g=0;g<h;g++){e.bindFramebuffer(e.FRAMEBUFFER,c());const p=o();u=p===i?s:i,Lo(e,d,{u_2:p.handle,u_1:n().handle,u_4:h-1,u_3:g}),e.drawArrays(e.TRIANGLES,0,6)}},texture:()=>u,destroy:()=>{e.deleteFramebuffer(a),e.deleteFramebuffer(l),e.deleteTexture(s.handle),e.deleteTexture(i.handle)}}},"xe"),dH=`#version 300 es
precision lowp float;vec2 r(vec2 r,vec2 e){return vec2(r.x*e.x-r.y*e.y,r.x*e.y+r.y*e.x);}vec2 r(vec2 r){return r.y=-r.y,r;}vec2 r(vec2 u[8],vec2 i,vec2 o){vec2 t,c=i-o,e=vec2(1,0);for(int i;i<8;++i)t+=r(u[i],e),e=r(e,c);return t;}vec2 r(vec2 e,vec4 r){return(e-r.xy)/r.zw;}uniform float u_c,u_d,u_e,u_f,u_g,u_h,u_9,u_a,u_b;uniform int u_0;uniform lowp sampler2D u_1;uniform lowp usampler2D u_i,u_j;uniform lowp sampler2D u_k;uniform int u_5,u_l;uniform lowp sampler2D u_2;uniform lowp usampler2D u_m,u_n;uniform lowp sampler2D u_o;out vec4 outColor;void main(){uint a=uint(textureSize(u_1,0).x);int d=textureSize(u_j,0).x;ivec2 o=ivec2(gl_FragCoord.xy);if(int(a)*o.y+o.x>=u_0)return;vec3 u=texelFetch(u_k,o,0).xyz;if(u.z>0.)return;vec4 x=texelFetch(u_1,o,0);vec2 i=x.xy,e=x.zw;ivec4 t=ivec4(texelFetch(u_i,o,0));float c=float(t.z)+1.;vec4 v=texelFetch(u_2,ivec2(0),0);uint y=uint(textureSize(u_m,0).x);float p=float(1<<u_l-1);ivec2 m=ivec2(u_5,1),n=ivec2(p*r(i,v));vec2 g=(vec2(n)+.5)/p;ivec2 s=n-ivec2(1);for(int r;r<9;++r){ivec2 t=s+ivec2(r%3,r/3);if(t>>u_l-1!=ivec2(0))continue;uvec2 o=texelFetch(u_n,t,0).xy;for(uint r=o.x;r<o.y;r++){uint n=texelFetch(u_m,ivec2(r%y,r/y),0).x;ivec2 l=ivec2(n%a,n/a);vec2 t=texelFetch(u_1,l,0).xy-i;float v=dot(t,t)+1e-4;if(u_g>0.&&u_9<.5){float i=texelFetch(u_k,l,0).y,r=max(u.y+i+u_h,.01);if(v<r*r){float u=sqrt(v);e-=(r-u)*u_g*i/r*t/u;}}float x=float(texelFetch(u_i,l,0).z)+1.;e-=u_9*u_c*x*c*t/v/u.x;}}vec2 f[8];for(int r;r<8;r++)f[r]=r<u_5?texelFetch(u_o,m*n+ivec2(r,0),0).xy:vec2(0);vec2 F=r(r(f,g,r(i,v))/v.z);e-=u_9*u_c*F*c/u.x;ivec2 l;for(int a;a<t.z;a++){l=ivec2(texelFetch(u_j,t.xy,0).xy);vec2 r=texelFetch(u_1,l,0).xy-i;r*=1.-(u_f+u.y+texelFetch(u_k,l,0).y)/(length(r)+1e-4);float o=float(texelFetch(u_i,l,0).z)+1.,v=u_9*u_e*c*o/(min(c,o)*(o+c));if(e+=v*r/u.x,t.x+=1,t.x>=d)t.x=0,t.y+=1;}e=u_a*(e-u_9*u_d*i);float h=dot(e,e);if(h>u_b)e*=sqrt(u_b/h);outColor=vec4(i+e,e);}`,uH=Je((e,t,n,r,i,{handle:s},{handle:o},{N:a,bodyTexture:l,nodeTexture:c,topologyTexture:d,propertyTexture:u},{charge:h,gravity:g,inertia:p,edgeStrength:m,edgeLength:f,elasticity:y,margin:_,maxDisplacement:v})=>{const x=Ta(e,La,dH);Ca(e,x);const b=rs(e,{type:e.FLOAT,size:l.size,data:new Float32Array(l.data.buffer.slice(0)),format:e.RGBA,internalFormat:e.RGBA32F}),w=Gl(l,b),S=ts(e,b.handle),A=ts(e,l.handle),C=Gl(S,A),k=Na(e,x,{u_9:1,u_a:p,u_b:v**2,u_c:h,u_d:g,u_e:m,u_f:f,u_g:y,u_h:_,u_0:a,u_1:l.handle,u_i:c.handle,u_j:d.handle,u_k:u.handle,u_5:n,u_l:t,u_2:r().handle,u_m:i().handle,u_n:s,u_o:o});let T=l;return{step:M=>{e.viewport(0,0,l.size[0],l.size[1]),e.useProgram(x),e.bindFramebuffer(e.FRAMEBUFFER,C());const D=w();T=D===l?b:l,Lo(e,k,{u_9:M,u_1:D.handle,u_2:r().handle,u_m:i().handle}),e.drawArrays(e.TRIANGLES,0,6)},texture:()=>T,destroy:()=>{e.deleteFramebuffer(S),e.deleteFramebuffer(A),e.deleteTexture(b.handle)}}},"me"),hH=Je((e,t)=>q7([t,1],1<<e),"ve"),CF=Je((e,t,n,r)=>{const i=hH(t,n),s=new Float32Array(2*i[0]*i[1]);return r&&r.forEach((o,a)=>s[a]=o),rs(e,{size:i,data:s,type:e.FLOAT,format:e.RG,internalFormat:e.RG32F})},"H"),gH=`#version 300 es
precision lowp float;vec2 v(vec2 v,vec2 t){return vec2(v.x*t.x-v.y*t.y,v.x*t.y+v.y*t.x);}vec2 t(vec2 t,vec2 v){return vec2(dot(t,v),t.y*v.x-t.x*v.y)/dot(v,v);}vec2 v(vec2 v){return t(vec2(1,0),v);}const float f[64]=float[64](1.,1.,1.,1.,1.,1.,1.,1.,1.,2.,3.,4.,5.,6.,7.,8.,1.,3.,6.,10.,15.,21.,28.,36.,1.,4.,10.,20.,35.,56.,84.,120.,1.,5.,15.,35.,70.,126.,210.,330.,1.,6.,21.,56.,126.,252.,462.,792.,1.,7.,28.,84.,210.,462.,924.,1716.,1.,8.,36.,120.,330.,792.,1716.,3432.);uniform int u_5,u_6;uniform lowp sampler2D u_7,u_8;out vec2 outColor;void main(){float i=float(1<<u_6);ivec2 l=ivec2(u_5,1),c=ivec2(gl_FragCoord.xy)/l;vec2 d=(vec2(c)+.5)/i;uint o=uint(gl_FragCoord.x)%uint(u_5);if(u_6>2){ivec2 y=c>>1;vec2 e=(vec2(c&65534)+1.)/i-d,t=vec2(1,0);for(uint c;c<uint(u_5-int(o));++c)outColor+=f[c+(o<<3)]*v(texelFetch(u_7,l*y+ivec2(c+o,0),0).xy,t),t=v(t,e);}ivec2 y=(c&65534)-2;for(int r;r<36;r++){ivec2 u=y+ivec2(r%6,r/6);vec2 x=vec2(u-c);if(dot(x,x)<=2.||u>>u_6!=ivec2(0))continue;vec2 n=(vec2(u)+.5)/i-d,e=vec2(1,0);for(uint t;t<o;++t)e=v(e,-n);vec2 m=v(n),a;for(uint c;c<uint(u_5);++c){if(dot(e,e)<1e-20)break;a+=f[c+(o<<3)]*t(texelFetch(u_8,l*u+ivec2(c,0),0).xy,e),e=v(e,n);}outColor+=v(a,m);}}`,pH=Je((e,t,n,r)=>{const i=Ta(e,La,gH);Ca(e,i);const s=Array.from({length:t},(l,c)=>CF(e,c,n)),o=s.map(({handle:l})=>ts(e,l)),a=Na(e,i,{u_5:n,u_6:t-1,u_7:s[0].handle,u_8:r(0).handle});return{step:()=>{e.useProgram(i);for(let l=2;l<t;l++){const{handle:c}=s[l-1],d=r(l);e.viewport(0,0,d.size[0],d.size[1]),e.bindFramebuffer(e.FRAMEBUFFER,o[l]),Lo(e,a,{u_6:l,u_7:c,u_8:d.handle}),e.drawArrays(e.TRIANGLES,0,6)}},texture:l=>s[l],destroy:()=>{o.forEach(l=>e.deleteFramebuffer(l)),s.forEach(({handle:l})=>e.deleteTexture(l))}}},"pe"),mH=`#version 300 es
precision lowp float;vec2 e(vec2 e,vec2 u){return vec2(e.x*u.x-e.y*u.y,e.x*u.y+e.y*u.x);}vec2 x(vec2 u,vec2 e){return vec2(dot(u,e),u.y*e.x-u.x*e.y)/dot(e,e);}const vec2 u[8]=vec2[8](vec2(1,0),vec2(-1,0),vec2(2,0),vec2(-6,0),vec2(24,0),vec2(-120,0),vec2(720,0),vec2(-5040,0));const float n[16]=float[16](1.,1.,2.,6.,24.,120.,720.,5040.,40320.,362880.,3628800.,39916800.,479001600.,6.227021e9,8.717829e1,1.3076744e12);vec2 e(vec2 u,vec4 e){return(u-e.xy)/e.zw;}uniform int u_5,u_l,u_6;uniform lowp sampler2D u_p,u_2;uniform lowp usampler2D u_m;uniform lowp sampler2D u_k,u_1;uniform lowp usampler2D u_n;out vec2 outColor;void main(){float i=float(1<<u_6);ivec2 o=ivec2(u_5,1),t=ivec2(gl_FragCoord.xy)/o;vec2 l=(vec2(t)+.5)/i;uint c=uint(gl_FragCoord.x)%uint(u_5);if(u_6==u_l-1){uint u=uint(textureSize(u_1,0).x),x=uint(textureSize(u_m,0).x);vec4 i=texelFetch(u_2,ivec2(0),0);uvec2 n=texelFetch(u_n,t,0).xy;for(uint t=n.x;t<n.y;t++){uint v=texelFetch(u_m,ivec2(t%x,t/x),0).x;ivec2 r=ivec2(v%u,v/u);vec2 d=l-e(texelFetch(u_1,r,0).xy,i),o=vec2(1,0);for(uint u;u<c;++u)o=e(o,d);outColor+=e(vec2(texelFetch(u_k,r,0).x,0),o);}}else for(int v;v<4;++v){ivec2 d=2*t+ivec2(v&1,v>>1);vec2 f=(vec2(d)+.5)/i/2.-l,r=vec2(1,0),y;for(uint t;t<=c;++t)y+=x(e(texelFetch(u_p,o*d+ivec2(c-t,0),0).xy,r),u[c-t]*n[t]),r=e(r,f);outColor+=e(y,u[c]);}}`,fH=Je((e,t,n,r,i,{handle:s},o,{handle:a})=>{const l=Ta(e,La,mH);Ca(e,l);const c=Array.from({length:t},(h,g)=>CF(e,g,n)),d=c.map(({handle:h})=>ts(e,h)),u=Na(e,l,{u_5:n,u_l:t,u_6:t-1,u_p:c[0].handle,u_2:r().handle,u_m:i().handle,u_k:s,u_1:o().handle,u_n:a});return{step:()=>{e.useProgram(l);for(let h=t-1;h>=2;h--){const{handle:g}=c[(h+1)%t],p=c[h];e.viewport(0,0,p.size[0],p.size[1]),e.bindFramebuffer(e.FRAMEBUFFER,d[h]),Lo(e,u,{u_2:r().handle,u_m:i().handle,u_1:o().handle,u_6:h,u_p:g}),e.drawArrays(e.TRIANGLES,0,6)}},texture:h=>c[h],destroy:()=>{d.forEach(h=>e.deleteFramebuffer(h)),c.forEach(({handle:h})=>e.deleteTexture(h))}}},"Fe"),_H=`#version 300 es
uint u(uint u){return u&=65535u,u=(u|u<<8)&16711935u,u=(u|u<<4)&252645135u,u=(u|u<<2)&858993459u,u=(u|u<<1)&1431655765u,u;}uint u(uvec2 n){return u(n.y)<<1|u(n.x);}uniform uint u_0;uniform lowp usampler2D u_q,u_m;out uvec2 outColor;uint u(uint o,uint e,uint i){uint u,n=u_0;for(;u<n;){uint t=u+n>>1,r=texelFetch(u_m,ivec2(t%i,t/i),0).x;texelFetch(u_q,ivec2(r%e,r/e),0).x<o?u=t+1u:n=t;}return u;}void main(){uint n=uint(textureSize(u_q,0).x),e=uint(textureSize(u_m,0).x),i=u(uvec2(gl_FragCoord.xy));outColor=uvec2(u(i,n,e),u(i+1u,n,e));}`,yH=Je(e=>1<<e-1,"Ee"),vH=Je((e,t,n)=>{const r=yH(t),i=new Uint32Array(2*r**2);return n&&n.forEach((s,o)=>i[o]=s),rs(e,{size:[r,r],data:i,type:e.UNSIGNED_INT,format:e.RG_INTEGER,internalFormat:e.RG32UI})},"Te"),xH=Je((e,t,n,{handle:r},i)=>{const s=Ta(e,La,_H);Ca(e,s);const o=vH(e,n),a=ts(e,o.handle),l=Na(e,s,{u_0:t,u_q:r,u_m:i()});return{step:()=>{e.viewport(0,0,o.size[0],o.size[1]),e.useProgram(s),e.bindFramebuffer(e.FRAMEBUFFER,a),Lo(e,l,{u_m:i().handle}),e.drawArrays(e.TRIANGLES,0,6)},texture:()=>o,destroy:()=>{e.deleteFramebuffer(a),e.deleteTexture(o.handle)}}},"Ae"),bH=`#version 300 es
precision lowp float;uint u(uint u){return u&=65535u,u=(u|u<<8)&16711935u,u=(u|u<<4)&252645135u,u=(u|u<<2)&858993459u,u=(u|u<<1)&1431655765u,u;}uint u(uvec2 e){return u(e.y)<<1|u(e.x);}vec2 u(vec2 e,vec4 u){return(e-u.xy)/u.zw;}uniform int u_0,u_l;uniform lowp sampler2D u_2,u_1;out uint outColor;void main(){ivec2 e=ivec2(gl_FragCoord.xy);if(textureSize(u_1,0).x*e.y+e.x>=u_0)return;vec4 t=texelFetch(u_2,ivec2(0),0);vec2 o=u(texelFetch(u_1,e,0).xy,t);outColor=u(uvec2(float(1<<u_l-1)*o));}`,wH=Je(e=>Math.ceil(Math.sqrt(e)),"Re"),EH=Je((e,t,n)=>{const r=wH(t),i=new Uint32Array(r**2).fill(4294967295);return n&&n.forEach((s,o)=>i[o]=s),rs(e,{size:[r,r],data:i,type:e.UNSIGNED_INT,format:e.RED_INTEGER,internalFormat:e.R32UI})},"Me"),SH=Je((e,t,n,r,i)=>{const s=Ta(e,La,bH);Ca(e,s);const o=EH(e,t),a=ts(e,o.handle),l=Na(e,s,{u_0:t,u_l:n,u_2:r().handle,u_1:i().handle});return{step:()=>{e.viewport(0,0,o.size[0],o.size[1]),e.useProgram(s),e.bindFramebuffer(e.FRAMEBUFFER,a),Lo(e,l,{u_2:r().handle,u_1:i().handle}),e.drawArrays(e.TRIANGLES,0,6)},texture:()=>o,destroy:()=>{e.deleteFramebuffer(a),e.deleteTexture(o.handle)}}},"be"),AH=`#version 300 es
precision highp int;uniform uint u_r,u_s;uniform highp usampler2D u_u,u_t;out uint outColor;uint u(uint u,uint e,bool o,uint t){uint i=u<4294967295u?texelFetch(u_u,ivec2(u%t,u/t),0).x:u,n=e<4294967295u?texelFetch(u_u,ivec2(e%t,e/t),0).x:e;if(o)return i<n?u:e;return i>n?u:e;}void main(){uint e=uint(textureSize(u_t,0).x),s=uint(textureSize(u_u,0).x);uvec2 t=uvec2(gl_FragCoord.xy);uint c=texelFetch(u_t,ivec2(t),0).x,i=uint(t.x+e*t.y),o=i^1u<<u_r-u_s,x=texelFetch(u_t,ivec2(o%e,o/e),0).x;bool n=(i>>u_r-u_s&1u)==0u;(i>>u_r&2u)==2u&&(n=!n),outColor=u(c,x,n,s);}`,kH=Je(e=>Math.ceil(Math.sqrt(1<<Math.ceil(Math.log2(e)))),"Ge"),AA=Je((e,t)=>{const n=kH(t.length),r=new Uint32Array(n**2).fill(4294967295);return t&&t.forEach((i,s)=>r[s]=i),rs(e,{size:[n,n],data:r,type:e.UNSIGNED_INT,format:e.RED_INTEGER,internalFormat:e.R32UI})},"V"),CH=Je(e=>Math.max(0,Math.ceil(Math.log2(e))),"Le"),TH=Je(e=>e*(e+1)/2,"Ie"),NH=Je((e,t,n)=>{const r=Ta(e,La,AH);Ca(e,r);const i=Array.from({length:t},(f,y)=>y),s=AA(e,i),o=AA(e,i),a=Gl(s,o),l=ts(e,o.handle),c=ts(e,s.handle),d=Gl(l,c),u=Na(e,r,{u_r:0,u_s:0,u_t:s.handle,u_u:n.handle}),h=CH(t);let g=0,p=0,m=s;return{step:(f=TH(h))=>{e.useProgram(r),e.viewport(0,0,s.size[0],s.size[1]);for(let y=0;y<f;y++){e.bindFramebuffer(e.FRAMEBUFFER,d());const _=a();m=_===s?o:s,Lo(e,u,{u_r:g,u_s:p,u_t:_.handle}),e.drawArrays(e.TRIANGLES,0,6),p=(p+1)%(g+1),p===0&&(g=(g+1)%h)}},texture:()=>m,destroy:()=>{e.deleteFramebuffer(l),e.deleteFramebuffer(c),e.deleteTexture(o.handle),e.deleteTexture(s.handle)}}},"Ue"),LH=Je(e=>{let t;return()=>t||e().finally(()=>t=void 0)},"Ne"),IH=Je((e,t)=>Math.max(.1,1-(e/Math.max(1,t-20))**7.39),"K"),PH=Je((e,t=25,n=24e3)=>{const r=(n-t)/(t-1);return Math.ceil(t*r*4/(r+e))},"J"),kA={charge:10,edgeStrength:.5,edgeLength:30,elasticity:.9,margin:1,gravity:.002,inertia:.9,maxDisplacement:1e3,steps:300},MH=Je((e,t,n)=>{let[r,i]=[0,0];const s=tH(e),o=Je(()=>{e.bindBuffer(e.ARRAY_BUFFER,s),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0);for(let l=0;l<t;l++,r++)if(!n(r))return!0},"i"),a=Je(l=>{o()?l(r):i=requestAnimationFrame(()=>a(l))},"a");return{start:LH(()=>new Promise(l=>(r=0)||a(l))),step:o,stop:()=>cancelAnimationFrame(i)}},"Q"),u0=Je((e,t,n)=>{var r,i;let{bodyTexture:s}=t;const{N:o,propertyTexture:a}=t,{steps:l,batch:c}=n,d=(r=n.order)!=null?r:4;if(d<2||d>8)throw new Error("Order must be between 2 and 8");const u=Math.max(1,(i=n.depth)!=null?i:Math.ceil(Math.log2(o)/2)),{step:h,texture:g,destroy:p}=cH(e,o,()=>s),{step:m,texture:f,destroy:y}=SH(e,o,u,g,()=>s),{step:_,texture:v,destroy:x}=NH(e,o,f()),{step:b,texture:w,destroy:S}=xH(e,o,u,f(),v),{step:A,texture:C,destroy:k}=fH(e,u,d,g,v,a,()=>s,w()),{step:T,texture:M,destroy:D}=pH(e,u,d,C),{step:B,texture:I,destroy:N}=uH(e,u,d,g,v,w(),M(u-1),t,n);return yt(be({},MH(e,c??PH(o),V=>(s=I(),h(),m(),_(),b(),A(),T(),B(IH(V,l)),V<l))),{destroy:()=>{p(),y(),x(),S(),k(),D(),N()}})},"qe"),CA=0,TF=typeof window>"u",FH=typeof performance<"u"&&performance.now?performance:Date,RH=TF?e=>{const t=FH.now(),n=Math.max(0,16-(t-CA)),r=setTimeout(()=>e(t+n),n);return CA=t+n,r}:window.requestAnimationFrame,DH=TF?e=>clearTimeout(e):window.cancelAnimationFrame;function NF(e,t,n){for(let r=0;r<e.length;r++){const i=e[r];i.x=t[r],i.y=n[r]}}Je(NF,"defaultUpdate");var zH=Je(()=>{},"noop"),h0={movementRatio:7e-8,surfaceRatio:.0025},Uy=class{constructor(e={}){this.onUpdate=Je(t=>{},"onUpdate"),this.update=NF,this.nextTick=RH,this.cancelTick=DH,this.onEnd=zH,this.charge=10,this.maxIterations=200,this.minMovement=.1,this.edgeLength=30,this.edgeStrength=3,this.friction=.1,this.elasticity=.9,this.margin=1,this.cx=void 0,this.cy=void 0,this.gravity=.01,this.theta=.34,this.batch=void 0,this.inertia=.9,this.integrator=0,this.multilevel=!1,this.placement="none",this.placementOffset=10,this.alignSiblings=!1,this.bucketSize=void 0,this.maxDisplacement=1e3,this.siblingsMinAngle=0,this.siblingsOffset=.15,this.steps=200,this.scaling=1,this.defaultRadius=1,this.autoStop=h0,this.gpuAcceleration=!0,this.barnesHutOptimization=!0,"autoStop"in e?e.autoStop&&(typeof e.autoStop=="boolean"?e.autoStop=h0:e.autoStop=be(be({},e.autoStop),h0)):e.steps;for(const t in e)e[t]===void 0&&t!=="order"&&t!=="depth"||(this[t]=e[t])}};Je(Uy,"Settings");var TA=class{constructor(e){this.promise=new Promise(e)}then(e){return this.promise.then(e)}stop(){return this.simulation.stop(),this}get iterations(){return this.simulation.iterations()}};function pg(e,t,n={}){var r;let i,s;t.getExtension("OES_texture_float_linear")&&t.getExtension("EXT_color_buffer_float")||(r=t.getExtension("WEBGL_lose_context"))==null||r.loseContext();let o=new Uy(be(be({},kA),n));const a=e.nodes.length,l=n.cx||e.nodes.reduce((m,f)=>m+(f.x||0),0)/a,c=n.cy||e.nodes.reduce((m,f)=>m+(f.y||0),0)/a,d=[l,c],u=Je(m=>{if(!i)throw new Error("No graph has been set");const{size:f}=i.bodyTexture;if(f[0]*f[1]<=1)return{X:[0],Y:[0]};const y=new Float32Array(4*f[0]*f[1]);t.readPixels(0,0,f[0],f[1],t.RGBA,t.FLOAT,y),m&&(h(),g());const _=y.filter((x,b)=>b%4==0).map(x=>x+l),v=y.filter((x,b)=>b%4==1).map(x=>x+c);return{X:_,Y:v}},"readLayoutData"),h=Je(()=>{s&&(s.stop(),s.destroy(),s=void 0)},"simulationCleanup"),g=Je(()=>{i&&(EA(t,i),i=void 0)},"graphLayoutCleanup"),p={setOptions:(m={})=>(o=new Uy(be(be({},kA),m)),i&&(h(),s=u0(t,i,o)),p),setGraph:(m={nodes:[],edges:[]})=>(i&&EA(t,i),i=wA(t,bA(xA(m),d)),o&&(h(),s=u0(t,i,o)),p),start:()=>{if(!s)throw new Error("No graph has been set");return s.start().finally(()=>{var m;return(m=n.onEnd)==null?void 0:m.call(n,1)}),p},stop:()=>(s&&s.stop(),p),step:()=>{if(!s)throw new Error("No graph has been set");return s.step(),p},data:m=>u(m),iterations:()=>1};return i=wA(t,bA(xA(e),d)),s=u0(t,i,o),p}/**
* @preserve
* @linkurious/force-layout@0.7.0
* Ogma general-purpose force-directed layout
*/function NA(){var e=(()=>{var t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,s=(F,j)=>t(F,"name",{value:j,configurable:!0}),o={};((F,j)=>{for(var R in j)t(F,R,{get:j[R],enumerable:!0})})(o,{IntegratorType:()=>xn,default:()=>ht});var a=class{constructor(F){let j=l();this.c=1,this.s0=j(" "),this.s1=j(" "),this.s2=j(" "),this.s0-=j(String(F)),this.s0<0&&(this.s0+=1),this.s1-=j(String(F)),this.s1<0&&(this.s1+=1),this.s2-=j(F),this.s2<0&&(this.s2+=1),j=null}next(){return()=>{const F=2091639*this.s0+23283064365386963e-26*this.c;return this.s0=this.s1,this.s1=this.s2,this.s2=F-(this.c=0|F)}}nextDouble(){const F=this.next();return()=>F()+11102230246251565e-32*(2097152*F()|0)}nextInt32(){const F=this.next();return()=>4294967296*F()|0}};function l(){let F=4022871197;return j=>{j=j.toString();for(let R=0;R<j.length;R++){F+=j.charCodeAt(R);let O=.02519603282416938*F;F=O>>>0,O-=F,O*=F,F=O>>>0,O-=F,F+=4294967296*O}return 23283064365386963e-26*(F>>>0)}}function c(F){return new a(F.toString()).next()}s(a,"Alea"),s(l,"Mash"),s(c,"impl");var d=c(42);function u(F){d=c(F)}function h(){return 1e-6*(d()-.5)}function g(F,j,{sources:R,targets:O,X:W,Y:J,R:X,fx:ee,fy:K,degrees:H,weights:q},{edgeStrength:re,edgeLength:ue}){for(let fe=0;fe<j.length;fe++){const ie=j[fe],ge=R[ie],Se=O[ie],Le=1,Ae=H[ge]+Le,we=H[Se]+Le,Ie=re*q[ie];let xe=W[Se]+ee[Se]-W[ge]-ee[ge]||h(),ke=J[Se]+K[Se]-J[ge]-K[ge]||h();const qe=xe*xe+ke*ke,Qe=Math.sqrt(qe),rt=ue+X[ge]+X[Se];if(Qe<=rt)continue;const et=rt-Qe,bt=1/Math.min(Ae,we),Tt=Math.min(1,F*Ie*(et*et/qe)*bt);xe*=Tt,ke*=Tt;const Rt=we/(we+Ae);ee[ge]+=xe*Rt,K[ge]+=ke*Rt,ee[Se]-=xe*(1-Rt),K[Se]-=ke*(1-Rt)}}s(u,"setSeed"),s(h,"randomize"),s(g,"attraction");var p=s((F,{edgeIds:j,sources:R,targets:O,degrees:W,weights:J})=>{for(let X=0;X<F.length;X++){const{source:ee,target:K,weight:H=1}=F[X];R[X]=ee,O[X]=K,J[X]=H,W[ee]++,W[K]++,j[X]=X,J[X]=H===void 0?1:H}},"initialize");function m(F,j,{X:R,Y:O,fx:W,fy:J},{gravity:X,cx:ee,cy:K}){const H=j.length;for(let q=0;q<H;q++){const re=j[q],ue=ee-R[re]||h(),fe=K-O[re]||h(),ie=X*F;W[re]+=ue*ie,J[re]+=fe*ie}}g.initialize=p,s(m,"center");var f=s((F,j,R)=>{const{X:O,Y:W}=j;let J=R.cx,X=R.cy;const ee=F.length;if(J===void 0||X===void 0){J=X=0;for(let K=0;K<ee;K++)J+=O[K],X+=W[K];J/=ee,X/=ee}R.cx=J,R.cy=X},"initialize");m.initialize=f;var y=class{constructor(F,j,R,O){this.left=null,this.right=null,this.data=null,this.code=F,this.data=j,this.left=R,this.right=O}};function _(F,j,R,O,W){const J=new y(null,null,null,null),X=[J],ee=[O,W];for(;X.length!==0;){const K=ee.pop(),H=ee.pop(),q=X.pop();if(K-H==0)q.code=R[H],q.data=F[j[H]];else{const re=b(j,R,H,K);q.code=re,H<=re&&(q.left=new y(null,null,null,null),X.push(q.left),ee.push(H,re)),K>re&&(q.right=new y(null,null,null,null),X.push(q.right),ee.push(re+1,K))}}return J}function v(F,j,R,O,W,J){const X=new y(null,null,null,null),ee=[X],K=[O,W];for(;ee.length!==0;){const H=K.pop(),q=K.pop(),re=ee.pop();if(H-q<J){const ue=new Array(H-q+1);for(let fe=q,ie=0;fe<=H;fe++,ie++)ue[ie]=F[j[fe]];re.code=R[q],re.data=ue}else{const ue=b(j,R,q,H);re.code=ue,q<=ue&&(re.left=new y(null,null,null,null),ee.push(re.left),K.push(q,ue)),H>ue&&(re.right=new y(null,null,null,null),ee.push(re.right),K.push(ue+1,H))}}return X}s(y,"Node"),s(_,"buildIterative"),s(v,"buildIterativeBuckets");var x=Math.clz32||s(function(j){let R=-2147483648;for(let O=0;O<31;O+=1){if(R&j)return O;R>>>=1}return 32},"clz");function b(F,j,R,O){const W=j[F[R]],J=j[F[O]];if(W===J)return R;const X=x(W^J);let ee,K,H,q=R,re=O-R;do re=re+1>>1,ee=q+re,ee<O&&(K=j[F[ee]],H=x(W^K),H>X&&(q=ee));while(re>1);return q}function w(F,j){let R=F^j,O=65535^R,W=65535^(F|j),J=F&(65535^j),X=R|O>>1,ee=R>>1^R,K=W>>1^O&J>>1^W,H=R&W>>1^J>>1^J;R=X,O=ee,W=K,J=H,X=R&R>>2^O&O>>2,ee=R&O>>2^O&(R^O)>>2,K^=R&W>>2^O&J>>2,H^=O&W>>2^(R^O)&J>>2,R=X,O=ee,W=K,J=H,X=R&R>>4^O&O>>4,ee=R&O>>4^O&(R^O)>>4,K^=R&W>>4^O&J>>4,H^=O&W>>4^(R^O)&J>>4,R=X,O=ee,W=K,J=H,K^=R&W>>8^O&J>>8,H^=O&W>>8^(R^O)&J>>8,R=K^K>>1,O=H^H>>1;let q=F^j,re=O|65535^(q|R);return q=16711935&(q|q<<8),q=252645135&(q|q<<4),q=858993459&(q|q<<2),q=1431655765&(q|q<<1),re=16711935&(re|re<<8),re=252645135&(re|re<<4),re=858993459&(re|re<<2),re=1431655765&(re|re<<1),(re<<1|q)>>>0}s(b,"findSplit"),s(w,"hilbert");var S=[0,1],A=[0,2];for(let F=4;F<65535;F<<=2)for(let j=0,R=S.length;j<R;j++)S.push(S[j]|F),A.push((S[j]|F)<<1);function C(F,j){return(A[255&j]|S[255&F])+65536*(A[j>>8&255]|S[F>>8&255])+4294967296*(A[j>>16&255]|S[F>>16&255])}s(C,"morton");var k=new Uint32Array(1024);function T(F,j){const R=new Uint32Array(j.length);for(let W=0;W<1024;W++)k[W]=0;const O=255;for(let W=0;W<j.length;W++){const J=j[W];k[J&O]++,k[256+(J>>8&O)]++,k[512+(J>>16&O)]++,k[768+(J>>24&O)]++}for(let W=0;W<4;W++){let J=0,X=0;const ee=256*W;for(let K=0;K<256;K++)J=k[K+ee],k[K+ee]=X,X+=J}for(let W=0;W<j.length;W++){const J=j[W];R[k[J&O]++]=W}for(let W=0;W<j.length;W++){const J=R[W],X=j[J];F[k[256+(X>>8&O)]++]=J}for(let W=0;W<j.length;W++){const J=F[W],X=j[J];R[k[512+(X>>16&O)]++]=J}for(let W=0;W<j.length;W++){const J=R[W],X=j[J];F[k[768+(X>>24&O)]++]=J}}s(T,"radixSort");var M=class{constructor(F,{getX:j,getY:R,bucketSize:O=0,sfc:W=1}={}){this.bucketSize=0,this._root=null;const J=F.length,X=new Uint32Array(J);let ee=1/0,K=1/0,H=-1/0,q=-1/0;this._x=j,this._y=R;const re=W===1?w:C;this._project=re;const ue=new Uint32Array(J);for(let ge=0;ge<J;ge++){const Se=F[ge],Le=j(Se),Ae=R(Se);Le<ee&&(ee=Le),Ae<K&&(K=Ae),Le>H&&(H=Le),Ae>q&&(q=Ae),ue[ge]=ge}this._minX=ee,this._minY=K,this._maxX=H,this._maxY=q;const fe=65535/Math.max(H-ee,1),ie=65535/Math.max(q-K,1);this._hw=fe,this._hh=ie;for(let ge=0;ge<J;ge++){const Se=F[ge];X[ge]=re(fe*(j(Se)-ee),ie*(R(Se)-K))}T(ue,X),this._root=O===0?_(F,ue,X,0,J-1):v(F,ue,X,0,J-1,O),this.bucketSize=O}get root(){return this._root}inOrder(F,j){let R=this._root;const O=[];let W=!1;for(;!W;)if(R)O.push(R),R=R.left;else if(O.length!==0){if(R=O.pop(),F.call(j,R))break;R=R.right}else W=!0;return this}preOrder(F,j){const R=[this._root];for(;R.length!==0;){const O=R.pop();F.call(j,O)||(O.right&&R.push(O.right),O.left&&R.push(O.left))}return this}postOrder(F,j){const R=[];let O,W=this._root;do{for(;W;)W.right&&R.push(W.right),R.push(W),W=W.left;W=R.pop(),O=R.length-1,W.right&&R[O]===W.right?(R[O]=W,W=W.right):(F.call(j,W),W=null)}while(R.length!==0);return this}map(F,j){const R=[];return this.inOrder(O=>{R.push(F.call(j,O))}),R}height(){return D(this._root)}toString(F=j=>j.code.toString()){const j=[];return B(this._root,"",!0,R=>j.push(R),F),j.join("")}size(){let F=0;return this.preOrder(()=>{F++}),F}destroy(){return this._root=null,this}};function D(F){return F?1+Math.max(D(F.left),D(F.right)):0}function B(F,j,R,O,W){if(F){O(j+(R?"^-- ":"|-- ")+W(F)+`
`);const J=j+(R?"    ":"|   ");F.left&&B(F.left,J,!1,O,W),F.right&&B(F.right,J,!0,O,W)}}function I(F){for(let j=F.length-1;j>=0;j--){let R=Math.floor(Math.random()*(j+1));R=Math.max(Math.min(R,j),0);const O=F[j];F[j]=F[R],F[R]=O}return F}s(M,"BVH"),s(D,"treeHeight"),s(B,"row"),s(I,"shuffle");var N,V,$,Q,se,te,de,Ee,oe,_e=s(F=>F.x,"getX"),De=s(F=>F.y,"getY"),We=s(F=>F.r,"getR");function Ye(F,j=_e,R=De,O=We){const W=I(F.slice()),J=W.length;let X,ee=[],K=0;for(;K<J;){const H=W[K];X&&Ke(X,j(H),R(H),O(H))?K++:(ee=pe(ee,H,j,R,O),X=dt(ee,j,R,O),K=0)}return X}function pe(F,j,R,O,W){const J=R(j),X=O(j),ee=W(j),K={x:J,y:X,r:ee};if(tt(K,F,R,O,W))return[j];for(let H=0;H<F.length;++H){const q=F[H],re=R(q),ue=O(q),fe=W(q);if(!ye(K,re,ue,fe)&&tt(Y(re,ue,fe,J,X,ee),F,R,O,W))return[F[H],j]}for(let H=0;H<F.length-1;H++)for(let q=H+1;q<F.length;q++){const re=F[H],ue=F[q],fe=R(re),ie=O(re),ge=W(re),Se=R(ue),Le=O(ue),Ae=W(ue);if(!ye(Y(fe,ie,ge,Se,Le,Ae),J,X,ee)&&!ye(Y(fe,ie,ge,J,X,ee),Se,Le,Ae)&&!ye(Y(Se,Le,Ae,J,X,ee),fe,ie,ge)&&tt(ne(fe,ie,ge,Se,Le,Ae,J,X,ee),F,R,O,W))return[F[H],F[q],j]}throw new Error}function ye(F,j,R,O){const W=F.r-O,J=j-F.x,X=R-F.y;return W>=0&&W*W>J*J+X*X}function Ke(F,j,R,O){const W=F.r-O+1e-6,J=j-F.x,X=R-F.y;return W>0&&W*W>J*J+X*X}function tt(F,j,R,O,W){for(let J=0;J<j.length;++J){const X=j[J];if(!Ke(F,R(X),O(X),W(X)))return!1}return!0}function dt(F,j,R,O){return F.length===1?it(j(F[0]),R(F[0]),O(F[0])):F.length===2?Y(j(F[0]),R(F[0]),O(F[0]),j(F[1]),R(F[1]),O(F[1])):ne(j(F[0]),R(F[0]),O(F[0]),j(F[1]),R(F[1]),O(F[1]),j(F[2]),R(F[2]),O(F[2]))}function it(F,j,R){return{x:F,y:j,r:R}}function Y(F,j,R,O,W,J){const X=O-F,ee=W-j,K=J-R,H=Math.sqrt(X*X+ee*ee);return{x:(F+O+X/H*K)/2,y:(j+W+ee/H*K)/2,r:(H+R+J)/2}}function ne(F,j,R,O,W,J,X,ee,K){const H=F-O,q=F-X,re=j-W,ue=j-ee,fe=J-R,ie=K-R,ge=F*F+j*j-R*R,Se=ge-O*O-W*W+J*J,Le=ge-X*X-ee*ee+K*K,Ae=q*re-H*ue,we=(re*Le-ue*Se)/(2*Ae)-F,Ie=(ue*fe-re*ie)/Ae,xe=(q*Se-H*Le)/(2*Ae)-j,ke=(H*ie-q*fe)/Ae,qe=Ie*Ie+ke*ke-1,Qe=2*(R+we*Ie+xe*ke),rt=we*we+xe*xe-R*R,et=-(qe?(Qe+Math.sqrt(Qe*Qe-4*qe*rt))/(2*qe):rt/Qe);return{x:F+we+Ie*et,y:j+xe+ke*et,r:et}}function ae(F,j,R,{X:O,Y:W,R:J,fx:X,fy:ee,bucketSize:K},{elasticity:H}){if(H===0)return R;R||(R=new M(j,{getX:N,getY:V,bucketSize:K})).postOrder(Q);for(let q=0;q<j.length;q++)te=j[q],de=O[te]+X[te],Ee=W[te]+ee[te],oe=J[te],R.preOrder(se);return R}s(Ye,"med"),s(pe,"extend"),s(ye,"contains"),s(Ke,"containsWeak"),s(tt,"containsWeakAll"),s(dt,"enclose"),s(it,"from1"),s(Y,"from2"),s(ne,"from3"),s(ae,"collisionForce");var ce,he,me,Me,Ce,Te,ot,st,It,Pt=s(({X:F,Y:j,R,bucketSize:O})=>W=>{let J,X,ee,K;const H=W.data;if(H!==null)if(O!==0){const q=Ye(H,N,V,$);J=q.x,X=q.y,ee=q.r}else{const q=H;J=F[q],X=j[q],ee=R[q]}else if(W.left&&W.right){const q=W.left.cx,re=W.left.cy,ue=W.right.cx,fe=W.right.cy,ie=W.left.r,ge=W.right.r,Se=ue-q,Le=fe-re,Ae=ge-ie,we=Math.sqrt(Se*Se+Le*Le);J=(q+ue+Se/we*Ae)/2,X=(re+fe+Le/we*Ae)/2,ee=(we+ie+ge)/2}else K=W.left||W.right,K&&(J=K.cx,X=K.cy,ee=K.r);W.cx=J,W.cy=X,W.r=ee},"getMeasureBodies"),Mt=s(({X:F,Y:j,R,fx:O,fy:W,bucketSize:J},{elasticity:X,margin:ee})=>K=>{const H=K.data;if(H===null){const q=K.cx-de,re=K.cy-Ee,ue=K.r+oe;return q*q+re*re>ue*ue}if(J!==0){const q=H;for(let re=0;re<q.length;re++){const ue=q[re];if(ue>te){const fe=R[ue];let ie=de-F[ue]-O[ue],ge=Ee-j[ue]-W[ue];const Se=oe+fe+ee;let Le=ie*ie+ge*ge;if(Le<Se*Se){ie===0&&(ie=h(),Le+=ie*ie),ge===0&&(ge=h(),Le+=ge*ge);const Ae=Math.sqrt(Le),we=(Se-Ae)*X/Ae,Ie=fe/Se;O[te]+=ie*we*Ie,W[te]+=ge*we*Ie,O[ue]-=ie*we*(1-Ie),W[ue]-=ge*we*(1-Ie)}}}}else{const q=K.data;if(q>te){const re=R[q];let ue=de-F[q],fe=Ee-j[q];const ie=oe+re+ee;let ge=ue*ue+fe*fe;if(ge<ie*ie){ue===0&&(ue=h(),ge+=ue*ue),fe===0&&(fe=h(),ge+=fe*fe);const Se=Math.sqrt(ge),Le=(ie-Se)*X/Se,Ae=re/ie;O[te]+=ue*Le*Ae,W[te]+=fe*Le*Ae,O[q]-=ue*Le*(1-Ae),W[q]-=fe*Le*(1-Ae)}}}},"getApplyForce"),Ht=s((F,j,R)=>{const{X:O,Y:W,R:J}=j;N=s(X=>O[X],"getX"),V=s(X=>W[X],"getY"),$=s(X=>J[X],"getR"),Q=Pt(j),se=Mt(j,R)},"initialize");function Bt(F,j,{masses:R,X:O,Y:W,fx:J,fy:X},{charge:ee}){const K=j.length;let H,q,re,ue,fe,ie,ge,Se,Le;for(let Ae=0;Ae<K;Ae++){H=j[Ae];for(let we=Ae+1;we<K;we++)if(Ae!==we){if(q=j[we],H===q)continue;re=O[H]-O[q]||h(),ue=W[H]-W[q]||h(),fe=re*re+ue*ue,fe<1&&(fe=Math.sqrt(1*fe)),ie=ee*R[q],ge=F*ie/fe,Se=ee*R[H],Le=F*Se/fe,J[H]+=re*ge,X[H]+=ue*ge,J[q]-=re*Le,X[q]-=ue*Le}}}ae.initialize=Ht,s(Bt,"repulsion"),Bt.initialize=()=>{};var lt=0;function kt(F,j,R,{X:O,Y:W,R:J,bucketSize:X}){lt=F,R===null&&(R=new M(j,{getX:me,getY:Me,bucketSize:X})).postOrder(ce);const ee=j.length;for(let K=0;K<ee;K++)Te=j[K],ot=O[Te],st=W[Te],It=J[Te],R.preOrder(he);return R}s(kt,"repulsion");var jt=s(({fx:F,fy:j,X:R,Y:O,R:W,masses:J,bucketSize:X},{charge:ee,theta:K})=>H=>{let q=0,re=0,ue=ot-H.cx||h(),fe=st-H.cy||h(),ie=ue*ue+fe*fe,ge=It+H.r;const Se=H.data;if(Se!==null){if(Se===Te)return!1;if(X!==0){const Le=Se;for(let Ae=0;Ae<Le.length;Ae++){const we=Le[Ae];we!==Te&&(ue=ot-R[we]||h(),fe=st-O[we]||h(),ie=ue*ue+fe*fe,ge=It+W[we],ie<1&&(ie=Math.sqrt(1*ie)),q=ee*J[we],re=lt*q/ie,F[Te]+=ue*re,j[Te]+=fe*re)}}else ie<1&&(ie=Math.sqrt(1*ie)),q=ee*H.mass,re=lt*q/ie,F[Te]+=ue*re,j[Te]+=fe*re}else{const Le=ge/K;if(ie>Le*Le)return ie<1&&(ie=Math.sqrt(1*ie)),q=ee*H.mass,re=lt*q/ie,F[Te]+=ue*re,j[Te]+=fe*re,!0}},"getApplyForce"),Ft=s(({X:F,Y:j,R,masses:O,bucketSize:W})=>J=>{let X,ee,K=0,H=0,q=0,re=0;const ue=J.data;if(ue!==null)if(W!==0){const fe=ue,ie=Ye(fe,me,Me,Ce);K=ie.x,H=ie.y,q=ie.r;for(let ge=0;ge<fe.length;ge++)re+=O[fe[ge]]}else ee=ue,K=F[ee],H=j[ee],q=R[ee],re=O[ee];else if(J.left&&J.right){const fe=J.left.cx,ie=J.left.cy,ge=J.right.cx,Se=J.right.cy,Le=J.left.r,Ae=J.right.r,we=ge-fe,Ie=Se-ie,xe=Ae-Le,ke=Math.sqrt(we*we+Ie*Ie);K=(fe+ge+we/ke*xe)/2,H=(ie+Se+Ie/ke*xe)/2,q=(ke+Le+Ae)/2,re=J.left.mass+J.right.mass}else X=J.left||J.right,K=X.cx,H=X.cy,q=X.r,re=X.mass;J.cx=K,J.cy=H,J.r=q,J.mass=re},"getAccumulateBodies"),Ct=s((F,j,R)=>{const O=F.length,{X:W,Y:J,R:X,degrees:ee,pinned:K,masses:H,nodeIds:q}=j,{scaling:re,defaultRadius:ue,bucketSize:fe}=R;j.bucketSize=fe===void 0?Math.floor(Math.log(O)):fe;let ie=1/0,ge=1/0,Se=-1/0,Le=-1/0;const Ae=Math.PI*(3-Math.sqrt(5));let we=0;for(let Ie=0;Ie<F.length;Ie++){const xe=F[Ie];let{x:ke,y:qe,r:Qe}=xe;const{mass:rt}=xe;if(isNaN(ke)||isNaN(qe)){const et=5*Math.sqrt(Ie),bt=Ie*Ae;ke=et*Math.cos(bt),qe=et*Math.sin(bt)}Qe=Qe||ue,W[Ie]=ke,J[Ie]=qe,X[Ie]=Qe,K[Ie]=xe.pinned?1:0,H[Ie]=rt===void 0?(1+ee[Ie])*re:rt,q[Ie]=Ie,Qe>we&&(we=Qe),ke<ie&&(ie=ke),qe<ge&&(ge=qe),ke>Se&&(Se=ke),qe>Le&&(Le=qe)}if(F.length>1&&(Se-ie<2*we||Le-ge<2*we)){const Ie=(ie+Se)/2,xe=(ge+Le)/2;for(let ke=0;ke<O;ke++)if(!K[ke]){const qe=5*Math.sqrt(ke),Qe=ke*Ae,rt=Ie+qe*Math.cos(Qe),et=xe+qe*Math.sin(Qe);W[ke]=rt,J[ke]=et,rt<ie&&(ie=rt),et<ge&&(ge=et),rt>Se&&(Se=rt),et>Le&&(Le=et)}}me=s(Ie=>W[Ie],"getX"),Me=s(Ie=>J[Ie],"getY"),Ce=s(Ie=>X[Ie],"getR"),ce=Ft(j),he=jt(j,R)},"initialize");function vt(F,j,{X:R,Y:O,fx:W,fy:J,vx:X,vy:ee,masses:K,pinned:H},q){let re=0,ue=0;const fe=F.length,ie=1/8;for(let ge=0;ge<fe;ge++){const Se=F[ge],Le=K[Se],Ae=W[Se]/Le,we=J[Se]/Le;X[Se]+=Ae*ie,ee[Se]+=we*ie;const Ie=.2*X[Se]*ie+.5*Ae*ie*ie,xe=.2*ee[Se]*ie+.5*we*ie*ie;W[Se]=J[Se]=0,H[Se]||(R[Se]+=Ie,O[Se]+=xe,re+=Math.abs(Ie)*Le,ue+=Math.abs(xe)*Le)}return(re*re+ue*ue)/fe}function Vt(F,j,{X:R,Y:O,fx:W,fy:J,vx:X,vy:ee,pinned:K,masses:H},q){const re=F.length;let ue=0;for(let fe=0;fe<re;fe++){const ie=F[fe],ge=H[ie],Se=W[ie]/ge,Le=J[ie]/ge,Ae=X[ie]+1*Se,we=ee[ie]+1*Le;let Ie=1*Ae,xe=1*we;Ie>1e4&&(Ie=.1),xe>1e4&&(xe=.1),X[ie]=j*(Ae+X[ie])/2,ee[ie]=j*(we+ee[ie])/2,W[ie]=J[ie]=0,K[ie]||(R[ie]+=Ie,O[ie]+=xe),ue+=.5*(Ie*Ie+xe*xe)}return ue}function Qt(F,j,{X:R,Y:O,fx:W,fy:J,pinned:X,layer:ee,layers:K,surfaces:H,movements:q},{maxDisplacement:re}){q.fill(0);let ue=0;const fe=F.length;let ie=1/0,ge=1/0,Se=-1/0,Le=-1/0;const Ae=re*re;for(let xe=0;xe<fe;xe++){const ke=F[xe],qe=W[ke]*=j,Qe=J[ke]*=j,rt=ee[ke];let et=qe,bt=Qe;const Tt=R[ke],Rt=O[ke];if(et*et+bt*bt>Ae){const Fn=Math.sqrt(et*et+bt*bt)/re;bt/=Fn,et/=Fn}X[ke]||(R[ke]+=et,O[ke]+=bt);const an=Math.sqrt(et*et+bt*bt);X[ke]||(Tt<ie&&(ie=Tt),Rt<ge&&(ge=Rt),Tt>ie&&(Se=Tt),Rt>ge&&(Le=Rt),q[rt-1]+=an),ue+=rt*an}const we=Math.max(Se-ie,0),Ie=Math.max(Le-ge,0);for(let xe=0;xe<K.length;xe++){const ke=K[xe],qe=ke.length;let Qe=1/0,rt=1/0,et=-1/0,bt=-1/0,Tt=0;for(let Rn=0;Rn<qe;Rn++){const ei=ke[Rn];if(X[ei])continue;const fn=R[ei],Tr=O[ei];fn<Qe&&(Qe=fn),Tr<rt&&(rt=Tr),fn>et&&(et=fn),Tr>bt&&(bt=Tr),Tt++}const Rt=et-Qe,an=bt-rt,Fn=Math.max(1,Math.sqrt(Rt**2+an**2));H[xe]=Fn;const Cr=Tt===0?0:q[xe]/Tt,Bn=we*Ie||1;q[xe]=Cr>Tt?Cr/Bn:0}return ue}function qn(F,j,R){mt(F,j,R),xt(R)}function mt(F,j,{sources:R,targets:O,degrees:W,nodeIds:J,edgeIds:X}){const ee={};for(let K=0;K<F.length;K++)ee[K]=J[K]=K;for(let K=0;K<j.length;K++){const{source:H,target:q}=j[K],re=ee[H],ue=ee[q];X[K]=K,R[K]=re,O[K]=ue,W[re]++,W[ue]++}}function xt({nodeIds:F,edgeIds:j,sources:R,targets:O,degrees:W,layer:J,layers:X,component:ee,components:K,cluster:H,parent:q}){let re=0,ue=1;const fe=new Uint32Array(F.length);for(let we=0;we<F.length;we++)fe[we]=W[we];const ie=new Array(F.length);for(let we=0;we<j.length;we++){const Ie=j[we],xe=R[Ie],ke=O[Ie];ie[xe]=ie[xe]||[],ie[ke]=ie[ke]||[],ie[xe].push(ke),ie[ke].push(xe)}const ge=new Uint8Array(F.length),Se=new Uint8Array(F.length);q.fill(-1);let Le=0;for(let we=0;we<F.length;we++)if(ge[we]===0){const Ie=[we];for(;Ie.length!==0;){const xe=Ie.pop();if(ge[xe]===0&&ie[xe]!==void 0){const ke=ie[xe];for(let qe=0;qe<ke.length;qe++)Ie.push(ke[qe])}ge[xe]=1,ee[xe]=Le}Le++}const Ae=new Array(F.length);for(let we=0;we<F.length;we++)J[we]=0,Ae[we]=we;for(;Ae.length!==0;){const we=[],Ie=[];for(let xe=0;xe<Ae.length;xe++)fe[Ae[xe]]<=re&&(we.push(xe),Ie.push(Ae[xe]));for(let xe=0;xe<Ie.length;xe++){const ke=Ie[xe];Se[ke]=re,J[ke]=ue;const qe=ie[ke];if(qe)for(let Qe=0;Qe<qe.length;Qe++)fe[qe[Qe]]--}for(let xe=0;xe<Ie.length;xe++){const ke=Ie[xe],qe=ie[ke];if(qe)for(let Qe=0;Qe<qe.length;Qe++){const rt=qe[Qe],et=J[rt];if(et===void 0||et>ue){q[ke]=rt;break}}}we.reverse();for(let xe=0;xe<we.length;xe++)Ae.splice(we[xe],1);if(ue+=1,Ae.length>0){let xe=1/0;for(let ke=0;ke<Ae.length;ke++){const qe=fe[Ae[ke]];qe<xe&&(xe=qe)}xe>=re+1&&(re=xe,ue=1)}}ge.fill(0);for(let we=0;we<F.length;we++){const Ie=F[we],xe=J[Ie];if(q[Ie]===-1||J[q[Ie]]===xe){const ke=[Ie];for(ge.fill(0);ke.length!==0;){const qe=ke.pop();if(ge[qe])continue;if(J[qe]>xe){q[Ie]=qe;break}const Qe=ie[qe];if(ge[qe]=1,Qe)for(let rt=0;rt<Qe.length;rt++)ke.push(Qe[rt])}}}for(let we=0;we<F.length;we++){const Ie=F[we],xe=ee[Ie];K[xe]=K[xe]||[],K[xe].push(Ie);const ke=J[Ie]-1;X[ke]=X[ke]||[],X[ke].push(Ie),H[Ie]=q[Ie]}}kt.initialize=Ct,s(vt,"euler"),s(Vt,"leapfrog"),s(Qt,"velocityVerlet"),s(qn,"default"),s(mt,"initTopology"),s(xt,"decomposition");var gt=class{constructor(F,j=!0){this.bucketSize=0;const R=F.nodes.length,O=F.edges.length;u(R+O),this.X=new Array(R),this.Y=new Array(R),this.R=new Array(R),this.fx=new Float32Array(R),this.fy=new Float32Array(R),this.vx=new Float32Array(R),this.vy=new Float32Array(R),this.pinned=new Uint8Array(R),this.masses=new Float32Array(R),this.weights=new Float32Array(O),this.lengths=new Float32Array(O),this.sources=new Uint32Array(O),this.targets=new Uint32Array(O),this.degrees=new Uint32Array(R),this.layer=new Uint32Array(R),this.parent=new Int32Array(R),this.cluster=new Int32Array(R),this.component=new Uint32Array(R),this.components=[],this.layers=[],this.nodeIds=new Array(R),this.edgeIds=new Array(O),j&&qn(F.nodes,F.edges,this),this.movements=new Array(this.layers.length).fill(0),this.surfaces=new Array(this.layers.length).fill(0),this.movementsPrev=new Array(this.layers.length).fill(0),this.surfacesPrev=new Array(this.layers.length).fill(0)}};function Ut(F,j){return F<j?F*j+Math.pow(j-F-1,2)/4:F*j+Math.pow(F-j-1,2)/4}function Wt(F,j){return(F+j)*(F+j+1)/2+j}function An({edgeIds:F,sources:j,targets:R,pinned:O,degrees:W,X:J,Y:X,R:ee},K=0,H=.5){const q={},re={};for(const ue of F){const fe=j[ue],ie=R[ue];fe!==ie&&(q[fe]=q[fe]||{},q[ie]=q[ie]||{},q[fe][ie]=!0,q[ie][fe]=!0)}Object.keys(q).forEach(ue=>{const fe=Number(ue),ie=Object.keys(q[Number(fe)]);if(ie.length===2){const[ge,Se]=ie,Le=Ut(Number(ge),Number(Se));Le in re||(re[Le]=[Number(Se),Number(ge)]),O[fe]||re[Le].push(fe)}}),Object.keys(re).forEach(ue=>{const[fe,ie,...ge]=re[Number(ue)];if(ge.length<3)return;const Se=J[fe],Le=X[fe],Ae=J[ie],we=X[ie],Ie=W[fe],xe=.25+.5*Ie/(Ie+W[ie]);let ke=Se+(Ae-Se)*xe,qe=Le+(we-Le)*xe,Qe=-(we-Le),rt=Ae-Se;const et=Math.sqrt(Math.pow(Se-Ae,2)+Math.pow(Le-we,2));Qe=-2*Qe/et,rt=-2*rt/et;const bt=Math.acos(Qe/Math.sqrt(Qe*Qe+rt*rt));K>0&&(bt<K||bt>Math.PI-K&&bt<=Math.PI?(Qe=2*Math.cos(Math.PI-K),rt=2*Math.sin(Math.PI-K)):(bt>2*Math.PI-K||bt>=Math.PI&&bt<Math.PI+K)&&(Qe=2*Math.cos(K),rt=2*Math.sin(K)));let Tt=0,Rt=1;ge.sort((Rn,ei)=>ee[ei]-ee[Rn]);let an=0,Fn=0;const Cr=Math.max(ee[ge[0]],ee[ge[1]])/2;ge.length%2==1&&(Tt=1,ke-=Qe*Cr,qe-=rt*Cr);const Bn=1+H;for(let Rn=0;Rn<ge.length;Rn++){const ei=(Tt+Rn)%2,fn=ge[Rn],Tr=Rn>=2?ee[fn]:Cr,Or=(ei?an:Fn)+Tr;J[fn]=ke+Qe*Rt*Or,X[fn]=qe+rt*Rt*Or,ei?an+=Tr*Bn:Fn+=Tr*Bn,Rt=-Rt}})}function On(F){let j=0,R=0;for(const X of F)j+=X.w*X.h,R=Math.max(R,X.w);F.sort((X,ee)=>ee.h-X.h);const O=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(j/.95)),R),h:1/0}];let W=0,J=0;for(const X of F)for(let ee=O.length-1;ee>=0;ee--){const K=O[ee];if(!(X.w>K.w||X.h>K.h)){if(X.x=K.x,X.y=K.y,J=Math.max(J,X.y+X.h),W=Math.max(W,X.x+X.w),X.w===K.w&&X.h===K.h){const H=O.pop();ee<O.length&&(O[ee]=H)}else X.h===K.h?(K.x+=X.w,K.w-=X.w):X.w===K.w?(K.y+=X.h,K.h-=X.h):(O.push({x:K.x+X.w,y:K.y,w:K.w-X.w,h:X.h}),K.y+=X.h,K.h-=X.h);break}}}function mn(F,j=1){return On(F.map(R=>(R.w+=R.maxr+j,R.h+=R.maxr+j,R)).sort((R,O)=>R.w*R.h-O.w*O.h))}s(gt,"LayoutData"),s(Ut,"unorderedPair"),s(Wt,"orderedPair"),s(An,"alignSiblings"),s(On,"potpack"),s(mn,"boxpack");var Mn=class{constructor(){this.ids=[],this.xmin=1/0,this.ymin=1/0,this.xmax=-1/0,this.ymax=-1/0,this.x=0,this.y=0,this.w=0,this.h=0,this.cx=0,this.cy=0,this.radius=0,this.mx=0,this.my=0,this.m=0,this.maxr=0}add(F,j,R,O){this.ids.push(F),j-O<this.xmin&&(this.xmin=j-O),R-O<this.ymin&&(this.ymin=R-O),j+O>this.xmax&&(this.xmax=j+O),R+O>this.ymax&&(this.ymax=R+O),O>this.maxr&&(this.maxr=O),this.mx+=O*j,this.my+=O*R,this.m+=O}measure(F=0){return this.w=this.xmax-this.xmin+2*F,this.h=this.ymax-this.ymin+2*F,this.cx=this.mx/this.m,this.cy=this.my/this.m,this.x=this.xmin,this.y=this.ymin,this.radius=Math.sqrt(this.w*this.w+this.h*this.h)/2,this}};function kr(F,j=20,R,O,W){for(const ie of F){const{x:ge,y:Se,r:Le}=Ye(ie.ids,Ae=>R[Ae],Ae=>O[Ae],Ae=>W[Ae]);ie.cx=ge,ie.cy=Se,ie.radius=Le+j}const J=F.slice().sort((ie,ge)=>ie.radius-ge.radius),X=J.map(ie=>({x:ie.cx,y:ie.cy,r:ie.radius})),ee=J.pop();let K=3*Math.PI/2,H=ee.radius;const q=2*Math.PI,{cx:re,cy:ue}=ee,fe=[ee];for(;J.length!==0;){const ie=J[J.length-1],ge=H+ie.radius,Se=re+Math.cos(K)*ge,Le=ue+Math.sin(K)*ge;fe.some(Ae=>{const we=Ae.cx-Se,Ie=Ae.cy-Le;return Math.sqrt(we*we+Ie*Ie)<Ae.radius+ie.radius})?H+=1:(ie.x=Se-ie.w/2,ie.y=Le-ie.h/2,ie.cx=Se,ie.cy=Le,X[J.length-1].x=Se,X[J.length-1].y=Le,fe.push(J.pop()),K+=(2*ie.radius+1)/ge*1%q)}}function zi(F,j,R,O){let W=0;const J=[];for(const X of O){const ee=new Mn;for(const K of X)ee.add(K,F[K],j[K],R[K]);J.push(ee.measure()),X.length>J[W].ids.length&&(W=J.length-1)}return{boxes:J,biggest:W}}function $t(F,j,{X:R,Y:O,R:W,components:J,pinned:X,degrees:ee,sources:K,targets:H,edgeIds:q},{update:re,onUpdate:ue,placement:fe,placementOffset:ie,alignSiblings:ge,siblingsMinAngle:Se,siblingsOffset:Le}){if(ge&&(An({X:R,Y:O,R:W,degrees:ee,pinned:X,sources:K,targets:H,edgeIds:q},Se,Le),re(F,R,O)),fe){const{boxes:Ae,biggest:we}=zi(R,O,W,J);if(fe==="spiral")kr(Ae,ie,R,O,W);else{if(fe!=="box")return;mn(Ae,ie)}const Ie=Ae[we].xmin-Ae[we].x,xe=Ae[we].ymin-Ae[we].y;for(const ke of Ae){const{xmin:qe,ymin:Qe,x:rt,y:et,ids:bt}=ke,Tt=qe-rt-Ie,Rt=Qe-et-xe;for(const an of bt)R[an]-=Tt,O[an]-=Rt}re(F,R,O),ue()}}s(Mn,"Component"),s(kr,"spiralpack"),s(zi,"groupAndMeasure"),s($t,"postprocessing");var xn=(F=>(F[F.verlet=0]="verlet",F[F.euler=1]="euler",F))(xn||{}),kn=0,z=typeof window>"u",U=typeof performance<"u"&&performance.now?performance:Date,Z=z?F=>{const j=U.now(),R=Math.max(0,16-(j-kn)),O=setTimeout(()=>F(j+R),R);return kn=j+R,O}:window.requestAnimationFrame,G=z?F=>clearTimeout(F):window.cancelAnimationFrame;function le(F,j,R){for(let O=0;O<F.length;O++){const W=F[O];W.x=j[O],W.y=R[O]}}s(le,"defaultUpdate");var Ne=s(()=>{},"noop"),He={movementRatio:7e-8,surfaceRatio:.0025},Oe=class{constructor(F={}){this.onUpdate=s(j=>{},"onUpdate"),this.update=le,this.nextTick=Z,this.cancelTick=G,this.onEnd=Ne,this.charge=10,this.maxIterations=200,this.minMovement=.1,this.edgeLength=30,this.edgeStrength=3,this.friction=.1,this.elasticity=.9,this.margin=1,this.cx=void 0,this.cy=void 0,this.gravity=.01,this.theta=.34,this.batch=void 0,this.inertia=.9,this.integrator=0,this.multilevel=!1,this.placement="none",this.placementOffset=10,this.alignSiblings=!1,this.bucketSize=void 0,this.maxDisplacement=1e3,this.siblingsMinAngle=0,this.siblingsOffset=.15,this.steps=200,this.scaling=1,this.defaultRadius=1,this.autoStop=He,this.gpuAcceleration=!0,this.barnesHutOptimization=!0,"autoStop"in F?F.autoStop&&(typeof F.autoStop=="boolean"?F.autoStop=He:F.autoStop=be(be({},F.autoStop),He)):F.steps;for(const j in F)F[j]===void 0&&j!=="order"&&j!=="depth"||(this[j]=F[j])}};function Be(F,j,{X:R,Y:O,R:W,degrees:J,nodeIds:X,edgeIds:ee,layers:K,layer:H,cluster:q,masses:re,weights:ue,sources:fe,targets:ie},{cx:ge,cy:Se,nextTick:Le,cancelTick:Ae,update:we,onUpdate:Ie,batch:xe,maxIterations:ke,steps:qe,minMovement:Qe},rt,et){const bt=K.slice();xe=xe??1;let Tt,Rt=0;function an(){Ae(Tt),we(F,R,O),Ie(),et(Rt)}s(an,"stop");const Fn={};for(let Zn=0;Zn<j.length;Zn++)Fn[Number(j[Zn].id)||Zn]=Zn;const Cr=new Map;for(let Zn=0;Zn<ee.length;Zn++){const Oi=ee[Zn];Cr.set(Wt(fe[Oi],ie[Oi]),Oi)}for(let Zn=0;Zn<K.length;Zn++){const Oi=K[Zn],Ds=Zn;for(let xi=0;xi<Oi.length;xi++){const Ln=Oi[xi],Cn=q[Ln];Cn!==-1&&(re[Cn]+=re[Ln])}for(let xi=0;xi<j.length;xi++){const Ln=j[xi],Cn=Number(Ln.id)||xi,Bi=Ln.source,Po=Ln.target,Cu=ue[Fn[Cn]];if(H[Bi]===Ds&&H[Po]===Ds){const Dw=q[Bi],zw=q[Po];if(Dw!==zw){const Ow=Cr.get(Wt(Dw,zw));Ow!==void 0&&(ue[Ow]+=Cu)}}}}X.length=0,ee.length=0,ke=1/0;let Bn=1;const Rn=1-Math.pow(.1,1/qe/2),ei=(Bn-.1)/qe;let fn,Tr,Or=.5;function of(){Bn+=(0-Bn)*Rn;const Zn=rt(Bn,X,ee);let Oi=Bn<=Or||Zn<Qe;if(Rt===0||Oi){const Ds=bt.pop();if(Ds){fn&&(Tr=fn.reduce((Ln,Cn)=>Math.max(Ln,ge-R[Cn],Se-O[Cn]),0)),X.push.apply(X,Ds);for(let Ln=0;Ln<Ds.length;Ln++){const Cn=Ds[Ln],Bi=q[Cn];if(Bi!==-1){const Po=J[Cn]>1?2:1,Cu=W[Bi]+W[Cn];re[Bi]-=re[Cn],R[Cn]=R[Bi]+Po*Cu*(2*d()-1),O[Cn]=O[Bi]+Po*Cu*(2*d()-1)}else fn&&(R[Cn]=ge+2*Tr*(1-2*d()),O[Cn]=Se+2*Tr*(1-2*d()))}fn=Ds;const xi=X.reduce((Ln,Cn)=>(Ln[Cn]=!0,Ln),{});ee.length=0;for(let Ln=0;Ln<j.length;Ln++){const{source:Cn,target:Bi,id:Po}=j[Ln];xi[Cn]&&xi[Bi]&&ee.push(Fn[Number(Po)])}Oi=!1,bt.length===0?(Bn=.2,Or=.1):(Bn=.1+2*ei,Or=.1)}}Rt%xe==0&&(we(F,R,O),Ie()),++Rt>=ke||Oi?an():Tt=Le(of)}return s(of,"simulationStep"),{done:!1,start(){return Tt=setTimeout(of),this},stop(){return an(),this},get iterations(){return Rt}}}s(Oe,"Settings"),s(Be,"multiLevel");var nt=class{constructor(F){this.promise=new Promise(F)}then(F){return this.promise.then(F)}stop(){return this.simulation.stop(),this}get iterations(){return this.simulation.iterations()}};function pt(F,j,{X:R,Y:O,nodeIds:W,edgeIds:J,layers:X,movements:ee,movementsPrev:K,surfaces:H,surfacesPrev:q},re,ue,fe){var ie;const{nextTick:ge,cancelTick:Se,steps:Le,minMovement:Ae,update:we,onUpdate:Ie,autoStop:xe}=re,ke=(ie=re.batch)!=null?ie:1;let qe=0,Qe=1,rt,et=1-Math.pow(.05,1/Le),bt=!1;const Tt=s(()=>{bt=!0,Se(rt),Ie(),fe(qe)},"stop");let Rt=!1;const an=s(()=>{Qe+=(.001-Qe)*et;const Fn=ue(Qe,W,J),Cr=X.length;let Bn=!1,Rn=!1;if(xe){Bn=Rn=!0;const{movementRatio:fn,surfaceRatio:Tr}=xe;for(let Or=0;Or<Cr;Or++)Bn&&Math.abs(1-H[Or]/q[Or])>Tr&&(Bn=!1),Rn&&Math.abs(ee[Or]-K[Or])>fn&&(Rn=!1)}Bn&&Rn&&!Rt&&(et=1-Math.pow(.001,1/Math.max(10,qe)),Rt=!0);const ei=bt||Qe<.05||Fn!==0&&Fn<=Ae;if(qe%ke==0&&(we(F,R,O),Ie()),++qe>=Le||ei)return Tt();for(let fn=0;fn<Cr;fn++)K[fn]=ee[fn],q[fn]=H[fn];rt=ge(an)},"simulationStep");return{done:!1,start(){return rt=setTimeout(an),this},stop(){return Tt(),this},get iterations(){return qe}}}s(nt,"SimulationPromise"),s(pt,"singleLevel");var _t,ut={euler:vt,verlet:Qt,leapfrog:Vt};function ht(F,j={}){let R,O;const W=s((ue={nodes:[],edges:[]})=>(R=ue.nodes,O=ue.edges,u(Wt(R.length,O.length)),new gt(ue,!0)),"setGraph"),J=s((ue={})=>new Oe(ue),"setOptions");let X=W(F),ee=J(j);p(O,X),Ct(R,X,ee),Ht(R,X,ee),f(R,X,ee);const K=ut[ee.integrator]||Qt;let H=null;const q=s((ue,fe,ie)=>(H&&(H.destroy(),H=null),fe.length<=1?0:(ee.barnesHutOptimization?H=kt(ue,fe,H,X):Bt(ue,fe,X,ee),g(ue,ie,X,ee),H&&ee.elasticity!==0&&ae(0,fe,H,X,ee),m(ue,fe,X,ee),K(fe,ee.inertia,X,ee))),"step");let re;return{setOptions:(ue={})=>(ee=J(ue),this),setGraph:({nodes:ue,edges:fe})=>(X=W(F),p(fe,X),Ct(ue,X,ee),Ht(ue,X,ee),f(ue,X,ee),this),start(){return re=(ee.multilevel?Be:pt)(R,O,X,ee,q,ue=>{re.done||$t(R,0,X,ee),ee.onEnd(ue),re.done=!0}).start(),this},iterations:()=>re.iterations,data:()=>X,stop(){return re&&re.stop(),this},step(ue=1){return q(ue,X.nodeIds,X.edgeIds),ee.update(R,X.X,X.Y),this}}}return s(ht,"force"),ht.run=(F,j)=>{let R;const O=new nt(W=>{j.onEnd=W,R=ht(F,j).start()});return O.simulation=R,O.stop=()=>(R.stop(),O),O},_t=o,((F,j,R,O)=>{if(j&&typeof j=="object"||typeof j=="function")for(let W of r(j))i.call(F,W)||W===R||t(F,W,{get:()=>j[W],enumerable:!(O=n(j,W))||O.enumerable});return F})(t({},"__esModule",{value:!0}),_t)})();return e.default.apply(this,arguments)}Je(TA,"SimulationPromise"),Je(pg,"gpuLayout"),pg.run=(e,t,n)=>{let r;const i=new TA(s=>{n.onEnd=s,r=pg(e,t,n).start()});return i.simulation=r,i.stop=()=>(r.stop(),i),i};var OH=2,BH=1.25,LA={name:"force",imports:{force:NA},configure(e,{graph:t,events:n}){const r=e.nodes._indexes,i=t.getNodeAttribute("x").getMultiple(r),s=t.getNodeAttribute("y").getMultiple(r),o=t.getNodeAttribute("radius").getMultiple(r),a=t.getNodeAttribute("layoutable").getMultiple(r),l=e.edges,c=[],d=[],u={};e.edgeStrength===void 0&&(e.edgeStrength=.5),e.gpu&&(e.edgeStrength/=OH),e.gravity==null&&(e.gravity=.01),e.siblingsOffset==null&&(e.siblingsOffset=0),e.theta==null&&(e.theta=.62),e.autoStop=!!e.autoStop,e.alignSiblings=!!e.alignSiblings;const h=e.radiusRatio||BH;for(let p=0;p<e.nodes._indexes.length;p++){const m=e.nodes._indexes[p];u[m]=p,c.push({id:p,x:i[p],y:s[p],r:o[p]*h,pinned:!a[p]})}l.forEach(p=>{const m=u[p.getSource()._index],f=u[p.getTarget()._index];m!==f&&m!==void 0&&f!==void 0&&d.push({source:m,target:f})});const g=vm(be({},e));return delete g.nodes,delete g.edges,{graph:{nodes:c,edges:d},options:g,indexes:e.nodes._indexes,done:!1,x:i,y:s,chunkPeriod:250}},update:function(e,t){if(!t.simulation&&e){let n;t.done=!1,t.graph=e.graph,t.options=e.options,t.indexes=e.indexes;let r=!1;if(e.options.gpu){const l=hP("webgl2",{},()=>{mo("GPU layout: WebGL context not available. Falling back on CPU."),t.simulation=void 0,t.options.gpu=!1,t.cleanUp&&t.cleanUp(),this._update(e,t)});l&&(n=l.context,t.cleanUp=l.cleanUp),r=!!n}let i=Date.now();r||(e.options.nextTick=l=>Date.now()-i<=t.chunkPeriod?l():(i=Date.now(),setTimeout(l,0))),e.options.update=(l,c,d)=>{t.x=c,t.y=d},e.options.onEnd=()=>{if(r&&n){const{X:l,Y:c}=t.simulation.data(!0);t.x=l,t.y=c}t.done=!0,t.simulation=void 0,t.cleanUp&&t.cleanUp()},e.options.bucketSize=0;const s=r&&n?pg(e.graph,n,e.options).start():NA(e.graph,e.options).start();t.simulation=s;const{X:o,Y:a}=r&&n?{X:new Float32Array(e.graph.nodes.length),Y:new Float32Array(e.graph.nodes.length)}:s.data();t.x=o,t.y=a}return{graph:t.graph,indexes:t.indexes,x:t.x,y:t.y}},context:function(){return{done:!1,graph:{nodes:[],edges:[]},x:null,y:null,indexes:null,chunkPeriod:250}},stop:function(e){e.done=!0,e.simulation&&(e.simulation.stop(),delete e.simulation)},isRunning:function(e){return!e.done||(e.done=!1,!1)},onSync:function({indexes:e,x:t,y:n}){return{indexes:e,x:t,y:n}}};function jH(e,t,n,r=e.getNodes()){if(!t)return n?e.nodeList():r.filter(i=>i.getMetaNode()===null);if(!(t instanceof Ms)){if(Array.isArray(t)&&t.length>0)return e.getNodes(t);throw Error("[Layout]: 'nodes' must be a NodeList or an NodeId[]")}return t}function UH(e,t,n=e.getEdges()){if(!t)return n;if(!(t instanceof Aa)){if(Array.isArray(t)&&t.length>0)return e.getEdges(t);throw Error("[Layout]: 'edges' must be a EdgeList or a valid EdgeId[]")}return t}function $H(e){if(!e.size)return;const t=new Set(e.getId());return e.getAdjacentEdges().filter(n=>n.getExtremities().getId().every(r=>t.has(r)))}function LF(e,t={},n=!0){n||(t.edges=void 0);const r=jH(e,t.nodes,t.edges),i=UH(e,t.edges,$H(r));return yt(be({},t),{nodes:r.concat(i.getExtremities()).dedupe(),edges:i})}function GH(e,t,n,r,i){return{x:e+i*(n-e),y:t+i*(r-t)}}var VH=10;function HH(e,t,n){let r,i,s=1/0;for(let o=0,a=t.length;o<a;o++){const l=t[o],c=t[(o+1)%a],d=nb(e[0],e[1],l[0],l[1],c[0],c[1]);d<s&&(s=d,r=l,i=c)}return WH(e[0],e[1],r[0],r[1],i[0],i[1],n)}function WH(e,t,n,r,i,s,o){const a=SP(e,t,n,r,i,s);let l=-(r-s),c=n-i;const d=Math.sqrt(l*l+c*c);return l/=d,c/=d,[a.x-o*l,a.y-o*c]}function XH(e,t,n,r){for(let i=0;i<e.length;i++){const[s,o]=e[i],a=Math.abs(s-t),l=Math.abs(o-n);if(a+l<=r||!(a>r||l>r)&&a*a+l*l<=r*r)return!0}return!1}function YH(e,t,n){const r=wP(n.cx,n.cy,e,t,n.minX,n.minY,n.maxX,n.maxY);let i,s=1/0,o={x:n.maxX,y:t};for(const a of r)i=En(e,t,a.x,a.y),i<s&&(s=i,o=a);return o}function qH(e){const t=e.bottomLeft(),n=e.topRight();return[[t.x,t.y],[t.x,n.y],[n.x,n.y],[n.x,t.y]]}function ZH(e,t,n,r){const i=[],s=[],o=[];return e.forEach((a,l)=>{r[l]&&(i.push(a),s.push(t[l]),o.push(n[l]))}),{ids:i,subgraphPositions:s,radii:o}}function JH(e,t,n){const{duration:r=0,margin:i=5,referenceNodes:s,nodes:o}=t,{ids:a,subgraphPositions:l,radii:c}=ZH(o.getId(),n,o.getAttribute("radius"),o.getAttribute("layoutable")),d=e.getNodes(a);let u=s;!u||u instanceof Ms||(u=e.getNodes(u));const h=u||d.inverse(),g=h.getPosition().map(A=>[A.x,A.y]),p=d.getBoundingBox(),m=h.getBoundingBox();m.pad(m.maxScaledSize);const f={layoutName:"incremental",ids:d.getId(),positions:{before:l,current:l}};if(!d.size)return Promise.resolve(f);const y=Ex(l.map(A=>A.x),l.map(A=>A.y),c),[_,v]=y,x=y[2]+m.maxScaledSize+i;let b,w=0,S=0;if(XH(g,_,v,x))if(h.size<=3){if(kx(_,v,y[2],m.minX,m.minY,m.maxX,m.maxY)){const A=YH(_,v,m);b=En(m.cx,m.cy,A.x,A.y);const C=GH(m.cx,m.cy,A.x,A.y,(b+x)/b);w=C.x-_,S=C.y-v}}else{const A=aL.from(g,D=>D[0],D=>D[1]),C=Bd(A.triangles,g),k=g.length>3?Bd(A.hull,g):qH(m),T=cL(h.getPosition(),VH,x,C,k);let M=HH([_,v],k,x);if(T.length>0){let D=Math.pow(_-M[0],2)+Math.pow(v-M[1],2);for(const B of T)w=_-B[0],S=v-B[1],b=w*w+S*S,b<D&&(D=b,M=B.slice(0,2));w=M[0]-_,S=M[1]-v}else w=M[0]-p.cx,S=M[1]-p.cy}if(w||S){const A=l.map(C=>(C.x+=w,C.y+=S,C));if(t.locate){typeof t.locate=="boolean"&&(t.locate={});const C=e.modules.locate.layoutDataBoundingBox({x:[...g.map(T=>T[0]),...A.map(T=>T.x)],y:[...g.map(T=>T[1]),...A.map(T=>T.y)],indexes:e.getNodes()._indexes}),k=e.modules.locate.computeConfigForBounds(C,t.locate);e.modules.camera.setView(k,{duration:r,easing:t.locate.easing,ignoreZoomLimits:!0})}return f.positions.current=A,d.setAttributes(A,r).then(()=>f)}return d.setAttributes(l,r).then(()=>f)}function QH(e,t,n){const r=un(t);return r.duration=0,r.dryRun=!0,r.locate=!1,delete r.incremental,n(r).then(i=>JH(e,t,i.positions.current))}function KH(e,t,n){const{nodes:r,duration:i,centralNode:s}=t,o=r,a=o.reduce((c,d)=>(c[d._index]=!0,c),{}),l=e.getNodes();if(t.focusOnGroupShape)return n({nodes:o,duration:0}).then(()=>{const c=o.concat(s),d=c.getAttribute("layoutable");return c.setAttributes({layoutable:!1}),n({nodes:e.getNodes(),duration:i}).then(()=>c.setAttributes(d))});{const c=un(t);return delete c.centralNode,c.incremental=!1,c.nodes=l,c.nodeMass=(d,u)=>(u+1)*(a[d._index]?1:2),n(c)}}function IF(e,t,n){const r=LF(t.modules.graph,e);if(typeof r.incremental!="boolean"&&"margin"in r.incremental&&!isFinite(r.incremental.margin))throw new Error("Incremental layout: margin has to be a positive number");const i=un(r);return typeof r.incremental!="boolean"&&(i.margin=r.incremental.margin,i.referenceNodes=r.incremental.referenceNodes),i.centralNode&&!i.centralNode.getAttribute("layoutable")?KH(t,i,n):QH(t,i,n)}var e9=e=>(e.modules.layouts.register(LA),(t={})=>{if(t.incremental)return IF(t,e,e.layouts.force);if(t.edgeStrength!==void 0&&(!isFinite(t.edgeStrength)||t.edgeStrength<0))throw new Error("force layout: edgeStrength must be a positive number");if(t.steps!==void 0&&(!isFinite(t.steps)||t.steps<=0))throw new Error("force layout: 'steps' must be a positive integer");if(t.edgeLength!==void 0&&(!isFinite(t.edgeLength)||t.edgeLength<=0))throw new Error("force layout: 'edgeLength' must be positive");if(t.gravity!==void 0&&(!isFinite(t.gravity)||t.gravity<0||t.gravity>=1))throw new Error("force layout: 'gravity' must be between 0 and 1");if(t.charge!==void 0&&!isFinite(t.charge))throw new Error("force layout: 'charge' must be a number");if(t.radiusRatio!==void 0&&(!isFinite(t.radiusRatio)||t.radiusRatio<0))throw new Error("force layout: 'radiusRatio' must be a positive number");if(t.theta!==void 0&&(!isFinite(t.theta)||t.theta<0||t.theta>1))throw new Error("force layout: 'theta' must be between 0 and 1");if(!(t.cx===void 0&&t.cy===void 0||typeof t.cx=="number"&&typeof t.cy=="number"))throw new Error("force layout: both 'cx' and 'cy' must be numbers");if(t.siblingsOffset!==void 0&&!isFinite(t.siblingsOffset))throw new Error("force layout: 'siblingsOffset' must be a number");return t.gpu=!!t.gpu,t.gpu&&(t.useWebWorker=!1),e.modules.layouts.start(LA.name,t)}),IA={name:"forceLink",configure:function(e,{graph:t,camera:n,graphics:r}){const i=e.nodes._indexes,s=e.edges._indexes,o={},a={},l=i.length,c=s.length;let d;var u=t.getObjectList(!0),h=t.getObjectList(!1);(e.nodes||e.edges)&&(delete(e=un(e)).nodes,delete e.edges);const g=t.getNodeAttribute("innerStroke.width").getMultiple(i),p=t.getNodeAttribute("outerStroke.width").getMultiple(i),m=t.degrees(i),f=t.getNodeAttribute("x").getMultiple(i),y=t.getNodeAttribute("y").getMultiple(i),_=t.getNodeAttribute("radius").getMultiple(i),v=t.nodeList(i).getAttribute("layoutable"),x=typeof e.nodeMass=="function"?e.nodeMass:function(I,N,V){return N+1};delete e.nodeMass;const b=typeof e.edgeWeight=="function"?e.edgeWeight:function(I){return 1};delete e.edgeWeight,isFinite(e.scalingRatio)||delete e.scalingRatio;const w=i.reduce((I,N,V)=>(v[V]||(I[N]=!0),I),{});let S=0,A=0,C=0;const k=n.getZoom();for(d=0;d<i.length;++d){const I=i[d],N=f[d],V=y[d],$=_[d]+(g[d]+p[d])/k;o[I]={id:I,x:N,y:V,degree:m[d],size:$,pinned:!!w[I],mass:x(u.get(I),m[d],d)},C=Math.max($,C)}if(l>1)for(d=0;d<l;d++){const I=o[i[d]];S+=I.x,A+=I.y}S/=l,A/=l;const T={x:S,y:A},M=t.edgeList(s),D=M.getSource()._indexes,B=M.getTarget()._indexes;for(d=0;d<c;d++){const I=s[d],N=D[d],V=B[d];o[N]&&o[V]&&(a[I]={source:N,target:V},a[I].weight=b(h.get(I)))}return{nodes:o,edges:a,maxSize:C,config:vm(e),barycentre:T}},context:function(){return{chunkPeriod:250}},update:function(e,t){let n;!t.W&&e?(n={ppn:10,ppe:3,ppr:9,MAX_SUBDIVISION_RETRIES:3,maxForce:10,iterations:0,converged:!1,settings:{linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:0,scalingRatio:100,strongGravityMode:!0,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5,startingIterations:10,iterationsPerRender:10,maxIterations:1e3,avgDistanceThreshold:.01,autoStop:!0,alignNodeSiblings:!0,nodeSiblingsScale:5,nodeSiblingsAngleMin:0}},t.W=n,function(I,N){const V=function(Q,se){let te,de,Ee,oe=Q.nodes,_e=Q.edges,De=Q.maxSize,We=Object.keys(Q.nodes),Ye=Object.keys(Q.edges),pe=We.length*n.ppn,ye=Ye.length*n.ppe,Ke={};const tt=Math.pow(10,Math.log(Math.max(De,1))-6),dt=tt/2,it=Math.random,Y=se.randomizeFactor||1;let ne;ne=se.randomize==="locally"?he=>he+it()*Y:se.randomize==="globally"?he=>it()*Y:he=>he+it()*tt-dt;const ae=new Float32Array(pe),ce=new Float32Array(ye);for(te=de=0,Ee=We.length;te<Ee;te++){const he=We[te],me=oe[he];let Me=me.x,Ce=me.y;me.pinned||(Me=ne(Me),Ce=ne(Ce)),Ke[he]=de,ae[de]=Me,ae[de+1]=Ce,ae[de+2]=0,ae[de+3]=0,ae[de+4]=0,ae[de+5]=0,ae[de+6]=me.mass,ae[de+7]=1,ae[de+8]=me.size,ae[de+9]=me.pinned||0,de+=n.ppn}for(te=de=0,Ee=Ye.length;te<Ee;te++){const he=_e[Ye[te]];ce[de]=Ke[he.source],ce[de+1]=Ke[he.target],ce[de+2]=he.weight||0,de+=n.ppe}return{nodes:ae,edges:ce}}(I,N);t.NodeMatrix=V.nodes,t.EdgeMatrix=V.edges,n.nodesLength=t.NodeMatrix.length,n.edgesLength=t.EdgeMatrix.length}(e,e.config),n.settings=function(I,N){for(const V in I)N[V]=I[V];return N}(e.config,n.settings),t.nodes=e.nodes,t.edges=e.edges,t.barycentre=e.barycentre):n=t.W;let r,i=t.NodeMatrix,s=t.EdgeMatrix;const o=0,a=1,l=2,c=3,d=4,u=5,h=6,g=7,p=8,m=9,f=0,y=1,_=2,v=0,x=1,b=2,w=3,S=4,A=5,C=6,k=7,T=8;function M(){let B,I,N,V,$,Q,se,te,de,Ee,oe,_e,De,We,Ye,pe,ye;for(N=0;N<n.nodesLength;N+=n.ppn)i[N+d]=i[N+l],i[N+u]=i[N+c],i[N+l]=0,i[N+c]=0;if(n.settings.outboundAttractionDistribution){for(de=0,N=0;N<n.nodesLength;N+=n.ppn)de+=i[N+h];de/=n.nodesLength}if(n.settings.barnesHutOptimize){let ne,ae,ce,he,me=1/0,Me=-1/0,Ce=1/0,Te=-1/0;for(r=[],N=0;N<n.nodesLength;N+=n.ppn)me=Math.min(me,i[N+o]),Me=Math.max(Me,i[N+o]),Ce=Math.min(Ce,i[N+a]),Te=Math.max(Te,i[N+a]);const ot=Me-me,st=Te-Ce;for(ot>st?(Ce-=(ot-st)/2,Te=Ce+ot):(me-=(st-ot)/2,Me=me+st),r[0+v]=-1,r[0+x]=(me+Me)/2,r[0+b]=(Ce+Te)/2,r[0+w]=Math.max(Me-me,Te-Ce),r[0+S]=-1,r[0+A]=-1,r[0+C]=0,r[0+k]=0,r[0+T]=0,B=1,N=0;N<n.nodesLength;N+=n.ppn)for(I=0,ce=n.MAX_SUBDIVISION_RETRIES;;){if(!(r[I+A]>=0)){if(r[I+v]<0){r[I+v]=N;break}if(r[I+A]=B*n.ppr,se=r[I+w]/2,te=r[I+A],r[te+v]=-1,r[te+x]=r[I+x]-se,r[te+b]=r[I+b]-se,r[te+w]=se,r[te+S]=te+n.ppr,r[te+A]=-1,r[te+C]=0,r[te+k]=0,r[te+T]=0,te+=n.ppr,r[te+v]=-1,r[te+x]=r[I+x]-se,r[te+b]=r[I+b]+se,r[te+w]=se,r[te+S]=te+n.ppr,r[te+A]=-1,r[te+C]=0,r[te+k]=0,r[te+T]=0,te+=n.ppr,r[te+v]=-1,r[te+x]=r[I+x]+se,r[te+b]=r[I+b]-se,r[te+w]=se,r[te+S]=te+n.ppr,r[te+A]=-1,r[te+C]=0,r[te+k]=0,r[te+T]=0,te+=n.ppr,r[te+v]=-1,r[te+x]=r[I+x]+se,r[te+b]=r[I+b]+se,r[te+w]=se,r[te+S]=r[I+S],r[te+A]=-1,r[te+C]=0,r[te+k]=0,r[te+T]=0,B+=4,he=I+v,ne=i[r[he]+o]<r[I+x]?i[r[he]+a]<r[I+b]?r[I+A]:r[I+A]+n.ppr:i[r[he]+a]<r[I+b]?r[I+A]+2*n.ppr:r[I+A]+3*n.ppr,r[I+C]=i[r[he]+h],r[I+k]=i[r[he]+o],r[I+T]=i[r[he]+a],r[ne+v]=r[I+v],r[I+v]=-1,ae=i[N+o]<r[I+x]?i[N+a]<r[I+b]?r[I+A]:r[I+A]+n.ppr:i[N+a]<r[I+b]?r[I+A]+2*n.ppr:r[I+A]+3*n.ppr,ne===ae){if(ce--){I=ne;continue}ce=n.MAX_SUBDIVISION_RETRIES;break}r[ae+v]=N;break}ne=i[N+o]<r[I+x]?i[N+a]<r[I+b]?r[I+A]:r[I+A]+n.ppr:i[N+a]<r[I+b]?r[I+A]+2*n.ppr:r[I+A]+3*n.ppr,r[I+k]=(r[I+k]*r[I+C]+i[N+o]*i[N+h])/(r[I+C]+i[N+h]),r[I+T]=(r[I+T]*r[I+C]+i[N+a]*i[N+h])/(r[I+C]+i[N+h]),r[I+C]+=i[N+h],I=ne}}if(n.settings.barnesHutOptimize)for(Ee=n.settings.scalingRatio,N=0;N<n.nodesLength;N+=n.ppn)for(I=0;;)if(r[I+A]>=0){if(pe=Math.sqrt((i[N+o]-r[I+k])*(i[N+o]-r[I+k])+(i[N+a]-r[I+T])*(i[N+a]-r[I+T])),2*r[I+w]/pe<n.settings.barnesHutTheta){if(oe=i[N+o]-r[I+k],_e=i[N+a]-r[I+T],n.settings.adjustSizes?pe>0?(ye=Ee*i[N+h]*r[I+C]/pe/pe,i[N+l]+=oe*ye,i[N+c]+=_e*ye):pe<0&&(ye=-Ee*i[N+h]*r[I+C]/pe,i[N+l]+=oe*ye,i[N+c]+=_e*ye):pe>0&&(ye=Ee*i[N+h]*r[I+C]/pe/pe,i[N+l]+=oe*ye,i[N+c]+=_e*ye),r[I+S]<0)break;I=r[I+S];continue}I=r[I+A]}else{if(r[I+v]>=0&&r[I+v]!==N&&(oe=i[N+o]-i[r[I+0]+o],_e=i[N+a]-i[r[I+0]+a],pe=Math.sqrt(oe*oe+_e*_e),n.settings.adjustSizes?pe>0?(ye=Ee*i[N+h]*i[r[I+0]+h]/pe/pe,i[N+l]+=oe*ye,i[N+c]+=_e*ye):pe<0&&(ye=-Ee*i[N+h]*i[r[I+0]+h]/pe,i[N+l]+=oe*ye,i[N+c]+=_e*ye):pe>0&&(ye=Ee*i[N+h]*i[r[I+0]+h]/pe/pe,i[N+l]+=oe*ye,i[N+c]+=_e*ye)),r[I+S]<0)break;I=r[I+S]}else for(Ee=n.settings.scalingRatio,V=0;V<n.nodesLength;V+=n.ppn)for($=0;$<V;$+=n.ppn)oe=i[V+o]-i[$+o],_e=i[V+a]-i[$+a],n.settings.adjustSizes?(pe=Math.sqrt(oe*oe+_e*_e)-i[V+p]-i[$+p],pe>0?(ye=Ee*i[V+h]*i[$+h]/pe/pe,i[V+l]+=oe*ye,i[V+c]+=_e*ye,i[$+l]+=oe*ye,i[$+c]+=_e*ye):pe<0&&(ye=100*Ee*i[V+h]*i[$+h],i[V+l]+=oe*ye,i[V+c]+=_e*ye,i[$+l]-=oe*ye,i[$+c]-=_e*ye)):(pe=Math.sqrt(oe*oe+_e*_e),pe>0&&(ye=Ee*i[V+h]*i[$+h]/pe/pe,i[V+l]+=oe*ye,i[V+c]+=_e*ye,i[$+l]-=oe*ye,i[$+c]-=_e*ye));for(te=n.settings.gravity/n.settings.scalingRatio,Ee=n.settings.scalingRatio,N=0;N<n.nodesLength;N+=n.ppn)ye=0,oe=i[N+o],_e=i[N+a],pe=Math.sqrt(oe*oe+_e*_e),n.settings.strongGravityMode?pe>0&&(ye=Ee*i[N+h]*te):pe>0&&(ye=Ee*i[N+h]*te/pe),i[N+l]-=oe*ye,i[N+c]-=_e*ye;for(Ee=1*(n.settings.outboundAttractionDistribution?de:1),Q=0;Q<n.edgesLength;Q+=n.ppe)V=s[Q+f],$=s[Q+y],se=s[Q+_],Ye=Math.pow(se,n.settings.edgeWeightInfluence),oe=i[V+o]-i[$+o],_e=i[V+a]-i[$+a],n.settings.adjustSizes?(pe=Math.sqrt(oe*oe+_e*_e)-i[V+p]-i[$+p],n.settings.linLogMode?n.settings.outboundAttractionDistribution?pe>0&&(ye=-Ee*Ye*Math.log(1+pe)/pe/i[V+h]):pe>0&&(ye=-Ee*Ye*Math.log(1+pe)/pe):n.settings.outboundAttractionDistribution?pe>0&&(ye=-Ee*Ye/i[V+h]):pe>0&&(ye=-Ee*Ye)):(pe=Math.sqrt(oe*oe+_e*_e),n.settings.linLogMode?n.settings.outboundAttractionDistribution?pe>0&&(ye=-Ee*Ye*Math.log(1+pe)/pe/i[V+h]):pe>0&&(ye=-Ee*Ye*Math.log(1+pe)/pe):n.settings.outboundAttractionDistribution?(pe=1,ye=-Ee*Ye/i[V+h]):(pe=1,ye=-Ee*Ye)),pe>0&&(i[V+l]+=oe*ye,i[V+c]+=_e*ye,i[$+l]-=oe*ye,i[$+c]-=_e*ye);let Ke,tt,dt,it,Y=0;if(n.settings.adjustSizes)for(N=0;N<n.nodesLength;N+=n.ppn)i[N+m]||(Ke=Math.sqrt(i[N+l]*i[N+l]+i[N+c]*i[N+c]),Ke>n.maxForce&&(i[N+l]=i[N+l]*n.maxForce/Ke,i[N+c]=i[N+c]*n.maxForce/Ke),tt=i[N+h]*Math.sqrt((i[N+d]-i[N+l])*(i[N+d]-i[N+l])+(i[N+u]-i[N+c])*(i[N+u]-i[N+c])),dt=Math.sqrt((i[N+d]+i[N+l])*(i[N+d]+i[N+l])+(i[N+u]+i[N+c])*(i[N+u]+i[N+c]))/2,it=.1*Math.log(1+dt)/(1+Math.sqrt(tt)),De=i[N+o],We=i[N+a],i[N+o]=i[N+o]+i[N+l]*(it/n.settings.slowDown),i[N+a]=i[N+a]+i[N+c]*(it/n.settings.slowDown),oe=i[N+o],_e=i[N+a],pe=Math.sqrt((oe-De)*(oe-De)+(_e-We)*(_e-We)),Y+=pe);else for(N=0;N<n.nodesLength;N+=n.ppn)i[N+m]||(tt=i[N+h]*Math.sqrt((i[N+d]-i[N+l])*(i[N+d]-i[N+l])+(i[N+u]-i[N+c])*(i[N+u]-i[N+c])),dt=Math.sqrt((i[N+d]+i[N+l])*(i[N+d]+i[N+l])+(i[N+u]+i[N+c])*(i[N+u]+i[N+c]))/2,it=i[N+g]*Math.log(1+dt)/(1+Math.sqrt(tt)),i[N+g]=Math.min(1,Math.sqrt(it*(i[N+l]*i[N+l]+i[N+c]*i[N+c])/(1+Math.sqrt(tt)))),De=i[N+o],We=i[N+a],i[N+o]=i[N+o]+i[N+l]*(it/n.settings.slowDown),i[N+a]=i[N+a]+i[N+c]*(it/n.settings.slowDown),oe=i[N+o],_e=i[N+a],pe=Math.sqrt((oe-De)*(oe-De)+(_e-We)*(_e-We)),Y+=pe);if(n.iterations++,n.settings.autoStop&&(n.converged=n.iterations>n.settings.maxIterations||Y/n.nodesLength<n.settings.avgDistanceThreshold,n.converged&&n.settings.alignNodeSiblings)){let ne,ae,ce={},he={};for(Q=0;Q<n.edgesLength;Q+=n.ppe)V=s[Q+f],$=s[Q+y],V!==$&&(ce[V]=ce[V]||{},ce[$]=ce[$]||{},ce[V][$]=!0,ce[$][V]=!0);Object.keys(ce).forEach(vt=>{var Vt=~~vt;ae=Object.keys(ce[Vt]),ae.length==2&&(ne=ae[0]+";"+ae[1],ne in he||(ne=ae[1]+";"+ae[0],he[ne]||(he[ne]=[~~ae[1],~~ae[0]])),he[ne].push(Vt))});let me,Me,Ce,Te,ot,st,It,Pt,Mt,Ht,Bt,lt,kt,jt,Ft,Ct=n.settings.nodeSiblingsAngleMin;Object.keys(he).forEach(vt=>{if(Me=he[vt].shift(),Ce=he[vt].shift(),me=he[vt].filter(mt=>!i[mt+m]),me.length==1)return;if(st=i[Me+o],It=i[Me+a],Pt=i[Ce+o],Mt=i[Ce+a],Te=Object.keys(ce[Me]).length,ot=Object.keys(ce[Ce]).length,Ht=function(xt,gt,Ut,Wt,An){return(An-Wt)*(xt-gt)/(Ut-gt)+Wt}(Te/(Te+ot),0,1,1/4,3/4),lt=function(xt,gt,Ut,Wt,An){return{x:xt+(Ut-xt)*An,y:gt+(Wt-gt)*An}}(st,It,Pt,Mt,Ht),kt=function(xt,gt,Ut,Wt){return{xi:-(Wt-gt),yi:Ut-xt,xiPrime:Wt-gt,yiPrime:-(Ut-xt)}}(st,It,Pt,Mt),Bt=function(xt,gt,Ut,Wt){const An=Ut-xt,On=Wt-gt;return Math.sqrt(An*An+On*On)}(st,It,Pt,Mt),jt=function(xt,gt){return{x:(xt.xiPrime-xt.xi)/gt,y:(xt.yiPrime-xt.yi)/gt}}(kt,Bt),Ft=function(xt){return Math.acos(xt.x/Math.sqrt(xt.x*xt.x+xt.y*xt.y))}(jt),2*Ct>Math.PI)throw new Error("ForceLink.Worker - Invalid parameter: angleMin must be smaller than 2 PI.");Ct>0&&(Ft<Ct||Ft>Math.PI-Ct&&Ft<=Math.PI?jt={x:2*Math.cos(Math.PI-Ct),y:2*Math.sin(Math.PI-Ct)}:(Ft>2*Math.PI-Ct||Ft>=Math.PI&&Ft<Math.PI+Ct)&&(jt={x:2*Math.cos(Ct),y:2*Math.sin(Ct)}));let Vt=0,Qt=1,qn=1;me.length%2==1&&(qn=0,Vt=1);for(let mt=0;mt<me.length;mt++)i[me[mt]+o]=lt.x+Qt*jt.x*qn*(Vt||mt>=2?n.settings.nodeSiblingsScale:2*n.settings.nodeSiblingsScale/3),i[me[mt]+a]=lt.y+Qt*jt.y*qn*(Vt||mt>=2?n.settings.nodeSiblingsScale:2*n.settings.nodeSiblingsScale/3),Qt=-Qt,qn+=(mt+Vt)%2})}}function D(B){const I=Object.keys(B),N={};for(let V=0;V<i.length;V+=n.ppn){const $=I[V/n.ppn];N[$]={id:$,x:i[V+o],y:i[V+a],pinned:i[V+m]}}return N}return function(){if(n.settings.autoStop){const I=Date.now();for(;!(n.converged||Date.now()-I>=t.chunkPeriod);)M()}else{const I=n.iterations===0?n.settings.startingIterations:n.iterations+n.settings.iterationsPerRender;for(;n.iterations!==I;)M()}return{nodes:D(t.nodes),barycentre:t.barycentre}}()},isRunning:function(e){return!e.W.settings.autoStop||!e.W.converged||(e.W=void 0,!1)},stop:function(e){e.W&&(e.W.converged=!0)},onSync:function({nodes:e,barycentre:t},{graph:n}){const r=Object.keys(e),i=r.length;let s,o,a,l,c,d,u,h,g=0,p=0;const m=new Array(i),f=new Array(i),y=new Array(i),_=new Array(i),[v,x]=n.getAttributes(!0,["x","y"]);for(s=0;s<i;s++)o=r[s],a=e[o],h=parseInt(o),m[s]=h,_[s]=a.pinned,a.pinned?(l=v.get(h),c=x.get(h)):(l=a.x,c=a.y),f[s]=l,y[s]=c,g+=l,p+=c;for(d=g/i-t.x,u=p/i-t.y,s=0;s<i;s++)_[s]||(f[s]-=d,y[s]-=u);return{indexes:m,x:f,y}}},t9=e=>(e.modules.layouts.register(IA),(t={})=>t.incremental?IF(t,e,e.layouts.forceLink):e.modules.layouts.start(IA.name,t)),PA={name:"grid",configure:function(e,{graph:t,camera:n}){function r(w){return w===void 0||typeof w=="number"&&isFinite(w)&&w>0}const i=e.sortBy,s=e,o=s.nodes,a=Array.from(o._indexes),l=a.length,{rows:c,cols:d,rowDistance:u,colDistance:h}=function(S,A,C,k,T){if(!r(A))throw new TypeError('"rows" should be a positive integer');if(!r(C))throw new TypeError('"cols" should be a positive integer');if(!r(k))throw new TypeError('"rowDistance" should be a positive number');if(!r(T))throw new TypeError('"colDistance" should be a positive number');if(A)return{rows:A,cols:Math.ceil(S/A),rowDistance:k,colDistance:T};if(C)return{cols:C,rows:Math.ceil(S/C),rowDistance:k,colDistance:T};const M=Math.ceil(Math.sqrt(S));return{cols:M,rows:Math.ceil(S/M),rowDistance:k,colDistance:T}}(l,s.rows,s.cols,s.colDistance,s.rowDistance),g=function(S,A,C,k,T){return typeof S!="string"?k.map((M,D)=>D):S==="radius"?A.getAttribute(!0,"radius").getMultiple(k):S==="degree"?C.getDegree():S==="random"?k.map(()=>Math.random()):C.getData(S).map(M=>M||T)}(i,t,o,a,e.sortFallbackValue),p=o.getAttribute("layoutable"),m=a.reduce((w,S,A)=>(p[A]&&w.push({id:S,attr:g[A]}),w),[]),f=o.getBoundingBox(),y=.65*Math.max(f.maxScaledSize,f.maxFixedSize/n.getZoom());let _=f.minX+y,v=f.maxX-y,x=f.minY+y,b=f.maxY-y;return f.width<y*d*2&&(_=f.cx-y*d+y,v=f.cx+y*d-y),f.height<y*c*2&&(x=f.cy-y*c+y,b=f.cy+y*c-y),{sort:!!i,nodes:m,reverse:!!s.reverse,cols:d,rows:c,minX:_,maxX:v,minY:x,maxY:b,rowDistance:u,colDistance:h}},update:function({sort:e,nodes:t,maxX:n,minX:r,maxY:i,minY:s,reverse:o,rows:a,cols:l,rowDistance:c,colDistance:d}){e&&t.sort((y,_)=>{const v=y.attr,x=_.attr;return v<x?-1:v>x?1:0}),o&&t.reverse();let u=(n-r)/(l-1),h=(i-s)/(a-1);const g=r,p=s;isFinite(u)||(u=0),isFinite(h)||(h=0),c!==void 0&&isFinite(c)&&(u=c),d!==void 0&&isFinite(d)&&(h=d);let m=0,f=0;return t.forEach(y=>{y.x=g+m*u,y.y=p+f*h,m+=1,m===l&&(f+=1,m=0)}),t},onSync:function(e){return{indexes:e.map(({id:t})=>t),x:e.map(({x:t})=>t),y:e.map(({y:t})=>t)}}},n9=e=>(e.modules.layouts.register(PA),(t={})=>e.modules.layouts.start(PA.name,t));function r9(e){let t=0,n=0;for(const o of e)t+=o.w*o.h,n=Math.max(n,o.w);e.sort((o,a)=>a.h-o.h);const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,s=0;for(const o of e)for(let a=r.length-1;a>=0;a--){const l=r[a];if(!(o.w>l.w||o.h>l.h)){if(o.x=l.x,o.y=l.y,s=Math.max(s,o.y+o.h),i=Math.max(i,o.x+o.w),o.w===l.w&&o.h===l.h){const c=r.pop();a<r.length&&(r[a]=c)}else o.h===l.h?(l.x+=o.w,l.w-=o.w):o.w===l.w?(l.y+=o.h,l.h-=o.h):(r.push({x:l.x+o.w,y:l.y,w:l.w-o.w,h:o.h}),l.y+=o.h,l.h-=o.h);break}}return{w:i,h:s,fill:t/(i*s)||0}}var i9={down:()=>{},up:e=>e.y=-e.y,left:e=>{const t=e.x;e.x=-e.y,e.y=t},right:e=>{const t=e.x;e.x=e.y,e.y=-t}},g0=(e,t)=>isFinite(e)&&e>0?e:t;function s9(e){return{nodesSeparation:g0(e.nodesSeparation,0),componentsSeparation:g0(e.componentsSeparation,25),layerSeparation:g0(e.layerSeparation,50)}}function o9(e,{componentsSeparation:t,packing:n}){const r=[];for(let i=0;i<e.length;i++){const s=e[i],o=s.nodes;if(s.isFake&&s.w!==void 0&&s.h!==void 0){r.push({w:s.w,h:s.h,x:void 0,y:void 0,dag:s});continue}if(s.nodes.length===1){const h=2*o[0].data.radius;r.push({w:h+t/2,h:h+t/2,x:void 0,y:void 0,dag:s});continue}const{minX:a,maxX:l,minY:c,maxY:d}=o.reduce((h,{x:g,y:p,data:m})=>{const f=m.radius||0;return h.minX=Math.min(h.minX,g-f),h.maxX=Math.max(h.maxX,g+f),h.minY=Math.min(h.minY,p-f),h.maxY=Math.max(h.maxY,p+f),h},{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}),u=(l+a)/2;o.forEach(h=>{h.x-=u}),r.push({w:Math.abs(l-a)+t/2,h:Math.abs(d-c)+t/2,minX:a,x:void 0,y:void 0,dag:s})}if(n!=="singleline")r9(r);else{let i=0;for(let s=0;s<r.length;s++){const o=r[s];o.x=i,o.y=0,i+=o.w}}return r}function a9(e,t={}){const{componentsSeparation:n}=s9(t);t.direction===void 0&&(t.direction="down");const r=o9(e,{componentsSeparation:n,packing:t.packing});for(let i=0;i<r.length;i++){const{x:s=0,y:o=0,dag:a}=r[i];for(const l of a.nodes)l.x+=s,l.y+=o,i9[t.direction](l)}}var Eb={id:"__SENTINEL__",layer:-1,sink:!1,fixed:!1,siblingIndex:-1,parentIds:[],children:[],radius:0,ref:null},$c=e=>e.data===Eb||!1,$y=e=>!$c(e),l9=[],c9=(e,t)=>({id:e,layer:t,data:Eb,children:l9,ref:void 0,x:0,y:0}),d9=(e,t)=>({id:e,layer:-1,data:t,children:[],x:0,y:0}),MA=class{constructor(t,n,r){this.data=t,this.prev=n,this.next=r}toString(){return this.data}},PF=e=>e.reduce((t,n)=>(t[n]=!0,t),{});function u9(e,t){const n=[e],r=PF(n),i=[e];for(;n.length;){const s=n.shift();for(const o of t[s])r[o]||(r[o]=!0,i.push(o),n.push(o))}return i}function Sb(e){return e.reduce((t,{source:n,target:r})=>(t[n]=t[n]||[],t[r]=t[r]||[],t[n].push(r),t[r].push(n),t),{})}function h9(e){return e.reduce((t,{source:n,target:r})=>(t[n]=t[n]||[],t[n].push(r),t),{})}function g9(e,t,n){const r=n||Sb(t||[]);return e.filter(({id:i})=>!(i in r))}function p9(e,t){const n=PF(t);return e.filter(r=>!(r in n))}function ni(e,t){e.forEach((n,r)=>{n.forEach((i,s,o)=>{t(i,s,o,r)})})}var FA=e=>{let t=Math.floor(e.length/2);return(e=[...e].sort((n,r)=>n-r)).length%2!=0?e[t]:(e[t-1]+e[t])/2};function m9(e,t,n){const r=Sb(t);let i=Object.keys(r);const s=[];for(;i.length;){const o=u9(i[0],r);s.push(o),i=p9(i,o)}return n.skipSingletons?s:s.concat(g9(e,t,r).map(({id:o})=>[o]))}var f9=e=>e.reduce((t,{radius:n})=>Math.max(t,2*n),0);function _9(e,t){return be({nodes:e.map(n=>yt(be({},n),{data:n})),isFake:!0},t)}function y9(e,t,n){const r=Sb(t||[]),i=e.filter(({id:g})=>!(g in r)).sort((g,p)=>p.radius-g.radius),s=Math.sqrt(i.length);let o=Math.floor(s),a=Math.ceil(s);o*a<i.length&&(o<a?o++:a++);const l=Math.max(1,f9(i)),c=Math.max(n.nodesGridSeparation||0,1),d=l*a+c*(a-1),u=l*o+c*Math.max(o-1,0),h=_9(i,{w:d,h:u});return h.nodes.forEach((g,p)=>{const m=p%a,f=Math.floor(p/a);g.x=d*m/a,g.y=u*f/o}),h}function v9(e,t,n){const r=t.reduce((o,a)=>(o[a.source]=o[a.source]||[],o[a.source].push(a),o),{}),{result:i}=e.reduce(function o(a,l){const{visited:c,stack:d,result:u}=a;if(c[l.id])return a;c[l.id]=d[l.id]=1;const h=r[l.id]||[];for(const g of h)d[g.target]?u.push(g):o(a,n[g.target]);return delete d[l.id],a},{visited:{},stack:{},result:[]}),s=i.reduce((o,{source:a,target:l})=>(o[a]=o[a]||{},o[a][l]=1,o),{});return t.map(o=>{const{source:a,target:l,id:c}=o;return s[a]&&s[a][l]?{id:c,source:l,target:a}:o})}function x9(e){if(!e||!e.length)throw Error("Cannot stratify empty data");for(const i of e){if(!i)throw Error('Node data is "null"');if(i.id==null)throw Error('Node id contains a "null" value')}const t=e.map(i=>d9(i.id,i)),n=t.reduce((i,s)=>{if(i[s.id])throw Error(`The connected component contains id duplicates: ${s.id}`);return i[s.id]=s,i},{}),r=[];for(let i=0;i<t.length;i++){const s=t[i];for(let o=0;o<s.data.parentIds.length;o++){const a=s.data.parentIds[o],l=n[a];if(!l)throw Error(`The node ${s.id} has a missing parent id ${a}`);l.children.push(s)}s.data.parentIds.length||r.push(s)}return{isFake:!1,nodes:b9(r)}}function b9(e){const t={},n=[];for(;e.length;){const r=e.pop();t[r.id]||(n.push(r),t[r.id]=!0,e.push(...r.children))}return n}var w9=class{constructor(){this.byId={},this.byIndex={},this.length=0}append(e,t){let n;return this.head?(n=new MA(e,this.tail),this.tail=this.tail.next=n):(n=new MA(e),this.tail=this.head=n),this.byId[t]=n,this.byIndex[this.length++]=n,n}find(e){let t=this.head;do{if(t.data===e)return t;t=t.next}while(t)}forEach(e){let t=this.head,n=0;do e(t,n),n++;while(t=t.next)}},ri=-1,_n=1e-5,p0=[],E9=class{constructor(t,n,r){this.edges=[],this.nodeMap={},this.nodeIndexTopDown={},this.nodeToLayer={},this.longEdges={},this.virt={},this.height={},this.breadth={},this.first=[],this.totalW={},this.mDist={},this.X={},this.block={},this.nodeList=new w9,this.nodeDistance=n,this.layerDistance=r,this.layers=t;const{breadth:i,virt:s,height:o,nodeToLayer:a,nodeIndexTopDown:l,nodeMap:c,longEdges:d,edges:u}=this;let h=0;ni(this.layers,(f,y,_,v)=>{if(l[f.id]=h++,c[f.id]=f,a[f.id]=v,this.nodeList.append(f,f.id),f.children.forEach(b=>{const w=$c(b)||$c(f);u.push({source:f.id,target:b.id,virtual:w,id:u.length})}),d[f.id])return;const x=[f.id];if(d[f.id]=x,!$y(f))for(let b=0;b<f.children.length;b++){const w=f.children[b];if($y(w))continue;let S=w;for(;$c(S);)x.push(S.id),d[S.id]=x,S=S.children[0]}});const g=this.adjacencyList=h9(u);this.N=t.reduce((f,y)=>f+y.length,0),this.Y=new Float32Array(t.length),this.first=t.map(f=>f[0]),t.forEach((f,y)=>o[y]=0),ni(this.layers,(f,y,_,v)=>{const x=g[f.id]?g[f.id].length:0;s[f.id]=$c(f)&&x===1,this.nodeToLayer[f.id]=v,s[f.id]?i[f.id]=0:(i[f.id]=2*f.data.radius,o[v]=Math.max(o[v]||0,2*f.data.radius))});const p={},m={};u.forEach(f=>{const y=f.source,_=f.target;p[_]=p[_]||[],p[_].push(y),m[y]=m[y]||[],m[y].push(_)}),Object.values(p).forEach(f=>{f.sort((y,_)=>this.nodeIndexTopDown[y]-this.nodeIndexTopDown[_])}),Object.values(m).forEach(f=>{f.sort((y,_)=>this.nodeIndexTopDown[y]-this.nodeIndexTopDown[_])}),this.neighbours={prev:p,next:m}}computeMinNodeDistances(){const{layers:t,totalW:n}=this;ni(t,r=>{n[r.id]=0}),ni(t,r=>n[r.data.id]=0),this.layers.forEach(r=>{n[r[0].id]=0,r.slice(1).forEach((i,s)=>{const o=r[s],a=i.id;n[a]=n[o.id]+o.data.radius+i.data.radius+this.nodeDistance})})}decrossVirtualEdges(){this.layers.forEach(t=>{let n=-1;t.forEach(r=>{if(!this.virt[r.id])return;const i=this.neighbours.next[r.id][0];if(this.virt[i])if(n!==-1&&n>this.nodeIndexTopDown[i]){const s=this.longEdges[r.id];let o=0;for(o=0;o<s.length&&s[o]!==i;o++);const a=s.slice(o);a.forEach(c=>this.longEdges[c]=a);const l=s.slice(0,o);l.forEach(c=>this.longEdges[c]=l)}else n=this.nodeIndexTopDown[i]})})}placeLongEdges(){const{X:t,layers:n}=this;ni(n,r=>t[r.id]=0);for(let r=1;r>=-1;r-=2){const i={};let s=0;const o={};ni(n,d=>o[d.id]=0),o[Eb.id]=0;const a=r;n.forEach(d=>{let u=a===1?d[0]:d[d.length-1];o[u.id]||(this.longEdges[u.id].forEach(p=>{o[p]=s}),s++);let h=a===1?0:d.length-1,g=h+a;for(;g>=0&&g<d.length;)u=d[g],o[u.id]||this.longEdges[u.id].forEach(p=>{o[p]=o[d[h].id]}),h=g,g+=a});const l={};n.forEach(d=>{for(let u=a===1?0:d.length-1;a===1?u<d.length:u>=0;u+=a){const h=d[u],g=o[h.id];l[g]=l[g]||[],l[g].push(h.id)}});const c={};this.nodeList.forEach(d=>c[d.data.id]=0);for(let d=0;d<s;d++){const u={done:!1,dist:0},h=l[d];for(let g=0;g<h.length;g++){const p=h[g];this.sortLongEdges(p,r,c,u,o,i)}if(!u.done){const g=this.layers[this.nodeToLayer[l[d][0]]],p=[];g.forEach(m=>{for(const f of this.neighbours.prev[m.id]||p0){const y=Math.abs(c[f]-c[m.id]);p.push(y)}}),p.length!==0&&(u.dist=FA(p))}for(let g=0;g<h.length;g++)c[h[g]]-=r*u.dist}ni(n,d=>t[d.id]+=c[d.id]/2)}}sortLongEdges(t,n,r,i,s,o){if(o[t])return!1;let a=!1,l=0;const{nodeToLayer:c,totalW:d}=this,u=this.longEdges[t];u.forEach(h=>o[h]=!0),u.forEach(h=>{const g=this.nodeList.byIndex[this.nodeIndexTopDown[h]-n];if(!g)return;const p=g.data.id,m=h,f=c[p]===c[m],y=s[p]===s[m];!f||!y||(this.sortLongEdges(p,n,r,i,s,o),(!a||n*(l-r[p])<n*(d[m]-d[p]))&&(a=!0,l=r[p]+d[m]-d[p]))}),u.forEach(h=>{r[h]=l;const g=this.nodeList.byId[h],p=n===1?g.next:g.prev;if(!p)return;const m=p.data.id,f=h,y=c[m]===c[f],_=s[m]!==s[f],v=n*(d[m]-d[f]-r[m]+r[f]);y&&_&&(!i.done||v>i.dist)&&(i.dist=v,i.done=!0)})}placeNonVirtualNodes(){const t={};ni(this.layers,c=>t[c.id]=-1);const{X:n,totalW:r,virt:i,nodeIndexTopDown:s,mDist:o,nodeList:a}=this,l={};ni(this.layers,(c,d,u,h)=>{if(!i[c.id])return void(l[c.id]=!1);let g=this.nodeList.byId[c.id].next;for(;g&&this.nodeToLayer[g.data.id]===h&&!i[g.data.id];)g=g.next;l[c.id]=this.nodeToLayer[g.data.id]===h&&n[g.data.id]-n[c.id]<r[g.data.id]-r[c.id]+_n}),ni(this.layers,({id:c})=>{l[c]&&t[c]===-1&&this.longEdges[c].forEach(d=>{d!==c&&(t[d]=s[d]<s[c]?1:0)})}),ni(this.layers,({id:c})=>o[c]=r[c]);for(let c=0;c<2;c++)for(let d=c?this.layers.length-1:0;d>=0&&d<this.layers.length;c?d--:d++){let u=ri;const h=this.layers[d];if(h.forEach(({id:g},p,m)=>{if(i[g]){if(u===ri){this.placeSequence(ri,g,m[0].id,a.byId[g].prev.data.id,c);for(let f=0;f<p;f++){const y=m[f].id;o[y]=o[g]-n[g]+n[y]}}else if(t[u]!==1-c){l[u]||this.placeSequence(u,g,a.byId[u].next.data.id,a.byId[g].prev.data.id,c);const f=c===1?this.neighbours.prev:this.neighbours.next,y=f[u][0],_=f[g][0];if(i[y]&&i[_])for(let v=s[y]+1;v<s[_];v++)t[a.byIndex[v].data.id]=c}u=g}}),u===ri)this.placeSequence(ri,ri,h[0].id,h[h.length-1].id,c),h.forEach(({id:g})=>o[g]=n[g]);else{this.placeSequence(u,ri,a.byId[u].next.data.id,h[h.length-1].id,c);for(let g=h.length-1;g>=0;g--){const p=h[g].id;if(p===u)break;o[p]=o[u]-n[u]+n[p]}}}}placeSequence(t,n,r,i,s,o=0){const a=this.nodeIndexTopDown[r],l=this.nodeIndexTopDown[i],{X:c,nodeIndexTopDown:d,mDist:u}=this;if(a===l)c[r]=this.placeNode(r,t,n,c[r],s);else if(a<l){const h=Math.floor((d[r]+d[i])/2),g=this.nodeList.byIndex[h],p=g.next.data.id,m=u[p]-u[g.data.id];this.placeSequence(t,n,r,g.data.id,s,o+1),this.placeSequence(t,n,p,i,s,o+1),this.combineSequences(t,n,r,i,p,g.data.id,s,m)}}calculateBends(t,n,r,i,s,o,a,l){let c=0;const d=[],{X:u,mDist:h,neighbours:g}=this,p=this.nodeIndexTopDown[r],m=this.nodeIndexTopDown[i];for(let f=this.nodeList.byId[o],y=this.nodeIndexTopDown[f.data.id];y>=p&&y<=m&&f;f=t===-1?f.prev:f.next,y=f&&this.nodeIndexTopDown[f.data.id]){const _=f.data.id,v=(n===0?g.prev[_]:g.next[_])||p0;let x=0;for(let w=0;w<v.length;w++){const S=v[w];if(t*(u[S]-u[_])<_n)x++;else{x--;const A=u[S]+h[o]-h[_];t*(u[o]-A)>-_n?c++:(l===ri||t*(A-u[l]+h[l]-h[o])<_n)&&t*(A-u[s])<a-_n&&d.push({value:2,key:A})}}const b=u[_]+h[o]-h[_];t*(u[o]-b)>-_n?c+=x:(l===ri||t*(b-u[l]+h[l]-h[o])<_n)&&t*(b-u[s])<a-_n&&d.push({value:x,key:b})}return l!==ri&&d.push({value:this.edges.length,key:u[l]-h[l]+h[o]}),d.sort(({key:f},{key:y})=>f-y),{res:c,bends:d.reduce((f,y,_)=>{if(_<d.length-1){const v=d[_+1];Math.abs(y.key-v.key)>_n?y.value>0&&f.push(y):y.value+=v.value}else y.value>0&&f.push(y);return f},[])}}combineSequences(t,n,r,i,s,o,a,l){const{X:c,mDist:d,nodeIndexTopDown:u}=this;let{res:h,bends:g}=this.calculateBends(-1,a,r,i,s,o,l,t),{res:p,bends:m}=this.calculateBends(1,a,r,i,o,s,l,n);for(g.length>0&&g.reverse();c[s]-c[o]<l-_n;){let _=0,v=0;if(h<p){const x=g.length;if(x>0){const b=g.pop();_=b.value,c[o]=b.key}(x===0||c[s]-c[o]>l+_n)&&(c[o]=c[s]-l)}else if(h>p){const x=m.length;if(x>0){const b=m.pop();v=b.value,c[s]=b.key}(x===0||c[s]-c[o]>l+_n)&&(c[s]=c[o]+l)}else{let x=(l-c[s]+c[o])/2;const b=g.length===0?x+1:c[o]-g[g.length-1].key,w=m.length===0?x+1:m[m.length-1].key-c[s];b<x+_n&&b<w+_n&&(_=g.pop().value),w<x+_n&&w<b+_n&&(v=m.pop().value),x=Math.min(x,b,w),c[o]-=x,c[s]+=x}h+=_,p+=v}let f,y=this.nodeList.byId[o].prev;for(;y&&u[f=y.data.id]>=u[r]&&c[o]-c[f]<d[o]-d[f];)c[f]=c[o]-d[o]+d[f],y=y.prev;for(y=this.nodeList.byId[s].next;y&&u[f=y.data.id]<=u[i]&&c[s]-c[f]>d[s]-d[f];)c[f]=c[s]-d[s]+d[f],y=y.next}placeNode(t,n,r,i,s){const{X:o,neighbours:a,mDist:l}=this,c=((s===0?a.prev:a.next)[t]||p0).map(d=>o[d]);return c.length===0?o[t]:(i=FA(c),n!==ri&&(i=Math.max(i,o[n]+l[t]-l[n])),r!==ri&&(i=Math.min(i,o[r]+l[t]-l[r])),i)}moveLongEdge(t,n,r){const{X:i,virt:s,totalW:o,nodeList:a}=this,{id:l}=t.data;if(r[l]||!s[l])return;const c=this.longEdges[l];if(!c)return;c.forEach(f=>r[f]=!0);const d=c[0],u=c[c.length-1],h=[];n<0?h.push(i[d]<i[u]?i[d]:i[u],i[d]<i[u]?i[u]:i[d]):n>0?h.push(i[d]<i[u]?i[u]:i[d],i[d]<i[u]?i[d]:i[u]):h.push(i[d],i[u]);const g=h[0];let p,m=!1;for(;!m&&h.length!==0;)p=h.pop(),m=!0,c.forEach(f=>{const y=this.layers[this.nodeToLayer[f]];if(f!==y[0].id){const _=a.byId[f].prev.data;p-i[_.data.id]<o[f]-o[_.data.id]&&this.moveLongEdge(_,-1,r),m=m&&p-i[_.data.id]>=o[f]-o[_.data.id]-_n}if(f!==y[y.length-1].id){const _=a.byId[f].next.data;p-i[_.data.id]>o[f]-o[_.data.id]&&this.moveLongEdge(_,1,r),m=m&&p-i[_.data.id]<=o[f]-o[_.data.id]+_n}});m||(p=g,c.forEach(f=>{const y=this.layers[this.nodeToLayer[f]];if(f!==y[0].id){const _=a.byId[f].prev.data;p=Math.max(p,i[_.data.id]+o[f]-o[_.data.id])}if(f!==y[y.length-1].id){const _=a.byId[f].next.data;p=Math.min(p,i[_.data.id]+o[f]-o[_.data.id])}})),c.forEach(f=>i[f]=p)}moveLongEdges(){const t={};this.layers.forEach(n=>{const r=Math.floor(n.length/2);for(let i=r;i<n.length;i++)this.moveLongEdge(n[i],0,t);for(let i=r-1;i>=0;i--)this.moveLongEdge(n[i],0,t)})}computeY(){const{Y:t,layers:n,height:r}=this;t[0]=0,n.slice(1).forEach((i,s)=>{t[s+1]=t[s]+(r[s]+r[s+1])/2+this.layerDistance})}straightenLongEdge(t,n){const{nodeList:r,longEdges:i,neighbours:s,X:o,Y:a,nodeToLayer:l,totalW:c}=this,d=i[t.id];if(n[t.id]||!s.prev[t.id]||s.prev[t.id].length!==1||!s.next[t.id]||s.next[t.id].length!==1||!(d&&d.length<2))return;n[t.id]=!0;const u=s.prev[t.id][0],h=s.next[t.id][0];if(l[h]===l[u])return;const g=o[u]+(o[h]-o[u])*(a[l[t.id]]-a[l[u]])/(a[l[h]]-a[l[u]]);if(t!==this.first[l[t.id]]){const m=r.byId[t.id].prev.data;if(g-o[m.id]<c[t.id]-c[m.id]-_n&&this.straightenLongEdge(m,n),g-o[m.id]<c[t.id]-c[m.id]-_n)return}const p=this.layers[l[t.id]];if(t!==p[p.length-1]){const m=r.byId[t.id].next.data;if(o[m.id]-g<c[m.id]-c[t.id]-_n&&this.straightenLongEdge(m,n),o[m.id]-g<c[m.id]-c[t.id]-_n)return}o[t.id]=g}straightenEdges(){const t={};this.layers.forEach(n=>{const r=Math.floor(n.length/2);for(let i=r;i<n.length;i++)this.straightenLongEdge(n[i],t);for(let i=r-1;i>=0;i--)this.straightenLongEdge(n[i],t)})}run(){this.computeMinNodeDistances(),this.decrossVirtualEdges(),this.placeLongEdges(),this.placeNonVirtualNodes(),this.moveLongEdges(),this.computeY(),this.straightenEdges(),ni(this.layers,(t,n,r,i)=>{t.x=this.X[t.id],t.y=this.Y[i]})}},S9=(e,t=20,n=50)=>new E9(e,t,n).run();function A9(e){if(e.sort((r,i)=>r-i),e.length===0)return 0;const t=Math.floor(e.length/2),n=Math.floor(e.length/2);return(e[t]+e[n])/2}function Gy(e,t,n){const r={};return t.forEach((i,s)=>r[i.id]=s),e.map(i=>(n[i.id]||[]).map(s=>r[s]).sort()).reduce((i,s,o,a)=>{const l=s.length?s[s.length-1]:-1;for(let c=o+1;c<a.length;c++)i+=a[c].filter(d=>d<l).length;return i},0)}function k9(e,t,n,r,i){const s={};for(let o=0;o<e.length;o++)s[e[o].id]=A9((t[e[o].id]||[]).map(a=>n[a]))||0;i?e.sort((o,a)=>{const l=s[o.id]-s[a.id],c=r[o.id]===r[a.id],d=o.data.siblingIndex,u=a.data.siblingIndex;return c&&d>-1&&u>-1?d-u:l===0?n[a.id]-n[o.id]:l}):e.sort((o,a)=>{const l=s[o.id]-s[a.id];return l===0?n[a.id]-n[o.id]:l})}function RA({layers:e,topDown:t,topDownAdj:n,bottomUpAdj:r,idToIndex:i,crossings:s,sortSiblings:o}){const a=t?n:r;for(let l=t?0:e.length-1;t?l<e.length:l>=0;t?l++:l--){k9(e[l],a[l]||{},i,r[l],o);const c=l>0?Gy(e[l-1],e[l],n[l-1]):0,d=l<e.length-1?Gy(e[l],e[l+1],n[l]):0;d+c<(s[l]||0)+(s[l-1]||0)?(s[l]=d,l>0&&(s[l-1]=c),e[l].forEach((u,h)=>i[u.id]=h)):e[l].sort((u,h)=>i[u.id]-i[h.id])}}var C9=(e,t,n)=>{if(!n&&!t)return;const r={},i=e.map(()=>({})),s=e.map(()=>({}));e.forEach((d,u)=>{d.forEach((h,g)=>{r[h.id]=n?h.data.siblingIndex:g,h.children.forEach(p=>{const m=p.layer;m>u?(i[u][h.id]=i[u][h.id]||[],i[u][h.id].push(p.id),s[m][p.id]=s[m][p.id]||[],s[m][p.id].push(h.id)):(i[m][p.id]=i[m][p.id]||[],i[m][p.id].push(h.id),s[u][h.id]=s[u][h.id]||[],s[u][h.id].push(p.id))})})}),r[-1]=-1,n&&e.forEach(d=>d.sort((u,h)=>r[u.id]-r[h.id]));const o=e.slice(1).map((d,u)=>Gy(e[u],d,i[u])),a=[[50,100],[100,10],[1e3,1],[5e3,0]],l=Math.max(...e.map(d=>d.length)),c=(a.find(([d])=>l<d)||a[a.length-1])[1];for(let d=0;d<c;d++)RA({layers:e,topDown:!0,topDownAdj:i,bottomUpAdj:s,idToIndex:r,crossings:o,sortSiblings:n}),RA({layers:e,topDown:!1,topDownAdj:i,bottomUpAdj:s,idToIndex:r,crossings:o,sortSiblings:n})};function T9(e){const t={},n={},r={};e.nodes.forEach(o=>{r[o.id]=o});const i=o=>{if(t[o.id])return n[o.id];t[o.id]=!0;let a=1/0;for(const l of o.children)a=Math.min(a,i(r[l.id])-1);return a===1/0&&(a=0),n[o.id]=a,a};e.nodes.forEach(o=>{o.data.parentIds.length===0&&i(o)});let s=1/0;e.nodes.forEach(o=>{s=Math.min(s,n[o.id])}),e.nodes.forEach(o=>{n[o.id]-=s,o.layer=n[o.id]})}function N9(e){const t=e.nodes.reduce((n,r)=>r.data.fixed&&(n===null||n.layer>r.layer)?r:n,null);return t&&e.nodes.forEach(n=>n.ref=t.id),e}function L9(e){e.nodes.forEach(t=>{t.layer=t.data.layer!=null?t.data.layer:t.layer})}function I9(e){if(e.nodes.every(t=>t.layer)){const t=e.nodes.reduce((n,r)=>Math.min(n,r.layer),1/0);e.nodes.forEach(n=>n.layer-=t)}}function P9(e){const t={};e.nodes.forEach(s=>{t[s.id]=[...t[s.id]||[],...s.children],s.children.forEach(o=>{t[o.id]=[...t[o.id]||[],s]})});const n=[];e.nodes.forEach(s=>{s.layer===0&&n.push(s)});const r={},i={};for(e.nodes.forEach(s=>{s.layer!==-1&&(i[s.id]=s.layer)});n.length;){const s=n.shift().id;for(const o of t[s])if(!r[o.id]){if(i[o.id]===void 0){const a=i[s]+1;i[o.id]=a,o.layer=a}r[o.id]=!0,n.push(o)}}}function M9(e){if(e.nodes.some(t=>t.data.sink)){const t=e.nodes.reduce((n,r)=>Math.max(n,r.layer),-1/0);e.nodes.forEach(n=>{n.data.sink&&(n.layer=t+1)})}}function F9(e){const t=[];e.nodes.forEach(r=>t[r.layer]=0);const n=Array.from(t).reduce((r,i,s)=>{if(s===0)return r.push(0),r;const o=r[s-1];return i!==void 0?(r.push(o),r):(r.push(o-1),r)},[]);e.nodes.forEach(r=>r.layer+=n[r.layer])}function R9(e){if(e.nodes.some(t=>"layer"in t.data&&t.data.layer<0))throw new Error("Some nodes have negative layering information");return e.nodes.some(t=>t.data&&!isNaN(t.data.layer)&&t.data.layer!==null)||T9(e),L9(e),P9(e),M9(e),I9(e),F9(e),e.nodes.forEach(t=>{const{below:n,above:r}=t.children.reduce((i,s)=>(t.layer>s.layer?i.above.push(s):i.below.push(s),i),{above:[],below:[]});r.forEach(i=>i.children.push(t)),t.children=n}),N9(e)}var D9=(e,{nodeDistance:t,layerDistance:n,nodeLookup:r,customSort:i,sortSiblings:s,shouldDecross:o=!0})=>{R9(e);const a=z9(e);return e.nodes.length>1?(C9(a,o,s),i&&a.forEach(l=>{l.sort((c,d)=>i(r[c.id],r[d.id]))}),S9(a,t,n)):(e.nodes[0].x=0,e.nodes[0].y=0),O9(e),e};function z9(e){return e.nodes.reduce((t,n)=>(t[n.layer]=t[n.layer]||[],t[n.layer].push(n),n.children=n.children.map(r=>{if(r.layer===n.layer+1)return r;let i=r;for(let s=r.layer-1;s>n.layer;s--){const o=c9(`${n.id}->${r.id}@${s}`,s);o.children=[i],t[s]=t[s]||[],t[s].push(o),i=o}return i}),t),[])}function O9(e){e.nodes.forEach(t=>{t.data&&(t.children=t.children.filter($y))})}var m0=({id:e,layer:t,sink:n,siblingIndex:r,radius:i,layoutable:s})=>({id:e,layer:t!==void 0?t:void 0,sink:n,siblingIndex:r||0,radius:i||0,fixed:s===!1,parentIds:[],children:[],ref:null});function B9(e){const t={x:0,y:0};let n=0;for(let r=0;r<e.length;r++){const i=e[r];for(let s=0;s<i.nodes.length;s++){const o=i.nodes[s];t.x+=o.x||0,t.y+=o.y||0,n++}}return t.x/=n,t.y/=n,t}function j9(e){const t={x:0,y:0};let n=0;for(const r in e)t.x+=e[r].x||0,t.y+=e[r].y||0,n++;return t.x/=n,t.y/=n,t}function U9(e,t,n){const r=B9(n),i=e.x-r.x,s=e.y-r.y;for(let o=0;o<n.length;o++){const a=n[o];for(let l=0;l<a.nodes.length;l++){const c=a.nodes[l],d=t[c.id];!d||c.data&&c.data.fixed||(d.x=c.x+i,d.y=c.y+s)}}}var $9=(e,t={})=>{const n=(e.edges||[]).filter(({source:l,target:c})=>l!==c),r={},i=new Map;for(const l of e.nodes)r[l.id]=l;const s=v9(e.nodes,n,r).filter(l=>{const c=i.get(l.source);if(!c){const d=new Map;return d.set(l.target,!0),i.set(l.source,d),!0}return!c.get(l.target)&&(c.set(l.target,!0),!0)}),o=m9(e.nodes,s,{skipSingletons:t.packing==="grid"}),a=s.reduce((l,c)=>(l[c.source]||(l[c.source]=m0(r[c.source])),l[c.target]||(l[c.target]=m0(r[c.target])),l[c.target].children.push(c.source),l[c.target].parentIds.push(c.source),l),{});return{components:o.map(l=>l.map(c=>a[c]||m0(r[c]))),lookup:r}};function G9(e,t,n){const r=[];for(const i of e){const s=x9(i);r.push(s),D9(s,{nodeDistance:n.nodesSeparation,layerDistance:n.layerSeparation,shouldDecross:n.shouldDecross,customSort:n.customSort,sortSiblings:!!n.sortSiblings,nodeLookup:t})}return r}var DA=(e,t={})=>{if(!e||!e.nodes)return e;const n=yt(be({direction:"down",packing:"fit",nodesGridSeparation:1},t),{shouldDecross:t.shouldDecross!==!1}),{components:r,lookup:i}=$9(e,n),s=j9(i),o=G9(r,i,n);if(n.packing==="grid"){const a=y9(e.nodes,e.edges,n);o.push(a)}return a9(o,n),U9(s,i,o),e},f0={direction:"TB",nodeDistance:5,levelDistance:50,componentDistance:50,gapWidth:1,arrangeComponents:"fit",gridDistance:50,layer:"layer",siblingIndex:""},Vy={name:"hierarchical",imports:{sequential:DA},configure:function(e,{graph:t,data:n}){function r(_,v,x=_.getNodes()){return v?v instanceof Ms?v:_.getNodes(v):x}const i=yt(be(be({},f0),e),{nodeList:e.nodes});i.direction=e.direction||f0.direction,i.layerSeparation=i.levelDistance,i.nodesSeparation=i.nodeDistance,i.componentsSeparation=i.componentDistance,i.gapDistance=i.gapWidth,i.packing=i.arrangeComponents;const s=be({},i),o=i.edges,a=i.nodeList;if(["TB","BT","LR","RL"].indexOf(i.direction)===-1)throw new Error('direction should be one of the "TB", "BT", "LR", "RL"');if(["fit","grid","singleLine"].indexOf(i.packing)===-1)throw new Error('arrangeComponents should be one of the "fit", "grid", "singleLine"');i.nodesGridSeparation=e.gridDistance||f0.gridDistance;const l=a.getId(),c=a.getAttribute("layoutable").reduce((_,v,x)=>(_[l[x]]=v,_),{}),d=a.getAttributes(["x","y"]).reduce((_,v,x)=>(_[l[x]]=v,_),{}),u=a.getAttribute("radius");if(typeof s.layer!="string")throw new Error("'layer' should be the valid data field name");if(s.siblingIndex===void 0&&(s.siblingIndex=""),typeof s.siblingIndex!="string")throw new Error("'siblingIndex' should be the valid data field name");const h=r(t,i.roots,t.nodeList()),g=n.getProperty(i.nodeList,s.layer),p=s.siblingIndex.length?n.getProperty(i.nodeList,s.siblingIndex):[],m=h.map(_=>{let v=-1;return i.nodeList.forEach((x,b)=>{x===_&&(v=b)}),v});for(const _ of m)g[_]=0;const f=r(t,i.sinks,t.nodeList()).toArray().reduce((_,v)=>(_[v.getId()]=!0,_),{}),y=l.map(_=>f[_]);return{nodes:l,edges:o.map(_=>({id:_.getId(),source:_.getSource().getId(),target:_.getTarget().getId()})),options:vm(i),layoutable:c,radiuses:u,siblingIndexes:p,layers:g,sinks:y,coords:d}},context:wt,update:function({nodes:e,edges:t,options:n,layoutable:r,radiuses:i,layers:s,siblingIndexes:o,sinks:a,coords:l}){const c=t.filter(({source:h,target:g})=>h in r&&g in r),d={nodes:e.map((h,g)=>({id:h,radius:i[g],layer:s[g],siblingIndex:o[g],sink:a[g],layoutable:r[h],x:l[h].x,y:l[h].y})),edges:c},{nodes:u}=DA(d,{packing:{fit:"fit",singleLine:"singleline",grid:"grid"}[n.arrangeComponents],direction:{TB:"down",BT:"up",RL:"left",LR:"right"}[n.direction],layerSeparation:n.layerSeparation,nodesSeparation:n.nodesSeparation,sortSiblings:o.length>0,componentsSeparation:n.componentsSeparation,nodesGridSeparation:n.nodesGridSeparation,evenDistribution:n.evenDistribution});return{positions:u}},isRunning:function(){return!1},onSync:function({positions:e},{graph:t}){return{indexes:e.map(({id:n})=>(t.getNode(n)||{_index:-1})._index),x:e.map(({x:n})=>n),y:e.map(({y:n})=>n)}}},V9=e=>(e.modules.layouts.register(Vy),(t={})=>(t.useWebWorker=!1,e.modules.layouts.start(Vy.name,t))),Hy=(e,t)=>e-t,zA={name:"radial",imports:{minHeap:vx,bellmanFord:xx,dijkstra:bx,johnson:O_,distance:En,circleCircleIntersection:Sx,circleSortCompare:Ax,weightedStress:rL,distanceStress:iL,constrainedStress:D_,stressMinimizationStep:z_,removeRadialOverlap:U_,linear:yp,calculateRadii:eS},configure(e,{graph:t}){let n=e.nodes;const r=n.size;function i(w,S){return w!=null&&isFinite(w)?w:S}if(e.centralNode===void 0)throw new Error('radial layout: missing parameter "centralNode"');const s=t.getNode(e.centralNode);if(s===void 0)throw new Error('radial layout: parameter "centralNode" is not valid');e.radiusRatio=i(e.radiusRatio,Math.SQRT2),e.radiusDelta=i(e.radiusDelta,0),e.nodeGap=i(e.nodeGap,10),e.repulsion=r*i(e.repulsion,1);const o=s.getPosition(),a=i(e.centerX,o.x),l=i(e.centerY,o.y),c=s._index;n.includes(s)||(n=n.concat(s.toList()));let d=n._indexes;const u=n.getAttribute("layoutable");d=d.filter((w,S)=>u[S]||w===c),d.sort(Hy);const h=d.length,g=H9(d,t.getConnectedComponents(n,{internalIndexes:!0}),c),p=t.degrees(d),m=new Float32Array(t.getNodeAttribute("x").getMultiple(d)),f=new Float32Array(t.getNodeAttribute("y").getMultiple(d)),y=t.getNodeAttribute("radius").getMultiple(d),_=t.getEdges()._indexes,v=t.getEdgeAttribute("source").getMultiple(_),x=t.getEdgeAttribute("target").getMultiple(_),b=t.getAdjacencyList({internalIndexes:!0,weight:1,indexes:d});return{centerIndex:c,centerIndexPos:0,cx:a,cy:l,D:null,indexes:d,components:g,normIndexes:null,radii:null,rings:null,x:m,y:f,degree:p,size:h,attributes:{size:y,adjacency:b,weights:x.map(()=>1),sources:v,targets:x},sortAttr:null,allowOverlap:!!e.allowOverlap,nodeGap:e.nodeGap,radiusRatio:e.radiusRatio,radiusDelta:e.radiusDelta,repulsion:e.repulsion,randomize:!("randomize"in e)||!!e.randomize,renderSteps:!!e.renderSteps,epsilon:i(e.epsilon,.001),maxSteps:i(e.maxIterations,100),iterationsPerRender:i(e.iterationsPerRender,20),step:-1,stress:Number.POSITIVE_INFINITY,prevStress:0,converged:!1,overlapRemoved:!1,done:!1}},context:()=>({data:null,gridPlacement(e,t,n=8){const r=e.length,i=new Float32Array(r),s=new Float32Array(r);let o=0;for(let h=0,g=e.length;h<g;h++){const p=t[e[h]];p>o&&(o=p)}const a=o*n,l=Math.ceil(Math.sqrt(r)),c=Math.ceil(r/l),d=-Math.floor((c-1)*a/2),u=-Math.floor((l-1)*a/2);for(let h=0;h<l;h++)for(let g=0;g<c;g++)i[h*c+g]=d+g*a,s[h*c+g]=u+h*a;return{x:i,y:s}},connectComponents(e,t,n,r,i,s){let o;function a(l,c){const d=new Uint32Array(l.length+1);return d.set(l),d[l.length]=c,d}for(let l=1;l<e.length;l++){const c=e[l];let d=0,u=0;c.forEach((p,m)=>{const f=i.get(p);f!=null&&f>d&&(u=m,d=f)}),o=c[u];const h=t[s.get(o)];h.weights=h.weights||[],h.nodes=a(h.nodes,n),h.weights.push(r);const g=t[s.get(n)];g.weights=g.weights||[],g.nodes=a(g.nodes,o),g.weights.push(r)}},correctSubgraphsDistances(e,t,n,r,i){const s=Array.prototype.reduce.call(e[n],(a,l,c)=>(c!==n&&l<r&&l>a&&(a=l),a),0),o=r-s-1;for(let a=1;a<t.length;a++){const l=t[a];for(let c=0,d=l.length;c<d;c++){const u=i.get(l[c]);u!=null&&(e[n][u]-=o,e[u][n]-=o)}}},initialize(e,t){e.data=t,t.step=0;const n=new Map,r=new Map;t.normIndexes=t.indexes.reduce((c,d,u)=>(c[u]=u,n.set(d,u),r.set(d,t.degree[u]),e.data&&d===t.centerIndex&&(e.data.centerIndexPos=u),c),new Uint32Array(t.indexes.length));const i=t.centerIndexPos,s=t.components[0].length;e.connectComponents(t.components,t.attributes.adjacency,t.centerIndex,s,r,n);const o=O_({sources:t.attributes.sources,targets:t.attributes.targets,weights:t.attributes.weights,indexes:t.indexes,adjacency:t.attributes.adjacency,undirected:!0});e.correctSubgraphsDistances(o,t.components,i,s,n),t.D=o;const a=o[i],l={};for(let c=0,d=t.normIndexes.length;c<d;c++)if(c!==i){const u=a[c];l[u]=l[u]||[],l[u].push(t.normIndexes[c])}t.rings=l,t.radii=eS(i,t.rings,t.attributes.size,t.nodeGap,t.radiusRatio,t.radiusDelta)},removeOverlaps(e,t){if(!e.data)return;const n=e.data.centerIndexPos,r=t.attributes.size,{rings:i,radii:s}=t,o=t.x[n],a=t.y[n];for(const l in i){const c=i[l];for(let d=0;d<c.length;d++){const u=c[d],h=s[l];let g=t.x[u]-o,p=t.y[u]-a;g+p===0&&(g=Math.sin(u)*Math.random()*.001,p=Math.cos(u)*Math.random()*.001);const m=Math.sqrt(g*g+p*p);if(m-h<0){const f=h/m;t.x[u]=o+g*f,t.y[u]=a+p*f}}}for(const l in i){const c=i[l],d=En(o,a,t.x[c[0]],t.y[c[0]]);U_({X:t.x,Y:t.y,sizes:r,indexes:c,center:[o,a],R:d,gap:t.nodeGap,inPlace:!0})}}}),update(e,t){e||(e=t.data);const n=e.indexes,r=e.centerIndex;let i;e.x=e.x||new Float32Array(e.size),e.y=e.y||new Float32Array(e.size),e.step===-1&&t.initialize(t,e);const s=e.repulsion,o=a=>e.radii&&e.radii[a]||1;if(e.step===0&&e.randomize&&(i=t.gridPlacement(e.indexes,e.attributes.size),e.x=i.x,e.y=i.y),!e.converged){const a=e.maxSteps,l=e.iterationsPerRender;let c=e.step;const d=Math.min(c+l,a),{D:u,x:h,y:g,size:p,centerIndexPos:m,normIndexes:f}=e;for(;c<=d&&!e.converged;){const y=yp(Math.min(c,a)/a);e.step=c++,i=z_(u,h,g,p,m,s,y,f,o),e.x=i.x,e.y=i.y,e.prevStress=e.stress,e.stress=D_(u,h,g,p,m,s,y,f),e.converged=e.converged||Math.abs(e.stress-e.prevStress)<=e.epsilon}}if(e.converged)if(e.overlapRemoved||e.allowOverlap){e.done=!0;const a=e.rings||{};e.rings=Object.keys(a).reduce((l,c)=>(l[c]=a[c].map(d=>n[d]),l),{})}else t.removeOverlaps(t,e,r),e.overlapRemoved=!0;return e},isRunning:({data:e})=>!(!e||e.converged&&(e.allowOverlap||e.done))||(e&&(e.step=-1),!1),onSync(e){if(e.renderSteps||e.done)return OA(e)},onEnd:e=>OA(e)};function OA(e){const t=e.x,n=e.y,r=e.indexes.length,i=t[e.centerIndexPos]-e.cx,s=n[e.centerIndexPos]-e.cy;for(let o=0;o<r;o++)t[o]-=i,n[o]-=s;return{indexes:e.indexes,x:t,y:n}}function H9(e,t,n){const r=e.slice().sort(Hy),i=[];for(let s=0,o=t.length;s<o;s++){const a=[],l=t[s];let c=!1;for(let d=0,u=l.length;d<u;d++){const h=l[d];oL(r,h)!==-1&&(h===n&&(c=!0),a.push(h))}a.length!==0&&i[c?"unshift":"push"](a.sort(Hy))}return i}var W9=e=>(e.modules.layouts.register(zA),t=>{if(t.centralNode===void 0)throw new Error('concentric layout: missing parameter "centralNode"');if(t.maxIterations=t.maxIterations&&isFinite(t.maxIterations)?Math.floor(t.maxIterations):100,t.maxIterations<1)throw new RangeError("maxIterations must be a positive integer");if(t.iterationsPerRender=t.iterationsPerRender&&isFinite(t.iterationsPerRender)?Math.floor(t.iterationsPerRender):20,t.iterationsPerRender<1)throw new RangeError("iterationsPerRender must be a positive integer");if(t.epsilon=t.epsilon&&isFinite(t.epsilon)?t.epsilon:.001,t.epsilon<=0)throw new RangeError("epsilon has to be a positive number");return e.modules.layouts.start(zA.name,t)}),BA=yt(be({},Vy),{name:"sequential"}),X9=e=>(e.modules.layouts.register(BA),(t={})=>{t.useWebWorker=!1;const n=yt(be({},t),{evenDistribution:!0});return e.modules.layouts.start(BA.name,n)}),Y9=class extends Jt{constructor(e){super(e),this.stop=()=>this._ogma.modules.layouts.stop(),this.concentric=X7(e),this.radial=W9(e),this.force=e9(e),this.forceLink=t9(e),this.hierarchical=V9(e),this.sequential=X9(e),this.grid=n9(e)}},q9=class extends Jt{constructor(){super(...arguments),this.move=e=>this._ogma.modules.virtualMouse.move(e),this.down=e=>this._ogma.modules.virtualMouse.down(e),this.up=e=>this._ogma.modules.virtualMouse.up(e),this.click=e=>this._ogma.modules.virtualMouse.click(e),this.rightClick=e=>this._ogma.modules.virtualMouse.rightClick(e),this.doubleclick=e=>this._ogma.modules.virtualMouse.doubleclick(e),this.drag=(e,t)=>this._ogma.modules.virtualMouse.drag(e,t),this.wheel=e=>this._ogma.modules.virtualMouse.wheel(e)}},Z9=class extends Jt{constructor(){super(...arguments),this.map=e=>this._ogma.modules.rules.createMapping(e),this.slices=e=>this._ogma.modules.rules.createSlices(e),this.template=e=>this._ogma.modules.rules.createTemplate(e)}},J9=class extends Jt{constructor(){super(...arguments),this.watchNodeObjectProperty=e=>this._ogma.modules.watcher.watchNodeObjectProperty(e),this.watchEdgeObjectProperty=e=>this._ogma.modules.watcher.watchEdgeObjectProperty(e),this.watchNodeNonObjectProperty=e=>this._ogma.modules.watcher.watchNodeNonObjectProperty(e),this.watchEdgeNonObjectProperty=e=>this._ogma.modules.watcher.watchEdgeNonObjectProperty(e)}},Q9=class{clearSelection(){return this.modules.selection.clear()}getSelectedNodes(){return this.modules.selection.getSelectedNodes()}getNonSelectedNodes(){return this.modules.selection.getNonSelectedNodes()}getSelectedEdges(){return this.modules.selection.getSelectedEdges()}getNonSelectedEdges(){return this.modules.selection.getNonSelectedEdges()}},K9=class{setOptions(e){return this.modules.settings.update(e)}getOptions(){return this.modules.settings.get()}},eW=class extends Jt{constructor(){super(...arguments),this.setNodesVisibility=e=>this._ogma.modules.graphics.setNodesVisibility(e),this.setEdgesVisibility=e=>this._ogma.modules.graphics.setEdgesVisibility(e),this.setNodeTextsVisibility=e=>this._ogma.modules.graphics.setNodeTextsVisibility(e),this.setEdgeTextsVisibility=e=>this._ogma.modules.graphics.setEdgeTextsVisibility(e),this.addRule=(e={})=>this._ogma.modules.styleRules.addRule(e),this.getRuleList=()=>this._ogma.modules.styleRules.getRuleList(),this.addNodeRule=(e,t)=>{let n,r;return t===void 0?(n=e,r=void 0):(n=t,r=e),this.addRule({nodeAttributes:n,nodeSelector:r})},this.addEdgeRule=(e,t)=>{let n,r;return t===void 0?(n=e,r=void 0):(n=t,r=e),this.addRule({edgeAttributes:n,edgeSelector:r})},this.getNodeRules=()=>this.getRuleList().filter(e=>e.getDefinition().edgeAttributes===void 0),this.getEdgeRules=()=>this.getRuleList().filter(e=>e.getDefinition().nodeAttributes===void 0),this.createClass=e=>this._ogma.modules.classes.createClass(e),this.getClass=e=>this._ogma.modules.classes.getClassByName(e),this.getClassList=()=>this._ogma.modules.classes.getClassList(),this.setHoveredNodeAttributes=(e,t)=>{this._ogma.modules.hover.updateNodeAttributes(e,t)},this.setHoveredEdgeAttributes=(e,t)=>{this._ogma.modules.hover.updateEdgeAttributes(e,t)},this.setSelectedNodeAttributes=(e,t)=>this._ogma.modules.selection.setNodeAttributes(e,!!t),this.setSelectedEdgeAttributes=(e,t)=>this._ogma.modules.selection.setEdgeAttributes(e,!!t),this.setTheme=({nodeAttributes:e,edgeAttributes:t,selectedNodeAttributes:n,selectedEdgeAttributes:r,hoveredNodeAttributes:i,hoveredEdgeAttributes:s})=>{this._ogma.modules.pulses.setTheme(e&&e.pulse||{},t&&t.pulse||{}),this._ogma.modules.graphics.getAttributesManager().setDefaultAttributes(e||{},t||{}),this.setSelectedNodeAttributes(n||{}),this.setSelectedEdgeAttributes(r||{}),this.setHoveredNodeAttributes(i||{}),this.setHoveredEdgeAttributes(s||{})}}},tW=class extends Jt{constructor(){super(...arguments),this.set=(e,t)=>this._ogma.modules.brand.set(e,t),this.remove=()=>{this._ogma.modules.brand.remove()}}},nW=class extends Jt{constructor(){super(...arguments),this.enable=e=>(this._ogma.modules.connectNodes.enable(e),this),this.disable=()=>(this._ogma.modules.connectNodes.disable(),this),this.enabled=()=>this._ogma.modules.connectNodes.enabled()}},jA={strokeColor:"#00C3FF",fillColor:"rgba(0,195,255,0.1)",strokeWidth:1,cursorStyle:"cell",callback:({nodes:e})=>e.setSelected(!0),bothExtremities:!1},MF=class extends ct{constructor(){super(...arguments),this._enabled=!1,this._points=[],this._bbox=new vr,this._onStart=({x:e,y:t})=>{this._bbox.reset(),this.savePoint(e,t,!1)},this._onStop=()=>{const{minX:e,minY:t,maxX:n,maxY:r}=this._bbox,{nodes:i,edges:s}=this._modules.spatial.queryProjected(e,t,n,r),o={},a=i.filter(c=>{const d=c.isVisible(),u=c.getAttribute("detectable"),h=d&&u&&this._modules.locate.isNodeInPolygon(c,this._points);return o[c._index]=h,h});let l=s.filter(c=>{const d=c.isVisible(),u=c.getAttribute("detectable");return d&&u&&this._modules.locate.isEdgeInPolygon(c,this._points)});this._options.bothExtremities&&(l=this.filterByExtremities(l,o)),this._layer.clear(),this._points=[],this.disable(),this._options.callback({nodes:a,edges:l})}}onMounted(){this._options=un(jA),this._cachedCursor="",this._modules.events.isRegistered("lassoEnabled")||this._modules.events.register(["lassoEnabled","lassoDisabled"]),this._interaction=this._modules.interactions.onDrag({priority:"lasso",check:()=>this._enabled,onStart:this._onStart,onProgress:({x:e,y:t})=>this.savePoint(e,t,!0),onStop:this._onStop})}enable(e={}){var t;return this._enabled||(this._enabled=!0,this._modules.captor.setDetectionEnabled(!1),this._options=Kr(e,jA),this._layer=this._modules.layers.addCanvasLayer(wt,{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this._cachedCursor=((t=this._layer.element.parentElement)==null?void 0:t.style.cursor)||"",np(this._layer.element.parentElement,this._options.cursorStyle),this._modules.captor.isLeftPressed()&&this._interaction.start(this._modules.captor.getCursorPosition()),this._modules.events.fire("lassoEnabled")),this}disable(){return this._enabled?(this._enabled=!1,this._modules.captor.setDetectionEnabled(!0),np(this._layer.element.parentElement,this._cachedCursor),this._layer.destroy(),this._modules.events.fire("lassoDisabled"),this):this}enabled(){return this._enabled}savePoint(e,t,n){const r=zr(),i=this._options,s=this._points;if(this._bbox.addPoint(e,t),s.push({x:e,y:t}),n){const o=s[0];this._layer.refresh(a=>{a.lineWidth=i.strokeWidth,a.lineJoin="bevel",a.strokeStyle=i.strokeColor,a.fillStyle=i.fillColor,a.beginPath(),a.moveTo(o.x*r,o.y*r);for(let l=1;l<s.length;++l){const c=s[l];a.lineTo(c.x*r,c.y*r)}a.stroke(),i.fillColor&&a.fill()})}}filterByExtremities(e,t){const n=this._modules.graph.getEdgeAttribute("source"),r=this._modules.graph.getEdgeAttribute("target");return e.filter(i=>{const s=i._index,o=n.get(s),a=r.get(s);return t[o]&&t[a]})}},rW=class extends Jt{constructor(){super(...arguments),this.enable=e=>(this._ogma.modules.lasso.enable(e),this),this.disable=()=>(this._ogma.modules.lasso.disable(),this),this.enabled=()=>this._ogma.modules.lasso.enabled()}},iW=class extends Jt{constructor(){super(...arguments),this.enable=e=>this._ogma.modules.legend.enable(e),this.disable=()=>this._ogma.modules.legend.disable(),this.enabled=()=>this._ogma.modules.legend.enabled(),this.getOptions=()=>this._ogma.modules.legend.getOptions(),this.export=e=>this._ogma.modules.legend.export(e)}},UA={strokeColor:"#00C3FF",fillColor:"rgba(0,195,255,0.1)",strokeWidth:1,cursorStyle:"cell",callback:({nodes:e,edges:t})=>{e.size?e.setSelected(!0):t.setSelected(!0)},bothExtremities:!1},sW=class extends MF{constructor(){super(...arguments),this._onStart=({x:e,y:t})=>{var n;this._rectangle.reset(),this._start={x:e,y:t},(n=this._layer)==null||n.refresh(r=>{r.fillStyle=this._options.fillColor,r.strokeStyle=this._options.strokeColor,r.lineWidth=this._options.strokeWidth})},this._onStop=()=>{var e;const t=this._modules.captor.getCursorPosition(),n=this._formatRectangle(t),{nodes:r,edges:i}=this._modules.spatial.queryProjected(n.minX,n.minY,n.maxX,n.maxY),s={},o=r.filter(l=>{const c=l.isVisible(),d=l.getAttribute("detectable"),u=c&&d&&this._modules.locate.isNodeInRectangle(l,n);return s[l._index]=u,u});let a=i.filter(l=>{const c=l.isVisible(),d=l.getAttribute("detectable");return c&&d&&this._modules.locate.isEdgeInRectangle(l,n)});this._options.bothExtremities&&(a=this.filterByExtremities(a,s)),(e=this._layer)==null||e.clear(),this.disable(),this._options.callback({nodes:o,edges:a})}}onMounted(){this._options=un(UA),this._enabled=!1,this._rectangle=new vr,this._interaction=this._modules.interactions.onDrag({priority:"lasso",disableDetection:!0,check:()=>this._enabled,onStart:this._onStart,onProgress:({x:e,y:t})=>this._refreshRectangle({x:e,y:t}),onStop:this._onStop})}enable(e){return super.enable(Kr(e,UA))}_formatRectangle(e){const t=this._start.x,n=this._start.y,r=e.x,i=e.y,s=Math.abs(t-r),o=Math.abs(n-i),a=t<r?t:r,l=n<i?n:i;return this._rectangle.reset().addPoint(a,l).addPoint(a+s,l+o)}_refreshRectangle(e){var t;const{minX:n,minY:r,width:i,height:s}=this._formatRectangle(e),o=zr();(t=this._layer)==null||t.refresh(a=>{a.strokeRect(n*o,r*o,i*o,s*o),this._options.fillColor&&a.fillRect(n*o,r*o,i*o,s*o)})}},oW=class extends Jt{constructor(){super(...arguments),this.enable=(e={})=>{this._ogma.modules.rectangleSelect.enable(e)},this.disable=()=>{this._ogma.modules.rectangleSelect.disable()},this.enabled=()=>this._ogma.modules.rectangleSelect.enabled()}},aW=class extends Jt{constructor(){super(...arguments),this.enable=e=>{this._ogma.modules.resizing.enable(e)},this.disable=()=>{this._ogma.modules.resizing.disable()},this.enabled=()=>this._ogma.modules.resizing.enabled()}},lW=class extends Jt{constructor(){super(...arguments),this.enable=(e={})=>{this._ogma.modules.rewiring.enable(e)},this.disable=()=>{this._ogma.modules.rewiring.disable()},this.enabled=()=>this._ogma.modules.rewiring.enabled()}},cW=class extends Jt{constructor(){super(...arguments),this.enable=(e={})=>{this._ogma.modules.snapping.enable(e)},this.disable=()=>{this._ogma.modules.snapping.disable()},this.enabled=()=>this._ogma.modules.snapping.enabled()}},dW=class extends Jt{constructor(){super(...arguments),this.onNodeHover=(e,t={})=>{this._ogma.modules.tooltip.setHandler("hover.node",e,t)},this.onNodeClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("click.left.node",e,t)},this.onNodeRightClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("click.right.node",e,t)},this.onNodeDoubleClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.node",e,t)},this.onEdgeHover=(e,t={})=>{this._ogma.modules.tooltip.setHandler("hover.edge",e,t)},this.onEdgeClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("click.left.edge",e,t)},this.onEdgeRightClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("click.right.edge",e,t)},this.onEdgeDoubleClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.edge",e,t)},this.onBackgroundClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("click.left.background",e,t)},this.onBackgroundRightClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("click.right.background",e,t)},this.onBackgroundDoubleClick=(e,t={})=>{this._ogma.modules.tooltip.setHandler("doubleclick.left.background",e,t)},this.refresh=()=>this._ogma.modules.tooltip.refresh(),this.isShown=()=>this._ogma.modules.tooltip.isShown(),this.hide=()=>{this._ogma.modules.tooltip.hide()},this.show=(e,t)=>this._ogma.modules.tooltip.show(e,t)}},uW=class extends Jt{constructor(e){super(e),this.lasso=new rW(e),this.connectNodes=new nW(e),this.legend=new iW(e),this.rectangleSelect=new oW(e),this.resize=new aW(e),this.rewire=new lW(e),this.snapping=new cW(e),this.tooltip=new dW(e),this.brand=new tW(e)}},hW=class extends Jt{constructor(e){super(e),this.getList=()=>this._ogma.modules.transformations.api.getList(),this.clear=()=>this._ogma.modules.transformations.api.clear().then(()=>{}),this.getById=t=>this._ogma.modules.transformations.api.getById(t),this.afterNextUpdate=()=>this._ogma.modules.transformations.afterNextUpdate(),this.onGroupsUpdated=t=>{this._ogma.modules.transformations.onGroupsUpdated(t)},this.layoutGroups=(t,n,r=!1)=>this._ogma.modules.transformations.api.layoutGroups(t,n,r)}addNodeGrouping(e){return this._ogma.modules.transformations.api.addNodeGrouping(e)}addNodeClustering(e){return this._ogma.modules.transformations.api.addNodeClustering(e)}addEdgeGrouping(e){return this._ogma.modules.transformations.api.addEdgeGrouping(e)}addDrillDown(e){return this._ogma.modules.transformations.api.addDrilldown(e)}addNodeFilter(e){return this._ogma.modules.transformations.api.addNodeFilter(e)}addEdgeFilter(e){return this._ogma.modules.transformations.api.addEdgeFilter(e)}getNodeFilters(){return this._ogma.modules.transformations.getNodeFilters()}getEdgeFilters(){return this._ogma.modules.transformations.getEdgeFilters()}addNeighborGeneration(e){return this._ogma.modules.transformations.api.addNeighborGeneration(e)}addNeighborMerging(e){return this._ogma.modules.transformations.api.addNeighborMerging(e)}addNodeCollapsing(e){return this._ogma.modules.transformations.api.addNodeCollapsing(e)}addGeoClustering(e){return this._ogma.modules.transformations.api.addGeoClustering(e)}addVirtualProperties(e){return this._ogma.modules.transformations.api.addVirtualProperties(e)}},gW=class extends Jt{constructor(){super(...arguments),this.setZoom=(e,t)=>this._ogma.modules.camera.setZoom(e,t),this.zoomIn=e=>this._ogma.geo.enabled()?this._ogma.modules.geo.zoomIn():this._ogma.modules.camera.zoomIn(e),this.zoomOut=e=>this._ogma.geo.enabled()?this._ogma.modules.geo.zoomOut():this._ogma.modules.camera.zoomOut(e),this.getZoom=()=>this._ogma.modules.camera.getZoom(),this.setCenter=(e,t)=>this._ogma.modules.camera.setCenter(e,t),this.move=(e,t)=>this._ogma.modules.camera.move(e,t),this.moveToBounds=(e,t)=>{if(!(e&&e instanceof vr)){if(!Vn(e)||e.length!==4)throw new Error("ogma.view.zoomToBounds requires a BoundingBox as a parameter");{const[n,r,i,s]=e;e=vr.from({minX:n,minY:r,maxX:i,maxY:s})}}return this._ogma.modules.camera.moveToBounds(e,t)},this.moveTo=(e,t)=>this._ogma.modules.camera.moveTo(e,t),this.getCenter=()=>this._ogma.modules.camera.getCenter(),this.setAngle=(e,t)=>this._ogma.modules.camera.setAngle(e,t),this.rotate=(e,t)=>this._ogma.modules.camera.rotate(e,t),this.getAngle=()=>this._ogma.modules.camera.getAngle(),this.set=(e,t)=>this._ogma.modules.camera.setView(e,t),this.get=()=>this._ogma.modules.camera.getView(),this.graphToScreenCoordinates=e=>this._ogma.modules.camera.graphToScreenCoordinates(e),this.screenToGraphCoordinates=e=>this._ogma.modules.camera.screenToGraphCoordinates(e),this.getImageData=()=>this._ogma.modules.graphics.getImageData(),this.getElementAt=e=>this._ogma.modules.captor.detectElementAt(e.x,e.y,!1,!0),this.getElementsInView=()=>{const{width:e,height:t}=this.get(),n=this.screenToGraphCoordinates({x:0,y:0}),r=this.screenToGraphCoordinates({x:e,y:t});return this._ogma.modules.spatial.query(n.x,n.y,r.x,r.y)},this.getBounds=()=>{const{width:e,height:t}=this.getSize(),n=this.screenToGraphCoordinates({x:0,y:0}),r=this.screenToGraphCoordinates({x:e,y:t});return{cx:(n.x+r.x)/2,cy:(n.y+r.y)/2,width:r.x-n.x,height:r.y-n.y,minX:n.x,minY:n.y,maxX:r.x,maxY:r.y}},this.getElementsInside=(e,t,n,r,i=!0)=>{const{spatial:s,camera:o}=this._ogma.modules;if(i){const a=o.graphToScreenCoordinates({x:e,y:t}),l=o.graphToScreenCoordinates({x:n,y:r});return s.queryProjected(a.x,a.y,l.x,l.y)}return s.queryProjected(e,t,n,r)},this.beforeNextFrame=()=>this._ogma.modules.dom.beforeNextFrame(),this.afterNextFrame=()=>this._ogma.modules.dom.afterNextFrame(),this.setFullScreen=e=>this._ogma.modules.dom.setFullScreen(e),this.isFullScreen=()=>this._ogma.modules.dom.isFullScreen(),this.forceResize=()=>this._ogma.modules.dom.forceResize(),this.getSize=()=>this._ogma.modules.dom.getDimensions(),this.setSize=e=>{if(!e||isNaN(e.width)||isNaN(e.height))throw new Error("Size must follow the format { width: number, height: number }");if(e.width<0)throw new Error("width must be positive");if(e.height<0)throw new Error("height must be positive");return this._ogma.modules.dom.setDimensions(e),Promise.resolve()},this.locateGraph=e=>this._ogma.modules.locate.locateGraph(e),this.locateRawGraph=(e,t)=>this._ogma.modules.locate.locateRawGraph(e,t),this.getGraphBoundingBox=({withTexts:e=!1}={})=>this._ogma.modules.locate.getGraphBoundingBox(e),this.animationInProgress=()=>this._ogma.modules.locate.isLocating()||this._ogma.modules.camera.animationInProgress(),this.getTextBoundingBox=e=>{if(!e)throw new Error("ogma.view.getTextBoundingBox: item must be a Node or an Edge");const t=e.getAttribute("text");return t==null||t===""?null:e.isList?this._ogma.modules.labels.getTextsBoundingBox(e):this._ogma.modules.labels.getTextsBoundingBox(e.toList())},this.getNodeBadgeAt=(e,t)=>{if(!e)throw new Error("ogma.view.getNodeBadgeAt: node is not defined");return AP(t,e._index,this._ogma.modules.graphics.getAttributesManager(),this._ogma.modules.camera,this._ogma.modules.graphics.getGraphicsEngine())}}},pW=class{constructor(e,t){this._ogma=e,this.settings=new aV(e),this.events=new iV(e),this.dom=new N4(e),this.animations=new cX(e),this.camera=new VG(e),this.graph=new i6(e),this.data=new P4(e),this.graphics=new JG(e),this.layers=new Iq(e),this.individualAttributes=new oV(e),this.algorithms=new Pq(e),this.position=new bq(e),this.touch=new IV(e),this.mouse=new NV(e),this.virtualMouse=new UX(e),this.spatial=new _V(e),this.captor=new bY(e),this.interactions=new gY(e),this.classes=new uV(e),this.cameraInteractions=new $G(e,!!t.debug),this.hover=new xq(e),this.keyboard=new RY(e),this.selection=new tX(e),this.styleRules=new WX(e),this.legend=new yq(e),this.sync=new nX(e),this.rules=new Cq(e),this.transformations=new KW(e),this.locate=new AV(e),this.drag=new wY(e),this.pulses=new oX(e),this.curvatureManager=new SX(e),this.workers=new NX(e),this.layouts=new IX(e),this.watcher=new DX(e),this.rectangleSelect=new sW(e),this.labels=new hY(e,t),this.brand=new wX(e),this.lasso=new MF(e),this.rewiring=new SY(e),this.resizing=new AY(e),this.snapping=new $X(e),this.connectNodes=new CY(e),this.tooltip=new MY(e),this.geo=new EX(e),Object.keys(this).forEach(n=>{const r=this[n];r instanceof ct&&(r._setModules(this),r.onMounted())}),e.onReady(()=>{Object.keys(this).forEach(n=>{const r=this[n];r instanceof ct&&r.onReady(t)})})}destroy(){Object.keys(this).forEach(e=>{const t=this[e];t instanceof ct&&t.destroy(this._ogma)})}},mW=1,fW=[MV,PV,zV,Uj,G7,Q9,K9],Ab={version:"5.1.7",commit:"614bc2138",buildTime:"Fri Sep 13 2024 07:55:00 GMT+0000 (Coordinated Universal Time)"},Do=class Wy{constructor(t={}){this.node=n=>new es(n,this),this.edge=n=>new xo(n,this),this.nodeList=n=>new Ms(n||new Uint32Array(0),this),this.edgeList=n=>new Aa(n||new Uint32Array(0),this),this._onReady=[],this.build=Ab,this._init(t)}_init(t){this._initParameters=t,this._debug=!!t.debug,this._token=mW++,this.modules=new pW(this,t),this.styles=new eW(this),this.algorithms=new Mq(this),this.export=new j7(this),this.keyboard=new H7(this),this.generate=new U7(this),this.layouts=new Y9(this),this.parse=new V7(this),this.transformations=new hW(this),this.tools=new uW(this),this.view=new gW(this),this.mouse=new q9(this),this.events=new OV(this),this.schema=new J9(this),this.rules=new Z9(this),this.geo=new $7(this),this.layers=new W7(this),this.debug=new DV(this),this._onReady.forEach(n=>n(this)),this.safelyBindToInstance(),this.modules.events.register(["destroy"]),this.build={version:"5.1.7",commit:"614bc2138",buildTime:"Fri Sep 13 2024 07:55:00 GMT+0000 (Coordinated Universal Time)"}}safelyBindToInstance(){for(const t of Object.getOwnPropertyNames(Wy.prototype))typeof Wy.prototype[t]=="function"&&(this[t]=this[t].bind(this))}onReady(t){this._onReady.push(t)}_destroy(){if(!this._token)throw new Error('"destroy" called twice on the same instance of Ogma');this._onReady=[],this.modules.destroy(),this.modules=null}destroy(){this.modules.events.fire("destroy",{}),this._destroy()}isDestroyed(){return!this.modules}reset(){const t=this._initParameters;this._destroy(),this._init(t)}isDebug(){return this._debug}};Do.libraries=DL,Do.geometry=hF,Do.parse=vb,Do.build=Ab,Do.algorithms=yx,Do.utils=lb;var Va=Do;Va.algorithms=yx,Va.utils=lb,Va.parse=vb,Va.build=Ab,m4(Va,fW);var FF=Va,lr=(e=>(e.NodeFilter="node-filter",e.EdgeFilter="edge-filter",e.NodeCollapsing="node-collapsing",e.VirtualProperties="virtual-properties",e.NeighborGeneration="neighbor-generation",e.NeighborMerging="neighbor-merging",e.NodeGrouping="node-grouping",e.EdgeGrouping="edge-grouping",e.NodeClustering="node-clustering",e.GeoClustering="geo-clustering",e.Unknown="unknown",e))(lr||{}),Io=class{constructor({id:e,duration:t,easing:n,ogma:r,module:i}){this.animation=n?{duration:t,easing:n}:t===void 0?0:t,this.destroyed=!1,this.id=e,this.ogma=r,this.context={},this.module=i,this.resetContext()}setOptions(e){var t;let n=typeof this.animation=="number"?this.animation:(t=this.animation)==null?void 0:t.duration,r=typeof this.animation=="object"?this.animation.easing:void 0;return typeof e.duration=="number"&&(n=e.duration),e.easing!==void 0&&(r=e.easing),this.animation=r?{duration:n,easing:r}:n===void 0?0:n,this.module.setOptions(this),this.module.afterNextUpdate()}enable(e){return this.animation=e===void 0?this.animation:e,this.module.enable(this)}disable(e){return this.animation=e===void 0?this.animation:e,this.module.disable(this)}isEnabled(){return this.module.isEnabled(this)}getId(){return this.id}whenApplied(){return this.module.afterNextUpdate().then(()=>this)}toggle(e){return this.animation=e===void 0?this.animation:e,this.isEnabled()?this.module.disable(this):this.module.enable(this)}run(e=!0){return Promise.resolve()}undo(e=!0){return Promise.resolve()}cleanup(){return this.resetContext(),Promise.resolve()}refresh(){return this.module.refreshTransformation(this),this.module.afterNextUpdate()}getIndex(){return this.module.getIndex(this)}setIndex(e){return this.module.setIndex(this,e),this.module.afterNextUpdate()}getAnimation(){return typeof this.animation=="number"?{duration:this.animation,easing:"linear"}:this.animation}getContext(){return this.context}setContent(e){this.context=e}resetContext(){this.context={}}getName(){return lr.Unknown}destroy(e){return e!==void 0&&(this.animation=e),this.module.remove(this)}},_W=class{constructor(e){this.xs=new Map,this.ys=new Map,this.rs=new Map,this.curvatures=new Map,this.hiddenNodes=new Set,this.hiddenEdges=new Set,this.animations=[],this.before=[],this.after=[],this.enabled=!1,this.applying=!1,this._onLayoutEnd=t=>{if(!this.enabled)return;const n=t.positions.current,r=t.ids;for(let i=0;i<r.length;i++){const s=this.ogma.getNode(r[i])._index,o=n[i];o&&(this.xs.set(s,o.x),this.ys.set(s,o.y))}},this._onLayoutPrepare=t=>{this.enabled&&(t.params.dryRun=!0)},this._onNodesRemoved=t=>{const n=t.nodes._indexes;for(const r of n)this.xs.delete(r),this.ys.delete(r),this.rs.delete(r)},this._onLayoutGetData=({name:t,data:n})=>{if(this.enabled){if(t==="force"){const r=n.graph.nodes,i=n.indexes;for(let s=0;s<i.length;s++)this.xs.has(i[s])&&(r[s].x=this.xs.get(i[s]),r[s].y=this.ys.get(i[s]),r[s].r=this.rs.get(i[s])!==void 0?1.25*this.rs.get(i[s]):r[s].r)}else if(t==="hierarchical"||t==="sequential"){const r=n.options.nodes._indexes;for(let i=0;i<r.length;i++)this.rs.has(r[i])&&(n.radiuses[i]=this.rs.get(r[i]))}else if(t==="concentric"){const r=n.list;for(let i=0;i<r.length;i++)this.rs.has(r[i])&&(n.attributes.size[i]=this.rs.get(r[i]))}else if(t==="forceLink")for(const r in n.nodes){const i=Number(r),s=n.nodes[i];this.xs.has(i)&&(s.x=this.xs.get(i),s.y=this.ys.get(i)),this.rs.has(i)&&(s.size=this.rs.get(i))}else if(t==="radial"){const r=n.indexes;for(let i=0;i<r.length;i++){const s=r[i];this.xs.has(s)&&(n.x[i]=this.xs.get(s),n.y[i]=this.ys.get(s)),this.rs.has(s)&&(n.attributes.size[i]=this.rs.get(s))}}else if(t!=="grid")throw new Error(`Ogma transformtaions: Unsupported layout: ${t}`)}},this.ogma=e,this.layer=this.ogma.modules.graphics.addAttributeLayer({name:"ogma-transformations-animations",priority:4.1,nodeOutput:{attributes:["radius"]},edgeOutput:{attributes:["curvature"]},nodeDependencies:void 0,edgeDependencies:void 0}),this.attributeLayerData=this.layer._attributesManager._getLayerById(this.layer._id),this.initEvents()}initEvents(){this.ogma.events.on("layoutPrepare",this._onLayoutPrepare).on("layoutEnd",this._onLayoutEnd).on("removeNodes",this._onNodesRemoved).on("layoutGetData",this._onLayoutGetData)}handleLayoutPromises(e){return Promise.all(e).then(t=>{t.forEach(n=>{if(!n)return;const{res:r,subNodes:i}=n;if(!Array.isArray(r))return;const s=i._indexes;for(let o=0;o<s.length;o++){const{x:a,y:l,radius:c}=r[o];c!==void 0?this.setXYR(s[o],a,l,c):this.setXY(s[o],a,l)}})})}apply(e){const t=Array.from(this.xs.values()),n=Array.from(this.ys.values()),r=Array.from(this.rs.values()).map(u=>({radius:u})),i=Array.from(this.curvatures.values()).map(u=>({curvature:u})),s=this.ogma.nodeList(Array.from(this.hiddenNodes)),o=this.ogma.edgeList(Array.from(this.hiddenEdges)),a=t.map((u,h)=>({x:u,y:n[h]})),l=this.ogma.nodeList(Array.from(this.xs.keys())),c=this.ogma.nodeList(Array.from(this.rs.keys())),d=this.ogma.edgeList(Array.from(this.curvatures.keys()));return this.xs.clear(),this.ys.clear(),this.rs.clear(),this.curvatures.clear(),this.hiddenNodes.clear(),this.hiddenEdges.clear(),this.before.forEach(u=>u()),this.initCurvature(d._indexes),this.applying=a.length>0||r.length>0||i.length>0,Promise.all([a.length?l.setAttributes(a,e):Promise.resolve(),r.length?this.ogma.modules.graphics.animate(c,()=>this.layer.setAttributeValues(c,r),!1,e):Promise.resolve(),i.length?this.ogma.modules.graphics.animate(d,()=>this.layer.setAttributeValues(d,i),!1,e):Promise.resolve(),...this.animations.map(u=>u())]).then(()=>Promise.all(this.after.map(u=>u()))).then(()=>{this.deleteCurvatures(d._indexes),s.setVisible(!1),o.setVisible(!1),this.animations=[],this.before=[],this.after=[],this.applying=!1})}setXYR(e,t,n,r){if(typeof e=="number")this.xs.set(e,t),this.ys.set(e,n),r!==void 0&&this.rs.set(e,r);else for(const i of e)this.xs.set(i,t),this.ys.set(i,n),r!==void 0&&this.rs.set(i,r)}getOpenRadius(e){return this.attributeLayerData.nodes.outputFlexArrays.radius.get(e)}getCloseRadius(e){return this.attributeLayerData.nodes.inputFlexArrays.radius.get(e)}deleteOpenRadius(e){this.layer.getFlexArrays().nodes.radius.set(e,void 0)}initCurvature(e){const t=this.attributeLayerData.edges.inputFlexArrays.curvature,n=this.attributeLayerData.edges.outputFlexArrays.curvature;for(let r=0;r<e.length;r++)n.set(e[r],t.get(e[r]))}deleteCurvatures(e){const t=this.layer.getFlexArrays().edges.curvature;for(let n=0;n<e.length;n++)t.set(e[n],void 0)}hideNode(e){this.hiddenNodes.add(e)}showNode(e){this.hiddenNodes.delete(e)}hideNodes(e){for(const t of e)this.hiddenNodes.add(t)}showNodes(e){for(const t of e)this.hiddenNodes.delete(t)}hideEdge(e){this.hiddenEdges.add(e)}showEdge(e){this.hiddenEdges.delete(e)}hideEdges(e){for(const t of e)this.hiddenEdges.add(t)}showEdges(e){for(const t of e)this.hiddenEdges.delete(t)}pushBefore(e){Array.isArray(e)?this.before.push(...e):this.before.push(e)}pushAfter(e){Array.isArray(e)?this.after.push(...e):this.after.push(e)}setXY(e,t,n){this.xs.set(e,t),this.ys.set(e,n)}setR(e,t){this.rs.set(e,t)}setRs(e,t){for(let n=0;n<e.length;n++)this.rs.set(e[n],t[n])}setCurvatures(e,t){for(let n=0;n<e.length;n++)this.curvatures.set(e[n],t[n])}setCurvature(e,t){this.curvatures.set(e,t)}setOpenRadius(e,t){this.attributeLayerData.nodes.outputFlexArrays.radius.set(e,t)}push(e){Array.isArray(e)?this.animations.push(...e):this.animations.push(e)}enable(){this.enabled=!0}disable(){this.enabled=!1}getMaxAnimation(e,t){return(typeof e=="number"?e:e.duration)>(typeof t=="number"?t:t.duration)?e:t}isApplying(){return this.applying}},Xy=(...e)=>{const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)r.hasOwnProperty(i)&&(Array.isArray(t[i])&&Array.isArray(r[i])?t[i]=Array.from(new Set(t[i].concat(r[i]))):$A(t[i])&&$A(r[i])?t[i]=Xy(t[i],r[i]):t[i]=r[i])}return t};function Gc(e,t,n){const r=typeof t=="string"?t.split("."):t;for(let i=0;i<r.length-1;++i){const s=r[i];let o=e[s];o||(o={},e[s]=o),e=o}e[r[r.length-1]]=n}function yW(e){let t=0,n=0;const r=e.length;if(r===0)throw new Error("Ogma transformations: Compute centroid: at least one point is required");for(let i=0;i<r;++i){const s=e[i];t+=s.x,n+=s.y}return t/=r,n/=r,{x:t,y:n}}function vW(e,t){const n=e.get(0);return{data:n.getData(),attributes:n.getAttributes(t)}}function Ep(e,t){return`gen_grp_${t}_${e}`}function $A(e){return!(!e||e.constructor!==Object&&e.constructor)}function xW(e){return e.map(({id:t,source:n,target:r})=>({id:t,source:n,target:r}))}function bW(e,t,n,r){let i=t,s=n;return!r&&i.toString()>s.toString()&&(i=n,s=t),`${e}[${i}-${s}]`}function wW(e){if(e===void 0)return Math.round(Math.random()*Number.MAX_SAFE_INTEGER);if(typeof e!="string"&&(typeof e!="number"||!isFinite(e)))throw new Error(`Ogma transformation: ${e} is not a valid id, expected string or number`);return e}function Nh(e){return`data.${e}`}var EW=class{constructor(e){this.groupsByDepth=new Map,this.treeMap=new Map,this.dataMap=new Map,this.invalidEdges=new Map,this.edges=new Map,this.ogma=e.ogma,this.module=e.module,this.enabled=e.enabled===void 0||e.enabled,this.onGetSubgraph=e.onGetSubgraph,this.duration=e.duration||0,this.easing=e.easing||"quadraticOut",this.parentPath=e.parentPath||"parent",this.depthPath=e.depthPath||"depth",this.padding=e.padding||0,this.nodeGenerator=e.nodeGenerator||(()=>({})),this.showContents=e.showContents===void 0||e.showContents,this.onGroupUpdate=e.onGroupUpdate||(()=>Promise.resolve()),this.copyData=e.copyData===void 0||e.copyData,this.context={virtualEdges:this.ogma.edgeList()}}createGrouping(e){var t;const{ogma:n,groupsByDepth:r}=this,i=n.transformations.addNodeGrouping({selector:o=>o.getData(this.depthPath)===e,groupIdFunction:o=>o.getData(this.parentPath),showContents:o=>typeof this.showContents=="boolean"?this.showContents:this.showContents(o,e),onBeforeAddMetaEdges:(o,a)=>this.addEdges(o,a),onGroupUpdate:(o,a,l)=>this.onGroupUpdate(o,a,l,e),padding:o=>typeof this.padding=="number"?this.padding:this.padding(o,e),duration:this.duration,enabled:this.enabled,nodeGenerator:(o,a)=>{const l=this.nodeGenerator(o,a,i);return this.copyData&&(l.data||(l.data={}),l.data=be(be({},l.data),this.dataMap.get(a))),Gc(l,Nh(this.parentPath),this.treeMap.get(a)),Gc(l,Nh(this.depthPath),e-1),l.id=a,l}});if(!r.size)return r.set(e,i);const s=Array.from(r.keys()).reduce((o,a)=>Math.max(o,a));r.set(e,i),i.setIndex((t=r.get(s))==null?void 0:t.getIndex())}drill(e){return fa(this,null,function*(){if(this.treeMap.has(e.getId()))return;const{ogma:t,groupsByDepth:n}=this,r=e.getId(),i=this.getGroupId(r);this.treeMap.set(i,e.getData(this.parentPath)),this.dataMap.set(i,e.getData());const s=e.getData(this.depthPath)||0,o=e.getPosition(),a=yield this.onGetSubgraph(e);this.edges.set(i,e.getAdjacentEdges().map(c=>{const d=c.getSource().getId(),u=c.getTarget().getId();return{source:d===r?i:d,target:u===r?i:u,data:be({},c.getData())}})),a.nodes.forEach(c=>{Gc(c,Nh(this.parentPath),i),Gc(c,Nh(this.depthPath),s+1),c.attributes||(c.attributes={}),c.attributes.x=o.x,c.attributes.y=o.y}),this.module.pause(),t.removeEdges(e.getAdjacentEdges()),t.removeNode(e),yield t.view.afterNextFrame(),yield t.addNodes(a.nodes);const l=a.edges.filter(c=>{const d=c.source,u=c.target;if(t.getNode(d)&&t.getNode(u))return!0;const h=t.getNode(d)?u:d;return this.invalidEdges.has(h)?this.invalidEdges.get(h).push(c):this.invalidEdges.set(h,[c]),!1});a.nodes.forEach(c=>{if(!this.invalidEdges.has(c.id))return;const{valid:d,invalid:u}=this.invalidEdges.get(c.id).reduce((h,g)=>(t.getNode(g.source)&&t.getNode(g.target)?h.valid.push(g):h.invalid.push(g),h),{valid:[],invalid:[]});t.addEdges(d),u.length?this.invalidEdges.set(c.id,u):this.invalidEdges.delete(c.id)}),yield t.addEdges(l),n.has(s+1)||this.createGrouping(s+1),this.module.resume(),yield this.module.afterNextUpdate()})}addEdges(e,t){return fa(this,null,function*(){t.forEach(n=>{const r=this.edges.get(n.getId());r&&this.ogma.addEdges(r,{virtual:!0}).then(i=>{this.context.virtualEdges=this.context.virtualEdges.concat(i)})})})}getGroupId(e){return`ogma-group-${e}`}getMaxDepth(){return this.groupsByDepth.size}disable(e){return this.enabled=!1,this.duration=typeof e=="number"?e:this.duration,this.easing=typeof e=="object"?e.easing:this.easing,this.groupsByDepth.forEach(t=>t.disable(e)),this.module.animations.hideEdges(this.context.virtualEdges._indexes),this.context.virtualEdges.setSelected(!0),this.module.afterNextUpdate()}enable(e){return this.enabled=!0,this.duration=typeof e=="number"?e:this.duration,this.easing=typeof e=="object"?e.easing:this.easing,this.groupsByDepth.forEach(t=>t.enable(e)),this.module.animations.showEdges(this.context.virtualEdges._indexes),this.module.afterNextUpdate().then(()=>this.context.virtualEdges.setVisible(!0))}toggle(e){return this.enabled?this.disable(e):this.enable(e)}setOptions(e){this.onGetSubgraph=e.onGetSubgraph?e.onGetSubgraph:this.onGetSubgraph,this.duration=e.duration!==void 0?e.duration:this.duration,this.easing=e.easing||this.easing,this.parentPath=e.parentPath||this.parentPath,this.depthPath=e.depthPath||this.depthPath,this.padding=e.padding!==void 0?e.padding:this.padding,this.nodeGenerator=e.nodeGenerator||this.nodeGenerator,this.showContents=e.showContents!==void 0?e.showContents:this.showContents,this.onGroupUpdate=e.onGroupUpdate||this.onGroupUpdate,this.copyData=e.copyData!==void 0?e.copyData:this.copyData;const t=this.enabled;return this.enabled=e.enabled!==void 0?e.enabled:this.enabled,this.enabled!==t&&this.groupsByDepth.forEach(n=>this.enabled?n.enable({duration:this.duration,easing:this.easing}):n.disable({duration:this.duration,easing:this.easing})),this.groupsByDepth.forEach(n=>n.refresh()),this.module.afterNextUpdate()}onRemove(e){this.context.virtualEdges=this.context.virtualEdges.filter(t=>!e.has(t._index))}},SW=class{constructor(e){this.drilldowns=[],this.module=e}addDrilldown(e){this.drilldowns.push(e)}removeDrilldown(e){this.drilldowns=this.drilldowns.filter(t=>t!==e)}onRemove(e,t){t||this.drilldowns.forEach(n=>n.onRemove(e))}},AW=class{constructor(t,n){this.enabled=!1,this.relayouted=new Set,this.shouldRelayout=new Set,this.layoutPerGroup=new Map,this.ogma=t,this.module=n,this.ogma.events.on("layoutPrepare",r=>{if(!r.params.nodes)return;const i=r.params.nodes,s=Array.isArray(i)?this.ogma.getNode(i[0])._index:i._indexes[0],o=this.module.nodeToMeta.get(s);if(!o)return;const a=yt(be({},r),{params:be({},r.params)});delete a.params.nodes,this.layoutPerGroup.set(o._index,a)})}getNodesToRecompute(t){const n=Array.from(t),r=new Set,i=[];for(;n.length>0;){const s=n.shift();if(r.has(s))continue;i.push(s),r.add(s);const o=this.module.nodeToMeta.get(s);o&&n.push(o._index)}return this.ogma.nodeList(i)}layoutGroups(t,n,r=!1){return fa(this,null,function*(){this.module.animations.enable(),this.enable();const i=new Map,s=this.ogma.getNodes(t.map(({groupId:l})=>l));t.forEach(({groupId:l,layout:c,params:d},u)=>{i.set(l,()=>this.ogma.layouts[c](yt(be({},d),{nodes:this.module.metaToNodes.get(s.get(u)._index)})))});const o=this.getNodesToRecompute(s._indexes),a=new Map;o.forEach(l=>a.set(l._index,this.module.nodeToTransformation.get(l._index).getIndex())),o.sort((l,c)=>a.get(l._index)-a.get(c._index));for(let l=0;l<o.size;l++){const c=a.get(o._indexes[l]);let d;for(d=l+1;d<o.size&&a.get(o._indexes[d])===c;d++);const u=o.slice(l,d);l=d-1,yield Promise.all(u.map(h=>{this.relayouted.add(h._index);let g=Promise.resolve();if(i.has(h.getId()))g=i.get(h.getId())();else if(r&&this.layoutPerGroup.has(h._index)){const p=this.module.metaToNodes.get(h._index),m=this.layoutPerGroup.get(h._index);g=this.ogma.layouts[m.name](yt(be({},m.params),{nodes:p}))}return g.then(()=>{this.module.groupController.setGroupXYR(h)})}))}return yield this.module.groupController.onAfterLayouts(),this.module.animations.apply(n||0).finally(()=>{this.disable(),this.module.animations.disable(),this.relayouted.clear()})})}hasRelayouted(t){return this.relayouted.has(t)}enable(){this.enabled=!0}disable(){this.enabled=!1}clear(){this.relayouted.clear(),this.shouldRelayout.clear()}},Lh=14,kW=class{constructor(e,t){this.subNodeOffsetX=new Map,this.subNodeOffsetY=new Map,this.savedRadius=new Map,this.alreadyGrouped=new Set,this.openGroups=new Set,this.closeGroups=new Set,this.destroyed=!1,this.nodeLayer=new Map,this.edgeLayer=new Map,this.padding=new Map,this.geoRadius=new Map,this.collapsedGroups=new Set,this.hasUpdated=new Set,this.onGroupsUpdate=()=>Promise.resolve(),this.runningLayouts=!1,this.onSetMultipleAttributes=({elements:r,values:i,options:s,updatedAttributes:o,promises:a})=>{if(this.module.isRefreshing()||this.destroyed||this.runningLayouts||this.module.animations.isApplying())return;const l=new Set(o),c=i;if(!r.isNode||!l.has("x")&&!l.has("y")&&!l.has("radius"))return Promise.resolve();const d=r.toList();if(!d.size)return Promise.resolve();const u=[],h=new Set,g=Array.from(d._indexes);for(;g.length;){const m=g.shift(),f=this.module.nodeToMeta.get(m);if(!f||h.has(f._index))continue;const y=this.getGroupXYR(f,this.module.getSubNodes(f),d,c);y.isGeo?u.push(f.setAttribute("radius",y.radius,s)):(delete y.isGeo,this.closeGroups.has(f._index)||this.collapsedGroups.has(f._index)?(this.savedRadius.set(f._index,y.radius),this.module.animations.setXY(f._index,y.x,y.y)):this.module.animations.setXYR(f._index,y.x,y.y,y.radius),h.add(f._index)),g.push(f._index)}const p=d.map((m,f)=>{if(!this.openGroups.has(m._index))return null;const y=m.getPosition();return Array.isArray(c)&&c[f]?(c[f].x!==void 0&&(y.x=c[f].x),c[f].y!==void 0&&(y.y=c[f].y)):(c.x!==void 0&&(y.x=c.x),c.y!==void 0&&(y.y=c.y)),{group:m,position:y}}).filter(m=>m);p.length&&p.forEach(({group:m,position:f})=>this.animateChildren(m,f)),(h.size>0||p.length)&&u.push(this.module.animations.apply(s)),a.push(...u)},this.ogma=e,this.layoutController=new AW(e,t),this.groupLayer=this.ogma.modules.graphics.addAttributeLayer({name:"groups-layer",priority:5.50225,edgeAttributes:{layer:r=>this.edgeLayer.get(r._index)},nodeAttributes:{layer:r=>this.nodeLayer.get(r._index)},nodeDependencies:void 0,edgeDependencies:void 0});const n=e.styles.getClass("_group-fading_");this.fadingClass=n||this.ogma.styles.createClass({name:"_group-fading_",nodeAttributes:{opacity:0,radius:0},edgeAttributes:{opacity:0}}),this.module=t,e.events.on("setMultipleAttributes",this.onSetMultipleAttributes).on("beforeGeoCameraMove",({zoom:r})=>{const i=this.ogma.nodeList(Array.from(this.geoRadius.keys())).filter(s=>s&&!this.collapsedGroups.has(s._index)&&this.openGroups.has(s._index));i.forEach(s=>{const o=this.geoRadius.get(s._index)*2**r;this.module.animations.setOpenRadius(s._index,o)}),this.ogma.modules.geo._projection&&this.ogma.modules.geo._projection.updateElements(i)}).on(["geoEnabled","beforeGeoDisabled"],()=>this._onToggleGeo()).on("geoNodesMoved",({nodes:r})=>{const i=r._indexes;for(let s=0;s<i.length;s++){const o=this.module.getMetaNode(r.get(s));!o||!this.openGroups.has(o._index)||this.layoutController.shouldRelayout.add(o._index)}}).on(["nodeClassRemoved__hovered","nodeClassAdded__hovered","nodeClassRemoved__selected","nodeClassAdded__selected","nodeClassAdded__hoverExtremityHighlighted","nodeClassRemoved__hoverExtremityHighlighted"],({nodes:r})=>{const i=r._indexes;for(let s=0;s<i.length;s++){const o=r.get(s);if(!this.isOpen(o))continue;const a=o.getAttribute("layer");this.setSubEltsLayer(o,a,!0)}})}setSubEltsLayer(e,t,n){const r=n?1:-1;if(!this.isOpen(e))return;const i=this.module.getSubNodes(e);i.forEach(o=>{this.nodeLayer.set(o._index,t+r),this.setSubEltsLayer(o,t+r,n)});const s=i.getAdjacentEdges({bothExtremities:!0});for(let o=0;o<s.size;o++)this.edgeLayer.set(s._indexes[o],t+r)}closeGroup(e,t,n,r,i=!1){const s=[t],o=this.closeGroups.has(e._index)||this.collapsedGroups.has(e._index);this.openGroups.delete(e._index),this.closeGroups.add(e._index),this.hasUpdated.add(e._index);const a=this.module.animations,l=i?0:a.getCloseRadius(e._index),c=a.getOpenRadius(e._index);if(c!==void 0&&!o&&this.savedRadius.set(e._index,c),a.setXYR(e._index,n,r,l),i)return;for(;s.length;){const u=s.shift(),h=u._indexes,g=u.getAdjacentEdges({bothExtremities:!0}),p=new Set;for(let f=0;f<g._indexes.length;f++)p.add(g._indexes[f]);const m=u.getAdjacentEdges({bothExtremities:!1}).filter(f=>!p.has(f._index));a.setXYR(h,n,r,l),a.pushAfter(()=>{u.setVisible(!1),g.setVisible(!1),m.setVisible(!1);const f=[];for(let y=0;y<h.length;y++){const _=this.closeGroups.has(h[y]);f.push(_?l:this.savedRadius.get(h[y]))}this.module.animations.setRs(u._indexes,f)});for(let f=0;f<h.length;f++){if(!this.openGroups.has(h[f]))continue;const y=u.get(f);this.collapsedGroups.add(y._index);const _=this.module.getSubNodes(u.get(f));_.size&&s.push(_)}}const d=this.module.getMetaNode(e);d&&this.openGroups.has(d._index)&&this.layoutController.shouldRelayout.add(d._index)}setGroupXYR(e){const t=this.getGroupXYR(e,this.module.getSubNodes(e),void 0,void 0);t.isGeo?(this.setGeoLatLng(e,t.y,t.x),this.module.animations.setR(e._index,t.radius)):this.module.animations.setXYR(e._index,t.x,t.y,t.radius)}setGeoLatLng(e,t,n){this.ogma.modules.data.setProperty(e,this.ogma.modules.geo.latitudePath,t,{virtual:!0}),this.ogma.modules.data.setProperty(e,this.ogma.modules.geo.longitudePath,n,{virtual:!0})}expandGroup(e,t,n=!1){const r=this.module.animations,i=e.getPosition();n||(this.openGroups.add(e._index),this.closeGroups.delete(e._index),this.collapsedGroups.delete(e._index)),this.hasUpdated.add(e._index);const s=[{subNodes:t,offset:this.getOffset(e._index),isClosed:!1,wasCollapsed:!1}];for(;s.length;){const{subNodes:a,offset:l,isClosed:c,wasCollapsed:d}=s.shift();if((c||d)&&r.pushBefore(()=>a.setAttributes({x:i.x+l.x,y:i.y+l.y},0)),c)continue;const u=a._indexes,h=a.getAdjacentEdges({bothExtremities:!0,filter:"all"});a.setVisible(!0),h.setVisible(!0);for(let g=0;g<u.length;g++){const p=this.closeGroups.has(u[g]),m=this.collapsedGroups.has(u[g]);r.setXYR(u[g],i.x+l.x+this.subNodeOffsetX.get(u[g])||0,i.y+l.y+this.subNodeOffsetY.get(u[g])||0,p?this.module.animations.getCloseRadius(u[g]):this.savedRadius.get(u[g])),this.collapsedGroups.delete(u[g]);const f=this.module.getSubNodes(a.get(g));f.size&&s.push({subNodes:f,isClosed:p,wasCollapsed:m,offset:{x:l.x+this.subNodeOffsetX.get(u[g])||0,y:l.y+this.subNodeOffsetY.get(u[g])||0}})}}const o=this.module.getMetaNode(e);o&&this.openGroups.has(o._index)&&this.layoutController.shouldRelayout.add(o._index),r.setXYR(e._index,i.x,i.y,n?0:this.savedRadius.get(e._index))}getOffset(e){return this.collapsedGroups.has(e)&&this.subNodeOffsetX.has(e)?{x:this.subNodeOffsetX.get(e),y:this.subNodeOffsetY.get(e)}:{x:0,y:0}}restorePositions(e,t){const n=e.getPosition(),r=(t=t.filter(o=>!o.isVirtual()))._indexes,i=this.getOffset(e._index),s=[];for(let o=0;o<r.length;o++)s.push({x:i.x+n.x+this.subNodeOffsetX.get(r[o])||0,y:i.x+n.y+this.subNodeOffsetY.get(r[o])||0});t.setAttributes(s,0)}animateChildren(e,t){const n=[{parent:e,position:t}];for(;n.length;){const{parent:r,position:i}=n.shift();if(!r.isNode)continue;const s=this.module.getSubNodes(r);s.size&&s.forEach(o=>{const a=this.subNodeOffsetX.get(o._index)||0,l=this.subNodeOffsetY.get(o._index)||0,c={x:i.x+a,y:i.y+l};this.module.animations.setXY(o._index,c.x,c.y),n.push({parent:o,position:c})})}}addOpenGroup(e){this.openGroups.add(e._index),this.closeGroups.delete(e._index)}isOpen(e){return this.openGroups.has(e._index)}isClose(e){return this.closeGroups.has(e._index)}setPadding(e,t){const n=new Set,r=isNaN(+t),i=t;return e.forEach(s=>{const o=r?i(s):+t;this.padding.get(s._index)!==o&&n.add(s._index),this.padding.set(s._index,o)}),n}getGroupXYR(e,t,n,r){let i,s,o;const a=this.module.animations,l=this.ogma.geo.enabled();if(l){const g=t.getData(this.ogma.modules.geo.latitudePath),p=t.getData(this.ogma.modules.geo.longitudePath);i=[],s=[],o=[];for(let m=0;m<g.length;m++){const{x:f,y}=this.ogma.geo.getMap().project({lat:g[m],lng:p[m]},Lh);i.push(f),s.push(y),o.push(2**Lh*this.geoRadius.get(t._indexes[m])||10)}}else i=t.getAttribute("x"),s=t.getAttribute("y"),o=t.getAttribute("radius");if(n&&r&&n.isNode){const g=n._indexes,p=new Map,m=new Map,f=new Map;for(let _=0;_<g.length;_++){const v=Array.isArray(r)?r[_]:r;!isNaN(v.x)&&p.set(g[_],v.x),!isNaN(v.y)&&m.set(g[_],v.y),!isNaN(v.radius)&&f.set(g[_],v.radius)}const y=t._indexes;for(let _=0;_<y.length;_++)p.has(y[_])&&(i[_]=p.get(y[_])),m.has(y[_])&&(s[_]=m.get(y[_])),f.has(y[_])&&(o[_]=f.get(y[_]))}const c=t._indexes;for(let g=0;g<c.length;g++)this.savedRadius.has(c[g])&&(o[g]=this.savedRadius.get(c[g]));if(!l)for(let g=0;g<c.length;g++)a.xs.get(c[g])!==void 0&&(i[g]=a.xs.get(c[g])),a.ys.get(c[g])!==void 0&&(s[g]=a.ys.get(c[g])),a.rs.get(c[g])!==void 0&&(o[g]=a.rs.get(c[g]));let[d,u,h]=FF.algorithms.minDisk(i,s,o);if(h+=this.padding.get(e._index)||0,l){const{lat:g,lng:p}=this.ogma.geo.getMap().unproject({x:d,y:u},Lh);d=p,u=g,h/=2**Lh,this.geoRadius.set(e._index,h),h*=2**this.ogma.geo.getZoom()}else this.savedRadius.set(e._index,h),t.forEach((g,p)=>{this.subNodeOffsetX.set(g._index,i[p]-d),this.subNodeOffsetY.set(g._index,s[p]-u)});return{x:d,y:u,radius:h,isGeo:l}}onAfterLayouts(){return fa(this,null,function*(){const e=this.module.animations,t=this.module.getList().filter(a=>a.getName()===lr.NodeGrouping&&a.isEnabled());if(!t.length)return;const n=[],r=[],i=[];let s=!1;for(let a=t.length-1;a>=0;a--)t[a].getContext().metaNodes.forEach(l=>{if(l.getMetaNode())return;s||(s=this.hasUpdated.has(l._index)||this.layoutController.relayouted.has(l._index)||this.layoutController.shouldRelayout.has(l._index)),r.push(l._index);const c=!this.collapsedGroups.has(l._index)&&!this.closeGroups.has(l._index);i.push(c),n.push({group:l,collapsed:!c})});if(!s)return;r.length&&(yield this.onGroupsUpdate({metaNodes:this.ogma.nodeList(n.map(a=>a.group._index)),isOpen:i}));const o=new Set;for(;n.length;){const{group:a,collapsed:l}=n.shift();if(o.has(a._index))continue;o.add(a._index);const c=this.module.getSubNodes(a),d=c._indexes,u=e.xs.get(a._index),h=e.ys.get(a._index);if(u!==void 0&&h!==void 0){if(l){e.deleteOpenRadius(a._index);for(let g=0;g<d.length;g++)e.setXY(d[g],u,h)}else for(let g=0;g<d.length;g++)e.setXY(d[g],u+this.subNodeOffsetX.get(d[g])||0,h+this.subNodeOffsetY.get(d[g])||0);for(let g=0;g<d.length;g++)this.module.isVirtual(d[g],!0)&&n.push({group:c.get(g),collapsed:this.collapsedGroups.has(d[g])||this.closeGroups.has(d[g])||l})}}this.hasUpdated.clear(),this.layoutController.clear()})}cleanup(e,t,n){let r=e._indexes;for(let i=0;i<r.length;i++)this.padding.delete(r[i]),this.openGroups.delete(r[i]),this.closeGroups.delete(r[i]),this.nodeLayer.delete(r[i]);for(let i=0;i<t.size;i++)this.edgeLayer.delete(t._indexes[i]);if(n){r=n._indexes;for(let i=0;i<r.length;i++)this.subNodeOffsetX.delete(r[i]),this.subNodeOffsetY.delete(r[i])}}getPositions(e,t){const{x:n,y:r}=e.getPosition();return t.map(i=>({x:n+(this.subNodeOffsetX.get(i._index)||0),y:r+(this.subNodeOffsetY.get(i._index)||0)}))}hideSubNodes(e){const t=[e];for(;t.length;){const n=t.pop();n.setVisible(!1);for(let r=0;r<n._indexes.length;r++)this.collapsedGroups.add(n._indexes[r]),this.openGroups.has(n._indexes[r])&&t.push(this.module.getSubNodes(n.get(r)))}}onRemove(e,t){if(!t)return;const n=[],r=new Set;for(let i=0;i<e.length;i++){const s=this.module.nodeToMeta.get(e[i]);s&&this.openGroups.has(s._index)&&(this.layoutController.shouldRelayout.add(s._index),n.push(s._index))}for(;n.length;){const i=n.shift();if(r.has(i))continue;r.add(i);const s=this.module.nodeToMeta.get(i);s&&this.openGroups.has(s._index)&&(this.layoutController.shouldRelayout.add(s._index),n.push(s._index))}}layoutGroups(e,t,n=!1){return this.runningLayouts=!0,this.layoutController.layoutGroups(e,t,n).finally(()=>{this.runningLayouts=!1})}_onToggleGeo(){this.geoRadius.clear();const e=this.module.getList().find(n=>n.getName()===lr.NodeGrouping);if(!e)return;const t=Array.from(this.openGroups.keys());for(let n=0;n<t.length;n++)this.layoutController.shouldRelayout.add(t[n]);e.refresh()}startRefresh(){this.alreadyGrouped.clear()}destroy(){this.destroyed||(this.destroyed=!0,this.ogma.events.off(this.onSetMultipleAttributes))}},CW={setData:!1,addElement:!0,removeElement:!0,setOptions:!1,refresh:!1},TW=class Yy{constructor(){this.prev={},this.next={},this.prevorder=[],this.nextorder=[],this.shouldAnimate=!1,this.minRefreshIndex=0}addTransformation(t,n){this.next[t]=n,this.nextorder.push(t)}removeTransformation(t){delete this.next[t]}setIndex(t,n){const r=this.nextorder.indexOf(t);this.nextorder.splice(r,1),this.nextorder.splice(n,0,t),this.minRefreshIndex=Math.min(this.minRefreshIndex,r,n)}setEnabled(t,n){this.next[t]=n}isEnabled(t){return this.prev[t]||!1}static getDiff(t,n){const r=new Map;for(const i in t)n[i]!==void 0?n[i]!==t[i]&&r.set(+i,{shouldDo:n[i],shouldUndo:t[i]}):r.set(+i,{shouldDo:!1,shouldUndo:t[i],shouldCleanup:!0});for(const i in n)t[i]===void 0&&n[i]===!0&&r.set(+i,{shouldDo:!0,shouldUndo:!1});return r}getFirstChange(t){const{nextorder:n}=this;let r=n.length;for(let i=0;i<n.length;i++){const s=t.get(n[i]);if(s&&(s.shouldUndo||s.shouldDo)){r=i;break}}return r}refreshFrom(t,n){const{nextorder:r}=this;for(let i=n;i<this.nextorder.length;i++)t.set(r[i],be({shouldUndo:this.prev[r[i]],shouldDo:this.prev[r[i]]},t.get(r[i])||{}));return t}isDirty(){const t=Yy.getDiff(this.prev,this.next),n=Math.min(this.minRefreshIndex,this.getFirstChange(t));return(t.size>0||n<this.nextorder.length)&&{reason:t.size>0?"diff":"refresh",index:n}}invalidateFrom(t,n){this.shouldAnimate||(this.shouldAnimate=CW[n]),this.minRefreshIndex=Math.min(this.minRefreshIndex,t)}step(){const t=Yy.getDiff(this.prev,this.next);this.prev=be({},this.next);const n=Math.min(this.minRefreshIndex,this.getFirstChange(t)),r=this.nextorder.reduce((o,a,l)=>o.set(a,l),new Map),i=this.prevorder.reduce((o,a,l)=>o.set(a,l),new Map);this.nextorder=this.nextorder.filter(o=>this.prev[o]!==void 0),this.prevorder=[...this.nextorder],this.minRefreshIndex=this.nextorder.length;const s=this.shouldAnimate;return this.shouldAnimate=!1,{diff:this.refreshFrom(t,n),nextorder:r,prevorder:i,shouldAnimate:s}}done(){}},NW=class{constructor(e){this.transformations=[],this.nodeToTransformation=new Map,this.edgeToTransformation=new Map,this.nodeVirtual=new Set,this.edgeVirtual=new Set,this.nodeToMeta=new Map,this.edgeToMeta=new Map,this.metaToNodes=new Map,this.metaToEdges=new Map,this._onDestroy=()=>{this.destroy(),this.ogma.events.off(this._onFrame)},this._onFrame=()=>this.refresh(),this._onAddElements=({nodes:t,edges:n,virtual:r})=>{if(r){if(t)for(let i=0;i<t.size;i++)this.nodeVirtual.add(t._indexes[i]);if(n)for(let i=0;i<n.size;i++)this.edgeVirtual.add(n._indexes[i])}else this.state.invalidateFrom(0,"addElement"),this.invalidate()},this._onSetData=({elements:t,virtual:n})=>{if(n)return;const{isNode:r,_indexes:i}=t;let s=1/0;for(const o of i){const a=this.getTransformation(o,r);if(!a){s=0;break}s=Math.min(s,a.getIndex())}return this.state.invalidateFrom(s,"setData"),this.invalidate(),s},this._onRequestElementsToDelete=t=>{const{elementsToRemove:n}=t,r=n.isNode,i=n._indexes,s=this.getLeafElements(i,r);t.elementsToRemove=r?this.ogma.nodeList(s):this.ogma.edgeList(s)},this._onAfterRemoveElements=({nodes:t,edges:n})=>{if(!this.ogma.isDestroyed()){if(t)for(let r=0;r<t.size;r++)this.nodeVirtual.delete(t._indexes[r]);if(n)for(let r=0;r<n.size;r++)this.edgeVirtual.delete(n._indexes[r])}},this._onRemoveElements=({nodes:t,edges:n,virtual:r})=>{r||this.ogma.isDestroyed()||this._refreshPromise.then(()=>{const i=!!t,s=i?t._indexes:n._indexes,o=new Set(s);this.transformations.forEach(a=>a.onRemove(o,i)),this.groupController.onRemove(s,i),this.drilldownController.onRemove(o,i),this.nodeToMeta.clear(),this.edgeToMeta.clear(),this.metaToNodes.clear(),this.metaToEdges.clear(),this.nodeToTransformation.clear(),this.edgeToTransformation.clear(),this.state.invalidateFrom(0,"removeElement"),this.invalidate()})},this.ogma=e,this.state=new TW,this.animations=new _W(e),this._shouldRefresh=!1,this._refreshing=!1,this.isDestroyed=!1,this.isPaused=!1,this._refreshPromise=Promise.resolve(),this.groupController=new kW(e,this),this.drilldownController=new SW(this),this.ogma.events.on("frame",this._onFrame).on("setData",this._onSetData).on(["addNodes","addEdges"],this._onAddElements).on(["removeNodes","removeEdges"],this._onRemoveElements).on(["afterRemoveNodes","afterRemoveEdges"],this._onAfterRemoveElements).on("requestElementsToDelete",this._onRequestElementsToDelete).on("destroy",this._onDestroy)}addTransformation(e,t=!0){this.state.addTransformation(e.getId(),t),this.transformations.push(e),this.invalidate()}removeTransformation(e){const t=this.transformations.indexOf(e);t!==-1&&this.transformations.splice(t,1),this.invalidate()}step(){return fa(this,arguments,function*(e=0,t={fireEnabled:[],fireDisabled:[],fireRefresh:[],fireDestroy:[],fireSetIndex:[]}){var n;if(e>5)throw new Error("Ogma transformations: Transformations refresh in loop");const{diff:r,prevorder:i,nextorder:s}=this.state.step(),{fireEnabled:o,fireDisabled:a,fireRefresh:l,fireDestroy:c,fireSetIndex:d}=t,u=[],h=[],g=[];this.groupController.startRefresh();for(const m of this.transformations){const f=m.getId();if(!r.has(f))continue;const{shouldDo:y,shouldUndo:_,shouldCleanup:v}=r.get(f);y&&!_?o.push(m):_&&!y?a.push(m):y&&_&&l.push(m),i.has(f)&&i.get(f)!==s.get(f)&&d.push(m),l.push(m),_&&u.push(m),y&&h.push(m),v&&(c.push(m),g.push(m))}let p=0;u.sort((m,f)=>i.get(f.getId())-i.get(m.getId())||0);for(const m of u){const f=!((n=r.get(m.getId()))!=null&&n.shouldDo);f&&(p=this.animations.getMaxAnimation(p,m.getAnimation())),yield m.undo(f)}h.sort((m,f)=>s.get(m.getId())-s.get(f.getId())||0);for(let m=0;m<h.length;m++){const f=h[m],y=m===h.length-1;y&&(p=this.animations.getMaxAnimation(p,f.getAnimation())),yield f.run(y)}for(const m of g)yield m.cleanup();if(yield this.groupController.onAfterLayouts(),yield this.animations.apply(p),!this.isDestroyed)return this.state.isDirty()?this.step(e+1,t):t})}refresh(){!this._shouldRefresh||this._refreshing||this.isDestroyed||this.isPaused||(this._shouldRefresh=!1,this._refreshing=!0,this._refreshPromise=this._refreshPromise.then(()=>(this.animations.enable(),this.step().then(e=>{if(this.animations.disable(),this._refreshing=!1,!e)return;const{fireEnabled:t,fireDisabled:n,fireRefresh:r,fireDestroy:i,fireSetIndex:s}=e,o=this.ogma.modules.events;n.reverse().forEach(a=>o.fire("transformationDisabled",{target:a})),t.forEach(a=>o.fire("transformationEnabled",{target:a})),s.forEach(a=>o.fire("transformationSetIndex",{target:a})),r.forEach(a=>o.fire("transformationRefresh",{target:a})),i.forEach(a=>o.fire("transformationDestroyed",{target:a}))}).finally(()=>this.animations.disable()))).catch(e=>{const t=this.state.isDirty();if(!t)throw e;const n=t.reason==="diff"?"You are constantly adding/removing/changing index of a transformation":"You are constantly adding/removing/updating nodes or edges while transformations refresh";throw new Error(`Ogma transformations, refresh failed.
${n}`)}).finally(()=>{}))}enable(e){return this.state.setEnabled(e.getId(),!0),this.invalidate(),this.afterNextUpdate()}disable(e){return this.state.setEnabled(e.getId(),!1),this.invalidate(),this.afterNextUpdate()}remove(e){return this.disable(e),this.state.removeTransformation(e.getId()),this.afterNextUpdate().then(()=>{this.transformations.splice(this.getIndex(e),1)})}isEnabled(e){return this.state.isEnabled(e.getId())}getList(){return this.transformations.slice()}getIndex(e){for(let t=0;t<this.transformations.length;t++)if(this.transformations[t]===e)return t;return-1}setIndex(e,t){const n=this.getIndex(e);this.state.setIndex(e.getId(),t),this.transformations.splice(n,1),this.transformations.splice(t,0,e),this.invalidate()}setOptions(e){this.state.invalidateFrom(this.getIndex(e),"setOptions"),this.invalidate()}refreshTransformation(e){this.state.invalidateFrom(this.getIndex(e),"refresh"),this.invalidate()}clear(){return this.transformations.forEach(e=>e.destroy(0)),this.invalidate(),this.afterNextUpdate()}destroy(){this.transformations.forEach(e=>e.destroy(0)),this.groupController.destroy(),this._refreshPromise=Promise.resolve(),this.isDestroyed=!0}invalidate(){this._refreshing||this.ogma.isDestroyed()||(this._shouldRefresh=!0,this.ogma.modules.dom.refresh())}afterNextUpdate(){return this.ogma.view.afterNextFrame().then(()=>this._refreshPromise)}getTransformation(e,t){return t?this.nodeToTransformation.get(e):this.edgeToTransformation.get(e)}setTransformation(e,t,n){n?this.nodeToTransformation.set(e,t):this.edgeToTransformation.set(e,t)}deleteTransformation(e){const t=e.isNode?this.nodeToTransformation:this.edgeToTransformation,n=e._indexes;for(const r of n)t.delete(r)}setMetaNode(e,t){this.nodeToMeta.set(e,t)}setSubNodes(e,t){this.metaToNodes.set(e,t)}removeMetaNodes(e){const t=e._indexes;for(const n of t){const r=this.metaToNodes.get(n);r&&r.forEach(i=>this.nodeToMeta.delete(i._index)),this.nodeToTransformation.delete(n),this.metaToNodes.delete(n)}}removeMetaEdges(e){const t=e._indexes;for(const n of t){const r=this.metaToEdges.get(n);r&&r.forEach(i=>this.edgeToMeta.delete(i._index)),this.edgeToTransformation.delete(n),this.metaToEdges.delete(n)}}clearSubNodes(e){this.metaToNodes.delete(e)}clearMetaNode(e){this.nodeToMeta.delete(e)}setMetaEdge(e,t){this.edgeToMeta.set(e,t)}setSubEdges(e,t){this.metaToEdges.set(e,t)}clearSubEdges(e){this.metaToEdges.delete(e)}clearMetaEdge(e){this.edgeToMeta.delete(e)}getMetaNode(e){return this.nodeToMeta.get(e._index)||null}getMetaEdge(e){return this.edgeToMeta.get(e._index)||null}getLeafElements(e,t){const n=[e],r=t?this.metaToNodes:this.metaToEdges,i=[];for(;n.length;){const s=n.pop();for(let o=0;o<s.length;o++){i.push(s[o]);const a=r.get(s[o]);a&&n.push(a._indexes)}}return i}getSubElements(e){const t=e.isNode?this.metaToNodes:this.metaToEdges,n=e.toList()._indexes;let r=e.isNode?this.ogma.nodeList():this.ogma.edgeList();for(let i=0;i<n.length;i++){const s=t.get(n[i]);s&&(r=r.concat(s))}return r}getSubNodes(e){return this.getSubElements(e)}getSubEdges(e){return this.getSubElements(e)}getById(e){return this.transformations.find(t=>t.getId()===e)}isIntraEdge(e){const t=e.getSource()._index;return this.nodeToMeta.has(t)&&this.nodeToMeta.get(t)===this.nodeToMeta.get(e.getTarget()._index)}isVirtual(e,t){return t?this.nodeVirtual.has(e):this.edgeVirtual.has(e)}isRefreshing(){return this._refreshing}pause(){this.isPaused=!0}resume(){this.isPaused=!1,this.refresh()}},mr="_transparent",Vl=e=>!0,LW=()=>{};function RF(e){if(e.keys)return Array.from(e.keys());const t=[];return e.forEach((n,r)=>t.push(r)),t}function Sp(e){if(e.values)return Array.from(e.values());const t=[];return e.forEach(n=>t.push(n)),t}function GA(e){return!(!e||e.constructor!==Object&&e.constructor)}var Qo=(...e)=>{const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)r.hasOwnProperty(i)&&(Array.isArray(t[i])&&Array.isArray(r[i])?t[i]=Array.from(new Set(t[i].concat(r[i]))):GA(t[i])&&GA(r[i])?t[i]=Qo(t[i],r[i]):t[i]=r[i])}return t};function IW(e){return Array.isArray(e)?e:[e]}var qy=()=>!0,DF=()=>!1,PW=()=>null,MW=class extends Io{constructor(e){super(e),this.nodeSelector=e.criteria||Vl}setOptions(e){return this.nodeSelector=e.criteria||this.nodeSelector,super.setOptions(e)}getName(){return lr.NodeFilter}run(){const e=this.nodeSelector,t=this.ogma.getNodes().filter(a=>!e||!e(a)),n=t.getAdjacentEdges();this.module.animations.hideNodes(t._indexes),this.module.animations.hideEdges(n._indexes),t.setVisible(!1),n.setVisible(!1);const r=t.subtract(this.context.hiddenNodes),i=n.subtract(this.context.hiddenEdges),s=this.context.hiddenNodes.subtract(t),o=this.context.hiddenEdges.subtract(n);return this.module.animations.pushBefore(()=>{s.setVisible(!0),s.setVisible(!0),i.setVisible(!0),r.setVisible(!0),s.addClass(mr),o.addClass(mr)}),this.module.animations.push(()=>Promise.all([o.removeClass(mr,this.animation),s.removeClass(mr,this.animation),r.addClass(mr,this.animation),i.addClass(mr,this.animation)])),this.context=yt(be({},this.context),{hiddenNodes:t,hiddenEdges:n}),Promise.resolve()}undo(e=!0){const{hiddenNodes:t,hiddenEdges:n}=this.context,r=e?this.animation:0;return t.setExcluded(!1),n.setExcluded(!1),e&&(t.addClass(mr),n.addClass(mr),this.module.animations.push(()=>Promise.all([t.removeClass(mr,r),n.removeClass(mr,r)])),this.context.hiddenNodes=this.ogma.nodeList(),this.context.hiddenEdges=this.ogma.edgeList()),Promise.resolve()}onRemove(e,t){t?this.context.hiddenNodes=this.context.hiddenNodes.filter(n=>!e.has(n._index)):this.context.hiddenEdges=this.context.hiddenEdges.filter(n=>!e.has(n._index))}resetContext(){this.context=yt(be({},this.context),{hiddenEdges:this.ogma.edgeList(),hiddenNodes:this.ogma.nodeList()})}},FW=class extends Io{constructor(e){super(e),this.edgeSelector=e.criteria||Vl}setOptions(e){return this.edgeSelector=e.criteria||this.edgeSelector,super.setOptions(e)}getName(){return lr.EdgeFilter}run(){const e=this.edgeSelector,t=this.ogma.getEdges().filter(s=>!e||!e(s)),n=this.module.animations;t.setVisible(!1);const r=t.subtract(this.context.hiddenEdges),i=this.context.hiddenEdges.subtract(t);return this.module.animations.pushBefore(()=>{r.setVisible(!0),i.setVisible(!0),i.addClass(mr)}),n.hideEdges(t._indexes),n.push(()=>Promise.all([i.removeClass(mr,this.animation),r.addClass(mr,this.animation)])),this.context=yt(be({},this.context),{hiddenEdges:t}),Promise.resolve()}undo(e=!0){super.undo(e);const{hiddenEdges:t}=this.context,n=e?this.animation:0;return t.setExcluded(!1),e&&(t.addClass(mr),this.module.animations.push(()=>Promise.all([t.removeClass(mr,n)])),this.context.hiddenEdges=this.ogma.edgeList()),Promise.resolve()}onRemove(e,t){t||(this.context.hiddenEdges=this.context.hiddenEdges.filter(n=>!e.has(n._index)))}resetContext(){this.context=yt(be({},this.context),{hiddenEdges:this.ogma.edgeList()})}},bn="_faded",RW=class extends Io{constructor(e){super(e),this.selector=e.selector||DF,this.dataFunction=e.dataFunction||LW}getName(){return lr.NeighborMerging}run(e=!0){const{ogma:t}=this,n=e?this.animation:0,r=t.getNodes().filter(this.selector),i=[],s=new Map;for(let h=0;h<r.size;++h){const g=r.get(h),p=g.getAdjacentEdges(),m=this.dataFunction(g);for(let f=0;f<p.size;++f){const y=p.get(f),_=y.getSource(),v=y.getTarget();if(_!==v&&m!==void 0){const x=_===g?v:_;let b=s.get(x);b||(b=[],s.set(x,b)),b.push(m)}i.push(y)}}const o=t.getEdges(i),a=t.getNodes(RF(s)),l=Sp(s),c=a.getData(),d=new Array(a.size);for(let h=0;h<d.length;++h){const g=l[h];let p=c[h];for(let m=0;m<g.length;++m)p=Qo(p,g[m]);d[h]=p}const u=this.module.animations;return u.hideNodes(r._indexes),u.hideEdges(o._indexes),u.push(()=>Promise.all([r.addClass(bn,n),o.addClass(bn,n)]).then(()=>{this.ogma.modules.data.setProperty(a,null,d,{dispatch:!0,virtual:!0})})),this.context=yt(be({},this.context),{hiddenNodes:r,hiddenEdges:o,nodesWithDataChange:a,oldDataList:c}),Promise.resolve()}resetContext(){super.resetContext(),this.context=yt(be({},this.context),{hiddenNodes:this.ogma.nodeList(),hiddenEdges:this.ogma.edgeList(),nodesWithDataChange:this.ogma.nodeList(),oldDataList:[]})}undo(e=!0){const{hiddenNodes:t,hiddenEdges:n,nodesWithDataChange:r,oldDataList:i}=this.context,s=e?this.animation:0,o=this.module.animations;return this.context.hiddenEdges=this.ogma.edgeList(),this.context.hiddenNodes=this.ogma.nodeList(),this.context.nodesWithDataChange=this.ogma.nodeList(),this.context.oldDataList=[],t.setVisible(!0),n.setVisible(!0),o.pushBefore(()=>{t.addClass(bn),n.addClass(bn)}),o.push(()=>Promise.all([t.removeClass(bn,s),n.removeClass(bn,s)]).then(()=>{this.ogma.modules.data.setProperty(r,null,i,{dispatch:!0,virtual:!0})})),Promise.resolve()}onRemove(e,t){t&&(this.context.hiddenNodes=this.context.hiddenNodes.filter(n=>!e.has(n._index))),this.context.hiddenEdges=this.context.hiddenEdges.filter(n=>!e.has(n._index))}cleanup(){return Promise.resolve()}setOptions(e){return this.selector=e.selector||this.selector,this.dataFunction=e.dataFunction||this.dataFunction,super.setOptions(e)}};function DW(e){return e!=null}var zW=(e,t)=>({source:e.getId(),target:t.getId()}),OW=class extends Io{constructor(e){super(e);const{selector:t=qy,neighborIdFunction:n=PW,nodeGenerator:r=()=>({}),edgeGenerator:i=zW}=e;this.neighborIdFunction=n,this.selector=t,this.generateIds=s=>this.selector(s)&&this.neighborIdFunction(s)||null,this.nodeGenerator=r,this.edgeGenerator=i}getName(){return lr.NeighborGeneration}run(e=!0){const{ogma:t,id:n}=this,r=e?this.animation:0,i=t.getNodes(),s=new Map;for(let h=0;h<i.size;++h){const g=i.get(h),p=(BW(this.generateIds(g))||[]).filter(DW);if(p)for(const m of p){let f=s.get(m);f||(f=[],s.set(m,f)),f.push(g)}}const o=new Array(s.size),a=[],l=RF(s),c=Sp(s).map(h=>t.getNodes(h));for(let h=0;h<o.length;++h){const g=l[h],p=c[h],m=this.nodeGenerator(g,p);m.id=`_gen_${n}_${g}`;const f=yW(p.getPosition());m.attributes=m.attributes||{},m.attributes.x=f.x,m.attributes.y=f.y,o[h]=m}let d,u;return t.addNodes(o.map(h=>({id:h.id,attributes:h.attributes})),{virtual:!0}).then(()=>{d=t.getNodes(o.map(g=>g.id));const h=d._indexes;this.context.virtualNodes&&this.module.removeMetaNodes(this.context.virtualNodes);for(let g=0;g<d.size;g++)this.module.setTransformation(h[g],this,!0),this.module.setSubNodes(h[g],this.ogma.createNodeList());d.replaceOriginalAttributes(o.map(g=>g.attributes),["x","y"]),this.ogma.modules.data.setProperty(d,null,o.map(g=>g.data),{dispatch:!0,virtual:!0});for(let g=0;g<d.size;++g){const p=d.get(g),m=c[g];for(let f=0;f<m.size;++f){const y=m.get(f),_=this.edgeGenerator(y,p);!_.source&&!_.target&&(_.source=y.getId(),_.target=p.getId()),_.id||(_.id=`${_.source}-${_.target}`),a.push(_)}}return t.addEdges(a,{virtual:!0})}).then(()=>{u=t.getEdges(a.map(g=>g.id));const h=u._indexes;this.context.virtualEdges&&this.module.removeMetaEdges(this.context.virtualEdges);for(let g=0;g<u.size;g++)this.module.setTransformation(h[g],this,!1),this.module.setSubEdges(h[g],this.ogma.createEdgeList());this.context={virtualEdges:u,virtualNodes:d},t.removeNodes(this.context.virtualNodes.subtract(d),{virtual:!0}),t.removeEdges(this.context.virtualEdges.subtract(u),{virtual:!0}),d.setVisible(!0),u.setVisible(!0),this.module.animations.pushBefore(()=>{d.addClass(bn),u.addClass(bn)}),this.module.animations.push(()=>Promise.all([d.removeClass(bn,r),u.removeClass(bn,r)]))})}undo(e=!0){const{virtualNodes:t,virtualEdges:n}=this.context;if(!n||!t)return Promise.resolve(this.context);const r=e?this.animation:0,i=this.module.animations;e?(i.hideNodes(t._indexes),i.hideEdges(n._indexes),i.push(()=>Promise.all([t.addClass(bn,r),n.addClass(bn,r)]))):(t.setVisible(!1),n.setVisible(!1))}onRemove(){}cleanup(){const{virtualEdges:e,virtualNodes:t}=this.context;return e&&t&&(this.module.removeMetaNodes(t),this.module.removeMetaEdges(e),this.ogma.removeNodes(t,{virtual:!0}),this.ogma.removeEdges(e,{virtual:!0}),this.context.virtualEdges=this.ogma.edgeList(),this.context.virtualNodes=this.ogma.nodeList()),Promise.resolve()}setOptions(e){const{selector:t,neighborIdFunction:n,nodeGenerator:r,edgeGenerator:i}=e;return this.selector=t||this.selector,this.neighborIdFunction=n||this.neighborIdFunction,this.generateIds=s=>this.selector(s)&&this.neighborIdFunction(s)||null,this.nodeGenerator=r||this.nodeGenerator,this.edgeGenerator=i||this.edgeGenerator,super.setOptions(e)}resetContext(){super.resetContext(),this.context=yt(be({},this.context),{virtualNodes:this.ogma.nodeList(),virtualEdges:this.ogma.edgeList()})}};function BW(e){return Array.isArray(e)?e:e?[e]:null}function jW(e,t){return e.size===t.size&&e.filter(n=>t.includes(n)).size>0}var UW=class extends Io{constructor(t){super(t),this.selector=t.selector||DF,this.edgeGenerator=t.edgeGenerator||(()=>({}))}getName(){return lr.NodeCollapsing}resetContext(){this.context={hiddenNodes:this.ogma.nodeList(),hiddenEdges:this.ogma.edgeList(),virtualEdges:this.ogma.edgeList()}}run(t=!0){const{ogma:n}=this,r=t?this.animation:0,i=n.getNodes().filter(this.selector),s=i.getAdjacentEdges(),o=[],a=i.map(c=>c.getAdjacentNodes().filter(d=>!this.selector(d)));for(let c=0;c<i.size;c++)for(let d=c;d<i.size;d++){const u=i.get(c),h=i.get(d);if(this.ogma.modules.graph.getEdgesBetweenTwoNodes(u,h).size>0&&(a[c].size||a[d].size)&&!jW(a[c],a[d]))throw Error(`addNodeCollapsing: invalid connected nodes [${u.getId()}] and [${h.getId()}] to be collapsed. The addNodeCollapsing function supports only disconnected nodes.`)}const l=new Map;for(let c=0;c<i.size;++c){const d=i.get(c),u=a[c];for(let h=0;h<u.size-1;++h){const g=u.get(h),p=this.ogma.modules.graph.getEdgesBetweenTwoNodes(d,g);if(g!==d)for(let m=h+1;m<u.size;++m){const f=u.get(m),y=this.ogma.modules.graph.getEdgesBetweenTwoNodes(d,f),_=this.edgeGenerator(d,g,f,p,y);if(_){const v=IW(_);for(let x=0;x<v.length;++x)o.push($W(n,v[x],x,d,g,f,p,y)),l.set(o[o.length-1].id,p.concat(y))}}}}return n.addEdges(o,{virtual:!0}).then(()=>{const c=this.ogma.getEdges(o.map(h=>h.id));this.context.virtualEdges&&this.module.removeMetaEdges(this.context.virtualEdges);const d=c._indexes;for(let h=0;h<c.size;h++){this.module.setTransformation(d[h],this,!1);const g=l.get(c.get(h).getId());this.module.setSubEdges(d[h],g);for(let p=0;p<g.size;p++)this.module.setMetaEdge(g._indexes[p],c.get(h))}n.removeEdges(this.context.virtualEdges.subtract(c),{virtual:!0});const u=this.module.animations;c.setVisible(!0),u.pushBefore(()=>c.addClass(bn)),u.push(()=>Promise.all([c.removeClass(bn,r),i.addClass(bn,r),s.addClass(bn,r)])),u.hideNodes(i._indexes),u.hideEdges(s._indexes),this.context={hiddenEdges:s,hiddenNodes:i,virtualEdges:c}})}undo(t=!0){const{hiddenNodes:n,hiddenEdges:r,virtualEdges:i}=this.context,s=t?this.animation:0,o=this.module.animations;return n.setVisible(!0),r.setVisible(!0),t?(o.hideEdges(i._indexes),o.pushBefore(()=>Promise.all([n.addClass(bn),r.addClass(bn)])),o.push(()=>Promise.all([i.addClass(bn,s),n.removeClass(bn,s),r.removeClass(bn,s)]))):i.setVisible(!1),Promise.resolve()}cleanup(){const t=this.context.virtualEdges||this.ogma.createEdgeList();return this.module.removeMetaEdges(t),this.ogma.removeEdges(t,{virtual:!0}).then(()=>{this.resetContext()})}onRemove(t,n){n&&(this.context.hiddenNodes=this.context.hiddenNodes.filter(r=>!t.has(r._index))),this.context.hiddenEdges=this.context.hiddenEdges.filter(r=>!t.has(r._index))}setOptions(t){return this.selector=t.selector||this.selector,this.edgeGenerator=t.edgeGenerator||this.edgeGenerator,super.setOptions(t)}};function $W(e,t,n,r,i,s,o,a){let l,c;if(t.source!==void 0&&(l=e.getNode(t.source),l!==i&&l!==s))throw new Error([`addNodeCollapsing: edge generator produced RawEdge with invalid source [${t.source}]`,`expected to be [${i.getId()}] or [${s.getId()}]`].join("; "));if(t.target!==void 0&&(c=e.getNode(t.target),c!==i&&c!==s))throw new Error([`addNodeCollapsing: edge generator produced RawEdge with invalid target [${t.target}]`,`expected to be [${i.getId()}] or [${s.getId()}]`].join("; "));if(l&&c&&l===c)throw new Error(`addNodeCollapsing: edge generator produced RawEdge with same source and target [${l.getId()}]`);if(l&&!c)c=l===i?s:i;else if(c&&!l)l=c===i?s:i;else if(!l&&!c){let d=!0;for(let u=0;u<o.size;++u)o.get(u).getSource()===i&&(d=!1);for(let u=0;u<a.size;++u)a.get(u).getTarget()===s&&(d=!1);d?(l=s,c=i):(l=i,c=s)}return l&&c?yt(be({},t),{id:`_gen_${r.getId()}_${l.getId()}_${c.getId()}_${n}`,source:l.getId(),target:c.getId()}):{}}var GW=class extends Io{constructor(t){super(t),this.nodeSelector=t.nodeSelector||qy,this.edgeSelector=t.edgeSelector||qy,this.nodeDataFunction=t.nodeDataFunction||null,this.edgeDataFunction=t.edgeDataFunction||null}getName(){return lr.VirtualProperties}resetContext(){this.context={nodes:this.ogma.nodeList(),oldNodesData:[],edges:this.ogma.edgeList(),oldEdgesData:[]}}run(){const{ogma:t,context:n}=this;return this.nodeDataFunction&&(n.nodes=t.getNodes().filter(this.nodeSelector),n.oldNodesData=VA(n.nodes,this.nodeDataFunction,this.ogma)),this.edgeDataFunction&&(n.edges=t.getEdges().filter(this.edgeSelector),n.oldEdgesData=VA(n.edges,this.edgeDataFunction,this.ogma)),Promise.resolve()}undo(){const{nodes:t,oldNodesData:n,edges:r,oldEdgesData:i}=this.context,s=this.ogma.modules.data;return t&&s.setProperty(t,null,n,{dispatch:!0,virtual:!0}),r&&s.setProperty(r,null,i,{dispatch:!0,virtual:!0}),Promise.resolve()}onRemove(t,n){n&&(this.context.nodes=this.context.nodes.filter(r=>!t.has(r._index))),this.context.edges=this.context.edges.filter(r=>!t.has(r._index))}cleanup(){return this.resetContext(),Promise.resolve()}setOptions(t){return this.nodeSelector=t.nodeSelector||this.nodeSelector,this.edgeSelector=t.edgeSelector||this.edgeSelector,this.nodeDataFunction=t.nodeDataFunction||this.nodeDataFunction,this.edgeDataFunction=t.edgeDataFunction||this.edgeDataFunction,super.setOptions(t)}};function VA(e,t,n){const r=[],i=[];for(let s=0;s<e.size;++s){const o=e.get(s),a=o.getData(),l=t(o);i.push(Qo(a,l)),r.push(a)}return n.modules.data.setProperty(e,null,i,{dispatch:!0,virtual:!0}),r}var Hl=()=>"";function Kd(){return{}}var zF=class extends Io{constructor(e){super(e),this.nodeSelector=e.nodeSelector||Vl,this.nodeGroupIdFunction=e.nodeGroupIdFunction||Hl,this.nodeGenerator=e.nodeGenerator||Kd,this.edgeSelector=e.edgeSelector||Vl,this.edgeGroupIdFunction=e.edgeGroupIdFunction||Hl,this.edgeGenerator=e.edgeGenerator||Kd,this.separateEdgesByDirection=e.separateEdgesByDirection!==void 0&&e.separateEdgesByDirection,this.groupSelfLoopEdges=!!e.groupSelfLoopEdges,this.groupEdges=e.groupEdges===void 0||e.groupEdges,this.ogma.events.on("updateNodeData",({changes:t})=>this.checkChanges(t,!0)).on("updateEdgeData",({changes:t})=>this.checkChanges(t,!1))}computeNodeGroupId(e){if(this.nodeGroupIdFunction){if(!this.nodeSelector(e)||this.module.groupController.alreadyGrouped.has(e._index)||this.module.animations.hiddenNodes.has(e._index))return;const t=this.nodeGroupIdFunction(e);return t===void 0?void 0:t}}computeEdgeGroupId(e){if(this.edgeGroupIdFunction)return this.edgeSelector(e)&&!this.module.animations.hiddenEdges.has(e._index)?this.edgeGroupIdFunction(e):void 0}addMetaNodes(){const e=this.id,t=this.ogma,n=t.getNodes(),r=new Map;for(let c=0;c<n.size;++c){const d=n.get(c),u=this.computeNodeGroupId(d);if(u===void 0)continue;let h=r.get(u);h||(h={id:u,nodes:[]},r.set(u,h)),h.nodes.push(d)}const i=Array.from(r.values()),s=i.map(({nodes:c})=>t.getNodes(c)),o=[],a=[],{nodeDataUpdates:l}=this.context;for(let c=0;c<i.length;++c){const d=i[c].id,u=s[c],h=this.nodeGenerator(u,d,this);h?(h.id===void 0&&(h.id=Ep(d,e)),a.push(h.id),o.push(h)):(i.splice(c,1),s.splice(c,1),c--)}return t.addNodes(o.map(({id:c,attributes:d})=>({id:c,attributes:d})),{virtual:!0}).then(c=>{const d=t.getNodes(a),u=d.getData();for(let g=0;g<u.length;g++){const p=u[g],m=o[g];u[g]=Qo(Qo(p,m.data),l.get(d._indexes[g]))}t.modules.data.setProperty(d,null,u,{dispatch:!0,virtual:!0}),d.setVisible(!0);const h=d._indexes;this.context.metaNodes&&this.module.removeMetaNodes(this.context.metaNodes);for(let g=0;g<h.length;g++){const p=h[g],m=s[g];this.module.setSubNodes(p,m),this.module.setTransformation(p,this,!0);for(let f=0;f<m._indexes.length;f++)this.module.groupController.alreadyGrouped.add(m._indexes[f]),this.module.setMetaNode(m._indexes[f],d.get(g))}return{metaNodes:d,newNodes:c}})}addMetaEdges(e){const t=this.id,n=this.ogma;let r,i=!1;e?(r=this.module.getSubNodes(e).getAdjacentElements({bothExtremities:!1}).edges,i=!0):r=n.getEdges();const s=new Map,o=this.ogma.modules.graphics.getAttributesManager().getUsedEdgeAttributes().filter(g=>g!=="curvature"),a=new Map;for(let g=0;g<r.size;++g){const p=r.get(g),m=this.computeEdgeGroupId(p);if(m==null)continue;let f=p.getSource(),y=p.getTarget();if(i){let x=this.module.nodeToMeta.get(f._index);x&&x.getTransformation().getId()!==this.getId()&&(x=f);let b=this.module.nodeToMeta.get(y._index);if(b&&b.getTransformation().getId()!==this.getId()&&(b=y),f=x||f,y=b||y,f&&f===y){a.has(f._index)?a.get(f._index).push(p._index):a.set(f._index,[p._index]);continue}}const _=this.groupEdges?bW(m,f.getId(),y.getId(),this.separateEdgesByDirection):String(p.getId());let v=s.get(_);v||(v={id:_,source:f,target:y,edges:[]},s.set(_,v)),v.edges.push(p)}const l=Array.from(s.values()),c=l.map(({edges:g})=>n.getEdges(g)),d=[],{edgeDataUpdates:u}=this.context,h=[];for(let g=0;g<l.length;++g){const p=l[g],m=p.id,f=c[g],y=this.groupEdges?this.edgeGenerator(f,m,this):vW(f,o);if(y){if(y.id===null)throw Error(`The id ${y.id} returned by the edgeGenerator function is not unique.`);y.id===void 0&&(y.id=Ep(m,t)),h.push(y.id),y.source=p.source.getId(),y.target=p.target.getId(),d.push(y)}}return n.addEdges(xW(d),{virtual:!0}).then(()=>{const g=n.getEdges(h);g.setVisible(!1),g.setAttributes(d.map(f=>f.attributes));const p=g.getData();for(let f=0;f<p.length;f++){const y=d[f],_=p[f];p[f]=Qo(Qo(_,y.data),u.get(g._indexes[f]))}n.modules.data.setProperty(g,null,p,{dispatch:!0,virtual:!0}),this.context.metaEdges&&this.module.removeMetaEdges(this.context.metaEdges);const m=g._indexes;for(let f=0;f<m.length;f++){const y=c[f]._indexes,_=m[f];for(let v=0;v<y.length;v++)this.module.setMetaEdge(y[v],g.get(f));this.module.setSubEdges(_,c[f]),this.module.setTransformation(_,this,!1)}return{intraEdges:a,metaEdges:g}})}removeMetaEdges(e){e.forEach(t=>{const n=this.module.getSubEdges(t);if(!n)return;const r=n._indexes;for(let s=0;s<r.length;s++)this.module.clearMetaEdge(r[s]);this.module.clearSubEdges(t._index);const i=this.module.getMetaEdge(t);if(i){for(let s=0;s<r.length;s++)this.module.setMetaEdge(r[s],i);this.module.setSubEdges(i._index,this.module.getSubEdges(i).filter(s=>s!==t).concat(n))}n.filter(s=>s.getTarget().isVisible()&&s.getSource().isVisible()).setVisible(!0)}),e.setVisible(!1)}removeMetaNodes(e){e.forEach(t=>{const n=this.module.getSubNodes(t);if(!n)return;const r=n._indexes;for(const i of r)this.module.clearMetaNode(i);this.module.clearSubNodes(t._index),n.setVisible(!0)}),e.setVisible(!1)}onRemove(e,t){}checkChanges(e,t){const n=t?this.context.nodeDataUpdates:this.context.edgeDataUpdates,r=this.module;for(let i=0;i<e.length;i++){const{property:s,newValues:o,virtual:a,nodes:l,edges:c}=e[i];if(a)continue;const d=t?l.filter(u=>r.getTransformation(u._index,t)===this):c.filter(u=>r.getTransformation(u._index,t)===this);if(d.size)for(let u=0;u<d._indexes.length;u++){let h=n.get(d._indexes[u])||{};const g=o[u];s?Gc(h,s,g):h=g,n.set(d._indexes[u],h)}}}setOptions(e){return this.nodeSelector=e.nodeSelector||this.nodeSelector,this.nodeGroupIdFunction=e.nodeGroupIdFunction||this.nodeGroupIdFunction,this.nodeGenerator=e.nodeGenerator||this.nodeGenerator,this.edgeSelector=e.edgeSelector||this.edgeSelector,this.edgeGroupIdFunction=e.edgeGroupIdFunction||this.edgeGroupIdFunction,this.edgeGenerator=e.edgeGenerator||this.edgeGenerator,this.separateEdgesByDirection=e.separateEdgesByDirection!==void 0?!!e.separateEdgesByDirection:this.separateEdgesByDirection,this.groupSelfLoopEdges=e.groupSelfLoopEdges!==void 0?!!e.groupSelfLoopEdges:this.groupSelfLoopEdges,this.groupEdges=e.groupEdges!==void 0?!!e.groupEdges:this.groupEdges,super.setOptions(e)}resetContext(){super.resetContext(),this.context=yt(be({},this.context),{nodeDataUpdates:new Map,edgeDataUpdates:new Map})}},OF=class extends zF{constructor({duration:t,easing:n,id:r,ogma:i,module:s,enabled:o,padding:a=2,onBeforeAddMetaEdges:l,selector:c=Vl,groupIdFunction:d=Hl,edgeGroupIdFunction:u=Hl,nodeGenerator:h=Kd,edgeGenerator:g=Kd,onGroupUpdate:p=()=>Promise.resolve(),separateEdgesByDirection:m=!1,groupSelfLoopEdges:f=!1,groupEdges:y=!0,restorePositions:_=!0,showContents:v=!1}){super({id:r,ogma:i,module:s,nodeSelector:c,nodeGroupIdFunction:d,edgeGroupIdFunction:u,nodeGenerator:h,edgeSelector:x=>!(!this.module.getMetaNode(x.getSource())&&!this.module.getMetaNode(x.getTarget())),edgeGenerator:g,separateEdgesByDirection:m,groupEdges:y,groupSelfLoopEdges:f,duration:t,easing:n,enabled:o}),this.onBeforeAddMetaEdges=l||(()=>Promise.resolve()),this.onGroupUpdate=p,this._padding=a,this._showContents=typeof v!="function"?()=>v:v,this._restorePositions=_}getName(){return lr.NodeGrouping}get padding(){return this._padding}set padding(t){this._padding=t,this.refresh()}resetContext(){super.resetContext(),this.context=yt(be({},this.context),{metaNodes:this.ogma.nodeList(),metaEdges:this.ogma.edgeList(),subNodes:this.ogma.nodeList(),intraEdges:this.ogma.edgeList(),subNodesPerMetaNode:new Map,subEdges:this.ogma.edgeList()})}run(){let t,n;const r=this.ogma,i=this.module.groupController,s=i.layoutController;let o=r.createNodeList(),a=r.createEdgeList();const l=[];let c=r.createEdgeList();const d=new Map,u=-(this.getIndex()+1),h=new Set,g=[];let p;const m=r.geo.enabled();return this.addMetaNodes().then(({metaNodes:f,newNodes:y})=>{p=i.setPadding(f,this._padding),t=f;for(let _=0;_<y.size;_++)h.add(y._indexes[_]);for(let _=0;_<t.size;_++)i.nodeLayer.set(t._indexes[_],u);return this.onBeforeAddMetaEdges(t,y).then(()=>this.addMetaEdges(t))}).then(({intraEdges:f,metaEdges:y})=>{n=y,a=this.module.getSubEdges(n),n.filter(x=>x.getExtremities().map(b=>b.isVisible()).every(b=>b)).setVisible(!0);for(let x=0;x<n.size;x++)i.edgeLayer.set(n._indexes[x],u);a.setVisible(!1);const _=this.context.metaNodes.subtract(t),v=this.context.metaEdges.subtract(n);return this.module.removeMetaNodes(_),this.module.removeMetaEdges(v),i.cleanup(_,v),r.removeNodes(_,{virtual:!0}).then(()=>r.removeEdges(v,{virtual:!0})).then(()=>({intraEdges:f,metaEdges:y}))}).then(({intraEdges:f})=>{const y=t._indexes,_=[],v=t.getPosition();for(let x=0;x<y.length;x++){const b=t.get(x),w=i.isClose(b),S=!w&&!i.isOpen(b),A=i.collapsedGroups.has(b._index),C=this._showContents(b),k=this.module.getSubNodes(b),T=v[x],M=k._indexes,D=new Set;if(S){const{x:$,y:Q}=i.getGroupXYR(b,this.module.getSubNodes(b),void 0,void 0);m?i.setGeoLatLng(b,Q,$):(b.setAttributes({x:$,y:Q},0),T.x=$,T.y=Q)}d.set(y[x],D);const B=f.has(b._index)&&r.edgeList(f.get(b._index));B&&(c=c.concat(B),B.setVisible(C&&!A)),o=o.concat(k);for(let $=0;$<M.length;$++)D.add(M[$]);const I=this.context.subNodesPerMetaNode.get(y[x]),N=p.has(b._index);let V=!I||s.shouldRelayout.has(b._index);if(!V&&I)for(const $ of I.keys())V||(V=!D.has($));if(!V&&I)for(let $=0;$<M.length;$++)V||(V=!I.has(M[$]));if(V&&(s.shouldRelayout.add(b._index),_.push(this.getLayoutPromise(b,k,C))),C){if(w?i.expandGroup(b,k):i.addOpenGroup(b),V||N){g.push(b);const $=this.module.getMetaNode(b);$&&s.shouldRelayout.add($._index)}}else i.closeGroup(b,k,T.x,T.y)}return this.module.animations.handleLayoutPromises(_).then(()=>{g.forEach(x=>i.setGroupXYR(x)),m&&this.ogma.modules.geo._updateNodesCoordinates(t)})}).then(()=>(this.context={metaNodes:t,metaEdges:n,subNodesPerMetaNode:d,subNodes:o,intraEdges:c,nodeDataUpdates:this.context.nodeDataUpdates,edgeDataUpdates:this.context.edgeDataUpdates,subEdges:a},l))}undo(t=!0){super.undo(t);const{metaNodes:n,metaEdges:r,intraEdges:i,subNodes:s,subEdges:o}=this.context,a=this.module.animations,l=this.module.groupController,c=-(this.getIndex()+1);i.setVisible(!0),o.setVisible(!0),r.setVisible(!1),s.setVisible(!0),s.setAttribute("layer",c+1),n.setVisible(!1),t?(a.pushBefore(()=>{n.setVisible(!0),r.setVisible(!0)}),a.pushAfter(()=>{n.setVisible(!1),r.setVisible(!1)}),n.forEach(d=>{const u=this.module.getSubNodes(d);if(l.isClose(d))l.expandGroup(d,u,!0);else{const h=d.getPosition();l.closeGroup(d,u,h.x,h.y,!0)}})):n.forEach(d=>{l.restorePositions(d,this.module.getSubNodes(d))})}onRemove(t,n){if(n){const r=this.context.metaNodes.size;this.context.metaNodes=this.context.metaNodes.filter(s=>!t.has(s._index));const i=this.context.subNodes.size;this.context.subNodes=this.context.subNodes.filter(s=>!t.has(s._index)),(this.context.subNodes.size!==r||this.context.metaNodes.size!==i)&&this.context.subNodesPerMetaNode.clear()}else this.context.subEdges=this.context.subEdges.filter(r=>!t.has(r._index)),this.context.metaEdges=this.context.metaEdges.filter(r=>!t.has(r._index))}cleanup(){const{ogma:t}=this,n=this.context,{metaNodes:r,metaEdges:i,subNodes:s}=n;return this.module.removeMetaNodes(r),this.module.removeMetaEdges(i),this.module.groupController.cleanup(r,i,s),super.cleanup(),Promise.all([t.removeEdges(i,{virtual:!0}),t.removeNodes(r,{virtual:!0})]).then(()=>Promise.resolve())}setOptions({duration:t,easing:n,enabled:r,padding:i,selector:s,groupIdFunction:o,nodeGenerator:a,edgeGroupIdFunction:l,edgeGenerator:c,separateEdgesByDirection:d,groupSelfLoopEdges:u,groupEdges:h,restorePositions:g,showContents:p}){return this._padding=i!==void 0?i:this.padding,this._showContents=p!==void 0?typeof p!="function"?()=>p:p:this._showContents,this._restorePositions=g===void 0?this._restorePositions:g,super.setOptions({nodeSelector:s,nodeGroupIdFunction:o,nodeGenerator:a,edgeSelector:m=>!(!this.module.getMetaNode(m.getSource())&&!this.module.getMetaNode(m.getTarget())),edgeGroupIdFunction:l,edgeGenerator:c,separateEdgesByDirection:d,groupEdges:h,groupSelfLoopEdges:u,duration:t,easing:n,enabled:r})}getLayoutPromise(t,n,r){return(this.onGroupUpdate(t,n,r)||Promise.resolve()).then(i=>i?{subNodes:n,res:i}:null)}},VW=class extends zF{constructor({duration:t,easing:n,id:r,ogma:i,module:s,enabled:o,selector:a=Vl,groupIdFunction:l=Hl,generator:c=Kd,separateEdgesByDirection:d=!1}){super({id:r,ogma:i,module:s,nodeSelector:null,nodeGroupIdFunction:null,nodeGenerator:null,edgeSelector:a,edgeGroupIdFunction:l,edgeGenerator:c,separateEdgesByDirection:d,groupEdges:!0,groupSelfLoopEdges:!0,duration:t,easing:n,enabled:o})}resetContext(){super.resetContext(),this.context=yt(be({},this.context),{metaEdges:this.ogma.edgeList(),subEdges:this.ogma.edgeList()})}getName(){return lr.EdgeGrouping}run(){let t,n;const r=this.module.animations,i=new Set(this.context.metaEdges.getId());return this.addMetaEdges().then(({metaEdges:s})=>{t=s,n=this.module.getSubEdges(t),t.setVisible(!0),n.setVisible(!1),r.hideEdges(n._indexes);const o=t.concat(this.context.metaEdges).getParallelEdges().dedupe().filter(d=>!i.has(d.getId())),a=new Array(o.size),l=new Map;for(let d=0;d<o.size;d++)a[d]=this.ogma.modules.curvatureManager.computeCurvature(o.get(d),"visible"),l.set(o._indexes[d],a[d]);const c=this.module.getSubEdges(o);c.setVisible(!0),this.module.animations.setCurvatures(o._indexes,a);for(let d=0;d<c._indexes.length;d++)this.module.animations.setCurvature(n._indexes[d],l.get(this.module.getMetaEdge(n.get(d))._index)||0)}).then(()=>{this.context.metaEdges=t,this.context.subEdges=n})}undo(t=!0){super.undo(t);const{metaEdges:n,subEdges:r}=this.context;if(r.setVisible(!0),n.setVisible(!1),!t)return Promise.resolve();const i=r.getParallelEdges().dedupe(),s=new Array(i.size),o=new Map;for(let a=0;a<i.size;a++)s[a]=this.ogma.modules.curvatureManager.computeCurvature(i.get(a),"visible"),o.set(i._indexes[a],s[a]);return this.module.animations.setCurvatures(i._indexes,s),Promise.resolve()}onRemove(t,n){n||(this.context.subEdges=this.context.subEdges.filter(r=>!t.has(r._index)))}_getCurvatures(t){return t.map(n=>this.ogma.modules.curvatureManager.computeCurvature(n,"visible",()=>!0))}cleanup(){const{metaEdges:t}=this.context;return this.module.removeMetaEdges(t),this.ogma.removeEdges(t,{virtual:!0}).then(()=>(this.context.metaEdges=this.ogma.edgeList(),this.context.subEdges=this.ogma.edgeList(),Promise.resolve()))}setOptions({duration:t,easing:n,enabled:r,selector:i,groupIdFunction:s,generator:o,separateEdgesByDirection:a}){return super.setOptions({nodeSelector:void 0,nodeGroupIdFunction:void 0,nodeGenerator:void 0,edgeSelector:i,edgeGroupIdFunction:s,edgeGenerator:o,separateEdgesByDirection:a,groupEdges:!0,duration:t,easing:n,enabled:r})}},HA=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],_0=1,xc=8,HW=class BF{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,r]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const i=r>>4;if(i!==_0)throw new Error(`Got v${i} data when expected v${_0}.`);const s=HA[15&r];if(!s)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(t,2,1),[a]=new Uint32Array(t,4,1);return new BF(a,o,s,t)}constructor(t,n=64,r=Float64Array,i){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const s=HA.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,a=t*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-a%8)%8;if(s<0)throw new Error(`Unexpected typed array class: ${r}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,xc,t),this.coords=new this.ArrayType(this.data,xc+a+l,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(xc+o+a+l),this.ids=new this.IndexArrayType(this.data,xc,t),this.coords=new this.ArrayType(this.data,xc+a+l,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(_0<<4)+s]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=t,this.coords[this._pos++]=n,r}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Zy(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:s,coords:o,nodeSize:a}=this,l=[0,s.length-1,0],c=[];for(;l.length;){const d=l.pop()||0,u=l.pop()||0,h=l.pop()||0;if(u-h<=a){for(let f=h;f<=u;f++){const y=o[2*f],_=o[2*f+1];y>=t&&y<=r&&_>=n&&_<=i&&c.push(s[f])}continue}const g=h+u>>1,p=o[2*g],m=o[2*g+1];p>=t&&p<=r&&m>=n&&m<=i&&c.push(s[g]),(d===0?t<=p:n<=m)&&(l.push(h),l.push(g-1),l.push(1-d)),(d===0?r>=p:i>=m)&&(l.push(g+1),l.push(u),l.push(1-d))}return c}within(t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:s,nodeSize:o}=this,a=[0,i.length-1,0],l=[],c=r*r;for(;a.length;){const d=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=o){for(let f=h;f<=u;f++)WA(s[2*f],s[2*f+1],t,n)<=c&&l.push(i[f]);continue}const g=h+u>>1,p=s[2*g],m=s[2*g+1];WA(p,m,t,n)<=c&&l.push(i[g]),(d===0?t-r<=p:n-r<=m)&&(a.push(h),a.push(g-1),a.push(1-d)),(d===0?t+r>=p:n+r>=m)&&(a.push(g+1),a.push(u),a.push(1-d))}return l}};function Zy(e,t,n,r,i,s){if(i-r<=n)return;const o=r+i>>1;jF(e,t,o,r,i,s),Zy(e,t,n,r,o-1,1-s),Zy(e,t,n,o+1,i,1-s)}function jF(e,t,n,r,i,s){for(;i>r;){if(i-r>600){const c=i-r+1,d=n-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),g=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1);jF(e,t,n,Math.max(r,Math.floor(n-d*h/c+g)),Math.min(i,Math.floor(n+(c-d)*h/c+g)),s)}const o=t[2*n+s];let a=r,l=i;for(bc(e,t,r,n),t[2*i+s]>o&&bc(e,t,r,i);a<l;){for(bc(e,t,a,l),a++,l--;t[2*a+s]<o;)a++;for(;t[2*l+s]>o;)l--}t[2*r+s]===o?bc(e,t,r,l):(l++,bc(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function bc(e,t,n,r){y0(e,n,r),y0(t,2*n,2*r),y0(t,2*n+1,2*r+1)}function y0(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function WA(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}var WW=e=>e/360+.5,XW=e=>{const t=Math.sin(e*Math.PI/180);return(e=.5-.25*Math.log((1+t)/(1-t))/Math.PI)<0?0:e>1?1:e},YW=[],qW=256,ZW=class extends OF{constructor(t){super(yt(be({},t),{enabled:t.ogma.geo.enabled(),showContents:!1,selector:n=>{const r=this.getPosition(n);return r&&!isNaN(r.x)&&!isNaN(r.y)&&(!t.selector||t.selector(n))},groupIdFunction:n=>{let r=t.groupIdFunction?t.groupIdFunction(n):"geo-cluster";return r||(r="geo-cluster"),`${r}-${this.getNodeId(n)}`},edgeGroupIdFunction:n=>{let r=t.edgeGroupIdFunction?t.edgeGroupIdFunction(n):"";return r||(r=""),`${r}-${this.getNodeId(n.getSource())}-${this.getNodeId(n.getTarget())}`},nodeGenerator:(n,r,i)=>{let s=t.nodeGenerator?t.nodeGenerator(n,r,i):{};s||(s={});const o=this.getCoords(n.get(0));return s.data?s.data=Xy(s.data,o):s.data=o,s}})),this._zoomLevels=t.zoomLevels?t.zoomLevels:[0,22],this._groupingRadius=t.radius===void 0?60:t.radius,this._generateIdFunction=t.groupIdFunction||(()=>""),this._shouldEnable=t.enabled,this._shouldRefreshClusters=!0,this.ogma.events.on("beforeGeoCameraMove",({zoom:n})=>{!this.isEnabled()||!this.ogma.geo.enabled()||this.getClosestZoomLevel(n).zoom===this._currentClusters.zoom||(this._shouldRefreshClusters=!1,this.refresh())}).on("geoDisabled",()=>{this.isEnabled()&&this.disable(0).then(()=>{this._shouldEnable=!0})}).on("geoEnabled",()=>{this._shouldEnable&&this.enable(0)})}getPosition(t){return{x:t.getData(this.ogma.modules.geo.latitudePath),y:t.getData(this.ogma.modules.geo.longitudePath)}}getMercatorPosition(t){return{x:WW(t.getData(this.ogma.modules.geo.longitudePath)),y:XW(t.getData(this.ogma.modules.geo.latitudePath))}}getNodeId(t){var n;return((n=this._currentClusters.idToCluster.get(t._index))==null?void 0:n.id)||""}getName(){return lr.GeoClustering}enable(t){return this.ogma&&!this.ogma.geo.enabled()?(this._shouldEnable=!0,Promise.resolve()):super.enable(t)}undo(t=!0){const{metaNodes:n,metaEdges:r,intraEdges:i,subNodes:s,subEdges:o}=this.context,a=-(this.getIndex()+1);return t?(i.setVisible(!0),o.setVisible(!0),r.setVisible(!1),s.setVisible(!0),s.setAttribute("layer",a+1),this.module.animations.push(()=>{r.filter(l=>l).setVisible(!1),n.filter(l=>l).setVisible(!1)}),Promise.resolve()):(n.setVisible(!1),r.setVisible(!1),s.setVisible(!0),o.setVisible(!0),i.setVisible(!0),Promise.resolve())}disable(t){return this._shouldEnable=!1,super.disable(t)}getCoords(t){var n;const r=((n=this._currentClusters.idToCluster.get(t._index))==null?void 0:n.center)||{x:0,y:0},i={};return this.setToPropertyPath(i,this.ogma.modules.geo.latitudePath,r.x),this.setToPropertyPath(i,this.ogma.modules.geo.longitudePath,r.y),i}setToPropertyPath(t,n,r){if(typeof n=="string")return this.setToPropertyPath(t,n.split("."),r);{let i=t;n.forEach((s,o)=>{o===n.length-1?i[s]=r:i[s]||(i[s]={}),i=i[s]})}}nodeToElement(t){return{nodeId:t._index,generatedId:this._generateIdFunction(t),nodes:this.ogma.nodeList(new Uint32Array([t._index])),radius:t.getAttribute("radius"),center:this.getPosition(t),mercatorCenter:this.getMercatorPosition(t),zoom:1/0}}getCluster(t){const n=t.reduce((s,o)=>({x:s.x+o.center.x/t.length,y:s.y+o.center.y/t.length}),{x:0,y:0}),r=t.reduce((s,o)=>({x:s.x+o.mercatorCenter.x/t.length,y:s.y+o.mercatorCenter.y/t.length}),{x:0,y:0}),i=t.reduce((s,o)=>{const a=n.x-o.center.x,l=n.y-o.center.y,c=o.radius+Math.sqrt(a*a+l*l);return Math.max(c,s)},0);return{nodes:this.ogma.nodeList(new Uint32Array(t.map(({nodeId:s})=>s))),generatedId:t[0].generatedId,center:n,mercatorCenter:r,radius:i}}onePassCluster(t){const n=t.map(o=>this.nodeToElement(o)),[r,i]=this._zoomLevels,s=[];for(let o=i;Math.abs(o-r)>.01;o-=1*(i-r)/19){const a=[],l=new HW(n.length);n.forEach(c=>{l.add(c.mercatorCenter.x,c.mercatorCenter.y)}),l.finish(),n.forEach(c=>{if(c.zoom<=o)return;const d=this._groupingRadius/(qW*Math.pow(2,c.zoom-1));let u=l.within(c.mercatorCenter.x,c.mercatorCenter.y,d).map(h=>n[h]).filter(h=>h.zoom>o&&h&&h.generatedId===c.generatedId);u.length||(u=[c]),u.forEach(h=>h.zoom=o),a.push(yt(be({},this.getCluster(u)),{zoom:o,id:`${o.toFixed(2)}-${a.length}`}))}),s.push({zoom:o,clusters:a})}return s.map(({zoom:o,clusters:a})=>{const l=new Map;return a.forEach(c=>{c.nodes.forEach(({_index:d})=>l.set(d,c))}),{zoom:o,idToCluster:l}})}getClosestZoomLevel(t){return this._clustersByZoom.reduce((n,r)=>Math.abs(t-r.zoom)<Math.abs(t-n.zoom)?r:n)}run(){var t;this._shouldRefreshClusters&&(this._clustersByZoom=this.onePassCluster(this.ogma.getNodes().filter(h=>this.nodeSelector(h)))),this._shouldRefreshClusters=!0;const n=((t=this.ogma.geo.getMap())==null?void 0:t.getZoom())||0;let r,i;this._currentClusters=this.getClosestZoomLevel(n);const s=this.ogma,o=this.module.groupController;let a=s.createNodeList(),l=s.createEdgeList(),c=s.createEdgeList();const d=-(this.getIndex()+1),u=new Set;return this.addMetaNodes().then(({metaNodes:h,newNodes:g})=>{r=h;for(let p=0;p<g.size;p++)u.add(g._indexes[p]);for(let p=0;p<r.size;p++)o.nodeLayer.set(r._indexes[p],d);return this.addMetaEdges(r)}).then(({intraEdges:h,metaEdges:g})=>{i=g,l=this.module.getSubEdges(i),i.filter(f=>f.getExtremities().map(y=>y.isVisible()).every(y=>y)).setVisible(!0);for(let f=0;f<i.size;f++)o.edgeLayer.set(i._indexes[f],d);l.setVisible(!1);const p=this.context.metaNodes.subtract(r),m=this.context.metaEdges.subtract(i);return this.module.removeMetaNodes(p),this.module.removeMetaEdges(m),o.cleanup(p,m),s.removeNodes(p,{virtual:!0}).then(()=>s.removeEdges(m,{virtual:!0})).then(()=>({intraEdges:h,metaEdges:g}))}).then(({intraEdges:h})=>{const g=r._indexes;for(let p=0;p<g.length;p++){const m=r.get(p),f=this.module.getSubNodes(m),y=h.has(m._index)&&s.edgeList(h.get(m._index));y&&(c=c.concat(y),y.setVisible(!1)),a=a.concat(f),f.setVisible(!1)}return this.ogma.modules.geo._updateNodesCoordinates(r),this.ogma.modules.geo.updateProjection(),this.context={metaNodes:r,metaEdges:i,subNodes:a,intraEdges:c,subNodesPerMetaNode:new Map,nodeDataUpdates:this.context.nodeDataUpdates,edgeDataUpdates:this.context.edgeDataUpdates,subEdges:l},YW})}setOptions(t){const n=super.setOptions(yt(be({},t),{selector:r=>{const i=this.getPosition(r);return i&&!isNaN(i.x)&&!isNaN(i.y)&&(!t.selector||t.selector(r))},groupIdFunction:r=>{let i=t.groupIdFunction?t.groupIdFunction(r):"geo-cluster";return i||(i="geo-cluster"),`${i}-${this.getNodeId(r)}`},nodeGenerator:(r,i,s)=>{let o=t.nodeGenerator?t.nodeGenerator(r,i,s):{};o||(o={});const a=this.getCoords(r.get(0));return o.data?o.data=Xy(o.data,a):o.data=a,o},edgeGroupIdFunction:r=>{let i=t.edgeGroupIdFunction?t.edgeGroupIdFunction(r):"";return i||(i=""),`${i}-${this.getNodeId(r.getSource())}-${this.getNodeId(r.getTarget())}`}}));return this._groupingRadius=t.radius===void 0?this._groupingRadius:t.radius,this._generateIdFunction=t.groupIdFunction||this._generateIdFunction,this._shouldRefreshClusters=!0,this._shouldEnable=t.enabled,n}},XA=()=>({}),JW=class extends Io{constructor(e){super(e),this._groupSelfLoopEdges=!1,this._isCleaningUp=!1,this._isRunning=!1,this.shouldDo=!0,this.enabled=!1,this._onBeforeAdd=t=>{if(this._isCleaningUp||!this.enabled||t.virtual)return;const{isNode:n,objects:r}=t;if(n){const i=r;YA(i,this._groupNodes(i))}else{const i=r;YA(i,this._groupEdges(i))}this._shouldSetVirtual=!0},this._onAfterAdd=t=>{this._shouldSetVirtual&&(this._shouldSetVirtual=!1,this._setVirtual(t.nodes||t.edges,!!t.nodes))},this._onRequestElementsToDelete=t=>{if(t.virtual)return;const{ogma:n,context:r}=this,i=t.elementsToRemove.isNode,s=i?n.getNodes:n.getEdges,o=i?r.metaNodesSet:r.metaEdgesSet,a=i?r.nodeGroups:r.edgeGroups,l=i?n.removeNodes:n.removeEdges,c=t.elementsToRemove.size,d=s(Array.from(o)),u=t.elementsToRemove.slice();if(t.elementsToRemove=t.elementsToRemove.subtract(d),t.elementsToRemove.size===c)return;const h=u.subtract(t.elementsToRemove);if(h.forEach(g=>{a.delete(g.getId())}),i){const g=h.getAdjacentEdges().filter(p=>p.isVirtual());n.removeEdges(g)}l(h,{virtual:!0})},this._nodeToGroupId=e.groupIdFunction||Hl,this._groupSelfLoopEdges=!!e.groupSelfLoopEdges,this._nodeGenerator=e.nodeGenerator||XA,this._edgeGenerator=e.edgeGenerator||XA,this._shouldSetVirtual=!1,this._selector=e.selector,this.shouldDo=e.enabled===void 0||!!e.enabled,this.ogma.events.on("preAddElements",this._onBeforeAdd).on("requestElementsToDelete",this._onRequestElementsToDelete).on(["postAddGraph","addNodes","addEdges"],this._onAfterAdd),this.shouldDo&&(this.enable(),this.shouldDo=!1)}getName(){return lr.NodeClustering}enable(){if(this.enabled)return Promise.resolve();this.enabled=!0,this.shouldDo=!0,this._isRunning=!0;const{ogma:e}=this;return e.getNodes().size?e.export.json({download:!1,edgeAttributes:"all",nodeAttributes:"all"}).then(t=>(e.clearGraph(),e.setGraph(t))).then(()=>(this._isRunning=!1,Promise.resolve())):(this._isRunning=!1,Promise.resolve())}disable(){return this.enabled?(this.enabled=!1,this.shouldDo=!1,super.disable()):Promise.resolve()}destroy(){return this.disable(),super.destroy()}run(){const{ogma:e}=this;return this.enabled||!this.shouldDo?Promise.resolve():e.export.json({download:!1,edgeAttributes:"all",nodeAttributes:"all"}).then(t=>(e.clearGraph(),e.setGraph(t)))}undo(){if(this._isRunning||this.enabled)return Promise.resolve();const{ogma:e,context:t}=this;this._isCleaningUp=!0;const n=e.getNodes(Array.from(t.metaNodesSet));this.module.removeMetaNodes(n);const r=e.getEdges(Array.from(t.metaEdgesSet));this.module.removeMetaEdges(r);const i=this._getSubNodes(),s=this._getSubEdges();return this.resetContext(),e.removeNodes(n,{virtual:!0}).then(()=>e.removeEdges(r,{virtual:!0})).then(()=>e.addNodes(i)).then(()=>e.addEdges(s)).then(()=>{this._isCleaningUp=!1,Promise.resolve()})}cleanup(){return this.ogma.events.off(this._onBeforeAdd).off(this._onRequestElementsToDelete).off(this._onAfterAdd),Promise.resolve()}resetContext(){this._isRunning||(this.context={nodeGroups:new Map,edgeGroups:new Map,metaNodesSet:new Set,metaEdgesSet:new Set,virtualNodes:this.ogma.createNodeList(),virtualEdges:this.ogma.createEdgeList(),nodeToGroupId:new Map})}getSubNodes(e){const t=this.context.nodeGroups.get(e.getId());return t?t.nodes:[]}getSubEdges(e){const t=this.context.edgeGroups.get(e.getId());return t?t.edges:[]}_getSubNodes(){return Array.from(this.context.nodeGroups.values()).reduce((e,{nodes:t})=>(e.push(...t),e),[])}_getSubEdges(){return Array.from(this.context.edgeGroups.values()).reduce((e,{edges:t})=>(e.push(...t),e),[])}_setVirtual(e,t){if(!e)return;const{context:n}=this,r=t?n.metaNodesSet:n.metaEdgesSet,i=e.filter(s=>r.has(s.getId()));if(t)for(let s=0;s<i.size;s++)this.module.setTransformation(i._indexes[s],this,t),this.module.setSubNodes(i._indexes[s],null);else for(let s=0;s<i.size;s++)this.module.setTransformation(i._indexes[s],this,t),this.module.setSubEdges(i._indexes[s],null);t?n.virtualNodes=n.virtualNodes.concat(i):n.virtualEdges=n.virtualEdges.concat(i)}setContext(){}_computeEdgeGroupId(e,t){return e>t?`${t}:${e}`:`${e}:${t}`}_groupEdges(e){const{ogma:t,id:n,context:r}=this,i=n,s=new Map,o=r.nodeToGroupId;r.edgeGroups.forEach(d=>{d.newEdges=[],s.set(d.id,d)});const a=[];for(let d=0;d<e.length;++d){const u=e[d];let h=r.nodeToGroupId.get(u.source),g=r.nodeToGroupId.get(u.target);if(!h&&!g){a.push(u);continue}h=h||u.source,g=g||u.target;const p=this._computeEdgeGroupId(h,g);if(p!==void 0){const m=o.get(u.source)||u.source,f=o.get(u.target)||u.target;let y=s.get(p);y||(y={id:p,source:m,target:f,edges:[],newEdges:[]},s.set(p,y)),y.edges.push(u),y.newEdges.push(u)}}const l=Sp(s),c=l.map(({edges:d})=>d);for(let d=0;d<l.length;++d){const u=l[d];if(!u.newEdges.length)continue;const h=u.id,g=c[d],p=this._edgeGenerator(g,h);p.id===void 0&&(p.id=Ep(h,i)),p.source=u.source,p.target=u.target,u.metaEdge=p,r.metaEdgesSet.add(p.id),r.edgeGroups.get(p.id)||r.edgeGroups.set(p.id,u),(this._groupSelfLoopEdges||p.source!==p.target)&&a.push(p)}return t.view.afterNextFrame().then(()=>{r.edgeGroups.forEach(({newEdges:d,metaEdge:u})=>{if(!(d.length&&u&&u.id&&u.attributes))return;const h=t.getEdge(u.id);h==null||h.setAttributes(u.attributes)})}),a}_groupNodes(e){const{id:t,context:n,ogma:r}=this,i=t,s=new Map;n.nodeGroups.forEach(u=>{u.newNodes=[],s.set(u.id,u)});const o=[];for(let u=0;u<e.length;u++){const h=e[u];if(this._selector&&!this._selector(h)){o.push(h);continue}h.id=wW(h.id);const g=this._nodeToGroupId(h);if(g!==void 0){let p=s.get(g);p||(p={id:g,nodes:[],newNodes:[]},s.set(g,p)),p.nodes.push(h),p.newNodes.push(h)}else n.nodeToGroupId.set(h.id,h.id)}const a=Sp(s),l=a.map(({nodes:u})=>u),c=a.map(({newNodes:u})=>u),d=[];for(let u=0;u<a.length;++u){if(!a[u].newNodes.length)continue;const h=a[u].id,g=l[u],p=this._nodeGenerator(g,h);a[u].metaNode=p,p.id===void 0&&(p.id=Ep(h,i));for(const m of c[u])n.nodeToGroupId.set(m.id,p.id);n.metaNodesSet.add(p.id),n.nodeGroups.get(p.id)||n.nodeGroups.set(p.id,a[u]),d.push(p)}return d.push(...o),r.view.afterNextFrame().then(()=>{n.nodeGroups.forEach(({newNodes:u,metaNode:h})=>{if(!(u.length&&h&&h.id&&h.attributes))return;const g=r.getNode(h.id);g==null||g.setAttributes(h.attributes)})}),d}setOptions(e){return this._nodeToGroupId=e.groupIdFunction||this._nodeToGroupId,this._groupSelfLoopEdges=e.groupSelfLoopEdges!==void 0?!!e.groupSelfLoopEdges:this._groupSelfLoopEdges,this._nodeGenerator=e.nodeGenerator||this._nodeGenerator,this._edgeGenerator=e.edgeGenerator||this._edgeGenerator,this._selector=e.selector||this._selector,this.disable().then(()=>this.undo()).then(()=>this.ogma.view.afterNextFrame()).then(()=>this.enable())}onRemove(){}};function YA(e,t){const n=t.length;return e.length=n,e.splice(0,n,...t),e}function os(e){return e.enabled!==!1}var QW=class extends NW{_setOptions(t){const n=t;return n.ogma=this.ogma,n.module=this,n.id=this.transformations.length,n}addNodeGrouping(t={}){const n=new OF(this._setOptions(t));return this.addTransformation(n,os(t)),n}addEdgeGrouping(t={}){const n=new VW(this._setOptions(t));return this.addTransformation(n,os(t)),n}addGeoClustering(t={}){const n=new ZW(this._setOptions(t));return this.addTransformation(n),n}addNodeFilter(t={}){let n={};n=typeof t=="function"?{criteria:t}:t;const r=new MW(this._setOptions(n));return this.addTransformation(r,os(n)),r}addEdgeFilter(t={}){let n={};n=typeof t=="function"?{criteria:t}:t;const r=new FW(this._setOptions(n));return this.addTransformation(r,os(n)),r}addNeighborMerging(t){const n=new RW(this._setOptions(t));return this.addTransformation(n,os(t)),n}addNeighborGeneration(t){const n=new OW(this._setOptions(t));return this.addTransformation(n,os(t)),n}addNodeCollapsing(t={}){const n=new UW(this._setOptions(t));return this.addTransformation(n,os(t)),n}addVirtualProperties(t={}){const n=new GW(this._setOptions(t));return this.addTransformation(n,os(t)),n}addNodeClustering(t={}){const n=new JW(this._setOptions(t));return this.addTransformation(n,os(t)),n}addDrilldown(t={onGetSubgraph:()=>Promise.resolve({nodes:[],edges:[]})}){const n=new EW(this._setOptions(t));return this.drilldownController.addDrilldown(n),n}onGroupsUpdated(t){this.groupController.onGroupsUpdate=t}layoutGroups(t,n,r=!1){return this.groupController.layoutGroups(t,n,r)}},KW=class extends ct{constructor(e){super(e),this.getSubElements=t=>this.api.getSubElements(t),this.getSubNodes=t=>this.api.getSubNodes(t),this.getSubEdges=t=>this.api.getSubEdges(t),this.onGroupsUpdated=t=>this.api.onGroupsUpdated(t)}onMounted(){this._modules.classes.createClass({name:DI,isBuiltin:!0,nodeAttributes:{opacity:0,radius:0},edgeAttributes:{opacity:0}}),this._modules.classes.createClass({name:zI,isBuiltin:!0,nodeAttributes:{opacity:0},edgeAttributes:{opacity:0}}),this._modules.settings.register("transformations.updateOnDataChange",!0),this._modules.events.register(["transformationEnabled","transformationDisabled","transformationSetIndex","transformationDestroyed","transformationRefresh"])}onReady(e){this.api=new QW(this._ogma)}destroy(){}isElementVirtual(e){return this.api.isVirtual(e._index,e.isNode)}getElementTransformation(e){return this.api.getTransformation(e._index,e.isNode)}getMetaElements(e){return e.map(t=>this.getMetaElement(t))}getMetaElement(e){var t;const n=e.isNode?this.api.getMetaNode(e):this.api.getMetaEdge(e);return n&&((t=this.api.getTransformation(n._index,n.isNode))!=null&&t.isEnabled())?n:null}getMetaEdge(e){return this.getMetaElement(e)}getMetaNode(e){return this.getMetaElement(e)}getMetaNodes(e){return this.getMetaElements(e)}getMetaEdges(e){return this.getMetaElements(e)}getNodeFilters(){return this.api.getList().filter(e=>e.getName()===lr.NodeFilter)}getEdgeFilters(){return this.api.getList().filter(e=>e.getName()===lr.EdgeFilter)}whenApplied(){return this.api.afterNextUpdate()}afterNextUpdate(){return this.api.afterNextUpdate()}},qA={layer:OI,outline:!0,outerStroke:{color:Ay,width:5},innerStroke:{minVisibleSize:0},text:{backgroundColor:lM,minVisibleSize:0}},eX={layer:OI,color:Ay,text:{backgroundColor:lM,minVisibleSize:0},stroke:{color:Ay,width:0}},tX=class extends ct{onMounted(){this._modules.events.register(["nodesSelected","nodesUnselected","edgesSelected","edgesUnselected"]),this._selectionExtremityHighlightedClass=this._modules.classes.createClass({name:cy,isBuiltin:!0,nodeAttributes:qA}),this._selectedClass=this._modules.classes.createClass({name:tn,isBuiltin:!0,nodeAttributes:qA,edgeAttributes:eX}),this._modules.events.on(`nodeClassAdded_${tn}`,t=>{this._modules.events.fire("nodesSelected",t)}),this._modules.events.on(`edgeClassAdded_${tn}`,t=>{this._modules.events.fire("edgesSelected",t)}),this._modules.events.on(`nodeClassRemoved_${tn}`,t=>{this._modules.events.fire("nodesUnselected",t)}),this._modules.events.on(`edgeClassRemoved_${tn}`,t=>{this._modules.events.fire("edgesUnselected",t)}),this._modules.settings.register("interactions.selection.enabled",!0),this._modules.settings.register("interactions.selection.multiSelectionKey","ctrl"),this._modules.interactions.onClick({priority:"selection",check:({button:t})=>{const n=!!this._modules.settings.get("interactions.selection.enabled");return t==="left"&&n},handler:({target:t})=>{if(t){const n=this._modules.settings.get("interactions.selection.multiSelectionKey"),r=n&&this._modules.keyboard.isPressed(n);t.isNode?this._selectedClass.clearEdges():this._selectedClass.clearNodes(),r?t.hasClass(tn)?t.removeClass(tn):t.addClass(tn):((t.isNode?this._selectedClass.getNodes():this._selectedClass.getEdges()).filter(i=>i!==t).removeClass(tn),t.hasClass(tn)||t.addClass(tn))}else this._selectedClass.clearNodes(),this._selectedClass.clearEdges()}});const e=()=>{this._selectionExtremityHighlightedClass.clearNodes(),this._selectedClass.getEdges().getExtremities().addClass(cy)};this._modules.events.on("beforeRemoveEdges",({edges:t})=>t.setSelected(!1)).on("excludedStateChange",({elements:t,value:n})=>{n||t.setSelected(!1)}).on(`edgeClassAdded_${tn}`,e).on(`edgeClassRemoved_${tn}`,e)}setNodeAttributes(e,t){this._selectedClass.update({nodeAttributes:e,fullOverwrite:t}),this._selectionExtremityHighlightedClass.update({nodeAttributes:e,fullOverwrite:t}),this._updateExtremityHighlightLayer()}setEdgeAttributes(e,t){this._selectedClass.update({edgeAttributes:e,fullOverwrite:t}),this._updateExtremityHighlightLayer()}_updateExtremityHighlightLayer(){const e=this._selectedClass.getDefinition().edgeAttributes,t=e?e.layer:void 0;this._selectionExtremityHighlightedClass.update({nodeAttributes:{layer:t},fullOverwrite:!1})}setActive(e,t){if(Vn(t)){const n=[],r=[];e.toList().forEach((i,s)=>{(t[s]?n:r).push(i.getId())}),n.length!==0&&this._modules.graph.getElements(e.isNode,n).addClass(tn),r.length!==0&&this._modules.graph.getElements(e.isNode,r).removeClass(tn)}else e.size&&e[t?"addClass":"removeClass"](tn)}areActive(e){return e.hasClass(tn)}getSelectedNodes(){return this._selectedClass.getNodes()}getSelectedEdges(){return this._selectedClass.getEdges()}getNonSelectedNodes(){return this._modules.graph.getNodes().filter(e=>!e.hasClass(tn))}getNonSelectedEdges(){return this._modules.graph.getEdges().filter(e=>!e.hasClass(tn))}clear(){this._selectedClass.clearNodes(),this._selectedClass.clearEdges()}},nX=class extends ct{onMounted(){this._delayedCalls=[],this._idIdle=()=>!this._modules.captor.isAnyButtonPressed()&&!this._modules.dom.isPlayingFrame(),this._modules.events.on(["mousedown","mouseup","beforeNewFrame","frame"],()=>{this._delayedCalls.forEach(e=>e.reset())})}_nextTimeIdle(e){const t=new rX(this._modules.dom,this._idIdle,e);return this._delayedCalls.push(t),t.whenDone().then(()=>{this._delayedCalls.splice(this._delayedCalls.indexOf(t),1)})}debounceIdle(e,t=0){let n=!1,r=[];const i=()=>{const s=r;n=!1,r=[],e(),s.forEach(o=>o())};return()=>new Promise(s=>{r.push(s),n||(n=!0,this._nextTimeIdle(t).then(i))})}},rX=class{constructor(e,t,n){this._timeout=null,this._done=!1,this._dom=e,this._promise=new Promise(r=>this._resolve=r),this._isIdle=t,this._delay=n,this._startTimeout()}_startTimeout(){this._timeout=this._dom.setTimeout(()=>{this._isIdle()?(this._done=!0,this._resolve()):this._startTimeout()},this._delay)}reset(){this._done||(this._dom.clearTimeout(this._timeout),this._startTimeout())}whenDone(){return this._promise}},Ih=-2,iX={number:1,duration:1e3,interval:800,startColor:"rgba(0,0,0,0.6)",endColor:"rgba(0,0,0,0.0)",width:50,startRatio:1,endRatio:2,enabled:!1},sX={number:1,duration:1e3,interval:800,startColor:"rgba(0,0,0,0.6)",endColor:"rgba(0,0,0,0.0)",width:10,startRatio:1,endRatio:2,enabled:!1},oX=class extends ct{constructor(){super(...arguments),this._nodePromiseMap=new Map,this._edgePromiseMap=new Map,this._onAttributeChange=({nodes:e,edges:t,nodeAttributes:n,edgeAttributes:r})=>{this._onElementsAttributeChange(e,n),this._onElementsAttributeChange(t,r,!1)},this._refreshPulses=()=>{const{nodes:e,edges:t}=this._hasPulses.getElements();if(e.size!==0||t.size!==0){const n=this._engine.getCurrentTime();this._refreshElementsPulses(e,n),this._refreshElementsPulses(t,n),this._modules.dom.refresh()}}}onMounted(){this._modules.events.on("updateAttributes",this._onAttributeChange).on("frame",this._refreshPulses).on("beforeRemoveEdges",({edges:e})=>{this._removePulses(e)}).on("beforeRemoveNodes",({nodes:e})=>{this._removePulses(e)}).on("excludedStateChange",({elements:e,value:t})=>{t&&(this._hasPulses.removeElements(e),this._removePulses(e))}).on("clearGraph",()=>this._hasPulses.clear()),this._engine=this._modules.graphics.getGraphicsEngine(),this._group=this._engine.createGroup(),this._nodePulses=this._modules.graph.createNodeAttribute({storage:"any"},!1),this._edgePulses=this._modules.graph.createEdgeAttribute({storage:"any"},!1),this._nodeNbPulsesRemaining=this._modules.graph.createNodeAttribute({storage:"int16",default:-1},!1),this._edgeNbPulsesRemaining=this._modules.graph.createEdgeAttribute({storage:"int16",default:-1},!1),this._nodeFlexArrays=this._modules.graphics.getNodeAttributes(),this._edgeFlexArrays=this._modules.graphics.getEdgeAttributes(),this._edgeSourceList=this._modules.graph.getEdgeAttribute("source"),this._edgeTargetList=this._modules.graph.getEdgeAttribute("target"),this._hasPulses=new Eu(this._modules.graph)}_onElementsAttributeChange(e,t,n=!0){if(!t.includes("pulse.enabled"))return;const{valid:r,invalid:i}=uI(this._modules.graph,e,o=>o.getAttribute("pulse.enabled")&&o.isVisible());this._hasPulses.removeElements(i),this._hasPulses.addElements(r);const s=n?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining;for(let o=0;o<r.size;o++)s.get(r._indexes[o])>0||s.set(r._indexes[o],Ih);this._removePulses(i)}_removePulses(e){const t=e.isNode?this._nodePulses:this._edgePulses,n=e.isNode?this._nodePromiseMap:this._edgePromiseMap;for(let r=0;r<e._indexes.length;r++){const i=e._indexes[r],s=t.get(i);if(s){for(let a=0;a<s.length;a++){const l=s[a];this._modules.graphics.releaseGraphicsEngineBlockId(l.blockId)}t.set(i,null);const o=n.get(i);o&&(o.resolve(),n.delete(i))}}}_refreshElementsPulses(e,t){const n=e.isNode,r=n?this._nodePulses:this._edgePulses,i=n?this._nodeFlexArrays.pulse.duration:this._edgeFlexArrays.pulse.duration,s=n?"_createNodePulseBlock":"_createEdgePulseBlock",o=n?this._nodeFlexArrays.pulse.interval:this._edgeFlexArrays.pulse.interval,a=n?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining;for(let l=0;l<e._indexes.length;l++){const c=e._indexes[l];let d=r.get(c);d||(d=[],r.set(c,d));for(let m=0;m<d.length;m++){const{startTime:f,duration:y,blockId:_}=d[m];t>=f+y&&(this._modules.graphics.releaseGraphicsEngineBlockId(_),d.splice(m--,1))}const u=d[d.length-1];if(u&&t<u.startTime+o.get(c))continue;const h=i.get(c),g=a.get(c);if(g<1&&g!==Ih)continue;d.push({blockId:this[s](c,t,h),startTime:t,duration:h});const p=g===Ih?Ih:g-1;a.set(c,p)}}_createNodePulseBlock(e,t,n){const r=this._nodeFlexArrays,i=r.color.get(e),s=r.layer.get(e),o=r.x.get(e),a=r.y.get(e),l=r.radius.get(e),c=r.scalingMethod.get(e)==="scaled",d=r.pulse.startRatio.get(e),u=r.pulse.endRatio.get(e),h=r.pulse.width.get(e),g=2*l*d,p=2*l*u,m=Yd(s).nodeBody,f=r.pulse.startColor.get(e),y=r.pulse.endColor.get(e),_=this._modules.graphics.allocateGraphicsEngineBlockId(),v=this._group.reset(Ni,!0,m),x=v.nextAndReset(),b=Ri(f,i),w=Ri(y,i);return x.end.shape="circle",x.end.pieceId=_i,x.end.x1=o,x.end.y1=a,x.end.x2=o,x.end.y2=a,x.end.rectWidthOrSourceRadiusScaled=c?p:0,x.end.rectHeightOrTargetRadiusScaled=c?p:0,x.end.rectWidthOrSourceRadiusFixed=c?0:p,x.end.rectHeightOrTargetRadiusFixed=c?0:p,x.end.strokeWidthFixed=h,x.end.strokeColor=w,x.start.shape="circle",x.start.pieceId=_i,x.start.x1=o,x.start.y1=a,x.start.x2=o,x.start.y2=a,x.start.rectWidthOrSourceRadiusScaled=c?g:0,x.start.rectHeightOrTargetRadiusScaled=c?g:0,x.start.rectWidthOrSourceRadiusFixed=c?0:g,x.start.rectHeightOrTargetRadiusFixed=c?0:g,x.start.strokeWidthFixed=h,x.start.strokeColor=b,x.animation.duration=n,x.animation.beginTime=t,this._engine.storeGroup(_,v),_}_createEdgePulseBlock(e,t,n){const r=this._edgeFlexArrays,i=this._nodeFlexArrays,s=r.pulse.startRatio.get(e),o=r.pulse.endRatio.get(e),a=r.pulse.startColor.get(e),l=r.pulse.endColor.get(e),c=Yd(r.layer.get(e)).edgeBody,d=this._edgeSourceList.get(e),u=this._edgeTargetList.get(e),h=r.curvature.get(e),g=h!==0,p=this._modules.graphics.allocateGraphicsEngineBlockId(),m=this._group.reset(g?fp:Ni,!0,c),f=m.nextAndReset(),y={isSelfLoop:d===u,curvature:h,sourceX:i.x.get(d),sourceY:i.y.get(d),targetX:i.x.get(u),targetY:i.y.get(u),sourceRadius:i.radius.get(d),targetRadius:i.radius.get(u),isSourceRadiusScaled:i.scalingMethod.get(d)==="scaled",isTargetRadiusScaled:i.scalingMethod.get(u)==="scaled",width:r.width.get(e),isWidthScaled:r.scalingMethod.get(e)==="scaled",strokeWidth:r.pulse.width.get(e)};return ZA(f.start,y),ZA(f.end,y),f.start.strokeColor=a,f.end.strokeColor=l,f.start.thicknessOrFontSizeScaled*=s,f.start.thicknessOrFontSizeFixed*=s,f.end.thicknessOrFontSizeScaled*=o,f.end.thicknessOrFontSizeFixed*=o,f.animation.duration=n,f.animation.beginTime=t,this._engine.storeGroup(p,m),p}pulse(e,t){const n=e.isNode,r=be(be(be({},n?iX:sX),n?this._nodePulseTheme:this._edgePulseTheme),t),i=r.number,s=r.interval,o=r.duration,a=n?this._nodeNbPulsesRemaining:this._edgeNbPulsesRemaining,l=(i-1)*s+o;let c;r.enabled=!0,delete r.number,e.setAttributes({pulse:r}),a.setMultiple(e._indexes,i),this._modules.dom.setTimeout(()=>{e.isList?e.filter(Mi).setAttribute("pulse.enabled",!1):e.setAttribute("pulse.enabled",!1),a.setMultiple(e._indexes,-1)},l);const d=new Promise(h=>{c=()=>h(e)}),u=e.isNode?this._nodePromiseMap:this._edgePromiseMap;return e.isList?e._indexes.forEach(h=>{this._setPromise(h,u,d,c)}):this._setPromise(e._index,u,d,c),d}_setPromise(e,t,n,r){t.has(e)&&t.get(e).resolve(),t.set(e,{promise:n,resolve:r})}setTheme(e,t){this._nodePulseTheme=e,this._edgePulseTheme=t}};function ZA(e,{sourceX:t,sourceY:n,targetX:r,targetY:i,isSourceRadiusScaled:s,isTargetRadiusScaled:o,targetRadius:a,sourceRadius:l,isWidthScaled:c,width:d,strokeWidth:u,curvature:h,isSelfLoop:g}){e.pieceId=Cm,e.shape="line",e.x1=t,e.y1=n,e.x2=r,e.y2=i,e.rectWidthOrSourceRadiusScaled=s?l:0,e.rectWidthOrSourceRadiusFixed=s?0:l,e.rectHeightOrTargetRadiusScaled=o?a:0,e.rectHeightOrTargetRadiusFixed=o?0:a,e.thicknessOrFontSizeScaled=c?d:0,e.thicknessOrFontSizeFixed=c?0:d,e.strokeWidthFixed=u,e.curvature=h,e.isSelfLoop=g}var aX={duration:0,easing:"linear",callback:wt,resolve:wt,startAfter:0},lX=0,cX=class extends ct{constructor(){super(...arguments),this._animationList=[],this._update=()=>{if(this._animationList.length===0)return;const e=ir(),t=[];for(let n=0;n<this._animationList.length;++n){const r=this._animationList[n],i=(e-r.creationDate)/r.duration,s=r.startAfter;let o=r.easing(i);i>=1?(r.func(1),r.done=!0,r.resolve(void 0),this._animationList.splice(n,1),n-=1,t.push(r.callback)):o>=s&&(o=(o-s)*(1/(1-s)),r.func(o))}for(let n=0;n<t.length;n++)t[n](!1);this._modules.dom.refresh()}}onMounted(){this._modules.events.on("beforeNewFrame",this._update)}play(e,t){const{duration:n,easing:r,callback:i,startAfter:s,resolve:o}=Kr(t,aX);if(n<=0)return e(1),i(),o(void 0),null;const a={func:e,easing:typeof r=="function"?r:db[r],duration:n,callback:i,resolve:o,startAfter:s,creationDate:ir(),done:!1,id:++lX};return this._animationList.push(a),this._modules.dom.refresh(),a}cancel(e){const t=this._animationList.indexOf(e);t!==-1&&(e.func(1),this._animationList.splice(t,1),e.done=!0,e.resolve(void 0))}},dX=(e,t,n,r)=>{const i=n._getMapPanePos(),s=e.getMapboxMap(),o=e.getCanvas(),a=e.getSize().round(),l=r.DomUtil.getPosition(e.getContainer()),c=l.x+i.x,d=l.y+i.y;return new Promise(u=>{function h(){t.drawImage(o,c,d,a.x,a.y),u()}if(s.loaded())return h();s.once("idle",h)})},uX=(e,t,n,r,i)=>{const s=n._getMapPanePos(),o=e.getContainer();if(!o)throw new Error(`Trying to access the container of ${e} but it does not exist.`);const a=r.DomUtil.getPosition(o);n.removeLayer(e),e.options.crossOrigin="anonymous";const l=[],c=[];return e.on("tileload",({tile:d})=>{const{x:u,y:h}=r.DomUtil.getPosition(d);l.push(d),c.push({x:u-a.x+s.x,y:h-a.y+s.y})}),n.addLayer(e),new Promise(d=>{e.once("load",()=>{const u=e.getTileSize();l.forEach((h,g)=>{const{x:p,y:m}=c[g];t.drawImage(h,p,m,u.x,u.y)}),d()})})},hX=(e,t,n,r,i,s)=>new Promise(o=>{const a=e.options.renderer;n.removeLayer(e),e.options.renderer=s,n.addLayer(e),s._updatePaths();const l=n._getMapPanePos(),c=s._container,d=r.DomUtil.getPosition(c);t.drawImage(s._container,d.x+l.x,d.y+l.y,c.width/i,c.height/i),n.removeLayer(e),e.options.renderer=a,n.addLayer(e),o()}),gX=(e,t,n,r,i)=>new Promise(s=>{const o=n.getPixelBounds().min,a=n.project(e.getLatLng(),n.getZoom()),l=/^data:/.test(e._icon.src),c=l?e._icon.src:UF(e._icon.src),d=new Image,u=e.options.icon;if(u){const h=u.options;let g=h.iconSize||[24,24];const p=a.subtract(o);let m=h.iconAnchor||[0,0];Array.isArray(g)||(g=[g.x,g.y]),Array.isArray(m)||(m=[m.x,m.y]);const f=Math.round(p.x-(g[0]-m[0])*i),y=Math.round(p.y-m[1]*i);d.crossOrigin="";const _=()=>{t.drawImage(d,f,y,g[0]*i,g[1]*i),s()};d.onload=_,d.src=c,l&&_()}}),pX=(e,t,n,r,i)=>new Promise(s=>{n.removeLayer(e),e.setUrl(UF(e.getUrl())),e.options.crossOrigin="anonymous",e.once("load",()=>{const o=e.getBounds(),a=n.latLngToContainerPoint(o.getNorthWest()),l=n.latLngToContainerPoint(o.getSouthEast()),c=l.x-a.x,d=l.y-a.y;t.drawImage(e._image,a.x,a.y,c,d),s()}),n.addLayer(e)});function UF(e){return e+(e.indexOf("?")===-1?"?":"&")+"noCache="+Date.now()}var mX={tileLayers:uX,imageOverlays:pX,vectorLayers:hX,markers:gX,vectorMap:dX};function fX(e,t){return e instanceof t.TileLayer?"tileLayers":e instanceof t.ImageOverlay?"imageOverlays":e instanceof t.Path?"vectorLayers":e instanceof t.Marker?"markers":"MapboxGL"in t&&e instanceof t.MapboxGL?"vectorMap":void 0}function _X(e,t,n,r,i,s){const o={vectorMap:[],tileLayers:[],vectorLayers:[],imageOverlays:[],markers:[]};return t.eachLayer(a=>{if(a!==e){const l=fX(a,r);if(l&&l in o){const c=mX[l];o[l].push(()=>c(a,n,t,r,i,s))}}}),o}function yX(e){e.TileLayer.prototype.getUrl=function(){return this._url},e.ImageOverlay.prototype.getUrl=function(){return this._url};const t="leaflet-zoom-animated";e.OgmaOverlay||(e.OgmaOverlay=e.Layer.extend({options:{pane:"overlayPane",padding:0,onUpdate:()=>{}},initialize:function(n){const{container:r}=n;e.Util.setOptions(this,n),this._container=r},setLocked:function(n){return this._locked=n,this},onAdd:function(n){this._map=n,this.getPane().appendChild(this._container),this._wgsOrigin=e.latLng([0,0]),this._wgsInitialShift=n.project(this._wgsOrigin,this._initialZoom),e.DomUtil.addClass(this._container,"leaflet-layer"),this._zoomAnimated&&(e.DomUtil.addClass(this._container,t),this._container.style.position="absolute",this._container.style.zIndex=9999),this._initialZoom=(this._map.getMaxZoom()+this._map.getMinZoom())/2,this._mapInitialZoom=this._map.getZoom(),this._updateBounds(),this._update({})},_updateBounds(){const n=this.options.padding,r=this._map.getSize(),i=this._map.containerPointToLayerPoint(r.multiplyBy(-n));this._bounds=new e.Bounds(i,i.add(r.multiplyBy(1+2*n))),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()},_update(n){this._updateBounds(),this._redraw(this._bounds.min,n),this._positionTimer=e.Util.requestAnimFrame(()=>{this._container&&e.DomUtil.setPosition(this._container,this._bounds.min)})},_redraw(n,r){this.options.onUpdate()},_updateTransform(n,r){if(this._locked)return;const i=this._map.getZoomScale(r,this._zoom),s=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,r),a=s.multiplyBy(-i).add(o).subtract(this._map._getNewPixelOrigin(n,r));e.Browser.any3d?e.DomUtil.setTransform(this._container,a,i):e.DomUtil.setPosition(this._container,a)},_onZoom(n){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_onMoveEnd(n){this._update(n)},_onAnimZoom({center:n,zoom:r}){this._updateTransform(n,r)},bringToFront(){e.DomUtil.toFront(this._container)},getEvents(){return{zoom:this._onZoom,moveend:this._onMoveEnd,zoomanim:this._onAnimZoom,layeradd:this.bringToFront,zoomend:this.options.onUpdate}},onRemove:function(){e.DomUtil.removeClass(this._container,t);const n=this._container;["transform","webkitTransform","OTransform","MozTransform","msTransform","zIndex","position"].forEach(r=>n.style[r]=null),e.Util.cancelAnimFrame(this._positionTimer),this._container=null}}))}function vX(e,t,n,r){const i=e.filter(w=>w.isVisible()),s=i.size===0,{mapX:o,mapY:a}=i.reduce((w,S)=>{const{latitude:A,longitude:C}=S.getGeoCoordinates(),{x:k,y:T}=r(A,C);return w.mapX.push(k),w.mapY.push(T),w},{mapX:[],mapY:[]}),l=i.getAttribute("x"),c=i.getAttribute("y"),d=i.getAttribute("radius").map(Number),u=new vr({xValues:l,yValues:c,scaledSizeValues:d}),h=new vr({xValues:o,yValues:a});s&&(u.cx=u.cy=0,u.width=u.height=0),isFinite(h.width)&&isFinite(h.height)||(h.cx=h.cy=0,h.width=h.height=0);let g=h.cx-u.cx,p=h.cy-u.cy;const m=s?1:Math.max(h.width,h.height)/Math.max(u.width,u.height),[f,y]=d.reduce((w,S)=>(w[0]=Math.min(w[0],S*m),w[1]=Math.max(w[1],S*m),w),[1/0,0]);h.pad(y),h.minScaledSize=f,h.maxScaledSize=y;const _=n.computeConfigForBounds(h),v=t.zoom/vj(_.zoom);g+=(u.cx-t.x)*v,p+=(u.cy-t.y)*v;const x=u.cx+g,b=u.cy+p;return{offsetChanges:{name:"graph-to-geo",nodeAttributes:{radius:w=>Number(w.getAttribute("radius"))*v,x:w=>(w.getAttribute("x")+g-x)*v+x,y:w=>(w.getAttribute("y")+p-b)*v+b},edgeAttributes:{width:w=>Number(w.getAttribute("width"))*v}},camera:be({zoom:t.zoom/v,x:(t.x+g-x)*v+x,y:(t.y+p-b)*v+b,angle:0},t.getSize())}}function xX(e,t,n,r){const i=e.getAttributes(["x","y","radius"]),s=e.getBoundingBox(),o=e.size===0,a=e.reduce((x,{_index:b},w)=>(x[b]=w,x),{});r();const l=e.getAttribute("x"),c=e.getAttribute("y"),d=e.getAttribute("radius"),u=new vr({xValues:l,yValues:c,scaledSizeValues:d.map(x=>2*x)});o&&(s.reset(),u.reset());let h=u.cx-s.cx,g=u.cy-s.cy,p=0,m=0;const f=n.computeConfigForBounds(u),y=t.zoom/f.zoom;let _,v;return isNaN(s.cx)||isNaN(s.cy)?(s.cx=t.x,s.cy=t.y,_=f.x,v=f.y):(h+=(s.cx-t.x)*y,g+=(s.cy-t.y)*y,p=s.cx+h,m=s.cy+g,_=(t.x+h-p)*y+p,v=(t.y+g-m)*y+m),{offsetChanges:{name:"geo-to-graph",nodeAttributes:{x:x=>(i[a[x._index]].x+h-p)*y+p,y:x=>(i[a[x._index]].y+g-m)*y+m}},camera:be({zoom:f.zoom,x:_,y:v,angle:0},t.getSize())}}var $F={"top-left":"left","bottom-left":"left","top-right":"right","bottom-right":"right"},bX={"top-left":"top","bottom-left":"bottom","top-right":"top","bottom-right":"bottom"},JA={position:"bottom-right",horizontalMargin:0,verticalMargin:0,className:void 0},wX=class extends ct{onMounted(){this._brand=null}set(e,t){let{position:n,horizontalMargin:r,verticalMargin:i,className:s}=be(be({},JA),t);$F[n]||(n=JA.position),this.remove();const o=document.createElement("div");return o.innerHTML=e,o.style.position="absolute",GF(o,n,r,i),o.style.padding="0px 0px 0px 0px",o.style.zIndex="10",s&&o.setAttribute("class",s),this._brand=o,this._modules.dom.setLayer("brand",this._brand),o}remove(){this._modules.dom.setLayer("brand",null),this._brand=null}};function GF(e,t,n,r){const i=n===void 0?"":n+"px",s=r===void 0?"":r+"px";e.style[$F[t]]=i,e.style[bX[t]]=s}var QA={},EX=class extends ct{constructor(){super(...arguments),this._enabled=!1,this._settings=be({},Wo),this._edgesOriginalTextStyle={},this._nodesOriginalTextStyle={},this._nodeDraggingSetting=!1,this._transition=!1,this._attribution=null,this._updating=!1,this._updateRate=50,this._x=0,this._y=0,this._onCameraUpdate=e=>{if(this.L&&this._enabled&&this._map&&this._map._loaded){const t=this._x-this._modules.camera.x,n=this._y-this._modules.camera.y;(t||n)&&this._syncMapWithCamera()}},this._syncMapWithCamera=()=>{if(!this._map)return;this._updating||(this._updating=!0,this._layer.setLocked(!0),this._map._moveStart(!0,!1));const e=this._fromPointToLatLng(this._modules.camera.x,this._modules.camera.y),t=$f(this._modules.camera.zoom),n=this.L.latLng(e.latitude,e.longitude);this._map._move(n,t,{pinch:!0,round:!1}),clearTimeout(this._updateRequest),this._updateRequest=this._modules.dom.setTimeout(()=>{this._updating=!1,this._layer.setLocked(!1),this._map&&this._map._move(n,t,{pinch:!0})._moveEnd(!0)},this._updateRate)},this._onNodesDragStart=()=>{this._enabled&&(this._setMapDragging(!1),this._nodeDragOffsetX=this._nodeDragOffsetY=0)},this._onNodesDragged=({nodes:e,dx:t,dy:n})=>{if(this._enabled){const r=e.map(i=>{const{x:s,y:o}=i.getAttributes(["x","y"]);return this._fromPointToLatLng(s+t-this._nodeDragOffsetX,o+n-this._nodeDragOffsetY)});return this._nodeDragOffsetX=t,this._nodeDragOffsetY=n,e.setGeoCoordinates(r)}return Promise.resolve(this._modules.graph.nodeList())},this._onMapUpdate=()=>{if(!this._map)return Promise.resolve(void 0);const{lat:e,lng:t}=this._map.getCenter(),n=this._fromLatLngToPoint(e,t);this._x=n.x,this._y=n.y;const r=yj(this._map.getZoom());return this._modules.events.fire("beforeGeoCameraMove",{zoom:this._map.getZoom()}),this._modules.camera.setView({zoom:r,x:n.x,y:n.y},{ignoreZoomLimits:!0}).then(()=>this._adjustMinvisibleSizes())},this.runLayout=e=>fa(this,[e],function*({type:t,nodes:n,latitudePath:r=Yi,longitudePath:i=qi,options:s,center:o}){const a=Rj(o),l=a([o.longitude,o.latitude]),c=n.getPosition(),d=[];return n.setAttributes(n.map(u=>{const h=u.getData(r),g=u.getData(i);if(isNaN(h)||isNaN(g))return{x:l[0],y:l[1]};const p=a([g,h]);return{x:p[0],y:p[1]}})).then(()=>this._ogma.layouts[t](yt(be({},s),{nodes:n,dryRun:!0}))).then(u=>{const h=u.positions.current,g=new Array(h.length),p=new Array(h.length);return h.forEach((m,f)=>{const y=a.invert([m.x,m.y]);g[f]=y[1],p[f]=y[0],d.push({latitude:y[1],longitude:y[0]})}),n.setData(r,g),n.setData(i,p),n.setAttributes(c)}).then(()=>this._ogma.modules.geo._updateNodesCoordinates(n)).then(()=>d)})}onMounted(){this._modules.events.register(["geoEnabled","beforeGeoDisabled","geoDisabled","geoNodesMoved","geoLoaded","geoReady"]),RS()&&(this.L=mi("L")||mi("leaflet"),this.L&&yX(this.L)),this._modules.graph.createNodeAttribute({name:"geo.prevLat",storage:"float"},!0),this._modules.graph.createNodeAttribute({name:Bf,storage:"float"},!0),this._modules.graph.createNodeAttribute({name:Yi,storage:"float"},!0),this._modules.graph.createNodeAttribute({name:qi,storage:"float"},!0),this._modules.events.register(["beforeGeoCameraMove"]),this._modules.events.on("addNodes",e=>{e.virtual||this._refreshOrAddNodes(e.nodes,!0)}).on("updateNodeData",e=>{this._onDataChange(e.changes)}).on("nodesDragProgress",this._onNodesDragged).on(["nodesDragStart","lassoEnabled"],this._onNodesDragStart).on(["nodesDragEnd","lassoDisabled"],()=>this._setMapDragging(!0)).on("viewChanged",this._onCameraUpdate)}_onDataChange(e){const t=$_(this.latitudePath),n=$_(this.longitudePath),r=e.filter(({virtual:s,property:o,newValues:a})=>!(s||!a.length)&&(o&&typeof o!="string"?o.find(l=>t.startsWith(l)||n.startsWith(l)):o===null||t.startsWith(o)||n.startsWith(o)));if(!r.length)return;const i=Ij(r);i&&(this._modules.events.fire("geoNodesMoved",{nodes:i}),this._refreshOrAddNodes(i,!1))}_refreshOrAddNodes(e,t){t&&this._updatePrevNodesCoordinates(e),this._updateNodesCoordinates(e),this._enabled&&(this._cacheOriginalTextStyles(e,null),this._filter.refresh())}_updatePrevNodesCoordinates(e){th(this._modules.graph,e,Yi,yS),th(this._modules.graph,e,qi,Bf)}_restorePrevNodesCoordinates(e){th(this._modules.graph,e,yS,Yi),th(this._modules.graph,e,Bf,qi)}_updateNodesCoordinates(e){Tj(this._modules.graph,e,this._settings)}_createMapTileLayer(e,t){if(e&&!Sn(e))return e;const n=e,r=n.wms?this.L.tileLayer.wms:this.L.tileLayer,i=xj(n,t)||"";return r(n.url,be({attribution:i},e))}_setupTileLayer(e,t,n){const r=this._createMapTileLayer(e,t);return r.once("load",()=>{this._modules.events.fire("geoLoaded")}),r.addTo(this._map),FS(r,n),r}_onSettingsChanged(e,t){const n=e.wrapCoordinates!==t.wrapCoordinates,r=e.latitudePath!==t.latitudePath||e.longitudePath!==t.longitudePath;if(n||r){let i=Promise.resolve();this._enabled&&this._filter&&(i=i.then(()=>this._filter.refresh())),i.then(()=>this._updateNodesCoordinates(this._modules.graph.getNodes("all")))}this._enabled&&(Ej(e,t)&&this._map&&(this._map.removeLayer(this._tileLayer),this._tileLayer=this._setupTileLayer(t.tiles,t.attribution,t.opacity)),e.sizeRatio!==t.sizeRatio&&this._updateSizes(),e.maxZoomLevel!==t.maxZoomLevel&&this._modules.settings.update({minZoom:1,maxZoom:Math.pow(2,t.maxZoomLevel)}),e.disableNodeDragging!==t.disableNodeDragging&&this._setDragging(!t.disableNodeDragging),e.attributionOptions!==t.attributionOptions&&this._setAttributionOptions(t.attributionOptions,t.attribution),FS(this._tileLayer,t.opacity))}_setMapDragging(e){if(this._map){const t=e?"enable":"disable";this._map.dragging[t]()}}_fromLatLngToPoint(e,t){return this._map.options.crs.latLngToPoint(this.L.latLng(e,t),sp)}_fromPointToLatLng(e,t){const{lat:n,lng:r}=this._map.options.crs.pointToLatLng(this.L.point({x:e,y:t}),sp);return{latitude:n,longitude:r}}_updateSizes(){this._enabled&&this._projection&&this._projection.updateAll()}enable(e){return this.setEnabled(!0,e)}getMap(){return this._enabled?this._map:null}getOptions(){return this._enabled?yt(be({},this._settings),{tiles:Sn(this._settings.tiles)?be({},this._settings.tiles):this._settings.tiles}):be({},Wo)}setOptions(e){if(!this._enabled||this._transition)return;bj(e,this.L);const t=this._settings;this._settings=yt(be(be(be({},Wo),t),e),{tiles:wj(Wo,e)}),this._onSettingsChanged(t,this._settings)}disable(e){return this.setEnabled(!1,e)}isEnabled(){return this._enabled}toggle(e={}){return this.setEnabled(!this._enabled,e)}getContainerCoords(e){return e.getGeoCoordinates().map(({latitude:t,longitude:n})=>this._map.latLngToContainerPoint([t,n]))}getContainerCoord(e){const{latitude:t,longitude:n}=e.getGeoCoordinates();return this._map.latLngToContainerPoint([t||0,n||0])}setEnabled(e,t){if(!RS())throw new Error("Ogma Geo cannot be used outside a browser");if(!this.L)throw new Error("You are trying to use Geo mode but Leaflet has not been found. Please follow our migration guide: https://bit.ly/2SYkF8A");if(this._transition||e===this._enabled)return Promise.resolve();const n=this._modules.settings;this._enabled||(this._prevSettings=n.get(),this._nodeDraggingSetting=!!n.get("interactions.drag.enabled")),this._enabled=e,this.setOptions(t),this._transition=!0;const r=this._settings;return e?this._show().then(()=>(this._registerTextStyle(this._modules.graph.getNodes(),this._modules.graph.getEdges()),this._setDragging(!r.disableNodeDragging),this._transition=!1,this._updating=!1,this._modules.events.fire("geoEnabled").fire("geoReady"),this._adjustMinvisibleSizes())):this._restoreTextStyle().then(()=>this._hide()).then(()=>{this._transition=!1,this._modules.events.fire("geoDisabled"),this._setDragging(this._nodeDraggingSetting,!0)}).then(()=>this._ogma.view.afterNextFrame())}destroy(){return this._enabled&&this._destroyMapSync(),Promise.resolve()}_cacheOriginalTextStyles(e,t){t&&(this._edgesOriginalTextStyle=zS(t,this._edgesOriginalTextStyle)),e&&(this._nodesOriginalTextStyle=Pj(e,this._nodesOriginalTextStyle))}_registerTextStyle(e,t){this._cacheOriginalTextStyles(e,t);const{nodeAttributes:n,edgeAttributes:r}=this._modules.hover.getHoverClassDefinition();this._hoverEdgesOriginalTextStyle=r||null,this._hoverNodesOriginalTextStyle=n||null,this._modules.hover.updateEdgeAttributes({text:{size:i=>(this._edgesOriginalTextStyle[i.getId()]||QA)["text.size"]}}),this._modules.hover.updateNodeAttributes({text:{size:i=>(this._nodesOriginalTextStyle[i.getId()]||QA)["text.size"]}})}_restoreTextStyle(){return this._modules.hover.updateEdgeAttributes(this._hoverEdgesOriginalTextStyle,!0),this._modules.hover.updateNodeAttributes(this._hoverNodesOriginalTextStyle,!0),Promise.all([Fj(this._modules.graph.getEdges(),this._edgesOriginalTextStyle)]).then(()=>(this._edgesOriginalTextStyle=zS(this._modules.graph.edgeList(),{}),this._nodesOriginalTextStyle={},this._edgesOriginalTextStyle={},Promise.resolve()))}_setDragging(e,t=!1){this._modules.settings.update({interactions:{drag:{enabled:e,applyResult:t}}})}_setAttributionOptions(e,t){if(this._map){if(this._attribution&&(this._attribution.remove(),this._attribution=null),this._attribution=this.L.control.attribution({prefix:!1}).addTo(this._map),Sn(e)){this._attribution.setPrefix(""),e.position=e.position||"bottom-right";const n=e.position.replace("-","");this._attribution.setPosition(n);const r=this._attribution.getContainer();r&&(e.className&&this.L.DomUtil.addClass(r,e.className),GF(r,e.position||"bottom-right",e.horizontalMargin,e.verticalMargin))}t!=null&&this._attribution.addAttribution(t)}}_nodeIsVisible(e){return Nj(e,this._settings,this._hasCustomProjection())}_updateSettingsForMap(){const e=this._modules.graphics.getGraphicsEngine().parseColor(this._settings.backgroundColor);e[3]=0,this._modules.settings.update({backgroundColor:XI(e),minZoom:1e-6,interactions:{rotation:{enabled:!1},drag:{enabled:!1},pan:{enabled:!1},zoom:{enabled:!1,onDoubleClick:!1}},mouse:{wheelEnabled:!1}})}getGraphPosition(e){const t=this.L.latLngBounds(kj(e));return{center:e.size>0?t.getCenter():this.L.latLng([0,0]),zoom:this._clampZoom(this._map.getBoundsZoom(t))}}_initMap(){this._updateSettingsForMap(),this._mapContainer=Aj(this._modules.dom.getContainer());const e=yt(be({},O4),{minZoom:this._settings.minZoomLevel,maxZoom:this._settings.maxZoomLevel});this._hasCustomProjection()&&(e.crs=this._settings.crs,e.worldCopyJump=!1,e.maxBoundsViscosity=0),this._map=new this.L.Map(this._mapContainer,e),this._map.on("movestart zoomstart",()=>{this._updating=!0}).on("moveend zoomend",()=>{this._updating=!1}),this._setAttributionOptions(this._settings.attributionOptions,this._settings.attribution),this._setupLayers()}_clampZoom(e){let t=this._tileLayer.options.maxZoom;return t===void 0&&(t=1/0),Math.min(e,t)}_show(){let e;return this._initMap(),this._filter?e=this.filter.enable(0):(this._filter=this._modules.transformations.api.addNodeFilter({criteria:t=>this._nodeIsVisible(t)}),this._filter.setIndex(0),e=this._filter.whenApplied()),e.then(()=>{const t=this._map,n=this._modules.graph.getNodes(),r=this._modules.graph.getEdges(),{center:i,zoom:s}=this.getGraphPosition(n),{offset:o,newCameraView:a}=this._transformToGeo();return this._modules.camera.setView(a,{ignoreZoomLimits:!0}).then(()=>(this._updatePrevNodesCoordinates(n),t.setView(i,s,{animate:!1}),this._modules.graphics.animate({nodes:n,edges:r},()=>{this._projection=this._createFinalPositionLayer()},!0,this._settings.duration))).then(()=>o.destroy())})}updateProjection(){var e;(e=this._projection)==null||e.update()}_hasCustomProjection(){return this._settings.crs!=null}_setupLayers(){this._settings.tiles&&(this._tileLayer=this._setupTileLayer(this._settings.tiles,this._settings.attribution,this._settings.opacity)),this._layer=new this.L.OgmaOverlay({container:this._modules.graphics.getDomElement(),mapContainer:this._mapContainer,onUpdate:()=>this._onMapUpdate()}),this._layer.addTo(this._map)}_adjustMinvisibleSizes(){return Promise.all([Mj(this._modules.graph.getEdges(),this._edgesOriginalTextStyle,this._map.getZoom())])}_hide(){if(!this._map)return Promise.resolve();this._modules.settings.update(this._prevSettings);const e=this._map;e.removeLayer(this._layer);const t=this._modules.dom.getContainer(),n=this._modules.graphics.getDomElement();t&&t.appendChild(n),e.getContainer().style.zIndex="0";const r=this._modules.graph.getNodes("all"),i=this._modules.graph.getEdges("all"),{offset:s,newCameraView:o}=this._transformToGraph();return this._modules.camera.setView(o||{}).then(()=>(this._modules.events.fire("beforeGeoDisabled"),Promise.all([nI(e.getContainer(),1,0,this._settings.duration/2).then(()=>this._destroyMapSync()),this._modules.graphics.animate({nodes:r,edges:i},()=>s&&s.destroy(),!0,this._settings.duration)]))).then(()=>(this._map=null,this._filter.disable(0).then(()=>{})))}_destroyMapSync(){if(this._map){this._layer&&this._layer._map&&this._map.removeLayer(this._layer),this._map.remove(),this._map._animatingZoom=!1,this._map=null;const e=this._mapContainer.parentNode;e&&e.removeChild(this._mapContainer)}}_transformToGeo(){const e=this._modules.graph.getNodes(),{offsetChanges:t,camera:n}=vX(e,this._modules.camera,this._modules.locate,(r,i)=>this._fromLatLngToPoint(r,i));return{offset:this._addGraphAttributesLayer(t),newCameraView:n}}_addGraphAttributesLayer(e){return this._modules.graphics.addAttributeLayer(be({priority:Qj,nodeSelector:t=>t.isVisible(),edgeSelector:t=>t.isVisible()},e))}_transformToGraph(){const e=this._modules.graph.getNodes("all"),{offsetChanges:t,camera:n}=xX(e,this._modules.camera,this._modules.locate,()=>{this._projection&&(this._projection.destroy(),this._projection=null)});return{offset:this._addGraphAttributesLayer(t),newCameraView:n}}getPointFromLatLng(e){const{latitude:t,longitude:n}=e.getGeoCoordinates();return t==null?e.getAttributes(["x","y"]):this._fromLatLngToPoint(t,n)}_createFinalPositionLayer(){return this._addGraphAttributesLayer({name:"graph-2-geo-animation",nodeAttributes:{scalingMethod:"fixed",radius:e=>Number(e.getAttribute("radius"))*this._settings.sizeRatio,x:e=>this.getPointFromLatLng(e).x,y:e=>this.getPointFromLatLng(e).y},edgeAttributes:{scalingMethod:"fixed",width:e=>Number(e.getAttribute("width"))*this._settings.sizeRatio}})}setCenter(e,t){return this._enabled?this.setView(e,t,$f(this._modules.camera.getZoom())):Promise.resolve()}setZoom(e){return this._enabled&&this._map?(e=this._clampZoom(e),this._map.setZoom(e),new Promise(t=>{const n=this._map;if(n.getZoom()===e)return t(void 0);n.once("moveend zoomend",t)}).then(this._onMapUpdate)):Promise.resolve()}zoomIn(){return this.setZoom(this.getZoom()+1)}zoomOut(){return this.setZoom(this.getZoom()-1)}setView(e,t,n){if(!this._enabled||!this._map)return Promise.resolve();const r=this._map;n=this._clampZoom(n);const i=this.L.latLng([e,t]);return r.setView(i,n,{animate:!1,reset:!0}),new Promise(s=>{if(r.getZoom()===n&&r.getCenter().equals(i))return s(void 0);r.once("moveend zoomend",s)}).then(this._onMapUpdate)}getView(){if(!this._enabled||!this._map)return;const e=this._map.getCenter();return{zoom:this._map.getZoom(),latitude:e.lat,longitude:e.lng}}getCenter(){if(!this._enabled||!this._map)return;const e=this._map.getCenter();return{latitude:e.lat,longitude:e.lng}}getZoom(){if(this._enabled&&this._map)return this._map.getZoom()}resetCoordinates(){if(!this._enabled||!this._projection)return;const e=this._modules.graph.getNodes();this._restorePrevNodesCoordinates(this._modules.graph.getNodes());const t=this._modules.graph.getNodeAttribute(Yi).getMultiple(e._indexes),n=this._modules.graph.getNodeAttribute(qi).getMultiple(e._indexes);e.setData(this._settings.latitudePath,t),e.setData(this._settings.longitudePath,n),this._projection.update()}getUnprojectedCoordinates(e){this._projection&&this._projection.destroy();const t=e.getPosition();return this._projection=this._createFinalPositionLayer(),t}get latitudePath(){return this._settings.latitudePath}get longitudePath(){return this._settings.longitudePath}get filter(){return this._filter}exportBackground(e){if(!this._map)return Promise.reject("Map is not ready");const{pixelRatio:t,width:n,height:r,zoom:i,x:s,y:o}=e,a=n*t,l=r*t,c=Wn(a,l),d=c.getContext("2d"),u=this._map;if(!d)throw new Error(`Unable to get 2d context from  ${c}`);const h=this.getView(),g=be({zoom:Math.round($f(i*t))},this._fromPointToLatLng(s,o)),p=new this.L.Canvas;u.addLayer(p);const{vectorMap:m,tileLayers:f,vectorLayers:y,imageOverlays:_,markers:v}=_X(this._layer,u,d,this.L,t,p),x=u.options.zoomSnap;return Promise.resolve().then(()=>(ba(this._mapContainer,a+"px",l+"px"),u.invalidateSize({animate:!1}),this.setView(g.latitude,g.longitude,g.zoom))).then(()=>ML([...m,...f,..._,...y,...v])).then(()=>{ba(this._mapContainer,"100%","100%"),u.invalidateSize({animate:!1}),u.options.zoomSnap=x,this.setView(h.latitude,h.longitude,h.zoom)}).then(()=>new Promise(b=>this.L.Util.requestAnimFrame(b))).then(()=>u.removeLayer(p)).then(()=>c)}},SX=class extends ct{constructor(){super(...arguments),this._context={edgesAlwaysCurvy:!1,directedEdges:!1}}onMounted(){this._attributeLayer=this._addAttributeLayer(),this._modules.settings.register("edgesAlwaysCurvy",!1,e=>{this._context.edgesAlwaysCurvy=e,this._attributeLayer.updateAll()}),this._modules.settings.register("directedEdges",!1,e=>{this._context.directedEdges=e,this._attributeLayer.updateAll()})}computeCurvature(e,t="visible",n){const{edgesAlwaysCurvy:r,directedEdges:i}=this._context,s=e.getSource()===e.getTarget();if(!r&&e.hasParallelEdges()===!1&&!s)return 0;let o=e.getParallelEdges({filter:t});n&&(o=o.filter(c=>n(c)));const a=o.indexOf(e);if(a===-1)return 0;let l;if(s)l=(a+1)*Math.max(+e.getAttribute("width")||0,1);else{const c=e.getSource(),d=o.size;if(d===1&&!r)return 0;if(i){let u=0;for(let h=0;h<a;++h)o.get(h).getSource()===c&&(u+=1);l=u+1}else{const u=c!==o.get(0).getSource();l=d%2!=1||r?(1+(a/2|0))*(a%2==0?1:-1)*(u?-1:1):a===0?0:((a+1)/2|0)*(a%2==0?1:-1)*(u?-1:1)}}return l}_addAttributeLayer(){return this._modules.graphics.addAttributeLayer({name:"curvature",priority:Yj,edgeDependencies:{parallelEdges:!0},edgeContext:this._context,edgeAttributes:{curvature:e=>this.computeCurvature(e)}})}},VF="worker_start",HF="worker_configure",kb="worker_update",wa="worker_stop",WF=class extends xu{constructor(e,t){super(),this._complete=!1,this._destroyed=!1,this._data=null,this._onStart=wt,this._onStop=wt,this._setIdle=wt,this._onPause=wt,this.timer={start:0,steps:0},this._modules=t,this.configure(e)}configure({configure:e=Mi,update:t=wt,context:n=wt,stop:r=wt,isRunning:i=Qg,onStart:s=wt,onStop:o=wt,onPause:a=wt,setIdle:l=wt}){this._configure=e,this._update=t,this._createContext=n,this._isRunning=i,this._stop=r,this._onStart=s,this._onStop=o,this._setIdle=l,this._onPause=a}setData(e){this._data=e}getData(){return this._data}start(e){this._complete=!1,this._onStart(),this.fire(VF,{target:this});const t=this._configure(e,this._modules);return this.fire(HF,t),this.send(t),this}stop(e){return this._complete||(this._onStop(),this.send({type:wa}),this._complete=!0),this}pause(){this._onPause()}setIdle(e){this._setIdle(e)}isBusy(){return!this._complete}destroy(){this._destroyed||(this._destroyed=!0,this._modules&&(this.stop(),delete this._modules))}},XF=/^function\s*\(/,YF=/^\(|^\w+\s?=>/;function Ph(e){const t=e.toString();return t.indexOf("function")===0||YF.test(t)?t:`function ${t}`}var AX=class extends WF{constructor(e,t){super(e,t);const n=Ph(this._createContext),r=Ph(this._update),i=Ph(this._isRunning),s=Ph(this._stop),o=`
      ${kX(e.imports)}
      const __CONTEXT = (${n})();
      const __UPDATE_FUNC = ${r} ;
      const __IS_RUNNING_FUNC = ${i};
      const __STOP_FN = ${s};
      let result;

      self.addEventListener("message", function (evt) {
        if (evt.data && evt.data.type === '${wa}') {
          __STOP_FN(__CONTEXT);
          return self.postMessage({ result, isRunning: false });
        }
        result = __UPDATE_FUNC(evt.data, __CONTEXT);
        const isRunning = __IS_RUNNING_FUNC(__CONTEXT, evt.data);

        self.postMessage({ result, isRunning });
      });
    `;this._worker=ZP(o),this._worker.addEventListener("message",a=>{t.dom.isDestroyed()||this.onWorkerMessage(a)})}onWorkerMessage(e){const t=e.data.isRunning,n=e.data.result,r={data:void 0};return this.fire(kb,{worker:this,workerMessage:n,modules:this._modules,data:r,isRunning:t}),t?this.send(r.data):(this.fire(wa,{worker:this,result:n,modules:this._modules}),this.stop(n))}destroy(){super.destroy(),this._worker.terminate()}send(e){return this._complete||this._worker.postMessage(qP(e)),this}};function kX(e={}){const t=Object.keys(e),n=[];for(let r=0,i=t.length;r<i;r++){const s=t[r],o=e[s];if(typeof o!="function")throw new Error(`Asynchronous worker: dependency "${s}" is not found`);{const a=CX(o);a?(n.push(KA(o,s)),a!==s&&n.push(`var ${s} = ${a};`)):n.push(`var ${s} = ${KA(o,s)};`)}}return n.join(`
`)}function KA(e,t){const n=e.toString();return XF.test(n)?`function ${e.name||t} ${n.substring(n.indexOf("("))}`:YF.test(n)?`const ${e.name||t} = ${n.toString()}`:n}function CX(e){const t=e.toString();return e.name?e.name:XF.test(t)?null:t.substring(9,t.indexOf("(")).trim()}var TX=class extends WF{constructor(e,t){super(e,t),this._context=this._createContext()}sync(e){if(e&&e.type===wa)return this._stop(this._context);const t=this._update(e,this._context),n=this._isRunning(this._context,e),r={data:void 0};return this.fire(kb,{worker:this,workerMessage:t,modules:this._modules,data:r,isRunning:n}),n?this.send(r.data):(this.fire(wa,{worker:this,result:t,modules:this._modules}),this.stop(t))}send(e){return this._complete||this._modules.dom.setTimeout(()=>this.sync(e),0),this}},NX=class extends ct{constructor(){super(...arguments),this._pool={}}create(e,t){const n=t&&YP,r=this._modules,i=`${e.name||"worker"}-${n?"async":"sync"}`;let s=this._pool[i];s||(s=this._pool[i]=[]);let o=s.find(a=>!a.isBusy());return o?o.configure(e):(o=n?new AX(e,r):new TX(e,r),this._pool[i].push(o)),o.on(wa,()=>{o.clearEvents(),this._pool[i].length<2||(o.destroy(),this._pool[i]=this._pool[i].filter(a=>a!==o))}),o}start(e,t){return e.start(t)}run(e,t,n){const r=this.create(e,n);return this.start(r,t)}destroy(){for(const e in this._pool)this._pool[e].forEach(t=>t.destroy()),delete this._pool[e]}},LX=16,Jy="cubicOut",Mh={duration:300,easing:Jy,skipTextDrawing:!0,useWebWorker:!0,locate:!1},IX=class extends ct{constructor(){super(...arguments),this._running=[],this._textsHidden=!1,this.onInteractionStart=()=>{this.setWorkersIdle(!0)},this.onViewChanged=()=>{this.setWorkersIdle(!1)},this.onVisibilityChange=()=>{Ns().hidden?this.setWorkersIdle(!0):this.setWorkersIdle(!1)},this._onWorkerUpdate=(e,t,n,r,i,s)=>{const{duration:o,onSync:a,onUpdate:l,dryRun:c,locate:d}=s;if(a&&this._modules.dom.setTimeout(()=>a(n,this._modules,r),o),i){const u=i(n,this._modules,r);this._modules.events.fire("layoutComputed",{type:"layoutComputed",name:t,positions:u}),l&&l(n,u,r);const h=this._assignNodePositions(u,o,c,s.easing);r||(d&&u&&this._animateCamera(u,d,s.duration),h.then(()=>e.fire("taskComplete",u)))}else r||e.fire("taskComplete",n)},this._onWorkerComplete=(e,t,n,r,i,s,o)=>{for(let u=0;u<this._running.length;u++)if(this._running[u]===e){this._running.splice(u,1);break}r.onStop&&t&&r.onStop(i,t,this._modules);const a=this._modules.graph.nodeList(new Uint32Array(o.indexes)),l=i.dryRun&&t?n:this.collectNodesData(a),c=a.getId(),d={before:v0(o),current:v0(l)};this._modules.events.fire("layoutEnd",{type:"layoutEnd",name:r.name,positions:d,ids:c}),this._modules.dom.setTimeout(()=>{i.onEnd&&i.onEnd(t),i.skipTextDrawing&&this._textsHidden&&(this._modules.graphics.showTexts(),this._textsHidden=!1),s({name:r.name,positions:d,ids:c})})},this._onWorkerStart=(e,t,n)=>{t.skipTextDrawing&&!this._textsHidden&&(this._modules.graphics.hideTexts(),this._textsHidden=!0);const r=this._modules.graph.getNodes(t.nodes),i=this.collectNodesData(r),s=i.ids;n.setData(i),this._modules.events.fire("layoutStart",{type:"layoutStart",name:e.name,ids:s,worker:n})}}onMounted(){this._layouts={},this.timers=new Map,this._modules.events.register(["layoutGetData","layoutPrepare","layoutStart","layoutEnd","layoutComputed"]),this._modules.events.on("clearGraph",()=>this.stop()).on(["dragStart","zoomStart"],this.onInteractionStart).on(["dragEnd","viewChanged"],this.onViewChanged),this._modules.dom.addDocumentEventListener("visibilitychange",this.onVisibilityChange)}setWorkersIdle(e){this._running.forEach(t=>t.setIdle(e))}register(e){if(this._layouts[e.name])throw new Error(`Layout ${e.name} already exists`);this._layouts[e.name]=e}getAvailableLayouts(){return Object.keys(this._layouts)}start(e,t={}){const n=this._layouts[e];this._modules.events.fire("layoutPrepare",{name:e,params:t});const r=LF(this._modules.graph,t,["radial","grid"].indexOf(e)===-1);return new Promise(i=>{if(!n)throw new Error(`layout ${e} does not exist`);r.duration=typeof r.duration=="number"?r.duration:Mh.duration;const s=n.onSync;r.skipTextDrawing=r.skipTextDrawing===void 0?!!Mh.skipTextDrawing:!!r.skipTextDrawing;let o=r.locate||Mh.locate;o&&typeof o=="boolean"&&(o={}),r.locate=o;const a={name:e,update:n.update,isRunning:n.isRunning,configure:n.configure,context:n.context,imports:n.imports,stop:n.stop,setIdle:n.setIdle};this._modules.graphics.forceAttributesComputation();const l=r.useWebWorker===void 0?!!Mh.useWebWorker:!!r.useWebWorker,c=this._modules.workers.create(a,l);c.on(VF,()=>{n.onStart&&n.onStart(t),this._onWorkerStart(n,r,c)}).on(HF,d=>{this._modules.events.fire("layoutGetData",{name:e,data:d})}).on(kb,({workerMessage:d,isRunning:u})=>{const h=d.lastUpdate||-1/0,g=ir();u&&(!r.continuous||g-h<LX)||(d.lastUpdate=g,this._onWorkerUpdate(c,e,d,u,s,r))}).on(wa,({result:d})=>{c.once("taskComplete",u=>{this._onWorkerComplete(c,d,u,n,r,i,c.getData())})}),this._modules.workers.start(c,r),this._running.push(c)})}_animateCamera(e,t,n){if(e.indexes.length===0)return Promise.resolve();const r=this._modules.locate.layoutDataBoundingBox(e),i=this._modules.locate.computeConfigForBounds(r,t);return this._modules.camera.setView(i,{duration:n,easing:t.easing||Jy,ignoreZoomLimits:!0})}stop(){for(;this._running.length!==0;){const e=this._running.pop();e.stop(),e.fire("taskComplete",null)}return Promise.resolve()}isRunning(){return this._running.length!==0}_assignNodePositions(e,t,n,r=Jy){if(!e||n){const c=e?new Uint32Array(e.indexes):void 0,d=this._modules.graph.nodeList(c);return Promise.resolve(d)}const{indexes:i,x:s,y:o}=e,a=this._modules.graph.nodeList(new Uint32Array(i)),l=v0(e);for(let c=0;c<l.length;c++)l[c]={x:s[c],y:o[c]};return a.setAttributes(l,{duration:t,easing:r})}collectNodesData(e){const t=e._indexes,n=this._modules.graph.getNodeAttribute("x").getMultiple(t),r=this._modules.graph.getNodeAttribute("y").getMultiple(t);return{ids:e.getId(),indexes:t,x:n,y:r}}};function v0({x:e,y:t,indexes:n}){const r=n.length,i=new Array(r);for(let s=0;s<r;s++)i[s]={x:e[s],y:t[s]};return i}function ek(e){return typeof e=="number"&&isNaN(e)}var tk=class{constructor(){this._keys=[],this._values=[]}set(e,t){const n=this._getIndex(e);return n===-1?(this._keys.push(e.slice()),this._values.push(t),!0):(this._values[n]=t,!1)}get(e){const t=this._getIndex(e);return t===-1?void 0:this._values[t]}has(e){return this._getIndex(e)!==-1}delete(e){const t=this._getIndex(e);return t!==-1&&(this._keys.splice(t,1),this._values.splice(t,1),!0)}keys(){return this._keys.map(e=>e.slice())}values(){return this._values.slice()}_getIndex(e){for(let t=0;t<this._keys.length;t++){const n=this._keys[t];if(n.length===e.length){let r=!0;for(let i=0;i<e.length;i++){const s=n[i],o=e[i];if(!(s===o||ek(s)&&ek(o))){r=!1;break}}if(r)return t}}return-1}get size(){return this._keys.length}},PX=class{constructor(){this._map=new Map,this._arrays=new tk}clear(){return this._arrays=new tk,this._map.clear()}delete(e){return Vn(e)?this._arrays.delete(e):this._map.delete(e)}get(e){return Vn(e)?this._arrays.get(e):this._map.get(e)}set(e,t){return Vn(e)?this._arrays.set(e,t):this._map.set(e,t),this}keys(){return[...YI(this._map),...this._arrays.keys()]}values(){return[...qI(this._map),...this._arrays.values()]}get size(){return this._map.size+this._arrays.size}};function Om(e){return typeof e=="number"&&isFinite(e)}var MX=class{constructor(e,t,{path:n,filter:r,unwindArrays:i}){this._module=e,this._isNode=t,this._path=n||[],this._filter=r,this._unwindArrays=i,this._onUpdateHandlers=[],this._triggerUpdate=s=>{for(let o=0;o<this._onUpdateHandlers.length;++o)this._onUpdateHandlers[o](s)},this._info=e.watchPropertyInformation(this._isNode,this._path,this._triggerUpdate,this._filter,this._unwindArrays)}onUpdate(e){this._onUpdateHandlers.push(e)}getPropertyInfo(){return this._info}getPath(){return this._path.slice()}destroy(){this._module.unwatchPropertyInformation(this._isNode,this._path,this._triggerUpdate,this._filter,this._unwindArrays)}},FX=class{constructor(e,t,{path:n,filter:r,unwindArrays:i}){this._module=e,this._isNode=t,this._path=n,this._filter=r,this._unwindArrays=i,this._propertyList=[],this._properties={},this._onAddHandlers=[],this._onRemoveHandlers=[],this._onUpdateHandlers=[]}get path(){return this._path}onPropertyAdded(e){return this._onAddHandlers.push(e),this}onPropertyRemoved(e){return this._onRemoveHandlers.push(e),this}onPropertyUpdated(e){return this._onUpdateHandlers.push(e),this}getPath(){return this._path.slice()}getProperties(){return this._propertyList.slice()}getPropertyInfo(e){const t=this._properties[e];return t?t.info:null}destroy(){Ji(this._properties,({handler:t},n)=>{const r=this._path.concat([n]);this._module.unwatchPropertyInformation(this._isNode,r,t,this._filter,this._unwindArrays)}),this._propertyList=[],this._properties={},this._onAddHandlers=[],this._onRemoveHandlers=[],this._onUpdateHandlers=[];const e=this._module._objectPropertyWatchers.indexOf(this);this._module._objectPropertyWatchers.splice(e,1)}updateSubPropertiesToWatch(e,t){if(e!==this._isNode)return;const n=t.getData(this._path);for(let r=0;r<n.length;r++){const i=n[r];if(ya(i)){const s=Object.keys(i);for(let o=0;o<s.length;o++)this._addSubPropertyToWatch(s[o])}}}_addSubPropertyToWatch(e){if(!this._properties[e]){const t=this._path.concat([e]),n=()=>this._triggerPropertyUpdate(e),r=this._unwindArrays,i=this._isNode,s=this._filter,o=this._module.watchPropertyInformation(i,t,n,s,r);this._properties[e]={handler:n,info:o},this._triggerPropertyUpdate(e)}}_triggerPropertyUpdate(e){const{info:t}=this._properties[e],n=this._propertyList.indexOf(e),r=n!==-1,i=t.getType()!=="undefined";!r&&i?(this._propertyList.push(e),this._triggerHandlers("_onAddHandlers",e,t),this._triggerHandlers("_onUpdateHandlers",e,t)):r&&!i?(this._propertyList.splice(n,1),this._triggerHandlers("_onUpdateHandlers",e,t),this._triggerHandlers("_onRemoveHandlers",e,t)):r&&i&&this._triggerHandlers("_onUpdateHandlers",e,t)}_triggerHandlers(e,t,n){const r=this[e];for(let i=0,s=r.length;i<s;i++)r[i](t,n)}},RX=class{constructor(){}setWatcher(e){this._watcher=e}isNode(){return this._watcher.isNode}getPath(){return this._watcher.property.slice()}getBoundaries(){const e=this._watcher.boundaries;return e?{min:e.min,max:e.max}:null}getValues(){return this._watcher.values.keys()}getValueCount(e){return this._watcher.values.get(e)||0}getCount(){return this._watcher.total}getType(){return this._watcher.any>0?"any":this._watcher.numbers>0?"number":"undefined"}},DX=class extends ct{constructor(){super(...arguments),this._onExcludedStateChange=({elements:e,value:t})=>{const n=!t;for(let r=0,i=this._propertyWatchers.length;r<i;r++){const s=this._propertyWatchers[r];s.isNode===e.isNode&&s.filter==="visible"&&(n?Vc(s,e.getData(s.property)):mg(s,e.getData(s.property)),Fh(s))}},this._onDataChange=({isNode:e,changes:t})=>{for(let n=0;n<this._propertyWatchers.length;++n){const r=this._propertyWatchers[n],i=r.property,s=r.filter==="all";if(r.isNode===e)for(let o=0;o<t.length;++o){const a=t[o],l=BX(a.property||[],i);if(l){const c=a.nodes||a.edges,d=[],u=[];if(c)for(let h=0;h<c.size;++h){const g=c.get(h);(s||g.isVisible())&&(d.push(ln(a.newValues[h],l)),u.push(ln(a.previousValues[h],l)))}d.length&&(Vc(r,d),mg(r,u),Fh(r))}}}for(let n=0,r=this._objectPropertyWatchers.length;n<r;n++){const i=this._objectPropertyWatchers[n],s=i.path;for(let o=0;o<t.length;++o){const{property:a,nodes:l,edges:c}=t[o],d=l||c;if(d){const u=d.isNode;(!a||a.length<=s.length+1&&s.every((h,g)=>h===a[g]))&&i.updateSubPropertiesToWatch(u,d)}}}},this._onElementsAdded=e=>{const t=e.nodes||e.edges;for(let n=0;n<this._propertyWatchers.length;++n){const r=this._propertyWatchers[n];if(r.isNode===t.isNode){const i=t.getData(r.property);i.length&&(Vc(r,i),Fh(r))}}for(let n=0;n<this._objectPropertyWatchers.length;n++)this._objectPropertyWatchers[n].updateSubPropertiesToWatch(t.isNode,t)},this._onElementsRemoved=e=>{const t=e.nodes||e.edges;for(let n=0;n<this._propertyWatchers.length;++n){const r=this._propertyWatchers[n],i=r.filter==="all";if(r.isNode===t.isNode&&i){const s=t.getData(r.property);s.length&&(mg(r,s),Fh(r))}}},this._onGraphClear=()=>{this._propertyWatchers.forEach(e=>{e.numbers=0,e.any=0,e.total=0,e.boundaries=null,e.values.clear()})}}onMounted(){this._propertyWatchers=[],this._objectPropertyWatchers=[],this._modules.events.on("excludedStateChange",this._onExcludedStateChange).on(["updateNodeData","updateEdgeData"],this._onDataChange).on(["addNodes","addEdges"],this._onElementsAdded).on(["removeNodes","removeEdges"],this._onElementsRemoved).on("clearGraph",this._onGraphClear)}watchNodeObjectProperty(e){return this._watchObjectProperty(!0,Rh(e))}watchEdgeObjectProperty(e){return this._watchObjectProperty(!1,Rh(e))}watchNodeNonObjectProperty(e){return this._watchNonObjectProperty(!0,Rh(e))}watchEdgeNonObjectProperty(e){return this._watchNonObjectProperty(!1,Rh(e))}watchPropertyInformation(e,t,n,r,i){const s=this._findWatcher(e,t,r,i)||this._createWatcher(e,t,r,i);return n&&s.onChange.push(n),s.info}unwatchPropertyInformation(e,t,n,r,i){const s=this._findWatcher(e,t,r,i);if(!s)return;const o=s.onChange,a=o.indexOf(n);if(a!==-1&&(o.splice(a,1),o.length===0)){const l=this._propertyWatchers.indexOf(s);this._propertyWatchers.splice(l,1)}}_watchObjectProperty(e,t){const n=new FX(this,e,t);return this._objectPropertyWatchers.push(n),n.updateSubPropertiesToWatch(e,this._modules.graph[e?"getNodes":"getEdges"](t.filter)),n}_watchNonObjectProperty(e,t){return new MX(this,e,t)}_findWatcher(e,t,n,r){for(let i=0;i<this._propertyWatchers.length;++i){const s=this._propertyWatchers[i];if(s.isNode===e&&s.filter===n&&s.unwindArrays===r&&OX(s.property,t))return s}return null}_createWatcher(e,t,n,r){const i={isNode:e,property:t,numbers:0,any:0,total:0,values:new PX,boundaries:null,onChange:[],filter:n,unwindArrays:r,info:new RX};return i.info.setWatcher(i),Vc(i,this._modules.graph[e?"getNodes":"getEdges"](n).getData(t)),this._propertyWatchers.push(i),i}};function nk(e){return e==null?[]:_a(e)}function zX(e){return e==="all"?"all":"visible"}function Fh(e){for(let t=0;t<e.onChange.length;++t)e.onChange[t](e.info)}function OX(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function BX(e,t){if(e.length>t.length)return null;let n=0;for(;n<e.length;++n)if(e[n]!==t[n])return null;return t.slice(n)}function Vc(e,t,n){const r=e.values,i=!n&&e.unwindArrays;for(let s=0;s<t.length;++s){const o=t[s];if(n||o===void 0||(e.total+=1),i&&Array.isArray(o))Vc(e,o,!0);else{const a=r.get(o);a?r.set(o,a+1):(r.set(o,1),Om(o)?(e.boundaries?o<e.boundaries.min?e.boundaries.min=o:o>e.boundaries.max&&(e.boundaries.max=o):e.boundaries={min:o,max:o},e.numbers+=1):o!==void 0&&(e.any+=1))}}}function mg(e,t,n){const r=e.values,i=!n&&e.unwindArrays,s=e.boundaries;let o=!1;for(let a=0;a<t.length;++a){const l=t[a];if(n||l===void 0||(e.total-=1),i&&Array.isArray(l))o=o||mg(e,l,!0);else{const c=r.get(l);c>1?r.set(l,c-1):(r.delete(l),Om(l)?(e.numbers-=1,!s||s.min!==l&&s.max!==l||(o=!0)):l!==void 0&&(e.any-=1))}}return!n&&o&&(e.boundaries=jX(r.keys())),o}function jX(e){let t=null,n=null;for(let r=0;r<e.length;++r){const i=e[r];Om(i)&&((t==null||i<t)&&(t=i),(n==null||i>n)&&(n=i))}return t==null||n==null?null:{min:t,max:n}}function Rh(e){return typeof e!="object"||e===null||Array.isArray(e)?{path:nk(e),filter:"visible",unwindArrays:!1}:{path:nk(e.path),filter:zX(e.filter||"visible"),unwindArrays:!!e.unwindArrays}}var UX=class extends ct{onMounted(){this._modules.events.register(["virtualDown","virtualUp","virtualMove","virtualClick","virtualDoubleClick","virtualWheel"])}get x(){return this._modules.position.x||0}get y(){return this._modules.position.y||0}_later(){return this._modules.dom.afterNextFrame()}move({x:e,y:t}){if(e!==void 0&&t!==void 0){const n=e-this.x,r=t-this.y;this._modules.events.fire("virtualMove",{x:e,y:t,dx:n,dy:r})}return Promise.resolve()}down({x:e,y:t,button:n="left"}={}){return this.move({x:e,y:t}).then(()=>{this._modules.events.fire("virtualDown",{x:this.x,y:this.y,button:n}),this._modules.events.fire("virtualMove",{x:this.x,y:this.y,dx:0,dy:0,button:n})})}up({x:e,y:t,button:n="left"}={}){return this.move({x:e,y:t}).then(()=>{this._modules.events.fire("virtualUp",{x:e,y:t,button:n})})}click({x:e,y:t,button:n="left"}={}){return this.move({x:e,y:t}).then(()=>{this._modules.events.fire("virtualClick",{x:e,y:t,button:n})})}rightClick({x:e,y:t,button:n="right"}={}){return this.move({x:e,y:t}).then(()=>{this._modules.events.fire("virtualClick",{x:e,y:t,button:n})})}doubleclick({x:e,y:t,button:n="left"}={}){return this.move({x:e,y:t}).then(()=>{this._modules.events.fire("virtualDoubleClick",{x:e,y:t,button:n})})}drag(e,t){return this.down(e).then(()=>this.move(t)).then(()=>this.up(t))}wheel({x:e,y:t,dx:n,dy:r,delta:i,metaKey:s,ctrlKey:o}){return this.move({x:e,y:t}).then(()=>(this._modules.events.fire("virtualWheel",{x:e,y:t,dx:n,dy:r,delta:i,domEvent:{metaKey:s,ctrlKey:o}}),this._later()))}};function ii(e,t,n,r,i,s){const o=zr(),a=s.graphToScreenCoordinates(e),l=s.graphToScreenCoordinates(t);i.beginPath(),i.moveTo(a.x*o,a.y*o),i.lineTo(l.x*o,l.y*o),i.strokeStyle=r,i.lineWidth=n,i.stroke()}function rk(e,t,n,r){let i,s,o,a=0,l=e.length-1;for(;a<l&&a>-1;)if(i=(a+l)/2|0,s=Math.abs(t[e[i]]-n),o=Math.abs(t[e[i+1]]-n),o<s)a=i+1;else if(o>s)l=i;else{const c=Math.abs(t[e[a]]-n),d=Math.abs(t[e[l]]-n);if(c<d)l=i;else{if(!(c>d))return l;a=i+1}}return r?l:e[l]}function ik(e,t,n,r,i,s,o){let a,l,c,d,u,h;for(let g=0,p=e.length;g<p;g++)for(let m=0;m<p;m++){if(g===m)continue;let f=e[g],y=e[m];m<g&&(d=y,y=f,f=d);const _=t[f],v=t[y],x=s.get(f),b=s.get(y);if(_+x<r-i&&v-b>r+i&&Math.abs(Math.abs(_+x-(r-i))-Math.abs(v-b-(r+i)))<=o)return a=f,l=n,c=y,h=_+x+Math.abs(v-b-(_+x))/2,u=[_+x,h-i,h+i,v-b],{a,b:l,c,current:n,target:h,points:u};if(_+x<r-i&&v+b<r-i&&Math.abs(Math.abs(_+x-(v-b))-Math.abs(Math.max(_+x,v+b)-(r-i)))<=o)return a=f,l=y,c=n,h=v+x+Math.abs(Math.abs(_+x-(v-b)))+i,u=[_+x,v-b,v+b,h-i],{a,b:l,c,current:n,target:h,points:u};if(_-x>r+i&&v-b>r+i&&Math.abs(Math.abs(_+x-(v-b))-Math.abs(Math.min(_-x,v-b)-(r+i)))<=o)return a=n,l=f,c=y,h=_-x-Math.abs(Math.abs(_+x-(v-b)))-i,u=[h+i,_-x,_+x,v-b],{a,b:l,c,current:n,target:h,points:u}}return null}var x0={enabled:!1,tolerance:5,centerSnapDistance:240,sideSnapDistanceFactor:3,guidelineWidth:1,guidelineColor:"#ff0000",preferredDistance:{enabled:!0,ratio:1.13,tolerance:10,lineColor:"#00C3FF",lineWidth:1},neighbours:{enabled:!0,offset:5,tolerance:3,lineColor:"#00C3FF",lineWidth:1}},$X=class extends ct{constructor(){super(...arguments),this._options=un(x0),this._enabled=!1,this._ysnap=0,this._xsnap=0,this._node=null,this._nodes=null,this._r=0,this._vguideline={start:{x:0,y:0},end:{x:0,y:0}},this._hguideline={start:{x:0,y:0},end:{x:0,y:0}},this._gridResolution=0,this._onNodeDragStart=({nodes:e})=>{e.size===1&&(this._node=e.get(0),this._cacheViewportData(),this._r=Number(this._node.getAttribute("radius")))},this._onNodeDragEnd=()=>{this._node=null,this._layer.refresh()}}onMounted(){this._options=un(x0),this._enabled=!1}enable(e){this._enabled||(this._options=Kr(e,x0),this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(t=>{t.clearRect(0,0,t.canvas.width,t.canvas.height)},{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this._modules.events.on("nodesDragStart",this._onNodeDragStart).on("nodesDragEnd",this._onNodeDragEnd),this._modules.settings.update({"interactions.drag.onBeforeDrag":(t,n,r,i)=>this._onBeforeDrag(n,r,i)}))}disable(){this._enabled&&(this._modules.events.off(this._onNodeDragStart).off(this._onNodeDragEnd),this._layer.destroy(),this._modules.settings.update({"interactions.drag.onBeforeDrag":null}),this._enabled=!1)}enabled(){return this._enabled}_onBeforeDrag(e,t,n){if(this._node){const r=n[0];this._layer.refresh(i=>{this._scan(i,r)}),this._node.setAttributes(r)}}_cacheViewportData(){const e=this._modules.camera,t=e.screenToGraphCoordinates({x:0,y:0}),n=e.screenToGraphCoordinates({x:e.width,y:e.height});if(this._nodes=this._modules.spatial.getNodesByBoundingBox(t.x,t.y,n.x,n.y),this._node==null)return;const r=this._node._index,i=Array.from(this._nodes._indexes);i.splice(i.indexOf(r),1);const s=this._modules.graph.getNodeAttribute("radius"),o=this._modules.graph.getNodeAttribute("x"),a=this._modules.graph.getNodeAttribute("y"),l=o.buffer(),c=a.buffer(),d=Lc(i.slice(),o),u=Lc(i.slice(),a),h={},g={};this._gridResolution=Number(this._node.getAttribute("radius"));const p=this._gridResolution;for(let m=0,f=i.length;m<f;m++){const y=d[m],_=u[m],v=l[y]/p|0,x=c[_]/p|0;h[v]||(h[v]=[]),g[x]||(g[x]=[]),h[v].push(y),g[x].push(_)}this._nodesByX=d,this._nodesByY=u,this._xGrid=h,this._yGrid=g,this._xList=o,this._yList=a,this._X=l,this._Y=c,this._R=s}_scan(e,t){if(this._node==null)return;const n=this._node._index,r=t.x,i=t.y,s=this._r,o=this._options,a=this._xList,l=this._yList,c=this._R,d=this._X,u=this._Y,h=this._modules.camera.zoom,g=Math.min(s,this._options.tolerance/h),p=2*s*o.sideSnapDistanceFactor,m=o.guidelineWidth,f=o.guidelineColor;let y,_,v,x,b,w,S,A,C=n,k=n,T=null,M=!1,D=!1;if(C=rk(this._nodesByX,d,r),k=rk(this._nodesByY,u,i),Math.abs(d[C]-r)>o.centerSnapDistance&&(C=n),Math.abs(u[k]-i)>o.centerSnapDistance&&(k=n),this._xsnap=0,C!==n){y=this._vguideline.start,_=this._vguideline.end,A=C,v=d[A],x=u[A],T=c.get(A),S=Math.abs(r-v);const B=Math.abs(r-s-(v-T)),I=Math.abs(r+s-(v+T));if(S<Math.max(s,T)){x<i?(y.y=x-T,_.y=i+s):(y.y=x+T,_.y=i-s);const N=Math.min(B,S,I);N===S?(y.x=_.x=v,_.y=i,y.y=x,this._xsnap=1):Math.abs(i-x)<T+s+p&&(N===B?(y.x=_.x=v-T,this._xsnap=2):(y.x=_.x=v+T,this._xsnap=3)),N<g&&(M=!0)}this._xsnap!==0&&ii(y,_,m,f,e,this._modules.camera)}if(this._ysnap=0,k!==n){y=this._hguideline.start,_=this._hguideline.end,A=k,v=d[A],x=u[A],T=c.get(A),S=Math.abs(i-x);const B=Math.abs(i-s-(x-T)),I=Math.abs(i+s-(x+T));if(S<Math.max(s,T)){v<r?(y.x=v-T,_.x=r+s):(y.x=v+T,_.x=r-s);const N=Math.min(B,S,I);N===S?(y.y=_.y=x,_.x=r,y.x=v,this._ysnap=1):Math.abs(r-v)<T+s+p&&(N===B?(y.y=_.y=x-T,this._ysnap=4):(y.y=_.y=x+T,this._ysnap=5)),N<g&&(D=!0)}this._ysnap!==0&&ii(y,_,m,f,e,this._modules.camera)}if(T!=null&&o.preferredDistance.enabled){const B=o.preferredDistance.ratio,I=Math.min(o.preferredDistance.tolerance/h,s),N=Math.max(s,T);if(C===n||this._xsnap!==0&&M){if(k!==n&&(this._ysnap===0||!D)&&(A=k,v=d[A],x=u[A],T=c.get(A),w=Math.abs(i-x)-(s+T)*(1+B),w<=I&&w>=-I)){const V=i<x?-1:1;y=this._hguideline.start,_=this._hguideline.end,y.x=v-N,_.x=v+N,y.y=_.y=x,ii(y,_,m,f,e,this._modules.camera),y.x=r-N,_.x=r+N,y.y=_.y=x+V*(1+B)*(s+T),ii(y,_,m,f,e,this._modules.camera),this._ysnap=1,D=!0}}else if(A=C,v=d[A],x=u[A],T=c.get(A),b=Math.abs(r-v)-(s+T)*(1+B),b<=I&&b>=-I){const V=r<v?-1:1;y=this._vguideline.start,_=this._vguideline.end,y.x=_.x=v+V*(1+B)*(s+T),y.y=x-N,_.y=x+N,y.x=_.x=v,ii(y,_,m,f,e,this._modules.camera),y.y=i-N,_.y=i+N,y.x=_.x=v+V*(1+B)*(s+T),ii(y,_,m,f,e,this._modules.camera),this._xsnap=1,M=!0}}if(o.neighbours.enabled){const B=this._gridResolution,I=r/B|0,N=i/B|0,V=this._xGrid,$=this._yGrid,Q=[],se=[].concat($[N-1]||Q,$[N]||Q,$[N+1]||Q),te=[].concat(V[I-1]||Q,V[I]||Q,V[I+1]||Q);let de;se.length>1&&(Lc(se,a),de=ik(se,d,n,r,s,c,g),de&&(this._drawNeighbourGuidelines(e,de,t,!1),M=!1)),te.length>1&&!de&&(Lc(te,l),de=ik(te,u,n,i,s,c,g),de&&(this._drawNeighbourGuidelines(e,de,t,!0),D=!1))}(M||D)&&this._snap(t,!M,!D)}_drawNeighbourGuidelines(e,{a:t,b:n,c:r,points:i,target:s},o,a){const l={x:0,y:0},c={x:0,y:0},d=this._R,u=this._X,h=this._Y;let[g,p,m]=d.getMultiple([t,n,r]);const{offset:f,lineWidth:y,lineColor:_}=this._options.neighbours;let v,x;a?(o.y=s,g=-g,p=-p,m=-m,v=c.x=l.x=Math.min(u[t]+g,u[n]+p,u[r]+m)-f,x=u):(o.x=s,v=c.y=l.y=Math.max(h[t]+g,h[n]+p,h[r]+m)+f,x=h);const b=a?"y":"x",w=a?"x":"y";l[b]=i[0],c[b]=i[1],ii(l,c,y,_,e,this._modules.camera),l[b]=i[2],c[b]=i[3],ii(l,c,y,_,e,this._modules.camera),l[b]=i[0],l[w]=v-f/2,c[b]=i[0],l[w]=x[t]+g,ii(l,c,y,_,e,this._modules.camera),l[b]=i[1],l[w]=v-f/2,c[b]=i[1],l[w]=x[n]+p,ii(l,c,y,_,e,this._modules.camera),l[b]=i[2],l[w]=v-f/2,c[b]=i[2],l[w]=x[n]+p,ii(l,c,y,_,e,this._modules.camera),l[b]=i[3],l[w]=v-f/2,c[b]=i[3],l[w]=x[r]+m,ii(l,c,y,_,e,this._modules.camera)}_snap(e,t,n){const r=this._xsnap,i=this._ysnap;let s;t||r===0||(s=this._vguideline.end,e.x=r===2?s.x+this._r:r===3?s.x-this._r:s.x),n||i===0||(s=this._hguideline.end,e.y=i===4?s.y+this._r:i===5?s.y-this._r:s.y)}},GX=class{constructor(e,t,n){this._module=e,this._id=t,this._whenApplied=n.then(()=>this)}getId(){return this._id}whenApplied(){return this._whenApplied}refresh(){return this._module.refreshRule(this._id)}getIndex(){return this._module.getRuleIndex(this._id)}setIndex(e){return this._module.setRuleIndex(this._id,e)}update(e){return this._module.updateRule(this._id,e)}getDefinition(){return this._module.getRuleDefinition(this._id)}destroy(){return this._module.destroyRule(this._id)}},VX=1e3,HX=1/VX,WX=class extends ct{constructor(){super(...arguments),this._idCounter=1,this._rules=[]}onMounted(){this._rules=[],this._modules.events.register(["addStyleRule","removeStyleRule","updateStyleRule","refreshStyleRule"])}_get(e){for(let t=0;t<this._rules.length;++t){const n=this._rules[t];if(n.id===e)return n.index=t,n}throw new Error("calling a method on a destroyed style rule")}_updatePriorities(){for(let e=0;e<this._rules.length;++e){const t=this._rules[e],n=qj+e*HX;t.attributeLayer.update({priority:n})}}addRule(e={}){const t=this._idCounter++,n=this._modules.graphics.addAttributeLayer(be({name:`rule(${t})`},sk(e))),r=this._modules.dom.afterNextFrame(),i=new GX(this,t,r),s={id:t,attributeLayer:n,wrapper:i};return this._rules.push(s),this._updatePriorities(),this._modules.events.fire("addStyleRule",{rule:s,options:e,id:s.id}),i}getRuleIndex(e){const t=this._get(e);return t.index==null?null:t.index}setRuleIndex(e,t){const n=this._get(e),r=fi(t,0,this._rules.length-1);return this._rules.splice(n.index,1),this._rules.splice(r,0,n),this._updatePriorities(),this._modules.dom.afterNextFrame()}updateRule(e,t){const n=this._get(e),r=Object.assign({fullOverwrite:t.fullOverwrite},t);return n.attributeLayer.update(r),this._modules.events.fire("updateStyleRule",{rule:n,options:t}),this._modules.dom.afterNextFrame()}getRuleDefinition(e){return sk(this._get(e).attributeLayer.getDefinition())}destroyRule(e){const t=this._get(e);return this._modules.events.fire("removeStyleRule",{rule:t,id:t.id}),t.attributeLayer.destroy(),this._rules.splice(t.index,1),this._modules.dom.afterNextFrame()}refreshRule(e){const t=this._get(e);return t.attributeLayer.updateAll(),this._modules.events.fire("refreshStyleRule",{rule:t,id:e}),this._modules.dom.afterNextFrame()}refreshAllRules(){for(const e of this._rules)e.attributeLayer.updateAll(),this._modules.events.fire("refreshStyleRule",{rule:e,id:e.id});return this._modules.dom.afterNextFrame()}getRuleList(){return this._rules.map(e=>e.wrapper)}};function sk(e){return{nodeAttributes:e.nodeAttributes,edgeAttributes:e.edgeAttributes,nodeSelector:e.nodeSelector,edgeSelector:e.edgeSelector,nodeDependencies:e.nodeDependencies,edgeDependencies:e.edgeDependencies,nodeOutput:e.nodeOutput,edgeOutput:e.edgeOutput}}var Qy,Wi=6,qF=5,pd=1,ZF=0,JF=0,Ky=-1;function QF(e,t,n,r){ZF=e,Qy=n,JF=t?1:0,Ky=r}var ok=(e,t,n,r)=>i=>{const{rects:s,bboxes:o,intersects:a,indexToLayer:l,indexToRemoveNodeText:c,indexToRemoveEdgeText:d}=r;if(o[i*Wi+5]===ZF&&o[i*Wi+4]===n)return!1;const u=i*qF,h=Su(s[u],s[u+1],s[u+2],s[u+3],s[u+4]);if($P(Qy,h)){if(r.realIntersection=!0,Ky<=0&&a.push(Qy,h),!(l[o[i*Wi+5]]<Ky))return!0;e.remove(i),r.realIntersection=!1,o[i*Wi+4]===JF?c[o[i*Wi+5]]=!0:d[o[i*Wi+5]]=!0}return!1};function ak(e,t,n="#22ff00"){return ev([[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]]].map(r=>({x:r[0],y:r[1]})),t,n)}function ev(e,t,n="#ff0000"){t.strokeStyle=n,t.beginPath();for(let r=0,i=e.length;r<i;r++)r===0?t.moveTo(e[r].x,e[r].y):t.lineTo(e[r].x,e[r].y);t.closePath(),t.stroke()}function XX(e,t,n,r,i){for(let a=0,l=t.length;a<l;a+=Wi)ak(t.slice(a,a+4),e,"#aaaaaa");for(let a=0;a<n.length;a+=qF)ev(Su(n[a],n[a+1],n[a+2],n[a+3],n[a+4]),e,"green");const s=[i.root];let o=i.root;for(;o=s.pop();)o.leaf||s.push.apply(s,o.children),ak(i.getNodeBounds(o),e,"rgba(0,0,0,0.2)"),o=s.pop();r.forEach(a=>ev(a,e,"red"))}var wc={x1:0,y1:0,x2:0,y2:0},b0={x:0,y:0},ja={x:0,y:0},YX=Math.PI/2,qX=0;function ZX(e,t,n,r,i,s,o,a,l,c,d){const u=a.remove.nodes,h=a.remove.edges,g=a.redraw.edges,p=n.angle,m=n.zoom,f=i.x,y=i.y,_=i.radius,v=Math.PI,{source:x,target:b,scalingMethod:w}=r,S=r.width,A=r.curvature,C=r.layer,k=r.text.content,T=r.text.scaling,M=r.text.size,D=r.text.font,B=r.text.style,I=r.text.scale,N=r.text.maxLineLength,V=r.text.margin,$=r.text.minVisibleSize,Q=r.text.padding,se=r.animationDuration,te=r.text.adjustAngle,de=r.text.position;a.indexToLayer={},a.indexToQuadIndex={},a.indexToRemoveNodeText={},a.indexToRemoveEdgeText={},a.indexToRedrawEdgeText={},a.byLayer=[];const{byLayer:Ee,indexToLayer:oe,indexToQuadIndex:_e,indexToRedrawEdgeText:De,indexToRemoveNodeText:We,indexToRemoveEdgeText:Ye}=a;for(let Y=0;Y<e.length;Y++){const ne=e[Y],ae=C.get(ne)-jI;for(let ce=1;ce<=ae;ce++)(Ee[ce]=Ee[ce]||[]).push(ne);oe[ne]=ae}if(l!==null){const Y=Ee.length;for(let ne=oe[l]+1;ne<=Y;ne++)(Ee[ne]=Ee[ne]||[]).unshift(l);oe[l]=Y}const pe=[0,0,0,0],ye=[0,0,0,0,0],{bboxes:Ke,rects:tt}=a,dt=(Y,ne=-1)=>{const ae=se.get(Y);let ce=k?k.get(Y):"";if(ce===null||ce===""||ae)return!1;const he=x.get(Y),me=b.get(Y);let Me=S.get(Y);const Ce=A.get(Y),Te=$.get(Y);if(Me*m<Te)return Ye[Y]=!0,!1;w.get(Y)==="fixed"&&(Me/=m);let ot=(f.get(he)+f.get(me))/2,st=(y.get(he)+y.get(me))/2;ce=ce?ce.toString():"";const It=!T.get(Y),Pt=I.get(Y)*(It?1:m),Mt=D.get(Y),Ht=(It?M.get(Y):Pt*Me)*pd,Bt=B.get(Y),lt=N.get(Y),kt=de.get(Y)===wu;let jt=+kt*V.get(Y)+r.text.padding.get(Y);const Ft=f.get(he),Ct=y.get(he),vt=f.get(me),Vt=y.get(me),Qt=_.get(he),qn=_.get(me);if(Ce===0){const xn=jl(Ft,Ct,vt,Vt)-p,kn=Qt-qn;ot+=kn*Math.cos(xn)/2,st+=kn*Math.sin(xn)/2}let mt;const xt=he===me;if(xt)mt=v/4-p,Nm(Ft,Ct,Ce,Qt,0,wc),Xd(.5,Ft,Ct,vt,Vt,wc.x1,wc.y1,wc.x2,wc.y2,ja),ot=ja.x,st=ja.y,jt/=-m;else{if(Ft===vt&&Ct===Vt)return!1;mt=jl(Ft,Ct,vt,Vt)-p,Ce!==0&&(ka(Ft,Ct,vt,Vt,Ce,b0),Lm(.5,Ft,Ct,vt,Vt,b0.x,b0.y,ja),ot=ja.x,st=ja.y)}const gt=jt+qX,Ut=pP(ce,lt);if(!Ut)return!1;const{lines:Wt,data:An}=Ut;let On=s(An[0],Mt,Bt,Ht).width*pd;for(let xn=1;xn<Wt;xn++)On=Math.max(On,s(An[xn],Mt,Bt,Ht).width*pd);const mn=Wt*Ht,Mn=On/m/2,kr=mn/m/2,zi=Math.abs(op(mt))<YX?1:-1;let $t=kt?xt?mn/m+Me/2+jt:zi*(gt/m+Me/2+kr):0;if(!xt&&Ce===0&&te.get(Y)){const xn=Q.get(Y);En(Ft,Ct,vt,Vt)*m-(Qt+qn)*(d?1:m)<On+2*xn+1&&($t*=zi,mt=0)}if(ye[0]=ot-Mn,ye[1]=st-kr,ye[2]=ot+Mn,ye[3]=st+kr,ye[4]=mt+p,Dy(ye,-(mt+p),-$t,ye),ye[2]=ye[2]-ye[0],ye[3]=ye[3]-ye[1],mt=v-mt-p,Rm(ot-Mn,st-kr,2*Mn,2*kr,mt,void 0,void 0,pe),Dy(pe,mt,$t,pe),a.realIntersection=!1,QF(Y,!1,Su(ye[0],ye[1],ye[2],ye[3],ye[4]),ne),t.traverse(pe[0],pe[1],pe[2],pe[3],c),a.realIntersection&&!o)return Ye[Y]=!0,!1;if(De[Y]=!0,We[Y]=!1,ne<=0){const xn=Ke.length/Wi;_e[Y]=xn,Ke.push(pe[0],pe[1],pe[2],pe[3],0,Y),t.insert(xn,pe[0],pe[1],pe[2],pe[3]),tt.push(ye[0],ye[1],ye[2],ye[3],ye[4])}else t.insert(_e[Y],pe[0],pe[1],pe[2],pe[3])};for(const Y of e)dt(Y);let it=!0;for(let Y=0;Y<Ee.length;Y++){const ne=Ee[Y];if(ne)if(it)it=!1;else for(const ae of ne)dt(ae,Y)}for(let Y=0;Y<e.length;Y++){const ne=e[Y];We[ne]?u.push(ne):De[ne]&&g.push(ne),Ye[ne]&&h.push(ne)}return a}var JX={left:-1,right:1,top:0,bottom:0,center:0},QX={left:0,right:0,top:-1,bottom:1,center:0},KX={left:-1,right:0,top:-.5,bottom:-.5,center:-.5},eY={left:-.5,right:-.5,top:-1,bottom:0,center:-.5},tY=(e,t,n)=>pP(t,n.get(e))||{lines:0,data:[" "],maxLength:1},nY=(e,t,n,r,i,s,o)=>{const{lines:a,data:l}=tY(e,t,r);let c=n(l[0],i,s,o).width;for(let d=1;d<a;d++)c=Math.max(c,n(l[d],i,s,o).width);return[c,a*o*pd]},rY=(e,t,n)=>{const r=t.text.content,i=t.radius,s=t.text.scaling,o=t.text.position,a=t.text.padding,l=t.text.scale,c=t.text.size,d=t.text.style,u=t.text.font,h=t.text.maxLineLength,g=t.text.margin,p=r.get(e),m=i.get(e),f=!s.get(e),y=o.get(e),_=a.get(e),v=l.get(e),x=(f?c.get(e):v*m*2)*pd,b=d.get(e),w=u.get(e),S=_+g.get(e),A=JX[y],C=QX[y],[k,T]=nY(e,`${p}`,n,h,w,b,x),M=k/2,D=T/2;return[KX[y]*k,eY[y]*T,A*S,C*S,A*m,C*m,k,T,M,D]};function iY(e,t,n,r,i,s,o,a,l){const c=o.remove.nodes,d=o.remove.edges,u=o.redraw.nodes,h=n.angle,g=n.zoom,p=n.sin,m=n.cos,f=r.x,y=r.y,_=r.radius,v=r.layer,x=r.scalingMethod,b=r.text.content,w=r.text.scaling,S=r.text.minVisibleSize,A=r.animationDuration,C=r.textHidden,k=r.excluded;o.indexToLayer={},o.indexToQuadIndex={},o.indexToRemoveNodeText={},o.indexToRemoveEdgeText={},o.indexToRedrawNodeText={},o.byLayer=[];const{indexToLayer:T,indexToRedrawNodeText:M,indexToRemoveNodeText:D,indexToRemoveEdgeText:B,indexToQuadIndex:I,byLayer:N}=o;for(let oe=0;oe<e.length;oe++){const _e=e[oe],De=v.get(_e)-jI;(N[De]=N[De]||[]).push(_e),T[_e]=De}if(a!==null){const oe=N.length;for(let _e=T[a]+1;_e<=oe;_e++)(N[_e]=N[_e]||[]).unshift(a);T[a]=oe}let V;const $=[0,0,0,0],Q=[0,0,0,0,0],{bboxes:se,rects:te}=o,de=(oe,_e=-1)=>{const De=A.get(oe);let We=b.get(oe);if(We===null||We===""||De!==0)return!1;let Ye=_.get(oe);const pe=S.get(oe);if(k.get(oe)===1)return D[oe]=!0,!1;if(2*Ye*g<pe)return C.get(oe)===0&&(D[oe]=!0),!1;x.get(oe)==="fixed"&&(Ye/=g);const ye=f.get(oe),Ke=y.get(oe);typeof We=="number"&&(We=We.toString());let[tt,dt,it,Y,ne,ae,ce,he,me,Me]=i(oe);const Ce=!w.get(oe),Te=Ce?g:1,ot=x.get(oe)==="fixed"?g:1;Ce?(it+=me,Y+=Me,me/=g,Me/=g,ce/=g,he/=g):(it+=me*g,Y+=Me*g),tt=tt/Te+it/g+ne/ot,dt=dt/Te+Y/g+ae/ot,Rm(ye-me,Ke-Me,ce,he,-h,p,-m,$),Q[0]=ye-me,Q[1]=Ke-Me,Q[2]=ce,Q[3]=he,Q[4]=h;const st=m*tt-p*dt,It=p*tt+m*dt;if($[0]+=st,$[1]+=It,$[2]+=st,$[3]+=It,Q[0]+=st,Q[1]+=It,o.realIntersection=!1,QF(oe,!0,Su(Q[0],Q[1],Q[2],Q[3],Q[4]),_e),t.traverse($[0],$[1],$[2],$[3],l),o.realIntersection&&!s)return D[oe]=!0,!1;M[oe]=!0,D[oe]=!1,_e<=0?(V=se.length/Wi,I[oe]=V,se.push($[0],$[1],$[2],$[3],1,oe),t.insert(V,$[0],$[1],$[2],$[3]),te.push(Q[0],Q[1],Q[2],Q[3],Q[4])):t.insert(I[oe],$[0],$[1],$[2],$[3])};for(const oe of e)de(oe);let Ee=!0;for(let oe=0;oe<N.length;oe++){const _e=N[oe];if(_e)if(Ee)Ee=!1;else for(const De of _e)de(De,oe)}for(let oe=0;oe<e.length;oe++){const _e=e[oe];D[_e]?c.push(_e):M[_e]&&u.push(_e),B[_e]&&d.push(_e)}return o}var sY=1,oY="topDown",aY="bottomUp",lY=.15,cY=200,dY=80,uY=["x","y","radius","width","layer","text.content","text.minVisibleSize","text.size","text.scale","text.scaling","text.padding","text.margin","text.position","text.style"].reduce((e,t)=>(e.add(t),e),new Set),hY=class extends ct{constructor(e,t){super(e),this._textBBoxes=[],this._rects=[],this._enabled=!1,this._geoEnabled=!1,this._intersects=[],this._textDisplacement={},this._textDisplacementUpdate={},this._skipFrames=!1,this._output={remove:{nodes:[],edges:[]},redraw:{nodes:[],edges:[]},rects:this._rects,bboxes:this._textBBoxes,intersects:this._intersects,realIntersection:!1,indexToLayer:{},byLayer:[],indexToRedrawEdgeText:{},indexToRemoveEdgeText:{},indexToRedrawNodeText:{},indexToRemoveNodeText:{},indexToQuadIndex:{}},this._onZoomStart=fm(({startZoom:n,endZoom:r})=>{this._enabled&&r<n&&this._updateLabels(this._modules.camera.clone({zoom:r}))},dY),this._onAttributesChanged=n=>{if([...n.edgeAttributes,...n.nodeAttributes].some(r=>uY.has(r))){const r=n.nodes._indexes;for(let i=0;i<r.length;i++)this._textDisplacementUpdate[r[i]]=!0;this._update()}},this._onItemsAdded=n=>{const r=n.nodes||n.edges;(this._enabled||this._forceEnabled)&&this._modules.settings.get("texts.preventOverlap")&&this._modules.graphics.setTextHidden(r,!0)},this._onToggle=n=>(n?this._update():this._reset(),this),this._update=()=>{(this._enabled||this._forceEnabled)&&this._updateDebounced()},this._toggleDebug=n=>{n?this._modules.layers.whenReady(()=>{this._layer=this._modules.layers.addCanvasLayer(r=>{r.lineWidth=1/this._modules.camera.getZoom(),XX(r,this._textBBoxes,this._rects,this._intersects,this._quadtree)},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._canvas=this._layer.element,this._ctx=this._canvas.getContext("2d"),this._update()}):this._canvas&&(this._layer.destroy(),this._canvas=this._ctx=null)},this._measureText=(n,r,i,s)=>this._engine.measureText(n,r,i,s),this._textDisplacement={},this._textDisplacementUpdate={},this._quadtree=new xL(n=>{const r=Wi,i=r*n;return this._textBBoxes.slice(i,i+r)},sY),t.forceEnableTextOverlapRemoval&&this.forceEnable()}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._modules.events.register(["labelCollisionsRemoved"]),this.setRate(cY),this._modules.settings.register("texts.preventOverlap",!0,this._onToggle),this._modules.settings.register("texts.debug",!1,this._toggleDebug),this._modules.settings.register("texts.removalStrategy",oY);const e=this._output;this._nodeTraversal=ok(this._quadtree,!1,1,e),this._edgeTraversal=ok(this._quadtree,!1,0,e),this._modules.events.on(["addNodes","addEdges"],this._onItemsAdded).on(["layoutEnd","locate"],()=>this._updateLabels()).on(["viewChanged","mouseover","mouseout"],this._update).on("updateAttributes",this._onAttributesChanged).on("setContainer",({element:t})=>{if(t)return this._enable();this._disable()}).on("zoomStart",this._onZoomStart).on("viewExportStart",({preventOverlap:t,camera:n})=>{t&&this.forceUpdate(n)}).on("viewExportEnd",()=>{this.forceUpdate()}).on("geoEnabled",()=>this._geoEnabled=!0).on("geoDisabled",()=>this._geoEnabled=!1)}getTextsBoundingBox(e,t){if(this._skipFrames=!0,e||t?this._updateLabels(this._modules.camera,e?Array.from(e._indexes):[],t?Array.from(t._indexes):[]):this._updateLabels(),this._skipFrames=!1,this._rects===void 0)throw new Error("this._rects is undefined");const n=this._rects,r=new vr;for(let i=0;i<n.length;i+=5){const s=n[i],o=n[i+1],a=n[i+2],l=n[i+3],c=n[i+4],[d,u,h,g]=Rm(s,o,a,l,c);r.addPoint(d,u).addPoint(h,g)}return r}setRate(e){this._updateDebounced=this._modules.sync.debounceIdle(t=>this._updateLabels(t),e)}forceEnable(){this._forceEnabled=!0}update(){this._update()}forceUpdate(e=this._modules.camera){this._updateLabels(e)}_enable(){this._enabled=!0,this._update()}_disable(){this._textBBoxes=[],this._rects=[],this._intersects=[],this._enabled=!1}_onCameraMove(){this._update()}_updateLabels(e=this._modules.camera,t,n){if(!this._modules.settings.get("texts.preventOverlap"))return;const r=this._modules.graphics.getNodeAttributes(),i=this._modules.graphics.getEdgeAttributes();this._intersects=[],this._textBBoxes=[],this._rects=[];const s=e.getAngle(),o=e.getProjectedScreenBounds(lY),a=this._modules.settings.get("texts.removalStrategy")===aY,l={angle:s,zoom:e.zoom,screen:o,sin:Math.sin(s),cos:Math.cos(s)};this._resetOutput();const c=this._output;if(!t||!n){const p=this._modules.spatial.queryRaw(o[0],o[1],o[2],o[3]);t=p.nodes,n=p.edges}const d=this._quadtree.clear().cover(o[0],o[1],o[2],o[3]);if(t.length+n.length===0)return;const u=this._modules.captor.getPointedElement();let h=null,g=null;u!==null&&(u.isNode?h=u._index:g=u._index);for(const p of t)!this._textDisplacementUpdate[p]&&this._textDisplacement[p]||(this._textDisplacement[p]=rY(p,r,this._measureText),this._textDisplacementUpdate[p]=!1);iY(t,d,l,r,p=>this._textDisplacement[p],a,c,h,this._nodeTraversal),ZX(n,d,l,i,r,this._measureText,a,c,g,this._edgeTraversal,this._geoEnabled),this._skipFrames||this._clearOverlaps(this._output),this._modules.settings.get("texts.debug")&&this._layer.refresh()}_clearOverlaps(e){const t=this._modules.graph.nodeList,n=this._modules.graph.edgeList,r=this._modules.graphics,i=t(new Uint32Array(e.remove.nodes)),s=n(new Uint32Array(e.remove.edges)),o=t(new Uint32Array(e.redraw.nodes)),a=n(new Uint32Array(e.redraw.edges));r.setTextHidden(i,!0),r.setTextHidden(s,!0),r.setTextHidden(o,!1),r.setTextHidden(a,!1),this._modules.events.fire("labelCollisionsRemoved",e)}_resetOutput(){const e=this._output;e.remove.nodes=[],e.remove.edges=[],e.redraw.nodes=[],e.redraw.edges=[],e.rects=this._rects,e.bboxes=this._textBBoxes,e.intersects=this._intersects,e.realIntersection=!1,e.indexToLayer={},e.byLayer=[],e.indexToRedrawEdgeText={},e.indexToRemoveEdgeText={},e.indexToRedrawNodeText={},e.indexToRemoveNodeText={},e.indexToQuadIndex={}}_reset(){this._modules.graphics.resetTextHidden(),this._textDisplacement={},this._textDisplacementUpdate={}}},gY=class extends ct{constructor(){super(...arguments),this._onStartInteractionEvent=(e,t)=>{if(this._current)return;const n=this._interactionsByStartEvent[t];let r;for(const i of n)i.check(e)&&(!r||i.priority>=r.priority)&&(r=i);r&&this._startInteraction(r,e)},this._onProgressInteractionEvent=(e,t)=>{this._current&&this._current.progressEventName===t&&this._current.onProgress&&this._current.onProgress(e)},this._onStopInteractionEvent=(e,t)=>{this._current&&this._current.stopEventName===t&&this._stopCurrentInteraction(null)}}onMounted(){this._interactionsByStartEvent={},this._boundProgressEvents={},this._boundStopEvents={}}_startInteraction(e,t){e.onStart&&e.onStart(t),e.onStop&&(this._current=e,e.disableDetection&&this._modules.captor.setDetectionEnabled(!1))}_stopCurrentInteraction(e){this._current&&this._current.disableDetection&&this._modules.captor.setDetectionEnabled(!0),this._current&&this._current.onStop&&this._current.onStop(e),this._current=void 0}_forceStartInteraction(e,t){this._current&&this._stopCurrentInteraction(t),this._startInteraction(e,t)}_createWrapper(e){return{start:t=>this._forceStartInteraction(e,t)}}_addInteraction(e,t){const n=this._interactionsByStartEvent[e];return n?n.push(t):(this._interactionsByStartEvent[e]=[t],this._modules.events.on(e,this._onStartInteractionEvent)),this._createWrapper(t)}_createProgressiveInteraction(e,t,n,r){const i={priority:lk(r.priority),check:r.check||Qg,onStart:r.onStart||wt,onProgress:r.onProgress||wt,onStop:r.onStop||wt,disableDetection:!!r.disableDetection,progressEventName:t,stopEventName:n};return this._boundProgressEvents[t]||(this._boundProgressEvents[t]=!0,this._modules.events.on(t,this._onProgressInteractionEvent)),this._boundStopEvents[n]||(this._boundStopEvents[n]=!0,this._modules.events.on(n,this._onStopInteractionEvent)),this._addInteraction(e,i)}_createNonProgressiveInteraction(e,t){return this._addInteraction(e,{priority:lk(t.priority),check:t.check||Qg,onStart:t.handler||wt,onProgress:void 0,onStop:void 0,disableDetection:!1,progressEventName:void 0,stopEventName:void 0})}onDrag(e){return this._createProgressiveInteraction("dragStart","dragProgress","dragEnd",e)}onGesture(e){return this._createProgressiveInteraction("gestureStart","gestureProgress","gestureEnd",e)}onClick(e){return this._createNonProgressiveInteraction("click",e)}onDoubleClick(e){return this._createNonProgressiveInteraction("doubleclick",e)}onHover(e){return this._createNonProgressiveInteraction("mouseover",e)}onUnhover(e){return this._createNonProgressiveInteraction("mouseout",e)}onMouseWheel(e){return this._createNonProgressiveInteraction("mousewheel",e)}onMouseDown(e){return this._createNonProgressiveInteraction("mousedown",e)}onMouseUp(e){return this._createNonProgressiveInteraction("mouseup",e)}onMouseMove(e){return this._createNonProgressiveInteraction("mousemove",e)}};function lk(e){return typeof e=="string"?n6.indexOf(e):typeof e!="number"||isNaN(e)?0:e}var pY=["virtualUp","mouseupInternal","touchUp"],mY=["virtualDown","mousedownInternal","touchDown"],fY=["virtualMove","mousemoveInternal","touchMove"],_Y=["virtualClick","clickInternal","touchTap"],yY=["virtualDoubleClick","doubleclickInternal","touchDoubleTap"],vY=["virtualWheel","mousewheelInternal"],xY=100,bY=class extends ct{constructor(){super(...arguments),this._elt=null,this._hoveredElt=null,this._draggedElt=null,this._hover=!1,this._disabledCounter=0,this._accDx=0,this._accDy=0,this._prevX=0,this._prevY=0,this._buttons={left:{isPressed:!1,isDragging:!1},middle:{isPressed:!1,isDragging:!1},right:{isPressed:!1,isDragging:!1}},this._onGraphChanged=()=>{this._resetCurrent(this._modules.position.x,this._modules.position.y),this._onMove({x:this._modules.position.x,y:this._modules.position.y,source:null,domEvent:null})}}onMounted(){this._modules.events.register(["mousemove","mousedown","mouseup","click","doubleclick","mousewheel","mouseout","mouseover","dragStart","dragProgress","dragEnd","gestureStart","gestureProgress","gestureEnd"]),this._modules.settings.register("detect.nodes",!0).register("detect.edges",!0).register("detect.nodeTexts",!0).register("detect.nodeBadges",!0).register("detect.edgeTexts",!0).register("detect.nodeErrorMargin",5).register("detect.edgeErrorMargin",2).register("detect.enableSpatialIndex",!0).register("detect.spatialIndexMarginRatio",20),this._modules.events.on(["removeNodes","removeEdges","clearGraph"],this._onGraphChanged).on(fY,(e,t)=>{this._onMove(yt(be({},e),{source:Mo(t)}))}).on(mY,({domEvent:e,x:t,y:n,button:r="left"},i)=>{this._onDown({domEvent:e,x:t,y:n,button:r,source:Mo(i)})}).on(pY,({domEvent:e,x:t,y:n,button:r="left"},i)=>{this._onUp({domEvent:e,x:t,y:n,button:r,source:Mo(i)})}).on(_Y,({domEvent:e,x:t,y:n,button:r="left"},i)=>{this._onClick({domEvent:e,x:t,y:n,button:r,source:Mo(i)})}).on(yY,({domEvent:e,x:t,y:n,button:r="left"},i)=>{this._onDoubleClick({domEvent:e,x:t,y:n,button:r,source:Mo(i)})}).on(vY,({domEvent:e,x:t,y:n,delta:r,dx:i,dy:s})=>this._onWheel({domEvent:e,x:t,y:n,delta:r,source:"mouse",dx:i,dy:s})).on("touchStartGesture",e=>this._modules.events.fire("gestureStart",e)).on("touchProgressGesture",e=>this._modules.events.fire("gestureProgress",e)).on("touchEndGesture",e=>this._modules.events.fire("gestureEnd",e)).on("documentMouseMove",({domEvent:e,x:t,y:n},r)=>{this._onDocumentMove({domEvent:e,x:t,y:n,source:Mo(r)})}).on("documentMouseUp",({domEvent:e,x:t,y:n,button:r="left"},i)=>{this._onDocumentUp({domEvent:e,x:t,y:n,source:Mo(i),button:r})})}triggerUnhover(){this._hover=!1,this._hoveredElt=null}triggerDetection(){this._detectElement(this._modules.position.x,this._modules.position.y,!1,!1),this._elt&&(this._hoveredElt=this._elt,this._hover=!0)}getPointedElement(){return this._hoveredElt}getDraggedElement(){return this._draggedElt}isAnyButtonPressed(){return this._buttons.left.isPressed||this._buttons.right.isPressed||this._buttons.middle.isPressed}isAnyButtonDragging(){return this._buttons.left.isDragging||this._buttons.right.isDragging||this._buttons.middle.isDragging}isButtonPressed(e){return this._buttons[e].isPressed}isLeftPressed(){return this.isButtonPressed("left")}getCursorPosition(){return{x:this._modules.position.x,y:this._modules.position.y}}getCursorInformation(){return{x:this._modules.position.x,y:this._modules.position.y,target:this._hoveredElt}}setDetectionEnabled(e){this._disabledCounter=Math.max(0,this._disabledCounter+(e?-1:1))}_resetCurrent(e,t){for(const n in this._buttons){const r=this._buttons[n];r.isDragging&&this._modules.events.fire("dragEnd",{domEvent:null,x:e,y:t,button:n,target:this._draggedElt}),r.isPressed=!1,r.isDragging=!1}this._hover&&this._hoveredElt&&this._modules.events.fire("mouseout",{domEvent:null,x:e,y:t,target:this._hoveredElt}),this._hover=!1,this._hoveredElt=null,this._draggedElt=null}_onMove({domEvent:e,x:t,y:n,source:r}){let{dx:i,dy:s}=this._setPointerPosition(t,n);this._modules.events.fire("mousemove",{domEvent:e,x:t,y:n,dx:i,dy:s,source:r});for(const o in this._buttons){const a=this._buttons[o];if(a.isPressed)if(a.isDragging){const l=this._getStoredDXY();i+=l.dx,s+=l.dy,this._modules.events.fire("dragProgress",{domEvent:e,x:t,y:n,dx:i,dy:s,button:o,source:r,target:this._draggedElt})}else a.isDragging=!0,this._hoveredElt&&this._hover&&(this._modules.events.fire("mouseout",{domEvent:e,x:t,y:n,source:r,target:this._hoveredElt}),this._hover=!1),this._draggedElt||(this._draggedElt=this._hoveredElt),this._storeDXY(i,s),this._modules.events.fire("dragStart",{domEvent:e,x:t,y:n,button:o,source:r,target:this._draggedElt})}e&&!this._modules.graphics.getDomElement().contains(e.target)||this._detectElement(t,n,!1,!1),this._elt!==this._hoveredElt&&(this._hoveredElt&&this._hover&&(this._hover=!0,this._modules.events.fire("mouseout",{domEvent:e,x:t,y:n,source:r,target:this._hoveredElt})),this._hoveredElt=this._elt,this._elt&&(this._hover=!0,this._modules.events.fire("mouseover",{domEvent:e,x:t,y:n,source:r,target:this._hoveredElt})))}_onDocumentMove({domEvent:e,x:t,y:n,source:r}){for(const i in this._buttons){const{isDragging:s}=this._buttons[i];if(s){const{dx:o,dy:a}=this._setPointerPosition(t,n);this._modules.events.fire("dragProgress",{domEvent:e,x:t,y:n,dx:o,dy:a,button:i,source:r,target:this._draggedElt})}}}_onDocumentUp({domEvent:e,x:t,y:n,source:r,button:i}){if(i!=null&&this._buttons[i].isDragging){this._modules.events.fire("dragEnd",{domEvent:e,x:t,y:n,button:i,source:r,target:this._draggedElt});const s=this._buttons[i];s.isDragging=!1,s.isPressed=!1,this.isAnyButtonDragging()||(this._draggedElt=null)}}_onDown({domEvent:e,x:t,y:n,button:r,source:i}){if(r==null)return;this._detectElement(t,n,!1,!1),this._elt!==this._hoveredElt&&this._resetCurrent(t,n);const s=this._buttons[r];this._hoveredElt=this._elt,s.isPressed=!0,this._elt&&e&&(e.stopPropagation(),e.preventDefault()),this._modules.events.fire("mousedown",{domEvent:e,x:t,y:n,button:r,source:i,target:this._hoveredElt})}_onDoubleClick({domEvent:e,x:t,y:n,button:r,source:i}){r!=null&&(dk(e,"doubleclick")||this._modules.events.fire("doubleclick",{domEvent:e,x:t,y:n,button:r,source:i,target:this._hoveredElt}))}_onUp({domEvent:e,x:t,y:n,button:r,source:i}){if(r==null)return;const s=this._buttons[r];s.isPressed&&(s.isDragging&&(this._modules.events.fire("dragEnd",{domEvent:e,x:t,y:n,button:r,source:i,target:this._draggedElt}),s.isDragging=!1,this.isAnyButtonDragging()||(this._draggedElt=null)),s.isPressed=!1,this._detectElement(t,n,!1,!1),this._modules.events.fire("mouseup",{domEvent:e,x:t,y:n,button:r,source:i,target:this._elt}),this.isAnyButtonPressed()||this._hover||i==="touch"||(this._hoveredElt=this._elt,this._hoveredElt&&(this._modules.events.fire("mouseover",{domEvent:e,x:t,y:n,source:i,target:this._hoveredElt}),this._hover=!0)))}_onClick({domEvent:e,x:t,y:n,button:r,source:i}){dk(e,"click")||this._modules.events.fire("click",{domEvent:e,x:t,y:n,button:r,source:i,target:this._hoveredElt})}_onWheel({domEvent:e,x:t,y:n,delta:r,source:i,dx:s,dy:o}){this._modules.position.x=t,this._modules.position.y=n,this._modules.events.fire("mousewheel",{domEvent:e,x:t,y:n,dx:s,dy:o,delta:r,source:i,target:this._hoveredElt})}_storeDXY(e,t){this._accDx=e,this._accDy=t}_getStoredDXY(){const e=this._accDx,t=this._accDy;return this._accDx=0,this._accDy=0,{dx:e,dy:t}}_setPointerPosition(e,t){const n=e-this._prevX,r=t-this._prevY;return this._modules.position.x=e,this._modules.position.y=t,this._prevX=e,this._prevY=t,this._accDx=0,this._accDy=0,{dx:n,dy:r}}_detectElement(e,t,n,r){this._elt=this.detectElementAt(e,t,n,r)}detectElementAt(e,t,n,r){if(this._disabledCounter!==0)return null;const i=this._modules.settings,s=i.get("detect.enableSpatialIndex"),o=i.get("detect.nodeErrorMargin")||0,a=i.get("detect.edgeErrorMargin")||0;let l=i.get("detect.nodes"),c=i.get("detect.edges");r&&(l=!0,c=!0);let d=null,u=[],h=[];if(!n&&s&&(l||c)){const m=i.get("detect.spatialIndexMarginRatio"),f=Math.max(o*m,a*m),y=this._modules.spatial.queryRawProjected(e-f,t-f,e+f,t+f);u=y.nodes,h=y.edges}let g=null,p=null;if(l&&(g=this._modules.graphics.detectNode(e,t,!!i.get("detect.nodeTexts"),!!i.get("detect.nodeBadges"),o,u)),c&&(h.length<xY||!g)&&(p=this._modules.graphics.detectEdge(e,t,!!i.get("detect.edgeTexts"),a,h)),g&&p){const m=this._modules.graphics.getAttributesManager().getFlexArrays();d=m.nodes.current.layer.get(g._index)>=m.edges.current.layer.get(p._index)?g:p}else g?d=g:p&&(d=p);return d}};function Mo(e){return e.indexOf("touch")===0?"touch":"mouse"}var w0=!1,ck={down:{trigger:"pointerdown",duplicate:"mousedown"},click:{trigger:"pointerdown",duplicate:"mouseup"},doubleclick:{trigger:"pointerdown",duplicate:"mouseup"}};function dk(e,t){if(e)return e.type===ck[t].trigger&&(w0=!0),e.type===ck[t].duplicate&&w0?(w0=!1,!0):void 0}var wY=class extends ct{constructor(){super(...arguments),this._dragged=null,this._start=[],this._end=[],this._shouldDrag=({target:e,button:t})=>{const n=t==="left",r=this._modules.settings.get("interactions.drag.enabled"),i=e!==null&&e.isNode&&e.getAttribute("draggable")===!0;return!!(n&&r&&i)},this._onDragStart=({x:e,y:t,target:n})=>{n&&(n.isSelected()?this._dragged=this._modules.selection.getSelectedNodes().filter(r=>r.getAttribute("draggable")):this._dragged=n.toList()),this._dragged&&(this._start=this._dragged.getPosition(),this._end=un(this._start),this._onBeforeDrag=this._modules.settings.get("interactions.drag.onBeforeDrag"),this._startDrag=this._modules.camera.screenToGraphCoordinates({x:e,y:t}),this._dragged.addClass(cg),this._modules.events.fire("nodesDragStart",{nodes:this._dragged}),this._modules.graphics.addCursorStyle(this._modules.settings.get("interactions.drag.cursor")))},this._onDrag=()=>{if(!this._dragged||!this._startDrag)return;const{x:e,y:t}=this._modules.captor.getCursorInformation(),n=this._dragged._indexes,r=this._modules.camera.screenToGraphCoordinates({x:e,y:t}),i=r.x-this._startDrag.x,s=r.y-this._startDrag.y;for(let o=0;o<n.length;++o){const a=this._start[o],l=this._end[o];l.x=a.x+i,l.y=a.y+s}this._onBeforeDrag&&this._onBeforeDrag(this._dragged,e,t,this._end),this._modules.settings.get("interactions.drag.applyResult")&&this._modules.individualAttributes.setMultipleAttributes(this._dragged,this._end),this._modules.events.fire("nodesDragProgress",{nodes:this._dragged,dx:i,dy:s})},this._onDragEnd=()=>{this._dragged&&(this._dragged.removeClass(cg),this._modules.graphics.removeCursorStyle(this._modules.settings.get("interactions.drag.cursor")),this._modules.events.fire("nodesDragEnd",{nodes:this._dragged,start:this._start,end:this._end}),this._dragged=null,this._start=[],this._end=[])}}onMounted(){this._modules.classes.createClass({name:cg,isBuiltin:!0,nodeAttributes:{layer:e6}}),this._modules.events.register(["nodesDragStart","nodesDragProgress","nodesDragEnd"]),this._modules.settings.register("interactions.drag.enabled",!0).register("interactions.drag.cursor","move").register("interactions.drag.onBeforeDrag",void 0),this._modules.settings.register("interactions.drag.applyResult",!0),this._modules.interactions.onDrag({priority:"drag",disableDetection:!0,check:this._shouldDrag,onStart:this._onDragStart,onProgress:this._onDrag,onStop:this._onDragEnd})}},EY={color:"#00C3FF",radius:4,cursorOnHover:"grab",cursorOnDrag:"grabbing"},SY=class extends ct{constructor(){super(...arguments),this._hoverHandle=!1,this._grabHandle=!1,this._x=0,this._y=0,this._enabled=!1,this._onMouseUp=()=>this._grabHandle=!1,this._onMouseDown=()=>{this._hoverHandle&&(this._grabHandle=!0)},this._onDragProgress=()=>{this._grabHandle&&this._refreshCanvas()},this._onDragStart=()=>{if(!this._movedEdges)return;this._nodesToHighlight=this._nodesToHighlight.filter(t=>t!==this._startNode&&!t.isVirtual()),this._movedEdges.setExcluded(!0);const e=this._options.cursorOnDrag;this._prevSettings=this._modules.settings.update({edgeHover:!1,cursor:{default:e,node:e,edge:e}})},this._onDragEnd=()=>{if(!this._movedEdges)return;this._restoreSettings();const e=this._getPointedNode();e&&this._movedEdges.forEach(t=>{t.getTarget()===this._startNode?t.setTarget(e):t.setSource(e)}),this._movedEdges.setExcluded(!1),this._movedEdges.setSelected(!0),this._movedEdges=null,this._refreshHandles()},this._refreshHandles=()=>{if(!this._enabled||this._movedEdges)return;const e=this._modules.selection.getSelectedEdges();this._nodesToHighlight=e.getExtremities().dedupe().filter(t=>!t.isVirtual()),this._rewirableClass.clearEdges(),this._rewirableClass.add(e),this._refreshCanvas()},this._shouldInteractionStart=({target:e})=>{if(!this._enabled||!e||!e.isNode||!this._hoverHandle||e.isVirtual())return!1;const t=e.getAdjacentEdges().filter(n=>n.isSelected());return!!t.size&&(this._movedEdges=t,this._edgeColors=this._movedEdges.getAttribute("color"),this._startNode=e,!0)},this._refreshCanvas=()=>{this._enabled&&this._layer.refresh()},this._checkForHover=()=>{if(!this._enabled||!this._nodesToHighlight)return;const e=this._options.radius,t=this._nodesToHighlight.getPosition(),n=this._modules.camera.screenToGraphCoordinates(this._modules.captor.getCursorPosition());for(let r=0;r<t.length;r++){const{x:i,y:s}=t[r];if(En(i,s,n.x,n.y)<e)return void this._enableCursorOnHover()}this._disableCursorOnHover()}}onMounted(){this._rewirableClass=this._modules.classes.createClass({name:RI,isBuiltin:!0,edgeAttributes:{layer:t6}})}enable(e){this._enabled||(this._modules.events.on("move",this._checkForHover).on("mousemove",this._checkForHover).on("dragProgress",this._onDragProgress).on("nodesDragProgress",this._refreshCanvas).on("mousedown",this._onMouseDown).on("mouseup",this._onMouseUp).on("edgesSelected",this._refreshHandles).on("edgesUnselected",this._refreshHandles),this._interaction=this._modules.interactions.onDrag({priority:"rewiring",check:this._shouldInteractionStart,onStart:this._onDragStart,onProgress:({x:t,y:n})=>{this._x=t,this._y=n},onStop:this._onDragEnd}),this._options=be(be({},EY),e),this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(t=>{if(!this._enabled||!this._nodesToHighlight)return;const n=this._modules.captor.getCursorPosition(),r=this._getPointedNode(),i=this._options.color,s=this._options.radius,o=2*s;if(this._displayMovedEdges(t),t.fillStyle=i,t.strokeStyle=i,this._nodesToHighlight.forEach(a=>{const{x:l,y:c}=a.getPosition();t.fillRect(l-s,c-s,o,o)}),this._movedEdges){const a=r?r.getPosition():n;t.fillRect(a.x-s,a.y-s,o,o)}},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._refreshHandles())}disable(){this._enabled&&(this._interaction&&this._interaction.stop&&this._interaction.stop(),this._interaction=void 0,this._modules.graphics.removeCursorStyle(this._options.cursorOnDrag),this._disableCursorOnHover(),this._restoreSettings(),this._layer.destroy(),this._rewirableClass.clearEdges(),this._enabled=!1,[this._checkForHover,this._onDragProgress,this._refreshCanvas,this._onMouseDown,this._onMouseUp,this._refreshHandles].forEach(e=>this._ogma.events.off(e)))}enabled(){return this._enabled}_restoreSettings(){this._prevSettings&&(this._modules.settings.update(this._prevSettings),this._prevSettings=void 0)}_disableCursorOnHover(){this._hoverHandle&&!this._grabHandle&&(this._hoverHandle=!1,this._modules.graphics.removeCursorStyle(this._options.cursorOnHover))}_enableCursorOnHover(){this._hoverHandle||(this._hoverHandle=!0,this._modules.graphics.addCursorStyle(this._options.cursorOnHover))}_displayMovedEdges(e){if(!this._movedEdges)return;const t=this._x,n=this._y,r=this._modules.camera.screenToGraphCoordinates({x:t,y:n});this._movedEdges.forEach((i,s)=>{const o=this._edgeColors[s],a=i.getSource(),l=i.getTarget(),c=this._getPointedNode(),d=l===this._startNode?a:l,u=Number(i.getAttribute("width")),h=d.getPosition(),g=c?c.getPosition():r;e.beginPath(),e.moveTo(h.x,h.y),e.lineTo(g.x,g.y),e.strokeStyle=o,e.lineWidth=u,e.stroke()})}_getPointedNode(){const e=this._modules.captor.getPointedElement();return e&&e.isNode&&!e.isVirtual()?e:null}},uk={cursor:"nesw-resize",color:"#00C3FF",lineWidth:1,handleSize:6,detectionMargin:5,snappingRatio:1.25,nbNodesToSnapTo:5,previewColor:"rgba(0, 0, 0, 0.2)",sizeIndicatorColor:"black",sizeIndicatorOffset:5,sizeIndicatorWidth:3,sizeIndicatorThickness:1},AY=class extends ct{constructor(){super(...arguments),this._enabled=!1,this._nodesToHighlight=null,this._cursorEnabled=!1,this._x=0,this._y=0,this._additionalRadiuses=[],this._onSelectionChange=()=>{this._enabled&&(this._nodesToHighlight=this._modules.selection.getSelectedNodes(),this._displayHandles())},this._displayHandlesHandler=()=>this._displayHandles(),this._moveHandler=({x:e,y:t})=>{this._modules.dom.setTimeout(()=>this._detectBoundingBoxes(e,t))}}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._modules.interactions.onDrag({priority:"resizing",disableDetection:!0,check:()=>!(!this._enabled||!this._pointedNode),onStart:({x:e,y:t})=>{this._x=e,this._y=t,this._nodeBeingResized=this._pointedNode},onProgress:({x:e,y:t})=>{this._x=e,this._y=t,this._displayHandles()},onStop:()=>{if(this._nodesToHighlight){const e=this._modules.camera.zoom,t=this._nodesToHighlight.getAttributes(["x","y","radius"]).map(({x:n,y:r,radius:i},s)=>{const o=this._additionalRadiuses[s]/e;return{radius:+i+o,x:n+o,y:r-o}});this._nodesToHighlight.setAttributes(t)}this._pointedNode=null,this._nodeBeingResized=null,this._displayHandles()}})}onReady(){this._modules.events.on(["nodesSelected","nodesUnselected"],this._onSelectionChange)}_enableCursor(){this._cursorEnabled||(this._modules.graphics.addCursorStyle(this._options.cursor),this._cursorEnabled=!0)}_disableCursor(){this._cursorEnabled&&(this._modules.graphics.removeCursorStyle(this._options.cursor),this._cursorEnabled=!1)}_detectBoundingBoxes(e,t){if(!this._enabled||this._nodeBeingResized||!this._nodesToHighlight)return;const n=this._options.handleSize/2,r=this._options.detectionMargin;return this._pointedNode=null,this._forEachNodeToHighlight((i,s,o)=>{const a=s.x+o-n-r,l=s.x+o+n+r,c=s.y-o-n-r,d=s.y-o+n+r;e>=a&&e<=l&&t>=c&&t<=d&&(this._pointedNode=i)}),this._pointedNode?this._enableCursor():this._disableCursor()}_forEachNodeToHighlight(e){this._nodesToHighlight&&this._nodesToHighlight.forEach(t=>{const n=t.getPositionOnScreen(),r=this._getTotalRadius(t);e(t,n,r)})}_displayHandles(){this._enabled&&this._nodesToHighlight&&this._layer.refresh()}_displayNodePreview(e,t,n,r,i,s){if(i*=1/this._modules.camera.getZoom(),e.beginPath(),s.length===1)e.arc(n,r,i,0,2*Math.PI);else for(let o=0;o<s.length;++o){const a=s[o],l=n+a.x*i,c=r+a.y*i;o===0?e.moveTo(l,c):e.lineTo(l,c)}e.fillStyle=this._options.previewColor,e.fill()}_getTotalRadius(e,t=!0){return Number(e.getAttribute("radius"))*(this._modules.camera.zoom*(t?1:0))+Number(e.getAttribute("innerStroke.width"))+Number(e.getAttribute("outerStroke.width"))+this._options.lineWidth/2}_snap(e,t,n){const r=this._modules.spatial.getNodesInScreenByDistance(t).filter(u=>!u.isSelected()).slice(0,this._options.nbNodesToSnapTo),i=this._getTotalRadius(t),s=i+n,o=this._options.snappingRatio,a=s/i,l=Math.round(EI(a,o));let c=i*Math.pow(o,l),d=null;if(r.forEach(u=>{const h=this._getTotalRadius(u);Math.abs(h-s)<=Math.abs(c-s)&&(c=h,d=u)}),d){e.save(),e.strokeStyle=this._options.sizeIndicatorColor,e.lineWidth=this._options.sizeIndicatorThickness/this._modules.camera.getZoom();const u=d.getAttribute("radius");this._displaySizeIndicator(e,t,c),r.filter(h=>h.getAttribute("radius")===u).forEach(h=>this._displaySizeIndicator(e,h)),e.restore()}return c-i}_displaySizeIndicator(e,t,n){n=n||void 0;const r=this._modules.camera.getZoom(),i=t.getPosition(),s=this._getTotalRadius(t),o=(n||s)/r,a=(n?n-s:0)/r,l=a+(-this._options.sizeIndicatorOffset-(n?Number(t.getAttribute("innerStroke.width"))+Number(t.getAttribute("outerStroke.width")):0))/r,c=i.x-o+l|0,d=i.y-o-a|0,u=i.y+o-a|0,h=this._options.sizeIndicatorWidth/r;e.beginPath(),e.moveTo(c-h,d),e.lineTo(c+h,d),e.moveTo(c,d),e.lineTo(c,u),e.moveTo(c-h,u),e.lineTo(c+h,u),e.stroke()}enable(e={}){this._enabled||(this._options=be(be({},uk),e),this._layer=this._modules.layers.addCanvasLayer(t=>{const n=zr(),r=this._modules.camera.getZoom(),{color:i,lineWidth:s}=this._options;let o=this._options.handleSize,a=0;if(this._nodeBeingResized){const l=this._getTotalRadius(this._nodeBeingResized),c=this._nodeBeingResized.getPositionOnScreen();a=Math.max(this._x-(c.x+l),-(this._y-(c.y-l)))/2}this._additionalRadiuses=[],this._nodesToHighlight&&this._nodesToHighlight.forEach(l=>{const c=l.getPosition();let d=this._getTotalRadius(l),u=0;if(this._nodeBeingResized){u=a;const h=-d+Number(l.getAttribute("innerStroke.width"))+Number(l.getAttribute("outerStroke.width"))+s/2+1;u=u<h?h:this._snap(t,l,u),this._additionalRadiuses.push(u);const g=l.getAttribute("shape"),p=this._engine.getShapePoints(g),m=c.x+u/r,f=c.y-u/r,y=d+u;this._displayNodePreview(t,n,m,f,y,p)}t.strokeStyle=i,t.fillStyle=i,t.lineWidth=s/r,d/=r,u/=r,o/=r*n,t.strokeRect(c.x-d,c.y-d-2*u,2*(u+d),2*(u+d)),t.fillRect(c.x+d+2*u-o/2,c.y-d-2*u-o/2,o,o)})},{isStatic:!1,noClear:!1}),this._layer.moveToTop(),this._modules.events.on(["mousemove","mousedown"],this._moveHandler),this._enabled=!0)}disable(){this._enabled&&(this._modules.events.off(this._displayHandlesHandler),this._modules.events.off(this._moveHandler),this._layer.destroy(),this._disableCursor(),this._reset())}_reset(){this._enabled=!1,this._nodesToHighlight=null,this._options=be({},uk),this._nodeBeingResized=null,this._pointedNode=null,this._cursorEnabled=!1,this._x=0,this._y=0,this._additionalRadiuses=[]}enabled(){return this._enabled}},kY={strokeColor:"black",strokeWidth:5,dashed:!0,cursorStyle:"cell",createNodes:!0,condition:Ix,onNodeCreated:wt,onEdgeCreated:wt,createNode:Mi,createEdge:Mi,onComplete:wt},CY=class extends ct{constructor(){super(...arguments),this._enabled=!1,this._blockId=0,this._cursorEnabled=!1}onMounted(){this._engine=this._modules.graphics.getGraphicsEngine(),this._group=this._engine.createGroup(),this._depth=Yd(0).edgeBody,this._modules.events.register(["connectNodes"]),this._interaction=this._modules.interactions.onDrag({priority:"connectNodes",check:({target:e,button:t="left"})=>this._enabled&&t==="left"&&e&&e.isNode&&!e.isVirtual(),onStart:({target:e})=>this._onStart(e),onProgress:({x:e,y:t})=>this._onMove(e,t),onStop:()=>this._onStop()}),this._modules.events.on("clearGraph",()=>this.disable())}_onStart(e){e&&(this._cursorEnabled=!0,this._startNode=e,this._startPos=e.getPosition(),this._modules.graphics.addCursorStyle(this._options.cursorStyle),this._blockId=this._modules.graphics.allocateGraphicsEngineBlockId())}_onMove(e,t){this._startNode!==null&&(this._endPos=this._modules.camera.screenToGraphCoordinates({x:e,y:t}),this._drawLine())}_onStop(){if(this._startNode===null)return;const{condition:e,onNodeCreated:t,onEdgeCreated:n,createEdge:r,createNode:i,onComplete:s,createNodes:o}=this._options;let a=this._modules.captor.getPointedElement(),l=null,c=null;if(this._modules.graphics.releaseGraphicsEngineBlockId(this._blockId),!a&&o){const d=i({attributes:{x:this._endPos.x,y:this._endPos.y}});a=this._modules.graph.addNode(d),c=a,t&&t(c)}if(a&&!a.isVirtual()&&(c||!e||e(this._startNode,a))){const d=r({source:this._startNode.getId(),target:a.getId()});l=this._modules.graph.addEdge(d),n&&n(l)}s&&(this._modules.events.fire("connectNodes",{source:this._startNode,target:a,edge:l}),s(this._startNode,a,l||void 0)),this.disable()}_drawLine(){this._group.reset(Ni,!1,this._depth);const e=this._group.nextAndReset().end;e.pieceId=Cm,e.shape="line",e.x1=this._startPos.x,e.y1=this._startPos.y,e.x2=this._endPos.x,e.y2=this._endPos.y,e.fillColor=this._options.strokeColor,e.thicknessOrFontSizeFixed=this._options.strokeWidth,this._options.dashed&&(e.dashLength=3,e.gapLength=1),this._engine.storeGroup(this._blockId,this._group),this._modules.dom.refresh()}enable(e={}){return this._enabled||(this._options=be(be({},kY),e),this._enabled=!0,this._cursorEnabled=!1,this._startNode=null,this._prevSettings=this._modules.settings.update({"cursor.node":this._options.cursorStyle,"detect.edges":!1}),this._modules.captor.isLeftPressed()&&this._interaction.start(this._modules.captor.getCursorInformation())),this}disable(){return this._enabled?(this._enabled=!1,this._modules.settings.update(this._prevSettings),this._cursorEnabled&&this._modules.graphics.removeCursorStyle(this._options.cursorStyle),this):this}enabled(){return this._enabled}},TY=["top","bottom","left","right","cssDefined"],NY=1e4,LY={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}},IY={position:"top",autoAdjust:!0,delay:100},PY={hover:{node:({target:e})=>e&&e.isNode,edge:({target:e})=>e&&!e.isNode},click:{left:{node:({target:e,button:t})=>t==="left"&&e&&e.isNode,edge:({target:e,button:t})=>t==="left"&&e&&!e.isNode,background:({target:e,button:t})=>t==="left"&&!e},right:{node:({target:e,button:t})=>t==="right"&&e&&e.isNode,edge:({target:e,button:t})=>t==="right"&&e&&!e.isNode,background:({target:e,button:t})=>t==="right"&&!e}},doubleclick:{left:{node:({target:e,button:t})=>t==="left"&&e&&e.isNode,edge:({target:e,button:t})=>t==="left"&&e&&!e.isNode,background:({target:e,button:t})=>t==="left"&&!e},right:{node:({target:e,button:t})=>t==="right"&&e&&e.isNode,edge:({target:e,button:t})=>t==="right"&&e&&!e.isNode,background:({target:e,button:t})=>t==="right"&&!e}}},MY=class extends ct{constructor(){super(...arguments),this._x=0,this._y=0}onMounted(){this._handlers={},this._currentHandlerName=null,this._tooltip=null,this._isHover=!1,this._modules.events.register(["tooltipShow","tooltipHide"]),this._modules.events.on(["mouseup","dragStart"],()=>{this._isHover||this._hideTooltip(!1)}).on("mouseout",()=>{this._isHover&&this._hideTooltip(!1)}).on("clearGraph",()=>this._hideTooltip(!1)),this._modules.interactions.onHover(this._createInteraction("hover",!0)),this._modules.interactions.onClick(this._createInteraction("click")),this._modules.interactions.onDoubleClick(this._createInteraction("doubleclick"))}hide(){this._hideTooltip(!0)}isShown(){return!!this._tooltip}refresh(){this._refreshTooltip()}show(t,{position:n="top",autoAdjust:r=!0,className:i,x:s=0,y:o=0}={}){this._showTooltip(t,{position:n,autoAdjust:r,className:i},{x:s,y:o})}setHandler(t,n,r){const i=be(be({},IY),r);i.position&&TY.indexOf(i.position)===-1&&(i.position="top"),this._handlers[t]={handler:n,condition:ln(PY,t),settings:i}}_hideTooltip(t){if(this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null),t&&(this._currentHandlerName=null),this._tooltip){const n=this._tooltip;this._tooltip.parentNode&&this._tooltip.parentNode.removeChild(this._tooltip),this._tooltip=null,this._modules.events.fire("tooltipHide",{tooltip:n})}}_createInteraction(t,n=!1){return{priority:"tooltip",check:r=>{const i=hk(t,r),s=this._handlers[i];return(!n||!this._modules.connectNodes.enabled())&&(!(!s||!s.condition(r))||!(n||!this._currentHandlerName||this._isHover)&&this._tooltip!==null)},handler:r=>{const{target:i,x:s,y:o}=r;this._hideTooltip(!1),this._isHover=n,this._elt=i,this._x=s,this._y=o,this._currentHandlerName=hk(t,r),this._refreshTooltip()}}}_refreshTooltip(){if(!this._currentHandlerName)return void this._hideTooltip(!1);const t=this._handlers[this._currentHandlerName];if(!t)return;const{settings:n,handler:r}=t,i=this._elt;if(i){const o=i.isNode?"node":"edge";if(this._currentHandlerName.indexOf(o)===-1)return}const s=r(i);Promise.resolve(s).then(o=>{this._schedule(()=>this._showTooltip(o,n),n.delay)})}_schedule(t,n){this._timeout&&this._modules.dom.clearTimeout(this._timeout),this._timeout=this._modules.dom.setTimeout(()=>{this._timeout=null,t()},n)}_showTooltip(t,n,r){this._hideTooltip(!1);const{position:i,className:s,autoAdjust:o}=n;let a=this._x,l=this._y,c=this._elt;const d=this._modules.dom.getDimensions();let u=0,h=0;if(r&&(a=r.x,l=r.y,c=null),typeof t=="string")this._tooltip=FY("div"),this._tooltip.innerHTML=t;else{if(!QL(t))throw new Error(`invalid tooltip ${t}, expected HTML string or HTML element`);this._tooltip=t}const g=this._tooltip;if(s&&this._tooltip.classList.add(s),i!=="cssDefined"&&(g.style.position="absolute"),g.style.zIndex=NY.toString(),this._modules.dom.appendElement(g),c&&c.isNode){const f=c,y=f.getPositionOnScreen(),_=Number(f.getAttribute("radius"))*(f.getAttribute("scalingMethod")==="fixed"?1:this._modules.camera.getZoom())+Number(f.getAttribute("innerStroke.width"))+Number(f.getAttribute("outerStroke.width"));a=y.x,l=y.y,u=_,h=_}const p=g.offsetWidth/2,m=g.offsetHeight/2;if(u+=p,h+=m,i&&i!=="cssDefined"){const f=LY[i];let y=f.x,_=f.y;if(o){const v=a+u*f.x,x=l+h*f.y;(v-p<0||v+p>=d.width)&&(i==="left"||i==="right"?y*=-1:y=v-p<0?(p-v+1)/u:(d.width-(v+p)-1)/u),(x-m<0||x+m>=d.height)&&(i==="top"||i==="bottom"?_*=-1:_=x-m<0?(m-x+1)/h:(d.height-(x+m)-1)/h)}g.style.left=a+u*y-p+"px",g.style.top=l+h*_-m+"px"}this._modules.events.fire("tooltipShow",{tooltip:g})}};function hk(e,{button:t,target:n}){return`${e}${t?`.${t}`:""}.${n!==null?n.isNode?"node":"edge":"background"}`}function FY(e){return Ts?document.createElement(e):ep()}var md={65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",13:"enter",16:"shift",17:"ctrl",18:"alt",27:"esc",46:"del",8:"backspace",32:"space",224:"cmd",91:"cmd",92:"cmd",93:"cmd",187:"+",189:"-"},gk=Object.keys(md).reduce((e,t)=>{const n=md[t];return e[n]||(e[n]=[]),e[n].push(t),e},{}),RY=class extends ct{constructor(){super(...arguments),this._onBlur=()=>this.resetKeys(),this._onKeyUp=e=>{const t=e.keyCode||e.which;this._pressed[t]=!1,this._modules.events.fire("keyup",{domEvent:e,key:md[t],code:t})},this._onKeyDown=e=>{const t=e.keyCode||e.which,n=this._binds[t];if(!this._pressed[t]){if(this._pressed[t]=!0,n)for(const r of n)r.keys.every(i=>i.some(s=>this._pressed[s]))&&r.handler({domEvent:e});this._modules.events.fire("keydown",{domEvent:e,key:md[t],code:t})}}}onMounted(){this._modules.events.register(["keyup","keydown"]),this._binds=[],this._pressed=[],this._modules.dom.addWindowEventListener("keydown",this._onKeyDown).addWindowEventListener("keyup",this._onKeyUp).addWindowEventListener("visibilitychange",this._onBlur).addWindowEventListener("blur",this._onBlur,!1),this._idleTimeout=4e3,this._prevEventTimeStamp=ir(),this._modules.events.onAnyEvent(()=>{const e=ir();e-this._prevEventTimeStamp>this._idleTimeout&&this.resetKeys(),this._prevEventTimeStamp=e})}setIdleTimeout(e){if(!isFinite(e)||e<=1)throw new TypeError("Idle timeout must be a positive number > 1");this._idleTimeout=e}resetKeys(){for(let e=0;e<this._pressed.length;e++)this._pressed[e]&&(this._pressed[e]=!1,this._modules.events.fire("keyup",{key:md[e],code:e}))}onKeyPress(e,t){let n=[];if(typeof e=="number")n=[e];else if(typeof e=="string")n=e.split(" ");else{if(!Array.isArray(e))throw new TypeError(`${e} is not a number, string or array`);n=e}if(n.length===0)throw new Error("the array should contain at least one element");const r=n.map(o=>{if(typeof o=="number")return[o];if(typeof o=="string"){const a=gk[o];if(!a)throw new Error(`${o} is not a valid key identifier`);return a}throw new TypeError(`${o} is not a valid key identifier`)}),i=r.pop(),s={keys:r,handler:t};i&&i.forEach(o=>{this._binds[o]||(this._binds[o]=[]),this._binds[o].push(s)})}isPressed(e){if(typeof e=="number")return this._pressed[e];if(typeof e=="string"){const t=gk[e];if(t)return t.some(n=>this._pressed[n])}return!1}},DY=[{name:"color",isNode:!0},{name:"shape",isNode:!0},{name:"radius",isNode:!0},{name:"icon.content",isNode:!0},{name:"image.url",isNode:!0},{name:"image",isNode:!0},{name:"color",isNode:!1},{name:"shape",isNode:!1},{name:"width",isNode:!1}],Fs=Math.PI,Rs=2*Math.PI,KF=Math.cos(Fs/2-Rs/5),eR=Math.cos(Fs/2-Rs/5*2),tR=Math.cos(Fs/2-Rs/5*3),nR=Math.cos(Fs/2-Rs/5*4),rR=Math.sin(-Fs/2+Rs/5),iR=Math.sin(-Fs/2+Rs/5*2),sR=Math.sin(-Fs/2+Rs/5*3),oR=Math.sin(-Fs/2+Rs/5*4),Ap=1.6,aR=3,zY=.9,Dh=.31,E0=1/3,OY=[8,3],BY=[3,3],zh={position:"bottom",widgetWidth:130,fontFamily:"Arial",fontSize:10,fontColor:"black",titleFontSize:12,titleFontColor:"black",titleMaxLength:20,titleTextAlign:"left",shapeColor:"grey",backgroundColor:"white",borderColor:"black",borderRadius:0,borderWidth:1,innerMargin:10,outerMargin:5,circleStrokeWidth:3,titleFunction:e=>e[e.length-1]},jY=["widgetWidth","fontSize","titleFontSize","borderRadius","borderWidth","innerMargin","outerMargin","circleStrokeWidth"];function lR(e){return Array.isArray(e)?e.reduce((t,n)=>t&&lR(n),!0):e==="undefined"||!isNaN(Number(e))}function cR(e){return Array.isArray(e)?e.reduce((t,n)=>Math.min(t,cR(n)),1/0):typeof(e=Number(e))=="number"?isNaN(e)?1/0:+e:1/0}function dR(e){return Array.isArray(e)?e.reduce((t,n)=>Math.max(t,dR(n)),-1/0):typeof(e=Number(e))=="number"?isNaN(e)?-1/0:+e:-1/0}function ws(e){const t=["K","M","B","T","P","E","Z","Y"];if(e>9999){let n=0;for(;n<t.length&&e>999;)e/=1e3,n++;return(pk(e,3)+t[n-1]).toString()}return pk(e,4).toString()}function pk(e,t=3){const n=t===4?10:1;return e<10?Math.round(100*e*n)/(100*n):e<100?Math.round(10*e*n)/(10*n):e<1e3?Math.round(e*n)/n:Math.round(e)}function uR(e){return e.innerMargin+(e.titleFontSize+e.fontSize)*Ap}var UY=(e,t)=>e.isNode!==t.isNode?e.isNode?-1:1:e.title<=t.title?-1:1,$Y=(e,t)=>e.height-t.height,GY=(e,t)=>e.isNode!==t.isNode?e.isNode?-1:1:t.height-e.height,VY=(e,t)=>e.isNode!==t.isNode?e.isNode?-1:1:e.content[0].title<=t.content[0].title?-1:1;function HY(e,t,n){const r=t.getContext("2d"),{x:i,y:s,height:o,isNode:a,styleProperty:l,title:c,mapping:d,iconFont:u,iconFontStyle:h}=n;YY(r,e,i,s,o),qY(r,e,c,i,s);const g=e.fontSize*Ap,p=e.fontSize/2*Ap*zY,m=e.fontSize*aR,f=e.fontSize,y=XY(e,a);let _=s+uR(e);const v=i+e.innerMargin+y/2,x=i+2*e.innerMargin+y,b=od(d),w=lR(b),S=e.fontColor,A=e.shapeColor,C=Object.keys(d);if(w&&(C.sort((k,T)=>ms(d[T])-ms(d[k])),l==="radius"||l==="width")){const k=cR(b),T=dR(b);return(a?dq:uq)(e,r,i,_,k,(k+T)/2,T,A)}C.forEach(k=>{const T=d[k];l==="color"&&(a?hR(r,v,_,p,k):JY(r,v,_,m,f,k)),l==="shape"&&(a?iq(r,v,_,p,k,A):lq(r,v,_,m,f,k,A)),l==="icon.content"&&QY(r,v,_,k,u,p,S,h),l!=="image"&&l!=="image.url"||KY(r,v,_,p,k),ZY(r,e,x,_,T,w),_+=g})}function WY(e,t,n,r,i,s){e.beginPath(),e.arc(t,n,r,0,Rs),e.strokeStyle=i,e.lineWidth=s,e.stroke()}function Au(e,t,n,r,i="left",s="normal"){e.textAlign=i,e.textBaseline="middle",e.fillStyle=r,e.font=`${s} ${n}px "${t}"`}function XY(e,t){const n=t?1:aR;return e.fontSize*n}function YY(e,t,n,r,i){return cq(e,n,r,t.widgetWidth,i,t.borderRadius,t.backgroundColor,t.borderColor,t.borderWidth)}function qY(e,t,n,r,i){Au(e,t.fontFamily,t.titleFontSize,t.titleFontColor,t.titleTextAlign);const s=t.titleTextAlign==="center",o=t.widgetWidth-2*t.innerMargin,a=e.measureText(n).width,l=r+(s?t.widgetWidth/2:t.innerMargin),c=i+t.titleFontSize/2+t.innerMargin;if(a>o){const d=o/a,u=(n.length*d|0)-2;n=n.substr(0,u)+"…"}e.fillText(n,l,c)}function ZY(e,t,n,r,i,s){let o=i.join();if(s)if(i.length===1)o=ws(i[0]);else{const a=ms(i),l=al(i);o=`${ws(a)} - ${ws(l)}`}Au(e,t.fontFamily,t.fontSize,t.fontColor),e.fillText(o,n,r)}function hR(e,t,n,r,i){e.beginPath(),e.arc(t,n,r,0,2*Fs),e.fillStyle=i,e.fill()}function JY(e,t,n,r,i,s){e.fillStyle=s,e.fillRect(t-r/2,n-i/2,r,i)}function QY(e,t,n,r,i,s,o,a){Au(e,i,2*s,o,"center",a),e.fillText(r,t,n)}function KY(e,t,n,r,i){if(typeof Image>"u")return;e._imgStore||(e._imgStore={});let s=e._imgStore[i];if(s)return e.drawImage(s,t-r,n-r,2*r,2*r);s=new Image,s.src=i,s.onload=()=>{e.drawImage(s,t-r,n-r,2*r,2*r)},e._imgStore[i]=s}function eq(e,t,n,r){e.fillRect(t-r,n-r*Dh,2*r,2*r*Dh),e.fillRect(t-r*Dh,n-r,2*r*Dh,2*r)}function tq(e,t,n,r){return e.beginPath(),e.moveTo(t-r,n),e.lineTo(t,n-r),e.lineTo(t+r,n),e.lineTo(t,n+r),e.fill()}function nq(e,t,n,r){e.beginPath(),e.moveTo(t,n-r),e.lineTo(t+KF*r,n+rR*r),e.lineTo(t+eR*r,n+iR*r),e.lineTo(t+tR*r,n+sR*r),e.lineTo(t+nR*r,n+oR*r),e.fill()}function rq(e,t,n,r){e.beginPath(),e.moveTo(t,n-r),e.lineTo(t+eR*r,n+iR*r),e.lineTo(t+nR*r,n+oR*r),e.lineTo(t+KF*r,n+rR*r),e.lineTo(t+tR*r,n+sR*r),e.fill()}function iq(e,t,n,r,i,s){switch(e.fillStyle=s,i){case"square":return e.fillRect(t-r,n-r,2*r,2*r);case"circle":return hR(e,t,n,r,s);case"cross":return eq(e,t,n,r);case"diamond":return tq(e,t,n,r);case"equilateral":return nq(e,t,n,r);case"star":return rq(e,t,n,r)}}function sq(e,t,n,r,i){e.fillRect(t-r/2,n-i/4,r*(1-E0),i/2),e.beginPath(),e.moveTo(t+r*(1-E0-.5),n-i/2),e.lineTo(t+r*(1-E0-.5),n+i/2),e.lineTo(t+r/2,n),e.fill()}function oq(e,t,n,r,i,s,o){e.beginPath(),e.moveTo(t-r/2,n),e.lineTo(t+r/2,n),e.strokeStyle=s,e.lineWidth=i/2,e.setLineDash(o==="dashed"?OY:BY),e.stroke()}function aq(e,t,n,r,i){e.beginPath(),e.moveTo(t-r/2,n-i/2),e.lineTo(t-r/2,n+i/2),e.lineTo(t+r/2,n),e.fill()}function lq(e,t,n,r,i,s,o){return e.fillStyle=o,s==="line"&&e.fillRect(t-r/2,n-i/4,r,i/2),s==="arrow"?sq(e,t,n,r,i):s==="dashed"||s==="dotted"?oq(e,t,n,r,i,o,s):s==="tapered"?aq(e,t,n,r,i):void 0}function cq(e,t,n,r,i,s,o,a,l){e.setLineDash([]),e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+r-s,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadraticCurveTo(t+r,n+i,t+r-s,n+i),e.lineTo(t+s,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+s,n),e.closePath(),e.fillStyle=o,e.fill(),e.strokeStyle=a,e.lineWidth=l,e.stroke()}function dq(e,t,n,r,i,s,o,a){const l=.7*e.fontSize,c=3*l,d=(l+c)/2,u=n+e.innerMargin+c,h=u+c+e.innerMargin,g=r+2*c-.5*e.innerMargin,p=e.circleStrokeWidth;for(const m of[l,d,c])WY(t,u,g-m,m,a,p);Au(t,e.fontFamily,e.fontSize,e.fontColor,"left"),t.fillText(ws(i),h,g+l-2*l),t.fillText(ws(s),h,g+l-2*d),t.fillText(ws(o),h,g+l-2*c)}function uq(e,t,n,r,i,s,o,a){const l=(e.widgetWidth-2*e.innerMargin)/3,c=e.fontSize,d=r-e.innerMargin/2,u=d+2*c,h=n+e.innerMargin;t.fillStyle=a,t.fillRect(h,d-c/2,l+1,c),t.fillRect(h+l,d-c/3,l+1,c/1.5),t.fillRect(h+2*l,d-c/6,l,c/3),Au(t,e.fontFamily,e.fontSize,e.fontColor,"center"),t.fillText(ws(o),h+.5*l,u),t.fillText(ws(s),h+1.5*l,u),t.fillText(ws(i),h+2.5*l,u)}function hq(e,t,n,r){const i=r.outerMargin+uR(r),s=r.fontSize*Ap,o=i-.8*r.innerMargin;return t==="radius"||t==="width"?o+s*(n?3:2):o+Object.keys(e).length*s}function gq(e,t,n){const r={width:t.width,height:t.height};let i=!1;return!!(r.width&&r.height&&n)&&(i=e.position==="top"||e.position==="bottom"?_q(r,e,n,e.position==="bottom"):pq(r,e,n,e.position==="left"),i&&n.forEach(s=>HY(e,t,s)),i)}function pq(e,t,n,r){const i=t.widgetWidth+t.outerMargin,s=Math.floor((e.width-t.outerMargin)/i),o=e.height;let a=t.outerMargin,l=r?t.outerMargin:e.width-i,c=1;n=n.slice().sort(UY);for(let d=0;d<n.length;++d){const u=n[d];if(a+u.height>o){if(a===t.outerMargin)return!1;a=t.outerMargin,c+=1,r?l+=i:l-=i}u.x=l,u.y=a,a+=u.height}return c<=s}function mq(e,t,n){let r=null;for(let i=0;i<t.length;++i){const s=t[i];s.isNode!==e.isNode&&t.length!==1||!(r===null||s.height<t[r].height)||(r=i)}if(r!=null){const i=t[r];i.content.push(e),i.height+=e.height+n.outerMargin}}function fq(e){let t=0;for(let n=1;n<e.length;++n)e[n].height>e[t].height&&(t=n);return t}function _q(e,t,n,r){n=n.slice();const i=t.widgetWidth+t.outerMargin,s=Math.floor((e.width-t.outerMargin)/i),o=e.height-t.outerMargin,a=new Array(Math.min(s,n.length)),l=n.length;let c=0,d=0,u=0,h=0;for(let v=0;v<l;++v){const x=n[v];x.isNode?(c+=1,d+=x.height):(u+=1,h+=x.height)}const g=d+h,p=d/g,m=h/g;let f=Math.round(p*s);const y=Math.round(m*s);if(f>c?f=c:y>u&&(f=s-u),s===0)return!1;for(let v=0;v<a.length;v++)a[v]={content:[],height:0,isNode:v<f};for(let v=0;v<l;++v){const x=fq(n);mq(n[x],a,t),n.splice(x,1)}a.every(({content:v})=>v.length===1)?a.sort(VY):a.sort(GY);let _=t.outerMargin;for(let v=0;v<a.length;++v){const x=a[v];if(x.height>o)return!1;x.content.sort($Y);let b=0;for(let w=0;w<x.content.length;++w){const S=x.content[w];S.x=_,S.y=r?e.height-b-S.height-t.outerMargin:b+t.outerMargin,b+=S.height+t.outerMargin}_+=i}return!0}var yq=class extends ct{constructor(){super(...arguments),this._enabled=!1,this._mustRefresh=!1,this._promises=[]}onMounted(){this._modules.events.on("frame",()=>{this._enabled&&this._mustRefresh&&this._layer.refresh()}).on(["resize","reloadFonts"],()=>{this._mustRefresh=!0})}enable(e={}){const t=this._settings;return this._settings=be(be({},zh),e),this._mustRefresh=!this._enabled||!this._sameOptions(t,this._settings),this._enabled?Promise.resolve():(this._enabled=!0,this._layer=this._modules.layers.addCanvasLayer(n=>{this._drawOnCanvas(this._settings,n.canvas,zr());const r=this._promises;this._promises=[],r.forEach(i=>i()),this._mustRefresh=!1},{isStatic:!0,noClear:!1}),this._layer.moveToTop(),this.refresh())}_afterNextUpdate(){return new Promise(e=>this._promises.push(e))}_formatSettings(e,t){const n=be(be({},zh),e);return jY.forEach(r=>n[r]*=t),n}disable(){return this._enabled&&(this._enabled=!1,this._layer.destroy()),Promise.resolve()}enabled(){return this._enabled}refresh(){return this._mustRefresh=!0,this._modules.dom.refresh(),this._afterNextUpdate()}destroy(){this._enabled=!1,this._mustRefresh=!1,this._settings=be({},zh),this._promises=[]}getOptions(){return this._enabled?be({},this._settings):be({},zh)}getCurrentOptions(){return this._settings}_sameOptions(e,t){return e===t||Object.keys(e).reduce((n,r)=>n&&e[r]===t[r],!0)}_drawOnCanvas(e,t,n){const r=this._formatSettings(e,n);gq(r,t,this._computeWidgetList(r))}exportOnCanvas(e,t,n){return this._drawOnCanvas(t,e,n)}export(e={}){const{width:t,height:n}=be(be({},this._modules.camera.getSize()),e),r=zr(),i=Wn(t*r,n*r);return this._drawOnCanvas(e,i,r),Promise.resolve().then(()=>i)}_computeWidgetList(e){const t=[];return DY.forEach(({name:n,isNode:r})=>{const i=this._computeWidget(e,n,r);i&&t.push(i)}),t}_computeWidget(e,t,n){const r=this._computePropertyMapping(e,t,n);if(r){if(t!=="icon.content")return r;const i=this._getRulesForAttribute(n,"icon.font"),s=this._getRulesForAttribute(n,"icon.style");let o=null,a=null;if(i.length||(o="Arial",a="normal"),typeof i[0]=="string"&&(o=i[0],a=s[0]),o&&a)return r.iconFont=o,r.iconFontStyle=a,r}return null}_computePropertyMapping(e,t,n){const[r]=this._getRulesForAttribute(n,t),i=r&&r.mapping,s=i&&i.getValues(n);if(i&&s){const o=i.getField(),a={};return Ji(s,(l,c)=>{l!==void 0&&c!=="undefined"&&(a[l]=a[l]||[],a[l].push(c))}),Object.keys(a).length===0?null:{isNode:n,title:e.titleFunction(o,t),styleProperty:t,dataProperty:o,mapping:a,height:hq(a,t,n,e)}}return null}_getRulesForAttribute(e,t){return this._modules.styleRules.getRuleList().map(n=>{const r=n.getDefinition();return ln(e?r.nodeAttributes:r.edgeAttributes,t)}).filter(Mi).sort((n,r)=>n.mapping&&r.mapping?0:n.mapping?-1:1)}},mk={layer:BI,outerStroke:{color:cM,width:5},innerStroke:{minVisibleSize:0},text:{backgroundColor:dM,minVisibleSize:0}},vq={layer:BI,color:cM,text:{backgroundColor:dM,minVisibleSize:0}},fk={duration:150,easing:"quadradicOut"},xq=class extends ct{constructor(){super(...arguments),this._delay=16,this._manualTriggerDetection=!1,this._hovered=null,this._hoveredTextHidden=!1,this._onAnimate=({updatesPositions:e})=>{e&&this._hovered&&this._modules.graphics.isMoving(this._hovered)&&(this._manualTriggerDetection=!0,this._resetHover())},this._onBeforeNewFrame=()=>{if(this._manualTriggerDetection){this._manualTriggerDetection=!1,this._modules.captor.triggerDetection();const e=this._modules.captor.getPointedElement();e&&this._hover(e)}},this._onClear=()=>{this._hovered=null,this._timeout&&this._modules.dom.clearTimeout(this._timeout)},this._resetHover=()=>{this._hovered&&(this._unhover(this._hovered),this._modules.captor.triggerUnhover()),this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null)}}_setAnimationOptions(e){this._animationOptions={duration:(e==null?void 0:e.duration)!==void 0?e.duration:fk.duration,easing:(e==null?void 0:e.easing)!==void 0?e.easing:fk.easing},e==null||delete e.duration,e==null||delete e.easing}setRate(e){return this._delay=e,this}replaceNullColor(e,t){e&&ln(e,t)===null&&xs(e,t,this._modules.settings.get("backgroundColor"))}updateNodeAttributes(e,t){this._setAnimationOptions(e),this.replaceNullColor(e,"text.backgroundColor"),this._hoverClass.update({nodeAttributes:e,fullOverwrite:t}),this._hoverExtremityHighlightedClass.update({nodeAttributes:e,fullOverwrite:t}),this._updateExtremityHighlightLayer()}updateEdgeAttributes(e,t){this.replaceNullColor(e,"text.backgroundColor"),this.replaceNullColor(e,"text.secondary.backgroundColor"),this._setAnimationOptions(e),this._hoverClass.update({edgeAttributes:e,fullOverwrite:t}),this._updateExtremityHighlightLayer()}getHoverClassDefinition(){return this._hoverClass.getDefinition()}onMounted(){this._registerSettings(),this._setAnimationOptions(null),this._hoverExtremityHighlightedClass=this._modules.classes.createClass({name:ly,isBuiltin:!0,nodeAttributes:mk}),this._hoverClass=this._modules.classes.createClass({name:ld,isBuiltin:!0,nodeAttributes:mk,edgeAttributes:vq}),this._modules.events.on("mouseover",({target:e})=>e&&this._hover(e)).on("mouseout",({target:e})=>e&&this._unhover(e)).on("animate",this._onAnimate).on("beforeNewFrame",this._onBeforeNewFrame).on("mouseout",this._resetHover).on("clearGraph",this._onClear)}_registerSettings(){this._modules.settings.register("cursor.node","pointer",(e,t)=>{this._hovered&&this._hovered.isNode&&(this._modules.graphics.removeCursorStyle(t),this._modules.graphics.addCursorStyle(e))}),this._modules.settings.register("cursor.edge","pointer",(e,t)=>{this._hovered&&!this._hovered.isNode&&(this._modules.graphics.removeCursorStyle(t),this._modules.graphics.addCursorStyle(e))}),this._modules.settings.register("nodeHover",!0,e=>{!e&&this._hovered&&this._hovered.isNode&&this._unhover(this._hovered)}),this._modules.settings.register("edgeHover",!0,e=>{e||!this._hovered||this._hovered.isNode||this._unhover(this._hovered)})}_updateExtremityHighlightLayer(){const e=this._hoverClass.getDefinition().edgeAttributes,t=e?e.layer:void 0;this._hoverExtremityHighlightedClass.update({nodeAttributes:{layer:t},fullOverwrite:!1})}_removeTimeout(){this._timeout&&(this._modules.dom.clearTimeout(this._timeout),this._timeout=null)}_hover(e){const t=e.isNode?"nodeHover":"edgeHover";this._modules.settings.get(t)&&e&&(this._removeTimeout(),this._timeout=this._modules.dom.setTimeout(()=>{this._setElementHighlight(!0,e),this._timeout=null},this._delay))}_unhover(e){this._removeTimeout(),this._hovered===e&&(this._setElementHighlight(!1,e),this._hoverExtremityHighlightedClass.clearNodes(),this._hovered=null)}_setElementHighlight(e,t){const n=this._modules.settings.get(t.isNode?"cursor.node":"cursor.edge");if(e?(this._modules.graphics.addCursorStyle(n),t.addClass(ld,this._animationOptions),this._hovered=t):(this._modules.graphics.removeCursorStyle(n),t.removeClass(ld,this._animationOptions)),t.isNode){const r=this._modules.graph.getAttribute(t.isNode,"textHidden"),i=t._index;e&&(this._hoveredTextHidden=r.get(i)!==0);const s=!e&&this._hoveredTextHidden;r.set(i,s)}else this._hoverExtremityHighlightedClass.clearNodes(),e&&t.getExtremities().addClass(ly,this._animationOptions)}},bq=class extends ct{constructor(){super(...arguments),this.x=0,this.y=0}},wq=class{constructor(e,t){this._nodeMapping={valid:!1,values:{}},this._edgeMapping={valid:!1,values:{}},this._computeMapping=t,this._field=e,this._assignedRules=[]}getValue(e,t){const n=e.isNode,r=n?this._nodeMapping:this._edgeMapping;r.valid||(r.values=this._computeMapping(n),r.valid=!0);const i=e.getData(this._field);return Array.isArray(i)?t==="color"?i.map(s=>r.values[s]):r.values[i[0]]:r.values[i]}markAsInvalid(){this._nodeMapping.valid=!1,this._edgeMapping.valid=!1}getValues(e){return e?this._nodeMapping.values:this._edgeMapping.values}getField(){return this._field}isAssignedTo(e){return this._assignedRules.find(t=>t===e)}getAssignedRules(){return this._assignedRules.slice()}assignTo(e){this.isAssignedTo(e)||this._assignedRules.push(e)}unAssignTo(e){this._assignedRules=this._assignedRules.filter(t=>t!==e)}};function gR(e,t,n){const r=(t?e.getNodes():e.getEdges()).getData(n),i={};return r.forEach(s=>{if(!Array.isArray(s))return i[s]=1;s.forEach(o=>i[o]=1)}),"undefined"in i&&delete i[void 0],Object.keys(i).sort()}function Eq(e,t,n,r){const{values:i={},fallback:s}=n,o=gR(e,r,t),a={};let l=0;for(let c=0;c<o.length;++c){const d=o[c];d in i?a[d]=i[d]:(a[d]=s[l],l=(l+1)%s.length)}return a}function Sq(e,{nbSlices:t,minValue:n,maxValue:r}){if(Array.isArray(e))return e.slice();const{min:i=n,max:s=r}=e,o=(s-i)/t,a=[];for(let l=1;l<t;++l)a.push(i+o*l);return a}function Aq(e,t){if(Array.isArray(e))return e;const{min:n,max:r}=e,i=t.length+1,s=(r-n)/t.length,o=[];for(let a=0;a<i;a++)o.push(n+a*s);return o}function kq(e,t,n,r){const{fallback:i,stops:s={},values:o,reverse:a}=n,l=gR(e,r,t);let c=1/0,d=-1/0;for(let p=0;p<l.length;p++){const m=+l[p];Om(m)&&(c=Math.min(c,m),d=Math.max(d,m),l[p]=m)}const u={};if(!isFinite(c)){for(let p=0;p<l.length;p++)u[l[p]]=i;return u}const h=Sq(s,{nbSlices:Array.isArray(o)?o.length:o.nbSlices,minValue:c,maxValue:d}),g=Aq(o,h);a&&g.reverse();for(let p=0;p<l.length;++p){const m=l[p];if(isFinite(m)){let f=0;for(;f<h.length&&h[f]<=m;)f+=1;u[m]=g[f]}else u[m]=i}return u}var Cq=class extends ct{constructor(){super(...arguments),this._mappingList=[]}onMounted(){this._modules.events.on(["addStyleRule","updateStyleRule"],({rule:e,options:t})=>{const n=t.nodeAttributes&&typeof t.nodeAttributes!="function"?t.nodeAttributes:{},r=t.edgeAttributes&&typeof t.edgeAttributes!="function"?t.edgeAttributes:{};[...od(n),...od(r)].forEach(i=>{i&&this._recursiveGetMapping(i).forEach(s=>s.assignTo(e.id))})}).on("removeStyleRule",({rule:e})=>{this._mappingList.forEach(t=>t.unAssignTo(e.id))}).on(["addNodes","addEdges","updateNodeData","updateEdgeData","removeNodes","beforeRemoveEdges","excludedStateChange","clearGraph"],()=>{this._mappingList.forEach(e=>{const t=e.getAssignedRules();e.markAsInvalid(),t.forEach(n=>this._modules.styleRules.refreshRule(n))}),this._modules.legend.refresh()})}_recursiveGetMapping(e,t=[]){if(!e)return t;if(e.mapping)return t.push(e.mapping),t;if(typeof e!="object")return t;const n=od(e).map(r=>this._recursiveGetMapping(r));return t.concat(...n)}createMapping({field:e,values:t={},fallback:n}={field:""}){if(e=_a(e),Array.isArray(n)?n.length===0&&(n=[void 0]):n=[n],!ya(t))throw new Error('"mapping" should be an object');return this._createMappingFunction(Eq,e,{values:t,fallback:n})}createSlices({field:e,fallback:t,stops:n={},values:r,reverse:i=!1}={field:"",values:[]}){if(e=_a(e),Array.isArray(r)||r.nbSlices||(r.nbSlices=7),Array.isArray(n)&&Array.isArray(r)&&n.length!==r.length-1)throw new Error("there should be exactly one more value that stops");return this._createMappingFunction(kq,e,{fallback:t,stops:n,values:r,reverse:i})}_createMappingFunction(e,t,n){const r=new wq(t,s=>e(this._modules.graph,t,n,s));this._mappingList.push(r);const i=(s,o,a)=>r.getValue(s,a);return i.mapping=r,i}createTemplate(e){if(typeof e!="string")throw new TypeError('"template" should be a string');const t=[];let n=0,r=!1;for(;!r;){let i=-1;const s=e.indexOf("{{",n);s!==-1&&(i=e.indexOf("}}",s+2)),i!==-1?(t.push(e.substring(n,s)),t.push(e.substring(s+2,i)),n=i+2):(t.push(e.slice(n)),r=!0)}return function(i){let s=t[0];for(let o=1;o<t.length;o+=2)s+=i.getData(t[o]),s+=t[o+1];return s}}},_k=e=>e.stopPropagation(),Tq=(e,t)=>{t.style.position="absolute",t.style.left="0",t.style.top="0",e.appendChild(t)},Nq=e=>t=>{for(;e.firstChild;)e.removeChild(e.firstChild);for(let n=0;n<t.length;++n)Tq(e,t[n])},Lq=(e,t)=>{const n=document.createElement("img");return new Promise(r=>{n.addEventListener("load",()=>{t.drawImage(n,0,0,t.canvas.width,t.canvas.height),r(t)});const i=`data:image/svg+xml;base64,${btoa(new XMLSerializer().serializeToString(e))}`;n.src=i})},Iq=class extends ct{constructor(){super(...arguments),this._elements=[],this._layers=[],this.readyCallbacks=[],this.render=(e,t,n,r)=>{const i=r&&r.pixelRatio?r.pixelRatio:zr(),{zoom:s,x:o,y:a,width:l,height:c}=r||this._modules.camera.getView();if(s===void 0||o===void 0||a===void 0||l===void 0||c===void 0)return null;const d=i*s;n.noClear||e.clearRect(0,0,l*i,c*i),n.isStatic||(e.save(),e.translate(l*i/2,c*i/2),e.rotate(r?-(r.angle||0):-this._modules.camera.getAngle()),e.translate(-o*d,-a*d),e.scale(d,d)),t(e),n.isStatic||e.restore()},this.createCanvas=(e,t)=>{const{width:n,height:r}=this._modules.camera.getSize(),i=t.canvas||Wn(n,r),s=t.ctx||i.getContext("2d"),o=(d=e)=>{s&&this.render(s,d,t)},a=()=>{const{width:d,height:u}=this._modules.camera.getSize(),h=zr();i.width=d*h,i.height=u*h,i.style.width=`${d}px`,i.style.height=`${u}px`,o()};let l,c;if(t.isStatic)this._modules.events.on("resize",a),l=()=>this._modules.events.off(a);else{let d=this._modules.camera.getCenter(),u=this._modules.camera.getZoom(),h=!1;const g=0;let p;const m=500,f=()=>{h||(o(),h=!0,d=this._modules.camera.getCenter(),u=this._modules.camera.getZoom())},y=()=>{h||f();const{x,y:b}=this._modules.camera.getCenter(),w=x-d.x,S=b-d.y,A=-w*u,C=-S*u,k=this._modules.camera.getZoom()/u,T=-this._modules.camera.getAngle();i.style.transform=`
          scale(${k})
          rotate(${-T}rad)
          translateX(${A}px)
          translateY(${C}px)
          rotate(${T}rad)
        `.replace(/\n/g,"")};c=()=>!h||(o(),h=!1,i.style.transform="scale(1) translateX(0px) translateY(0px)",!1);const _=x=>{p&&clearTimeout(p),f()},v=x=>{Date.now()<g&&p&&clearTimeout(p),p=setTimeout(c,x.duration+m),f()};this._modules.events.on("dragStart",_).on("zoomStart",v).on("dragEnd",c).on(["viewChanged","zoom","rotate","move","animate"],y),this._modules.dom.addDirectWindowEventListener("resize",c),this._modules.events.on("resize",a),l=()=>{this._modules.events.off(a).off(_).off(v).off(c).off(y),this._modules.dom.removeDirectWindowEventListener("resize",c)}}return i.style.touchAction="none",i.style.pointerEvents="none",a(),{element:i,removeListeners:l,refresh:d=>{c&&!c()||o(d)},clear:()=>s==null?void 0:s.clearRect(0,0,i.width,i.height)}},this.createSVG=e=>{const{element:t}=e;t.style["pointer-events"]="none";const n=()=>{e.draw(e.element)},r=i=>{let{zoom:s,x:o,y:a,width:l,height:c}=i||this._modules.camera.getView();if(l=Math.floor(l),c=Math.floor(c),s===void 0||o===void 0||a===void 0||l===void 0||c===void 0)return null;const d=l/2/s,u=c/2/s,h=Math.cos(-this._modules.camera.getAngle()),g=Math.sin(-this._modules.camera.getAngle()),p=h*o-g*a-d,m=g*o+h*a-u,f=l/s,y=c/s;t.style.width=`${l}px`,t.style.height=`${c}px`,t.setAttribute("width",`${l}`),t.setAttribute("height",`${c}`),t.setAttribute("viewBox",`${p} ${m} ${f} ${y}`)};return this._modules.events.on(["viewChanged","zoom","rotate","move","animate","afterImageExport"],()=>r()),t.addEventListener("mousemove",_k),r(),n(),{element:t,removeListeners:()=>{this._modules.events.off(r)},updateTransformation:r,refresh:n}},this._createOverlay=e=>{const t=()=>{const{element:i,position:s}=e,{zoom:o,x:a,y:l,width:c,height:d}=this._modules.camera.getView();if(o===void 0||a===void 0||l===void 0||c===void 0||d===void 0)return null;const u=o,h=c/2,g=d/2,p=-this._modules.camera.getAngle(),m=(s.x-a)*u,f=(s.y-l)*u;i.style.transformOrigin="top left",i.style.transform=`translate(${h}px, ${g}px) rotate(${p}rad) translate(${m}px, ${f}px) ${e.scaled?`scale(${u}, ${u})`:""}`};this._modules.events.on(["viewChanged","zoom","rotate","move","animate","afterImageExport"],t);const{element:n,size:r}=e;return r&&(n.style.width=`${r.width}`,n.style.height=`${r.height}`),n.addEventListener("mousemove",_k),t(),{element:n,removeListeners:()=>{this._modules.events.off(t)},updateTransformation:t}},this.addLayer=(e,t="layer",n=this._elements.length)=>{const r=typeof e=="string"?Z_(e):e;this._elements.push(r);const i={element:r};return i.type=t,i.getLevel=()=>this._elements.indexOf(r),i.moveTo=s=>(this._elements.splice(s,0,this._elements.splice(i.getLevel(),1)[0]),this._updateDom(this._elements),i),i.moveUp=()=>i.moveTo(i.getLevel()+1),i.moveDown=()=>i.moveTo(i.getLevel()-1),i.moveToTop=()=>i.moveTo(this._elements.length-1),i.moveToBottom=()=>i.moveTo(0),i.destroy=()=>this._removeLayer(i),i.hide=()=>(i.element&&(i.element.style.visibility="hidden"),i),i.show=()=>(i.element&&(i.element.style.visibility="visible"),i),i.isHidden=()=>i.element.style.visibility==="hidden",i.setOpacity=s=>(i.element&&(i.element.style.opacity=s.toString()),i),i.getOpacity=()=>parseFloat(i.element.style.opacity||"1"),i.setPosition=s=>{if(i.element){const o=i.element.style;o.left=`${s.x}px`,o.top=`${s.y}px`}return i},i.setSize=s=>{if(i.element&&s){const{width:o,height:a}=s,l=i.element.style;l.width=`${o}px`,l.height=`${a}px`}return i},i.moveTo(n),this._layers.push(i),i},this.addCanvasLayer=(e,t={isStatic:!1,noClear:!1},n=this._elements.length)=>{const r=this.createCanvas(e,t),{element:i,removeListeners:s,refresh:o,clear:a}=r,l=this.addLayer(i,"canvas",n);return i.classList.add("ogma-canvas-layer"),l.destroy=()=>this._removeLayer(l,s),l.refresh=o,l.clear=a,l.draw=e,l.options=t,l},this.addOverlay=(e,t=this._elements.length)=>{typeof e.element=="string"&&(e.element=Z_(e.element)),e.scaled=e.scaled===void 0||e.scaled;const n=this._createOverlay(e),{element:r,removeListeners:i,updateTransformation:s}=n,o=this.addLayer(r,"overlay",t);return o._onViewChange=s,o._onDestroy=i,o.destroy=()=>this._removeLayer(o,i),o.setPosition=a=>(e.position=a,s(),o),e.size&&o.setSize(e.size),o},this.addSVGLayer=(e,t=this._elements.length)=>{const n=this.createSVG(e),{element:r,refresh:i,removeListeners:s,updateTransformation:o}=n,a=this.addLayer(r,"svg",t);return a._onViewChange=o,a._onDestroy=s,a.destroy=()=>this._removeLayer(a,s),a.refresh=i,a}}canvasToImage(e,t){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");this.render(r,e.draw,yt(be({},e.options),{noClear:!0}),yt(be({},t),{pixelRatio:1}));const i=document.createElementNS("http://www.w3.org/2000/svg","image");return i.setAttribute("href",n.toDataURL("image/png")),i.setAttribute("width",n.width),i.setAttribute("height",n.height),i}exportPNG(e,t,n){const r=e.getContext("2d");let i=Promise.resolve();return t.forEach(s=>{i=i.then(()=>s.type==="canvas"?(this.render(r,s.draw,yt(be({},s.options),{noClear:!0}),n),Promise.resolve()):(s._onViewChange&&s._onViewChange(n),Lq(s.element,r)))}),i}exportSVG(e,t,n,r){let i=Promise.resolve();return t.forEach(s=>{i=i.then(()=>s.type==="canvas"?Promise.resolve(this.canvasToImage(s,n)):(s._onViewChange&&s._onViewChange(n),s.element.cloneNode(!0))).then(o=>r?e.insertBefore(o,e.querySelector(".ogma-nodes").parentNode||e.firstChild):e.appendChild(o))}),i}export(e){const t=this._layers.sort((i,s)=>i.getLevel()-s.getLevel()).filter(i=>i.type==="canvas"||i.type==="svg"),n=this.ogmaLayer?this.ogmaLayer.getLevel():0,r=e.below?t.filter(i=>i.getLevel()<n):t.filter(i=>i.getLevel()>n);return e.canvas?this.exportPNG(e.canvas,r,e.view):this.exportSVG(e.svg,r,e.view,e.below)}onMounted(){const e=this._modules.graphics.getDomElement();this._updateDom=Nq(e);const t=e.firstChild;t&&(this.ogmaLayer=this.addLayer(t)),this.runCallbacks()}runCallbacks(){this.ogmaLayer&&(this.readyCallbacks.forEach(e=>e()),this.readyCallbacks=[])}whenReady(e){this.readyCallbacks.push(e),this.ogmaLayer&&this.runCallbacks()}_removeLayer(e,t){return e.element&&e.element.parentNode&&(this._elements.splice(e.getLevel(),1),t&&t(),e.element=null,this._updateDom(this._elements)),this._layers=this._layers.filter(n=>n!==e),e}destroy(){this._elements=[]}},Pq=class extends ct{onMounted(){const e=this._modules.graph;this._nodeList=e.getNodeAttribute("object"),this._edgeList=e.getEdgeAttribute("object"),this._sourceList=e.getEdgeAttribute("source"),this._targetList=e.getEdgeAttribute("target"),this._excludedList=e.getEdgeAttribute("excluded"),this._virtualList=e.getEdgeAttribute("virtual")}shortestPath(e={source:void 0,target:void 0}){const{source:t,target:n,directed:r=!1,edges:i=this._ogma.getEdges(),nodes:s=this._ogma.getNodes(),edgeCostFunction:o=()=>1,heuristicFunction:a=()=>0}=e,l=i.reduce((m,f)=>(m[f._index]=!0,m),{}),c=s.reduce((m,f)=>(m[f._index]=!0,m),{}),d=this._modules.graph.getNode(t),u=this._modules.graph.getNode(n);if(!d)throw new Error("the source is not a node");if(!u)throw new Error("the target is not a node");const h=d._index,g=u._index;c[h]=!0,c[g]=!0;let p=null;if(h===g)p={nodes:d.toList(),edges:this._modules.graph.edgeList()};else{const m=this._modules.graph.getNodeMaxIndex()+1,f=new Int32Array(m),y=new Float32Array(m),_=new Float32Array(m),v=new Set,x=new NL(_);for(y.fill(1/0),_.fill(1/0),f.fill(-1),x.add(h),y[h]=0,_[h]=a(d,u);!x.isEmpty();){const b=x.removeMin();if(b===g){p=this._constructPath(f,h,g);break}v.add(b);const w=this._modules.graph.getAdjacentDirections(b);if(w)for(let S=0;S<w.length;++S){const A=w[S],C=this._modules.graph.getEdgeIndexesInDirection(A);let k=-1,T=0,M=-1;for(let D=0;D<C.length;++D){const B=C[D],I=this._sourceList.get(B),N=this._targetList.get(B);if(I===N||!c[I]||!c[N]||r&&b!==I||!l[B])continue;const V=o(this._edgeList.get(B));(k===-1||V<T)&&(k=B,T=V,M=I===b?N:I)}if(M!==-1||v.has(M)){const D=y[b]+T;if(!x.has(M)||D<y[M]){const B=this._nodeList.get(b);f[M]=k,y[M]=D,_[M]=D+a(B,u),x.add(M)}}}}}return Promise.resolve(p)}_constructPath(e,t,n){const r=[n],i=[];let s=n;for(;s!==t;){const o=e[s],a=this._sourceList.get(o),l=this._targetList.get(o);s=s===a?l:a,r.push(s),i.push(o)}return r.reverse(),i.reverse(),{nodes:this._modules.graph.nodeList(new Uint32Array(r)),edges:this._modules.graph.edgeList(new Uint32Array(i))}}detectCycle(e,t){const n=t.getSource(),r=t.getTarget(),i=SL(e._indexes,n._indexes,r._indexes);return i?this._modules.graph.nodeList(new Uint32Array(i)).dedupe():this._modules.graph.nodeList()}getAllSimpleCycles(e,t){const n=t.getSource(),r=t.getTarget();return new kL(e._indexes,n._indexes,r._indexes).getCycles().map(i=>this._modules.graph.nodeList(new Uint32Array(i)))}minimumSpanningTree(e,t,n){const r=this._modules.graph;e=r.getNodes(e),t=r.getEdges(t);const i=new Set;e.forEach(l=>i.add(l._index));const s=r.getConnectedComponents(e,{filter:l=>i.has(l),internalIndexes:!0}),o={};s.forEach((l,c)=>l.forEach(d=>o[d]=c));const a=[];return t.forEach(l=>{const c=o[l.getSource()._index];c!==void 0&&(a[c]===void 0&&(a[c]=[]),a[c].push(l._index))}),s.map((l,c)=>{const d=CL(l,a[c]||[],u=>r.edge(u).getSource()._index,u=>r.edge(u).getTarget()._index,n?u=>n(r.edge(u)):void 0);return{nodes:r.nodeList(new Uint32Array(l)),edges:r.edgeList(new Uint32Array(d))}})}bfs({root:e,onNode:t,onEdge:n=wt,directed:r=!1}){const i=this._modules.graph,s=[e],o=new Set,a={direction:r?"out":"both"};for(;s.length;){const l=s.pop();if(!o.has(l._index)){if(t(l)===!0)return;o.add(l._index),i.getAdjacentEdges(l,a).forEach(c=>{if(n(c)===!1)return;const d=c.getSource()===l?c.getTarget():c.getSource();s.unshift(d)})}}}dfs({root:e,onNode:t,onEdge:n=wt,directed:r=!1}){const i=this._modules.graph,s=[e],o=new Set,a={direction:r?"out":"both"};for(;s.length;){const l=s.pop();if(!o.has(l._index)){if(t(l)===!0)return;o.add(l._index),i.getAdjacentEdges(l,a).forEach(c=>{if(n(c)===!1)return;const d=c.getSource()===l?c.getTarget():c.getSource();s.push(d)})}}}betweenness({nodes:e,edges:t,directed:n,normalized:r}){const i=this._ogma.getNodes().subtract(e),s=this._ogma.getEdges().subtract(t).concat(i.fastGetAdjacentElements().edges).dedupe();return TL({adjacency:e.map(o=>{const a=this._ogma.edgeList(this._ogma.modules.graph.topology.getAdjacentElements(!1,o.toList()._indexes,{direction:n?"out":"both"})).subtract(s).dedupe();return{id:o._index,adj:a.map(l=>l.getSource()._index===o._index?l.getTarget()._index:l.getSource()._index)}}),directed:n,normalized:r})}},yk=(e,t)=>{if(!e)throw new Error("Traversal options are required");if(typeof e.onNode!="function")throw new Error("onNode callback is required");if(e.root=t.getNode(e.root),!e.root)throw new Error(`Root node '${e.root}' does not exist`);return e},Oh=()=>({nodes:void 0,edges:void 0}),Mq=class extends Jt{constructor(){super(...arguments),this.shortestPath=e=>this._ogma.modules.algorithms.shortestPath(e),this.hasCycle=e=>{const{nodes:t,edges:n}=e||Oh();return this.detectCycle({nodes:t,edges:n})!==null},this.getAllSimpleCycles=e=>{let{nodes:t,edges:n}=e||Oh();return t||(t=this._ogma.getNodes()),n||(n=t.getAdjacentEdges({bothExtremities:!0})),this._ogma.modules.algorithms.getAllSimpleCycles(t,n)},this.detectCycle=e=>{let{nodes:t,edges:n}=e||Oh();t||(t=this._ogma.getNodes()),n||(n=t.getAdjacentEdges({bothExtremities:!0}));const r=this._ogma.modules.algorithms.detectCycle(t,n);return r.size?r:null},this.minimumSpanningTree=e=>{const{nodes:t,edges:n,edgeCostFunction:r}=e||yt(be({},Oh()),{edgeCostFunction:void 0});return this._ogma.modules.algorithms.minimumSpanningTree(t,n,r)},this.dfs=e=>this._ogma.modules.algorithms.dfs(yk(e,this._ogma.modules.graph)),this.bfs=e=>this._ogma.modules.algorithms.bfs(yk(e,this._ogma.modules.graph)),this.betweenness=(e={})=>(e={nodes:e.nodes||this._ogma.getNodes(),edges:e.edges||this._ogma.getEdges(),directed:e.directed!==void 0&&e.directed,normalized:e.normalized===void 0||e.normalized},this._ogma.modules.algorithms.betweenness(e)),this.getMinimumEnclosingCircle=e=>{if(!e||e.size===0)throw new Error("getMinimumEnclosingCircle: no nodes provided");const t=e.getAttribute("x"),n=e.getAttribute("y"),r=e.getAttribute("radius"),[i,s,o]=Ex(t,n,r);return{x:i,y:s,radius:o}},this.circlePack=({nodes:e,margin:t=0,origin:n={x:0,y:0},duration:r=0,easing:i="linear",sort:s})=>{if(!e||e.size===0)throw new Error("circlePack: no nodes provided");let o=e.map((l,c)=>({index:c,radius:+l.getAttribute("radius")+t,id:l.getId()}));if(s)if(s==="asc")o=o.sort((l,c)=>c.radius-l.radius);else if(s==="desc")o=o.sort((l,c)=>l.radius-c.radius);else{if(typeof s!="function")throw new Error("circlePack: invalid sort option");o=o.sort((l,c)=>s(e.get(l.index),e.get(c.index)))}if(n&&(!isFinite(n.x)||!isFinite(n.y)))throw new Error("circlePack: invalid origin");const a=pL(o,n.x,n.y).reduce((l,{index:c,x:d,y:u})=>(l[c]={x:d,y:u},l),new Array(e.size));return e.setAttributes(a,{duration:r,easing:i})}}},Fq=FF,Ql={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR=L;function ft(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lr=Object.prototype.hasOwnProperty,Rq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vk={},xk={};function mR(e){return Lr.call(xk,e)?!0:Lr.call(vk,e)?!1:Rq.test(e)?xk[e]=!0:(vk[e]=!0,!1)}function Sr(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xn[e]=new Sr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xn[t]=new Sr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xn[e]=new Sr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xn[e]=new Sr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xn[e]=new Sr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xn[e]=new Sr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xn[e]=new Sr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xn[e]=new Sr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xn[e]=new Sr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cb=/[\-:]([a-z])/g;function Tb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cb,Tb);Xn[t]=new Sr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cb,Tb);Xn[t]=new Sr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cb,Tb);Xn[t]=new Sr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xn[e]=new Sr(e,1,!1,e.toLowerCase(),null,!1,!1)});Xn.xlinkHref=new Sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xn[e]=new Sr(e,1,!1,e.toLowerCase(),null,!0,!0)});var fg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Dq=["Webkit","ms","Moz","O"];Object.keys(fg).forEach(function(e){Dq.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fg[t]=fg[e]})});var zq=/["'&<>]/;function xr(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=zq.exec(e);if(t){var n="",r,i=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==r&&(n+=e.substring(i,r)),i=r+1,n+=t}e=i!==r?n+e.substring(i,r):n}return e}var Oq=/([A-Z])/g,Bq=/^ms-/,tv=Array.isArray;function as(e,t){return{insertionMode:e,selectedValue:t}}function jq(e,t,n){switch(t){case"select":return as(1,n.value!=null?n.value:n.defaultValue);case"svg":return as(2,null);case"math":return as(3,null);case"foreignObject":return as(1,null);case"table":return as(4,null);case"thead":case"tbody":case"tfoot":return as(5,null);case"colgroup":return as(7,null);case"tr":return as(6,null)}return 4<=e.insertionMode||e.insertionMode===0?as(1,null):e}var bk=new Map;function fR(e,t,n){if(typeof n!="object")throw Error(ft(62));t=!0;for(var r in n)if(Lr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=xr(r);i=xr((""+i).trim())}else{s=r;var o=bk.get(s);o!==void 0||(o=xr(s.replace(Oq,"-$1").toLowerCase().replace(Bq,"-ms-")),bk.set(s,o)),s=o,i=typeof i=="number"?i===0||Lr.call(fg,r)?""+i:i+"px":xr((""+i).trim())}t?(t=!1,e.push(' style="',s,":",i)):e.push(";",s,":",i)}}t||e.push('"')}function Br(e,t,n,r){switch(n){case"style":fR(e,t,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(t=Xn.hasOwnProperty(n)?Xn[n]:null,t!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:r&&e.push(" ",n,'=""');break;case 4:r===!0?e.push(" ",n,'=""'):r!==!1&&e.push(" ",n,'="',xr(r),'"');break;case 5:isNaN(r)||e.push(" ",n,'="',xr(r),'"');break;case 6:!isNaN(r)&&1<=r&&e.push(" ",n,'="',xr(r),'"');break;default:t.sanitizeURL&&(r=""+r),e.push(" ",n,'="',xr(r),'"')}}else if(mR(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(t=n.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",n,'="',xr(r),'"')}}}function _g(e,t,n){if(t!=null){if(n!=null)throw Error(ft(60));if(typeof t!="object"||!("__html"in t))throw Error(ft(61));t=t.__html,t!=null&&e.push(""+t)}}function Uq(e){var t="";return pR.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function S0(e,t,n,r){e.push($i(n));var i=n=null,s;for(s in t)if(Lr.call(t,s)){var o=t[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Br(e,r,s,o)}}return e.push(">"),_g(e,i,n),typeof n=="string"?(e.push(xr(n)),null):n}var $q=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,wk=new Map;function $i(e){var t=wk.get(e);if(t===void 0){if(!$q.test(e))throw Error(ft(65,e));t="<"+e,wk.set(e,t)}return t}function Gq(e,t,n,r,i){switch(t){case"select":e.push($i("select"));var s=null,o=null;for(d in n)if(Lr.call(n,d)){var a=n[d];if(a!=null)switch(d){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Br(e,r,d,a)}}return e.push(">"),_g(e,o,s),s;case"option":o=i.selectedValue,e.push($i("option"));var l=a=null,c=null,d=null;for(s in n)if(Lr.call(n,s)){var u=n[s];if(u!=null)switch(s){case"children":a=u;break;case"selected":c=u;break;case"dangerouslySetInnerHTML":d=u;break;case"value":l=u;default:Br(e,r,s,u)}}if(o!=null)if(n=l!==null?""+l:Uq(a),tv(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){e.push(' selected=""');break}}else""+o===n&&e.push(' selected=""');else c&&e.push(' selected=""');return e.push(">"),_g(e,d,a),a;case"textarea":e.push($i("textarea")),d=o=s=null;for(a in n)if(Lr.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":d=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(ft(91));default:Br(e,r,a,l)}if(s===null&&o!==null&&(s=o),e.push(">"),d!=null){if(s!=null)throw Error(ft(92));if(tv(d)&&1<d.length)throw Error(ft(93));s=""+d}return typeof s=="string"&&s[0]===`
`&&e.push(`
`),s!==null&&e.push(xr(""+s)),null;case"input":e.push($i("input")),l=d=a=s=null;for(o in n)if(Lr.call(n,o)&&(c=n[o],c!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(ft(399,"input"));case"defaultChecked":l=c;break;case"defaultValue":a=c;break;case"checked":d=c;break;case"value":s=c;break;default:Br(e,r,o,c)}return d!==null?Br(e,r,"checked",d):l!==null&&Br(e,r,"checked",l),s!==null?Br(e,r,"value",s):a!==null&&Br(e,r,"value",a),e.push("/>"),null;case"menuitem":e.push($i("menuitem"));for(var h in n)if(Lr.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(ft(400));default:Br(e,r,h,s)}return e.push(">"),null;case"title":e.push($i("title")),s=null;for(u in n)if(Lr.call(n,u)&&(o=n[u],o!=null))switch(u){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(ft(434));default:Br(e,r,u,o)}return e.push(">"),s;case"listing":case"pre":e.push($i(t)),o=s=null;for(l in n)if(Lr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Br(e,r,l,a)}if(e.push(">"),o!=null){if(s!=null)throw Error(ft(60));if(typeof o!="object"||!("__html"in o))throw Error(ft(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?e.push(`
`,n):e.push(""+n))}return typeof s=="string"&&s[0]===`
`&&e.push(`
`),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push($i(t));for(var g in n)if(Lr.call(n,g)&&(s=n[g],s!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(ft(399,t));default:Br(e,r,g,s)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return S0(e,n,t,r);case"html":return i.insertionMode===0&&e.push("<!DOCTYPE html>"),S0(e,n,t,r);default:if(t.indexOf("-")===-1&&typeof n.is!="string")return S0(e,n,t,r);e.push($i(t)),o=s=null;for(c in n)if(Lr.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":fR(e,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:mR(c)&&typeof a!="function"&&typeof a!="symbol"&&e.push(" ",c,'="',xr(a),'"')}return e.push(">"),_g(e,o,s),s}}function Ek(e,t,n){if(e.push('<!--$?--><template id="'),n===null)throw Error(ft(395));return e.push(n),e.push('"></template>')}function Vq(e,t,n,r){switch(n.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');default:throw Error(ft(397))}}function Hq(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(ft(397))}}var Wq=/[<\u2028\u2029]/g;function A0(e){return JSON.stringify(e).replace(Wq,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function Xq(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function Sk(e,t,n,r){return n.generateStaticMarkup?(e.push(xr(t)),!1):(t===""?e=r:(r&&e.push("<!-- -->"),e.push(xr(t)),e=!0),e)}var fd=Object.assign,Yq=Symbol.for("react.element"),_R=Symbol.for("react.portal"),yR=Symbol.for("react.fragment"),vR=Symbol.for("react.strict_mode"),xR=Symbol.for("react.profiler"),bR=Symbol.for("react.provider"),wR=Symbol.for("react.context"),ER=Symbol.for("react.forward_ref"),SR=Symbol.for("react.suspense"),AR=Symbol.for("react.suspense_list"),kR=Symbol.for("react.memo"),Nb=Symbol.for("react.lazy"),qq=Symbol.for("react.scope"),Zq=Symbol.for("react.debug_trace_mode"),Jq=Symbol.for("react.legacy_hidden"),Qq=Symbol.for("react.default_value"),Ak=Symbol.iterator;function nv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yR:return"Fragment";case _R:return"Portal";case xR:return"Profiler";case vR:return"StrictMode";case SR:return"Suspense";case AR:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wR:return(e.displayName||"Context")+".Consumer";case bR:return(e._context.displayName||"Context")+".Provider";case ER:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kR:return t=e.displayName||null,t!==null?t:nv(e.type)||"Memo";case Nb:t=e._payload,e=e._init;try{return nv(e(t))}catch{}}return null}var CR={};function kk(e,t){if(e=e.contextTypes,!e)return CR;var n={},r;for(r in e)n[r]=t[r];return n}var Ko=null;function Bm(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(e===null){if(n!==null)throw Error(ft(401))}else{if(n===null)throw Error(ft(401));Bm(e,n)}t.context._currentValue2=t.value}}function TR(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&TR(e)}function NR(e){var t=e.parent;t!==null&&NR(t),e.context._currentValue2=e.value}function LR(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(ft(402));e.depth===t.depth?Bm(e,t):LR(e,t)}function IR(e,t){var n=t.parent;if(n===null)throw Error(ft(402));e.depth===n.depth?Bm(e,n):IR(e,n),t.context._currentValue2=t.value}function kp(e){var t=Ko;t!==e&&(t===null?NR(e):e===null?TR(t):t.depth===e.depth?Bm(t,e):t.depth>e.depth?LR(t,e):IR(t,e),Ko=e)}var Ck={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function Tk(e,t,n,r){var i=e.state!==void 0?e.state:null;e.updater=Ck,e.props=n,e.state=i;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context=typeof o=="object"&&o!==null?o._currentValue2:r,o=t.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:fd({},i,o),e.state=i),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&Ck.enqueueReplaceState(e,e.state,null),s.queue!==null&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&t.length===1)e.state=t[0];else{for(s=o?t[0]:e.state,i=!0,o=o?1:0;o<t.length;o++){var a=t[o];a=typeof a=="function"?a.call(e,s,n,r):a,a!=null&&(i?(i=!1,s=fd({},s,a)):fd(s,a))}e.state=s}else s.queue=null}var Kq={id:1,overflow:""};function rv(e,t,n){var r=e.id;e=e.overflow;var i=32-yg(r)-1;r&=~(1<<i),n+=1;var s=32-yg(t)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-yg(t)+i|n<<i|r,overflow:s+e}}return{id:1<<s|n<<i|r,overflow:e}}var yg=Math.clz32?Math.clz32:nZ,eZ=Math.log,tZ=Math.LN2;function nZ(e){return e>>>=0,e===0?32:31-(eZ(e)/tZ|0)|0}function rZ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var iZ=typeof Object.is=="function"?Object.is:rZ,Ls=null,Lb=null,vg=null,Xt=null,Hc=!1,Cp=!1,eu=0,io=null,jm=0;function Bo(){if(Ls===null)throw Error(ft(321));return Ls}function Nk(){if(0<jm)throw Error(ft(312));return{memoizedState:null,queue:null,next:null}}function Ib(){return Xt===null?vg===null?(Hc=!1,vg=Xt=Nk()):(Hc=!0,Xt=vg):Xt.next===null?(Hc=!1,Xt=Xt.next=Nk()):(Hc=!0,Xt=Xt.next),Xt}function Pb(){Lb=Ls=null,Cp=!1,vg=null,jm=0,Xt=io=null}function PR(e,t){return typeof t=="function"?t(e):t}function Lk(e,t,n){if(Ls=Bo(),Xt=Ib(),Hc){var r=Xt.queue;if(t=r.dispatch,io!==null&&(n=io.get(r),n!==void 0)){io.delete(r),r=Xt.memoizedState;do r=e(r,n.action),n=n.next;while(n!==null);return Xt.memoizedState=r,[r,t]}return[Xt.memoizedState,t]}return e=e===PR?typeof t=="function"?t():t:n!==void 0?n(t):t,Xt.memoizedState=e,e=Xt.queue={last:null,dispatch:null},e=e.dispatch=sZ.bind(null,Ls,e),[Xt.memoizedState,e]}function Ik(e,t){if(Ls=Bo(),Xt=Ib(),t=t===void 0?null:t,Xt!==null){var n=Xt.memoizedState;if(n!==null&&t!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!iZ(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),Xt.memoizedState=[e,t],e}function sZ(e,t,n){if(25<=jm)throw Error(ft(301));if(e===Ls)if(Cp=!0,e={action:n,next:null},io===null&&(io=new Map),n=io.get(t),n===void 0)io.set(t,e);else{for(t=n;t.next!==null;)t=t.next;t.next=e}}function oZ(){throw Error(ft(394))}function Bh(){}var Pk={readContext:function(e){return e._currentValue2},useContext:function(e){return Bo(),e._currentValue2},useMemo:Ik,useReducer:Lk,useRef:function(e){Ls=Bo(),Xt=Ib();var t=Xt.memoizedState;return t===null?(e={current:e},Xt.memoizedState=e):t},useState:function(e){return Lk(PR,e)},useInsertionEffect:Bh,useLayoutEffect:function(){},useCallback:function(e,t){return Ik(function(){return e},t)},useImperativeHandle:Bh,useEffect:Bh,useDebugValue:Bh,useDeferredValue:function(e){return Bo(),e},useTransition:function(){return Bo(),[!1,oZ]},useId:function(){var e=Lb.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-yg(e)-1)).toString(32)+t;var n=xg;if(n===null)throw Error(ft(404));return t=eu++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Bo(),t(e._source)},useSyncExternalStore:function(e,t,n){if(n===void 0)throw Error(ft(407));return n()}},xg=null,k0=pR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function aZ(e){return console.error(e),null}function Wc(){}function lZ(e,t,n,r,i,s,o,a,l){var c=[],d=new Set;return t={destination:null,responseState:t,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:d,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?aZ:i,onAllReady:Wc,onShellReady:o===void 0?Wc:o,onShellError:Wc,onFatalError:Wc},n=Tp(t,0,null,n,!1,!1),n.parentFlushed=!0,e=Mb(t,e,null,n,d,CR,null,Kq),c.push(e),t}function Mb(e,t,n,r,i,s,o,a){e.allPendingTasks++,n===null?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var c=e.pingedTasks;c.push(l),c.length===1&&RR(e)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function Tp(e,t,n,r,i,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function tu(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Np(e,t){var n=e.onShellError;n(t),n=e.onFatalError,n(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function Mk(e,t,n,r,i){for(Ls={},Lb=t,eu=0,e=n(r,i);Cp;)Cp=!1,eu=0,jm+=1,Xt=null,e=n(r,i);return Pb(),e}function Fk(e,t,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=t.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(ft(108,nv(r)||"Unknown",a));r=fd({},o,n)}t.legacyContext=r,Gr(e,t,i),t.legacyContext=o}else Gr(e,t,i)}function Rk(e,t){if(e&&e.defaultProps){t=fd({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function iv(e,t,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=kk(n,t.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue2:i),Tk(s,n,r,i),Fk(e,t,s,n)}else{s=kk(n,t.legacyContext),i=Mk(e,t,n,r,s);var o=eu!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)Tk(i,n,r,s),Fk(e,t,i,n);else if(o){r=t.treeContext,t.treeContext=rv(r,1,0);try{Gr(e,t,i)}finally{t.treeContext=r}}else Gr(e,t,i)}else if(typeof n=="string"){switch(i=t.blockedSegment,s=Gq(i.chunks,n,r,e.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=jq(o,n,r),sv(e,t,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case Jq:case Zq:case vR:case xR:case yR:Gr(e,t,r.children);return;case AR:Gr(e,t,r.children);return;case qq:throw Error(ft(343));case SR:e:{n=t.blockedBoundary,i=t.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=Tp(e,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var c=Tp(e,0,null,i.formatContext,!1,!1);c.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=c;try{if(sv(e,t,r),e.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),c.status=1,Lp(a,c),a.pendingTasks===0)break e}catch(d){c.status=4,a.forceClientRender=!0,a.errorDigest=tu(e,d)}finally{t.blockedBoundary=n,t.blockedSegment=i}t=Mb(e,s,n,l,o,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ER:if(r=Mk(e,t,n.render,r,i),eu!==0){n=t.treeContext,t.treeContext=rv(n,1,0);try{Gr(e,t,r)}finally{t.treeContext=n}}else Gr(e,t,r);return;case kR:n=n.type,r=Rk(n,r),iv(e,t,n,r,i);return;case bR:if(i=r.children,n=n._context,r=r.value,s=n._currentValue2,n._currentValue2=r,o=Ko,Ko=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},t.context=r,Gr(e,t,i),e=Ko,e===null)throw Error(ft(403));r=e.parentValue,e.context._currentValue2=r===Qq?e.context._defaultValue:r,e=Ko=e.parent,t.context=e;return;case wR:r=r.children,r=r(n._currentValue2),Gr(e,t,r);return;case Nb:i=n._init,n=i(n._payload),r=Rk(n,r),iv(e,t,n,r,void 0);return}throw Error(ft(130,n==null?n:typeof n,""))}}function Gr(e,t,n){if(t.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case Yq:iv(e,t,n.type,n.props,n.ref);return;case _R:throw Error(ft(257));case Nb:var r=n._init;n=r(n._payload),Gr(e,t,n);return}if(tv(n)){Dk(e,t,n);return}if(n===null||typeof n!="object"?r=null:(r=Ak&&n[Ak]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);Dk(e,t,i)}return}throw e=Object.prototype.toString.call(n),Error(ft(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}typeof n=="string"?(r=t.blockedSegment,r.lastPushedText=Sk(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText)):typeof n=="number"&&(r=t.blockedSegment,r.lastPushedText=Sk(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function Dk(e,t,n){for(var r=n.length,i=0;i<r;i++){var s=t.treeContext;t.treeContext=rv(s,r,i);try{sv(e,t,n[i])}finally{t.treeContext=s}}}function sv(e,t,n){var r=t.blockedSegment.formatContext,i=t.legacyContext,s=t.context;try{return Gr(e,t,n)}catch(l){if(Pb(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=t.blockedSegment,a=Tp(e,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=Mb(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,kp(s)}else throw t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,kp(s),l}}function cZ(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,FR(this,t,e)}function MR(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,r===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=n===void 0?Error(ft(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return MR(i,t,n)}),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(r=t.onAllReady,r()))}function Lp(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,n.status===1&&Lp(e,n)}else e.completedSegments.push(t)}function FR(e,t,n){if(t===null){if(n.parentFlushed){if(e.completedRootSegment!==null)throw Error(ft(389));e.completedRootSegment=n}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=Wc,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(n.parentFlushed&&n.status===1&&Lp(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(cZ,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Lp(t,n),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function RR(e){if(e.status!==2){var t=Ko,n=k0.current;k0.current=Pk;var r=xg;xg=e.responseState;try{var i=e.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=e,l=o.blockedSegment;if(l.status===0){kp(o.context);try{Gr(a,o,o.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),o.abortSet.delete(o),l.status=1,FR(a,o.blockedBoundary,l)}catch(p){if(Pb(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var c=o.ping;p.then(c,c)}else{o.abortSet.delete(o),l.status=4;var d=o.blockedBoundary,u=p,h=tu(a,u);if(d===null?Np(a,u):(d.pendingTasks--,d.forceClientRender||(d.forceClientRender=!0,d.errorDigest=h,d.parentFlushed&&a.clientRenderedBoundaries.push(d))),a.allPendingTasks--,a.allPendingTasks===0){var g=a.onAllReady;g()}}}finally{}}}i.splice(0,s),e.destination!==null&&Fb(e,e.destination)}catch(p){tu(e,p),Np(e,p)}finally{xg=r,k0.current=n,n===Pk&&kp(t)}}}function jh(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=r.toString(16),t.push(e),t.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)t.push(r[s]);i=Um(e,t,i)}for(;s<r.length-1;s++)t.push(r[s]);return s<r.length&&(i=t.push(r[s])),i;default:throw Error(ft(390))}}function Um(e,t,n){var r=n.boundary;if(r===null)return jh(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)return e.responseState.generateStaticMarkup||(r=r.errorDigest,t.push("<!--$!-->"),t.push("<template"),r&&(t.push(' data-dgst="'),r=xr(r),t.push(r),t.push('"')),t.push("></template>")),jh(e,t,n),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e;if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var i=e.responseState,s=i.nextSuspenseID++;return i=i.boundaryPrefix+s.toString(16),r=r.id=i,Ek(t,e.responseState,r),jh(e,t,n),t.push("<!--/$-->")}if(r.byteSize>e.progressiveChunkSize)return r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),Ek(t,e.responseState,r.id),jh(e,t,n),t.push("<!--/$-->");if(e.responseState.generateStaticMarkup||t.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(ft(391));return Um(e,t,n[0]),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e}function zk(e,t,n){return Vq(t,e.responseState,n.formatContext,n.id),Um(e,t,n),Hq(t,n.formatContext)}function Ok(e,t,n){for(var r=n.completedSegments,i=0;i<r.length;i++)DR(e,t,n,r[i]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(ft(395));return n=n.toString(16),t.push(r),t.push('","'),t.push(e.segmentPrefix),t.push(n),t.push('")<\/script>')}function DR(e,t,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(ft(392));return zk(e,t,r)}return zk(e,t,r),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),i=i.toString(16),t.push(i),t.push('","'),t.push(e.placeholderPrefix),t.push(i),t.push('")<\/script>')}function Fb(e,t){try{var n=e.completedRootSegment;if(n!==null&&e.pendingRootTasks===0){Um(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)t.push(r[n]);n<r.length&&t.push(r[n])}var i=e.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=t;var a=e.responseState,l=o.id,c=o.errorDigest,d=o.errorMessage,u=o.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),l===null)throw Error(ft(395));if(r.push(l),r.push('"'),c||d||u){r.push(",");var h=A0(c||"");r.push(h)}if(d||u){r.push(",");var g=A0(d||"");r.push(g)}if(u){r.push(",");var p=A0(u);r.push(p)}if(!r.push(")<\/script>")){e.destination=null,s++,i.splice(0,s);return}}i.splice(0,s);var m=e.completedBoundaries;for(s=0;s<m.length;s++)if(!Ok(e,t,m[s])){e.destination=null,s++,m.splice(0,s);return}m.splice(0,s);var f=e.partialBoundaries;for(s=0;s<f.length;s++){var y=f[s];e:{i=e,o=t;var _=y.completedSegments;for(a=0;a<_.length;a++)if(!DR(i,o,y,_[a])){a++,_.splice(0,a);var v=!1;break e}_.splice(0,a),v=!0}if(!v){e.destination=null,s++,f.splice(0,s);return}}f.splice(0,s);var x=e.completedBoundaries;for(s=0;s<x.length;s++)if(!Ok(e,t,x[s])){e.destination=null,s++,x.splice(0,s);return}x.splice(0,s)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function dZ(e,t){try{var n=e.abortableTasks;n.forEach(function(r){return MR(r,e,t)}),n.clear(),e.destination!==null&&Fb(e,e.destination)}catch(r){tu(e,r),Np(e,r)}}function uZ(){}function zR(e,t,n,r){var i=!1,s=null,o="",a={push:function(c){return c!==null&&(o+=c),!0},destroy:function(c){i=!0,s=c}},l=!1;if(e=lZ(e,Xq(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,uZ,void 0,function(){l=!0}),RR(e),dZ(e,r),e.status===1)e.status=2,a.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=a;try{Fb(e,a)}catch(c){tu(e,c),Np(e,c)}}if(i)throw s;if(!l)throw Error(ft(426));return o}Ql.renderToNodeStream=function(){throw Error(ft(207))};Ql.renderToStaticMarkup=function(e,t){return zR(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Ql.renderToStaticNodeStream=function(){throw Error(ft(208))};Ql.renderToString=function(e,t){return zR(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Ql.version="18.3.1";var Rb={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OR=L;function Et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vr=null,Hr=0;function Ze(e,t){if(t.length!==0)if(512<t.length)0<Hr&&(e.enqueue(new Uint8Array(Vr.buffer,0,Hr)),Vr=new Uint8Array(512),Hr=0),e.enqueue(t);else{var n=Vr.length-Hr;n<t.length&&(n===0?e.enqueue(Vr):(Vr.set(t.subarray(0,n),Hr),e.enqueue(Vr),t=t.subarray(n)),Vr=new Uint8Array(512),Hr=0),Vr.set(t,Hr),Hr+=t.length}}function rn(e,t){return Ze(e,t),!0}function Bk(e){Vr&&0<Hr&&(e.enqueue(new Uint8Array(Vr.buffer,0,Hr)),Vr=null,Hr=0)}var BR=new TextEncoder;function St(e){return BR.encode(e)}function $e(e){return BR.encode(e)}function jR(e,t){typeof e.error=="function"?e.error(t):e.close()}var Ir=Object.prototype.hasOwnProperty,hZ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jk={},Uk={};function UR(e){return Ir.call(Uk,e)?!0:Ir.call(jk,e)?!1:hZ.test(e)?Uk[e]=!0:(jk[e]=!0,!1)}function Ar(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yn[e]=new Ar(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yn[t]=new Ar(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yn[e]=new Ar(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yn[e]=new Ar(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yn[e]=new Ar(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yn[e]=new Ar(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yn[e]=new Ar(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yn[e]=new Ar(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yn[e]=new Ar(e,5,!1,e.toLowerCase(),null,!1,!1)});var Db=/[\-:]([a-z])/g;function zb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Db,zb);Yn[t]=new Ar(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Db,zb);Yn[t]=new Ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Db,zb);Yn[t]=new Ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yn[e]=new Ar(e,1,!1,e.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new Ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yn[e]=new Ar(e,1,!1,e.toLowerCase(),null,!0,!0)});var bg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gZ=["Webkit","ms","Moz","O"];Object.keys(bg).forEach(function(e){gZ.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bg[t]=bg[e]})});var pZ=/["'&<>]/;function $n(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=pZ.exec(e);if(t){var n="",r,i=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==r&&(n+=e.substring(i,r)),i=r+1,n+=t}e=i!==r?n+e.substring(i,r):n}return e}var mZ=/([A-Z])/g,fZ=/^ms-/,ov=Array.isArray,_Z=$e("<script>"),yZ=$e("<\/script>"),vZ=$e('<script src="'),xZ=$e('<script type="module" src="'),$k=$e('" async=""><\/script>'),bZ=/(<\/|<)(s)(cript)/gi;function wZ(e,t,n,r){return""+t+(n==="s"?"\\u0073":"\\u0053")+r}function EZ(e,t,n,r,i){e=e===void 0?"":e,t=t===void 0?_Z:$e('<script nonce="'+$n(t)+'">');var s=[];if(n!==void 0&&s.push(t,St((""+n).replace(bZ,wZ)),yZ),r!==void 0)for(n=0;n<r.length;n++)s.push(vZ,St($n(r[n])),$k);if(i!==void 0)for(r=0;r<i.length;r++)s.push(xZ,St($n(i[r])),$k);return{bootstrapChunks:s,startInlineScript:t,placeholderPrefix:$e(e+"P:"),segmentPrefix:$e(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Gi(e,t){return{insertionMode:e,selectedValue:t}}function SZ(e){return Gi(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function AZ(e,t,n){switch(t){case"select":return Gi(1,n.value!=null?n.value:n.defaultValue);case"svg":return Gi(2,null);case"math":return Gi(3,null);case"foreignObject":return Gi(1,null);case"table":return Gi(4,null);case"thead":case"tbody":case"tfoot":return Gi(5,null);case"colgroup":return Gi(7,null);case"tr":return Gi(6,null)}return 4<=e.insertionMode||e.insertionMode===0?Gi(1,null):e}var Ob=$e("<!-- -->");function Gk(e,t,n,r){return t===""?r:(r&&e.push(Ob),e.push(St($n(t))),!0)}var Vk=new Map,kZ=$e(' style="'),Hk=$e(":"),CZ=$e(";");function $R(e,t,n){if(typeof n!="object")throw Error(Et(62));t=!0;for(var r in n)if(Ir.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=St($n(r));i=St($n((""+i).trim()))}else{s=r;var o=Vk.get(s);o!==void 0||(o=$e($n(s.replace(mZ,"-$1").toLowerCase().replace(fZ,"-ms-"))),Vk.set(s,o)),s=o,i=typeof i=="number"?i===0||Ir.call(bg,r)?St(""+i):St(i+"px"):St($n((""+i).trim()))}t?(t=!1,e.push(kZ,s,Hk,i)):e.push(CZ,s,Hk,i)}}t||e.push(jo)}var Vs=$e(" "),Ha=$e('="'),jo=$e('"'),Wk=$e('=""');function jr(e,t,n,r){switch(n){case"style":$R(e,t,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(t=Yn.hasOwnProperty(n)?Yn[n]:null,t!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=St(t.attributeName),t.type){case 3:r&&e.push(Vs,n,Wk);break;case 4:r===!0?e.push(Vs,n,Wk):r!==!1&&e.push(Vs,n,Ha,St($n(r)),jo);break;case 5:isNaN(r)||e.push(Vs,n,Ha,St($n(r)),jo);break;case 6:!isNaN(r)&&1<=r&&e.push(Vs,n,Ha,St($n(r)),jo);break;default:t.sanitizeURL&&(r=""+r),e.push(Vs,n,Ha,St($n(r)),jo)}}else if(UR(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(t=n.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(Vs,St(n),Ha,St($n(r)),jo)}}}var Hs=$e(">"),Xk=$e("/>");function wg(e,t,n){if(t!=null){if(n!=null)throw Error(Et(60));if(typeof t!="object"||!("__html"in t))throw Error(Et(61));t=t.__html,t!=null&&e.push(St(""+t))}}function TZ(e){var t="";return OR.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}var C0=$e(' selected=""');function T0(e,t,n,r){e.push(Vi(n));var i=n=null,s;for(s in t)if(Ir.call(t,s)){var o=t[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:jr(e,r,s,o)}}return e.push(Hs),wg(e,i,n),typeof n=="string"?(e.push(St($n(n))),null):n}var N0=$e(`
`),NZ=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Yk=new Map;function Vi(e){var t=Yk.get(e);if(t===void 0){if(!NZ.test(e))throw Error(Et(65,e));t=$e("<"+e),Yk.set(e,t)}return t}var LZ=$e("<!DOCTYPE html>");function IZ(e,t,n,r,i){switch(t){case"select":e.push(Vi("select"));var s=null,o=null;for(d in n)if(Ir.call(n,d)){var a=n[d];if(a!=null)switch(d){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:jr(e,r,d,a)}}return e.push(Hs),wg(e,o,s),s;case"option":o=i.selectedValue,e.push(Vi("option"));var l=a=null,c=null,d=null;for(s in n)if(Ir.call(n,s)){var u=n[s];if(u!=null)switch(s){case"children":a=u;break;case"selected":c=u;break;case"dangerouslySetInnerHTML":d=u;break;case"value":l=u;default:jr(e,r,s,u)}}if(o!=null)if(n=l!==null?""+l:TZ(a),ov(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){e.push(C0);break}}else""+o===n&&e.push(C0);else c&&e.push(C0);return e.push(Hs),wg(e,d,a),a;case"textarea":e.push(Vi("textarea")),d=o=s=null;for(a in n)if(Ir.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":d=l;break;case"value":s=l;break;case"defaultValue":o=l;break;case"dangerouslySetInnerHTML":throw Error(Et(91));default:jr(e,r,a,l)}if(s===null&&o!==null&&(s=o),e.push(Hs),d!=null){if(s!=null)throw Error(Et(92));if(ov(d)&&1<d.length)throw Error(Et(93));s=""+d}return typeof s=="string"&&s[0]===`
`&&e.push(N0),s!==null&&e.push(St($n(""+s))),null;case"input":e.push(Vi("input")),l=d=a=s=null;for(o in n)if(Ir.call(n,o)&&(c=n[o],c!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(Et(399,"input"));case"defaultChecked":l=c;break;case"defaultValue":a=c;break;case"checked":d=c;break;case"value":s=c;break;default:jr(e,r,o,c)}return d!==null?jr(e,r,"checked",d):l!==null&&jr(e,r,"checked",l),s!==null?jr(e,r,"value",s):a!==null&&jr(e,r,"value",a),e.push(Xk),null;case"menuitem":e.push(Vi("menuitem"));for(var h in n)if(Ir.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Et(400));default:jr(e,r,h,s)}return e.push(Hs),null;case"title":e.push(Vi("title")),s=null;for(u in n)if(Ir.call(n,u)&&(o=n[u],o!=null))switch(u){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(Et(434));default:jr(e,r,u,o)}return e.push(Hs),s;case"listing":case"pre":e.push(Vi(t)),o=s=null;for(l in n)if(Ir.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:jr(e,r,l,a)}if(e.push(Hs),o!=null){if(s!=null)throw Error(Et(60));if(typeof o!="object"||!("__html"in o))throw Error(Et(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?e.push(N0,St(n)):e.push(St(""+n)))}return typeof s=="string"&&s[0]===`
`&&e.push(N0),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(Vi(t));for(var g in n)if(Ir.call(n,g)&&(s=n[g],s!=null))switch(g){case"children":case"dangerouslySetInnerHTML":throw Error(Et(399,t));default:jr(e,r,g,s)}return e.push(Xk),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return T0(e,n,t,r);case"html":return i.insertionMode===0&&e.push(LZ),T0(e,n,t,r);default:if(t.indexOf("-")===-1&&typeof n.is!="string")return T0(e,n,t,r);e.push(Vi(t)),o=s=null;for(c in n)if(Ir.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":$R(e,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:UR(c)&&typeof a!="function"&&typeof a!="symbol"&&e.push(Vs,St(c),Ha,St($n(a)),jo)}return e.push(Hs),wg(e,o,s),s}}var PZ=$e("</"),MZ=$e(">"),FZ=$e('<template id="'),RZ=$e('"></template>'),DZ=$e("<!--$-->"),zZ=$e('<!--$?--><template id="'),OZ=$e('"></template>'),BZ=$e("<!--$!-->"),jZ=$e("<!--/$-->"),UZ=$e("<template"),$Z=$e('"'),GZ=$e(' data-dgst="');$e(' data-msg="');$e(' data-stck="');var VZ=$e("></template>");function qk(e,t,n){if(Ze(e,zZ),n===null)throw Error(Et(395));return Ze(e,n),rn(e,OZ)}var HZ=$e('<div hidden id="'),WZ=$e('">'),XZ=$e("</div>"),YZ=$e('<svg aria-hidden="true" style="display:none" id="'),qZ=$e('">'),ZZ=$e("</svg>"),JZ=$e('<math aria-hidden="true" style="display:none" id="'),QZ=$e('">'),KZ=$e("</math>"),eJ=$e('<table hidden id="'),tJ=$e('">'),nJ=$e("</table>"),rJ=$e('<table hidden><tbody id="'),iJ=$e('">'),sJ=$e("</tbody></table>"),oJ=$e('<table hidden><tr id="'),aJ=$e('">'),lJ=$e("</tr></table>"),cJ=$e('<table hidden><colgroup id="'),dJ=$e('">'),uJ=$e("</colgroup></table>");function hJ(e,t,n,r){switch(n.insertionMode){case 0:case 1:return Ze(e,HZ),Ze(e,t.segmentPrefix),Ze(e,St(r.toString(16))),rn(e,WZ);case 2:return Ze(e,YZ),Ze(e,t.segmentPrefix),Ze(e,St(r.toString(16))),rn(e,qZ);case 3:return Ze(e,JZ),Ze(e,t.segmentPrefix),Ze(e,St(r.toString(16))),rn(e,QZ);case 4:return Ze(e,eJ),Ze(e,t.segmentPrefix),Ze(e,St(r.toString(16))),rn(e,tJ);case 5:return Ze(e,rJ),Ze(e,t.segmentPrefix),Ze(e,St(r.toString(16))),rn(e,iJ);case 6:return Ze(e,oJ),Ze(e,t.segmentPrefix),Ze(e,St(r.toString(16))),rn(e,aJ);case 7:return Ze(e,cJ),Ze(e,t.segmentPrefix),Ze(e,St(r.toString(16))),rn(e,dJ);default:throw Error(Et(397))}}function gJ(e,t){switch(t.insertionMode){case 0:case 1:return rn(e,XZ);case 2:return rn(e,ZZ);case 3:return rn(e,KZ);case 4:return rn(e,nJ);case 5:return rn(e,sJ);case 6:return rn(e,lJ);case 7:return rn(e,uJ);default:throw Error(Et(397))}}var pJ=$e('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),mJ=$e('$RS("'),fJ=$e('","'),_J=$e('")<\/script>'),yJ=$e('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),vJ=$e('$RC("'),xJ=$e('","'),bJ=$e('")<\/script>'),wJ=$e('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),EJ=$e('$RX("'),SJ=$e('"'),AJ=$e(")<\/script>"),L0=$e(","),kJ=/[<\u2028\u2029]/g;function I0(e){return JSON.stringify(e).replace(kJ,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var _d=Object.assign,CJ=Symbol.for("react.element"),GR=Symbol.for("react.portal"),VR=Symbol.for("react.fragment"),HR=Symbol.for("react.strict_mode"),WR=Symbol.for("react.profiler"),XR=Symbol.for("react.provider"),YR=Symbol.for("react.context"),qR=Symbol.for("react.forward_ref"),ZR=Symbol.for("react.suspense"),JR=Symbol.for("react.suspense_list"),QR=Symbol.for("react.memo"),Bb=Symbol.for("react.lazy"),TJ=Symbol.for("react.scope"),NJ=Symbol.for("react.debug_trace_mode"),LJ=Symbol.for("react.legacy_hidden"),IJ=Symbol.for("react.default_value"),Zk=Symbol.iterator;function av(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case VR:return"Fragment";case GR:return"Portal";case WR:return"Profiler";case HR:return"StrictMode";case ZR:return"Suspense";case JR:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case YR:return(e.displayName||"Context")+".Consumer";case XR:return(e._context.displayName||"Context")+".Provider";case qR:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case QR:return t=e.displayName||null,t!==null?t:av(e.type)||"Memo";case Bb:t=e._payload,e=e._init;try{return av(e(t))}catch{}}return null}var KR={};function Jk(e,t){if(e=e.contextTypes,!e)return KR;var n={},r;for(r in e)n[r]=t[r];return n}var ea=null;function $m(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(e===null){if(n!==null)throw Error(Et(401))}else{if(n===null)throw Error(Et(401));$m(e,n)}t.context._currentValue=t.value}}function e3(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&e3(e)}function t3(e){var t=e.parent;t!==null&&t3(t),e.context._currentValue=e.value}function n3(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(Et(402));e.depth===t.depth?$m(e,t):n3(e,t)}function r3(e,t){var n=t.parent;if(n===null)throw Error(Et(402));e.depth===n.depth?$m(e,n):r3(e,n),t.context._currentValue=t.value}function Ip(e){var t=ea;t!==e&&(t===null?t3(e):e===null?e3(t):t.depth===e.depth?$m(t,e):t.depth>e.depth?n3(t,e):r3(t,e),ea=e)}var Qk={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function Kk(e,t,n,r){var i=e.state!==void 0?e.state:null;e.updater=Qk,e.props=n,e.state=i;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context=typeof o=="object"&&o!==null?o._currentValue:r,o=t.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:_d({},i,o),e.state=i),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&Qk.enqueueReplaceState(e,e.state,null),s.queue!==null&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&t.length===1)e.state=t[0];else{for(s=o?t[0]:e.state,i=!0,o=o?1:0;o<t.length;o++){var a=t[o];a=typeof a=="function"?a.call(e,s,n,r):a,a!=null&&(i?(i=!1,s=_d({},s,a)):_d(s,a))}e.state=s}else s.queue=null}var PJ={id:1,overflow:""};function lv(e,t,n){var r=e.id;e=e.overflow;var i=32-Eg(r)-1;r&=~(1<<i),n+=1;var s=32-Eg(t)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-Eg(t)+i|n<<i|r,overflow:s+e}}return{id:1<<s|n<<i|r,overflow:e}}var Eg=Math.clz32?Math.clz32:RJ,MJ=Math.log,FJ=Math.LN2;function RJ(e){return e>>>=0,e===0?32:31-(MJ(e)/FJ|0)|0}function DJ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zJ=typeof Object.is=="function"?Object.is:DJ,Is=null,jb=null,Sg=null,Yt=null,Xc=!1,Pp=!1,nu=0,so=null,Gm=0;function Uo(){if(Is===null)throw Error(Et(321));return Is}function eC(){if(0<Gm)throw Error(Et(312));return{memoizedState:null,queue:null,next:null}}function Ub(){return Yt===null?Sg===null?(Xc=!1,Sg=Yt=eC()):(Xc=!0,Yt=Sg):Yt.next===null?(Xc=!1,Yt=Yt.next=eC()):(Xc=!0,Yt=Yt.next),Yt}function $b(){jb=Is=null,Pp=!1,Sg=null,Gm=0,Yt=so=null}function i3(e,t){return typeof t=="function"?t(e):t}function tC(e,t,n){if(Is=Uo(),Yt=Ub(),Xc){var r=Yt.queue;if(t=r.dispatch,so!==null&&(n=so.get(r),n!==void 0)){so.delete(r),r=Yt.memoizedState;do r=e(r,n.action),n=n.next;while(n!==null);return Yt.memoizedState=r,[r,t]}return[Yt.memoizedState,t]}return e=e===i3?typeof t=="function"?t():t:n!==void 0?n(t):t,Yt.memoizedState=e,e=Yt.queue={last:null,dispatch:null},e=e.dispatch=OJ.bind(null,Is,e),[Yt.memoizedState,e]}function nC(e,t){if(Is=Uo(),Yt=Ub(),t=t===void 0?null:t,Yt!==null){var n=Yt.memoizedState;if(n!==null&&t!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!zJ(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),Yt.memoizedState=[e,t],e}function OJ(e,t,n){if(25<=Gm)throw Error(Et(301));if(e===Is)if(Pp=!0,e={action:n,next:null},so===null&&(so=new Map),n=so.get(t),n===void 0)so.set(t,e);else{for(t=n;t.next!==null;)t=t.next;t.next=e}}function BJ(){throw Error(Et(394))}function Uh(){}var rC={readContext:function(e){return e._currentValue},useContext:function(e){return Uo(),e._currentValue},useMemo:nC,useReducer:tC,useRef:function(e){Is=Uo(),Yt=Ub();var t=Yt.memoizedState;return t===null?(e={current:e},Yt.memoizedState=e):t},useState:function(e){return tC(i3,e)},useInsertionEffect:Uh,useLayoutEffect:function(){},useCallback:function(e,t){return nC(function(){return e},t)},useImperativeHandle:Uh,useEffect:Uh,useDebugValue:Uh,useDeferredValue:function(e){return Uo(),e},useTransition:function(){return Uo(),[!1,BJ]},useId:function(){var e=jb.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-Eg(e)-1)).toString(32)+t;var n=Ag;if(n===null)throw Error(Et(404));return t=nu++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Uo(),t(e._source)},useSyncExternalStore:function(e,t,n){if(n===void 0)throw Error(Et(407));return n()}},Ag=null,P0=OR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function jJ(e){return console.error(e),null}function Yc(){}function UJ(e,t,n,r,i,s,o,a,l){var c=[],d=new Set;return t={destination:null,responseState:t,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:d,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?jJ:i,onAllReady:s===void 0?Yc:s,onShellReady:o===void 0?Yc:o,onShellError:a===void 0?Yc:a,onFatalError:l===void 0?Yc:l},n=Mp(t,0,null,n,!1,!1),n.parentFlushed=!0,e=Gb(t,e,null,n,d,KR,null,PJ),c.push(e),t}function Gb(e,t,n,r,i,s,o,a){e.allPendingTasks++,n===null?e.pendingRootTasks++:n.pendingTasks++;var l={node:t,ping:function(){var c=e.pingedTasks;c.push(l),c.length===1&&a3(e)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(l),l}function Mp(e,t,n,r,i,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function ru(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Fp(e,t){var n=e.onShellError;n(t),n=e.onFatalError,n(t),e.destination!==null?(e.status=2,jR(e.destination,t)):(e.status=1,e.fatalError=t)}function iC(e,t,n,r,i){for(Is={},jb=t,nu=0,e=n(r,i);Pp;)Pp=!1,nu=0,Gm+=1,Yt=null,e=n(r,i);return $b(),e}function sC(e,t,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=t.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Et(108,av(r)||"Unknown",a));r=_d({},o,n)}t.legacyContext=r,Wr(e,t,i),t.legacyContext=o}else Wr(e,t,i)}function oC(e,t){if(e&&e.defaultProps){t=_d({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cv(e,t,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=Jk(n,t.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue:i),Kk(s,n,r,i),sC(e,t,s,n)}else{s=Jk(n,t.legacyContext),i=iC(e,t,n,r,s);var o=nu!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)Kk(i,n,r,s),sC(e,t,i,n);else if(o){r=t.treeContext,t.treeContext=lv(r,1,0);try{Wr(e,t,i)}finally{t.treeContext=r}}else Wr(e,t,i)}else if(typeof n=="string"){switch(i=t.blockedSegment,s=IZ(i.chunks,n,r,e.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=AZ(o,n,r),dv(e,t,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(PZ,St(n),MZ)}i.lastPushedText=!1}else{switch(n){case LJ:case NJ:case HR:case WR:case VR:Wr(e,t,r.children);return;case JR:Wr(e,t,r.children);return;case TJ:throw Error(Et(343));case ZR:e:{n=t.blockedBoundary,i=t.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},l=Mp(e,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var c=Mp(e,0,null,i.formatContext,!1,!1);c.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=c;try{if(dv(e,t,r),c.lastPushedText&&c.textEmbedded&&c.chunks.push(Ob),c.status=1,Rp(a,c),a.pendingTasks===0)break e}catch(d){c.status=4,a.forceClientRender=!0,a.errorDigest=ru(e,d)}finally{t.blockedBoundary=n,t.blockedSegment=i}t=Gb(e,s,n,l,o,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case qR:if(r=iC(e,t,n.render,r,i),nu!==0){n=t.treeContext,t.treeContext=lv(n,1,0);try{Wr(e,t,r)}finally{t.treeContext=n}}else Wr(e,t,r);return;case QR:n=n.type,r=oC(n,r),cv(e,t,n,r,i);return;case XR:if(i=r.children,n=n._context,r=r.value,s=n._currentValue,n._currentValue=r,o=ea,ea=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},t.context=r,Wr(e,t,i),e=ea,e===null)throw Error(Et(403));r=e.parentValue,e.context._currentValue=r===IJ?e.context._defaultValue:r,e=ea=e.parent,t.context=e;return;case YR:r=r.children,r=r(n._currentValue),Wr(e,t,r);return;case Bb:i=n._init,n=i(n._payload),r=oC(n,r),cv(e,t,n,r,void 0);return}throw Error(Et(130,n==null?n:typeof n,""))}}function Wr(e,t,n){if(t.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case CJ:cv(e,t,n.type,n.props,n.ref);return;case GR:throw Error(Et(257));case Bb:var r=n._init;n=r(n._payload),Wr(e,t,n);return}if(ov(n)){aC(e,t,n);return}if(n===null||typeof n!="object"?r=null:(r=Zk&&n[Zk]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);aC(e,t,i)}return}throw e=Object.prototype.toString.call(n),Error(Et(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}typeof n=="string"?(r=t.blockedSegment,r.lastPushedText=Gk(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText)):typeof n=="number"&&(r=t.blockedSegment,r.lastPushedText=Gk(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function aC(e,t,n){for(var r=n.length,i=0;i<r;i++){var s=t.treeContext;t.treeContext=lv(s,r,i);try{dv(e,t,n[i])}finally{t.treeContext=s}}}function dv(e,t,n){var r=t.blockedSegment.formatContext,i=t.legacyContext,s=t.context;try{return Wr(e,t,n)}catch(l){if($b(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var o=t.blockedSegment,a=Mp(e,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=Gb(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,Ip(s)}else throw t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,Ip(s),l}}function $J(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,o3(this,t,e)}function s3(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,r===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=n===void 0?Error(Et(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return s3(i,t,n)}),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(r=t.onAllReady,r()))}function Rp(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,n.status===1&&Rp(e,n)}else e.completedSegments.push(t)}function o3(e,t,n){if(t===null){if(n.parentFlushed){if(e.completedRootSegment!==null)throw Error(Et(389));e.completedRootSegment=n}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=Yc,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(n.parentFlushed&&n.status===1&&Rp(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach($J,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Rp(t,n),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function a3(e){if(e.status!==2){var t=ea,n=P0.current;P0.current=rC;var r=Ag;Ag=e.responseState;try{var i=e.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=e,l=o.blockedSegment;if(l.status===0){Ip(o.context);try{Wr(a,o,o.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(Ob),o.abortSet.delete(o),l.status=1,o3(a,o.blockedBoundary,l)}catch(p){if($b(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var c=o.ping;p.then(c,c)}else{o.abortSet.delete(o),l.status=4;var d=o.blockedBoundary,u=p,h=ru(a,u);if(d===null?Fp(a,u):(d.pendingTasks--,d.forceClientRender||(d.forceClientRender=!0,d.errorDigest=h,d.parentFlushed&&a.clientRenderedBoundaries.push(d))),a.allPendingTasks--,a.allPendingTasks===0){var g=a.onAllReady;g()}}}finally{}}}i.splice(0,s),e.destination!==null&&Vb(e,e.destination)}catch(p){ru(e,p),Fp(e,p)}finally{Ag=r,P0.current=n,n===rC&&Ip(t)}}}function $h(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,Ze(t,FZ),Ze(t,e.placeholderPrefix),e=St(r.toString(16)),Ze(t,e),rn(t,RZ);case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)Ze(t,r[s]);i=Vm(e,t,i)}for(;s<r.length-1;s++)Ze(t,r[s]);return s<r.length&&(i=rn(t,r[s])),i;default:throw Error(Et(390))}}function Vm(e,t,n){var r=n.boundary;if(r===null)return $h(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,rn(t,BZ),Ze(t,UZ),r&&(Ze(t,GZ),Ze(t,St($n(r))),Ze(t,$Z)),rn(t,VZ),$h(e,t,n);else if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var i=e.responseState,s=i.nextSuspenseID++;i=$e(i.boundaryPrefix+s.toString(16)),r=r.id=i,qk(t,e.responseState,r),$h(e,t,n)}else if(r.byteSize>e.progressiveChunkSize)r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),qk(t,e.responseState,r.id),$h(e,t,n);else{if(rn(t,DZ),n=r.completedSegments,n.length!==1)throw Error(Et(391));Vm(e,t,n[0])}return rn(t,jZ)}function lC(e,t,n){return hJ(t,e.responseState,n.formatContext,n.id),Vm(e,t,n),gJ(t,n.formatContext)}function cC(e,t,n){for(var r=n.completedSegments,i=0;i<r.length;i++)l3(e,t,n,r[i]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,Ze(t,e.startInlineScript),e.sentCompleteBoundaryFunction?Ze(t,vJ):(e.sentCompleteBoundaryFunction=!0,Ze(t,yJ)),r===null)throw Error(Et(395));return n=St(n.toString(16)),Ze(t,r),Ze(t,xJ),Ze(t,e.segmentPrefix),Ze(t,n),rn(t,bJ)}function l3(e,t,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Et(392));return lC(e,t,r)}return lC(e,t,r),e=e.responseState,Ze(t,e.startInlineScript),e.sentCompleteSegmentFunction?Ze(t,mJ):(e.sentCompleteSegmentFunction=!0,Ze(t,pJ)),Ze(t,e.segmentPrefix),i=St(i.toString(16)),Ze(t,i),Ze(t,fJ),Ze(t,e.placeholderPrefix),Ze(t,i),rn(t,_J)}function Vb(e,t){Vr=new Uint8Array(512),Hr=0;try{var n=e.completedRootSegment;if(n!==null&&e.pendingRootTasks===0){Vm(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)Ze(t,r[n]);n<r.length&&rn(t,r[n])}var i=e.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=t;var a=e.responseState,l=o.id,c=o.errorDigest,d=o.errorMessage,u=o.errorComponentStack;if(Ze(r,a.startInlineScript),a.sentClientRenderFunction?Ze(r,EJ):(a.sentClientRenderFunction=!0,Ze(r,wJ)),l===null)throw Error(Et(395));Ze(r,l),Ze(r,SJ),(c||d||u)&&(Ze(r,L0),Ze(r,St(I0(c||"")))),(d||u)&&(Ze(r,L0),Ze(r,St(I0(d||"")))),u&&(Ze(r,L0),Ze(r,St(I0(u)))),rn(r,AJ)}i.splice(0,s);var h=e.completedBoundaries;for(s=0;s<h.length;s++)cC(e,t,h[s]);h.splice(0,s),Bk(t),Vr=new Uint8Array(512),Hr=0;var g=e.partialBoundaries;for(s=0;s<g.length;s++){var p=g[s];e:{i=e,o=t;var m=p.completedSegments;for(a=0;a<m.length;a++)if(!l3(i,o,p,m[a])){a++,m.splice(0,a);var f=!1;break e}m.splice(0,a),f=!0}if(!f){e.destination=null,s++,g.splice(0,s);return}}g.splice(0,s);var y=e.completedBoundaries;for(s=0;s<y.length;s++)cC(e,t,y[s]);y.splice(0,s)}finally{Bk(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function dC(e,t){try{var n=e.abortableTasks;n.forEach(function(r){return s3(r,e,t)}),n.clear(),e.destination!==null&&Vb(e,e.destination)}catch(r){ru(e,r),Fp(e,r)}}Rb.renderToReadableStream=function(e,t){return new Promise(function(n,r){var i,s,o=new Promise(function(d,u){s=d,i=u}),a=UJ(e,EZ(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),SZ(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,s,function(){var d=new ReadableStream({type:"bytes",pull:function(u){if(a.status===1)a.status=2,jR(u,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=u;try{Vb(a,u)}catch(h){ru(a,h),Fp(a,h)}}},cancel:function(){dC(a)}},{highWaterMark:0});d.allReady=o,n(d)},function(d){o.catch(function(){}),r(d)},i);if(t&&t.signal){var l=t.signal,c=function(){dC(a,l.reason),l.removeEventListener("abort",c)};l.addEventListener("abort",c)}a3(a)})};Rb.version="18.3.1";var Kl,c3;Kl=Ql,c3=Rb;Kl.version;var uv=Kl.renderToString;Kl.renderToStaticMarkup;Kl.renderToNodeStream;Kl.renderToStaticNodeStream;c3.renderToReadableStream;var d3={exports:{}},Ec={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC;function GJ(){if(uC)return Ec;uC=1;var e=E,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var d,u={},h=null,g=null;c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),l.ref!==void 0&&(g=l.ref);for(d in l)r.call(l,d)&&!s.hasOwnProperty(d)&&(u[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)u[d]===void 0&&(u[d]=l[d]);return{$$typeof:t,type:a,key:h,ref:g,props:u,_owner:i.current}}return Ec.Fragment=n,Ec.jsx=o,Ec.jsxs=o,Ec}d3.exports=GJ();var hC=d3.exports;const u3=L.createContext(void 0),cr=()=>{const e=L.useContext(u3);if(!e)throw new Error("useOgma must be used within an OgmaProvider");return e},gC={},VJ=({options:e=gC,children:t,graph:n,onReady:r},i)=>{const[s,o]=L.useState(!1),[a,l]=L.useState(),[c,d]=L.useState(null),[u,h]=L.useState(),[g,p]=L.useState(gC);return L.useImperativeHandle(i,()=>a,[a]),L.useEffect(()=>{if(c){const m=new Fq({container:c,graph:n,options:e});l(m),o(!0),r&&r(m)}},[l,c]),L.useLayoutEffect(()=>{const m=()=>a==null?void 0:a.view.forceResize();return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),L.useEffect(()=>{a&&(n&&a&&n!==u&&(h(n),a.setGraph(n)),e&&g!==e&&(p(e),a.setOptions(e)))},[n,e]),hC.jsx(u3.Provider,{value:a,children:hC.jsx("div",{style:{width:"100%",height:"100%"},ref:m=>d(m),children:s&&t})})},HJ=L.forwardRef(VJ),WJ=({selector:e,attributes:t},n)=>{const r=cr(),[i,s]=L.useState();return L.useImperativeHandle(n,()=>i,[i]),L.useEffect(()=>{const o=e?r.styles.addNodeRule(e,t):r.styles.addNodeRule(t);return s(o),()=>{o.destroy(),s(void 0)}},[e,t]),null};L.forwardRef(WJ);const XJ=({selector:e,attributes:t},n)=>{const r=cr(),[i,s]=L.useState();return L.useImperativeHandle(n,()=>i,[i]),L.useEffect(()=>{const o=e?r.styles.addEdgeRule(e,t):r.styles.addEdgeRule(t);return s(o),()=>{o.destroy(),s(void 0)}},[e,t]),null};L.forwardRef(XJ);function Ia(e,t,n){t===e.isEnabled()&&(t?e.disable(n):e.enable(n))}function Pa(e,t,n){const r=({target:l})=>{l===t&&e.onEnabled&&e.onEnabled(t)},i=({target:l})=>{l===t&&e.onDisabled&&e.onDisabled(t)},s=({target:l})=>{l===t&&e.onUpdated&&e.onUpdated(t)},o=({target:l,index:c})=>{l===t&&e.onSetIndex&&e.onSetIndex(t,c)},a=({target:l})=>{l===t&&(e.onDestroyed&&e.onDestroyed(t),n.events.off(r).off(i).off(s).off(o).off(a))};return n.events.on("transformationEnabled",r).on("transformationDisabled",i).on("transformationDestroyed",a).on("transformationSetIndex",o).on("transformationRefresh",s),()=>{n.events.off(r).off(i).off(s).off(o).off(a)}}function YJ(e,t){const n=cr(),[r,i]=L.useState();return L.useImperativeHandle(t,()=>r,[r]),L.useEffect(()=>{const s=n.transformations.addNodeGrouping({...e,enabled:!e.disabled});return Pa(e,s,n),i(s),()=>{s.destroy(),i(void 0)}},[]),L.useEffect(()=>{r&&Ia(r,!!e.disabled,e.duration)},[e.disabled]),L.useEffect(()=>{r==null||r.setOptions(e)},[e.groupIdFunction,e.groupSelfLoopEdges,e.edgeGenerator,e.nodeGenerator,e.groupEdges,e.padding,e.selector,e.showContents,e.separateEdgesByDirection]),null}L.forwardRef(YJ);function qJ(e,t){const n=cr(),[r,i]=L.useState();return L.useImperativeHandle(t,()=>r,[r]),L.useEffect(()=>{const s=n.transformations.addEdgeGrouping({...e,enabled:!e.disabled});return Pa(e,s,n),i(s),()=>{s.destroy(),i(void 0)}},[]),L.useEffect(()=>{r&&Ia(r,!!e.disabled,e.duration)},[e.disabled]),L.useEffect(()=>{r==null||r.setOptions(e)},[e.selector,e.generator,e.groupIdFunction,e.separateEdgesByDirection]),null}L.forwardRef(qJ);function ZJ(e,t){const n=cr(),[r,i]=L.useState();return L.useImperativeHandle(t,()=>r,[r]),L.useEffect(()=>{const s=n.transformations.addNodeCollapsing({...e,enabled:!e.disabled});return Pa(e,s,n),i(s),()=>{s.destroy(),i(void 0)}},[]),L.useEffect(()=>{r&&Ia(r,!!e.disabled,e.duration)},[e.disabled]),L.useEffect(()=>{r==null||r.setOptions(e)},[e.edgeGenerator,e.selector]),null}L.forwardRef(ZJ);function JJ(e,t){const n=cr(),[r,i]=L.useState();return L.useImperativeHandle(t,()=>r,[r]),L.useEffect(()=>{const s=n.transformations.addNeighborMerging({...e,enabled:!e.disabled});return Pa(e,s,n),i(s),()=>{s.destroy(),i(void 0)}},[]),L.useEffect(()=>{r&&Ia(r,!!e.disabled,e.duration)},[e.disabled]),L.useEffect(()=>{r==null||r.setOptions(e)},[e.dataFunction,e.selector]),null}L.forwardRef(JJ);function QJ(e,t){const n=cr(),[r,i]=L.useState();return L.useImperativeHandle(t,()=>r,[r]),L.useEffect(()=>{const s=n.transformations.addNeighborGeneration({...e,enabled:!e.disabled});return Pa(e,s,n),i(s),()=>{s.destroy(),i(void 0)}},[]),L.useEffect(()=>{r&&Ia(r,!!e.disabled,e.duration)},[e.disabled]),L.useEffect(()=>{r==null||r.setOptions(e)},[e.edgeGenerator,e.nodeGenerator,e.neighborIdFunction,e.selector]),null}L.forwardRef(QJ);function KJ(e,t){const n=cr(),[r,i]=L.useState();return L.useImperativeHandle(t,()=>r,[r]),L.useEffect(()=>{const s=n.transformations.addEdgeFilter({...e,enabled:!e.disabled});return Pa(e,s,n),i(s),()=>{s.destroy(),i(void 0)}},[]),L.useEffect(()=>{r&&Ia(r,!!e.disabled,e.duration)},[e.disabled]),L.useEffect(()=>{r==null||r.setOptions(e)},[e.criteria]),null}L.forwardRef(KJ);function eQ(e,t){const n=cr(),[r,i]=L.useState();return L.useImperativeHandle(t,()=>r,[r]),L.useEffect(()=>{const s=n.transformations.addNodeFilter({...e,enabled:!e.disabled});return Pa(e,s,n),i(s),()=>{s.destroy(),i(void 0)}},[]),L.useEffect(()=>{r&&Ia(r,!!e.disabled,e.duration)},[e.disabled]),L.useEffect(()=>{r==null||r.setOptions(e)},[e.criteria]),null}L.forwardRef(eQ);function hv(e,t,n,r){return typeof n=="string"?n:uv(typeof n=="function"?n(e,t):r)}function Wl(e,t){return typeof e=="function"?e(t):e}const Dp=(e,t)=>`${e} ${e}--${t}`;function pC(e="&times;",t){if(e){const n=typeof e=="string"?e:uv(e);return`<div class=${t}>${n}</div>`}return""}function tQ(e,t,n,r){const{width:i,height:s}=r.view.getSize(),{x:o,y:a}=r.view.graphToScreenCoordinates(e);let l=t;const{width:c,height:d}=n;return t==="left"&&o-c<0?l="right":t==="right"&&o+c>i?l="left":t==="bottom"&&a+d>s?l="top":t==="top"&&a-d<0&&(l="bottom"),l==="right"||l==="left"?a+d/2>s?l="top":a-d/2<0&&(l="bottom"):o+c/2>i?l="left":o-c/2<0&&(l="right"),l}function nQ(){}const M0={x:-9999,y:-9999},rQ="ogma-popup--content",iQ="ogma-popup--close",sQ="ogma-popup--body",oQ="ogma-popup",aQ=({content:e,position:t,children:n,isOpen:r=!0,closeButton:i,onClose:s=nQ,placement:o="top",popupClass:a=oQ,closeButtonClass:l=iQ,contentClass:c=rQ,popupBodyClass:d=sQ,size:u,closeOnEsc:h=!0},g)=>{const p=cr(),[m,f]=L.useState(null);return L.useImperativeHandle(g,()=>m,[m]),L.useEffect(()=>{const y=Wl(t,p)||M0,_=hv(p,y,e,n),v=p.layers.addOverlay({position:y||M0,element:`<div class="${Dp(a,o)}"/>
          <div class="${d}">
            ${pC(i,l)}
            <div class="${c} ">${_}</div>
          </div>
        </div>`,size:u||{width:"auto",height:"auto"},scaled:!1}),x=w=>{const S=v.element.querySelector(`.${l}`);w.target&&S.contains(w.target)&&(w.stopPropagation(),w.preventDefault(),s())},b=({code:w})=>{w===27&&s()};return h&&p.events.on("keyup",b),v.element.addEventListener("click",x),f(v),r||v.hide(),()=>{m&&(m.element.removeEventListener("click",x),p.events.off(b),m.destroy(),f(null))}},[]),L.useEffect(()=>{if(m){const y=Wl(t,p)||M0,_=hv(p,y,e),{element:v}=m;v.className=Dp(a,o),v.querySelector(`.${d}`).innerHTML=`
      ${pC(i,l)}
      <div class="${c} ">${_}</div>`,m.setPosition(y),r?m.show():m.hide()}},[e,t,r,o]),!m||!n?null:To.createPortal(n,m.element.querySelector(`.${d}`))};L.forwardRef(aQ);const lQ=({tooltipClass:e="ogma-tooltip",placement:t="right",position:n,size:r={width:"auto",height:"auto"},children:i,content:s,visible:o=!0},a)=>{const l=cr(),[c,d]=L.useState(),[u,h]=L.useState(),[g,p]=L.useState(""),[m,f]=L.useState(),y=L.useRef();return L.useImperativeHandle(a,()=>c,[c]),L.useEffect(()=>{const _=`<div class="${Dp(e,t)}"><div class="${e}--content" /></div>`,v=Wl(n,l);h(v);const x=l.layers.addOverlay({position:v||{x:-9999,y:-9999},element:_,scaled:!1,size:r});return d(x),()=>{x.destroy()}},[]),L.useEffect(()=>{const _=hv(l,u,s,i);if(c){_!==g&&(c.element.firstElementChild.innerHTML=_,p(_),f({width:c.element.offsetWidth,height:c.element.offsetHeight}));const v=Wl(n,l);u!==v&&h(v),o?c.show():c.hide()}return y.current=requestAnimationFrame(()=>{c&&u&&m&&(c.element.className=Dp(e,tQ(u,t,m,l)),c.setPosition(u))}),()=>cancelAnimationFrame(y.current)},[i,s,n,o]),null};L.forwardRef(lQ);const cQ=({noClear:e=!1,isStatic:t=!1,render:n,index:r,visible:i},s)=>{const o=cr(),[a,l]=L.useState(null);return L.useImperativeHandle(s,()=>a,[a]),L.useEffect(()=>{const c=o.layers.addCanvasLayer(n,{isStatic:t,noClear:e},r);return l(c),()=>{c&&(c.destroy(),l(null))}},[]),L.useEffect(()=>{a&&(r!==void 0&&isFinite(r)&&a.moveTo(r),i===a.isHidden()&&i?a.show():a.hide())},[a,r,i]),null};L.forwardRef(cQ);const F0={x:-9999,y:-9999};L.forwardRef(({position:e,children:t,className:n="",size:r,scaled:i},s)=>{const o=cr(),[a,l]=L.useState(null);return L.useImperativeHandle(s,()=>a,[a]),L.useEffect(()=>{const c=Wl(e,o)||F0,d=document.createElement("div");d.className=n;const u=o.layers.addOverlay({position:c||F0,element:d,size:r||{width:"auto",height:"auto"},scaled:i});return l(u),()=>{a&&(a.destroy(),l(null))}},[]),L.useEffect(()=>{if(a){const c=Wl(e,o)||F0;n&&(a.element.className=n),a.setPosition(c)}},[e,n]),a?To.createPortal(t,a.element):null});const dQ=L.forwardRef(({children:e,className:t="",index:n},r)=>{const i=cr(),[s,o]=L.useState(null);return L.useImperativeHandle(r,()=>s,[s]),L.useEffect(()=>{const a=document.createElement("div");a.className=t;const l=i.layers.addLayer(a,n);return o(l),()=>{s&&(s.destroy(),o(null))}},[]),L.useEffect(()=>{s&&(s.element.className=t)},[t]),s?To.createPortal(e,s.element):null});var uQ=Object.defineProperty,hQ=(e,t,n)=>t in e?uQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,je=(e,t,n)=>(hQ(e,typeof t!="symbol"?t+"":t,n),n);let Hm=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const iu={strokeType:"plain",strokeColor:"black",strokeWidth:1,head:"none",tail:"none"},mC={id:0,type:"Feature",properties:{type:"arrow",style:{...iu}},geometry:{type:"LineString",coordinates:[[0,0],[100,100]]}},h3=(e=0,t=0,n=0,r=0,i={...iu})=>({id:Hm(),type:"Feature",properties:{type:"arrow",style:{...iu,...i}},geometry:{type:"LineString",coordinates:[[e,t],[n,r]]}}),gQ="http://www.w3.org/2000/svg";function yd(e){return document.createElementNS(gQ,e)}function g3(e){return e.geometry.bbox||pQ(e),e.geometry.bbox}function _s(e){const t=g3(e);return{width:t[2]-t[0],height:t[3]-t[1]}}function hs(e){const t=g3(e);return{x:t[0],y:t[1]}}function pQ(e){const[t,n]=e.geometry.coordinates[0][0],[r,i]=e.geometry.coordinates[0][2];e.geometry.bbox=[t,n,r,i]}function mQ(e,t,n,r,i){e.geometry.bbox=[t,n,t+r,n+i],e.geometry.coordinates=[[[t,n],[t+r,n],[t+r,n+i],[t,n+i],[t,n]]]}function vd(e){const[t,n]=e.geometry.coordinates[0];return{x:t,y:n}}function Gh(e,t){const[n,r]=e.geometry.coordinates[t==="start"?0:1];return{x:n,y:r}}function zp(e){const[t,n]=e.geometry.coordinates[1];return{x:t,y:n}}function p3(e,t,n){e.geometry.coordinates[0]=[t,n]}function m3(e,t,n){e.geometry.coordinates[1]=[t,n]}function Op(e){return{start:vd(e),end:zp(e)}}function Ua(e,t,n,r){t==="start"?p3(e,n,r):m3(e,n,r)}const f3=e=>parseInt(e.getAttribute("data-handle-id")||"-1");function fQ(e){return Array.isArray(e)&&e.length===2&&e.every(isFinite)}function _Q(e,t,n,r){for(let i=0;i<e.coordinates.length;i++){const s=e.coordinates[i];if(fQ(s))s[0]=n+(s[0]-n)*t,s[1]=r+(s[1]-r)*t;else for(let o=0;o<s.length;o++){const a=s[o];a[0]=n+(a[0]-n)*t,a[1]=r+(a[1]-r)*t}}return e}function Vh(e,t,n){const r=Math.atan2(e.y-t.y,e.x-t.x);return{x:t.x+n*Math.cos(r),y:t.y+n*Math.sin(r)}}function gv(e,t){if(!t)return{x:e.clientX,y:e.clientY};const n=t.getBoundingClientRect();return{x:e.clientX-n.left-t.clientLeft,y:e.clientY-n.top-t.clientTop}}const aa=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Sl=e=>Math.sqrt(e.x*e.x+e.y*e.y),_3=e=>({x:-e.x,y:-e.y}),y3=e=>{const t=Sl(e);return t===0?{x:0,y:0}:{x:e.x/t,y:e.y/t}},pl=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),v3=(e,t)=>({x:e.x*t,y:e.y*t}),Hh=(e,t)=>({x:e.x*t.x,y:e.y*t.y}),ui=(e,t)=>{const n=Math.sin(t),r=Math.cos(t);return{x:e.x*r-e.y*n,y:e.x*n+e.y*r}},yQ=(e,t)=>({x:e.x/t,y:e.y/t}),fC=(e,t)=>e.x*t.x+e.y*t.y;function x3(e,t=5,n=30){var r;const{start:i,end:s}=Op(e),o=aa(s,i),a=e.properties.style&&e.properties.style.strokeWidth?(r=e.properties.style)==null?void 0:r.strokeWidth:0;return Math.min(n,Math.max(3*a,Sl(o)*.1,t))}function _C(e,t,n,r){const i=v3(_3(y3(t)),r);if(!n||n==="none")return"";const s=pl(e,ui(i,Math.PI/8)),o=pl(e,ui(i,-Math.PI/8)),a=`${e.x} ${e.y}`;return`M ${s.x} ${s.y} L ${a} ${o.x} ${o.y} ${n==="arrow"?"":`${s.x} ${s.y}`}`}function vQ(e,t,n,r,i){const{start:s,end:o}=Op(e),{tail:a,head:l,strokeColor:c,strokeWidth:d}=e.properties.style||n,u=aa(o,s),h=x3(e,r,i),g=yd("path");g.setAttribute("data-annotation",`${e.id}`),g.setAttribute("data-annotation-type","arrow");const p=l==="arrow-plain"||a==="arrow";g.setAttribute("stroke",c||"none"),g.setAttribute("stroke-width",`${d}`),g.setAttribute("fill",p?c||"":"none"),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round");const m=_C(s,_3(u),a,h),f=_C(o,u,l,h),y=m+`M ${s.x} ${s.y} ${o.x} ${o.y}`+f;g.setAttribute("d",y),t.appendChild(g)}const Tn=-1,Bp="dragging",jp="dragstart",Xl="dragend",pv="select",mv="unselect",xQ="hover",bQ="unhover",fv="remove",_v="add",wQ="cancelDrawing",yv="update",EQ="link";var SQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function b3(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var w3={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,d){this.fn=l,this.context=c,this.once=d||!1}function s(l,c,d,u,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new i(d,u||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],g]:l._events[p].push(g):(l._events[p]=g,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,d;if(this._eventsCount===0)return l;for(d in c=this._events)t.call(c,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=n?n+l:l,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var u=0,h=d.length,g=new Array(h);u<h;u++)g[u]=d[u].fn;return g},a.prototype.listenerCount=function(l){var c=n?n+l:l,d=this._events[c];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,c,d,u,h,g){var p=n?n+l:l;if(!this._events[p])return!1;var m=this._events[p],f=arguments.length,y,_;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),f){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,d),!0;case 4:return m.fn.call(m.context,c,d,u),!0;case 5:return m.fn.call(m.context,c,d,u,h),!0;case 6:return m.fn.call(m.context,c,d,u,h,g),!0}for(_=1,y=new Array(f-1);_<f;_++)y[_-1]=arguments[_];m.fn.apply(m.context,y)}else{var v=m.length,x;for(_=0;_<v;_++)switch(m[_].once&&this.removeListener(l,m[_].fn,void 0,!0),f){case 1:m[_].fn.call(m[_].context);break;case 2:m[_].fn.call(m[_].context,c);break;case 3:m[_].fn.call(m[_].context,c,d);break;case 4:m[_].fn.call(m[_].context,c,d,u);break;default:if(!y)for(x=1,y=new Array(f-1);x<f;x++)y[x-1]=arguments[x];m[_].fn.apply(m[_].context,y)}}return!0},a.prototype.on=function(l,c,d){return s(this,l,c,d,!1)},a.prototype.once=function(l,c,d){return s(this,l,c,d,!0)},a.prototype.removeListener=function(l,c,d,u){var h=n?n+l:l;if(!this._events[h])return this;if(!c)return o(this,h),this;var g=this._events[h];if(g.fn)g.fn===c&&(!u||g.once)&&(!d||g.context===d)&&o(this,h);else{for(var p=0,m=[],f=g.length;p<f;p++)(g[p].fn!==c||u&&!g[p].once||d&&g[p].context!==d)&&m.push(g[p]);m.length?this._events[h]=m.length===1?m[0]:m:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(w3);var AQ=w3.exports;const E3=b3(AQ);class S3 extends E3{constructor(t,n){super(),je(this,"ogma"),je(this,"elements"),je(this,"layer"),je(this,"editor"),je(this,"selectedId",Tn),je(this,"hoveredId",Tn),je(this,"ogmaOptions"),je(this,"shouldDetect"),je(this,"isDragging"),je(this,"showeditorOnHover"),je(this,"_onKeyUp",r=>{r.code===27&&this.selectedId!==Tn?this.unselect():(r.code===46||r.code===8)&&this.selectedId!==Tn&&this._canRemove()&&this.remove(this.selectedId)}),je(this,"_onClickMouseMove",r=>{if(!r.domEvent||this.isDragging||!this.shouldDetect||r.domEvent.type!=="mousemove"&&r.domEvent.target&&r.domEvent.target.tagName==="a")return;const i=this.ogma.view.screenToGraphCoordinates(r),s=this.shouldDetect||!this.shouldDetect&&+this.selectedId>-1?this.detect(i,0):void 0;r.domEvent.type==="mousemove"?s?this.hover(s.id):this.hoveredId!==Tn&&this.unhover():s?this.select(s.id):this.selectedId!==Tn&&this.unselect()}),this.ogma=t,this.elements=[],this.shouldDetect=!0,this.isDragging=!1,this.showeditorOnHover=!0,this.ogmaOptions=t.getOptions(),t.events.on(["click","mousemove"],this._onClickMouseMove).on("keyup",this._onKeyUp).on("frame",()=>{this.refreshEditor(),this.refreshDrawing()}),this.layer=t.layers.addSVGLayer({draw:r=>this.draw(r)}),this.layer.moveToTop(),this.editor=t.layers.addLayer(n),this.editor.hide()}_canRemove(){return!0}add(t){const n=this.getDefaultOptions(),r=Object.assign(t,{id:t.id===void 0?Hm():t.id,type:t.type,properties:{...n.properties,...t.properties||{},style:{...n.properties.style,...t.properties.style||{}}},geometry:{...n.geometry,...t.geometry}});return this.elements.push(r),this.layer.refresh(),this.emit(_v,r),r}updateStyle(t,n){this.updateAnnotation(t,{properties:{style:n}})}updateGeometry(t,n){this.updateAnnotation(t,{geometry:n})}scale(t,n,r,i){this.updateGeometry(t,_Q(t.geometry,n,r,i))}update(t,n){const r=this.getById(t);this.updateAnnotation(r,n)}updateAnnotation(t,n){if(!t)return;const r=t.id;Object.keys(n).forEach(i=>{if(i!=="id")if(i==="properties"){const s=n.properties||{style:{}};t.properties={...t.properties||{},...s||{},style:{...t.properties.style||{},...s.style||{}}}}else i==="geometry"?t.geometry={...t.geometry,...n.geometry}:t[i]=n[i]}),r===this.selectedId&&this.refreshEditor(),this.layer.refresh()}getById(t){const n=Number(t);for(let r=0;r<this.elements.length;r++){const i=this.elements[r];if(!(i.id!==t&&i.id!==n))return i}}select(t){const n=this.getById(t);n&&(this.editor.show(),this.selectedId=t,this.refreshEditor(),this.layer.refresh(),this.emit(pv,n))}hover(t){const n=this.getById(t);n&&(this.showeditorOnHover&&this.editor.show(),this.hoveredId=t,this.refreshEditor(),this.layer.refresh(),this.emit(xQ,n))}getSelectedFeature(){return this.selectedId===Tn?null:this.getById(this.selectedId)}unselect(){const t=this.getById(this.selectedId);return t&&this.emit(mv,t),this.selectedId=Tn,this.hoveredId===Tn&&this.editor.hide(),this.layer.refresh(),this}unhover(){const t=this.getById(this.hoveredId);return this.emit(bQ,t),this.hoveredId=Tn,this.selectedId===Tn&&this.editor.hide(),this.layer.refresh(),this}remove(t){const n=this.getById(t);t===this.hoveredId&&this.unhover(),t===this.selectedId&&this.unselect(),this.elements=this.elements.filter(r=>r.id!==t),n&&this.emit(fv,n),this.layer.refresh()}disableDragging(){this.ogma.setOptions({interactions:{drag:{enabled:!1},pan:{enabled:!1}},detect:{nodes:!1,edges:!1,nodeTexts:!1,edgeTexts:!1}})}restoreDragging(){this.ogma.setOptions(this.ogmaOptions)}enableDetection(){this.shouldDetect=!0}disableDetection(){this.shouldDetect=!1}refreshLayer(){this.layer.refresh()}refreshDrawing(){}getElements(){return[...this.elements]}destroy(){this.ogma.events.off(this._onClickMouseMove).off(this._onKeyUp),this.layer.destroy()}}const yC="handle-line",vC="handle-start",xC="handle-end";class kQ extends S3{constructor(t,n={}){super(t,`
    <div class="arrow-handle">
      <div id="${yC}" data-handle-id="0" class="handle line"></div>
      <div id="${vC}" data-handle-id="1" class="handle point"></div>
      <div id="${xC}" data-handle-id="2" class="handle point"></div>
    </div>
  `),je(this,"draggedHandle",Tn),je(this,"start",{x:0,y:0}),je(this,"end",{x:0,y:0}),je(this,"arrow",{...mC}),je(this,"startX",0),je(this,"startY",0),je(this,"minArrowHeight",0),je(this,"maxArrowHeight",0),je(this,"handles",[]),je(this,"onHandleMouseDown",r=>{const i=this.getById(this.selectedId)||this.getById(this.hoveredId);if(!i)return;const{x:s,y:o}=gv(r,this.ogma.getContainer());this.startDragging(i,s,o),this.draggedHandle=f3(r.target)}),je(this,"onMouseUp",()=>{this.draggedHandle!==-1&&(this.restoreDragging(),this.isDragging=!1,this.draggedHandle=Tn,this.emit(Xl,this.arrow))}),je(this,"onMouseMove",r=>{if(!this.isDragging||this.draggedHandle===Tn)return;const i=this.handles[this.draggedHandle],s=this.ogma.view.getAngle(),{x:o,y:a}=ui(yQ({x:r.clientX-this.startX,y:r.clientY-this.startY},this.ogma.view.getZoom()),s),l=i.id===yC,c=i.id===vC,d=i.id===xC;(l||c)&&p3(this.arrow,this.start.x+o,this.start.y+a),(l||d)&&m3(this.arrow,this.end.x+o,this.end.y+a),this.emit(Bp,this.arrow,l?"line":c?"start":"end"),this.refreshEditor(),this.layer.refresh()}),this.minArrowHeight=n.minArrowHeight||0,this.maxArrowHeight=n.maxArrowHeight||1e6,this.handles=Array.prototype.slice.call(this.editor.element.querySelectorAll(".arrow-handle>.handle")),this.handles.forEach(r=>r.addEventListener("mousedown",this.onHandleMouseDown)),document.addEventListener("mousemove",this.onMouseMove,!0),document.addEventListener("mouseup",this.onMouseUp)}startDrawing(t,n,r=h3(t,n,t,n,iu)){var i;this.disableDragging(),this.add(r),this.hoveredId=r.id;const s=this.ogma.view.graphToScreenCoordinates({x:t,y:n}),o=((i=this.ogma.getContainer())==null?void 0:i.getBoundingClientRect())||{left:0,top:0};this.startDragging(this.getById(r.id),s.x+(o==null?void 0:o.left),s.y+o.top),this.draggedHandle=2}cancelDrawing(){this.isDragging&&(this.remove(this.arrow.id),this.emit(Xl,this.arrow),this.restoreDragging(),this.isDragging=!1,this.draggedHandle=Tn)}startDragging(t,n,r){this.selectedId!==t.id&&this.select(this.hoveredId),this.arrow=t,this.startX=n,this.startY=r,this.start=vd(this.arrow),this.end=zp(this.arrow),this.disableDragging(),this.emit(jp,this.arrow),this.isDragging=!0}detect(t,n=0){return this.elements.find(r=>{const{start:i,end:s}=Op(r),o=aa(t,{x:(i.x+s.x)/2,y:(i.y+s.y)/2}),a=aa(s,i),l=Sl(a),c=y3(a),d=x3(r);return Math.abs(fC(c,o))<l/2+n&&Math.abs(fC(ui(c,Math.PI/2),o))<d/2+n})}refreshEditor(){if(+this.selectedId<0&&+this.hoveredId<0)return;const t=this.selectedId!==Tn?this.getById(this.selectedId):this.getById(this.hoveredId),n=Op(t),r=this.ogma.view.graphToScreenCoordinates(n.start),i=this.ogma.view.graphToScreenCoordinates(n.end),[s,o,a]=Array.prototype.slice.call(this.editor.element.querySelectorAll(".handle"));o.style.transform=`translate(${r.x}px, ${r.y}px) translate(-50%, -50%)`,a.style.transform=`translate(${i.x}px, ${i.y}px) translate(-50%, -50%)`;const l={x:(i.x+r.x)/2,y:(i.y+r.y)/2},c=aa(i,r),d=v3(c,1/Sl(c)),u=Math.atan2(d.y,d.x);s.style.width=`${Sl(c)}px`,s.style.left=`${l.x}px`,s.style.top=`${l.y}px`,s.style.transform=`translate(-50%, -50%) rotate(${u}rad)`}getDefaultOptions(){return mC}draw(t){t.innerHTML="";const n=yd("g"),r=this.ogma.view.getAngle();n.setAttribute("transform",`rotate(${-r*(180/Math.PI)})`),this.elements.forEach(i=>vQ(i,n,iu,this.minArrowHeight,this.maxArrowHeight)),t.appendChild(n)}refreshDrawing(){const t=this.ogma.view.getAngle();this.layer.element!==null&&this.layer.element.children[0].setAttribute("transform",`rotate(${-t*(180/Math.PI)})`)}destroy(){super.destroy(),document.removeEventListener("mousemove",this.onMouseMove,!0),document.removeEventListener("mouseup",this.onMouseUp)}}const Al={font:"sans-serif",fontSize:12,color:"black",background:"",strokeWidth:1,strokeColor:"#000",strokeType:"plain"},R0={id:0,type:"Feature",properties:{type:"text",content:"",style:{...Al}},geometry:{type:"Polygon",coordinates:[[[0,0],[100,0],[100,50],[0,50],[0,0]]]}},bC={handleSize:3.5,placeholder:"Your text..."},A3=(e=0,t=0,n=100,r=50,i="",s={...Al})=>({id:Hm(),type:"Feature",properties:{type:"text",content:i,style:{...Al,...s}},geometry:{type:"Polygon",coordinates:[[[e,t],[e+n,t],[e+n,t+r],[e,t+r],[e,t]]]}});var k3={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(SQ,()=>(()=>{var n={d:(z,U)=>{for(var Z in U)n.o(U,Z)&&!n.o(z,Z)&&Object.defineProperty(z,Z,{enumerable:!0,get:U[Z]})},o:(z,U)=>Object.prototype.hasOwnProperty.call(z,U)},r={};function i(z){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},i(z)}n.d(r,{default:()=>kn});var s=/^((?:[a-z\d-]+\s+)*)([\d.]+(%|em|px)|(?:x+-)?large|(?:x+-)?small|medium)(?:\s*\/\s*(normal|[\d.]+(%|px|em)?))?(\s.+)?$/,o=/\bsmall-caps\b/,a=/\b(?:italic|oblique)\b/,l=/\bbold(?:er)?\b/,c=13.3333333,d={"xx-small":9,"x-small":10,smaller:13.3333,small:13,medium:16,large:18,larger:19.2,"x-large":24,"xx-large":32};function u(z){var U="",Z=this;return Z.style&&Z.style!=="normal"&&(U+=Z.style),Z.variant&&Z.variant!=="normal"&&(U+=(U?" ":"")+Z.variant),Z.weight&&Z.weight!=="normal"&&(U+=(U?" ":"")+Z.weight),Z.size&&(U+=(U?" ":"")+Z.size+"px",Z.height!==Z.size&&(U+="/"+Z.height+"px")),Z.family&&(U+=(U?" ":"")+Z.family),z&&(U+="::"+Z.baseline),z&&(U+="::"+Z.color),U}var h={id:"",family:"sans-serif",height:14,size:12,variant:"",style:"",weight:"",baseline:"",color:null,toString:u,valueOf:u};function g(z){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=s.exec(z);U.family=(Z[6]||"").trim();var G=d[Z[2]]||parseFloat(Z[2]);Z[3]==="%"?G*=.16:Z[3]==="em"?G*=16:Z[3]==="pt"&&(G*=c),U.size=G;var le=parseFloat(Z[4]);if(le!=="normal"&&le!=="inherit"&&le?Z[5]&&Z[5]!=="em"?Z[5]==="pt"?U.height=le*c:Z[5]==="%"?U.height=.01*G:U.height=le:U.height=le*G:U.height=Math.round(G*(7/6)),o.test(Z[1])&&(U.variant="small-caps"),a.test(Z[1])&&(U.style="italic"),l.test(Z[1]))U.weight="bold";else{var Ne=parseInt(/\b(\d+)\b/.exec(Z[1]),10);Ne>=100&&Ne!==400&&(U.weight=Ne)}return U}function p(){var z,U,Z,G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"12px/14px sans-serif",le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ne=14,He=12,Oe=null,Be=null,nt="";if(G&&G.nodeType){var pt=G&&(G.ownerDocument&&G.ownerDocument.defaultView||G.document&&G||G.defaultView),_t=pt.getComputedStyle(G,null);z=_t.getPropertyValue("font-family")||"",He=parseFloat(_t.getPropertyValue("font-size")),Ne=_t.getPropertyValue("line-height"),Oe=_t.getPropertyValue("font-weight"),Be=_t.getPropertyValue("font-style"),nt=_t.getPropertyValue("font-variant")||""}else if(typeof G=="string"){var ut=g(G);z=ut.family,He=ut.size,Ne=ut.height,nt=ut.variant,Be=ut.style,Oe=ut.weight}else i(G)==="object"&&(z=G.family,He=G.size,Ne=G.height,nt=G.variant,Oe=G.weight,Be=G.style,U=G.baseline,Z=G.color);le.size&&le.size<3&&(He*=le.size),Ne=Ne!=="normal"&&Ne?parseFloat(Ne):He*(7/6),le.height&&le.height<3&&(Ne*=le.height);var ht=Object.create(h);return ht.family=le.family||z||"sans-serif",ht.height=Ne??14,ht.size=He??12,ht.variant=le.variant||nt||"",ht.style=le.style||Be||"",ht.weight=le.weight||Oe||"",ht.baseline=U||0,le.baseline!=null&&(ht.baseline=le.baseline),ht.color=le.color||Z||"",ht.id=u.call(ht,!0),ht}const m={"\n":.28,"\r":.28," ":.28," ":.28," ":.28,"᠎":0," ":.5," ":1," ":.5," ":1," ":.33," ":.25," ":.16," ":.56," ":.28," ":.2," ":.15,"​":0," ":.16," ":.22,"　":1,"\uFEFF":0};var f,y=function(z){var U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(100,100)||z&&z.createElement("canvas");if(U&&U.getContext){var Z=U.getContext("2d");if(Z&&typeof Z.measureText=="function")return function(G,le){return Z.font=String(le),Z.measureText(G).width}}}(typeof document<"u"?document:null)||(f={},function(z,U){if(!f[U]){var Z=p(U);f[U]=Z,/\bmonospace\b/.test(Z.family)?Z.size*=.6:(Z.size*=.45,Z.weight&&(Z.size*=1.18))}return z.length*f[U].size}),_={},v={trim:!0,collapse:!0};function x(z,U,Z){var G=Object.assign({},v,Z),le=String(z);if(!le)return 0;if(le in m){var Ne=U.id+"/"+le;return Ne in _||(_[Ne]=y("_".concat(le,"_"),U)-y("__",U)),_[Ne]}return G.trim&&G.collapse?G.trim?le=le.trim():G.collapse&&(le=le.replace(/\s+/g," ")):le=le.replace(/\n/g," "),y(le,U)+U.size*(z.tracking||0)}function b(z){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},b(z)}function w(z,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(U&&U.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),Object.defineProperty(z,"prototype",{writable:!1}),U&&S(z,U)}function S(z,U){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Z,G){return Z.__proto__=G,Z},S(z,U)}function A(z){var U=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var Z,G=k(z);if(U){var le=k(this).constructor;Z=Reflect.construct(G,arguments,le)}else Z=G.apply(this,arguments);return C(this,Z)}}function C(z,U){if(U&&(b(U)==="object"||typeof U=="function"))return U;if(U!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Z){if(Z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z}(z)}function k(z){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},k(z)}function T(z,U){if(!(z instanceof U))throw new TypeError("Cannot call a class as a function")}function M(z,U){for(var Z=0;Z<U.length;Z++){var G=U[Z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(z,(le=function(Ne,He){if(b(Ne)!=="object"||Ne===null)return Ne;var Oe=Ne[Symbol.toPrimitive];if(Oe!==void 0){var Be=Oe.call(Ne,He);if(b(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ne)}(G.key,"string"),b(le)==="symbol"?le:String(le)),G)}var le}function D(z,U,Z){return U&&M(z.prototype,U),Object.defineProperty(z,"prototype",{writable:!1}),z}var B=function(){function z(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";T(this,z),this.value=U,this.weight=null,this.style=null,this.font=null,this.href=null,this.sub=!1,this.sup=!1}return D(z,[{key:"clone",value:function(){var U=new z(this.value);return U.value=this.value,U.weight=this.weight,U.style=this.style,U.font=this.font,U.href=this.href,U.sub=this.sub,U.sup=this.sup,U}},{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}}]),z}(),I=function(z){w(Z,z);var U=A(Z);function Z(){return T(this,Z),U.apply(this,arguments)}return D(Z)}(B),N=function(z){w(Z,z);var U=A(Z);function Z(){return T(this,Z),U.apply(this,arguments)}return D(Z)}(B),V=function(z){w(Z,z);var U=A(Z);function Z(){return T(this,Z),U.apply(this,arguments)}return D(Z)}(B),$=/^[\n\r\t\x20\xA0\u2000-\u200B\u205F\u3000]/,Q=/^[^\n\r\t\u0020\u2000-\u200B\u205F\u3000]{2,}/,se=/^[\xA0\u2011\u202F\u2060\uFEFF]/,te=/^(?:[;\xAD%?…]|,(?!\d))/,de=/^[´±°¢£¤$¥\u2212]/;function Ee(z,U){U!==!1&&(z=z.trim());for(var Z,G,le=[],Ne=z.charAt(0),He=0,Oe=1,Be=z.length;Oe<Be;Oe++){Z=z.charAt(Oe),G=z.charAt(Oe+1);var nt=$.test(Ne),pt=$.test(Z),_t=pt||nt,ut=void 0;if((de.test(Z)&&!se.test(Ne)||te.test(Ne+G)&&!se.test(Z))&&(_t=!0),Ne!=="-"&&Ne!=="‐"&&Ne!=="–"&&Ne!=="—"||((ut=$.test(z.charAt(Oe-2)))&&!pt&&(_t=!1),!ut&&Q.test(Z+G)&&(_t=!0)),_t){var ht=z.slice(He,Oe);/\u00AD$/.test(ht)?(le.push(new B(ht.slice(0,-1))),le.push(new V)):(le.push(new B(ht)),le.push(new I)),He=Oe}Ne=Z}return le.push(new B(z.slice(He))),le}const oe={nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",fnof:"ƒ",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",bull:"•",hellip:"…",prime:"′",Prime:"″",oline:"‾",frasl:"⁄",weierp:"℘",image:"ℑ",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"⊥",or:"⊦",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",quot:'"',amp:"&",lt:"<",gt:">",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",permil:"‰",lsaquo:"‹",rsaquo:"›"};var _e=/^[\n\r\x20\u2000-\u200B\u205F\u3000]/,De=/^<\/([a-zA-Z0-9]+)([^>]*)>/,We=/^<([a-zA-Z0-9]+)((?:\s[^=\s/]+(?:\s*=\s*(?:"[^"]+"|'[^']+'|[^>\\s]+))?)+)?\s*(\/?)>(\n*)/,Ye=/^<!--(.+?)-->/,pe=/&(?:#(\d\d{2,})|#x([\da-fA-F]{2,})|([a-zA-Z][a-zA-Z1-4]{1,8}));/g,ye={b:function(z){z.weight="bold"},strong:function(z){z.weight="bold"},i:function(z){z.style="italic"},em:function(z){z.style="italic"},dfn:function(z){z.style="italic"},cite:function(z){z.style="italic"},code:function(z){z.family="monospace"},kbd:function(z){z.family="monospace"},samp:function(z){z.family="monospace"},var:function(z){z.family="monospace"},tt:function(z){z.family="monospace"},sub:function(z){z.sub=!0},sup:function(z){z.sup=!0}},Ke={div:1,li:1,blockquote:2,h1:2,h2:2,h3:2,h4:2,h5:2,h6:2,ul:2,ol:2,hr:2,p:2};function tt(z){return z.replace(pe,function(U,Z,G,le){if(Z||G){var Ne=Z?10:16;return String.fromCharCode(parseInt(Z||G,Ne))}return le in oe?oe[le]:U})}function dt(z){return z&&z.length>1&&(z[0]==='"'&&z[z.length-1]==='"'||z[0]==="'"&&z[z.length-1]==="'")?z.slice(1,-1):z}var it=/^\s*([^=\s&]+)(?:\s*=\s*("[^"]+"|'[^']+'|[^>\s]+))?/;function Y(z){var U,Z={};if(z){do if(U=it.exec(z)){var G=tt(dt(U[2]||"")).replace(/[ \r\n\t]+/g," ").trim();if(Z[U[1]]=G,(z=z.slice(U[0].length)).length&&/^\S/.test(z[0]))throw new Error("Attribute error")}while(U&&z.length);if(/\S/.test(z))throw new Error("Attribute error")}return Z}const ne={copyright:"©",textcopyright:"©",dag:"†",textdagger:"†",ddag:"‡",textdaggerdbl:"‡",guillemotleft:"«",guillemotright:"»",guilsinglleft:"‹",guilsinglright:"›",ldots:"…",dots:"…",textellipsis:"…",lq:"‘",P:"¶",textparagraph:"¶",pounds:"£",textsterling:"£",quotedblbase:"„",quotesinglbase:"‚",rq:"’",S:"§",sim:"~",textasciicircum:"^",textasciitilde:"˜",texttildelow:"~",textasteriskcentered:"*",textbackslash:"'",textbar:"|",textbardbl:"╎",textbigcircle:"◯",textbraceleft:"{",textbraceright:"}",textbullet:"•",textdollar:"$",textemdash:"—",textendash:"—",texteuro:"€",eurosym:"€",euro:"€",textexclamdown:"¡",textgreater:">",textless:"<",textordfeminine:"ª",textordmasculine:"º",textperiodcentered:"·",cdot:"·",textquestiondown:"¿",textquotedblleft:"“",textquotedblright:"”",textquoteleft:"‘",textquoteright:"’",textquotestraightbase:"‚",textquotestraightdblbase:"„",textregistered:"®",textthreequartersemdash:"-",texttrademark:"™",texttwelveudash:"-",textunderscore:"_",textvisiblespace:"␣",gets:"←",textleftarrow:"←",to:"→",textrightarrow:"→",textdegree:"°",infty:"∞",triangle:"△",triangledown:"▽",blacktriangle:"▲",blacktriangledown:"▼",angle:"∠",sphericalangle:"∢",aleph:"ℵ",hbar:"ħ",imath:"𝚤",jmath:"𝚥",ell:"ℓ",wp:"℘",Re:"ℜ",Im:"ℑ",mho:"℧",prime:"′",emptyset:"∅",nabla:"∇",surd:"√",partial:"∂",top:"⟙",bot:"⟂",vdash:"⟝",dashv:"⟞",forall:"∀",exists:"∃",nexists:"∄",neg:"¬",lnot:"¬",flat:"♭",natural:"♮",sharp:"♯",backslash:"\\",Box:"□",Diamond:"♢",clubsuit:"♣",diamondsuit:"♦",heartsuit:"♥",spadesuit:"♠",Join:"⨝",blacksquare:"■",bigstar:"★",diagdown:"╲",diagup:"╱",blacklozenge:"⧫",rfloor:"⌋",lfloor:"⌊",rceil:"⌉",lceil:"⌈",rangle:"⟩",langle:"⟨",sum:"∑",int:"∫",oint:"∮",prod:"∏",coprod:"∏",bigcap:"∩",bigcup:"∪",bigsqcup:"⊔",bigvee:"∨",bigwedge:"∧",bigodot:"⊙",bigotimes:"⊗",bigoplus:"⊕",biguplus:"⊎",alpha:"α",beta:"β",chi:"χ",delta:"δ",epsilon:"ε",eta:"η",gamma:"γ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",omega:"ω",phi:"φ",pi:"π",psi:"ψ",rho:"ρ",sigma:"σ",tau:"τ",theta:"θ",upsilon:"υ",xi:"ξ",zeta:"ζ",Alpha:"Α",Beta:"Β",Chi:"Χ",Delta:"Δ",Epsilon:"Ε",Eta:"Η",Gamma:"Γ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Omega:"Ω",Phi:"Φ",Pi:"Π",Psi:"Ψ",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Theta:"Θ",Upsilon:"Υ",Xi:"Ξ",Zeta:"Ζ",aa:"å",AA:"Å",ae:"æ",AE:"Æ",dh:"ð",DH:"Ð",dj:"đ",DJ:"Đ",ij:"ĳ",IJ:"Ĳ",l:"ł",L:"Ł",ng:"ŋ",NG:"Ŋ",o:"ø",O:"Ø",oe:"œ",OE:"Œ",ss:"ß",SS:"SS",th:"þ",TH:"Þ"};var ae=/^(\^|_|\\[^#$%&~_^\\{}()\s]+)(\{)?/,ce=/^%[^\n]+(?:\n|$)/,he=/^[^#$%&~_^\\{}]+/,me=/^\\([&{}$%#_])/,Me=/(?:\\[\\@,!:;-]|-{2,3}|[!?]`|``?|,,|''?|~|<<|>>)/g,Ce={"---":"—","--":"–","!`":"¡","?`":"¿","``":"“",",,":"„","''":"”","`":"‘","'":"’","<<":"«",">>":"»","~":" ","\\-":"­","\\,":" ","\\;":" ","\\:":" ","\\!":" ","\\@":"\uFEFF","\\\\":"\\newline{}"},Te={bf:function(z){z.weight="bold"},it:function(z){z.style="italic"},sl:function(z){z.style="italic"},color:function(z,U){z.color=U},href:function(z,U){z.href=U},"^":function(z){z.sup=!0},_:function(z){z.sub=!0},par:function(z){this.tokens.push(new N,new N)},newline:function(z){this.tokens.push(new N)},url:function(z,U){this.open_context().href=U,this.add_token(new B(U)),this.close_context()}};Te.textsuperscript=Te["^"],Te.textsubscript=Te._,Te.textsl=Te.sl,Te.mathbf=Te.bf,Te.mathit=Te.it,Te.textbf=Te.bf,Te.textit=Te.it,Te.textcolor=Te.color;var ot=/[\r\n\xA0]+/g;function st(z,U){z.sup&&(z.baseline=.45,z.size=.7),z.sub&&(z.baseline=-.3,z.size=.7);var Z=U;return(z.style||z.weight||z.baseline||z.color||z.size||z.family)&&(Z=p(U,z)),Z}function It(z,U,Z){for(var G,le,Ne=z.width;Ne+Z.width>U&&z.length;)le=(G=z[z.length-1]).width,G.width>Z.width?(G.value=G.value.slice(0,-1),G.width=x(G,G.font),Ne+=G.width):z.pop(),Ne-=le;z[z.length-1]instanceof V&&z.pop(),G=z[z.length-1]||G||{},Z.font=p(Z.font,G.bold,G.italic,""),Z.href=z.length?G.href:null,Z.rel=z.length?G.rel:null,Z.target=z.length?G.target:null,z.push(Z)}function Pt(z){return Math.round(1e6*z)/1e6}function Mt(z){return function(U){if(Array.isArray(U))return Ht(U)}(z)||function(U){if(typeof Symbol<"u"&&U[Symbol.iterator]!=null||U["@@iterator"]!=null)return Array.from(U)}(z)||function(U,Z){if(U){if(typeof U=="string")return Ht(U,Z);var G=Object.prototype.toString.call(U).slice(8,-1);return G==="Object"&&U.constructor&&(G=U.constructor.name),G==="Map"||G==="Set"?Array.from(U):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?Ht(U,Z):void 0}}(z)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ht(z,U){(U==null||U>z.length)&&(U=z.length);for(var Z=0,G=new Array(U);Z<U;Z++)G[Z]=z[Z];return G}var Bt={center:"middle",right:"end"},lt={middle:.5,center:.5,bottom:1,end:1},kt=function(z,U){return!z&&!U||z===U};function jt(z,U){var Z=[],G=U.font(),le=G.size,Ne=G.family,He=U.align(),Oe=U.createElement();if(z.length){var Be=G.height,nt=U.valign(),pt=U.height()(),_t=U.width()(0),ut=!isFinite(_t)&&z.length===1,ht=ut?null:U.x(),F=Pt(Be/le),j=ut?null:Pt(Be/(1.15*le+(Be-le)/2));if(lt[nt]&&isFinite(pt)){var R=nt==="bottom"?1:.5;j+=(pt*R-Be*z.length*R)/le}var O=He==="justify",W=0;He==="right"?W=_t:He==="center"&&(W=_t/2);for(var J=[],X="tspan",ee=null,K="",H=function(){if(K){var rt=Oe(X,ee,K);J.push(rt)}X="tspan",ee=null,K=""},q=0,re=z.length;q<re;q++){var ue="",fe="",ie=0,ge=z[q];if(ge.length){J=[];for(var Se=0,Le=0,Ae=void 0,we=0,Ie=ge.length;we<Ie;we++){var xe=ge[we],ke=xe.font;xe.whitespace&&Se++,Le+=xe.width,we&&!xe.tracking&&!ie&&kt(ke.id,ue)&&kt(xe.class,fe)&&kt(Ae,xe.href)?K+=xe.value:(H(),K=xe.value,ee={fontFamily:ke.family!==Ne?ke.family:null,fontSize:ke.size!==le?ke.size:null,fontWeight:ke.weight||null,fontStyle:ke.style||null,fontVariant:ke.variant!=="normal"&&ke.variant||null,fill:ke.color||null,baselineShift:ke.baseline?100*ke.baseline+"%":null,className:xe.class||null},ie&&(ee.dx=Pt(ie),ie=0),xe.tracking&&(ie=ke.size*xe.tracking),xe.href&&!Ae?(Ae=xe.href,X="a",ee.href=Ae,ee.rel=xe.rel,ee.target=xe.target):Ae=null,ue=ke.id,fe=xe.class)}if(H(),ut)Z.push.apply(Z,Mt(J));else{var qe=null,Qe=q===re-1||ge[ge.length-1]instanceof N;O&&ge.length>1&&!Qe&&(qe=Pt((_t-Le)/Se)),Z.push(Oe.apply(void 0,["tspan",{wordSpacing:qe,x:ht(q)+W,dy:Pt(q?F:j)+"em"}].concat(Mt(J))))}}else Z.push(Oe("tspan",{x:ht(q),dy:Pt(q?F:j)+"em"}," "))}}return Oe.apply(void 0,["text",{fontFamily:Ne,fontSize:le,textAnchor:Bt[He]||"start"}].concat(Z))}var Ft={middle:.5,center:.5,bottom:1,end:1};function Ct(z,U,Z){if(z.length){Z.textBaseline="middle";var G=U.font(),le=G.height,Ne=G.size,He=U.valign(),Oe=U.height()(),Be=U.width()(0),nt=U.align(),pt=nt==="justify",_t=.5*le,ut=Ft[He];if(ut&&isFinite(Oe)){var ht=z.length*le;_t+=Oe*ut-ht*ut}z.forEach(function(F,j){var R=U.x()(j),O=j*le+_t,W=0,J=0;F.forEach(function(K){K.whitespace&&W++,J+=K.width});var X=0,ee=j===z.length-1||F[F.length-1]instanceof N;pt&&F.length>1&&!ee&&(X=(Be-J)/W),F.forEach(function(K){Z.font=K.font;var H=K.font,q=H.baseline?Ne*-H.baseline+.15*Ne:0;Z.fillStyle=function(fe,ie){return fe.color?fe.color:ie.href?"#00C":"#000"}(H,K);var re=0;if(nt==="right"?re+=Be-J:nt==="center"?re+=Be/2-J/2:nt==="justify"&&(K.whitespace||K instanceof N)&&(R+=X),Z.fillText(K.value,R+re,O+q),K.href){Z.beginPath(),Z.strokeStyle=Z.fillStyle;var ue=Math.floor(O+.45*Ne)+.5;Z.moveTo(R+re,ue),Z.lineTo(R+re+K.width,ue),Z.stroke()}R+=K.width})})}}function vt(z){return vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},vt(z)}function Vt(z){for(var U={},Z=0;Z<z.length;Z++){var G=z[Z];typeof G!="number"&&G!=null&&(typeof G=="string"?U.text=G:typeof G=="function"?U.fn=G:vt(G)==="object"&&G._groups?U.d3=G:G&&G.nodeType&&G.getContext?U.ctx=G.getContext("2d"):G&&G.fillText&&G.beginPath?U.ctx=G:G&&(U.text=G))}return U}function Qt(z){return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},Qt(z)}function qn(z,U){for(var Z=0;Z<U.length;Z++){var G=U[Z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(z,(le=function(Ne,He){if(Qt(Ne)!=="object"||Ne===null)return Ne;var Oe=Ne[Symbol.toPrimitive];if(Oe!==void 0){var Be=Oe.call(Ne,He);if(Qt(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ne)}(G.key,"string"),Qt(le)==="symbol"?le:String(le)),G)}var le}var mt=p(),xt=function(z){return typeof z=="function"?z:function(){return z}},gt=function(){function z(G){if(function(Ne,He){if(!(Ne instanceof He))throw new TypeError("Cannot call a class as a function")}(this,z),this.props={overflow:"ellipsis",lineclamp:null,align:"left",wordBreak:null,valign:"top",width:function(){return 1/0},height:function(){return 1/0},x:function(){return 0},font:null,tAnchor:0,parser:z.defaultparser},G)for(var le in G)typeof this[le]=="function"&&this[le](G[le])}var U,Z;return U=z,Z=[{key:"linebreak",value:function(G){var le=this,Ne=this.props.parser(String(G)),He=this.font(),Oe=function(Be,nt,pt){if(!Be.length)return[];var _t=nt.height(),ut=nt.width(),ht=nt.overflowLine(),F=nt.overflowWrap(),j=p(pt,!0,!1),R=isFinite(_t())?Math.floor(_t()/pt.height):1/0;if(!_t()&&!ut(0)||!R)return[];for(var O=0,W=0,J=0,X=[],ee=[],K=!1;O<Be.length&&W<R;){var H=Be[O],q=st(H,pt);if(H.width=x(H,q),H.font=q,H.line=W,H.whitespace=H.value in m,H.value&&(H.value=H.value.replace(ot," ")),!(!J&&H.whitespace||K&&H.whitespace))if(H instanceof N)J=0,ee=[],X.push(O+1),W++;else if(H instanceof I||H instanceof V)ee.push({index:O,width:J});else if(H.whitespace||J+H.width<ut(W))J+=H.width;else if(ee.length){var re=void 0,ue=void 0;do{ue=!0,re=ee.pop();var fe=Be[re.index],ie=void 0;fe instanceof V&&(ie=x("-",fe.font),re.width+ie>ut(W)&&(ue=!ee.length))}while(!ue);X.push(re.index+1),J=0,W++,O=re.index,ee=[]}else if(F==="break-word"){var ge=ut(W);if(J+H.width>ge){var Se=H.clone();do H.value=H.value.slice(0,-1),H.width=x(H,H.font),J+=H.width;while(H.value&&H.width>ge);Se.value=Se.value.slice(H.value.length),Be.splice(O+1,0,new I,Se)}X.push(O+1),J=0,W++}else J+=H.width;O++,K=H.whitespace}O!==X[X.length-1]&&X.push(O);var Le=0,Ae=0,we=X.map(function(rt){for(var et,bt=Le;(et=Be[bt])&&(et.whitespace||!et.value);)bt++;for(var Tt=rt,Rt=null;Tt>bt&&(et=Be[Tt-1])&&(et.whitespace||!(et.value||et instanceof V));)et instanceof N&&(Rt=et),Tt--;et instanceof V&&(et.value="-",et.width=x("-",et.font)),Le=rt;var an=Be.slice(bt,Tt).filter(function(Fn){return Fn.value});return Rt&&an.push(Rt),an.width=an.reduce(function(Fn,Cr){return Fn+Cr.width},0),an.width>Ae&&(Ae=an.width),an});if(we.hasLineOverflow=!1,ht){var Ie=ht==="ellipsis"?"…":ht;we.forEach(function(rt,et){var bt=ut(et);if(rt.width>bt){var Tt=new B(Ie);Tt.font=pt,Tt.width=x(Ie,j),It(rt,bt,Tt),we.hasLineOverflow=!0}})}var xe=nt.overflow()==="ellipsis"?"…":nt.overflow();if(xe&&O!==Be.length){var ke=ut(we.length-1),qe=we[we.length-1],Qe=new B(xe);Qe.font=pt,Qe.width=x(xe,j),It(qe,ke,Qe),we.hasOverflow=!0}else we.hasOverflow=!1;return we.font=pt,we.width=Ae,we}(Ne,this,He);return Oe.height=Oe.length*He.height,Oe.render=function(Be){return le.render(Oe,Be)},Oe.svg=Oe.render,Oe.draw=Oe.render,Oe}},{key:"font",value:function(G){return arguments.length?(this.props.font=p(G),this):this.props.font||p(mt)}},{key:"overflow",value:function(G){return arguments.length?(this.props.overflow=String(G),this):this.props.overflow}},{key:"overflowLine",value:function(G){return arguments.length?(this.props.lineclamp=String(G),this):this.props.lineclamp}},{key:"valign",value:function(G){return arguments.length?(this.props.valign=G,this):this.props.valign}},{key:"align",value:function(G){if(!arguments.length)return this.props.align;var le=String(G).toLowerCase();return le==="left"||le==="start"?(this.props.align="left",this.props.tAnchor=0):le==="center"||le==="middle"?(this.props.align="center",this.props.tAnchor=-.5):le==="end"||le==="right"?(this.props.align="right",this.props.tAnchor=-1):le==="justify"&&(this.props.align=G,this.props.tAnchor=0),this}},{key:"overflowWrap",value:function(G){if(!arguments.length)return this.props.overflowWrap||"normal";var le=String(G).toLowerCase();return le==="break-word"?this.props.overflowWrap="break-word":le!=="normal"&&G!=null||(this.props.overflowWrap=null),this}},{key:"width",value:function(G){return arguments.length?(this.props.width=xt(G),this):this.props.width}},{key:"height",value:function(G){return arguments.length?(this.props.height=xt(G),this):this.props.height}},{key:"x",value:function(G){return arguments.length?(this.props.x=xt(G),this):this.props.x}},{key:"parser",value:function(G){if(!arguments.length)return this.props.parser;if(typeof G=="string"){var le=z[G]||z[G+"parser"];typeof le=="function"&&(G=le)}if(typeof G!="function")throw new Error("Unknown parser: "+G);return this.props.parser=G,this}},{key:"createElement",value:function(G){return arguments.length?(this.props.createElement=G,this):this.props.createElement||z.createElement}},{key:"render",value:function(){var G=Vt(arguments);return typeof G.text=="string"&&(G.text=this.linebreak(G.text)),G.ctx?Ct(G.text,this,G.ctx):jt(G.text,this)}}],Z&&qn(U.prototype,Z),Object.defineProperty(U,"prototype",{writable:!1}),z}();function Ut(z){return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},Ut(z)}function Wt(z,U){(U==null||U>z.length)&&(U=z.length);for(var Z=0,G=new Array(U);Z<U;Z++)G[Z]=z[Z];return G}function An(z,U){for(var Z=0;Z<U.length;Z++){var G=U[Z];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(z,(le=function(Ne,He){if(Ut(Ne)!=="object"||Ne===null)return Ne;var Oe=Ne[Symbol.toPrimitive];if(Oe!==void 0){var Be=Oe.call(Ne,He);if(Ut(Be)!=="object")return Be;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Ne)}(G.key,"string"),Ut(le)==="symbol"?le:String(le)),G)}var le}var On=function(z){return typeof z=="function"?z:function(){return z}},mn=function(){function z(G){if(function(Ne,He){if(!(Ne instanceof He))throw new TypeError("Cannot call a class as a function")}(this,z),this.props={width:function(){return 1/0},height:function(){return 1/0},rotation:0,vAnchor:0,hAnchor:0},G)for(var le in G)typeof this[le]=="function"&&this[le](G[le]);this.render=this.render.bind(this)}var U,Z;return U=z,Z=[{key:"anchor",value:function(G){var le=this.props,Ne=le.hAnchor,He=le.vAnchor,Oe=le.width,Be=le.height;if(!arguments.length)return[Ne*Oe(0),He*Be(0)];if(typeof G=="string"){var nt=this.props;G.toLowerCase().trim().split(/\s+/).forEach(function(pt){pt==="top"&&(nt.vAnchor=-0),pt==="middle"&&(nt.vAnchor=-.5),pt==="bottom"&&(nt.vAnchor=-1),pt==="left"&&(nt.hAnchor=-0),pt==="center"&&(nt.hAnchor=-.5),pt==="right"&&(nt.hAnchor=-1)})}return this}},{key:"width",value:function(G){return arguments.length?(this.props.width=On(G),this):this.props.width}},{key:"height",value:function(G){return arguments.length?(this.props.height=On(G),this):this.props.height}},{key:"rotate",value:function(G){return arguments.length?(this.props.rotation=G,this):this.props.rotation}},{key:"createElement",value:function(G){return arguments.length?(this.props.createElement=G,this):this.props.createElement||z.createElement}},{key:"canvas",value:function(G,le){var Ne,He=G.getContext?G.getContext("2d"):G;return He.save(),He.rotate(this.rotate()*Math.PI/180),He.translate.apply(He,function(Oe){if(Array.isArray(Oe))return Wt(Oe)}(Ne=this.anchor())||function(Oe){if(typeof Symbol<"u"&&Oe[Symbol.iterator]!=null||Oe["@@iterator"]!=null)return Array.from(Oe)}(Ne)||function(Oe,Be){if(Oe){if(typeof Oe=="string")return Wt(Oe,Be);var nt=Object.prototype.toString.call(Oe).slice(8,-1);return nt==="Object"&&Oe.constructor&&(nt=Oe.constructor.name),nt==="Map"||nt==="Set"?Array.from(Oe):nt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(nt)?Wt(Oe,Be):void 0}}(Ne)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),le(He),He.restore(),He}},{key:"render",value:function(){var G=Vt(arguments);if(G.d3)return G.d3.attr("transform","rotate(".concat(this.rotate(),") translate(").concat(this.anchor(),")"));if(G.ctx)return this.canvas(G.ctx,G.fn);if(G.text){var le=typeof G.text.render=="function"?G.text.render():G.text;return this.createElement()("g",{transform:"rotate(".concat(this.rotate(),") translate(").concat(this.anchor(),")")},le)}}}],Z&&An(U.prototype,Z),Object.defineProperty(U,"prototype",{writable:!1}),z}(),Mn=Object.prototype.hasOwnProperty,kr={};function zi(z){return kr[z]||(kr[z]=z.replace(/([a-z])([A-Z])/g,function(U,Z,G){return Z+"-"+G.toLowerCase()})),kr[z]}function $t(z,U){if(Array.isArray(U))return U.forEach(function(Z){return $t(z,Z)});typeof U=="string"&&(U=document.createTextNode(U)),z.appendChild(U)}function xn(z,U){if(typeof document<"u"){var Z=typeof z=="string"?document.createElementNS("http://www.w3.org/2000/svg",z):z;if(U&&Z.setAttribute)for(var G in U)Mn.call(U,G)&&U[G]!=null&&Z.setAttribute(G==="className"?"class":zi(G),U[G]);for(var le=arguments.length,Ne=new Array(le>2?le-2:0),He=2;He<le;He++)Ne[He-2]=arguments[He];return Ne!=null&&Ne.length&&Ne.forEach(function(Oe){$t(Z,Oe)}),Z}}gt.createElement=xn,gt.textparser=Ee,gt.defaultparser=Ee,gt.htmlparser=function(z){z=String(z||"").trim();for(var U,Z,G={weight:null,style:null,sub:!1,sup:!1,href:null,color:null,rel:null,target:null},le=[],Ne=[],He=function(_t){for(var ut in G)G[ut]&&(_t[ut]=G[ut]);le.push(_t)},Oe=function(_t){var ut=le.length,ht=Ke[_t];if(ut&&ht){for(var F=ut-1;le[F]&&(le[F]instanceof I||_e.test(le[F].value));)F--;for(;ht&&le[F]&&le[F]instanceof N;)F--,ht--;for(;ht-- >0;)le.push(new N)}};z.length;){if(U=/^[^<]+/.exec(z))Ee(tt(U[0]),!1).forEach(He);else if(!(U=Ye.exec(z)))if(U=De.exec(z))Ne.length&&(G=Ne.pop()),Oe(U[1]);else if(U=We.exec(z)){var Be=U[1];Oe(Be),Ne.push(G),G=Object.create(G),ye[Be]&&ye[Be](G,"");var nt=Y(U[2]);Be==="a"&&(nt.href&&(G.href=nt.href),nt.rel&&(G.rel=nt.rel),nt.target&&(G.target=nt.target)),nt.class&&(G.class=G.class?G.class+" "+nt.class:nt.class),nt.style&&(Z=/(?:^|\s|;)color\s*:\s*([^;\s"']+)/.exec(nt.style))&&Z[1]&&(G.color=Z[1]),Be==="br"&&le.push(new N)}else U=[z.slice(0,1)],He(new B(U[0]));z=z.slice(U[0].length)}for(var pt=le[le.length-1];pt instanceof N;)le.pop(),pt=le[le.length-1];return le},gt.latexparser=function(z){z=String(z||"").trim();var U=[0];z=z.replace(/\\verb,(.*?),/,function(R,O){return U.push(O),"\\verb,"+(U.length-1)+","}).replace(/\\\\\n/g,function(){return"\\\\"}).replace(Me,function(R,O,W){return W.charAt(O-1)==="\\"?R:Ce[R]}).replace(/\n\s+/g,function(R){return/\n/.test(R.slice(1))?"\\par ":R}).replace(/\\symbol\{(\d+)\}/,function(R,O,W,J){return J.charAt(W-1)==="\\"?R:String.fromCharCode(1*O)}).replace(/(^|[^\\])(\^|_)(\d|[^{]\S*)/g,function(R,O,W,J){return O+W+"{"+J+"}"}).replace(/\\verb,(.*?),/,function(R,O){return"\\verb,".concat(U[+O],",")});for(var Z,G={weight:null,italic:null,variant:null,sub:!1,sup:!1,href:null},le=[],Ne=[],He=function(R){for(var O in G)G[O]&&(R[O]=G[O]);return le.push(R),R},Oe=function(){Ne.push(G),G=Object.create(G)},Be=function(){if(!Ne.length)throw new Error("Unexpected }");G=Ne.pop()},nt={tokens:le,open_context:Oe,close_context:Be,add_token:He};z.length;){if(Z=he.exec(z))Ee(Z[0],!1).forEach(He);else if(Z=me.exec(z))He(new B(Z[1]));else if(!(Z=ce.exec(z))){if(Z=/^\{/.exec(z))Oe();else if(Z=/^\}/.exec(z))Be();else if(!(Z=/^\$/.exec(z)))if(Z=/^\\verb,([^,]+),/.exec(z))He(new B(Z[1]));else if(Z=ae.exec(z)){var pt=Z[1].slice(1)||Z[1],_t=!!Z[2];if(/^(La)?TeX$/i.test(pt)){Oe(),G.family="serif";var ut=void 0;pt==="LaTeX"&&((ut=He(new B("L"))).tracking=-.25,(ut=He(new B("A"))).size=.7,ut.baseline=.3,ut.tracking=-.1),(ut=He(new B("T"))).tracking=-.17,(ut=He(new B("E"))).baseline=-.22,ut.tracking=-.13,ut=He(new B("X")),Be()}else if(pt in ne)He(new B(ne[pt])),_t&&Oe();else if(pt in Te){var ht=[],F=Te[pt].length-1,j=void 0;if(F){for(_t=!1,z=z.slice(Z[0].length-1);F--;){if(!(j=/^\{([^}]+)\}/.exec(z)))throw new Error(pt+" is missing an argument");ht.push(j[1]),z=z.slice(j[0].length)}Z[0]=/^\{/.exec(z)?"{":"",_t=!!Z[0]}_t&&Oe(),Te[pt].apply(nt,[G].concat(ht))}else console.warn("unknown latex command",pt),He(new B(Z[1])),_t&&Oe()}else Z=[z.slice(0,1)],He(new B(Z[0]))}z=z.slice(Z[0].length)}return le},gt.measureText=function(z,U,Z){return x(z,p(U),Z)},gt.Token=B,gt.Break=I,gt.LineBreak=N,gt.SoftHyphen=V,gt.Rotator=mn,mn.createElement=xn;const kn=gt;return r.default})())})(k3);var CQ=k3.exports;const wC=b3(CQ);function D0(e){return e.replace(/…$/,"")}function z0(e){return e.children[0].innerHTML}function TQ(e,t){const n=_s(e),{fontSize:r,font:i,padding:s=0}=e.properties.style||{};if(n.width===n.height&&n.width===0)return;const o=new wC({font:`${r}px/${r}px ${i}`.replace(/(px)+/g,"px"),width:n.width-s*2,height:n.height-s*2,align:"left",valign:"top",x:0,overflow:"ellipsis",parser:"html",createElement:wC.createElement});o.overflowWrap("break-word");const a=o.linebreak(e.properties.content.replaceAll(`
`,"<br>")).render(),l=[...a.children];let c=0;const d=[];e.properties.content.split(`
`).forEach(g=>{let p=g;for(;p.length&&c<l.length;){if(l[c].innerHTML==="&nbsp;"){p.startsWith(`
`)||d.push(c),c++;break}const m=D0(z0(l[c]));p.startsWith(m)&&(p=p.slice(m.length).trim()),c++}}),d.forEach(g=>a.removeChild(l[g]));const u=e.properties.content.match(/(https?:\/\/.*)/gm),h=u?u.map(g=>g.split(" ")[0]):[];a.setAttribute("transform",`translate(${s}, ${s})`),h.forEach(g=>{let p=g;const m=[];for(;p.length>0;){const f=l.find(_=>!!_.children[0]&&_.children[0].tagName==="tspan"&&p.startsWith(D0(z0(_))));if(!f)break;m.push(f);const y=D0(f.children[0].innerHTML).length;if(!y)break;p=p.slice(y)}m.forEach(f=>{const y=document.createElementNS("http://www.w3.org/2000/svg","a");y.setAttribute("href",g),y.setAttribute("target","_blank"),y.innerHTML=z0(f),f.children[0].innerHTML="",f.children[0].appendChild(y)})}),t.appendChild(a)}const EC=20;class NQ extends S3{constructor(t,n={}){super(t,`
    <div class="annotation-text-handle">
    <span class="handle line-handle top" data-handle-id="0"></span>
    <span class="handle line-handle bottom" data-handle-id="1"></span>
    <span class="handle line-handle left" data-handle-id="2"></span>
    <span class="handle line-handle right" data-handle-id="3"></span>
    <span class="handle top right point-handle top-right" data-handle-id="4"></span>
    <span class="handle left top point-handle top-left" data-handle-id="5"></span>
    <span class="handle bottom right point-handle bottom-right" data-handle-id="6"></span>
    <span class="handle left bottom left-handle point-handle bottom-left" data-handle-id="7"></span>
    <textarea wrap="on"></textarea>
    </div>
  `),je(this,"textArea"),je(this,"handleSize"),je(this,"rect",{x:0,y:0,width:0,height:0}),je(this,"annotation",{...R0}),je(this,"startX",0),je(this,"startY",0),je(this,"handles",[]),je(this,"draggedHandle",Tn),je(this,"isFocused",!1),je(this,"placeholder","Type your text here..."),je(this,"_onFocus",()=>{this.textArea.value===this.placeholder&&(this.textArea.value=""),this.isFocused=!0}),je(this,"_onBlur",()=>{this.isFocused=!1}),je(this,"startDrawing",(i,s,o=A3(i,s,0,0,"",Al))=>{this.add(o);const a=this.ogma.view.graphToScreenCoordinates({x:i,y:s});this.select(o.id),this.startDragging(this.getById(o.id),a.x,a.y),this.draggedHandle=6}),je(this,"cancelDrawing",()=>{this.isDragging&&(this.remove(this.annotation.id),this.annotation={...R0},this.draggedHandle=Tn,this.isDragging=!1,this.emit(Xl,this.annotation))}),je(this,"startDragging",(i,s,o)=>{this.annotation=i;const a=hs(this.annotation),l=_s(this.annotation);this.rect.x=a.x,this.rect.y=a.y,this.rect.width=l.width,this.rect.height=l.height,this.startX=s,this.startY=o,this.disableDragging(),this.textArea.classList.add("noevents"),this.textArea.setAttribute("disabled","disabled"),this.emit(jp,this.annotation),this.isDragging=!0}),je(this,"onHandleMouseDown",i=>{const s=this.getById(this.selectedId)||this.getById(this.hoveredId);if(!s)return;this.selectedId!==s.id&&this.select(this.hoveredId);const{x:o,y:a}=gv(i,this.ogma.getContainer());this.startDragging(s,o,a),this.draggedHandle=f3(i.target)}),je(this,"onMouseMove",i=>{requestAnimationFrame(()=>this._onMouseMove(i))}),je(this,"_onMouseMove",i=>{if(!this.isDragging)return;i.stopPropagation(),i.preventDefault();const s=this.handles[this.draggedHandle],o=s.classList.contains("top"),a=s.classList.contains("left"),l=s.classList.contains("right"),c=s.classList.contains("bottom"),d=s.classList.contains("line-handle"),{x:u,y:h}=gv(i,this.ogma.getContainer()),g=this.ogma.view.getZoom(),p=(u-this.startX)/g,m=(h-this.startY)/g,f=this.ogma.view.getAngle(),y=ui({x:p,y:m},f);(c&&a||o&&l)&&(y.y=0,y.x=0);const _=a||d?this.rect.x+y.x:this.rect.x,v=o||d?this.rect.y+y.y:this.rect.y,x=Math.max(this.rect.width+p*(d||a?0:1),EC),b=Math.max(this.rect.height+m*(d||o?0:1),EC);mQ(this.annotation,_,v,x,b),this.emit(Bp,this.annotation,"text"),this.refreshEditor(),this.layer.refresh()}),je(this,"onMouseUp",()=>{!this.isDragging||this.draggedHandle===Tn||(this.restoreDragging(),this.textArea.classList.remove("noevents"),this.textArea.removeAttribute("disabled"),this.emit(Xl,this.annotation),this.isDragging=!1,this.draggedHandle=Tn)}),je(this,"_onMousedown",i=>{i.stopPropagation()}),je(this,"onViewChanged",()=>{const i=Math.max(2,this.handleSize/this.ogma.view.getZoom());document.documentElement.style.setProperty("--handle-scale",`${1/i}`)}),je(this,"_onInput",()=>{const i=this.getById(this.selectedId);i&&(this.textArea.value=this.textArea.value.replace(/ +(?= )/g,""),this.textArea.focus(),i.properties.content=this.textArea.value,this.emit(yv,i),this.layer.refresh())}),this.showeditorOnHover=!1,this.handleSize=bC.handleSize,this.placeholder=bC.placeholder;const r=this.textArea=this.editor.element.querySelector("textarea");r.addEventListener("input",this._onInput),r.addEventListener("focus",this._onFocus),r.addEventListener("blur",this._onBlur),r.addEventListener("mousedown",this._onMousedown),r.spellcheck=!1,this.handles=Array.prototype.slice.call(this.editor.element.querySelectorAll(".annotation-text-handle > .handle")),this.handles.forEach(i=>i.addEventListener("mousedown",this.onHandleMouseDown)),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove,!0),t.events.on(["viewChanged","zoom"],this.onViewChanged)}_canRemove(){return!this.isFocused}detect({x:t,y:n},r=0){const i={x:t,y:n},s=this.ogma.view.getAngle();return this.elements.find(o=>{const{x:a,y:l}=hs(o),{width:c,height:d}=_s(o),u={x:a,y:l},{x:h,y:g}=ui(aa(i,u),-s);return h>-r&&h<c+r&&g>-r&&g<d+r})}draw(t){t.innerHTML="";const n="",r=this.ogma.view.getAngle();this.elements.forEach((s,o)=>{const a=`class${o}`,l=_s(s),c=hs(s),d=s.id,{color:u,fontSize:h,font:g,strokeColor:p,strokeWidth:m,strokeType:f,background:y}=s.properties.style||Al;if(d===this.selectedId)return;const _=yd("g");_.classList.add("annotation-text"),_.setAttribute("fill",`${u}`),_.setAttribute("font-size",`${h}px`),_.setAttribute("font-family",`${g}`);const v=yd("rect");let x=!1;f&&f!=="none"&&(x=!0,v.setAttribute("stroke",p||"black"),v.setAttribute("stroke-width",`${m}`),f==="dashed"&&v.setAttribute("stroke-dasharray","5,5")),(y&&y.length||x)&&(x=!0,v.setAttribute("fill",y||"transparent")),x&&(v.setAttribute("width",`${l.width}`),v.setAttribute("height",`${l.height}`)),_.appendChild(v),TQ(s,_);const{x:b,y:w}=ui(c,-r);_.setAttribute("transform",`translate(${b},${w})`),_.classList.add(a),_.setAttribute("data-annotation",`${s.id}`),_.setAttribute("data-annotation-type","text"),t.appendChild(_)});const i=yd("style");i.innerHTML=n,t.firstChild&&t.insertBefore(i,t.firstChild)}refreshDrawing(){const t=this.ogma.view.getAngle();[...this.layer.element.children].forEach(n=>{const r=n.getAttribute("data-annotation");if(!r)return;const i=hs(this.getById(r)),{x:s,y:o}=ui(i,-t);n.setAttribute("transform",`translate(${s},${o})`)})}getDefaultOptions(){return R0}refreshEditor(){if(+this.selectedId<0&&+this.hoveredId<0)return;const t=this.getById(this.selectedId)||this.getById(this.hoveredId),n=_s(t),r=this.ogma.view.graphToScreenCoordinates(hs(t)),i=this.ogma.view.getZoom(),{font:s,fontSize:o,color:a,background:l,padding:c=0}=t.properties.style||Al,d=(o||1)*i;this.textArea.value=t.properties.content,this.editor.element.style.transform=`translate(${r.x}px, ${r.y}px)translate(-50%, -50%)translate(${n.width/2*i}px, ${n.height/2*i}px)`,this.editor.element.style.width=`${n.width*i}px`,this.editor.element.style.height=`${n.height*i}px`,this.textArea.style.font=`${d} ${s}`,this.textArea.style.fontFamily=s||"sans-serif",this.textArea.style.fontSize=`${d}px`,this.textArea.style.padding=`${i*c}px`,this.textArea.style.lineHeight=`${d}px`,this.textArea.style.boxSizing="border-box",this.textArea.style.color=a||"black",this.textArea.style.background=l||"transparent",this.textArea.placeholder=this.placeholder,this.layer.refresh()}select(t){super.select(t),this.textArea.focus()}destroy(){super.destroy(),document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove,!0),this.ogma.events.off(this.onViewChanged)}}class LQ{constructor(){je(this,"links",{}),je(this,"linksByTargetId",{}),je(this,"linksByArrowId",{})}add(t,n,r,i,s){const o=Hm(),a=t.id,l={id:o,arrow:a,target:r,targetType:i,connectionPoint:s,side:n};return this.links[o]=l,this.linksByTargetId[r]||(this.linksByTargetId[r]=[]),this.linksByTargetId[r].push(o),this.linksByArrowId[a]||(this.linksByArrowId[a]={}),this.linksByArrowId[a][n]=o,t.properties.link=t.properties.link||{},t.properties.link[n]={id:r,side:n,type:i,magnet:s},this}arrowIsLinked(t,n){var r;return!!((r=this.linksByArrowId[t])!=null&&r[n])}remove(t,n){var r,i;const s=t.id,o=(r=this.linksByArrowId[s])==null?void 0:r[n];if((i=t.properties.link)==null||delete i[n],!o)return this;const a=this.links[o];delete this.links[o];const l=this.linksByTargetId[a.target];for(let c=0;c<l.length;c++)if(l[c]===o){l.splice(c,1);break}return delete this.linksByArrowId[s][n],this}getArrowLink(t,n){var r;const i=(r=this.linksByArrowId[t])==null?void 0:r[n];return i?this.links[i]:null}getTargetLinks(t,n){var r;return((r=this.linksByTargetId[t])==null?void 0:r.map(i=>this.links[i]).filter(i=>i.targetType===n))??[]}forEach(t){Object.values(this.links).forEach(t)}}const Nr=e=>e.properties.type==="arrow",Ai=e=>e.properties.type==="text",SC=e=>e.type==="FeatureCollection",IQ={magnetColor:"#3e8",detectMargin:20,magnetHandleRadius:5,magnetRadius:10,textPlaceholder:"Type here",arrowHandleSize:3.5,textHandleSize:3.5,minArrowHeight:20,maxArrowHeight:30},AC=["start","end"],kC=[{x:0,y:0},{x:.5,y:0},{x:1,y:0},{x:0,y:.5},{x:1,y:.5},{x:0,y:1},{x:.5,y:1},{x:1,y:1}];class PQ extends E3{constructor(t,n={}){super(),je(this,"arrows"),je(this,"texts"),je(this,"links",new LQ),je(this,"layer"),je(this,"annotations"),je(this,"ogma"),je(this,"options"),je(this,"selected",null),je(this,"updateTimeout",0),je(this,"hoveredNode",null),je(this,"dragged",null),je(this,"textToMagnet"),je(this,"activeLinks",[]),je(this,"_render",r=>{if(!this.dragged||this.textToMagnet===void 0)return;r.beginPath(),r.fillStyle="green";const i=this.ogma.view.getZoom();kC.forEach(s=>{if(!this.textToMagnet)return;const o=_s(this.textToMagnet),a=hs(this.textToMagnet),l=Hh(s,{x:o.width,y:o.height}),c=ui(l,this.ogma.view.getAngle()),{x:d,y:u}=pl(c,a);r.moveTo(d,u),r.arc(d,u,this.options.magnetHandleRadius/i,0,Math.PI*2)}),r.fill(),r.closePath()}),je(this,"_onFeatureDrag",(r,i)=>{const s=i;if(Nr(r)&&s==="line")["start","end"].find(o=>{const a=o==="start"?vd(r):zp(r);return this._snapToText(r,s,a)||this._findAndSnapToNode(r,o,a)});else if(Nr(r)&&s!=="line"){const o=s==="start"?vd(r):zp(r);this._snapToText(r,s,o)||this._findAndSnapToNode(r,s,o)}else Ai(r)&&(this.activeLinks.forEach(({arrow:o,side:a,connectionPoint:l})=>{const c=this.getAnnotation(o),d=_s(r),u=hs(r),h=Hh(l,{x:d.width,y:d.height}),g=ui(h,this.ogma.view.getAngle()),p=pl(g,u);c.geometry.coordinates[a==="start"?0:1]=[p.x,p.y]}),this.activeLinks.length&&this.arrows.refreshLayer());this.layer.refresh(),this.emit(Bp,r,i)}),je(this,"_onFeatureDragEnd",r=>{this.dragged!==null&&Nr(r)&&vd(this.dragged)&&AC.forEach(i=>{this.links.getArrowLink(r.id,i)&&this.emit(EQ,{arrow:r,link:this.links.getArrowLink(r.id,i)})}),(Ai(r)||Nr(r))&&this.onUpdate(r),this.dragged=null,this.activeLinks=[],this.textToMagnet=void 0,this.annotations.forEach(i=>i.enableDetection()),this.layer.refresh(),this.emit(Xl,r)}),je(this,"_onFeatureDragStart",r=>{this.textToMagnet=void 0,Nr(r)?this.dragged=r:Ai(r)&&this.activeLinks.push(...this.links.getTargetLinks(r.id,"text")),this.annotations.forEach(i=>{const s=i.getSelectedFeature();s&&s!==r&&i.unhover().unselect(),i.disableDetection()}),this.emit(jp,r)}),je(this,"_onNodesDragStart",()=>{this.arrows.unhover().unselect(),this.texts.unhover().unselect()}),je(this,"_onNodesDrag",r=>{const{dx:i,dy:s}=r;this._moveNodes(r.nodes,i,s)}),je(this,"_onLayoutEnd",r=>{r.ids.forEach((i,s)=>{this.links.getTargetLinks(i,"node").forEach(o=>{const a=this.getAnnotation(o.arrow),l=o.side,c=Gh(a,l==="start"?"end":"start"),d=r.positions.current[s],u=this.ogma.getNode(i).getAttribute("radius"),h=Vh(c,d,+u);Ua(a,l,h.x,h.y)})}),this.arrows.refreshLayer(),this.texts.refreshLayer()}),je(this,"_onAdded",r=>{this.emit(_v,r)}),je(this,"_onRemoved",r=>{this.emit(fv,r)}),je(this,"_onUnselect",r=>{this.selected=null,this.emit(mv,r)}),je(this,"_onSelect",r=>{this.selected!==r&&(this.selected=r,this.emit(pv,this.selected))}),je(this,"onUpdate",r=>{cancelAnimationFrame(this.updateTimeout),this.updateTimeout=requestAnimationFrame(()=>this._onUpdate(r))}),je(this,"_onUpdate",r=>{this.emit(yv,r)}),this.options=this.setOptions({...IQ,...n}),this.ogma=t,this.arrows=new kQ(t,this.options),this.texts=new NQ(t,this.options),this.annotations=[this.arrows,this.texts],this.annotations.forEach(r=>{r.on(jp,this._onFeatureDragStart).on(Bp,this._onFeatureDrag).on(Xl,this._onFeatureDragEnd).on(yv,this.onUpdate).on(mv,this._onUnselect).on(pv,this._onSelect).on(_v,this._onAdded).on(fv,this._onRemoved)}),this.ogma.events.on("nodesDragStart",this._onNodesDragStart).on("nodesDragProgress",this._onNodesDrag).on("layoutEnd",this._onLayoutEnd).on(["viewChanged","rotate"],()=>{this.refreshTextLinks()}),this.layer=t.layers.addCanvasLayer(this._render),this.layer.moveToBottom()}_moveNodes(t,n,r){t.forEach(i=>{const s=this.links.getTargetLinks(i.getId(),"node"),o=i.getPosition();s.forEach(a=>{const l=this.getAnnotation(a.arrow),c=a.side,d=Gh(l,c==="start"?"end":"start");let u=o;const h=+i.getAttribute("radius"),g=1e-6;(a.connectionPoint.x-(o.x-n)>g||a.connectionPoint.y-(o.y-r)>g)&&(u=Vh(d,o,h)),Ua(l,c,u.x,u.y)})}),this.arrows.refreshLayer()}_snapToText(t,n,r){const i=this.texts.detect(r,this.options.detectMargin);if(this.links.remove(t,n),!i)return!1;this.textToMagnet=i;const s=this.findMagnetPoint(kC,i,r);return s?(Ua(t,n,s.point.x,s.point.y),this.links.add(t,n,i.id,"text",s.magnet),!0):!1}_findAndSnapToNode(t,n,r){var i,s;const o=this.ogma.view.graphToScreenCoordinates(r),a=this.ogma.view.getElementAt(o);this.links.remove(t,n),a&&a.isNode?((i=this.hoveredNode)==null||i.setSelected(!1),this.hoveredNode=a,a.setSelected(!0),this._snapToNode(t,n,a,o)):((s=this.hoveredNode)==null||s.setSelected(!1),this.hoveredNode=null)}_snapToNode(t,n,r,i){const s=r.getPositionOnScreen(),o=+r.getAttribute("radius"),a=o*this.ogma.view.getZoom(),l=i.x-s.x,c=i.y-s.y,d=Math.sqrt(l*l+c*c),u=r.getPosition();if(d<a+this.options.detectMargin){let h=u;if(d>a/2){const g=Gh(t,n==="end"?"start":"end");h=Vh(g,h,o)}Ua(t,n,h.x,h.y),this.links.add(t,n,r.getId(),"node",h)}}refreshTextLinks(){let t=!1;this.links.forEach(({connectionPoint:n,targetType:r,target:i,arrow:s,side:o})=>{if(r!=="text")return;t=!0;const a=this.getAnnotation(i),l=this.getAnnotation(s),c=_s(a),d=hs(a),u=Hh(n,{x:c.width,y:c.height}),h=ui(u,this.ogma.view.getAngle()),g=pl(h,d);Ua(l,o,g.x,g.y)}),t&&this.arrows.refreshLayer()}getSelected(){return this.selected}findMagnetPoint(t,n,r){let i;for(const s of t){const o=_s(n),a=hs(n),l=Hh(s,{x:o.width,y:o.height}),c=ui(l,this.ogma.view.getAngle()),d=pl(c,a),u=Sl(aa(d,r)),h=Math.min(this.options.magnetRadius*this.ogma.view.getZoom(),o.width/2,o.height/2);if(u<Math.max(h,this.options.magnetHandleRadius)){i={point:d,magnet:s};break}}return i}setOptions(t={}){return this.options={...this.options||{},...t},this.options}select(t){const n=this.getAnnotations().features.find(r=>r.id===t);return n?(Nr(n)?this.arrows.select(n.id):Ai(n)&&this.texts.select(n.id),this):this}unselect(){return this.selected?(Nr(this.selected)?this.arrows.unselect():Ai(this.selected)&&this.texts.unselect(),this):this}add(t){if(SC(t)){const[n,r]=t.features.reduce((i,s)=>(Nr(s)?i[1].push(s):Ai(s)&&i[0].push(s),i),[[],[]]);return n.forEach(i=>this.add(i)),r.forEach(i=>this.add(i)),this.arrows.refreshLayer(),this}switch(t.properties.type){case"text":this.texts.add(t);break;default:this.arrows.add(t),this.loadLink(t);break}return this}remove(t){return SC(t)?(t.features.forEach(n=>this.remove(n)),this):(Nr(t)?(this.links.remove(t,"start"),this.links.remove(t,"end"),this.arrows.remove(t.id)):this.texts.remove(t.id),this)}loadLink(t){if(t.properties.link)for(const n of AC){const r=t.properties.link[n];if(!r)continue;const i=this.getAnnotation(r.id);if(r.type==="text"&&i)this.links.add(t,n,r.id,r.type,r.magnet);else if(r.type==="node"){const s=this.ogma.getNode(r.id);if(!s)continue;this.links.add(t,n,r.id,r.type,r.magnet);const o=s.getPosition(),a=s.getAttribute("radius")||0,l=Gh(t,n==="start"?"end":"start"),c=Vh(l,o,+a);Ua(t,n,c.x,c.y)}}}startArrow(t,n,r){this.cancelDrawing(),this.arrows.startDrawing(t,n,r)}startText(t,n,r){this.cancelDrawing(),this.texts.startDrawing(t,n,r)}cancelDrawing(){this.annotations.forEach(t=>t.cancelDrawing()),this.emit(wQ)}updateStyle(t,n){const r=this.getAnnotations().features.find(i=>i.id===t);return r?(Nr(r)?this.arrows.updateStyle(r,n):Ai(r)&&this.texts.updateStyle(r,n),this.onUpdate(r),this):this}setScale(t,n,r,i){const s=this.getAnnotations().features.find(o=>o.id===t);return s?(Nr(s)?this.arrows.scale(s,n,r,i):Ai(s)&&this.texts.scale(s,n,r,i),this.onUpdate(s),this):this}getAnnotations(){const t={type:"FeatureCollection",features:[]};return this.annotations.forEach(n=>{t.features=[...t.features,...n.getElements()]}),t}getAnnotation(t){return this.getAnnotations().features.find(n=>n.id===t)}destroy(){this.annotations.forEach(t=>t.destroy()),this.layer.destroy()}}const vv=[8,10,12,14,16,24,32,48,64,72],CC="none",C3="#333333",O0=["#FFFFFF","#F44E3B","#FE9200","#FCDC00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#1E88E5","#333333","#808080","#cccccc"],MQ=["Roboto","Helvetica Neue","Helvetica","Arial","sans-serif","Georgia, serif","Menlo","Monaco","Consolas","Courier New","monospace"].sort((e,t)=>e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase())),T3={head:"arrow",strokeColor:C3,strokeWidth:5},FQ=.25,N3={font:"Roboto",fontSize:vv[2],padding:vv[2]*FQ,color:C3,strokeType:CC,background:CC};function RQ(e){return e.reduce((t,n)=>t+n,0)/e.length}function TC(e,t=0,n=1){return t+(n-t)*e}function NC(e,t=0,n=1){return(e-t)/(n-t)}const L3=L.createContext(void 0),I3=()=>L.useContext(L3),DQ=(e,t)=>{switch(t.type){case"add":return{...e,features:[...e.features,t.payload]};case"remove":return{...e,features:e.features.filter(n=>n.id!==t.payload.id)};case"update":return{...e,features:e.features.map(n=>n.id===t.payload.id?t.payload:n)};default:return e}},zQ=({children:e})=>{const t=cr(),[n,r]=L.useReducer(DQ,{type:"FeatureCollection",features:[]}),[i,s]=L.useState(null),[o,a]=L.useState(T3),[l,c]=L.useState(N3),[d,u]=L.useState(),[h,g]=L.useState(1),[p,m]=L.useState(1);return L.useEffect(()=>{if(!t)return;const f=new PQ(t,{minArrowHeight:1}),y=RQ(t.getNodes().getAttribute("radius"))/5,_=h;return a({...o,strokeWidth:(o.strokeWidth||1)*_}),g(_),m(y),f.on("select",v=>{Nr(v)?a({...v.properties.style||{}}):Ai(v)&&c({...v.properties.style||{}}),s(v)}).on("unselect",()=>{s(null)}),u(f),()=>{d==null||d.destroy()}},[t]),L.useEffect(()=>{d&&i&&(i==null?void 0:i.properties.type)==="arrow"&&d.updateStyle(i.id,o)},[d,o,i]),L.useEffect(()=>{d&&i&&(i==null?void 0:i.properties.type)==="text"&&d.updateStyle(i.id,l)},[d,l,i]),at.jsx(L3.Provider,{value:{annotations:n,updateAnnotations:r,currentAnnotation:i,setCurrentAnnotation:s,textStyle:l,setTextStyle:c,arrowStyle:o,setArrowStyle:a,arrowWidthFactor:h,setArrowWidthFactor:g,textSizeFactor:p,setTextSizeFactor:m,editor:d,setEditor:u},children:e})};function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(null,arguments)}function OQ(e){if(Array.isArray(e))return e}function BQ(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(d){c=!0,i=d}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function xv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P3(e,t){if(e){if(typeof e=="string")return xv(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xv(e,t):void 0}}function jQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fe(e,t){return OQ(e)||BQ(e,t)||P3(e,t)||jQ()}function UQ(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Re(e,t){if(e==null)return{};var n,r,i=UQ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.includes(n)||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var $Q={},la={},M3={};function GQ(e){for(var t=5381,n=e.length;n;)t=t*33^e.charCodeAt(--n);return t>>>0}var VQ=GQ,F3={};(function(e){e.__esModule=!0,e.default=void 0;function t(a,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function n(a,l,c){return l&&t(a.prototype,l),a}var r=typeof process<"u"&&$Q&&!0,i=function(l){return Object.prototype.toString.call(l)==="[object String]"},s=function(){function a(c){var d=c===void 0?{}:c,u=d.name,h=u===void 0?"stylesheet":u,g=d.optimizeForSpeed,p=g===void 0?r:g,m=d.isBrowser,f=m===void 0?typeof window<"u":m;o(i(h),"`name` must be a string"),this._name=h,this._deletedRulePlaceholder="#"+h+"-deleted-rule____{}",o(typeof p=="boolean","`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=p,this._isBrowser=f,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var y=this._isBrowser&&document.querySelector('meta[property="csp-nonce"]');this._nonce=y?y.getAttribute("content"):null}var l=a.prototype;return l.setOptimizeForSpeed=function(d){o(typeof d=="boolean","`setOptimizeForSpeed` accepts a boolean"),o(this._rulesCount===0,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=d,this.inject()},l.isOptimizeForSpeed=function(){return this._optimizeForSpeed},l.inject=function(){var d=this;if(o(!this._injected,"sheet already injected"),this._injected=!0,this._isBrowser&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(r||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(h,g){return typeof g=="number"?d._serverSheet.cssRules[g]={cssText:h}:d._serverSheet.cssRules.push({cssText:h}),g},deleteRule:function(h){d._serverSheet.cssRules[h]=null}}},l.getSheetForTag=function(d){if(d.sheet)return d.sheet;for(var u=0;u<document.styleSheets.length;u++)if(document.styleSheets[u].ownerNode===d)return document.styleSheets[u]},l.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},l.insertRule=function(d,u){if(o(i(d),"`insertRule` accepts only strings"),!this._isBrowser)return typeof u!="number"&&(u=this._serverSheet.cssRules.length),this._serverSheet.insertRule(d,u),this._rulesCount++;if(this._optimizeForSpeed){var h=this.getSheet();typeof u!="number"&&(u=h.cssRules.length);try{h.insertRule(d,u)}catch{return r||console.warn(`StyleSheet: illegal rule: 

`+d+`

See https://stackoverflow.com/q/20007992 for more info`),-1}}else{var g=this._tags[u];this._tags.push(this.makeStyleTag(this._name,d,g))}return this._rulesCount++},l.replaceRule=function(d,u){if(this._optimizeForSpeed||!this._isBrowser){var h=this._isBrowser?this.getSheet():this._serverSheet;if(u.trim()||(u=this._deletedRulePlaceholder),!h.cssRules[d])return d;h.deleteRule(d);try{h.insertRule(u,d)}catch{r||console.warn(`StyleSheet: illegal rule: 

`+u+`

See https://stackoverflow.com/q/20007992 for more info`),h.insertRule(this._deletedRulePlaceholder,d)}}else{var g=this._tags[d];o(g,"old rule at index `"+d+"` not found"),g.textContent=u}return d},l.deleteRule=function(d){if(!this._isBrowser){this._serverSheet.deleteRule(d);return}if(this._optimizeForSpeed)this.replaceRule(d,"");else{var u=this._tags[d];o(u,"rule at index `"+d+"` not found"),u.parentNode.removeChild(u),this._tags[d]=null}},l.flush=function(){this._injected=!1,this._rulesCount=0,this._isBrowser?(this._tags.forEach(function(d){return d&&d.parentNode.removeChild(d)}),this._tags=[]):this._serverSheet.cssRules=[]},l.cssRules=function(){var d=this;return this._isBrowser?this._tags.reduce(function(u,h){return h?u=u.concat(Array.prototype.map.call(d.getSheetForTag(h).cssRules,function(g){return g.cssText===d._deletedRulePlaceholder?null:g})):u.push(null),u},[]):this._serverSheet.cssRules},l.makeStyleTag=function(d,u,h){u&&o(i(u),"makeStyleTag acceps only strings as second parameter");var g=document.createElement("style");this._nonce&&g.setAttribute("nonce",this._nonce),g.type="text/css",g.setAttribute("data-"+d,""),u&&g.appendChild(document.createTextNode(u));var p=document.head||document.getElementsByTagName("head")[0];return h?p.insertBefore(g,h):p.appendChild(g),g},n(a,[{key:"length",get:function(){return this._rulesCount}}]),a}();e.default=s;function o(a,l){if(!a)throw new Error("StyleSheet: "+l+".")}})(F3);(function(e){e.__esModule=!0,e.default=void 0;var t=r(VQ),n=r(F3);function r(a){return a&&a.__esModule?a:{default:a}}var i=function(l){return l.replace(/\/style/gi,"\\/style")},s=function(){function a(c){var d=c===void 0?{}:c,u=d.styleSheet,h=u===void 0?null:u,g=d.optimizeForSpeed,p=g===void 0?!1:g,m=d.isBrowser,f=m===void 0?typeof window<"u":m;this._sheet=h||new n.default({name:"styled-jsx",optimizeForSpeed:p}),this._sheet.inject(),h&&typeof p=="boolean"&&(this._sheet.setOptimizeForSpeed(p),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._isBrowser=f,this._fromServer=void 0,this._indices={},this._instancesCounts={},this.computeId=this.createComputeId(),this.computeSelector=this.createComputeSelector()}var l=a.prototype;return l.add=function(d){var u=this;this._optimizeForSpeed===void 0&&(this._optimizeForSpeed=Array.isArray(d.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._isBrowser&&!this._fromServer&&(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(f,y){return f[y]=0,f},{}));var h=this.getIdAndRules(d),g=h.styleId,p=h.rules;if(g in this._instancesCounts){this._instancesCounts[g]+=1;return}var m=p.map(function(f){return u._sheet.insertRule(f)}).filter(function(f){return f!==-1});this._indices[g]=m,this._instancesCounts[g]=1},l.remove=function(d){var u=this,h=this.getIdAndRules(d),g=h.styleId;if(o(g in this._instancesCounts,"styleId: `"+g+"` not found"),this._instancesCounts[g]-=1,this._instancesCounts[g]<1){var p=this._fromServer&&this._fromServer[g];p?(p.parentNode.removeChild(p),delete this._fromServer[g]):(this._indices[g].forEach(function(m){return u._sheet.deleteRule(m)}),delete this._indices[g]),delete this._instancesCounts[g]}},l.update=function(d,u){this.add(u),this.remove(d)},l.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={},this.computeId=this.createComputeId(),this.computeSelector=this.createComputeSelector()},l.cssRules=function(){var d=this,u=this._fromServer?Object.keys(this._fromServer).map(function(g){return[g,d._fromServer[g]]}):[],h=this._sheet.cssRules();return u.concat(Object.keys(this._indices).map(function(g){return[g,d._indices[g].map(function(p){return h[p].cssText}).join(d._optimizeForSpeed?"":`
`)]}).filter(function(g){return!!g[1]}))},l.createComputeId=function(){var d={};return function(u,h){if(!h)return"jsx-"+u;var g=String(h),p=u+g;return d[p]||(d[p]="jsx-"+(0,t.default)(u+"-"+g)),d[p]}},l.createComputeSelector=function(d){d===void 0&&(d=/__jsx-style-dynamic-selector/g);var u={};return function(h,g){this._isBrowser||(g=i(g));var p=h+g;return u[p]||(u[p]=g.replace(d,h)),u[p]}},l.getIdAndRules=function(d){var u=this,h=d.children,g=d.dynamic,p=d.id;if(g){var m=this.computeId(p,g);return{styleId:m,rules:Array.isArray(h)?h.map(function(f){return u.computeSelector(m,f)}):[this.computeSelector(m,h)]}}return{styleId:this.computeId(p),rules:Array.isArray(h)?h:[h]}},l.selectFromServer=function(){var d=Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]'));return d.reduce(function(u,h){var g=h.id.slice(2);return u[g]=h,u},{})},a}();e.default=s;function o(a,l){if(!a)throw new Error("StyleSheetRegistry: "+l+".")}})(M3);(function(e){e.__esModule=!0,e.default=s,e.flush=o;var t=E,n=r(M3);function r(a){return a&&a.__esModule?a:{default:a}}var i=new n.default;function s(a){return typeof window>"u"?(i.add(a),null):((0,t.useLayoutEffect)(function(){return i.add(a),function(){i.remove(a)}},[a.id,String(a.dynamic)]),null)}s.dynamic=function(a){return a.map(function(l){var c=l[0],d=l[1];return i.computeId(c,d)}).join(" ")};function o(){var a=i.cssRules();return i.flush(),a}})(la);var P=la.default||la;P.flush=la.flush;var Up={};(function(e){e.__esModule=!0,e.default=i,e.flushToHTML=s;var t=r(E),n=la.default||la;n.flush=la.flush;function r(o){return o&&o.__esModule?o:{default:o}}function i(o){return o===void 0&&(o={}),(0,n.flush)().map(function(a){var l=a[0],c=a[1];return t.default.createElement("style",{id:"__"+l,key:"__"+l,nonce:o.nonce?o.nonce:void 0,dangerouslySetInnerHTML:{__html:c}})})}function s(o){return o===void 0&&(o={}),(0,n.flush)().reduce(function(a,l){var c=l[0],d=l[1];return a+='<style id="__'+c+'"'+(o.nonce?' nonce="'+o.nonce+'"':"")+">"+d+"</style>",a},"")}})(Up);var R3=Up.default||Up;R3.flushToHTML=Up.flushToHTML;function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}var D3={sans:'"Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',mono:"Menlo, Monaco, Lucida Console, Liberation Mono, DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace"},$p={xs:{min:"0",max:"650px"},sm:{min:"650px",max:"900px"},md:{min:"900px",max:"1280px"},lg:{min:"1280px",max:"1920px"},xl:{min:"1920px",max:"10000px"}},z3={gap:"16pt",gapNegative:"-16pt",gapHalf:"8pt",gapHalfNegative:"-8pt",gapQuarter:"4pt",gapQuarterNegative:"-4pt",pageMargin:"16pt",pageWidth:"750pt",pageWidthWithMargin:"782pt",breakpointMobile:$p.xs.max,breakpointTablet:$p.sm.max,radius:"5px",unit:"16px"},HQ={accents_1:"#fafafa",accents_2:"#eaeaea",accents_3:"#999",accents_4:"#888",accents_5:"#666",accents_6:"#444",accents_7:"#333",accents_8:"#111",background:"#fff",foreground:"#000",selection:"#79ffe1",secondary:"#666",code:"#f81ce5",border:"#eaeaea",error:"#e00",errorLight:"#ff1a1a",errorLighter:"#f7d4d6",errorDark:"#c50000",success:"#0070f3",successLight:"#3291ff",successLighter:"#d3e5ff",successDark:"#0761d1",warning:"#f5a623",warningLight:"#f7b955",warningLighter:"#ffefcf",warningDark:"#ab570a",cyan:"#50e3c2",cyanLighter:"#aaffec",cyanLight:"#79ffe1",cyanDark:"#29bc9b",violet:"#7928ca",violetLighter:"#e3d7fc",violetLight:"#8a63d2",violetDark:"#4c2889",purple:"#f81ce5",alert:"#ff0080",magenta:"#eb367f",link:"#0070f3"},WQ={linkStyle:"none",linkHoverStyle:"none",dropdownBoxShadow:"0 4px 4px 0 rgba(0, 0, 0, 0.02)",scrollerStart:"rgba(255, 255, 255, 1)",scrollerEnd:"rgba(255, 255, 255, 0)",shadowSmall:"0 5px 10px rgba(0, 0, 0, 0.12)",shadowMedium:"0 8px 30px rgba(0, 0, 0, 0.12)",shadowLarge:"0 30px 60px rgba(0, 0, 0, 0.12)",portalOpacity:.25},XQ=D3,YQ=$p,qQ=z3,Hb={type:"light",font:XQ,layout:qQ,palette:HQ,breakpoints:YQ,expressiveness:WQ},ZQ={accents_1:"#111",accents_2:"#333",accents_3:"#444",accents_4:"#666",accents_5:"#888",accents_6:"#999",accents_7:"#eaeaea",accents_8:"#fafafa",background:"#000",foreground:"#fff",selection:"#f81ce5",secondary:"#888",code:"#79ffe1",border:"#333",error:"#e00",errorLighter:"#f7d4d6",errorLight:"#ff1a1a",errorDark:"#c50000",success:"#0070f3",successLighter:"#d3e5ff",successLight:"#3291ff",successDark:"#0761d1",warning:"#f5a623",warningLighter:"#ffefcf",warningLight:"#f7b955",warningDark:"#ab570a",cyan:"#50e3c2",cyanLighter:"#aaffec",cyanLight:"#79ffe1",cyanDark:"#29bc9b",violet:"#7928ca",violetLighter:"#e3d7fc",violetLight:"#8a63d2",violetDark:"#4c2889",purple:"#f81ce5",alert:"#ff0080",magenta:"#eb367f",link:"#3291ff"},JQ={linkStyle:"none",linkHoverStyle:"none",dropdownBoxShadow:"0 0 0 1px #333",scrollerStart:"rgba(255, 255, 255, 1)",scrollerEnd:"rgba(255, 255, 255, 0)",shadowSmall:"0 0 0 1px #333",shadowMedium:"0 0 0 1px #333",shadowLarge:"0 0 0 1px #333",portalOpacity:.75},QQ=D3,KQ=$p,eK=z3,O3={type:"dark",font:QQ,layout:eK,palette:ZQ,breakpoints:KQ,expressiveness:JQ},Wh=function(t){return t&&bv(t)==="object"},tK=function e(t,n){if(!Wh(n)||!Wh(t))return t;for(var r=Object.keys(t),i={},s=0,o=r;s<o.length;s++){var a=o[s],l=t[a],c=n[a];Array.isArray(l)&&Array.isArray(c)?i[a]=c.concat(l):Wh(l)&&Wh(c)?i[a]=e(l,ve({},c)):c?i[a]=c:i[a]=l}return i},B3=function(){return[Hb,O3]},nK=function(){return Hb},Wm=function(t){if(!t)return!1;var n=B3(),r=n.find(function(i){return i.type===t});return!r},rK=function(t){if(!t)return!1;var n=typeof t=="string",r=n?t:t.type;return!Wm(r)},iK=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return!!t.find(function(n){return Wm(n.type)})},Wb=function(t,n){if(!Wm(n.type))throw new Error("Duplicate or unavailable theme type");return tK(t,n)},sK=function(t){return Wb(O3,t)},oK=function(t){return Wb(Hb,t)},aK={isPresetTheme:rK,isAvailableThemeType:Wm,hasUserCustomTheme:iK,getPresets:B3,getPresetStaticTheme:nK,create:Wb,createFromDark:sK,createFromLight:oK},lK=aK.getPresetStaticTheme(),cK=E.createContext(lK),ze=function(){return E.useContext(cK)},dK=function(t){var n=t.children,r=t.isRight,i=ze();return E.createElement("span",{className:P.dynamic([["3089782703",[i.layout.gapHalf,i.palette.accents_4,i.palette.accents_1,i.layout.radius,i.layout.radius,i.palette.border,i.palette.border,i.palette.border,i.layout.radius,i.layout.radius,i.palette.border]]])+" "+((r?"right":"")||"")},n,E.createElement(P,{id:"3089782703",dynamic:[i.layout.gapHalf,i.palette.accents_4,i.palette.accents_1,i.layout.radius,i.layout.radius,i.palette.border,i.palette.border,i.palette.border,i.layout.radius,i.layout.radius,i.palette.border]},"span.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:initial;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;pointer-events:none;margin:0;padding:0 ".concat(i.layout.gapHalf,";color:").concat(i.palette.accents_4,";background-color:").concat(i.palette.accents_1,";border-top-left-radius:").concat(i.layout.radius,";border-bottom-left-radius:").concat(i.layout.radius,";border-top:1px solid ").concat(i.palette.border,";border-left:1px solid ").concat(i.palette.border,";border-bottom:1px solid ").concat(i.palette.border,";font-size:inherit;line-height:1;}span.right.__jsx-style-dynamic-selector{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:").concat(i.layout.radius,";border-bottom-right-radius:").concat(i.layout.radius,";border-left:0;border-right:1px solid ").concat(i.palette.border,";}")))},LC=E.memo(dK),j3=function(t){var n=t.children,r=ze();return E.createElement("label",{className:P.dynamic([["1278828862",[r.palette.accents_6]]])},n,E.createElement(P,{id:"1278828862",dynamic:[r.palette.accents_6]},"label.__jsx-style-dynamic-selector{display:block;font-weight:normal;color:".concat(r.palette.accents_6,";padding:0 0 0 1px;margin-bottom:0.5em;font-size:1em;line-height:1.5;}label.__jsx-style-dynamic-selector>*:first-child{margin-top:0;}label.__jsx-style-dynamic-selector>*:last-child{margin-bottom:0;}")))};j3.displayName="GeistInputBlockLabel";var uK=E.memo(j3),U3=function(t){var n=t.icon,r=t.clickable,i=t.onClick;return E.createElement("span",{onClick:i,className:P.dynamic([["4247656379",[r?"pointer":"default",r?"auto":"none"]]])+" input-icon"},n,E.createElement(P,{id:"4247656379",dynamic:[r?"pointer":"default",r?"auto":"none"]},".input-icon.__jsx-style-dynamic-selector{box-sizing:border-box;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:calc(var(--input-height) - 2px);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:0;padding:0;line-height:1;position:relative;cursor:".concat(r?"pointer":"default",";pointer-events:").concat(r?"auto":"none",";}.input-icon.__jsx-style-dynamic-selector svg{width:calc(var(--input-height) - 2px);height:calc(var(--input-height) - 2px);-webkit-transform:scale(0.44);-ms-transform:scale(0.44);transform:scale(0.44);}")))};U3.displayName="GeistInputIcon";var IC=E.memo(U3),hK=function(t){var n=t.onClick,r=t.disabled,i=t.visible,s=ze(),o=function(l){l.preventDefault(),l.stopPropagation(),l.nativeEvent.stopImmediatePropagation(),n&&n(l)};return E.createElement("div",{onClick:o,className:P.dynamic([["1567030211",[r?"not-allowed":"pointer",s.palette.accents_3,r?s.palette.accents_3:s.palette.foreground]]])+" "+"clear-icon ".concat(i?"visible":"")},E.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:P.dynamic([["1567030211",[r?"not-allowed":"pointer",s.palette.accents_3,r?s.palette.accents_3:s.palette.foreground]]])},E.createElement("path",{d:"M18 6L6 18",className:P.dynamic([["1567030211",[r?"not-allowed":"pointer",s.palette.accents_3,r?s.palette.accents_3:s.palette.foreground]]])}),E.createElement("path",{d:"M6 6l12 12",className:P.dynamic([["1567030211",[r?"not-allowed":"pointer",s.palette.accents_3,r?s.palette.accents_3:s.palette.foreground]]])})),E.createElement(P,{id:"1567030211",dynamic:[r?"not-allowed":"pointer",s.palette.accents_3,r?s.palette.accents_3:s.palette.foreground]},".clear-icon.__jsx-style-dynamic-selector{box-sizing:border-box;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:calc(var(--input-height) - 2px);-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:".concat(r?"not-allowed":"pointer",";-webkit-transition:color 150ms ease 0s;transition:color 150ms ease 0s;margin:0;padding:0;color:").concat(s.palette.accents_3,";visibility:hidden;opacity:0;}.visible.__jsx-style-dynamic-selector{visibility:visible;opacity:1;}.clear-icon.__jsx-style-dynamic-selector:hover{color:").concat(r?s.palette.accents_3:s.palette.foreground,";}svg.__jsx-style-dynamic-selector{color:currentColor;width:calc(var(--input-height) - 2px);height:calc(var(--input-height) - 2px);-webkit-transform:scale(0.44);-ms-transform:scale(0.44);transform:scale(0.44);}")))},gK=E.memo(hK),$3=function(t,n){var r={default:{color:t.foreground,borderColor:t.border,hoverBorder:t.accents_5},secondary:{color:t.foreground,borderColor:t.secondary,hoverBorder:t.secondary},success:{color:t.foreground,borderColor:t.successLight,hoverBorder:t.success},warning:{color:t.foreground,borderColor:t.warningLight,hoverBorder:t.warning},error:{color:t.error,borderColor:t.error,hoverBorder:t.errorDark}};return n?r[n]:r.default},G3={disabled:!1,readOnly:!1,clearable:!1,iconClickable:!1,type:"default",htmlType:"text",autoComplete:"off",className:"",placeholder:"",initialValue:""},gr=function(t){return"".concat(t)},pK={getScaleableProps:function(){},SCALES:{pl:gr,pr:gr,pb:gr,pt:gr,px:gr,py:gr,mb:gr,ml:gr,mr:gr,mt:gr,mx:gr,my:gr,width:gr,height:gr,font:gr},unit:"16px"},V3=E.createContext(pK),Ge=function(){return E.useContext(V3)},H3=function(){return Math.random().toString(32).slice(2,10)},xd=function(t,n){var r=E.Children.map(t,function(i){return E.isValidElement(i)?i.type:null});return(r||[]).includes(n)},yi=function(t,n){var r=[],i=E.Children.map(t,function(o){return E.isValidElement(o)&&o.type===n?(r.push(o),null):o}),s=r.length>=0?r:void 0;return[i,s]},W3=function(t,n,r){var i=[],s=Array.isArray(r),o=E.Children.map(t,function(l){return E.isValidElement(l)?l.props?s?r.includes(l.props[n])?(i.push(l),null):l:l.props[n]===r?(i.push(l),null):l:l:null}),a=i.length>=0?i:void 0;return[o,a]},mK=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(E.Children.count(t)===0)return[];var i=r.length===0,s=function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E.cloneElement(a,l)};return E.Children.map(t,function(o){if(!E.isValidElement(o))return o;if(i)return s(o,n);var a=r.find(function(l){return l===o.type});return a?s(o,n):o})},fK=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(E.Children.count(t)===0)return[];var r=n.length===0,i=function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E.cloneElement(a,l)},s=0;return E.Children.map(t,function(o){if(!E.isValidElement(o))return o;if(s=s+1,r)return i(o,{index:s});var a=n.find(function(l){return l===o.type});return a?i(o,{index:s}):(s=s-1,o)})},_K=function(t){return t?typeof t!="function"?t:t():null},X3=function(t,n){if(!t||!n)return!1;for(var r=n;r;){if(r===t)return!0;r=r.parentNode}return!1},Y3=function(){return!!(typeof window<"u"&&window.document&&window.document.createElement)},PC=function(){return Y3()?navigator.platform.toUpperCase().indexOf("MAC")>=0:!1},yK=function(t){return t!==void 0&&!Number.isNaN(+t)},vK=["children"];function xK(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bK(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}function bK(e,t){if(e){if(typeof e=="string")return MC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MC(e,t)}}function MC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wK=function(t){if(t===1)return t;var n=Math.abs((t-1)/2);return t>1?1+n:1-n},Ve=function(t){var n=L.forwardRef(function(r,i){var s,o,a,l,c,d,u,h,g,p,m,f,y,_,v,x,b,w,S,A,C,k,T,M,D,B,I,N,V,$,Q,se,te=r.children,de=Re(r,vK),Ee=ze(),oe=Ee.layout,_e=de.paddingLeft,De=de.pl,We=de.paddingRight,Ye=de.pr,pe=de.paddingTop,ye=de.pt,Ke=de.paddingBottom,tt=de.pb,dt=de.marginTop,it=de.mt,Y=de.marginRight,ne=de.mr,ae=de.marginBottom,ce=de.mb,he=de.marginLeft,me=de.ml,Me=de.px,Ce=de.py,Te=de.mx,ot=de.my,st=de.width,It=de.height,Pt=de.font,Mt=de.w,Ht=de.h,Bt=de.margin,lt=de.padding,kt=de.unit,jt=kt===void 0?oe.unit:kt,Ft=de.scale,Ct=Ft===void 0?1:Ft,vt=function(mt){return function(xt,gt){xt===0&&(xt=1,gt=gt||0);var Ut=wK(Ct)*xt;if(typeof mt>"u")return typeof gt<"u"?"".concat(gt):"calc(".concat(Ut," * ").concat(jt,")");if(!yK(mt))return"".concat(mt);var Wt=Ut*Number(mt);return"calc(".concat(Wt," * ").concat(jt,")")}},Vt=function(mt){if(!Array.isArray(mt))return de[mt];var xt=void 0,gt=xK(mt),Ut;try{for(gt.s();!(Ut=gt.n()).done;){var Wt=Ut.value,An=de[Wt];typeof An<"u"&&(xt=An)}}catch(On){gt.e(On)}finally{gt.f()}return xt},Qt={unit:jt,SCALES:{pt:vt((s=(o=pe??ye)!==null&&o!==void 0?o:Ce)!==null&&s!==void 0?s:lt),pr:vt((a=(l=We??Ye)!==null&&l!==void 0?l:Me)!==null&&a!==void 0?a:lt),pb:vt((c=(d=Ke??tt)!==null&&d!==void 0?d:Ce)!==null&&c!==void 0?c:lt),pl:vt((u=(h=_e??De)!==null&&h!==void 0?h:Me)!==null&&u!==void 0?u:lt),px:vt((g=(p=(m=(f=Me??_e)!==null&&f!==void 0?f:We)!==null&&m!==void 0?m:De)!==null&&p!==void 0?p:Ye)!==null&&g!==void 0?g:lt),py:vt((y=(_=(v=(x=Ce??pe)!==null&&x!==void 0?x:Ke)!==null&&v!==void 0?v:ye)!==null&&_!==void 0?_:tt)!==null&&y!==void 0?y:lt),mt:vt((b=(w=dt??it)!==null&&w!==void 0?w:ot)!==null&&b!==void 0?b:Bt),mr:vt((S=(A=Y??ne)!==null&&A!==void 0?A:Te)!==null&&S!==void 0?S:Bt),mb:vt((C=(k=ae??ce)!==null&&k!==void 0?k:ot)!==null&&C!==void 0?C:Bt),ml:vt((T=(M=he??me)!==null&&M!==void 0?M:Te)!==null&&T!==void 0?T:Bt),mx:vt((D=(B=(I=(N=Te??he)!==null&&N!==void 0?N:Y)!==null&&I!==void 0?I:me)!==null&&B!==void 0?B:ne)!==null&&D!==void 0?D:Bt),my:vt((V=($=(Q=(se=ot??dt)!==null&&se!==void 0?se:ae)!==null&&Q!==void 0?Q:it)!==null&&$!==void 0?$:ce)!==null&&V!==void 0?V:Bt),width:vt(st??Mt),height:vt(It??Ht),font:vt(Pt)},getScaleableProps:Vt};return E.createElement(V3.Provider,{value:Qt},E.createElement(t,ve({},de,{ref:i}),te))});return n.displayName="Scaleable".concat(t.displayName||"Wrapper"),n};function EK(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=SK(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,o=!1,a;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return s=c.done,c},e:function(c){o=!0,a=c},f:function(){try{!s&&n.return!=null&&n.return()}finally{if(o)throw a}}}}function SK(e,t){if(e){if(typeof e=="string")return FC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FC(e,t)}}function FC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var AK=["paddingLeft","pl","paddingRight","pr","paddingTop","pt","paddingBottom","pb","marginTop","mt","marginRight","mr","marginBottom","mb","marginLeft","ml","px","py","mx","my","width","height","font","unit","scale","size"],Ue=function(t){if(!t)return{};var n=Object.keys(t).filter(function(a){return a!==""}),r={},i=EK(n),s;try{for(i.s();!(s=i.n()).done;){var o=s.value;AK.includes(o)||(r[o]=t[o])}}catch(a){i.e(a)}finally{i.f()}return r},kK=["label","labelRight","type","htmlType","icon","iconRight","iconClickable","onIconClick","initialValue","onChange","readOnly","value","onClearClick","clearable","className","onBlur","onFocus","autoComplete","placeholder","children","disabled"],CK=function(t,n){return ve({},n,{target:t,currentTarget:t})},Xb=E.forwardRef(function(e,t){var n=e.label,r=e.labelRight,i=e.type,s=e.htmlType,o=e.icon,a=e.iconRight,l=e.iconClickable,c=e.onIconClick,d=e.initialValue,u=e.onChange,h=e.readOnly,g=e.value,p=e.onClearClick,m=e.clearable,f=e.className,y=e.onBlur,_=e.onFocus,v=e.autoComplete,x=e.placeholder,b=e.children,w=e.disabled,S=Re(e,kK),A=ze(),C=Ge(),k=C.SCALES,T=L.useRef(null);L.useImperativeHandle(t,function(){return T.current});var M=L.useState(d),D=Fe(M,2),B=D[0],I=D[1],N=L.useState(!1),V=Fe(N,2),$=V[0],Q=V[1],se=L.useMemo(function(){return g!==void 0},[g]),te=L.useMemo(function(){return r?"right-label":n?"left-label":""},[n,r]),de=L.useMemo(function(){return a?"right-icon":o?"left-icon":""},[o,a]),Ee=L.useMemo(function(){return $3(A.palette,i)},[A.palette,i]),oe=Ee.color,_e=Ee.borderColor,De=Ee.hoverBorder,We=function(ne){w||h||(I(ne.target.value),u&&u(ne))},Ye=function(ne){if(I(""),p&&p(ne),!!T.current){var ae=CK(T.current,ne);ae.target.value="",u&&u(ae),T.current.focus()}},pe=function(ne){Q(!0),_&&_(ne)},ye=function(ne){Q(!1),y&&y(ne)},Ke=function(ne){w||c&&c(ne)},tt=L.useMemo(function(){return{clickable:l,onClick:Ke}},[l,Ke]);L.useEffect(function(){se&&I(g)});var dt=se?{value:B}:{defaultValue:d},it=ve({},S,dt);return E.createElement("div",{className:P.dynamic([["3855354928",[k.height(2.25),k.font(.875),k.width(1,"initial"),k.pt(0),k.pr(0),k.pb(0),k.pl(0),k.mt(0),k.mr(0),k.mb(0),k.ml(0),k.width(1,"initial"),A.layout.radius,_e,A.palette.accents_1,A.palette.accents_2,De,k.font(.875),oe,A.palette.accents_3,A.palette.background,oe]]])+" with-label"},b&&E.createElement(uK,null,b),E.createElement("div",{className:P.dynamic([["3855354928",[k.height(2.25),k.font(.875),k.width(1,"initial"),k.pt(0),k.pr(0),k.pb(0),k.pl(0),k.mt(0),k.mr(0),k.mb(0),k.ml(0),k.width(1,"initial"),A.layout.radius,_e,A.palette.accents_1,A.palette.accents_2,De,k.font(.875),oe,A.palette.accents_3,A.palette.background,oe]]])+" "+"input-container ".concat(f)},n&&E.createElement(LC,null,n),E.createElement("div",{className:P.dynamic([["3855354928",[k.height(2.25),k.font(.875),k.width(1,"initial"),k.pt(0),k.pr(0),k.pb(0),k.pl(0),k.mt(0),k.mr(0),k.mb(0),k.ml(0),k.width(1,"initial"),A.layout.radius,_e,A.palette.accents_1,A.palette.accents_2,De,k.font(.875),oe,A.palette.accents_3,A.palette.background,oe]]])+" "+"input-wrapper ".concat($?"hover":""," ").concat(w?"disabled":""," ").concat(te)},o&&E.createElement(IC,ve({icon:o},tt)),E.createElement("input",ve({type:s,ref:T,placeholder:x,disabled:w,readOnly:h,onFocus:pe,onBlur:ye,onChange:We,autoComplete:v},it,{className:P.dynamic([["3855354928",[k.height(2.25),k.font(.875),k.width(1,"initial"),k.pt(0),k.pr(0),k.pb(0),k.pl(0),k.mt(0),k.mr(0),k.mb(0),k.ml(0),k.width(1,"initial"),A.layout.radius,_e,A.palette.accents_1,A.palette.accents_2,De,k.font(.875),oe,A.palette.accents_3,A.palette.background,oe]]])+" "+(it&&it.className!=null&&it.className||"".concat(w?"disabled":""," ").concat(de))})),m&&E.createElement(gK,{visible:!!(T.current&&T.current.value!==""),disabled:w||h,onClick:Ye}),a&&E.createElement(IC,ve({icon:a},tt))),r&&E.createElement(LC,{isRight:!0},r)),E.createElement(P,{id:"3855354928",dynamic:[k.height(2.25),k.font(.875),k.width(1,"initial"),k.pt(0),k.pr(0),k.pb(0),k.pl(0),k.mt(0),k.mr(0),k.mb(0),k.ml(0),k.width(1,"initial"),A.layout.radius,_e,A.palette.accents_1,A.palette.accents_2,De,k.font(.875),oe,A.palette.accents_3,A.palette.background,oe]},".with-label.__jsx-style-dynamic-selector{display:inline-block;box-sizing:border-box;-webkit-box-align:center;--input-height:".concat(k.height(2.25),";font-size:").concat(k.font(.875),";width:").concat(k.width(1,"initial"),";height:var(--input-height);padding:").concat(k.pt(0)," ").concat(k.pr(0)," ").concat(k.pb(0)," ").concat(k.pl(0),";margin:").concat(k.mt(0)," ").concat(k.mr(0)," ").concat(k.mb(0)," ").concat(k.ml(0),";}.input-container.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:").concat(k.width(1,"initial"),";height:var(--input-height);}.input-wrapper.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:").concat(A.layout.radius,";border:1px solid ").concat(_e,";-webkit-transition:border 0.2s ease 0s,color 0.2s ease 0s;transition:border 0.2s ease 0s,color 0.2s ease 0s;}.input-wrapper.left-label.__jsx-style-dynamic-selector{border-top-left-radius:0;border-bottom-left-radius:0;}.input-wrapper.right-label.__jsx-style-dynamic-selector{border-top-right-radius:0;border-bottom-right-radius:0;}.input-wrapper.disabled.__jsx-style-dynamic-selector{background-color:").concat(A.palette.accents_1,";border-color:").concat(A.palette.accents_2,";cursor:not-allowed;}input.disabled.__jsx-style-dynamic-selector{cursor:not-allowed;}.input-wrapper.hover.__jsx-style-dynamic-selector{border-color:").concat(De,";}input.__jsx-style-dynamic-selector{margin:0.25em 0.625em;padding:0;box-shadow:none;font-size:").concat(k.font(.875),";background-color:transparent;border:none;color:").concat(oe,";outline:none;border-radius:0;width:100%;min-width:0;-webkit-appearance:none;}input.left-icon.__jsx-style-dynamic-selector{margin-left:0;}input.right-icon.__jsx-style-dynamic-selector{margin-right:0;}.__jsx-style-dynamic-selector::-webkit-input-placeholder,.__jsx-style-dynamic-selector::-moz-placeholder,.__jsx-style-dynamic-selector:-ms-input-placeholder,.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:").concat(A.palette.accents_3,";}.__jsx-style-dynamic-selector::-moz-placeholder,.__jsx-style-dynamic-selector::-moz-placeholder,.__jsx-style-dynamic-selector:-ms-input-placeholder,.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:").concat(A.palette.accents_3,";}.__jsx-style-dynamic-selector:-ms-input-placeholder,.__jsx-style-dynamic-selector::-moz-placeholder,.__jsx-style-dynamic-selector:-ms-input-placeholder,.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:").concat(A.palette.accents_3,";}.__jsx-style-dynamic-selector::placeholder,.__jsx-style-dynamic-selector::-moz-placeholder,.__jsx-style-dynamic-selector:-ms-input-placeholder,.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:").concat(A.palette.accents_3,";}.__jsx-style-dynamic-selector::-ms-reveal{display:none !important;}input.__jsx-style-dynamic-selector:-webkit-autofill,input.__jsx-style-dynamic-selector:-webkit-autofill.__jsx-style-dynamic-selector:hover,input.__jsx-style-dynamic-selector:-webkit-autofill.__jsx-style-dynamic-selector:active,input.__jsx-style-dynamic-selector:-webkit-autofill.__jsx-style-dynamic-selector:focus{-webkit-box-shadow:0 0 0 30px ").concat(A.palette.background," inset !important;-webkit-text-fill-color:").concat(oe," !important;}")))});Xb.defaultProps=G3;Xb.displayName="GeistInput";var Xm=Ve(Xb),dr=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n},q3=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n};dr("default","secondary","success","warning","error","abort","secondary-light","success-light","warning-light","error-light");dr("default","secondary","success","warning","error");dr("default","secondary","success","warning","error","dark","lite");dr("default","secondary","success","warning","error","dark","lite","alert","purple","violet","cyan");dr("default","silent","prevent");dr("hover","click");dr("top","topStart","topEnd","left","leftStart","leftEnd","bottom","bottomStart","bottomEnd","right","rightStart","rightEnd");dr("start","center","end","left","right");var TK=["type","disabled","readOnly","onFocus","onBlur","className","initialValue","onChange","value","placeholder","resize"];dr("none","both","horizontal","vertical","initial","inherit");var NK={initialValue:"",type:"default",disabled:!1,readOnly:!1,className:"",resize:"none"},Yb=E.forwardRef(function(e,t){var n=e.type,r=e.disabled,i=e.readOnly,s=e.onFocus,o=e.onBlur,a=e.className,l=e.initialValue,c=e.onChange,d=e.value,u=e.placeholder,h=e.resize,g=Re(e,TK),p=ze(),m=Ge(),f=m.SCALES,y=L.useRef(null);L.useImperativeHandle(t,function(){return y.current});var _=L.useMemo(function(){return d!==void 0},[d]),v=L.useState(l),x=Fe(v,2),b=x[0],w=x[1],S=L.useState(!1),A=Fe(S,2),C=A[0],k=A[1],T=L.useMemo(function(){return $3(p.palette,n)},[p.palette,n]),M=T.color,D=T.borderColor,B=T.hoverBorder,I=function(te){r||i||(w(te.target.value),c&&c(te))},N=function(te){k(!0),s&&s(te)},V=function(te){k(!1),o&&o(te)};L.useEffect(function(){_&&w(d)});var $=_?{value:b}:{defaultValue:l},Q=ve({},g,$);return E.createElement("div",{className:P.dynamic([["4034828312",[p.layout.radius,D,M,f.font(.875),f.height(1,"auto"),f.width(1,"initial"),f.mt(0),f.mr(0),f.mb(0),f.ml(0),B,p.palette.accents_1,p.palette.accents_2,p.font.sans,f.pt(.5),f.pr(.5),f.pb(.5),f.pl(.5),h,p.palette.background]]])+" "+"wrapper ".concat(C?"hover":""," ").concat(r?"disabled":""," ").concat(a)},E.createElement("textarea",ve({ref:y,disabled:r,placeholder:u,readOnly:i,onFocus:N,onBlur:V,onChange:I},Q,{className:P.dynamic([["4034828312",[p.layout.radius,D,M,f.font(.875),f.height(1,"auto"),f.width(1,"initial"),f.mt(0),f.mr(0),f.mb(0),f.ml(0),B,p.palette.accents_1,p.palette.accents_2,p.font.sans,f.pt(.5),f.pr(.5),f.pb(.5),f.pl(.5),h,p.palette.background]]])+" "+(Q&&Q.className!=null&&Q.className||"")})),E.createElement(P,{id:"4034828312",dynamic:[p.layout.radius,D,M,f.font(.875),f.height(1,"auto"),f.width(1,"initial"),f.mt(0),f.mr(0),f.mb(0),f.ml(0),B,p.palette.accents_1,p.palette.accents_2,p.font.sans,f.pt(.5),f.pr(.5),f.pb(.5),f.pl(.5),h,p.palette.background]},".wrapper.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-radius:".concat(p.layout.radius,";border:1px solid ").concat(D,";color:").concat(M,";-webkit-transition:border 0.2s ease 0s,color 0.2s ease 0s;transition:border 0.2s ease 0s,color 0.2s ease 0s;min-width:12.5rem;max-width:95vw;--textarea-font-size:").concat(f.font(.875),";--textarea-height:").concat(f.height(1,"auto"),";width:").concat(f.width(1,"initial"),";height:var(--textarea-height);margin:").concat(f.mt(0)," ").concat(f.mr(0)," ").concat(f.mb(0)," ").concat(f.ml(0),";}.wrapper.hover.__jsx-style-dynamic-selector{border-color:").concat(B,";}.wrapper.disabled.__jsx-style-dynamic-selector{background-color:").concat(p.palette.accents_1,";border-color:").concat(p.palette.accents_2,";cursor:not-allowed;}textarea.__jsx-style-dynamic-selector{background-color:transparent;box-shadow:none;display:block;font-family:").concat(p.font.sans,";font-size:var(--textarea-font-size);width:100%;height:var(--textarea-height);border:none;outline:none;padding:").concat(f.pt(.5)," ").concat(f.pr(.5)," ").concat(f.pb(.5)," ").concat(f.pl(.5),";resize:").concat(h,";}.disabled.__jsx-style-dynamic-selector>textarea.__jsx-style-dynamic-selector{cursor:not-allowed;}textarea.__jsx-style-dynamic-selector:-webkit-autofill,textarea.__jsx-style-dynamic-selector:-webkit-autofill.__jsx-style-dynamic-selector:hover,textarea.__jsx-style-dynamic-selector:-webkit-autofill.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:-webkit-autofill.__jsx-style-dynamic-selector:focus{-webkit-box-shadow:0 0 0 30px ").concat(p.palette.background," inset !important;}")))});Yb.defaultProps=NK;Yb.displayName="GeistTextarea";var LK=Ve(Yb),IK=function(t){var n=t.visible;return E.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",style:{color:"currentColor"}},n?E.createElement(E.Fragment,null,E.createElement("path",{d:"M17.94 17.94A10.07 10.07 0 0112 20c-7 0-11-8-11-8a18.45 18.45 0 015.06-5.94M9.9 4.24A9.12 9.12 0 0112 4c7 0 11 8 11 8a18.5 18.5 0 01-2.16 3.19m-6.72-1.07a3 3 0 11-4.24-4.24"}),E.createElement("path",{d:"M1 1l22 22"})):E.createElement(E.Fragment,null,E.createElement("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),E.createElement("circle",{cx:"12",cy:"12",r:"3"})))},PK=E.memo(IK),MK=["hideToggle","children"],FK=ve({},G3,{hideToggle:!1}),qb=E.forwardRef(function(e,t){var n=e.hideToggle,r=e.children,i=Re(e,MK),s=L.useRef(null),o=L.useState(!1),a=Fe(o,2),l=a[0],c=a[1];L.useImperativeHandle(t,function(){return s.current});var d=function(){c(function(p){return!p}),s&&s.current&&s.current.focus()},u=L.useMemo(function(){return ve({},i,{ref:s,iconClickable:!0,onIconClick:d,htmlType:l?"text":"password"})},[i,d,l,s]),h=L.useMemo(function(){return n?null:E.createElement(PK,{visible:l})},[n,l]);return E.createElement(Xm,ve({iconRight:h},u),r)});qb.defaultProps=FK;qb.displayName="GeistInputPassword";Xm.Textarea=LK;Xm.Password=qb;var RK={visible:!1},Z3=E.createContext(RK),J3=function(){return E.useContext(Z3)},DK=function(t){var n=t.children,r=t.height;return E.createElement("span",{className:P.dynamic([["822089635",[r]]])},n,E.createElement(P,{id:"822089635",dynamic:[r]},"span.__jsx-style-dynamic-selector{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:".concat(r,";min-width:0;}")))};const Zb=E.memo(DK);var zK={},Jb=function(t){var n=t.value,r=t.children,i=t.isLabelOnly,s=ze(),o=Ge(),a=o.SCALES,l=J3(),c=l.value,d=l.updateValue,u=l.updateVisible,h=function(){d&&d(n),u&&u(!1)},g=L.useMemo(function(){return c===n},[n,c]);return E.createElement("div",{onClick:h,className:P.dynamic([["2003094915",[s.palette.background,s.palette.foreground,a.font(.875),a.width(1,"auto"),i?a.height(2.5):a.height(1,"auto"),a.pt(0),a.pr(.75),a.pb(0),a.pl(.75),a.mt(0),a.mr(0),a.mb(0),a.ml(0),s.layout.radius,s.layout.radius,s.layout.radius,s.layout.radius,s.palette.accents_1,s.palette.accents_1,s.palette.success]]])+" "+"item ".concat(g?"active":"")},i?E.createElement(Zb,{height:a.height(2)},r):r,E.createElement(P,{id:"2003094915",dynamic:[s.palette.background,s.palette.foreground,a.font(.875),a.width(1,"auto"),i?a.height(2.5):a.height(1,"auto"),a.pt(0),a.pr(.75),a.pb(0),a.pl(.75),a.mt(0),a.mr(0),a.mb(0),a.ml(0),s.layout.radius,s.layout.radius,s.layout.radius,s.layout.radius,s.palette.accents_1,s.palette.accents_1,s.palette.success]},".item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:normal;white-space:pre;background-color:".concat(s.palette.background,";color:").concat(s.palette.foreground,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:0;cursor:pointer;-webkit-transition:background 0.2s ease 0s,border-color 0.2s ease 0s;transition:background 0.2s ease 0s,border-color 0.2s ease 0s;font-size:").concat(a.font(.875),";width:").concat(a.width(1,"auto"),";height:").concat(i?a.height(2.5):a.height(1,"auto"),";padding:").concat(a.pt(0)," ").concat(a.pr(.75)," ").concat(a.pb(0)," ").concat(a.pl(.75),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0),";}.item.__jsx-style-dynamic-selector:first-of-type{border-top-left-radius:").concat(s.layout.radius,";border-top-right-radius:").concat(s.layout.radius,";}.item.__jsx-style-dynamic-selector:last-of-type{border-bottom-left-radius:").concat(s.layout.radius,";border-bottom-right-radius:").concat(s.layout.radius,";}.item.__jsx-style-dynamic-selector:hover{background-color:").concat(s.palette.accents_1,";}.item.active.__jsx-style-dynamic-selector{background-color:").concat(s.palette.accents_1,";color:").concat(s.palette.success,";}")))};Jb.defaultProps=zK;Jb.displayName="GeistAutoCompleteItem";var Qb=Ve(Jb),OK=function(){var t=L.useState(!1),n=Fe(t,2),r=n[0],i=n[1];return L.useEffect(function(){i(Y3())},[]),{isBrowser:r,isServer:!r}},RC=function(t){var n=document.createElement("div");return n.setAttribute("id",t),n},ku=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H3(),n=arguments.length>1?arguments[1]:void 0,r="geist-ui-".concat(t),i=OK(),s=i.isBrowser,o=L.useState(s?RC(r):null),a=Fe(o,2),l=a[0],c=a[1];return L.useEffect(function(){var d=n?n():null,u=d||document.body,h=u.querySelector("#".concat(r)),g=h||RC(r);h||u.appendChild(g),c(g)},[]),l},Kb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;L.useEffect(function(){var r=function(){return t()};return n&&r(),window.addEventListener("resize",r),function(){return window.removeEventListener("resize",r)}},[])},BK=["children","className","visible","enterTime","leaveTime","clearTime","name"],jK={visible:!1,enterTime:60,leaveTime:60,clearTime:60,className:"",name:"transition"},Ma=function(t){var n=t.children,r=t.className,i=t.visible,s=t.enterTime,o=t.leaveTime,a=t.clearTime,l=t.name,c=Re(t,BK),d=L.useState(""),u=Fe(d,2),h=u[0],g=u[1],p=L.useState(i),m=Fe(p,2),f=m[0],y=m[1];return L.useEffect(function(){var _=i?"enter":"leave",v=i?s:o;i&&!f&&y(!0),g("".concat(l,"-").concat(_));var x=setTimeout(function(){g("".concat(l,"-").concat(_," ").concat(l,"-").concat(_,"-active")),clearTimeout(x)},v),b=setTimeout(function(){i||(g(""),y(!1)),clearTimeout(b)},v+a);return function(){clearTimeout(x),clearTimeout(b)}},[i,f]),!E.isValidElement(n)||!f?null:E.cloneElement(n,ve({},c,{className:"".concat(n.props.className," ").concat(r," ").concat(h)}))};Ma.defaultProps=jK;Ma.displayName="GeistCssTransition";var Q3=function(t){L.useEffect(function(){var n=function(i){return t(i)};return document.addEventListener("click",n),function(){return document.removeEventListener("click",n)}},[t])},UK=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r={attributes:!1,childList:!0,subtree:!0};L.useEffect(function(){if(!(!t||!t.current)){var i=!1,s=function(){i||n.apply(void 0,arguments)},o=new MutationObserver(s);return o.observe(t.current,r),function(){i=!0,o.disconnect()}}},[t])},DC={},Di=function(t,n){var r=n?" [".concat(n,"]"):" ",i="[Geist UI]".concat(r,": ").concat(t);typeof console>"u"||DC[i]||(DC[i]=!0,console.warn(i))},K3={top:-1e3,left:-1e3,right:-1e3,width:0},$K=function(t){if(!t)return{top:0,left:0};var n=t.getBoundingClientRect(),r=n.top,i=n.left;return{top:r,left:i}},zC=function(t,n){if(!t||!t.current)return K3;var r=t.current.getBoundingClientRect(),i=n?n():null,s=i||document.documentElement,o=$K(i),a=o.top,l=o.left;return ve({},r,{width:r.width||r.right-r.left,top:r.bottom+s.scrollTop-a,left:r.left+s.scrollLeft-l})},eD=E.memo(function(e){var t=e.children,n=e.parent,r=e.visible,i=e.disableMatchWidth,s=e.getPopupContainer,o=ku("dropdown",s),a=L.useState(K3),l=Fe(a,2),c=l[0],d=l[1];if(!n)return null;var u=function(){var m=zC(n,s),f=m.top,y=m.left,_=m.right,v=m.width;d({top:f,left:y,right:_,width:v})};Kb(u),Q3(function(){var p=zC(n,s),m=p.top,f=p.left,y=m!==c.top||f!==c.left;y&&u()}),UK(n,function(){u()}),L.useEffect(function(){if(!(!n||!n.current))return n.current.addEventListener("mouseenter",u),function(){!n||!n.current||n.current.removeEventListener("mouseenter",u)}},[n]);var h=function(m){m.stopPropagation(),m.nativeEvent.stopImmediatePropagation(),m.preventDefault()},g=function(m){m.preventDefault()};return o?To.createPortal(E.createElement(Ma,{visible:r},E.createElement("div",{onClick:h,onMouseDown:g,className:P.dynamic([["2976859150",[c.top+2,c.left,c.width,c.width]]])+" "+"dropdown ".concat(i?"disable-match":"width-match")},t,E.createElement(P,{id:"2976859150",dynamic:[c.top+2,c.left,c.width,c.width]},".dropdown.__jsx-style-dynamic-selector{position:absolute;top:".concat(c.top+2,"px;left:").concat(c.left,"px;z-index:1100;}.width-match.__jsx-style-dynamic-selector{width:").concat(c.width,"px;}.disable-match.__jsx-style-dynamic-selector{min-width:").concat(c.width,"px;}")))),o):null}),GK={className:"",dropdownStyle:{}},e1=function(t){var n=t.children,r=t.visible,i=t.className,s=t.dropdownStyle,o=t.disableMatchWidth,a=t.getPopupContainer,l=ze(),c=J3(),d=c.ref,u=L.useMemo(function(){return!r||E.Children.count(n)===0},[n,r]),h=function(p){p.preventDefault(),p.stopPropagation(),p.nativeEvent.stopImmediatePropagation()};return E.createElement(eD,{parent:d,visible:r,disableMatchWidth:o,getPopupContainer:a},E.createElement("div",{style:s,onClick:h,className:P.dynamic([["155200262",[l.layout.radius,u?"none":l.expressiveness.shadowLarge,l.palette.background]]])+" "+"auto-complete-dropdown ".concat(i)},n,E.createElement(P,{id:"155200262",dynamic:[l.layout.radius,u?"none":l.expressiveness.shadowLarge,l.palette.background]},".auto-complete-dropdown.__jsx-style-dynamic-selector{border-radius:".concat(l.layout.radius,";box-shadow:").concat(u?"none":l.expressiveness.shadowLarge,";background-color:").concat(l.palette.background,";overflow-y:auto;max-height:15rem;overflow-anchor:none;}"))))};e1.defaultProps=GK;e1.displayName="GeistAutoCompleteDropdown";var VK={className:""},t1=function(t){var n=t.children,r=t.className,i=ze(),s=Ge(),o=s.SCALES;return E.createElement("div",{className:P.dynamic([["2266351824",[i.layout.gapHalf,i.palette.background,i.palette.accents_5,i.layout.radius,o.font(.875),o.width(1,"auto"),o.height(1,"auto"),o.pt(.875),o.pr(.875),o.pb(.875),o.pl(.875),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]]])+" "+(r||"")},n,E.createElement(P,{id:"2266351824",dynamic:[i.layout.gapHalf,i.palette.background,i.palette.accents_5,i.layout.radius,o.font(.875),o.width(1,"auto"),o.height(1,"auto"),o.pt(.875),o.pr(.875),o.pb(.875),o.pl(.875),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]},"div.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:normal;white-space:pre;padding:".concat(i.layout.gapHalf,";line-height:1;background-color:").concat(i.palette.background,";color:").concat(i.palette.accents_5,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:0;border-radius:").concat(i.layout.radius,";font-size:").concat(o.font(.875),";width:").concat(o.width(1,"auto"),";height:").concat(o.height(1,"auto"),";padding:").concat(o.pt(.875)," ").concat(o.pr(.875)," ").concat(o.pb(.875)," ").concat(o.pl(.875),";margin:").concat(o.mt(0)," ").concat(o.mr(0)," ").concat(o.mb(0)," ").concat(o.ml(0),";}")))};t1.defaultProps=VK;t1.displayName="GeistAutoCompleteSearch";var Gp=Ve(t1),HK={hidden:!1,className:""},su=function(t){var n=t.children,r=t.hidden,i=t.className;return r?null:E.createElement(Gp,{className:i},n)};su.defaultProps=HK;su.displayName="GeistAutoCompleteEmpty";var WK=["children","type","color","className","spaceRatio"],XK={type:"default",className:"",spaceRatio:1},YK=function(t,n,r){var i={default:n.accents_6,secondary:n.secondary,success:n.success,warning:n.warning,error:n.error};return r||i[t]},n1=function(t){var n=t.children,r=t.type,i=t.color,s=t.className,o=t.spaceRatio,a=Re(t,WK),l=ze(),c=Ge(),d=c.SCALES,u=L.useMemo(function(){return YK(r,l.palette,i)},[r,l.palette,i]);return E.createElement("div",ve({},Ue(a),{className:P.dynamic([["2201634259",[d.font(1),d.width(1,"100%"),d.height(1,"100%"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),l.palette.accents_5,u,o]]])+" "+"loading-container ".concat(s)}),E.createElement("span",{className:P.dynamic([["2201634259",[d.font(1),d.width(1,"100%"),d.height(1,"100%"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),l.palette.accents_5,u,o]]])+" loading"},n&&E.createElement("label",{className:P.dynamic([["2201634259",[d.font(1),d.width(1,"100%"),d.height(1,"100%"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),l.palette.accents_5,u,o]]])},n),E.createElement("i",{className:P.dynamic([["2201634259",[d.font(1),d.width(1,"100%"),d.height(1,"100%"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),l.palette.accents_5,u,o]]])}),E.createElement("i",{className:P.dynamic([["2201634259",[d.font(1),d.width(1,"100%"),d.height(1,"100%"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),l.palette.accents_5,u,o]]])}),E.createElement("i",{className:P.dynamic([["2201634259",[d.font(1),d.width(1,"100%"),d.height(1,"100%"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),l.palette.accents_5,u,o]]])})),E.createElement(P,{id:"2201634259",dynamic:[d.font(1),d.width(1,"100%"),d.height(1,"100%"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),l.palette.accents_5,u,o]},".loading-container.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;font-size:".concat(d.font(1),";width:").concat(d.width(1,"100%"),";height:").concat(d.height(1,"100%"),";min-height:1em;padding:").concat(d.pt(0)," ").concat(d.pr(0)," ").concat(d.pb(0)," ").concat(d.pl(0),";margin:").concat(d.mt(0)," ").concat(d.mr(0)," ").concat(d.mb(0)," ").concat(d.ml(0),";}label.__jsx-style-dynamic-selector{margin-right:0.5em;color:").concat(l.palette.accents_5,";line-height:1;}label.__jsx-style-dynamic-selector *{margin:0;}.loading.__jsx-style-dynamic-selector{position:absolute;top:50%;left:50%;width:100%;height:100%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:transparent;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}i.__jsx-style-dynamic-selector{width:0.25em;height:0.25em;border-radius:50%;background-color:").concat(u,";margin:0 calc(0.25em / 2 * ").concat(o,");display:inline-block;-webkit-animation:loading-blink-__jsx-style-dynamic-selector 1.4s infinite both;animation:loading-blink-__jsx-style-dynamic-selector 1.4s infinite both;}i.__jsx-style-dynamic-selector:nth-child(2){-webkit-animation-delay:0.2s;animation-delay:0.2s;}i.__jsx-style-dynamic-selector:nth-child(3){-webkit-animation-delay:0.4s;animation-delay:0.4s;}@-webkit-keyframes loading-blink-__jsx-style-dynamic-selector{0%{opacity:0.2;}20%{opacity:1;}100%{opacity:0.2;}}@keyframes loading-blink-__jsx-style-dynamic-selector{0%{opacity:0.2;}20%{opacity:1;}100%{opacity:0.2;}}")))};n1.defaultProps=XK;n1.displayName="GeistLoading";var r1=Ve(n1),vi=function(t){var n=L.useState(function(){return typeof t=="function"?t():t}),r=Fe(n,2),i=r[0],s=r[1],o=L.useRef(t);L.useEffect(function(){o.current=i},[i]);var a=function(c){var d=typeof c=="function"?c(o.current):c;o.current=d,s(d)};return[i,a,o]},qK=["options","initialValue","onSelect","onSearch","onChange","searching","children","type","value","clearable","disabled","dropdownClassName","dropdownStyle","disableMatchWidth","disableFreeSolo","getPopupContainer"],ZK={options:[],initialValue:"",disabled:!1,clearable:!1,type:"default",disableMatchWidth:!1,disableFreeSolo:!1,className:""},JK=function(t){return t.map(function(n,r){var i="auto-complete-item-".concat(r);if(E.isValidElement(n))return E.cloneElement(n,{key:i});var s=n;return E.createElement(Qb,{key:i,value:s.value,isLabelOnly:!0},s.label)})},QK=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return t===void 0?null:t?E.createElement(r1,{scale:+n/2}):E.createElement("span",null)},i1=E.forwardRef(function(e,t){var n=e.options,r=e.initialValue,i=e.onSelect,s=e.onSearch,o=e.onChange,a=e.searching,l=e.children,c=e.type,d=e.value,u=e.clearable,h=e.disabled,g=e.dropdownClassName,p=e.dropdownStyle,m=e.disableMatchWidth,f=e.disableFreeSolo,y=e.getPopupContainer,_=Re(e,qK),v=L.useRef(),x=Ge(),b=x.SCALES,w=x.getScaleableProps,S=L.useRef(null),A=L.useRef(null),C=vi(r),k=Fe(C,3),T=k[0],M=k[1],D=k[2],B=L.useState(r),I=Fe(B,2),N=I[0],V=I[1],$=L.useState(!1),Q=Fe($,2),se=Q[0],te=Q[1];L.useImperativeHandle(t,function(){return A.current});var de=yi(l,Gp),Ee=Fe(de,2),oe=Ee[1],_e=yi(l,su),De=Fe(_e,2),We=De[1],Ye=L.useMemo(function(){var ae=oe&&E.Children.count(oe)>0,ce=We&&E.Children.count(We)>0;return a?ae?oe:E.createElement(Gp,null,"Searching..."):n.length===0?T===""?null:ce?We:E.createElement(su,null,"No Options"):JK(n)},[a,n]),pe=L.useMemo(function(){return u&&a===void 0},[u,a]),ye=function(ce){h||(V(ce),i&&i(ce),M(ce),A.current&&A.current.focus())},Ke=function(ce){return te(ce)},tt=function(ce){te(!0),s&&s(ce.target.value),M(ce.target.value)},dt=function(){f&&(!T||T===""||T!==N&&M(N))};L.useEffect(function(){o&&o(T)},[T]),L.useEffect(function(){d!==void 0&&M(d)},[d]);var it=L.useMemo(function(){return{ref:S,value:T,updateValue:ye,visible:se,updateVisible:Ke}},[T,se]),Y=function(ce){clearTimeout(v.current),te(ce),ce?s&&s(D.current):v.current=window.setTimeout(function(){dt(),clearTimeout(v.current)},100)},ne=ve({},Ue(_),{disabled:h,value:T});return E.createElement(Z3.Provider,{value:it},E.createElement("div",{ref:S,className:P.dynamic([["2878925540",[b.width(1,"max-content"),b.height(1,"auto"),b.pt(0),b.pr(0),b.pb(0),b.pl(0),b.mt(0),b.mr(0),b.mb(0),b.ml(0)]]])+" auto-complete"},E.createElement(Xm,ve({ref:A,type:c,onChange:tt,onFocus:function(){return Y(!0)},onBlur:function(){return Y(!1)},clearable:pe,width:b.width(1,"initial"),height:b.height(2.25),iconRight:QK(a,w("scale"))},ne)),E.createElement(e1,{visible:se,disableMatchWidth:m,className:g,dropdownStyle:p,getPopupContainer:y},Ye),E.createElement(P,{id:"2878925540",dynamic:[b.width(1,"max-content"),b.height(1,"auto"),b.pt(0),b.pr(0),b.pb(0),b.pl(0),b.mt(0),b.mr(0),b.mb(0),b.ml(0)]},".auto-complete.__jsx-style-dynamic-selector{width:".concat(b.width(1,"max-content"),";height:").concat(b.height(1,"auto"),";padding:").concat(b.pt(0)," ").concat(b.pr(0)," ").concat(b.pb(0)," ").concat(b.pl(0),";margin:").concat(b.mt(0)," ").concat(b.mr(0)," ").concat(b.mb(0)," ").concat(b.ml(0),";}.auto-complete.__jsx-style-dynamic-selector .loading{width:-webkit-max-content;width:-moz-max-content;width:max-content;}"))))});i1.defaultProps=ZK;i1.displayName="GeistAutoComplete";var Ym=Ve(i1);Ym.Item=Qb;Ym.Option=Qb;Ym.Searching=Gp;Ym.Empty=su;var KK=["src","stacked","text","isSquare","className"],eee={stacked:!1,text:"",isSquare:!1,className:""},tee=function(t){return t.length<=4?t:t.slice(0,3)},s1=function(t){var n=t.src,r=t.stacked,i=t.text,s=t.isSquare,o=t.className,a=Re(t,KK),l=ze(),c=Ge(),d=c.SCALES,u=!n,h=s?l.layout.radius:"50%",g=r?d.ml(-.625):d.ml(0),p=Ue(a);return E.createElement("span",{className:P.dynamic([["2295275975",[l.palette.accents_2,h,l.palette.background,d.width(1.75)||d.height(1.75),d.height(1.75)||d.width(1.75),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),g,h,d.font(1)]]])+" "+"avatar ".concat(o)},!u&&E.createElement("img",ve({alt:"avatar",src:n,draggable:!1},p,{className:P.dynamic([["2295275975",[l.palette.accents_2,h,l.palette.background,d.width(1.75)||d.height(1.75),d.height(1.75)||d.width(1.75),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),g,h,d.font(1)]]])+" "+(p&&p.className!=null&&p.className||"avatar-img")})),u&&E.createElement("span",ve({},p,{className:P.dynamic([["2295275975",[l.palette.accents_2,h,l.palette.background,d.width(1.75)||d.height(1.75),d.height(1.75)||d.width(1.75),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),g,h,d.font(1)]]])+" "+(p&&p.className!=null&&p.className||"avatar-text")}),tee(i)),E.createElement(P,{id:"2295275975",dynamic:[l.palette.accents_2,h,l.palette.background,d.width(1.75)||d.height(1.75),d.height(1.75)||d.width(1.75),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),g,h,d.font(1)]},".avatar.__jsx-style-dynamic-selector{display:inline-block;position:relative;overflow:hidden;border:1px solid ".concat(l.palette.accents_2,";border-radius:").concat(h,";vertical-align:top;background-color:").concat(l.palette.background,";box-sizing:border-box;width:").concat(d.width(1.75)||d.height(1.75),";height:").concat(d.height(1.75)||d.width(1.75),";padding:").concat(d.pt(0)," ").concat(d.pr(0)," ").concat(d.pb(0)," ").concat(d.pl(0),";margin:").concat(d.mt(0)," ").concat(d.mr(0)," ").concat(d.mb(0)," ").concat(g,";}.avatar-img.__jsx-style-dynamic-selector{display:inline-block;object-fit:cover;width:100%;height:100%;border-radius:").concat(h,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.avatar-text.__jsx-style-dynamic-selector{position:absolute;left:50%;top:50%;font-size:").concat(d.font(1),";text-align:center;-webkit-transform:translate(-50%,-50%) scale(0.65);-ms-transform:translate(-50%,-50%) scale(0.65);transform:translate(-50%,-50%) scale(0.65);white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}")))};s1.defaultProps=eee;s1.displayName="GeistAvatar";var tD=Ve(s1),nee={className:""},o1=function(t){var n=t.count,r=t.className,i=t.children,s=ze(),o=Ge(),a=o.SCALES;return E.createElement("div",{className:P.dynamic([["1135268764",[a.width(1,"max-content"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0),a.ml(.625),a.font(.875),s.palette.accents_7]]])+" "+"avatar-group ".concat(r)},i,n&&E.createElement("span",{className:P.dynamic([["1135268764",[a.width(1,"max-content"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0),a.ml(.625),a.font(.875),s.palette.accents_7]]])+" count"},"+",n),E.createElement(P,{id:"1135268764",dynamic:[a.width(1,"max-content"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0),a.ml(.625),a.font(.875),s.palette.accents_7]},".avatar-group.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:".concat(a.width(1,"max-content"),";height:").concat(a.height(1,"auto"),";padding:").concat(a.pt(0)," ").concat(a.pr(0)," ").concat(a.pb(0)," ").concat(a.pl(0),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0),";}.avatar-group.__jsx-style-dynamic-selector .avatar{margin-left:-").concat(a.ml(.625),";}.count.__jsx-style-dynamic-selector{font-size:").concat(a.font(.875),";display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding-left:5.5px;color:").concat(s.palette.accents_7,";}")))};o1.defaultProps=nee;o1.displayName="GeistAvatarGroup";var ree=Ve(o1);tD.Group=ree;var iee=["type","className","children","dot"],see={type:"default",dot:!1,className:""},oee=function(t,n){var r={default:n.foreground,success:n.success,warning:n.warning,error:n.error,secondary:n.secondary};return r[t]},a1=function(t){var n=t.type,r=t.className,i=t.children,s=t.dot,o=Re(t,iee),a=ze(),l=Ge(),c=l.SCALES,d=L.useMemo(function(){return oee(n,a.palette)},[n,a.palette]),u=L.useMemo(function(){return!n||n==="default"?a.palette.background:"white"},[n,a.palette.background]);return E.createElement("span",ve({},Ue(o),{className:P.dynamic([["427831233",[d,u,c.font(.875),c.width(1,"auto"),c.height(1,"auto"),c.pt(.25),c.pr(.4375),c.pb(.25),c.pl(.4375),c.mt(0),c.mr(0),c.mb(0),c.ml(0),c.py(.25),c.px(.25)]]])+" "+"badge ".concat(s?"dot":""," ").concat(r)}),!s&&i,E.createElement(P,{id:"427831233",dynamic:[d,u,c.font(.875),c.width(1,"auto"),c.height(1,"auto"),c.pt(.25),c.pr(.4375),c.pb(.25),c.pl(.4375),c.mt(0),c.mr(0),c.mb(0),c.ml(0),c.py(.25),c.px(.25)]},".badge.__jsx-style-dynamic-selector{display:inline-block;border-radius:16px;font-variant:tabular-nums;line-height:1;vertical-align:middle;background-color:".concat(d,";color:").concat(u,";border:0;font-size:").concat(c.font(.875),";width:").concat(c.width(1,"auto"),";height:").concat(c.height(1,"auto"),";padding:").concat(c.pt(.25)," ").concat(c.pr(.4375)," ").concat(c.pb(.25)," ").concat(c.pl(.4375),";margin:").concat(c.mt(0)," ").concat(c.mr(0)," ").concat(c.mb(0)," ").concat(c.ml(0),";}.dot.__jsx-style-dynamic-selector{padding:").concat(c.py(.25)," ").concat(c.px(.25),";border-radius:50%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}")))};a1.defaultProps=see;a1.displayName="GeistBadge";var nD=Ve(a1);dr("topLeft","topRight","bottomLeft","bottomRight");var aee={placement:"topRight",className:""},lee=function(t){var n={topLeft:{top:"0",left:"0",value:"translate(-50%, -50%)",origin:"0% 0%"},topRight:{top:"0",right:"0",value:"translate(50%, -50%)",origin:"100% 0%"},bottomLeft:{left:"0",bottom:"0",value:"translate(-50%, 50%)",origin:"0% 100%"},bottomRight:{right:"0",bottom:"0",value:"translate(50%, 50%)",origin:"100% 100%"}};return n[t]},l1=function(t){var n=t.children,r=t.placement,i=yi(n,nD),s=Fe(i,2),o=s[0],a=s[1],l=L.useMemo(function(){return lee(r)},[r]),c=l.top,d=l.bottom,u=l.left,h=l.right,g=l.value,p=l.origin;return E.createElement("div",{className:P.dynamic([["1121745930",[c||"auto",u||"auto",h||"auto",d||"auto",g,p]]])+" anchor"},o,E.createElement("sup",{className:P.dynamic([["1121745930",[c||"auto",u||"auto",h||"auto",d||"auto",g,p]]])},a),E.createElement(P,{id:"1121745930",dynamic:[c||"auto",u||"auto",h||"auto",d||"auto",g,p]},".anchor.__jsx-style-dynamic-selector{position:relative;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;}sup.__jsx-style-dynamic-selector{position:absolute;top:".concat(c||"auto",";left:").concat(u||"auto",";right:").concat(h||"auto",";bottom:").concat(d||"auto",";-webkit-transform:").concat(g,";-ms-transform:").concat(g,";transform:").concat(g,";-webkit-transform-origin:").concat(p,";-ms-transform-origin:").concat(p,";transform-origin:").concat(p,";z-index:1;}")))};l1.defaultProps=aee;l1.displayName="GeistBadgeAnchor";nD.Anchor=l1;var cee={className:""},c1=function(t){var n=t.children,r=t.className,i=Ge(),s=i.SCALES;return E.createElement("div",{className:P.dynamic([["1571781185",[s.width(1,"auto"),s.height(1,"auto"),s.pt(0),s.pr(0),s.pb(0),s.pl(0),s.mt(0),s.mr(.5),s.mb(0),s.ml(.5)]]])+" "+"separator ".concat(r)},n,E.createElement(P,{id:"1571781185",dynamic:[s.width(1,"auto"),s.height(1,"auto"),s.pt(0),s.pr(0),s.pb(0),s.pl(0),s.mt(0),s.mr(.5),s.mb(0),s.ml(.5)]},".separator.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:".concat(s.width(1,"auto"),";height:").concat(s.height(1,"auto"),";padding:").concat(s.pt(0)," ").concat(s.pr(0)," ").concat(s.pb(0)," ").concat(s.pl(0),";margin:").concat(s.mt(0)," ").concat(s.mr(.5)," ").concat(s.mb(0)," ").concat(s.ml(.5),";}")))};c1.defaultProps=cee;c1.displayName="GeistBreadcrumbsSeparator";var bd=Ve(c1),dee=function(t){var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=t.replace(n,function(s,o,a,l){return"".concat(o).concat(o).concat(a).concat(a).concat(l).concat(l)}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);if(!i)throw new Error("Geist UI: Unsupported ".concat(t," color."));return[Number.parseInt(i[1],16),Number.parseInt(i[2],16),Number.parseInt(i[3],16)]},uee=function(t){if(t.charAt(0)==="#")return dee(t);var n=t.replace(/ /g,""),r=t.substr(0,4),i=n.match(/\((.+)\)/);if(!r.startsWith("rgb")||!i)throw console.log(t),new Error('Geist UI: Only support ["RGB", "RGBA", "HEX"] color.');return i[1].split(",").map(function(s){return Number.parseFloat(s)})},Es=function(t,n){if(!/^#|rgb|RGB/.test(t))return t;var r=uee(t),i=Fe(r,3),s=i[0],o=i[1],a=i[2],l=n>1?1:n<0?0:n;return"rgba(".concat(s,", ").concat(o,", ").concat(a,", ").concat(l,")")},hee={separator:"/",className:""},d1=function(t){var n=t.separator,r=t.children,i=t.className,s=ze(),o=Ge(),a=o.SCALES,l=L.useMemo(function(){return Es(s.palette.link,.85)},[s.palette.link]),c=E.Children.toArray(r),d=c.map(function(u,h){if(!E.isValidElement(u))return u;var g=c[h-1],p=E.isValidElement(g)&&g.type===bd,m=u.type===bd;return!p&&!m&&h>0?E.createElement(E.Fragment,{key:h},E.createElement(bd,null,n),u):u});return E.createElement("nav",{className:P.dynamic([["2351830500",[s.palette.accents_4,a.font(1),a.width(1,"auto"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0),l,s.palette.accents_6]]])+" "+(i||"")},d,E.createElement(P,{id:"2351830500",dynamic:[s.palette.accents_4,a.font(1),a.width(1,"auto"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0),l,s.palette.accents_6]},"nav.__jsx-style-dynamic-selector{line-height:inherit;color:".concat(s.palette.accents_4,";box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:").concat(a.font(1),";width:").concat(a.width(1,"auto"),";height:").concat(a.height(1,"auto"),";padding:").concat(a.pt(0)," ").concat(a.pr(0)," ").concat(a.pb(0)," ").concat(a.pl(0),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0),";}nav.__jsx-style-dynamic-selector .link:hover{color:").concat(l,";}nav.__jsx-style-dynamic-selector>span:last-of-type{color:").concat(s.palette.accents_6,";}nav.__jsx-style-dynamic-selector>.separator:last-child{display:none;}nav.__jsx-style-dynamic-selector svg{width:1em;height:1em;margin:0 4px;}nav.__jsx-style-dynamic-selector .breadcrums-item{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}")))};d1.defaultProps=hee;d1.displayName="GeistBreadcrumbs";var rD=Ve(d1),iD=function(){return E.createElement("svg",{viewBox:"0 0 24 24",width:"1em",height:"1em",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:"jsx-3000088640 icon"},E.createElement("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6",className:"jsx-3000088640"}),E.createElement("path",{d:"M15 3h6v6",className:"jsx-3000088640"}),E.createElement("path",{d:"M10 14L21 3",className:"jsx-3000088640"}),E.createElement(P,{id:"3000088640"},".icon.jsx-3000088640{margin:0 0.3125em;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;color:currentColor;}"))};iD.displayName="GeistLinkIcon";var gee=E.memo(iD),pee=["href","color","underline","pure","children","className","block","icon"],mee={href:"",color:!1,pure:!1,icon:!1,underline:!1,block:!1,className:""},u1=E.forwardRef(function(e,t){var n=e.href,r=e.color,i=e.underline,s=e.pure,o=e.children,a=e.className,l=e.block,c=e.icon,d=Re(e,pee),u=ze(),h=Ge(),g=h.SCALES,p=r||l?u.palette.link:"inherit",m=r||l?u.palette.successLight:"inherit",f=i?"underline":"none";return s&&Di('Props "pure" is deprecated, now the default Link is pure.'),E.createElement("a",ve({href:n},Ue(d),{ref:t,className:P.dynamic([["3960817863",[p,l?u.layout.radius:0,g.font(1,"inherit"),g.width(1,"fit-content"),g.height(1,"auto"),g.mt(0),g.mr(0),g.mb(0),g.ml(0),g.pt(0),g.pr(0),g.pb(0),g.pl(0),g.pt(.268),g.pr(.5625),g.pb(.268),g.pl(.5625),f,l?Es(u.palette.link,.1):"unset",m]]])+" "+"link ".concat(l?"block":""," ").concat(a)}),o,c&&E.createElement(gee,null),E.createElement(P,{id:"3960817863",dynamic:[p,l?u.layout.radius:0,g.font(1,"inherit"),g.width(1,"fit-content"),g.height(1,"auto"),g.mt(0),g.mr(0),g.mb(0),g.ml(0),g.pt(0),g.pr(0),g.pb(0),g.pl(0),g.pt(.268),g.pr(.5625),g.pb(.268),g.pl(.5625),f,l?Es(u.palette.link,.1):"unset",m]},".link.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:baseline;-webkit-box-align:baseline;-ms-flex-align:baseline;align-items:baseline;line-height:inherit;color:".concat(p,";-webkit-text-decoration:none;text-decoration:none;border-radius:").concat(l?u.layout.radius:0,";-webkit-transition:color 200ms ease 0ms;transition:color 200ms ease 0ms;font-size:").concat(g.font(1,"inherit"),";width:").concat(g.width(1,"fit-content"),";height:").concat(g.height(1,"auto"),";margin:").concat(g.mt(0)," ").concat(g.mr(0)," ").concat(g.mb(0)," ").concat(g.ml(0),";padding:").concat(g.pt(0)," ").concat(g.pr(0)," ").concat(g.pb(0)," ").concat(g.pl(0),";}.block.__jsx-style-dynamic-selector{padding:").concat(g.pt(.268)," ").concat(g.pr(.5625)," ").concat(g.pb(.268)," ").concat(g.pl(.5625),";}.link.__jsx-style-dynamic-selector:hover,.link.__jsx-style-dynamic-selector:active,.link.__jsx-style-dynamic-selector:focus{-webkit-text-decoration:").concat(f,";text-decoration:").concat(f,";}.link.__jsx-style-dynamic-selector:hover{background-color:").concat(l?Es(u.palette.link,.1):"unset",";color:").concat(m,";}")))});u1.defaultProps=mee;u1.displayName="GeistLink";var h1=Ve(u1),fee=["href","nextLink","onClick","children","className"],_ee={nextLink:!1,className:""},g1=E.forwardRef(function(e,t){var n=e.href,r=e.nextLink,i=e.onClick,s=e.children,o=e.className,a=Re(e,fee),l=L.useMemo(function(){return n!==void 0||r},[n,r]),c=yi(s,bd),d=Fe(c,1),u=d[0],h=function(p){i&&i(p)};return l?E.createElement(h1,ve({className:"breadcrums-item ".concat(o),href:n,onClick:h,ref:t},a),u):E.createElement("span",{className:"breadcrums-item ".concat(o),onClick:h},u)});g1.defaultProps=_ee;g1.displayName="GeistBreadcrumbsItem";rD.Item=g1;rD.Separator=bd;var yee={x:0,y:0},p1=function(t){var n=t.x,r=t.y,i=t.color,s=t.onCompleted,o=L.useRef(null),a=Number.isNaN(+r)?0:r-10,l=Number.isNaN(+n)?0:n-10;return L.useEffect(function(){if(o.current)return o.current.addEventListener("animationend",s),function(){o.current&&o.current.removeEventListener("animationend",s)}}),E.createElement("div",{ref:o,className:"jsx-3424889537 drip"},E.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",style:{top:a,left:l},className:"jsx-3424889537"},E.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",className:"jsx-3424889537"},E.createElement("g",{fill:i,className:"jsx-3424889537"},E.createElement("rect",{width:"100%",height:"100%",rx:"10",className:"jsx-3424889537"})))),E.createElement(P,{id:"3424889537"},".drip.jsx-3424889537{position:absolute;left:0;right:0;top:0;bottom:0;}svg.jsx-3424889537{position:absolute;-webkit-animation:350ms ease-in expand-jsx-3424889537;animation:350ms ease-in expand-jsx-3424889537;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards;width:1rem;height:1rem;}@-webkit-keyframes expand-jsx-3424889537{0%{opacity:0;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}30%{opacity:1;}80%{opacity:0.5;}100%{-webkit-transform:scale(28);-ms-transform:scale(28);transform:scale(28);opacity:0;}}@keyframes expand-jsx-3424889537{0%{opacity:0;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}30%{opacity:1;}80%{opacity:0.5;}100%{-webkit-transform:scale(28);-ms-transform:scale(28);transform:scale(28);opacity:0;}}"))};p1.defaultProps=yee;p1.displayName="GeistButtonDrip";var sD=function(t){var n=t.color;return E.createElement("div",{className:"jsx-3416748964 btn-loading"},E.createElement(r1,{color:n}),E.createElement(P,{id:"3416748964"},".btn-loading.jsx-3416748964{position:absolute;top:0;left:0;right:0;bottom:0;z-index:2;background-color:var(--geist-ui-button-bg);}"))};sD.displayName="GeistButtonLoading";var vee=["isRight","isSingle","children","className"],xee={isRight:!1,className:""},Vp=function(t){var n=t.isRight,r=t.isSingle,i=t.children,s=t.className,o=Re(t,vee);return E.createElement("span",ve({},Ue(o),{className:"jsx-643337184 "+"icon ".concat(n?"right":""," ").concat(r?"single":""," ").concat(s)}),i,E.createElement(P,{id:"643337184"},".icon.jsx-643337184{position:absolute;left:var(--geist-ui-button-icon-padding);right:auto;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--geist-ui-button-color);z-index:1;}.right.jsx-643337184{right:var(--geist-ui-button-icon-padding);left:auto;}.icon.jsx-643337184 svg{background:transparent;height:calc(var(--geist-ui-button-height) / 2.35);width:calc(var(--geist-ui-button-height) / 2.35);}.single.jsx-643337184{position:static;-webkit-transform:none;-ms-transform:none;transform:none;}"))};Vp.defaultProps=xee;Vp.displayName="GeistButtonIcon";var bee=function(t,n,r){var i=r.icon,s=r.iconRight,o=i||s,a=!!s,l=t?"calc(var(--geist-ui-button-height) / 2 + var(--geist-ui-button-icon-padding) * .5)":0;return o?E.Children.count(n)===0?E.createElement(Vp,{isRight:a,isSingle:!0},o):E.createElement(E.Fragment,null,E.createElement(Vp,{isRight:a},o),E.createElement("div",{className:P.dynamic([["3568181479",[l,l]]])+" "+"text ".concat(a?"right":"left")},n,E.createElement(P,{id:"3568181479",dynamic:[l,l]},".left.__jsx-style-dynamic-selector{padding-left:".concat(l,";}.right.__jsx-style-dynamic-selector{padding-right:").concat(l,";}")))):E.createElement("div",{className:"text"},n)},wee=function(t,n){return n.isButtonGroup?ve({},t,{auto:!0,shadow:!1,ghost:n.ghost||t.ghost,type:n.type||t.type,disabled:n.disabled||t.disabled}):t},Eee={isButtonGroup:!1,disabled:!1},oD=E.createContext(Eee),See=function(){return E.useContext(oD)},Aee=function(t,n){var r={secondary:{bg:t.background,border:t.foreground,color:t.foreground},success:{bg:t.background,border:t.success,color:t.success},warning:{bg:t.background,border:t.warning,color:t.warning},error:{bg:t.background,border:t.error,color:t.error}};return r[n]||null},aD=function(t,n){var r=n.type,i=n.disabled,s=n.ghost,o={default:{bg:t.background,border:t.border,color:t.accents_5},secondary:{bg:t.foreground,border:t.foreground,color:t.background},success:{bg:t.success,border:t.success,color:"#fff"},warning:{bg:t.warning,border:t.warning,color:"#fff"},error:{bg:t.error,border:t.error,color:"#fff"},abort:{bg:"transparent",border:"transparent",color:t.accents_5}};if(i)return{bg:t.accents_1,border:t.accents_2,color:"#ccc"};var a=r==null?void 0:r.replace("-light",""),l=o.default;return s?Aee(t,a)||l:o[a]||l},kee=function(t,n){var r={secondary:{bg:t.foreground,border:t.background,color:t.background},success:{bg:t.success,border:t.background,color:"white"},warning:{bg:t.warning,border:t.background,color:"white"},error:{bg:t.error,border:t.background,color:"white"}},i=n.replace("-light","");return r[i]||null},lD=function(t,n){var r=n.type,i=n.disabled,s=n.loading,o=n.shadow,a=n.ghost,l=aD(t,n),c=Es(l.bg,.85),d={default:{bg:t.background,border:t.foreground},secondary:{bg:t.background,border:t.foreground},success:{bg:t.background,border:t.success},warning:{bg:t.background,border:t.warning},error:{bg:t.background,border:t.error},abort:{bg:"transparent",border:"transparent",color:t.accents_5},"secondary-light":ve({},l,{bg:c}),"success-light":ve({},l,{bg:c}),"warning-light":ve({},l,{bg:c}),"error-light":ve({},l,{bg:c})};if(i)return{bg:t.accents_1,border:t.accents_2,color:"#ccc"};if(s)return ve({},l,{color:"transparent"});if(o)return l;var u=(a?kee(t,r):d[r])||d.default;return ve({},u,{color:u.color||u.border})},Cee=function(t,n){return t?{cursor:"not-allowed",events:"auto"}:n?{cursor:"default",events:"none"}:{cursor:"pointer",events:"auto"}},Tee=function(t,n){var r=n.type,i=r.endsWith("light"),s=lD(t,n);return Es(i?s.bg:t.accents_2,.65)},Nee=["children","disabled","type","loading","shadow","ghost","effect","onClick","auto","icon","htmlType","iconRight","className"],Lee={type:"default",htmlType:"button",ghost:!1,loading:!1,shadow:!1,auto:!1,effect:!0,disabled:!1,className:""},m1=E.forwardRef(function(e,t){var n=ze(),r=Ge(),i=r.SCALES,s=L.useRef(null);L.useImperativeHandle(t,function(){return s.current});var o=L.useState(!1),a=Fe(o,2),l=a[0],c=a[1],d=L.useState(0),u=Fe(d,2),h=u[0],g=u[1],p=L.useState(0),m=Fe(p,2),f=m[0],y=m[1],_=See(),v=wee(e,_),x=v.children,b=v.disabled;v.type;var w=v.loading,S=v.shadow,A=v.ghost,C=v.effect,k=v.onClick,T=v.auto,M=v.icon,D=v.htmlType,B=v.iconRight,I=v.className,N=Re(v,Nee),V=L.useMemo(function(){return aD(n.palette,v)},[n.palette,v]),$=V.bg,Q=V.border,se=V.color,te=L.useMemo(function(){return lD(n.palette,v)},[n.palette,v]),de=L.useMemo(function(){return Cee(b,w)},[b,w]),Ee=de.cursor,oe=de.events,_e=L.useMemo(function(){return Tee(n.palette,v)},[n.palette,v]),De=function(){c(!1),g(0),y(0)},We=function(tt){if(!(b||w)){var dt=!S&&!A&&C;if(dt&&s.current){var it=s.current.getBoundingClientRect();c(!0),g(tt.clientX-it.left),y(tt.clientY-it.top)}k&&k(tt)}},Ye=L.useMemo(function(){return bee(T,x,{icon:M,iconRight:B})},[T,x,M,B]),pe=T?i.pl(1.15):i.pl(1.375),ye=T?i.pr(1.15):i.pr(1.375);return E.createElement("button",ve({ref:s,type:D,disabled:b,onClick:We},Ue(N),{className:P.dynamic([["1191936485",[i.height(2.5),n.layout.radius,i.font(.875),se,$,Q,Ee,oe,S?n.expressiveness.shadowSmall:"none",i.pl(.727),i.height(2.5),se,$,T?"min-content":i.width(12.5),T?"auto":"initial",i.height(2.5),i.pt(0),ye,i.pb(0),pe,i.mt(0),i.mr(0),i.mb(0),i.ml(0),te.color,te.color,te.bg,te.border,Ee,oe,S?n.expressiveness.shadowMedium:"none",S?"-1px":"0px"]]])+" "+"btn ".concat(I)}),w&&E.createElement(sD,{color:se}),Ye,l&&E.createElement(p1,{x:h,y:f,color:_e,onCompleted:De}),E.createElement(P,{id:"1191936485",dynamic:[i.height(2.5),n.layout.radius,i.font(.875),se,$,Q,Ee,oe,S?n.expressiveness.shadowSmall:"none",i.pl(.727),i.height(2.5),se,$,T?"min-content":i.width(12.5),T?"auto":"initial",i.height(2.5),i.pt(0),ye,i.pb(0),pe,i.mt(0),i.mr(0),i.mb(0),i.ml(0),te.color,te.color,te.bg,te.border,Ee,oe,S?n.expressiveness.shadowMedium:"none",S?"-1px":"0px"]},".btn.__jsx-style-dynamic-selector{box-sizing:border-box;display:inline-block;line-height:".concat(i.height(2.5),";border-radius:").concat(n.layout.radius,";font-weight:400;font-size:").concat(i.font(.875),";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;outline:none;text-transform:capitalize;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center;white-space:nowrap;-webkit-transition:background-color 200ms ease 0ms,box-shadow 200ms ease 0ms, border 200ms ease 0ms,color 200ms ease 0ms;transition:background-color 200ms ease 0ms,box-shadow 200ms ease 0ms, border 200ms ease 0ms,color 200ms ease 0ms;position:relative;overflow:hidden;color:").concat(se,";background-color:").concat($,";border:1px solid ").concat(Q,";cursor:").concat(Ee,";pointer-events:").concat(oe,";box-shadow:").concat(S?n.expressiveness.shadowSmall:"none",";--geist-ui-button-icon-padding:").concat(i.pl(.727),";--geist-ui-button-height:").concat(i.height(2.5),";--geist-ui-button-color:").concat(se,";--geist-ui-button-bg:").concat($,";min-width:").concat(T?"min-content":i.width(12.5),";width:").concat(T?"auto":"initial",";height:").concat(i.height(2.5),";padding:").concat(i.pt(0)," ").concat(ye," ").concat(i.pb(0)," ").concat(pe,";margin:").concat(i.mt(0)," ").concat(i.mr(0)," ").concat(i.mb(0)," ").concat(i.ml(0),";}.btn.__jsx-style-dynamic-selector:hover,.btn.__jsx-style-dynamic-selector:focus{color:").concat(te.color,";--geist-ui-button-color:").concat(te.color,";background-color:").concat(te.bg,";border-color:").concat(te.border,";cursor:").concat(Ee,";pointer-events:").concat(oe,";box-shadow:").concat(S?n.expressiveness.shadowMedium:"none",";-webkit-transform:translate3d(0px,").concat(S?"-1px":"0px",",0px);-ms-transform:translate3d(0px,").concat(S?"-1px":"0px",",0px);transform:translate3d(0px,").concat(S?"-1px":"0px",",0px);}.btn.__jsx-style-dynamic-selector .text{position:relative;z-index:1;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;line-height:inherit;top:-1px;}.btn.__jsx-style-dynamic-selector .text p,.btn.__jsx-style-dynamic-selector .text pre,.btn.__jsx-style-dynamic-selector .text div{margin:0;}")))});m1.defaultProps=Lee;m1.displayName="GeistButton";var ca=Ve(m1),cD=function(t,n){var r=L.useRef(n);L.useEffect(function(){r.current=n},[r]),L.useEffect(function(){var i=function(o){var a=t.current;!o||!a||a.contains(o.target)||r.current(o)};return document.addEventListener("click",i),function(){return document.removeEventListener("click",i)}},[t])},dD=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i={default:{color:t.accents_5,bgColor:t.background,borderLeftColor:t.accents_2,hoverBgColor:t.accents_1,hoverBorder:t.accents_2},secondary:{color:t.background,bgColor:t.foreground,borderLeftColor:t.accents_7,hoverBgColor:t.accents_7,hoverBorder:t.accents_7},success:{color:t.background,bgColor:t.success,borderLeftColor:t.successDark,hoverBgColor:t.successDark,hoverBorder:t.successDark},warning:{color:t.background,bgColor:t.warning,borderLeftColor:t.warningDark,hoverBgColor:t.warningDark,hoverBorder:t.warningDark},error:{color:t.background,bgColor:t.error,borderLeftColor:t.errorDark,hoverBgColor:t.errorDark,hoverBorder:t.errorDark}};return r?ve({},i.default,{bgColor:t.accents_1,color:t.accents_4}):n?i[n]:i.default},uD=function(t){var n=t.color,r=t.height;return E.createElement("svg",{stroke:n,style:{color:n},viewBox:"0 0 24 24",width:r,height:r,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:"jsx-3359574434"},E.createElement("path",{d:"M6 9l6 6 6-6",className:"jsx-3359574434"}),E.createElement(P,{id:"3359574434"},"svg.jsx-3359574434{-webkit-transform:scale(0.6);-ms-transform:scale(0.6);transform:scale(0.6);}"))};uD.displayName="GeistButtonDropdownIcon";var Iee={type:"default",auto:!1,disabled:!1,loading:!1},hD=E.createContext(Iee),Pee=function(){return E.useContext(hD)},Mee=["children","onClick","className","main","type"],Fee={main:!1,type:"default",onClick:function(){},className:""},qm=function(t){var n=t.children,r=t.onClick,i=t.className,s=t.main,o=t.type,a=Re(t,Mee),l=ze(),c=Pee(),d=c.type,u=c.disabled,h=c.loading,g=s?d:o,p=dD(l.palette,g,u),m=function(_){u||h||r&&r(_)},f=L.useMemo(function(){return h?"default":u?"not-allowed":"pointer"},[h,u]);return E.createElement("button",ve({onClick:m},Ue(a),{className:P.dynamic([["772098729",[f,p.bgColor,p.color,p.hoverBorder,p.hoverBgColor]]])+" "+(i||"")}),h?E.createElement(r1,null):n,E.createElement(P,{id:"772098729",dynamic:[f,p.bgColor,p.color,p.hoverBorder,p.hoverBgColor]},"button.__jsx-style-dynamic-selector{position:relative;-webkit-appearance:button;text-rendering:auto;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;vertical-align:middle;text-align:center;cursor:".concat(f,";box-sizing:border-box;margin:0;border:none;background-color:").concat(p.bgColor,";color:").concat(p.color,";width:100%;height:var(--geist-ui-dropdown-height);min-width:var(--geist-ui-dropdown-min-width);padding:var(--geist-ui-dropdown-padding);font-size:var(--geist-ui-dropdown-font-size);}button.__jsx-style-dynamic-selector:hover{border-color:").concat(p.hoverBorder,";background-color:").concat(p.hoverBgColor,";}")))};qm.defaultProps=Fee;qm.displayName="GeistButtonDropdownItem";var Ree=["children","type","auto","className","disabled","loading"],Dee={type:"default",auto:!1,loading:!1,disabled:!1,className:""},OC=function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation()},f1=function(t){var n=t.children,r=t.type,i=t.auto,s=t.className,o=t.disabled,a=t.loading,l=Re(t,Ree),c=Ge(),d=c.SCALES,u=L.useRef(null),h=ze(),g=dD(h.palette,r),p=yi(n,qm)[1],m=W3(p,"main",!0),f=Fe(m,2),y=f[0],_=f[1],v=L.useState(!1),x=Fe(v,2),b=x[0],w=x[1],S=L.useCallback(function(M){M.preventDefault(),OC(M),!(o||a)&&w(!b)},[b]),A={type:r,auto:i,disabled:o,loading:a},C=L.useMemo(function(){return o||a?h.palette.accents_1:b?g.hoverBgColor:g.bgColor},[b,g,h.palette]),k=i?d.pl(1.15):d.pl(1.375),T=i?d.pr(1.15):d.pr(1.375);return cD(u,function(){return w(!1)}),E.createElement(hD.Provider,{value:A},E.createElement("div",ve({ref:u,onClick:OC},Ue(l),{className:P.dynamic([["3157107390",[h.palette.border,h.layout.radius,d.height(2.5),i?"min-content":d.width(12.5),d.pt(0),T,d.pb(0),k,d.font(.875),h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius,g.color,C,d.height(2.5),g.borderLeftColor,o||a?"not-allowed":"pointer",g.hoverBorder,g.hoverBgColor,h.layout.radius,h.expressiveness.shadowLarge,h.layout.gapHalf,h.palette.background,h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius]]])+" "+"btn-dropdown ".concat(s)}),_,E.createElement("details",{open:b,className:P.dynamic([["3157107390",[h.palette.border,h.layout.radius,d.height(2.5),i?"min-content":d.width(12.5),d.pt(0),T,d.pb(0),k,d.font(.875),h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius,g.color,C,d.height(2.5),g.borderLeftColor,o||a?"not-allowed":"pointer",g.hoverBorder,g.hoverBgColor,h.layout.radius,h.expressiveness.shadowLarge,h.layout.gapHalf,h.palette.background,h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius]]])},E.createElement("summary",{onClick:S,className:P.dynamic([["3157107390",[h.palette.border,h.layout.radius,d.height(2.5),i?"min-content":d.width(12.5),d.pt(0),T,d.pb(0),k,d.font(.875),h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius,g.color,C,d.height(2.5),g.borderLeftColor,o||a?"not-allowed":"pointer",g.hoverBorder,g.hoverBgColor,h.layout.radius,h.expressiveness.shadowLarge,h.layout.gapHalf,h.palette.background,h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius]]])},E.createElement(uD,{color:g.color,height:d.height(2.5)})),E.createElement("div",{className:P.dynamic([["3157107390",[h.palette.border,h.layout.radius,d.height(2.5),i?"min-content":d.width(12.5),d.pt(0),T,d.pb(0),k,d.font(.875),h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius,g.color,C,d.height(2.5),g.borderLeftColor,o||a?"not-allowed":"pointer",g.hoverBorder,g.hoverBgColor,h.layout.radius,h.expressiveness.shadowLarge,h.layout.gapHalf,h.palette.background,h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius]]])+" content"},y)),E.createElement(P,{id:"3157107390",dynamic:[h.palette.border,h.layout.radius,d.height(2.5),i?"min-content":d.width(12.5),d.pt(0),T,d.pb(0),k,d.font(.875),h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius,g.color,C,d.height(2.5),g.borderLeftColor,o||a?"not-allowed":"pointer",g.hoverBorder,g.hoverBgColor,h.layout.radius,h.expressiveness.shadowLarge,h.layout.gapHalf,h.palette.background,h.layout.radius,h.layout.radius,h.layout.radius,h.layout.radius]},".btn-dropdown.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;position:relative;box-sizing:border-box;border:1px solid ".concat(h.palette.border,";border-radius:").concat(h.layout.radius,";--geist-ui-dropdown-height:").concat(d.height(2.5),";--geist-ui-dropdown-min-width:").concat(i?"min-content":d.width(12.5),";--geist-ui-dropdown-padding:").concat(d.pt(0)," ").concat(T," ").concat(d.pb(0)," ").concat(k,";--geist-ui-dropdown-font-size:").concat(d.font(.875),";}.btn-dropdown.__jsx-style-dynamic-selector>button{border-top-left-radius:").concat(h.layout.radius,";border-bottom-left-radius:").concat(h.layout.radius,";}details.__jsx-style-dynamic-selector{border-top-right-radius:").concat(h.layout.radius,";border-bottom-right-radius:").concat(h.layout.radius,";overflow:hidden;}summary.__jsx-style-dynamic-selector{box-sizing:border-box;-webkit-tap-highlight-color:transparent;list-style:none;outline:none;color:").concat(g.color,";background-color:").concat(C,";height:").concat(d.height(2.5),";border-left:1px solid ").concat(g.borderLeftColor,";cursor:").concat(o||a?"not-allowed":"pointer",";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:auto;padding:0 1px;-webkit-transition:background 0.2s ease 0s,border-color 0.2s ease 0s;transition:background 0.2s ease 0s,border-color 0.2s ease 0s;}summary.__jsx-style-dynamic-selector:hover{border-color:").concat(g.hoverBorder,";background-color:").concat(g.hoverBgColor,";}.content.__jsx-style-dynamic-selector{position:absolute;right:0;left:0;z-index:90;width:100%;border-radius:").concat(h.layout.radius,";box-shadow:").concat(h.expressiveness.shadowLarge,";-webkit-transform:translateY(").concat(h.layout.gapHalf,");-ms-transform:translateY(").concat(h.layout.gapHalf,");transform:translateY(").concat(h.layout.gapHalf,");background-color:").concat(h.palette.background,";}.content.__jsx-style-dynamic-selector>button:first-of-type{border-top-left-radius:").concat(h.layout.radius,";border-top-right-radius:").concat(h.layout.radius,";}.content.__jsx-style-dynamic-selector>button:last-of-type{border-bottom-left-radius:").concat(h.layout.radius,";border-bottom-right-radius:").concat(h.layout.radius,";}"))))};f1.displayName="GeistButtonDropdown";f1.defaultProps=Dee;var zee=Ve(f1);zee.Item=qm;var Oee=["disabled","type","ghost","vertical","children","className"],Bee={disabled:!1,vertical:!1,ghost:!1,type:"default",className:""},jee=function(t,n){var r=n.ghost,i=n.type;if(!r&&i!=="default")return t.background;var s={default:t.border,success:t.success,secondary:t.secondary,error:t.error,warning:t.warning},o=i.replace("-light","");return s[o]||s.default},_1=function(t){var n=ze(),r=Ge(),i=r.SCALES,s=t.disabled,o=t.type,a=t.ghost,l=t.vertical,c=t.children,d=t.className,u=Re(t,Oee),h=L.useMemo(function(){return{disabled:s,type:o,ghost:a,isButtonGroup:!0}},[s,o]),g=L.useMemo(function(){return jee(n.palette,t)},[n,o,s,a]);return E.createElement(oD.Provider,{value:h},E.createElement("div",ve({},Ue(u),{className:P.dynamic([["809583503",[n.layout.radius,g,i.width(1,"auto"),i.height(1,"min-content"),i.mt(.313),i.mr(.313),i.mb(.313),i.ml(.313),i.pt(0),i.pr(0),i.pb(0),i.pl(0),g,g]]])+" "+"btn-group ".concat(l?"vertical":"horizontal"," ").concat(d)}),c,E.createElement(P,{id:"809583503",dynamic:[n.layout.radius,g,i.width(1,"auto"),i.height(1,"min-content"),i.mt(.313),i.mr(.313),i.mb(.313),i.ml(.313),i.pt(0),i.pr(0),i.pb(0),i.pl(0),g,g]},".btn-group.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;border-radius:".concat(n.layout.radius,";border:1px solid ").concat(g,";background-color:transparent;overflow:hidden;width:").concat(i.width(1,"auto"),";height:").concat(i.height(1,"min-content"),";margin:").concat(i.mt(.313)," ").concat(i.mr(.313)," ").concat(i.mb(.313)," ").concat(i.ml(.313),";padding:").concat(i.pt(0)," ").concat(i.pr(0)," ").concat(i.pb(0)," ").concat(i.pl(0),";}.vertical.__jsx-style-dynamic-selector{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.btn-group.__jsx-style-dynamic-selector .btn{border:none;}.btn-group.__jsx-style-dynamic-selector .btn .text{top:0;}.horizontal.__jsx-style-dynamic-selector .btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0;border-left:1px solid ").concat(g,";}.horizontal.__jsx-style-dynamic-selector .btn:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0;}.vertical.__jsx-style-dynamic-selector .btn:not(:first-child){border-top-left-radius:0;border-top-right-radius:0;border-top:1px solid ").concat(g,";}.vertical.__jsx-style-dynamic-selector .btn:not(:last-child){border-bottom-left-radius:0;border-bottom-right-radius:0;}"))))};_1.defaultProps=Bee;_1.displayName="GeistButtonGroup";var Uee=Ve(_1),$ee=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2,i=t/n,s=(Number.isNaN(i)?0:i)*100;if(s>100)return 100;if(s<0)return 0;if(!"".concat(s).includes("."))return s;var o="".concat(s).split(".")[1];return o.length<r?s:+s.toFixed(r)},gD=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:2;return L.useMemo(function(){return $ee(t,n,r)},[t,n,r])},Gee=["value","limit","color","className"],Vee={value:0,limit:100,color:"",className:""},Hee=function(t,n){return t<33?n.cyan:t<66?n.warning:n.errorDark},y1=function(t){var n=t.value,r=t.limit,i=t.color,s=t.className,o=Re(t,Gee),a=ze(),l=Ge(),c=l.SCALES,d=gD(n,r),u=L.useMemo(function(){return i&&i!==""?i:Hee(d,a.palette)},[i,d,a.palette]);return E.createElement("div",ve({title:"".concat(d,"%")},Ue(o),{className:P.dynamic([["2706946339",[c.width(3.125),c.height(.625),a.layout.radius,a.palette.accents_2,c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0),c.ml(0),d,u]]])+" "+"capacity ".concat(s)}),E.createElement("span",{className:P.dynamic([["2706946339",[c.width(3.125),c.height(.625),a.layout.radius,a.palette.accents_2,c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0),c.ml(0),d,u]]])}),E.createElement(P,{id:"2706946339",dynamic:[c.width(3.125),c.height(.625),a.layout.radius,a.palette.accents_2,c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0),c.ml(0),d,u]},".capacity.__jsx-style-dynamic-selector{width:".concat(c.width(3.125),";height:").concat(c.height(.625),";border-radius:").concat(a.layout.radius,";overflow:hidden;background-color:").concat(a.palette.accents_2,";padding:").concat(c.pt(0)," ").concat(c.pr(0)," ").concat(c.pb(0)," ").concat(c.pl(0),";margin:").concat(c.mt(0)," ").concat(c.mr(0)," ").concat(c.mb(0)," ").concat(c.ml(0),";}span.__jsx-style-dynamic-selector{width:").concat(d,"%;background-color:").concat(u,";height:100%;margin:0;padding:0;display:block;}")))};y1.defaultProps=Vee;y1.displayName="GeistCapacity";Ve(y1);var Wee=function(t,n,r){var i={default:{color:n.foreground,bgColor:n.background},dark:{color:n.background,bgColor:n.foreground},secondary:{color:n.background,bgColor:n.secondary},success:{color:n.background,bgColor:n.success},warning:{color:n.background,bgColor:n.warning},error:{color:n.background,bgColor:n.error},lite:{color:n.foreground,bgColor:n.background},alert:{color:"white",bgColor:n.alert},purple:{color:"white",bgColor:n.purple},violet:{color:"white",bgColor:n.violet},cyan:{color:"black",bgColor:n.cyan}},s=t==="default"&&!r;return ve({},i[t],{borderColor:s?n.border:"transparent"})},Xee=["children","className","disableAutoMargin"],Yee={disableAutoMargin:!1,className:""},v1=function(t){var n=t.children,r=t.className,i=t.disableAutoMargin,s=Re(t,Xee),o=ze(),a=Ge(),l=a.SCALES;return E.createElement("footer",ve({},Ue(s),{className:P.dynamic([["1602358380",[l.py(.66),l.px(1.31),l.font(.875),o.palette.border,o.layout.radius,o.layout.radius,l.height(3.3),l.width(1,"auto"),l.height(1,"auto"),l.mt(0),l.mr(0),l.mb(0),l.ml(0),o.layout.gapQuarter]]])+" "+"".concat(i?"":"auto-margin"," ").concat(r)}),n,E.createElement(P,{id:"1602358380",dynamic:[l.py(.66),l.px(1.31),l.font(.875),o.palette.border,o.layout.radius,o.layout.radius,l.height(3.3),l.width(1,"auto"),l.height(1,"auto"),l.mt(0),l.mr(0),l.mb(0),l.ml(0),o.layout.gapQuarter]},"footer.__jsx-style-dynamic-selector{padding:".concat(l.py(.66)," ").concat(l.px(1.31),";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;color:inherit;background-color:inherit;font-size:").concat(l.font(.875),";border-top:1px solid ").concat(o.palette.border,";border-bottom-left-radius:").concat(o.layout.radius,";border-bottom-right-radius:").concat(o.layout.radius,";min-height:").concat(l.height(3.3),";width:").concat(l.width(1,"auto"),";height:").concat(l.height(1,"auto"),";margin:").concat(l.mt(0)," ").concat(l.mr(0)," ").concat(l.mb(0)," ").concat(l.ml(0),";}.auto-margin.__jsx-style-dynamic-selector *{margin-top:0;margin-bottom:0;margin-right:").concat(o.layout.gapQuarter,";}")))};v1.defaultProps=Yee;v1.displayName="GeistCardFooter";var x1=Ve(v1),qee=["className","children"],Zee={className:""},b1=function(t){var n=t.className,r=t.children,i=Re(t,qee),s=Ge(),o=s.SCALES;return E.createElement("div",ve({},Ue(i),{className:P.dynamic([["490544004",[o.width(1,"100%"),o.height(1,"auto"),o.pt(1),o.pr(1),o.pb(1),o.pl(1),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]]])+" "+"content ".concat(n)}),r,E.createElement(P,{id:"490544004",dynamic:[o.width(1,"100%"),o.height(1,"auto"),o.pt(1),o.pr(1),o.pb(1),o.pl(1),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]},".content.__jsx-style-dynamic-selector{width:".concat(o.width(1,"100%"),";height:").concat(o.height(1,"auto"),";padding:").concat(o.pt(1)," ").concat(o.pr(1)," ").concat(o.pb(1)," ").concat(o.pl(1),";margin:").concat(o.mt(0)," ").concat(o.mr(0)," ").concat(o.mb(0)," ").concat(o.ml(0),";}.content.__jsx-style-dynamic-selector>p:first-child{margin-top:0;}.content.__jsx-style-dynamic-selector>p:last-child{margin-bottom:0;}")))};b1.defaultProps=Zee;b1.displayName="GeistCardContent";var Hp=Ve(b1),Jee=["opacity"],Qee={opacity:.5},w1=E.memo(function(e){var t=e.opacity,n=Re(e,Jee),r=ze();return E.createElement("div",ve({},Ue(n),{className:P.dynamic([["2946022605",[r.palette.accents_1,r.palette.accents_2,r.palette.accents_2,r.palette.accents_1,t]]])+" skeleton"}),E.createElement(P,{id:"2946022605",dynamic:[r.palette.accents_1,r.palette.accents_2,r.palette.accents_2,r.palette.accents_1,t]},".skeleton.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;background-image:linear-gradient( 270deg, ".concat(r.palette.accents_1,", ").concat(r.palette.accents_2,", ").concat(r.palette.accents_2,", ").concat(r.palette.accents_1," );background-size:400% 100%;-webkit-animation:loading-__jsx-style-dynamic-selector 3s ease-in-out infinite;animation:loading-__jsx-style-dynamic-selector 3s ease-in-out infinite;opacity:").concat(t,";-webkit-transition:opacity 300ms ease-out;transition:opacity 300ms ease-out;}@-webkit-keyframes loading-__jsx-style-dynamic-selector{0%{background-position:200% 0;}to{background-position:-200% 0;}}@keyframes loading-__jsx-style-dynamic-selector{0%{background-position:200% 0;}to{background-position:-200% 0;}}")))});w1.defaultProps=Qee;w1.displayName="GeistImageSkeleton";var Kee=["src","disableSkeleton","className","maxDelay"],ete={disableSkeleton:!1,className:"",maxDelay:3e3},E1=function(t){var n=t.src,r=t.disableSkeleton,i=t.className,s=t.maxDelay,o=Re(t,Kee),a=Ge(),l=a.SCALES,c=a.getScaleableProps,d=c(["width","w"]),u=c(["height","h"]),h=!r&&d&&u,g=ze(),p=L.useState(!0),m=Fe(p,2),f=m[0],y=m[1],_=L.useState(!0),v=Fe(_,2),x=v[0],b=v[1],w=L.useRef(null),S=function(){h&&y(!1)};return L.useEffect(function(){h&&w.current&&w.current.complete&&(y(!1),b(!1))}),L.useEffect(function(){var A=setTimeout(function(){h&&b(!1),clearTimeout(A)},s);return function(){return clearTimeout(A)}},[f]),E.createElement("div",{className:P.dynamic([["932238951",[g.layout.radius,l.width(1,"auto"),l.height(1,"auto"),l.mt(0),l.mr(0,"auto"),l.mb(0),l.ml(0,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.width(1,"auto"),l.height(1,"auto")]]])+" "+"image ".concat(i)},x&&h&&E.createElement(w1,{opacity:f?.5:0}),E.createElement("img",ve({ref:w,onLoad:S,src:n},Ue(o),{className:P.dynamic([["932238951",[g.layout.radius,l.width(1,"auto"),l.height(1,"auto"),l.mt(0),l.mr(0,"auto"),l.mb(0),l.ml(0,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.width(1,"auto"),l.height(1,"auto")]]])})),E.createElement(P,{id:"932238951",dynamic:[g.layout.radius,l.width(1,"auto"),l.height(1,"auto"),l.mt(0),l.mr(0,"auto"),l.mb(0),l.ml(0,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.width(1,"auto"),l.height(1,"auto")]},".image.__jsx-style-dynamic-selector{position:relative;border-radius:".concat(g.layout.radius,";overflow:hidden;max-width:100%;width:").concat(l.width(1,"auto"),";height:").concat(l.height(1,"auto"),";margin:").concat(l.mt(0)," ").concat(l.mr(0,"auto")," ").concat(l.mb(0)," ").concat(l.ml(0,"auto"),";padding:").concat(l.pt(0)," ").concat(l.pr(0)," ").concat(l.pb(0)," ").concat(l.pl(0),";}img.__jsx-style-dynamic-selector{width:").concat(l.width(1,"auto"),";height:").concat(l.height(1,"auto"),";object-fit:scale-down;display:block;}")))};E1.defaultProps=ete;E1.displayName="GeistImage";var pD=Ve(E1),tte=function(){return E.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"jsx-4165143638"},E.createElement("path",{d:"M5 10.2H19V21H5V10.2Z",className:"jsx-4165143638"}),E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 12C13.933 12 15.5 10.3882 15.5 8.4C15.5 6.41177 13.933 4.8 12 4.8C10.067 4.8 8.5 6.41177 8.5 8.4C8.5 10.3882 10.067 12 12 12ZM12 13.8C14.8995 13.8 17.25 11.3823 17.25 8.4C17.25 5.41766 14.8995 3 12 3C9.10051 3 6.75 5.41766 6.75 8.4C6.75 11.3823 9.10051 13.8 12 13.8Z",className:"jsx-4165143638"}),E.createElement(P,{id:"4165143638"},"svg.jsx-4165143638{width:1em;height:1em;}"))},nte=E.memo(tte),rte=function(t,n){return t?{color:n.background,barBgColor:n.foreground,inputBgColor:n.accents_8,borderColor:n.accents_7,titleColor:n.accents_2}:{color:n.foreground,barBgColor:n.background,inputBgColor:n.accents_1,borderColor:n.border,titleColor:n.accents_5}},ite=["url","title","children","showFullLink","invert","anchorProps","className"],ste={className:"",showFullLink:!1,anchorProps:{},invert:!1},ote=function(t){try{return new URL(t).host}catch{return t}},ate=function(t,n){return E.createElement("div",{className:P.dynamic([["524099755",[n.titleColor]]])+" title"},t,E.createElement(P,{id:"524099755",dynamic:[n.titleColor]},".title.__jsx-style-dynamic-selector{color:".concat(n.titleColor,";font-size:0.75em;}")))},lte=function(t,n,r,i){return E.createElement("div",{className:P.dynamic([["2765629350",[r.inputBgColor]]])+" address-input"},E.createElement("span",{className:P.dynamic([["2765629350",[r.inputBgColor]]])+" https"},E.createElement(nte,null)),E.createElement(h1,ve({href:t,title:t,target:"_blank"},i),n?t:ote(t)),E.createElement(P,{id:"2765629350",dynamic:[r.inputBgColor]},".address-input.__jsx-style-dynamic-selector{height:1.75em;max-width:60%;min-width:40%;background-color:".concat(r.inputBgColor,";color:inherit;border-radius:3px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:0 10px;overflow:hidden;position:relative;}.address-input.__jsx-style-dynamic-selector *{font-size:0.75em;color:inherit;}.address-input.__jsx-style-dynamic-selector a{max-width:90%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;display:inline-block;color:inherit;}.https.__jsx-style-dynamic-selector{width:0.75em;height:0.75em;font-size:1em;margin-right:0.31em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-top:-1px;color:inherit;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}")))},S1=E.forwardRef(function(e,t){var n=e.url,r=e.title,i=e.children,s=e.showFullLink,o=e.invert,a=e.anchorProps,l=e.className,c=Re(e,ite),d=ze(),u=Ge(),h=u.SCALES,g=L.useMemo(function(){return rte(o,d.palette)},[o,d.palette]),p=L.useMemo(function(){return n?lte(n,s,g,a):r?ate(r,g):null},[n,s,r,g,a]);return E.createElement("div",ve({ref:t},Ue(c),{className:P.dynamic([["3239040194",[d.expressiveness.shadowLarge,d.layout.radius,h.font(1),h.width(1,"max-content"),h.height(1,"auto"),h.mt(0),h.mr(0,"auto"),h.mb(0),h.ml(0,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),g.color,g.barBgColor,g.borderColor,d.layout.gapHalf]]])+" "+"browser ".concat(l)}),E.createElement("header",{className:P.dynamic([["3239040194",[d.expressiveness.shadowLarge,d.layout.radius,h.font(1),h.width(1,"max-content"),h.height(1,"auto"),h.mt(0),h.mr(0,"auto"),h.mb(0),h.ml(0,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),g.color,g.barBgColor,g.borderColor,d.layout.gapHalf]]])},E.createElement("div",{className:P.dynamic([["3239040194",[d.expressiveness.shadowLarge,d.layout.radius,h.font(1),h.width(1,"max-content"),h.height(1,"auto"),h.mt(0),h.mr(0,"auto"),h.mb(0),h.ml(0,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),g.color,g.barBgColor,g.borderColor,d.layout.gapHalf]]])+" traffic"},E.createElement("span",{className:P.dynamic([["3239040194",[d.expressiveness.shadowLarge,d.layout.radius,h.font(1),h.width(1,"max-content"),h.height(1,"auto"),h.mt(0),h.mr(0,"auto"),h.mb(0),h.ml(0,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),g.color,g.barBgColor,g.borderColor,d.layout.gapHalf]]])+" close"}),E.createElement("span",{className:P.dynamic([["3239040194",[d.expressiveness.shadowLarge,d.layout.radius,h.font(1),h.width(1,"max-content"),h.height(1,"auto"),h.mt(0),h.mr(0,"auto"),h.mb(0),h.ml(0,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),g.color,g.barBgColor,g.borderColor,d.layout.gapHalf]]])+" mini"}),E.createElement("span",{className:P.dynamic([["3239040194",[d.expressiveness.shadowLarge,d.layout.radius,h.font(1),h.width(1,"max-content"),h.height(1,"auto"),h.mt(0),h.mr(0,"auto"),h.mb(0),h.ml(0,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),g.color,g.barBgColor,g.borderColor,d.layout.gapHalf]]])+" full"})),p),i,E.createElement(P,{id:"3239040194",dynamic:[d.expressiveness.shadowLarge,d.layout.radius,h.font(1),h.width(1,"max-content"),h.height(1,"auto"),h.mt(0),h.mr(0,"auto"),h.mb(0),h.ml(0,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),g.color,g.barBgColor,g.borderColor,d.layout.gapHalf]},".browser.__jsx-style-dynamic-selector{background-color:transparent;box-shadow:".concat(d.expressiveness.shadowLarge,";max-width:100%;border-radius:").concat(d.layout.radius,";overflow:hidden;font-size:").concat(h.font(1),";width:").concat(h.width(1,"max-content"),";height:").concat(h.height(1,"auto"),";margin:").concat(h.mt(0)," ").concat(h.mr(0,"auto")," ").concat(h.mb(0)," ").concat(h.ml(0,"auto"),";padding:").concat(h.pt(0)," ").concat(h.pr(0)," ").concat(h.pb(0)," ").concat(h.pl(0),";}.browser.__jsx-style-dynamic-selector .image{border-top-left-radius:0;border-top-right-radius:0;}header.__jsx-style-dynamic-selector{height:2.5em;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;position:relative;color:").concat(g.color,";background-color:").concat(g.barBgColor,";border-bottom:1px solid ").concat(g.borderColor,";}.traffic.__jsx-style-dynamic-selector{width:auto;position:absolute;left:").concat(d.layout.gapHalf,";top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);bottom:0;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:inherit;}.traffic.__jsx-style-dynamic-selector span.__jsx-style-dynamic-selector{border-radius:50%;width:0.75em;height:0.75em;max-width:20px;max-height:20px;display:inline-block;margin-right:0.5em;}.close.__jsx-style-dynamic-selector{background-color:#ff5f56;}.mini.__jsx-style-dynamic-selector{background-color:#ffbd2e;}.full.__jsx-style-dynamic-selector{background-color:#27c93f;}")))});S1.defaultProps=ste;S1.displayName="GeistImageBrowser";var cte=Ve(S1);pD.Browser=cte;var dte=["children","hoverable","className","shadow","type"],ute={type:"default",hoverable:!1,shadow:!1,className:""},A1=function(t){var n=t.children,r=t.hoverable,i=t.className,s=t.shadow,o=t.type,a=Re(t,dte),l=ze(),c=Ge(),d=c.SCALES,u=L.useMemo(function(){return s?l.expressiveness.shadowMedium:r?l.expressiveness.shadowSmall:"none"},[r,s,l.expressiveness]),h=L.useMemo(function(){return Wee(o,l.palette,s)},[o,l.palette,s]),g=h.color,p=h.bgColor,m=h.borderColor,f=yi(n,x1),y=Fe(f,2),_=y[0],v=y[1],x=yi(_,pD),b=Fe(x,2),w=b[0],S=b[1],A=xd(w,Hp);return E.createElement("div",ve({},Ue(a),{className:P.dynamic([["4234389955",[l.palette.background,l.layout.radius,s?l.expressiveness.shadowSmall:"none",g,p,m,d.width(1,"auto"),d.height(1,"auto"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),u]]])+" "+"card ".concat(i)}),S,A?w:E.createElement(Hp,null,w),v,E.createElement(P,{id:"4234389955",dynamic:[l.palette.background,l.layout.radius,s?l.expressiveness.shadowSmall:"none",g,p,m,d.width(1,"auto"),d.height(1,"auto"),d.pt(0),d.pr(0),d.pb(0),d.pl(0),d.mt(0),d.mr(0),d.mb(0),d.ml(0),u]},".card.__jsx-style-dynamic-selector{background:".concat(l.palette.background,";-webkit-transition:all 0.2s ease;transition:all 0.2s ease;border-radius:").concat(l.layout.radius,";box-shadow:").concat(s?l.expressiveness.shadowSmall:"none",";box-sizing:border-box;color:").concat(g,";background-color:").concat(p,";border:1px solid ").concat(m,";width:").concat(d.width(1,"auto"),";height:").concat(d.height(1,"auto"),";padding:").concat(d.pt(0)," ").concat(d.pr(0)," ").concat(d.pb(0)," ").concat(d.pl(0),";margin:").concat(d.mt(0)," ").concat(d.mr(0)," ").concat(d.mb(0)," ").concat(d.ml(0),";}.card.__jsx-style-dynamic-selector:hover{box-shadow:").concat(u,";}.card.__jsx-style-dynamic-selector img{width:100%;}.card.__jsx-style-dynamic-selector .image{border-bottom-left-radius:0;border-bottom-right-radius:0;}")))};A1.defaultProps=ute;A1.displayName="GeistCard";var Zm=Ve(A1);Zm.Footer=x1;Zm.Actions=x1;Zm.Content=Hp;Zm.Body=Hp;var hte={disabledAll:!1,inGroup:!1,values:[]},mD=E.createContext(hte),gte=function(){return E.useContext(mD)},fD=function(t){var n=t.fill,r=t.bg,i=t.disabled,s=t.checked,o=ze(),a=L.useMemo(function(){return{propsFill:n,propsBg:r}},[o.palette]),l=a.propsFill,c=a.propsBg;return E.createElement(E.Fragment,null,s?E.createElement("svg",{viewBox:"0 0 17 16",fill:"none",className:P.dynamic([["996181129",[i?.4:1,i?"not-allowed":"pointer"]]])},E.createElement("path",{d:"M12.1429 0H3.85714C1.7269 0 0 1.79086 0 4V12C0 14.2091 1.7269 16 3.85714 16H12.1429C14.2731 16 16 14.2091 16 12V4C16 1.79086 14.2731 0 12.1429 0Z",fill:l,className:P.dynamic([["996181129",[i?.4:1,i?"not-allowed":"pointer"]]])}),E.createElement("path",{d:"M16 3L7.72491 11L5 8",stroke:c,strokeWidth:"1.5",className:P.dynamic([["996181129",[i?.4:1,i?"not-allowed":"pointer"]]])})):E.createElement("svg",{viewBox:"0 0 12 12",fill:"none",className:P.dynamic([["996181129",[i?.4:1,i?"not-allowed":"pointer"]]])},E.createElement("path",{d:"M8.5 0.5H3.5C1.84315 0.5 0.5 1.84315 0.5 3.5V8.5C0.5 10.1569 1.84315 11.5 3.5 11.5H8.5C10.1569 11.5 11.5 10.1569 11.5 8.5V3.5C11.5 1.84315 10.1569 0.5 8.5 0.5Z",stroke:o.palette.accents_5,className:P.dynamic([["996181129",[i?.4:1,i?"not-allowed":"pointer"]]])})),E.createElement(P,{id:"996181129",dynamic:[i?.4:1,i?"not-allowed":"pointer"]},"svg.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;width:calc(0.86 * var(--checkbox-size));height:calc(0.86 * var(--checkbox-size));-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:".concat(i?.4:1,";cursor:").concat(i?"not-allowed":"pointer",";}")))};fD.displayName="GeistCheckboxIcon";var pte=E.memo(fD),mte=function(t,n){var r={default:{fill:t.foreground,bg:t.background},secondary:{fill:t.foreground,bg:t.background},success:{fill:t.success,bg:t.background},warning:{fill:t.warning,bg:t.background},error:{fill:t.error,bg:t.background}};return n?r[n]:r.default},fte=["checked","initialChecked","disabled","onChange","className","children","type","value"],_te={disabled:!1,type:"default",initialChecked:!1,className:"",value:""},k1=function(t){var n=t.checked,r=t.initialChecked,i=t.disabled,s=t.onChange,o=t.className,a=t.children,l=t.type,c=t.value,d=Re(t,fte),u=ze(),h=Ge(),g=h.SCALES,p=L.useState(r),m=Fe(p,2),f=m[0],y=m[1],_=gte(),v=_.updateState,x=_.inGroup,b=_.disabledAll,w=_.values,S=x&&b||i;x&&n&&Di('Remove props "checked" when [Checkbox] component is in the group.',"Checkbox"),x&&L.useEffect(function(){var M=w.includes(c);M!==f&&y(M)},[w.join(",")]);var A=L.useMemo(function(){return mte(u.palette,l)},[u.palette,l]),C=A.fill,k=A.bg,T=L.useCallback(function(M){if(!S){var D={target:{checked:!f},stopPropagation:M.stopPropagation,preventDefault:M.preventDefault,nativeEvent:M};x&&v&&v&&v(c,!f),y(!f),s&&s(D)}},[v,s,S,f]);return L.useEffect(function(){n!==void 0&&y(n)},[n]),E.createElement("label",{className:P.dynamic([["4126727675",[g.font(.875),S?"not-allowed":"pointer",S?.75:1,g.width(1,"auto"),g.height(1,"var(--checkbox-size)"),g.pt(0),g.pr(0),g.pb(0),g.pl(0),g.mt(0),g.mr(0),g.mb(0),g.ml(0),S?"not-allowed":"pointer"]]])+" "+"checkbox ".concat(o)},E.createElement(pte,{fill:C,bg:k,disabled:S,checked:f}),E.createElement("input",ve({type:"checkbox",disabled:S,checked:f,onChange:T},Ue(d),{className:P.dynamic([["4126727675",[g.font(.875),S?"not-allowed":"pointer",S?.75:1,g.width(1,"auto"),g.height(1,"var(--checkbox-size)"),g.pt(0),g.pr(0),g.pb(0),g.pl(0),g.mt(0),g.mr(0),g.mb(0),g.ml(0),S?"not-allowed":"pointer"]]])})),E.createElement("span",{className:P.dynamic([["4126727675",[g.font(.875),S?"not-allowed":"pointer",S?.75:1,g.width(1,"auto"),g.height(1,"var(--checkbox-size)"),g.pt(0),g.pr(0),g.pb(0),g.pl(0),g.mt(0),g.mr(0),g.mb(0),g.ml(0),S?"not-allowed":"pointer"]]])+" text"},a),E.createElement(P,{id:"4126727675",dynamic:[g.font(.875),S?"not-allowed":"pointer",S?.75:1,g.width(1,"auto"),g.height(1,"var(--checkbox-size)"),g.pt(0),g.pr(0),g.pb(0),g.pl(0),g.mt(0),g.mr(0),g.mb(0),g.ml(0),S?"not-allowed":"pointer"]},".checkbox.__jsx-style-dynamic-selector{--checkbox-size:".concat(g.font(.875),";display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:").concat(S?"not-allowed":"pointer",";opacity:").concat(S?.75:1,";line-height:var(--checkbox-size);width:").concat(g.width(1,"auto"),";height:").concat(g.height(1,"var(--checkbox-size)"),";padding:").concat(g.pt(0)," ").concat(g.pr(0)," ").concat(g.pb(0)," ").concat(g.pl(0),";margin:").concat(g.mt(0)," ").concat(g.mr(0)," ").concat(g.mb(0)," ").concat(g.ml(0),";}.text.__jsx-style-dynamic-selector{font-size:var(--checkbox-size);line-height:var(--checkbox-size);padding-left:calc(var(--checkbox-size) * 0.5);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:").concat(S?"not-allowed":"pointer",";}input.__jsx-style-dynamic-selector{opacity:0;outline:none;position:absolute;width:0;height:0;margin:0;padding:0;z-index:-1;font-size:0;background-color:transparent;}")))};k1.defaultProps=_te;k1.displayName="GeistCheckbox";var yte=Ve(k1);function vte(e){if(Array.isArray(e))return xv(e)}function xte(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bte(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zr(e){return vte(e)||xte(e)||P3(e)||bte()}var wte=["disabled","onChange","value","children","className"],Ete={disabled:!1,className:""},C1=function(t){var n=t.disabled,r=t.onChange,i=t.value,s=t.children,o=t.className,a=Re(t,wte),l=Ge(),c=l.SCALES,d=L.useState([]),u=Fe(d,2),h=u[0],g=u[1];i||(i=[],Di('Props "value" is required.',"Checkbox Group"));var p=function(y,_){var v=h.filter(function(b){return b!==y}),x=_?[].concat(Zr(v),[y]):v;g(x),r&&r(x)},m=L.useMemo(function(){return{updateState:p,disabledAll:n,inGroup:!0,values:h}},[n,h]);return L.useEffect(function(){g(i)},[i.join(",")]),E.createElement(mD.Provider,{value:m},E.createElement("div",ve({},Ue(a),{className:P.dynamic([["1727163828",[c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0),c.ml(0),c.font(1),c.font(1)]]])+" "+"group ".concat(o)}),s,E.createElement(P,{id:"1727163828",dynamic:[c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0),c.ml(0),c.font(1),c.font(1)]},".group.__jsx-style-dynamic-selector{width:".concat(c.width(1,"auto"),";height:").concat(c.height(1,"auto"),";padding:").concat(c.pt(0)," ").concat(c.pr(0)," ").concat(c.pb(0)," ").concat(c.pl(0),";margin:").concat(c.mt(0)," ").concat(c.mr(0)," ").concat(c.mb(0)," ").concat(c.ml(0),";}.group.__jsx-style-dynamic-selector label{margin-right:calc(").concat(c.font(1)," * 2);--checkbox-size:").concat(c.font(1),";}.group.__jsx-style-dynamic-selector label:last-of-type{margin-right:0;}"))))};C1.defaultProps=Ete;C1.displayName="GeistCheckboxGroup";var Ste=Ve(C1);yte.Group=Ste;var Ate=["children","block","className"],kte={block:!1,className:""},T1=function(t){var n=t.children,r=t.block,i=t.className,s=Re(t,Ate),o=Ge(),a=o.SCALES,l=Ue(s);return r?E.createElement(E.Fragment,null,E.createElement("pre",ve({},l,{className:P.dynamic([["1286851807",[a.font(.875),a.width(1,"initial"),a.height(1,"auto"),a.pt(1),a.pr(1.3),a.pb(1),a.pl(1.3),a.mt(1.3),a.mr(0),a.mb(1.3),a.ml(0)]]])+" "+(l&&l.className!=null&&l.className||i||"")}),E.createElement("code",{className:P.dynamic([["1286851807",[a.font(.875),a.width(1,"initial"),a.height(1,"auto"),a.pt(1),a.pr(1.3),a.pb(1),a.pl(1.3),a.mt(1.3),a.mr(0),a.mb(1.3),a.ml(0)]]])},n)),E.createElement(P,{id:"1286851807",dynamic:[a.font(.875),a.width(1,"initial"),a.height(1,"auto"),a.pt(1),a.pr(1.3),a.pb(1),a.pl(1.3),a.mt(1.3),a.mr(0),a.mb(1.3),a.ml(0)]},"pre.__jsx-style-dynamic-selector{max-width:100%;font-size:".concat(a.font(.875),";width:").concat(a.width(1,"initial"),";height:").concat(a.height(1,"auto"),";padding:").concat(a.pt(1)," ").concat(a.pr(1.3)," ").concat(a.pb(1)," ").concat(a.pl(1.3),";margin:").concat(a.mt(1.3)," ").concat(a.mr(0)," ").concat(a.mb(1.3)," ").concat(a.ml(0),";}.dark.__jsx-style-dynamic-selector{color:white;background:black;}.dark.__jsx-style-dynamic-selector code.__jsx-style-dynamic-selector{color:white;}"))):E.createElement("code",l,n)};T1.defaultProps=kte;T1.displayName="GeistCode";Ve(T1);var Cte=function(t){var n=t.active;return E.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",style:{color:"currentColor"},className:P.dynamic([["2249786880",[n?"-180deg":"0"]]])},E.createElement("path",{d:"M6 9l6 6 6-6",className:P.dynamic([["2249786880",[n?"-180deg":"0"]]])}),E.createElement(P,{id:"2249786880",dynamic:[n?"-180deg":"0"]},"svg.__jsx-style-dynamic-selector{-webkit-transition:-webkit-transform 200ms ease;-webkit-transition:transform 200ms ease;transition:transform 200ms ease;-webkit-transform:rotateZ(".concat(n?"-180deg":"0",");-ms-transform:rotateZ(").concat(n?"-180deg":"0",");transform:rotateZ(").concat(n?"-180deg":"0",");width:1.5em;height:1.5em;}")))},Tte=E.memo(Cte),Nte=function(t){var n={width:0,height:0};if(!t||typeof window>"u")return n;var r=t.getBoundingClientRect(),i=window.getComputedStyle(t),s=i.width,o=i.height,a=function(c,d){if(!c)return 0;var u=c.includes("px")?+c.split("px")[0]:c.includes("%")?+c.split("%")[0]*d*.01:c;return Number.isNaN(+u)?0:+u};return{width:a("".concat(s),r.width),height:a("".concat(o),r.height)}},_D=function(t){var n=L.useState({width:0,height:0}),r=Fe(n,2),i=r[0],s=r[1],o=function(){var l=Nte(t.current),c=l.width,d=l.height;s({width:c,height:d})};return L.useEffect(function(){return o()},[t.current]),[i,o]},Lte={isExpanded:!1,delay:200},Jm=function(t){var n=t.isExpanded,r=t.delay,i=t.children,s=L.useState(n?"auto":"0"),o=Fe(s,2),a=o[0],l=o[1],c=L.useState(n),d=Fe(c,2),u=d[0],h=d[1],g=L.useState(n),p=Fe(g,2),m=p[0],f=p[1],y=L.useRef(null),_=L.useRef(),v=L.useRef(),x=L.useRef(),b=_D(y),w=Fe(b,2),S=w[0],A=w[1];return L.useEffect(function(){return l("".concat(S.height,"px"))},[S.height]),L.useEffect(function(){return n?f(n):(A(),l("".concat(S.height,"px"))),_.current=window.setTimeout(function(){h(n),clearTimeout(_.current)},30),n?x.current=window.setTimeout(function(){l("auto"),clearTimeout(x.current)},r):v.current=window.setTimeout(function(){f(n),clearTimeout(v.current)},r/2),function(){clearTimeout(_.current),clearTimeout(v.current),clearTimeout(x.current)}},[n]),E.createElement("div",{className:P.dynamic([["1918690829",[m?"visible":"hidden",r,a]]])+" "+"container ".concat(u?"expanded":"")},E.createElement("div",{ref:y,className:P.dynamic([["1918690829",[m?"visible":"hidden",r,a]]])+" content"},i),E.createElement(P,{id:"1918690829",dynamic:[m?"visible":"hidden",r,a]},".container.__jsx-style-dynamic-selector{padding:0;margin:0;height:0;overflow:hidden;visibility:".concat(m?"visible":"hidden",";-webkit-transition:height ").concat(r,"ms ease;transition:height ").concat(r,"ms ease;}.expanded.__jsx-style-dynamic-selector{height:").concat(a,";visibility:visible;}")))};Jm.defaultProps=Lte;Jm.displayName="GeistExpand";var Ite={values:[]},yD=E.createContext(Ite),Pte=function(){return E.useContext(yD)},Mte=["children","title","subtitle","initialVisible","shadow","className","index"],Fte={className:"",shadow:!1,initialVisible:!1},N1=function(t){var n=t.children,r=t.title,i=t.subtitle,s=t.initialVisible,o=t.shadow,a=t.className,l=t.index,c=Re(t,Mte),d=ze(),u=Ge(),h=u.SCALES,g=Pte(),p=g.values,m=g.updateValues,f=vi(s),y=Fe(f,3),_=y[0],v=y[1],x=y[2];r||Di('"title" is required.',"Collapse"),L.useEffect(function(){if(p.length){var w=!!p.find(function(S){return S===l});v(w)}},[p.join(",")]);var b=function(){var S=!x.current;v(S),m&&m(l,S)};return E.createElement("div",ve({},Ue(c),{className:P.dynamic([["3106940587",[d.palette.border,d.palette.border,h.font(1),h.width(1,"auto"),h.height(1,"auto"),h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),d.expressiveness.shadowSmall,d.layout.radius,d.layout.gap,d.palette.foreground,d.palette.accents_5,h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0)]]])+" "+"collapse ".concat(o?"shadow":""," ").concat(a)}),E.createElement("div",{role:"button",onClick:b,className:P.dynamic([["3106940587",[d.palette.border,d.palette.border,h.font(1),h.width(1,"auto"),h.height(1,"auto"),h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),d.expressiveness.shadowSmall,d.layout.radius,d.layout.gap,d.palette.foreground,d.palette.accents_5,h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0)]]])+" view"},E.createElement("div",{className:P.dynamic([["3106940587",[d.palette.border,d.palette.border,h.font(1),h.width(1,"auto"),h.height(1,"auto"),h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),d.expressiveness.shadowSmall,d.layout.radius,d.layout.gap,d.palette.foreground,d.palette.accents_5,h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0)]]])+" title"},E.createElement("h3",{className:P.dynamic([["3106940587",[d.palette.border,d.palette.border,h.font(1),h.width(1,"auto"),h.height(1,"auto"),h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),d.expressiveness.shadowSmall,d.layout.radius,d.layout.gap,d.palette.foreground,d.palette.accents_5,h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0)]]])},r)," ",E.createElement(Tte,{active:_})),i&&E.createElement("div",{className:P.dynamic([["3106940587",[d.palette.border,d.palette.border,h.font(1),h.width(1,"auto"),h.height(1,"auto"),h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),d.expressiveness.shadowSmall,d.layout.radius,d.layout.gap,d.palette.foreground,d.palette.accents_5,h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0)]]])+" subtitle"},i)),E.createElement(Jm,{isExpanded:_},E.createElement("div",{className:P.dynamic([["3106940587",[d.palette.border,d.palette.border,h.font(1),h.width(1,"auto"),h.height(1,"auto"),h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),d.expressiveness.shadowSmall,d.layout.radius,d.layout.gap,d.palette.foreground,d.palette.accents_5,h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0)]]])+" content"},n)),E.createElement(P,{id:"3106940587",dynamic:[d.palette.border,d.palette.border,h.font(1),h.width(1,"auto"),h.height(1,"auto"),h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),d.expressiveness.shadowSmall,d.layout.radius,d.layout.gap,d.palette.foreground,d.palette.accents_5,h.pt(1.2),h.pr(0),h.pb(1.2),h.pl(0)]},".collapse.__jsx-style-dynamic-selector{border-top:1px solid ".concat(d.palette.border,";border-bottom:1px solid ").concat(d.palette.border,";font-size:").concat(h.font(1),";width:").concat(h.width(1,"auto"),";height:").concat(h.height(1,"auto"),";padding:").concat(h.pt(1.2)," ").concat(h.pr(0)," ").concat(h.pb(1.2)," ").concat(h.pl(0),";margin:").concat(h.mt(0)," ").concat(h.mr(0)," ").concat(h.mb(0)," ").concat(h.ml(0),";}.shadow.__jsx-style-dynamic-selector{box-shadow:").concat(d.expressiveness.shadowSmall,";border:none;border-radius:").concat(d.layout.radius,";padding:").concat(d.layout.gap,";}.view.__jsx-style-dynamic-selector{cursor:pointer;outline:none;}.title.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:").concat(d.palette.foreground,";}.title.__jsx-style-dynamic-selector h3.__jsx-style-dynamic-selector{margin:0;font-size:1.5em;}.subtitle.__jsx-style-dynamic-selector{color:").concat(d.palette.accents_5,";margin:0;}.subtitle.__jsx-style-dynamic-selector>*{margin:0;}.content.__jsx-style-dynamic-selector{font-size:inherit;line-height:1.6em;padding:").concat(h.pt(1.2)," ").concat(h.pr(0)," ").concat(h.pb(1.2)," ").concat(h.pl(0),";}.content.__jsx-style-dynamic-selector>*:first-child{margin-top:0;}.content.__jsx-style-dynamic-selector>*:last-child{margin-bottom:0;}")))};N1.defaultProps=Fte;N1.displayName="GeistCollapse";var vD=Ve(N1),Rte=["children","accordion","className"],Dte={accordion:!0,className:""},L1=function(t){var n=t.children,r=t.accordion,i=t.className,s=Re(t,Rte),o=Ge(),a=o.SCALES,l=vi([]),c=Fe(l,3),d=c[0],u=c[1],h=c[2],g=function(y,_){var v=h.current.find(function(x){return x===y});if(r)return u(_?[y]:[]);if(_)return v?void 0:u([].concat(Zr(h.current),[y]));u(h.current.filter(function(x){return x!==y}))},p=L.useMemo(function(){return{values:d,updateValues:g}},[d.join(",")]),m=L.useMemo(function(){return fK(n,[vD])},[n]);return E.createElement(yD.Provider,{value:p},E.createElement("div",ve({},Ue(s),{className:P.dynamic([["2415399140",[a.width(1,"auto"),a.height(1,"auto"),a.pt(0),a.pr(.6),a.pb(0),a.pl(.6),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]]])+" "+"collapse-group ".concat(i)}),m,E.createElement(P,{id:"2415399140",dynamic:[a.width(1,"auto"),a.height(1,"auto"),a.pt(0),a.pr(.6),a.pb(0),a.pl(.6),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]},".collapse-group.__jsx-style-dynamic-selector{width:".concat(a.width(1,"auto"),";height:").concat(a.height(1,"auto"),";padding:").concat(a.pt(0)," ").concat(a.pr(.6)," ").concat(a.pb(0)," ").concat(a.pl(.6),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0),";}.collapse-group.__jsx-style-dynamic-selector>div + div{border-top:none;}"))))};L1.defaultProps=Dte;L1.displayName="GeistCollapseGroup";var zte=Ve(L1);vD.Group=zte;var Ote=["title","content","className"],Bte={title:"Title",content:"",className:""},I1=function(t){var n=t.title,r=t.content,i=t.className,s=Re(t,Ote),o=ze(),a=Ge(),l=a.SCALES;return E.createElement("dl",ve({},Ue(s),{className:P.dynamic([["2323318745",[l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.mt(0),l.mr(0),l.mb(0),l.ml(0),o.palette.accents_5,o.palette.foreground]]])+" "+"description ".concat(i)}),E.createElement("dt",{className:P.dynamic([["2323318745",[l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.mt(0),l.mr(0),l.mb(0),l.ml(0),o.palette.accents_5,o.palette.foreground]]])},n),E.createElement("dd",{className:P.dynamic([["2323318745",[l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.mt(0),l.mr(0),l.mb(0),l.ml(0),o.palette.accents_5,o.palette.foreground]]])},r),E.createElement(P,{id:"2323318745",dynamic:[l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.mt(0),l.mr(0),l.mb(0),l.ml(0),o.palette.accents_5,o.palette.foreground]},".description.__jsx-style-dynamic-selector{font-size:".concat(l.font(1),";width:").concat(l.width(1,"auto"),";height:").concat(l.height(1,"auto"),";padding:").concat(l.pt(0)," ").concat(l.pr(0)," ").concat(l.pb(0)," ").concat(l.pl(0),";margin:").concat(l.mt(0)," ").concat(l.mr(0)," ").concat(l.mb(0)," ").concat(l.ml(0),";}dt.__jsx-style-dynamic-selector{font-size:0.75em;line-height:1em;margin-bottom:0.5em;text-transform:uppercase;white-space:nowrap;color:").concat(o.palette.accents_5,";font-weight:500;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}dd.__jsx-style-dynamic-selector{font-size:0.875em;margin:0;line-height:1.1em;color:").concat(o.palette.foreground,";font-weight:500;}dd.__jsx-style-dynamic-selector p,dt.__jsx-style-dynamic-selector p{margin:0;}")))};I1.defaultProps=Bte;I1.displayName="GeistDescription";Ve(I1);var jte=["children","caption","shadow","className"],Ute={caption:"",shadow:!1,className:""},P1=function(t){var n=t.children,r=t.caption,i=t.shadow,s=t.className,o=Re(t,jte),a=ze(),l=Ge(),c=l.SCALES,d=L.useMemo(function(){return i&&a.type!=="dark"},[a.type,i]);return E.createElement("div",ve({},Ue(o),{className:P.dynamic([["2213400331",[c.font(.875),c.width(1,"100%"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(2.5),c.mr(0,"auto"),c.mb(2.5),c.ml(0,"auto"),c.width(1,"max-content"),d?a.expressiveness.shadowLarge:"none",a.palette.accents_5,i?"2.5em":"1.3em"]]])+" "+"display ".concat(s)}),E.createElement("div",{className:P.dynamic([["2213400331",[c.font(.875),c.width(1,"100%"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(2.5),c.mr(0,"auto"),c.mb(2.5),c.ml(0,"auto"),c.width(1,"max-content"),d?a.expressiveness.shadowLarge:"none",a.palette.accents_5,i?"2.5em":"1.3em"]]])+" content"},n),E.createElement("div",{className:P.dynamic([["2213400331",[c.font(.875),c.width(1,"100%"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(2.5),c.mr(0,"auto"),c.mb(2.5),c.ml(0,"auto"),c.width(1,"max-content"),d?a.expressiveness.shadowLarge:"none",a.palette.accents_5,i?"2.5em":"1.3em"]]])+" caption"},r),E.createElement(P,{id:"2213400331",dynamic:[c.font(.875),c.width(1,"100%"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(2.5),c.mr(0,"auto"),c.mb(2.5),c.ml(0,"auto"),c.width(1,"max-content"),d?a.expressiveness.shadowLarge:"none",a.palette.accents_5,i?"2.5em":"1.3em"]},".display.__jsx-style-dynamic-selector{display:block;max-width:100%;font-size:".concat(c.font(.875),";width:").concat(c.width(1,"100%"),";height:").concat(c.height(1,"auto"),";padding:").concat(c.pt(0)," ").concat(c.pr(0)," ").concat(c.pb(0)," ").concat(c.pl(0),";margin:").concat(c.mt(2.5)," ").concat(c.mr(0,"auto")," ").concat(c.mb(2.5)," ").concat(c.ml(0,"auto"),";}.content.__jsx-style-dynamic-selector{display:block;margin:0 auto;border-radius:4px;overflow:hidden;width:").concat(c.width(1,"max-content"),";box-shadow:").concat(d?a.expressiveness.shadowLarge:"none",";max-width:100%;}.content.__jsx-style-dynamic-selector pre{margin:0;-webkit-transition:min-width ease 0.2s;transition:min-width ease 0.2s;}.content.__jsx-style-dynamic-selector img{display:block;}.caption.__jsx-style-dynamic-selector{font-size:inherit;line-height:1.5em;color:").concat(a.palette.accents_5,";margin:").concat(i?"2.5em":"1.3em"," auto 0;text-align:center;max-width:85%;}")))};P1.defaultProps=Ute;P1.displayName="GeistDisplay";Ve(P1);var $te=["type","align","children","className"],Gte={align:"center",type:"default",className:""},Vte=function(t,n){var r={default:n.border,lite:n.accents_1,success:n.successLight,warning:n.warningLight,error:n.errorLight,secondary:n.secondary,dark:n.foreground};return r[t]},M1=function(t){var n=t.type,r=t.align,i=t.children,s=t.className,o=Re(t,$te),a=ze(),l=Ge(),c=l.SCALES,d=L.useMemo(function(){return Vte(n,a.palette)},[n,a.palette]),u=L.useMemo(function(){return!r||r==="center"?"":r==="left"||r==="start"?"start":"end"},[r]),h=n==="default"?a.palette.foreground:d;return E.createElement("div",ve({role:"separator"},Ue(o),{className:P.dynamic([["3410666717",[d,c.font(1),c.width(1,"auto"),c.height(.0625),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(.5),c.mr(0),c.mb(.5),c.ml(0),a.palette.background,h]]])+" "+"divider ".concat(s)}),i&&E.createElement("span",{className:P.dynamic([["3410666717",[d,c.font(1),c.width(1,"auto"),c.height(.0625),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(.5),c.mr(0),c.mb(.5),c.ml(0),a.palette.background,h]]])+" "+"text ".concat(u)},i),E.createElement(P,{id:"3410666717",dynamic:[d,c.font(1),c.width(1,"auto"),c.height(.0625),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(.5),c.mr(0),c.mb(.5),c.ml(0),a.palette.background,h]},".divider.__jsx-style-dynamic-selector{max-width:100%;background-color:".concat(d,";position:relative;font-size:").concat(c.font(1),";width:").concat(c.width(1,"auto"),";height:").concat(c.height(.0625),";padding:").concat(c.pt(0)," ").concat(c.pr(0)," ").concat(c.pb(0)," ").concat(c.pl(0),";margin:").concat(c.mt(.5)," ").concat(c.mr(0)," ").concat(c.mb(.5)," ").concat(c.ml(0),";}.text.__jsx-style-dynamic-selector{position:absolute;left:50%;top:50%;min-height:100%;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);padding:0 0.75em;font-size:inherit;font-weight:bold;text-transform:capitalize;background-color:").concat(a.palette.background,";color:").concat(h,";z-index:10;}.text.start.__jsx-style-dynamic-selector{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);left:7%;}.text.end.__jsx-style-dynamic-selector{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);left:auto;right:7%;}")))};M1.defaultProps=Gte;M1.displayName="GeistDivider";Ve(M1);var Hte=["type","children","className"],Wte={type:"default",className:""},Xte=function(t,n){var r={default:n.palette.accents_2,success:n.palette.success,warning:n.palette.warning,error:n.palette.error};return r[t]||r.default},F1=function(t){var n=t.type,r=t.children,i=t.className,s=Re(t,Hte),o=ze(),a=Ge(),l=a.SCALES,c=L.useMemo(function(){return Xte(n,o)},[n,o]);return E.createElement("span",ve({},Ue(s),{className:P.dynamic([["4266900845",[l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.mt(0),l.mr(0),l.mb(0),l.ml(0),c]]])+" "+"dot ".concat(i)}),E.createElement("span",{className:P.dynamic([["4266900845",[l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.mt(0),l.mr(0),l.mb(0),l.ml(0),c]]])+" icon"}),E.createElement("span",{className:P.dynamic([["4266900845",[l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.mt(0),l.mr(0),l.mb(0),l.ml(0),c]]])+" label"},r),E.createElement(P,{id:"4266900845",dynamic:[l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(0),l.pr(0),l.pb(0),l.pl(0),l.mt(0),l.mr(0),l.mb(0),l.ml(0),c]},".dot.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:".concat(l.font(1),";width:").concat(l.width(1,"auto"),";height:").concat(l.height(1,"auto"),";padding:").concat(l.pt(0)," ").concat(l.pr(0)," ").concat(l.pb(0)," ").concat(l.pl(0),";margin:").concat(l.mt(0)," ").concat(l.mr(0)," ").concat(l.mb(0)," ").concat(l.ml(0),";}.icon.__jsx-style-dynamic-selector{width:0.625em;height:0.625em;min-width:calc(0.625 * 12px);min-height:calc(0.625 * 12px);line-height:0.625em;border-radius:50%;background-color:").concat(c,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.label.__jsx-style-dynamic-selector{margin-left:0.5em;font-size:1em;line-height:1em;text-transform:capitalize;}")))};F1.defaultProps=Wte;F1.displayName="GeistDot";Ve(F1);var Yte={scrollLayer:!1},Sc=new Map,qte=function(){return typeof window>"u"||!window.navigator?!1:/iP(ad|hone|od)/.test(window.navigator.platform)},BC=function(t){return t.touches&&t.touches.length>1?!0:(t.preventDefault(),!1)},xD=function(t,n){if(typeof document>"u")return[!1,function(d){return d}];var r=L.useRef(document.body),i=L.useState(!1),s=Fe(i,2),o=s[0],a=s[1],l=ve({},Yte,n||{}),c=function(){return l.scrollLayer?!1:qte()};return L.useEffect(function(){if(!(!r||!r.current)){var d=r.current.style.overflow;if(o){if(Sc.has(r.current))return;c()?document.addEventListener("touchmove",BC,{passive:!1}):r.current.style.overflow="hidden",Sc.set(r.current,{last:d});return}if(Sc.has(r.current)){if(c())document.removeEventListener("touchmove",BC);else{var u=Sc.get(r.current);r.current.style.overflow=u.last}Sc.delete(r.current)}}},[o,r]),[o,a]},Wp;(function(e){e[e.Unknown=0]="Unknown",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Shift=16]="Shift",e[e.Ctrl=17]="Ctrl",e[e.Alt=18]="Alt",e[e.PauseBreak=19]="PauseBreak",e[e.CapsLock=20]="CapsLock",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.LeftArrow=37]="LeftArrow",e[e.UpArrow=38]="UpArrow",e[e.RightArrow=39]="RightArrow",e[e.DownArrow=40]="DownArrow",e[e.Insert=45]="Insert",e[e.Delete=46]="Delete",e[e.KEY_0=48]="KEY_0",e[e.KEY_1=49]="KEY_1",e[e.KEY_2=50]="KEY_2",e[e.KEY_3=51]="KEY_3",e[e.KEY_4=52]="KEY_4",e[e.KEY_5=53]="KEY_5",e[e.KEY_6=54]="KEY_6",e[e.KEY_7=55]="KEY_7",e[e.KEY_8=56]="KEY_8",e[e.KEY_9=57]="KEY_9",e[e.KEY_A=65]="KEY_A",e[e.KEY_B=66]="KEY_B",e[e.KEY_C=67]="KEY_C",e[e.KEY_D=68]="KEY_D",e[e.KEY_E=69]="KEY_E",e[e.KEY_F=70]="KEY_F",e[e.KEY_G=71]="KEY_G",e[e.KEY_H=72]="KEY_H",e[e.KEY_I=73]="KEY_I",e[e.KEY_J=74]="KEY_J",e[e.KEY_K=75]="KEY_K",e[e.KEY_L=76]="KEY_L",e[e.KEY_M=77]="KEY_M",e[e.KEY_N=78]="KEY_N",e[e.KEY_O=79]="KEY_O",e[e.KEY_P=80]="KEY_P",e[e.KEY_Q=81]="KEY_Q",e[e.KEY_R=82]="KEY_R",e[e.KEY_S=83]="KEY_S",e[e.KEY_T=84]="KEY_T",e[e.KEY_U=85]="KEY_U",e[e.KEY_V=86]="KEY_V",e[e.KEY_W=87]="KEY_W",e[e.KEY_X=88]="KEY_X",e[e.KEY_Y=89]="KEY_Y",e[e.KEY_Z=90]="KEY_Z",e[e.Meta=91]="Meta",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NumLock=144]="NumLock",e[e.ScrollLock=145]="ScrollLock",e[e.Equal=187]="Equal",e[e.Minus=189]="Minus",e[e.Backquote=192]="Backquote",e[e.Backslash=220]="Backslash"})(Wp||(Wp={}));var ou;(function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl"})(ou||(ou={}));var Zte=function(){return{CtrlCmd:PC()?"metaKey":"ctrlKey",WinCtrl:PC()?"ctrlKey":"metaKey"}},Jte=function(t){var n=t.filter(function(i){return!!ou[i]}),r={CtrlCmd:!1,Shift:!1,Alt:!1,WinCtrl:!1};return n.forEach(function(i){var s=ou[i];r[s]=!0}),r},bD=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Array.isArray(n)?n:[n],s=r.disableGlobalEvent,o=s===void 0?!1:s,a=r.capture,l=a===void 0?!1:a,c=r.stopPropagation,d=c===void 0?!1:c,u=r.preventDefault,h=u===void 0?!0:u,g=r.event,p=g===void 0?"keydown":g,m=Jte(i),f=i.filter(function(w){return!ou[w]})[0],y=Zte(),_=y.CtrlCmd,v=y.WinCtrl,x=function(S){m.Shift&&!S.shiftKey||m.Alt&&!S.altKey||m.CtrlCmd&&!S[_]||m.WinCtrl&&!S[v]||f&&S.keyCode!==f||(d&&S.stopPropagation(),h&&S.preventDefault(),t&&t(S))};L.useEffect(function(){return o||document.addEventListener(p,x),function(){document.removeEventListener(p,x)}},[o]);var b=function(S){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return S!==p?function(){}:A!==l?function(){}:function(C){return x(C)}};return{bindings:{onKeyDown:b("keydown"),onKeyDownCapture:b("keydown",!0),onKeyPress:b("keypress"),onKeyPressCapture:b("keypress",!0),onKeyUp:b("keyup"),onKeyUpCapture:b("keyup",!0)}}},Qte=["children","onClick","visible","width","onContentClick"],Kte={onClick:function(){},visible:!1,onContentClick:function(){}},Qm=E.memo(function(e){var t=e.children,n=e.onClick,r=e.visible,i=e.width,s=e.onContentClick,o=Re(e,Qte),a=ze(),l=vi(!1),c=Fe(l,3),d=c[1],u=c[2],h=function(m){u.current||n&&n(m)},g=function(){if(u.current)var m=setTimeout(function(){d(!1),clearTimeout(m)},0)};return E.createElement(Ma,{name:"backdrop-wrapper",visible:r,clearTime:300},E.createElement("div",ve({onClick:h,onMouseUp:g},Ue(o),{className:P.dynamic([["2429486860",[i,a.expressiveness.portalOpacity,a.expressiveness.portalOpacity,a.expressiveness.portalOpacity]]])+" backdrop"}),E.createElement("div",{className:P.dynamic([["2429486860",[i,a.expressiveness.portalOpacity,a.expressiveness.portalOpacity,a.expressiveness.portalOpacity]]])+" layer"}),E.createElement("div",{onClick:s,onMouseDown:function(){return d(!0)},className:P.dynamic([["2429486860",[i,a.expressiveness.portalOpacity,a.expressiveness.portalOpacity,a.expressiveness.portalOpacity]]])+" content"},t),E.createElement(P,{id:"2429486860",dynamic:[i,a.expressiveness.portalOpacity,a.expressiveness.portalOpacity,a.expressiveness.portalOpacity]},".backdrop.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;right:0;bottom:0;overflow:auto;z-index:1000;-webkit-overflow-scrolling:touch;box-sizing:border-box;text-align:center;}.content.__jsx-style-dynamic-selector{position:relative;z-index:1001;outline:none;max-width:90%;width:".concat(i,";margin:20px auto;vertical-align:middle;display:inline-block;}.backdrop.__jsx-style-dynamic-selector:before{display:inline-block;width:0;height:100%;vertical-align:middle;content:'';}.layer.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%;opacity:").concat(a.expressiveness.portalOpacity,";background-color:black;-webkit-transition:opacity 0.35s cubic-bezier(0.4,0,0.2,1);transition:opacity 0.35s cubic-bezier(0.4,0,0.2,1);pointer-events:none;z-index:1000;}.backdrop-wrapper-enter.__jsx-style-dynamic-selector .layer.__jsx-style-dynamic-selector{opacity:0;}.backdrop-wrapper-enter-active.__jsx-style-dynamic-selector .layer.__jsx-style-dynamic-selector{opacity:").concat(a.expressiveness.portalOpacity,";}.backdrop-wrapper-leave.__jsx-style-dynamic-selector .layer.__jsx-style-dynamic-selector{opacity:").concat(a.expressiveness.portalOpacity,";}.backdrop-wrapper-leave-active.__jsx-style-dynamic-selector .layer.__jsx-style-dynamic-selector{opacity:0;}"))))});Qm.defaultProps=Kte;Qm.displayName="GeistBackdrop";dr("top","right","bottom","left");var ene=function(t){var n={top:{initial:"translate3d(0, -100%, 0)",hidden:"translate3d(0, -100%, 0)",visible:"translate3d(0, 0, 0)"},left:{initial:"translate3d(-100%, 0, 0)",hidden:"translate3d(-100%, 0, 0)",visible:"translate3d(0, 0, 0)"},bottom:{initial:"translate3d(0, 100%, 0)",hidden:"translate3d(0, 100%, 0)",visible:"translate3d(0, 0, 0)"},right:{initial:"translate3d(100%, 0, 0)",hidden:"translate3d(100%, 0, 0)",visible:"translate3d(0, 0, 0)"}};return n[t]},tne=["className","children","visible","placement"],nne={className:"",visible:!1},R1=function(t){var n=t.className,r=t.children,i=t.visible,s=t.placement,o=Re(t,tne),a=ze(),l=Ge(),c=l.SCALES,d=L.useRef(null),u=L.useRef(null),h=L.useRef(null),g=L.useMemo(function(){return ene(s)},[s]);L.useEffect(function(){if(i){var m=document.activeElement,f=X3(d.current,m);f||u.current&&u.current.focus()}},[i]);var p=function(f){var y=f.keyCode===9;if(!(!i||!y)){var _=document.activeElement;f.shiftKey?_===u.current&&h.current&&h.current.focus():_===h.current&&u.current&&u.current.focus()}};return E.createElement(Ma,{name:"wrapper",visible:i,clearTime:300},E.createElement("div",ve({role:"dialog",tabIndex:-1,onKeyDown:p,ref:d},Ue(o),{className:P.dynamic([["3022633861",[a.palette.background,a.palette.foreground,a.layout.radius,a.expressiveness.shadowLarge,g.initial,c.font(1),c.pl(1.3125),c.pr(1.3125),c.pt(1.3125),c.pb(1.3125),c.mt(0),c.mr(0),c.mb(0),c.ml(0),c.width(1,"100%"),c.height(1,"auto"),c.width(1,"auto"),c.height(1,"100%"),g.hidden,g.visible,g.visible,g.hidden]]])+" "+"wrapper ".concat(s," ").concat(n)}),E.createElement("div",{tabIndex:0,"aria-hidden":"true",ref:u,className:P.dynamic([["3022633861",[a.palette.background,a.palette.foreground,a.layout.radius,a.expressiveness.shadowLarge,g.initial,c.font(1),c.pl(1.3125),c.pr(1.3125),c.pt(1.3125),c.pb(1.3125),c.mt(0),c.mr(0),c.mb(0),c.ml(0),c.width(1,"100%"),c.height(1,"auto"),c.width(1,"auto"),c.height(1,"100%"),g.hidden,g.visible,g.visible,g.hidden]]])+" hide-tab start"}),r,E.createElement("div",{tabIndex:0,"aria-hidden":"true",ref:h,className:P.dynamic([["3022633861",[a.palette.background,a.palette.foreground,a.layout.radius,a.expressiveness.shadowLarge,g.initial,c.font(1),c.pl(1.3125),c.pr(1.3125),c.pt(1.3125),c.pb(1.3125),c.mt(0),c.mr(0),c.mb(0),c.ml(0),c.width(1,"100%"),c.height(1,"auto"),c.width(1,"auto"),c.height(1,"100%"),g.hidden,g.visible,g.visible,g.hidden]]])+" hide-tab end"}),E.createElement(P,{id:"3022633861",dynamic:[a.palette.background,a.palette.foreground,a.layout.radius,a.expressiveness.shadowLarge,g.initial,c.font(1),c.pl(1.3125),c.pr(1.3125),c.pt(1.3125),c.pb(1.3125),c.mt(0),c.mr(0),c.mb(0),c.ml(0),c.width(1,"100%"),c.height(1,"auto"),c.width(1,"auto"),c.height(1,"100%"),g.hidden,g.visible,g.visible,g.hidden]},".wrapper.__jsx-style-dynamic-selector{position:fixed;top:0;left:0;right:0;bottom:0;max-width:100%;vertical-align:middle;overflow:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;box-sizing:border-box;background-color:".concat(a.palette.background,";color:").concat(a.palette.foreground,";border-radius:calc(3 * ").concat(a.layout.radius,");box-shadow:").concat(a.expressiveness.shadowLarge,";opacity:0;outline:none;-webkit-transform:").concat(g.initial,";-ms-transform:").concat(g.initial,";transform:").concat(g.initial,";-webkit-transition:opacity,-webkit-transform 400ms cubic-bezier(0.1,0.6,0.1,1);-webkit-transition:opacity,transform 400ms cubic-bezier(0.1,0.6,0.1,1);transition:opacity,transform 400ms cubic-bezier(0.1,0.6,0.1,1);font-size:").concat(c.font(1),";--modal-wrapper-padding-left:").concat(c.pl(1.3125),";--modal-wrapper-padding-right:").concat(c.pr(1.3125),";padding:").concat(c.pt(1.3125)," var(--modal-wrapper-padding-right) ").concat(c.pb(1.3125)," var(--modal-wrapper-padding-left);margin:").concat(c.mt(0)," ").concat(c.mr(0)," ").concat(c.mb(0)," ").concat(c.ml(0),";}.top.__jsx-style-dynamic-selector,.bottom.__jsx-style-dynamic-selector{width:").concat(c.width(1,"100%"),";height:").concat(c.height(1,"auto"),";}.left.__jsx-style-dynamic-selector,.right.__jsx-style-dynamic-selector{width:").concat(c.width(1,"auto"),";height:").concat(c.height(1,"100%"),";}.top.__jsx-style-dynamic-selector{bottom:auto;border-top-left-radius:0;border-top-right-radius:0;}.left.__jsx-style-dynamic-selector{right:auto;border-top-left-radius:0;border-bottom-left-radius:0;}.bottom.__jsx-style-dynamic-selector{top:auto;border-bottom-left-radius:0;border-bottom-right-radius:0;}.right.__jsx-style-dynamic-selector{left:auto;border-top-right-radius:0;border-bottom-right-radius:0;}.wrapper-enter.__jsx-style-dynamic-selector{opacity:0;-webkit-transform:").concat(g.hidden,";-ms-transform:").concat(g.hidden,";transform:").concat(g.hidden,";}.wrapper-enter-active.__jsx-style-dynamic-selector{opacity:1;-webkit-transform:").concat(g.visible,";-ms-transform:").concat(g.visible,";transform:").concat(g.visible,";}.wrapper-leave.__jsx-style-dynamic-selector{opacity:1;-webkit-transform:").concat(g.visible,";-ms-transform:").concat(g.visible,";transform:").concat(g.visible,";-webkit-transition:opacity,-webkit-transform 400ms cubic-bezier(0.1,0.2,0.1,1);-webkit-transition:opacity,transform 400ms cubic-bezier(0.1,0.2,0.1,1);transition:opacity,transform 400ms cubic-bezier(0.1,0.2,0.1,1);}.wrapper-leave-active.__jsx-style-dynamic-selector{opacity:0.4;-webkit-transform:").concat(g.hidden,";-ms-transform:").concat(g.hidden,";transform:").concat(g.hidden,";}.hide-tab.__jsx-style-dynamic-selector{outline:none;overflow:hidden;width:0;height:0;opacity:0;}"))))};R1.defaultProps=nne;R1.displayName="GeistDrawerWrapper";var rne=["visible","keyboard","disableBackdropClick","onClose","onContentClick","wrapClassName","children"],ine={wrapClassName:"",keyboard:!0,disableBackdropClick:!1,placement:"right"},D1=function(t){var n=t.visible,r=t.keyboard,i=t.disableBackdropClick,s=t.onClose,o=t.onContentClick,a=t.wrapClassName,l=t.children,c=Re(t,rne),d=ku("drawer"),u=L.useState(!1),h=Fe(u,2),g=h[0],p=h[1],m=xD(null,{scrollLayer:!0}),f=Fe(m,2),y=f[1],_=function(){s&&s(),p(!1),y(!1)};L.useEffect(function(){typeof n>"u"||(p(n),y(n))},[n]);var v=bD(function(){r&&_()},Wp.Escape,{disableGlobalEvent:!0}),x=v.bindings,b=function(){i||_()};return d?To.createPortal(E.createElement(Qm,ve({onClick:b,onContentClick:o,visible:g,width:"100%"},x),E.createElement(R1,ve({visible:g,className:a},Ue(c)),l)),d):null};D1.defaultProps=ine;D1.displayName="GeistDrawer";var z1=Ve(D1),sne=["className","children"],one={className:""},O1=function(t){var n=t.className,r=t.children,i=Re(t,sne),s=ze(),o=Ge(),a=o.SCALES;return E.createElement(E.Fragment,null,E.createElement("h2",ve({},Ue(i),{className:P.dynamic([["2865939188",[a.font(1.5),s.palette.foreground,a.width(1,"auto"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]]])+" "+(n||"")}),r),E.createElement(P,{id:"2865939188",dynamic:[a.font(1.5),s.palette.foreground,a.width(1,"auto"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]},"h2.__jsx-style-dynamic-selector{line-height:1.6;font-weight:normal;text-align:center;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;word-break:break-word;text-transform:capitalize;font-size:".concat(a.font(1.5),";color:").concat(s.palette.foreground,";width:").concat(a.width(1,"auto"),";height:").concat(a.height(1,"auto"),";padding:").concat(a.pt(0)," ").concat(a.pr(0)," ").concat(a.pb(0)," ").concat(a.pl(0),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0),";}")))};O1.defaultProps=one;O1.displayName="GeistModalTitle";var wD=Ve(O1),ane=["className","children"],lne={className:""},B1=function(t){var n=t.className,r=t.children,i=Re(t,ane),s=ze(),o=Ge(),a=o.SCALES;return E.createElement(E.Fragment,null,E.createElement("p",ve({},Ue(i),{className:P.dynamic([["2550488204",[s.palette.accents_5,a.font(.875),a.width(1,"auto"),a.height(1,"1.5em"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]]])+" "+(n||"")}),r),E.createElement(P,{id:"2550488204",dynamic:[s.palette.accents_5,a.font(.875),a.width(1,"auto"),a.height(1,"1.5em"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]},"p.__jsx-style-dynamic-selector{font-weight:normal;display:inline-block;text-align:center;word-break:break-word;text-transform:uppercase;color:".concat(s.palette.accents_5,";font-size:").concat(a.font(.875),";line-height:1.5em;width:").concat(a.width(1,"auto"),";height:").concat(a.height(1,"1.5em"),";padding:").concat(a.pt(0)," ").concat(a.pr(0)," ").concat(a.pb(0)," ").concat(a.pl(0),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0),";}")))};B1.defaultProps=lne;B1.displayName="GeistModalSubtitle";var ED=Ve(B1),cne=["className","children"],dne={className:""},j1=function(t){var n=t.className,r=t.children,i=Re(t,cne),s=Ge(),o=s.SCALES;return E.createElement(E.Fragment,null,E.createElement("div",ve({},Ue(i),{className:P.dynamic([["498745028",[o.font(1),o.width(1,"auto"),o.height(1,"auto"),o.pt(1.3125),o.pr(1.3125),o.pb(.6625),o.pl(1.3125),o.mt(0),o.mr(0,"calc(var(--modal-wrapper-padding-right) * -1)"),o.mb(0),o.ml(0,"calc(var(--modal-wrapper-padding-left) * -1)")]]])+" "+"content ".concat(n)}),r),E.createElement(P,{id:"498745028",dynamic:[o.font(1),o.width(1,"auto"),o.height(1,"auto"),o.pt(1.3125),o.pr(1.3125),o.pb(.6625),o.pl(1.3125),o.mt(0),o.mr(0,"calc(var(--modal-wrapper-padding-right) * -1)"),o.mb(0),o.ml(0,"calc(var(--modal-wrapper-padding-left) * -1)")]},".content.__jsx-style-dynamic-selector{position:relative;text-align:left;font-size:".concat(o.font(1),";width:").concat(o.width(1,"auto"),";height:").concat(o.height(1,"auto"),";padding:").concat(o.pt(1.3125)," ").concat(o.pr(1.3125)," ").concat(o.pb(.6625)," ").concat(o.pl(1.3125),";margin:").concat(o.mt(0)," ").concat(o.mr(0,"calc(var(--modal-wrapper-padding-right) * -1)")," ").concat(o.mb(0)," ").concat(o.ml(0,"calc(var(--modal-wrapper-padding-left) * -1)"),";}.content.__jsx-style-dynamic-selector>*:first-child{margin-top:0;}.content.__jsx-style-dynamic-selector>*:last-child{margin-bottom:0;}")))};j1.defaultProps=dne;j1.displayName="GeistModalContent";var SD=Ve(j1);z1.Title=wD;z1.Subtitle=ED;z1.Content=SD;var une=["className","children"],hne={className:""},au=function(t){var n=t.className,r=t.children,i=Re(t,une);return E.createElement(E.Fragment,null,E.createElement("div",ve({},Ue(i),{className:"jsx-4105044205 "+"title ".concat(n)}),r),E.createElement(P,{id:"4105044205"},".title.jsx-4105044205{line-height:1.5;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;word-break:break-word;font-weight:600;-webkit-letter-spacing:-0.020625em;-moz-letter-spacing:-0.020625em;-ms-letter-spacing:-0.020625em;letter-spacing:-0.020625em;font-size:1.25em;width:auto;}"))};au.defaultProps=hne;au.displayName="GeistFieldsetTitle";var gne=["className","children"],pne={className:""},lu=function(t){var n=t.className,r=t.children,i=Re(t,gne);return E.createElement(E.Fragment,null,E.createElement("div",ve({},Ue(i),{className:"jsx-2265168013 "+(n||"")}),r),E.createElement(P,{id:"2265168013"},"div.jsx-2265168013{font-size:0.875em;line-height:1.6;-webkit-letter-spacing:-0.005625em;-moz-letter-spacing:-0.005625em;-ms-letter-spacing:-0.005625em;letter-spacing:-0.005625em;margin:0.75em 0;}"))};lu.defaultProps=pne;lu.displayName="GeistFieldsetSubtitle";var mne=["className","children"],fne={className:""},U1=function(t){var n=t.className,r=t.children,i=Re(t,mne),s=ze(),o=Ge(),a=o.SCALES;return E.createElement("footer",ve({},Ue(i),{className:P.dynamic([["903731644",[s.palette.accents_1,s.palette.border,s.layout.radius,s.layout.radius,s.palette.accents_6,s.layout.gapHalf,s.layout.gap,a.font(.875),a.width(1,"auto"),a.height(2.875),a.pt(.625),a.pr(1.31),a.pb(.625),a.pl(1.31),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]]])+" "+(n||"")}),r,E.createElement(P,{id:"903731644",dynamic:[s.palette.accents_1,s.palette.border,s.layout.radius,s.layout.radius,s.palette.accents_6,s.layout.gapHalf,s.layout.gap,a.font(.875),a.width(1,"auto"),a.height(2.875),a.pt(.625),a.pr(1.31),a.pb(.625),a.pl(1.31),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]},"footer.__jsx-style-dynamic-selector{background-color:".concat(s.palette.accents_1,";border-top:1px solid ").concat(s.palette.border,";border-bottom-left-radius:").concat(s.layout.radius,";border-bottom-right-radius:").concat(s.layout.radius,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;color:").concat(s.palette.accents_6,";padding:").concat(s.layout.gapHalf," ").concat(s.layout.gap,";box-sizing:border-box;font-size:").concat(a.font(.875),";width:").concat(a.width(1,"auto"),";height:").concat(a.height(2.875),";padding:").concat(a.pt(.625)," ").concat(a.pr(1.31)," ").concat(a.pb(.625)," ").concat(a.pl(1.31),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0),";}")))};U1.defaultProps=fne;U1.displayName="GeistFieldsetFooter";var AD=Ve(U1),_ne=["className","children"],yne={className:""},$1=function(t){var n=t.className,r=t.children,i=Re(t,_ne),s=Ge(),o=s.SCALES;return E.createElement("div",ve({},Ue(i),{className:P.dynamic([["93049118",[o.width(1,"100%"),o.height(1,"auto"),o.pt(1.3),o.pr(1.3),o.pb(1.3),o.pl(1.3),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]]])+" "+"content ".concat(n)}),r,E.createElement(P,{id:"93049118",dynamic:[o.width(1,"100%"),o.height(1,"auto"),o.pt(1.3),o.pr(1.3),o.pb(1.3),o.pl(1.3),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]},".content.__jsx-style-dynamic-selector{width:".concat(o.width(1,"100%"),";height:").concat(o.height(1,"auto"),";padding:").concat(o.pt(1.3)," ").concat(o.pr(1.3)," ").concat(o.pb(1.3)," ").concat(o.pl(1.3),";margin:").concat(o.mt(0)," ").concat(o.mr(0)," ").concat(o.mb(0)," ").concat(o.ml(0),";}.content.__jsx-style-dynamic-selector > *:first-child{margin-top:0;}.content.__jsx-style-dynamic-selector > *:last-child{margin-bottom:0;}")))};$1.defaultProps=yne;$1.displayName="GeistFieldsetContent";var Xp=Ve($1),vne={inGroup:!1,currentValue:""},kD=E.createContext(vne),xne=function(){return E.useContext(kD)},bne=["className","title","subtitle","children","value","label"],wne={value:"",label:"",disabled:!1,title:"",subtitle:"",className:""},G1=function(t){var n=t.className,r=t.title,i=t.subtitle,s=t.children,o=t.value,a=t.label,l=Re(t,bne),c=ze(),d=Ge(),u=d.SCALES,h=xne(),g=h.inGroup,p=h.currentValue,m=h.register,f=L.useState(g),y=Fe(f,2),_=y[0],v=y[1],x=yi(s,AD),b=Fe(x,2),w=b[0],S=b[1],A=xd(w,au),C=xd(w,lu),k=xd(w,Xp);g&&(a||Di('Props "label" is required when in a group.',"Fieldset Group"),(!o||o==="")&&(o=a),L.useEffect(function(){m&&m({value:o,label:a})},[]),L.useEffect(function(){!p||p===""||v(p!==o)},[p]));var T=L.useMemo(function(){return E.createElement(E.Fragment,null,w,!A&&r&&E.createElement(au,null,r),!C&&i&&E.createElement(lu,null,i))},[w,A,C,r,i]);return E.createElement("div",ve({},Ue(l),{className:P.dynamic([["3253250630",[c.palette.background,c.palette.border,c.layout.radius,_?"none":"block",u.font(1),u.width(1,"auto"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]]])+" "+"fieldset ".concat(n)}),k?T:E.createElement(Xp,null,T),S&&S,E.createElement(P,{id:"3253250630",dynamic:[c.palette.background,c.palette.border,c.layout.radius,_?"none":"block",u.font(1),u.width(1,"auto"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]},".fieldset.__jsx-style-dynamic-selector{background-color:".concat(c.palette.background,";border:1px solid ").concat(c.palette.border,";border-radius:").concat(c.layout.radius,";overflow:hidden;display:").concat(_?"none":"block",";font-size:").concat(u.font(1),";width:").concat(u.width(1,"auto"),";height:").concat(u.height(1,"auto"),";padding:").concat(u.pt(0)," ").concat(u.pr(0)," ").concat(u.pb(0)," ").concat(u.pl(0),";margin:").concat(u.mt(0)," ").concat(u.mr(0)," ").concat(u.mb(0)," ").concat(u.ml(0),";}")))};G1.defaultProps=wne;G1.displayName="GeistFieldset";var ec=Ve(G1),Ene=["className","children","value","onChange"],Sne={className:""},V1=function(t){var n=t.className,r=t.children,i=t.value,s=t.onChange,o=Re(t,Ene),a=ze(),l=Ge(),c=l.SCALES,d=L.useState(i),u=Fe(d,2),h=u[0],g=u[1],p=vi([]),m=Fe(p,3),f=m[0],y=m[1],_=m[2],v=function(S){var A=_.current.find(function(C){return C.value===S.value});A&&Di('The "value" of each "Fieldset" must be unique.',"Fieldset"),y([].concat(Zr(_.current),[S]))},x=L.useMemo(function(){return{currentValue:h,inGroup:!0,register:v}},[h]),b=L.useCallback(function(w){g(w),s&&s(w)},[s]);return E.createElement(kD.Provider,{value:x},E.createElement("div",ve({},Ue(o),{className:P.dynamic([["3411776855",[c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0,0),c.ml(0),c.font(1),a.palette.accents_3,a.palette.accents_1,a.palette.border,a.palette.background,a.palette.foreground,a.layout.radius,a.layout.radius]]])+" "+"group ".concat(n)}),E.createElement("div",{className:P.dynamic([["3411776855",[c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0,0),c.ml(0),c.font(1),a.palette.accents_3,a.palette.accents_1,a.palette.border,a.palette.background,a.palette.foreground,a.layout.radius,a.layout.radius]]])+" group-tabs"},f.map(function(w){return E.createElement("button",{onClick:function(){return b(w.value)},key:w.value,className:P.dynamic([["3411776855",[c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0,0),c.ml(0),c.font(1),a.palette.accents_3,a.palette.accents_1,a.palette.border,a.palette.background,a.palette.foreground,a.layout.radius,a.layout.radius]]])+" "+((h===w.value?"active":"")||"")},w.label)})),E.createElement("div",{className:P.dynamic([["3411776855",[c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0,0),c.ml(0),c.font(1),a.palette.accents_3,a.palette.accents_1,a.palette.border,a.palette.background,a.palette.foreground,a.layout.radius,a.layout.radius]]])+" group-content"},r),E.createElement(P,{id:"3411776855",dynamic:[c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0,0),c.ml(0),c.font(1),a.palette.accents_3,a.palette.accents_1,a.palette.border,a.palette.background,a.palette.foreground,a.layout.radius,a.layout.radius]},".group.__jsx-style-dynamic-selector{width:".concat(c.width(1,"auto"),";height:").concat(c.height(1,"auto"),";padding:").concat(c.pt(0)," ").concat(c.pr(0)," ").concat(c.pb(0)," ").concat(c.pl(0),";margin:").concat(c.mt(0)," ").concat(c.mr(0)," ").concat(c.mb(0,0)," ").concat(c.ml(0),";}.group-tabs.__jsx-style-dynamic-selector{white-space:nowrap;overflow-y:hidden;overflow-x:auto;font-size:").concat(c.font(1),";margin-bottom:-1px;}.group-content.__jsx-style-dynamic-selector{border-top-left-radius:0;overflow:hidden;}.group-content.__jsx-style-dynamic-selector .fieldset{border-top-left-radius:0;}button.__jsx-style-dynamic-selector{height:2.7em;line-height:2.7em;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;color:").concat(a.palette.accents_3,";background-color:").concat(a.palette.accents_1,";font-size:0.875em;white-space:nowrap;text-transform:capitalize;-webkit-appearance:none;cursor:pointer;margin:0;padding:0 1.45em;overflow:hidden;-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;border-radius:0;border:1px solid ").concat(a.palette.border,";-webkit-text-decoration:none;text-decoration:none;outline:none;}button.active.__jsx-style-dynamic-selector{border-bottom-color:transparent;background-color:").concat(a.palette.background,";color:").concat(a.palette.foreground,";cursor:default;}button.__jsx-style-dynamic-selector:first-of-type{border-top-left-radius:").concat(a.layout.radius,";}button.__jsx-style-dynamic-selector:last-of-type{border-top-right-radius:").concat(a.layout.radius,";}button.__jsx-style-dynamic-selector+button.__jsx-style-dynamic-selector{border-left:0;}"))))};V1.defaultProps=Sne;V1.displayName="GeistFieldsetGroup";var Ane=Ve(V1);ec.Title=au;ec.Subtitle=lu;ec.Footer=AD;ec.Group=Ane;ec.Content=Xp;ec.Body=Xp;var kne={toasts:[],toastHovering:!1,updateToasts:function(t){return t},updateToastHoverStatus:function(){}},Cne=E.createContext(kne),Tne=function(){return E.useContext(Cne)},Nne=["xs","sm","md","lg","xl","justify","direction","alignItems","alignContent","children","className"],Lne={xs:!1,sm:!1,md:!1,lg:!1,xl:!1,className:""},Ac=function(t){var n=t===0?"display: none;":"display: inherit;";if(typeof t=="number"){var r=4.166666666666667*t,i=r>100?"100%":r<0?"0":"".concat(r,"%");return{grow:0,display:n,width:i,basis:i}}return{grow:1,display:n,width:"100%",basis:"0"}},Km=function(t){var n=t.xs,r=t.sm,i=t.md,s=t.lg,o=t.xl,a=t.justify,l=t.direction,c=t.alignItems,d=t.alignContent,u=t.children,h=t.className,g=Re(t,Nne),p=ze(),m=Ge(),f=m.SCALES,y=L.useMemo(function(){var v={justify:a,direction:l,alignItems:c,alignContent:d,xs:n,sm:r,md:i,lg:s,xl:o},x=Object.keys(v).reduce(function(b,w){return v[w]!==void 0&&v[w]!==!1?"".concat(b," ").concat(w):b},"");return x.trim()},[a,l,c,d,n,r,i,s,o]),_=L.useMemo(function(){return{xs:Ac(n),sm:Ac(r),md:Ac(i),lg:Ac(s),xl:Ac(o)}},[n,r,i,s,o]);return E.createElement("div",ve({},Ue(g),{className:P.dynamic([["2419486498",[f.font(1,"inherit"),f.height(1,"auto"),a,l,d,c,_.xs.grow,_.xs.width,_.xs.basis,_.xs.display,p.breakpoints.sm.min,_.sm.grow,_.sm.width,_.sm.basis,_.sm.display,p.breakpoints.md.min,_.md.grow,_.md.width,_.md.basis,_.md.display,p.breakpoints.lg.min,_.lg.grow,_.lg.width,_.lg.basis,_.lg.display,p.breakpoints.xl.min,_.xl.grow,_.xl.width,_.xl.basis,_.xl.display]]])+" "+"item ".concat(y," ").concat(h)}),u,E.createElement(P,{id:"2419486498",dynamic:[f.font(1,"inherit"),f.height(1,"auto"),a,l,d,c,_.xs.grow,_.xs.width,_.xs.basis,_.xs.display,p.breakpoints.sm.min,_.sm.grow,_.sm.width,_.sm.basis,_.sm.display,p.breakpoints.md.min,_.md.grow,_.md.width,_.md.basis,_.md.display,p.breakpoints.lg.min,_.lg.grow,_.lg.width,_.lg.basis,_.lg.display,p.breakpoints.xl.min,_.xl.grow,_.xl.width,_.xl.basis,_.xl.display]},".item.__jsx-style-dynamic-selector{font-size:".concat(f.font(1,"inherit"),";height:").concat(f.height(1,"auto"),";}.justify.__jsx-style-dynamic-selector{-webkit-box-pack:").concat(a,";-webkit-justify-content:").concat(a,";-ms-flex-pack:").concat(a,";justify-content:").concat(a,";}.direction.__jsx-style-dynamic-selector{-webkit-flex-direction:").concat(l,";-ms-flex-direction:").concat(l,";flex-direction:").concat(l,";}.alignContent.__jsx-style-dynamic-selector{-webkit-align-content:").concat(d,";-ms-flex-line-pack:").concat(d,";align-content:").concat(d,";}.alignItems.__jsx-style-dynamic-selector{-webkit-align-items:").concat(c,";-webkit-box-align:").concat(c,";-ms-flex-align:").concat(c,";align-items:").concat(c,";}.xs.__jsx-style-dynamic-selector{-webkit-box-flex:").concat(_.xs.grow,";-webkit-flex-grow:").concat(_.xs.grow,";-ms-flex-positive:").concat(_.xs.grow,";flex-grow:").concat(_.xs.grow,";max-width:").concat(_.xs.width,";-webkit-flex-basis:").concat(_.xs.basis,";-ms-flex-preferred-size:").concat(_.xs.basis,";flex-basis:").concat(_.xs.basis,";").concat(_.xs.display,";}@media only screen and (min-width:").concat(p.breakpoints.sm.min,"){.sm.__jsx-style-dynamic-selector{-webkit-box-flex:").concat(_.sm.grow,";-webkit-flex-grow:").concat(_.sm.grow,";-ms-flex-positive:").concat(_.sm.grow,";flex-grow:").concat(_.sm.grow,";max-width:").concat(_.sm.width,";-webkit-flex-basis:").concat(_.sm.basis,";-ms-flex-preferred-size:").concat(_.sm.basis,";flex-basis:").concat(_.sm.basis,";").concat(_.sm.display,";}}@media only screen and (min-width:").concat(p.breakpoints.md.min,"){.md.__jsx-style-dynamic-selector{-webkit-box-flex:").concat(_.md.grow,";-webkit-flex-grow:").concat(_.md.grow,";-ms-flex-positive:").concat(_.md.grow,";flex-grow:").concat(_.md.grow,";max-width:").concat(_.md.width,";-webkit-flex-basis:").concat(_.md.basis,";-ms-flex-preferred-size:").concat(_.md.basis,";flex-basis:").concat(_.md.basis,";").concat(_.md.display,";}}@media only screen and (min-width:").concat(p.breakpoints.lg.min,"){.lg.__jsx-style-dynamic-selector{-webkit-box-flex:").concat(_.lg.grow,";-webkit-flex-grow:").concat(_.lg.grow,";-ms-flex-positive:").concat(_.lg.grow,";flex-grow:").concat(_.lg.grow,";max-width:").concat(_.lg.width,";-webkit-flex-basis:").concat(_.lg.basis,";-ms-flex-preferred-size:").concat(_.lg.basis,";flex-basis:").concat(_.lg.basis,";").concat(_.lg.display,";}}@media only screen and (min-width:").concat(p.breakpoints.xl.min,"){.xl.__jsx-style-dynamic-selector{-webkit-box-flex:").concat(_.xl.grow,";-webkit-flex-grow:").concat(_.xl.grow,";-ms-flex-positive:").concat(_.xl.grow,";flex-grow:").concat(_.xl.grow,";max-width:").concat(_.xl.width,";-webkit-flex-basis:").concat(_.xl.basis,";-ms-flex-preferred-size:").concat(_.xl.basis,";flex-basis:").concat(_.xl.basis,";").concat(_.xl.display,";}}")))};Km.defaultProps=Lne;Km.displayName="GeistGridBasicItem";var Ine=["children","className"],Pne={className:""},H1=function(t){var n=t.children,r=t.className,i=Re(t,Ine),s=Ge(),o=s.SCALES,a={styles:E.createElement(P,{id:"1271839607",dynamic:[o.mt(0),o.mr(0),o.mb(0),o.ml(0),o.pt(0,"var(--grid-gap-unit)"),o.pr(0,"var(--grid-gap-unit)"),o.pb(0,"var(--grid-gap-unit)"),o.pl(0,"var(--grid-gap-unit)")]},"div.__jsx-style-dynamic-selector{margin:".concat(o.mt(0)," ").concat(o.mr(0)," ").concat(o.mb(0)," ").concat(o.ml(0),";box-sizing:border-box;padding:").concat(o.pt(0,"var(--grid-gap-unit)")," ").concat(o.pr(0,"var(--grid-gap-unit)")," ").concat(o.pb(0,"var(--grid-gap-unit)")," ").concat(o.pl(0,"var(--grid-gap-unit)"),";}")),className:P.dynamic([["1271839607",[o.mt(0),o.mr(0),o.mb(0),o.ml(0),o.pt(0,"var(--grid-gap-unit)"),o.pr(0,"var(--grid-gap-unit)"),o.pb(0,"var(--grid-gap-unit)"),o.pl(0,"var(--grid-gap-unit)")]]])},l=a.className,c=a.styles;return E.createElement(Km,ve({className:"".concat(l," ").concat(r)},Ue(i)),n,c)};H1.defaultProps=Pne;H1.displayName="GeistGrid";var W1=Ve(H1),Mne=["gap","wrap","children","className"],Fne={gap:0,wrap:"wrap",className:""},X1=function(t){var n=t.gap,r=t.wrap,i=t.children,s=t.className,o=Re(t,Mne),a=Ge(),l=a.unit,c=a.SCALES,d=L.useMemo(function(){return"calc(".concat(n," * ").concat(l," * 1/3)")},[n,l]),u={styles:E.createElement(P,{id:"3631618093",dynamic:[d,r,c.width(1,"var(--grid-container-width)"),c.mt(0,"var(--grid-container-margin)"),c.mr(0,"var(--grid-container-margin)"),c.mb(0,"var(--grid-container-margin)"),c.ml(0,"var(--grid-container-margin)")]},"div.__jsx-style-dynamic-selector{--grid-gap-unit:".concat(d,";--grid-container-margin:calc(-1 * var(--grid-gap-unit));--grid-container-width:calc(100% + var(--grid-gap-unit) * 2);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:").concat(r,";-ms-flex-wrap:").concat(r,";flex-wrap:").concat(r,";box-sizing:border-box;width:").concat(c.width(1,"var(--grid-container-width)"),";margin:").concat(c.mt(0,"var(--grid-container-margin)")," ").concat(c.mr(0,"var(--grid-container-margin)")," ").concat(c.mb(0,"var(--grid-container-margin)")," ").concat(c.ml(0,"var(--grid-container-margin)"),";}")),className:P.dynamic([["3631618093",[d,r,c.width(1,"var(--grid-container-width)"),c.mt(0,"var(--grid-container-margin)"),c.mr(0,"var(--grid-container-margin)"),c.mb(0,"var(--grid-container-margin)"),c.ml(0,"var(--grid-container-margin)")]]])},h=u.className,g=u.styles;return E.createElement(Km,ve({className:"".concat(h," ").concat(s)},Ue(o)),i,g)};X1.defaultProps=Fne;X1.displayName="GeistGridContainer";var Rne=Ve(X1);W1.Container=Rne;var Dne=["command","shift","option","ctrl","children","className"],zne={command:!1,shift:!1,option:!1,ctrl:!1,className:""},Y1=function(t){var n=t.command,r=t.shift,i=t.option,s=t.ctrl,o=t.children,a=t.className,l=Re(t,Dne),c=ze(),d=Ge(),u=d.SCALES;return E.createElement("kbd",ve({},Ue(l),{className:P.dynamic([["921453049",[c.palette.accents_5,c.palette.accents_1,c.font.sans,c.layout.radius,c.palette.accents_2,u.font(.875),u.width(1,"fit-content"),u.height(1,"auto"),u.pt(0),u.pr(.34),u.pb(0),u.pl(.34),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]]])+" "+(a||"")}),n&&E.createElement("span",{className:P.dynamic([["921453049",[c.palette.accents_5,c.palette.accents_1,c.font.sans,c.layout.radius,c.palette.accents_2,u.font(.875),u.width(1,"fit-content"),u.height(1,"auto"),u.pt(0),u.pr(.34),u.pb(0),u.pl(.34),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]]])},"⌘"),r&&E.createElement("span",{className:P.dynamic([["921453049",[c.palette.accents_5,c.palette.accents_1,c.font.sans,c.layout.radius,c.palette.accents_2,u.font(.875),u.width(1,"fit-content"),u.height(1,"auto"),u.pt(0),u.pr(.34),u.pb(0),u.pl(.34),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]]])},"⇧"),i&&E.createElement("span",{className:P.dynamic([["921453049",[c.palette.accents_5,c.palette.accents_1,c.font.sans,c.layout.radius,c.palette.accents_2,u.font(.875),u.width(1,"fit-content"),u.height(1,"auto"),u.pt(0),u.pr(.34),u.pb(0),u.pl(.34),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]]])},"⌥"),s&&E.createElement("span",{className:P.dynamic([["921453049",[c.palette.accents_5,c.palette.accents_1,c.font.sans,c.layout.radius,c.palette.accents_2,u.font(.875),u.width(1,"fit-content"),u.height(1,"auto"),u.pt(0),u.pr(.34),u.pb(0),u.pl(.34),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]]])},"⌃"),o&&E.createElement("span",{className:P.dynamic([["921453049",[c.palette.accents_5,c.palette.accents_1,c.font.sans,c.layout.radius,c.palette.accents_2,u.font(.875),u.width(1,"fit-content"),u.height(1,"auto"),u.pt(0),u.pr(.34),u.pb(0),u.pl(.34),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]]])},o),E.createElement(P,{id:"921453049",dynamic:[c.palette.accents_5,c.palette.accents_1,c.font.sans,c.layout.radius,c.palette.accents_2,u.font(.875),u.width(1,"fit-content"),u.height(1,"auto"),u.pt(0),u.pr(.34),u.pb(0),u.pl(.34),u.mt(0),u.mr(0),u.mb(0),u.ml(0)]},"kbd.__jsx-style-dynamic-selector{line-height:2em;text-align:center;display:inline-block;color:".concat(c.palette.accents_5,";background-color:").concat(c.palette.accents_1,";font-family:").concat(c.font.sans,";border-radius:").concat(c.layout.radius,";border:1px solid ").concat(c.palette.accents_2,";font-size:").concat(u.font(.875),";width:").concat(u.width(1,"fit-content"),";height:").concat(u.height(1,"auto"),";min-width:2em;min-height:2em;padding:").concat(u.pt(0)," ").concat(u.pr(.34)," ").concat(u.pb(0)," ").concat(u.pl(.34),";margin:").concat(u.mt(0)," ").concat(u.mr(0)," ").concat(u.mb(0)," ").concat(u.ml(0),";}span.__jsx-style-dynamic-selector{line-height:2em;font-size:1em;text-align:center;}span.__jsx-style-dynamic-selector+span.__jsx-style-dynamic-selector{margin-left:0.3em;}")))};Y1.defaultProps=zne;Y1.displayName="GeistKeyboard";Ve(Y1);var One=["className","children","visible"],Bne={className:"",visible:!1},q1=function(t){var n=t.className,r=t.children,i=t.visible,s=Re(t,One),o=ze(),a=Ge(),l=a.SCALES,c=L.useRef(null),d=L.useRef(null),u=L.useRef(null);L.useEffect(function(){if(i){var g=document.activeElement,p=X3(c.current,g);p||d.current&&d.current.focus()}},[i]);var h=function(p){var m=p.keyCode===9;if(!(!i||!m)){var f=document.activeElement;p.shiftKey?f===d.current&&u.current&&u.current.focus():f===u.current&&d.current&&d.current.focus()}};return E.createElement(Ma,{name:"wrapper",visible:i,clearTime:300},E.createElement("div",ve({role:"dialog",tabIndex:-1,onKeyDown:h,ref:c},Ue(s),{className:P.dynamic([["4268738715",[o.palette.background,o.palette.foreground,o.layout.radius,o.expressiveness.shadowLarge,l.font(1),l.height(1,"auto"),l.pl(1.3125),l.pr(1.3125),l.pt(1.3125),l.pb(1.3125),l.mt(0),l.mr(0),l.mb(0),l.ml(0)]]])+" "+"wrapper ".concat(n)}),E.createElement("div",{tabIndex:0,"aria-hidden":"true",ref:d,className:P.dynamic([["4268738715",[o.palette.background,o.palette.foreground,o.layout.radius,o.expressiveness.shadowLarge,l.font(1),l.height(1,"auto"),l.pl(1.3125),l.pr(1.3125),l.pt(1.3125),l.pb(1.3125),l.mt(0),l.mr(0),l.mb(0),l.ml(0)]]])+" hide-tab"}),r,E.createElement("div",{tabIndex:0,"aria-hidden":"true",ref:u,className:P.dynamic([["4268738715",[o.palette.background,o.palette.foreground,o.layout.radius,o.expressiveness.shadowLarge,l.font(1),l.height(1,"auto"),l.pl(1.3125),l.pr(1.3125),l.pt(1.3125),l.pb(1.3125),l.mt(0),l.mr(0),l.mb(0),l.ml(0)]]])+" hide-tab"}),E.createElement(P,{id:"4268738715",dynamic:[o.palette.background,o.palette.foreground,o.layout.radius,o.expressiveness.shadowLarge,l.font(1),l.height(1,"auto"),l.pl(1.3125),l.pr(1.3125),l.pt(1.3125),l.pb(1.3125),l.mt(0),l.mr(0),l.mb(0),l.ml(0)]},".wrapper.__jsx-style-dynamic-selector{max-width:100%;vertical-align:middle;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:relative;box-sizing:border-box;background-color:".concat(o.palette.background,";color:").concat(o.palette.foreground,";border-radius:").concat(o.layout.radius,";box-shadow:").concat(o.expressiveness.shadowLarge,";opacity:0;outline:none;-webkit-transform:translate3d(0px,-30px,0px);-ms-transform:translate3d(0px,-30px,0px);transform:translate3d(0px,-30px,0px);-webkit-transition:opacity 0.35s cubic-bezier(0.4,0,0.2,1) 0s, -webkit-transform 0.35s cubic-bezier(0.4,0,0.2,1) 0s;-webkit-transition:opacity 0.35s cubic-bezier(0.4,0,0.2,1) 0s, transform 0.35s cubic-bezier(0.4,0,0.2,1) 0s;transition:opacity 0.35s cubic-bezier(0.4,0,0.2,1) 0s, transform 0.35s cubic-bezier(0.4,0,0.2,1) 0s;width:100%;font-size:").concat(l.font(1),";height:").concat(l.height(1,"auto"),";--modal-wrapper-padding-left:").concat(l.pl(1.3125),";--modal-wrapper-padding-right:").concat(l.pr(1.3125),";padding:").concat(l.pt(1.3125)," var(--modal-wrapper-padding-right) ").concat(l.pb(1.3125)," var(--modal-wrapper-padding-left);margin:").concat(l.mt(0)," ").concat(l.mr(0)," ").concat(l.mb(0)," ").concat(l.ml(0),";}.wrapper-enter.__jsx-style-dynamic-selector{opacity:0;-webkit-transform:translate3d(0px,-30px,0px);-ms-transform:translate3d(0px,-30px,0px);transform:translate3d(0px,-30px,0px);}.wrapper-enter-active.__jsx-style-dynamic-selector{opacity:1;-webkit-transform:translate3d(0px,0px,0px);-ms-transform:translate3d(0px,0px,0px);transform:translate3d(0px,0px,0px);}.wrapper-leave.__jsx-style-dynamic-selector{opacity:1;-webkit-transform:translate3d(0px,0px,0px);-ms-transform:translate3d(0px,0px,0px);transform:translate3d(0px,0px,0px);}.wrapper-leave-active.__jsx-style-dynamic-selector{opacity:0;-webkit-transform:translate3d(0px,-30px,0px);-ms-transform:translate3d(0px,-30px,0px);transform:translate3d(0px,-30px,0px);}.hide-tab.__jsx-style-dynamic-selector{outline:none;overflow:hidden;width:0;height:0;opacity:0;}"))))};q1.defaultProps=Bne;q1.displayName="GeistModalWrapper";var jne={},CD=E.createContext(jne),Une=function(){return E.useContext(CD)},$ne=["className","children","onClick","passive","disabled"],Gne={className:"",passive:!1,disabled:!1},Z1=E.forwardRef(function(e,t){var n=e.className,r=e.children,i=e.onClick,s=e.passive,o=e.disabled,a=Re(e,$ne),l=ze(),c=Ge(),d=c.SCALES,u=L.useRef(null),h=Une(),g=h.close;L.useImperativeHandle(t,function(){return u.current});var p=function(w){if(!o){var S=Object.assign({},w,{close:function(){return g&&g()}});i&&i(S)}},m=L.useMemo(function(){return s?l.palette.accents_5:l.palette.foreground},[l.palette,s,o]),f=L.useMemo(function(){return o?l.palette.accents_1:l.palette.background},[l.palette,o]),y={styles:E.createElement(P,{id:"930885138",dynamic:[d.font(.75),m,l.palette.background,d.height(3.5625),o?m:l.palette.foreground,o?f:l.palette.accents_1]},"button.btn.__jsx-style-dynamic-selector{font-size:".concat(d.font(.75),";border:none;color:").concat(m,";background-color:").concat(l.palette.background,";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex:1;-ms-flex:1;flex:1;height:").concat(d.height(3.5625),";border-radius:0;min-width:0;}button.btn.__jsx-style-dynamic-selector:hover,button.btn.__jsx-style-dynamic-selector:focus{color:").concat(o?m:l.palette.foreground,";background-color:").concat(o?f:l.palette.accents_1,";}")),className:P.dynamic([["930885138",[d.font(.75),m,l.palette.background,d.height(3.5625),o?m:l.palette.foreground,o?f:l.palette.accents_1]]])},_=y.className,v=y.styles,x=ve({},a,{effect:!1,ref:u});return E.createElement(ca,ve({className:"".concat(_," ").concat(n),onClick:p,disabled:o},x),r,v)});Z1.defaultProps=Gne;Z1.displayName="GeistModalAction";var TD=Ve(Z1),Vne=["children"],ND=function(t){var n=t.children,r=Re(t,Vne),i=ze(),s=L.useRef(null),o=L.useState("auto"),a=Fe(o,2),l=a[0],c=a[1];return L.useEffect(function(){s.current&&c("".concat(s.current.clientHeight,"px"))},[s]),E.createElement(E.Fragment,null,E.createElement("div",{className:P.dynamic([["2914444644",[i.palette.border,i.layout.radius,i.layout.radius,i.palette.border,l]]])}),E.createElement("footer",ve({ref:s},Ue(r),{className:P.dynamic([["2914444644",[i.palette.border,i.layout.radius,i.layout.radius,i.palette.border,l]]])}),n),E.createElement(P,{id:"2914444644",dynamic:[i.palette.border,i.layout.radius,i.layout.radius,i.palette.border,l]},"footer.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;overflow:hidden;width:100%;height:auto;position:absolute;bottom:0;left:0;right:0;border-top:1px solid ".concat(i.palette.border,";border-bottom-left-radius:").concat(i.layout.radius,";border-bottom-right-radius:").concat(i.layout.radius,";}footer.__jsx-style-dynamic-selector>button.btn + button.btn{border-left:1px solid ").concat(i.palette.border,";}div.__jsx-style-dynamic-selector{height:").concat(l,";-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;}")))};ND.displayName="GeistModalActions";var Hne=E.memo(ND),Wne={wrapClassName:"",keyboard:!0,disableBackdropClick:!1},J1=function(t){var n=t.visible,r=t.onClose,i=t.children,s=t.keyboard,o=t.wrapClassName,a=t.onContentClick,l=t.disableBackdropClick,c=ku("modal"),d=Ge(),u=d.SCALES,h=xD(null,{scrollLayer:!0}),g=Fe(h,2),p=g[1],m=L.useState(!1),f=Fe(m,2),y=f[0],_=f[1],v=yi(i,TD),x=Fe(v,2),b=x[0],w=x[1],S=w&&E.Children.count(w)>0,A=function(){r&&r(),_(!1),p(!1)};L.useEffect(function(){typeof n>"u"||(_(n),p(n))},[n]);var C=bD(function(){s&&A()},Wp.Escape,{disableGlobalEvent:!0}),k=C.bindings,T=function(){l||A()},M=L.useMemo(function(){return{close:A}},[]);return c?To.createPortal(E.createElement(CD.Provider,{value:M},E.createElement(Qm,ve({onClick:T,onContentClick:a,visible:y,width:u.width(26)},k),E.createElement(q1,{visible:y,className:o},b,S&&E.createElement(Hne,null,w)))),c):null};J1.defaultProps=Wne;J1.displayName="GeistModal";var ef=Ve(J1);ef.Title=wD;ef.Subtitle=ED;ef.Content=SD;ef.Action=TD;var Xne=["children","type","label","filled","className"],Yne={type:"default",label:"note",filled:!1,className:""},qne=function(t,n,r){var i={secondary:r.palette.secondary,success:r.palette.success,warning:r.palette.warning,error:r.palette.error},s=i[t];if(!n)return{color:s||r.palette.foreground,borderColor:s||r.palette.border,bgColor:r.palette.background};var o=s?"white":r.palette.background;return{color:o,borderColor:s||r.palette.foreground,bgColor:s||r.palette.foreground}},Q1=function(t){var n=t.children,r=t.type,i=t.label,s=t.filled,o=t.className,a=Re(t,Xne),l=ze(),c=Ge(),d=c.SCALES,u=L.useMemo(function(){return qne(r,s,l)},[r,s,l]),h=u.color,g=u.borderColor,p=u.bgColor;return E.createElement("div",ve({},Ue(a),{className:P.dynamic([["1082065680",[g,h,p,l.layout.radius,d.font(.875),d.width(1,"auto"),d.height(1,"auto"),d.pt(.667),d.pr(1.32),d.pb(.667),d.pl(1.32),d.mt(0),d.mr(0),d.mb(0),d.ml(0)]]])+" "+"note ".concat(o)}),i&&E.createElement("span",{className:P.dynamic([["1082065680",[g,h,p,l.layout.radius,d.font(.875),d.width(1,"auto"),d.height(1,"auto"),d.pt(.667),d.pr(1.32),d.pb(.667),d.pl(1.32),d.mt(0),d.mr(0),d.mb(0),d.ml(0)]]])+" label"},E.createElement("b",{className:P.dynamic([["1082065680",[g,h,p,l.layout.radius,d.font(.875),d.width(1,"auto"),d.height(1,"auto"),d.pt(.667),d.pr(1.32),d.pb(.667),d.pl(1.32),d.mt(0),d.mr(0),d.mb(0),d.ml(0)]]])},i,":")),n,E.createElement(P,{id:"1082065680",dynamic:[g,h,p,l.layout.radius,d.font(.875),d.width(1,"auto"),d.height(1,"auto"),d.pt(.667),d.pr(1.32),d.pb(.667),d.pl(1.32),d.mt(0),d.mr(0),d.mb(0),d.ml(0)]},".note.__jsx-style-dynamic-selector{line-height:1.8;border:1px solid ".concat(g,";color:").concat(h,";background-color:").concat(p,";border-radius:").concat(l.layout.radius,";font-size:").concat(d.font(.875),";width:").concat(d.width(1,"auto"),";height:").concat(d.height(1,"auto"),";padding:").concat(d.pt(.667)," ").concat(d.pr(1.32)," ").concat(d.pb(.667)," ").concat(d.pl(1.32),";margin:").concat(d.mt(0)," ").concat(d.mr(0)," ").concat(d.mb(0)," ").concat(d.ml(0),";}.note.__jsx-style-dynamic-selector p{margin:0;}.label.__jsx-style-dynamic-selector{text-transform:uppercase;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;line-height:1.5;padding-right:0.38em;}")))};Q1.defaultProps=Yne;Q1.displayName="GeistNote";Ve(Q1);var Zne=["className","children"],Jne={className:""},K1=function(t){var n=t.className,r=t.children,i=Re(t,Zne),s=Ge(),o=s.SCALES;return E.createElement("main",ve({},Ue(i),{className:P.dynamic([["3887979816",[o.font(1),o.width(1,"100%"),o.height(1,"100%"),o.pt(3.125),o.pr(0),o.pb(3.125),o.pl(0),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]]])+" "+(n||"")}),r,E.createElement(P,{id:"3887979816",dynamic:[o.font(1),o.width(1,"100%"),o.height(1,"100%"),o.pt(3.125),o.pr(0),o.pb(3.125),o.pl(0),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]},"main.__jsx-style-dynamic-selector{font-size:".concat(o.font(1),";width:").concat(o.width(1,"100%"),";height:").concat(o.height(1,"100%"),";padding:").concat(o.pt(3.125)," ").concat(o.pr(0)," ").concat(o.pb(3.125)," ").concat(o.pl(0),";margin:").concat(o.mt(0)," ").concat(o.mr(0)," ").concat(o.mb(0)," ").concat(o.ml(0),";}")))};K1.defaultProps=Jne;K1.displayName="GeistPageContent";var Yp=Ve(K1),Qne=["children","render","dotBackdrop","className"];dr("default","effect","effect-seo");var Kne={render:"default",dotBackdrop:!1},ere=function(){return E.createElement("span",{className:"jsx-3167743014"},E.createElement(P,{id:"3167743014"},"body{background-image:radial-gradient(#e3e3e3 1px,transparent 0), radial-gradient(#e3e3e3 1px,transparent 0);background-position:0 0,25px 25px;background-attachment:fixed;background-size:50px 50px;}"))},ew=function(t){var n=t.children,r=t.render,i=t.dotBackdrop,s=t.className,o=Re(t,Qne),a=ze(),l=Ge(),c=l.SCALES,d=L.useMemo(function(){return a.type==="dark"?!1:i},[i,a.type]),u=L.useState(r!=="default"),h=Fe(u,2),g=h[0],p=h[1];if(L.useEffect(function(){p(!1)},[]),g){var m=r==="effect-seo";return m?E.createElement("div",{"aria-hidden":"true",className:"jsx-3942095687 hidden"},n,E.createElement(P,{id:"3942095687"},".hidden.jsx-3942095687{opacity:0;display:none;}")):null}var f=xd(n,Yp);return E.createElement("section",ve({},Ue(o),{className:P.dynamic([["1515698274",[c.font(1),c.width(1,"calc(100% - 100pt)"),c.height(1,"auto"),c.pt(0),c.pr(1.34),c.pb(0),c.pl(1.34),c.mt(0),c.mr(0,"auto"),c.mb(0),c.ml(0,"auto")]]])+" "+(s||"")}),f?n:E.createElement(Yp,null,n),d&&E.createElement(ere,null),E.createElement(P,{id:"1515698274",dynamic:[c.font(1),c.width(1,"calc(100% - 100pt)"),c.height(1,"auto"),c.pt(0),c.pr(1.34),c.pb(0),c.pl(1.34),c.mt(0),c.mr(0,"auto"),c.mb(0),c.ml(0,"auto")]},"section.__jsx-style-dynamic-selector{max-width:100vw;min-height:100vh;box-sizing:border-box;position:relative;font-size:".concat(c.font(1),";width:").concat(c.width(1,"calc(100% - 100pt)"),";height:").concat(c.height(1,"auto"),";padding:").concat(c.pt(0)," ").concat(c.pr(1.34)," ").concat(c.pb(0)," ").concat(c.pl(1.34),";margin:").concat(c.mt(0)," ").concat(c.mr(0,"auto")," ").concat(c.mb(0)," ").concat(c.ml(0,"auto"),";}")))};ew.defaultProps=Kne;ew.displayName="GeistPage";var tf=Ve(ew),tre=["children","center","className"],nre={center:!1,className:""},tw=function(t){var n=t.children,r=t.center,i=t.className,s=Re(t,tre),o=Ge(),a=o.SCALES;return E.createElement("header",ve({},Ue(s),{className:P.dynamic([["3053482948",[a.font(1),a.width(1,"100%"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]]])+" "+"".concat(r?"center":""," ").concat(i)}),n,E.createElement(P,{id:"3053482948",dynamic:[a.font(1),a.width(1,"100%"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0)]},"header.__jsx-style-dynamic-selector{font-size:".concat(a.font(1),";width:").concat(a.width(1,"100%"),";height:").concat(a.height(1,"auto"),";padding:").concat(a.pt(0)," ").concat(a.pr(0)," ").concat(a.pb(0)," ").concat(a.pl(0),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0),";}.center.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}")))};tw.defaultProps=nre;tw.displayName="GeistPageHeader";var rre=Ve(tw),ire=["children"],sre={className:""},nw=function(t){var n=t.children,r=Re(t,ire),i=Ge(),s=i.SCALES;return E.createElement("footer",ve({},Ue(r),{className:P.dynamic([["3447440073",[s.font(1),s.width(1,"100%"),s.height(1,"auto"),s.pt(0),s.pr(0),s.pb(0),s.pl(0),s.mt(0),s.mr(0),s.mb(0),s.ml(0)]]])}),n,E.createElement(P,{id:"3447440073",dynamic:[s.font(1),s.width(1,"100%"),s.height(1,"auto"),s.pt(0),s.pr(0),s.pb(0),s.pl(0),s.mt(0),s.mr(0),s.mb(0),s.ml(0)]},"footer.__jsx-style-dynamic-selector{position:absolute;bottom:0;font-size:".concat(s.font(1),";width:").concat(s.width(1,"100%"),";height:").concat(s.height(1,"auto"),";padding:").concat(s.pt(0)," ").concat(s.pr(0)," ").concat(s.pb(0)," ").concat(s.pl(0),";margin:").concat(s.mt(0)," ").concat(s.mr(0)," ").concat(s.mb(0)," ").concat(s.ml(0),";}")))};nw.defaultProps=sre;nw.displayName="GeistPageFooter";var ore=Ve(nw);tf.Header=rre;tf.Content=Yp;tf.Body=Yp;tf.Footer=ore;var are=["active","children","disabled","onClick"],da=function(t){var n=t.active,r=t.children,i=t.disabled,s=t.onClick,o=Re(t,are),a=ze(),l=L.useMemo(function(){return[Es(a.palette.success,.1),Es(a.palette.success,.8)]},[a.palette.success]),c=Fe(l,2),d=c[0],u=c[1],h=function(p){i||s&&s(p)};return E.createElement("li",{className:P.dynamic([["1657796974",[a.palette.success,a.layout.radius,a.palette.background,d,a.palette.success,a.palette.background,a.expressiveness.shadowSmall,u,a.expressiveness.shadowMedium,a.palette.accents_4,a.palette.accents_2]]])},E.createElement("button",ve({onClick:h},Ue(o),{className:P.dynamic([["1657796974",[a.palette.success,a.layout.radius,a.palette.background,d,a.palette.success,a.palette.background,a.expressiveness.shadowSmall,u,a.expressiveness.shadowMedium,a.palette.accents_4,a.palette.accents_2]]])+" "+"".concat(n?"active":""," ").concat(i?"disabled":"")}),r),E.createElement(P,{id:"1657796974",dynamic:[a.palette.success,a.layout.radius,a.palette.background,d,a.palette.success,a.palette.background,a.expressiveness.shadowSmall,u,a.expressiveness.shadowMedium,a.palette.accents_4,a.palette.accents_2]},"li.__jsx-style-dynamic-selector{margin-right:0.428em;display:inline-block;}button.__jsx-style-dynamic-selector{border:none;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;box-sizing:border-box;text-transform:capitalize;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;text-align:center;vertical-align:middle;box-shadow:none;outline:none;height:var(--pagination-size);min-width:var(--pagination-size);font-size:inherit;cursor:pointer;color:".concat(a.palette.success,";border-radius:").concat(a.layout.radius,";background-color:").concat(a.palette.background,";-webkit-transition:all linear 200ms 0ms;transition:all linear 200ms 0ms;}button.__jsx-style-dynamic-selector:hover{background-color:").concat(d,";}.active.__jsx-style-dynamic-selector{font-weight:bold;background-color:").concat(a.palette.success,";color:").concat(a.palette.background,";box-shadow:").concat(a.expressiveness.shadowSmall,";}.active.__jsx-style-dynamic-selector:hover{background-color:").concat(u,";box-shadow:").concat(a.expressiveness.shadowMedium,";}.disabled.__jsx-style-dynamic-selector{color:").concat(a.palette.accents_4,";cursor:not-allowed;}.disabled.__jsx-style-dynamic-selector:hover{background-color:").concat(a.palette.accents_2,";}button.__jsx-style-dynamic-selector svg{width:1.3em;height:1.3em;}")))};da.displayName="GeistPaginationItem";dr("prev","next","click");var lre={},LD=E.createContext(lre),ID=function(){return E.useContext(LD)},cre=["children"],qp=function(t){var n=t.children,r=Re(t,cre),i=ID(),s=i.update,o=i.isFirst;return E.createElement(da,ve({onClick:function(){return s&&s("prev")},disabled:o},Ue(r)),n)};qp.displayName="GeistPaginationPrevious";var dre=["children"],Zp=function(t){var n=t.children,r=Re(t,dre),i=ID(),s=i.update,o=i.isLast;return E.createElement(da,ve({onClick:function(){return s&&s("next")},disabled:o},Ue(r)),n)};Zp.displayName="GeistPaginationNext";var wv=function(t){var n=t.isBefore,r=t.onClick,i=L.useState(!1),s=Fe(i,2),o=s[0],a=s[1];return E.createElement(da,{onClick:function(c){return r&&r(c)},onMouseEnter:function(){return a(!0)},onMouseLeave:function(){return a(!1)}},o?E.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:P.dynamic([["2928474255",[n?"180deg":"0deg"]]])+" more"},E.createElement("path",{d:"M13 17l5-5-5-5",className:P.dynamic([["2928474255",[n?"180deg":"0deg"]]])}),E.createElement("path",{d:"M6 17l5-5-5-5",className:P.dynamic([["2928474255",[n?"180deg":"0deg"]]])})):E.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:P.dynamic([["2928474255",[n?"180deg":"0deg"]]])},E.createElement("circle",{cx:"12",cy:"12",r:"1",fill:"currentColor",className:P.dynamic([["2928474255",[n?"180deg":"0deg"]]])}),E.createElement("circle",{cx:"19",cy:"12",r:"1",fill:"currentColor",className:P.dynamic([["2928474255",[n?"180deg":"0deg"]]])}),E.createElement("circle",{cx:"5",cy:"12",r:"1",fill:"currentColor",className:P.dynamic([["2928474255",[n?"180deg":"0deg"]]])})),E.createElement(P,{id:"2928474255",dynamic:[n?"180deg":"0deg"]},"svg.__jsx-style-dynamic-selector{color:currentColor;stroke:currentColor;width:1em;height:1em;}.more.__jsx-style-dynamic-selector{-webkit-transform:rotate(".concat(n?"180deg":"0deg",");-ms-transform:rotate(").concat(n?"180deg":"0deg",");transform:rotate(").concat(n?"180deg":"0deg",");}")))};wv.displayName="GeistPaginationEllipsis";var PD=function(t){var n=t.limit,r=t.count,i=t.current,s=t.setPage,o=L.useMemo(function(){var y=n%2===0?n-1:n;return y-2},[n]),a=(o+1)/2,l=L.useMemo(function(){var y=r>n;return[y&&i>a+1,y&&i<r-a]},[i,o,a,r,n]),c=Fe(l,2),d=c[0],u=c[1],h=L.useMemo(function(){return Zr(new Array(o))},[o]),g=L.useCallback(function(y,_){return E.createElement(da,{key:"pagination-item-".concat(y),active:y===_,onClick:function(){return s(y)}},y)},[]),p=h.map(function(y,_){var v=_+2;return g(v,i)}),m=h.map(function(y,_){var v=a-(_+1),x=i-v;return E.createElement(da,{key:"pagination-middle-".concat(_),active:_+1===a,onClick:function(){return s(x)}},x)}),f=h.map(function(y,_){var v=r-(o-_);return g(v,i)});return r<=n?E.createElement(E.Fragment,null,Zr(new Array(r)).map(function(y,_){var v=_+1;return E.createElement(da,{key:"pagination-item-".concat(v),active:v===i,onClick:function(){return s(v)}},v)})):E.createElement(E.Fragment,null,g(1,i),d&&E.createElement(wv,{key:"pagination-ellipsis-before",isBefore:!0,onClick:function(){return s(function(_){return _-5>=1?_-5:1})}}),d&&u?m:d?f:p,u&&E.createElement(wv,{key:"pagination-ellipsis-after",onClick:function(){return s(function(_){return _+5<=r?_+5:r})}}),g(r,i))};PD.displayName="GeistPaginationPages";var ure={initialPage:1,count:1,limit:7},rw=function(t){var n=t.page,r=t.initialPage,i=t.count,s=t.limit,o=t.children,a=t.onChange,l=Ge(),c=l.SCALES,d=vi(r),u=Fe(d,3),h=u[0],g=u[1],p=u[2],m=yi(o,qp),f=Fe(m,2),y=f[1],_=yi(o,Zp),v=Fe(_,2),x=v[1],b=L.useMemo(function(){var T=function(I){return E.Children.count(I)>0},M=E.createElement(qp,null,"prev"),D=E.createElement(Zp,null,"next");return[T(y)?y:M,T(x)?x:D]},[y,x]),w=Fe(b,2),S=w[0],A=w[1],C=function(M){M==="prev"&&p.current>1&&g(function(D){return D-1}),M==="next"&&p.current<i&&g(function(D){return D+1})},k=L.useMemo(function(){return{isFirst:h<=1,isLast:h>=i,update:C}},[h]);return L.useEffect(function(){a&&a(h)},[h]),L.useEffect(function(){n!==void 0&&g(n)},[n]),E.createElement(LD.Provider,{value:k},E.createElement("nav",{className:P.dynamic([["3826701357",[c.font(2),c.font(.875),c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0),c.ml(0)]]])},S,E.createElement(PD,{count:i,current:h,limit:s,setPage:g}),A),E.createElement(P,{id:"3826701357",dynamic:[c.font(2),c.font(.875),c.width(1,"auto"),c.height(1,"auto"),c.pt(0),c.pr(0),c.pb(0),c.pl(0),c.mt(0),c.mr(0),c.mb(0),c.ml(0)]},"nav.__jsx-style-dynamic-selector{font-variant:tabular-nums;font-feature-settings:'tnum';--pagination-size:".concat(c.font(2),";font-size:").concat(c.font(.875),";width:").concat(c.width(1,"auto"),";height:").concat(c.height(1,"auto"),";padding:").concat(c.pt(0)," ").concat(c.pr(0)," ").concat(c.pb(0)," ").concat(c.pl(0),";margin:").concat(c.mt(0)," ").concat(c.mr(0)," ").concat(c.mb(0)," ").concat(c.ml(0),";}nav.__jsx-style-dynamic-selector button:last-of-type{margin-right:0;}")))};rw.defaultProps=ure;rw.displayName="GeistPagination";var MD=Ve(rw);MD.Previous=qp;MD.Next=Zp;var hre=function(t,n){var r={default:n.background,success:n.success,warning:n.warning,error:n.error,secondary:n.secondary,dark:n.foreground,lite:n.background},i=t==="lite"||t==="default"?n.foreground:n.background;return{color:i,bgColor:r[t]}},gre={top:"-1000px",left:"-1000px",transform:"none"},pre=function(t,n,r){var i={top:{top:"".concat(n.top-r,"px"),left:"".concat(n.left+n.width/2,"px"),transform:"translate(-50%, -100%)"},topStart:{top:"".concat(n.top-r,"px"),left:"".concat(n.left,"px"),transform:"translate(0, -100%)"},topEnd:{top:"".concat(n.top-r,"px"),left:"".concat(n.left+n.width,"px"),transform:"translate(-100%, -100%)"},bottom:{top:"".concat(n.bottom+r,"px"),left:"".concat(n.left+n.width/2,"px"),transform:"translate(-50%, 0)"},bottomStart:{top:"".concat(n.bottom+r,"px"),left:"".concat(n.left,"px"),transform:"translate(0, 0)"},bottomEnd:{top:"".concat(n.bottom+r,"px"),left:"".concat(n.left+n.width,"px"),transform:"translate(-100%, 0)"},left:{top:"".concat(n.top+n.height/2,"px"),left:"".concat(n.left-r,"px"),transform:"translate(-100%, -50%)"},leftStart:{top:"".concat(n.top,"px"),left:"".concat(n.left-r,"px"),transform:"translate(-100%, 0)"},leftEnd:{top:"".concat(n.top+n.height,"px"),left:"".concat(n.left-r,"px"),transform:"translate(-100%, -100%)"},right:{top:"".concat(n.top+n.height/2,"px"),left:"".concat(n.right+r,"px"),transform:"translate(0, -50%)"},rightStart:{top:"".concat(n.top,"px"),left:"".concat(n.right+r,"px"),transform:"translate(0, 0)"},rightEnd:{top:"".concat(n.top+n.height,"px"),left:"".concat(n.right+r,"px"),transform:"translate(0, -100%)"}};return i[t]||i.top},mre=function(t,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"3px",s={top:{top:"auto",right:"auto",left:"50%",bottom:"".concat(i),transform:"translate(-50%, 100%) rotate(-90deg)"},topStart:{top:"auto",right:"auto",left:"".concat(n),bottom:"".concat(i),transform:"translate(0, 100%) rotate(-90deg)"},topEnd:{top:"auto",right:"".concat(n),left:"auto",bottom:"".concat(i),transform:"translate(0, 100%) rotate(-90deg)"},bottom:{top:"".concat(i),right:"auto",left:"50%",bottom:"auto",transform:"translate(-50%, -100%) rotate(90deg)"},bottomStart:{top:"".concat(i),right:"auto",left:"".concat(n),bottom:"auto",transform:"translate(0, -100%) rotate(90deg)"},bottomEnd:{top:"".concat(i),right:"".concat(n),left:"auto",bottom:"auto",transform:"translate(0, -100%) rotate(90deg)"},left:{top:"50%",right:"0",left:"auto",bottom:"auto",transform:"translate(100%, -50%) rotate(180deg)"},leftStart:{top:"".concat(r),right:"0",left:"auto",bottom:"auto",transform:"translate(100%, -50%) rotate(180deg)"},leftEnd:{top:"auto",right:"0",left:"auto",bottom:"".concat(r),transform:"translate(100%, 50%) rotate(180deg)"},right:{top:"50%",right:"auto",left:"0",bottom:"auto",transform:"translate(-100%, -50%) rotate(0deg)"},rightStart:{top:"".concat(r),right:"auto",left:"0",bottom:"auto",transform:"translate(-100%, -50%) rotate(0deg)"},rightEnd:{top:"auto",right:"auto",left:"0",bottom:"".concat(r),transform:"translate(-100%, 50%) rotate(0deg)"}};return s[t]||s.top},fre=function(t){var n=t.placement,r=t.shadow,i=ze(),s=L.useMemo(function(){return mre(n,"var(--tooltip-icon-offset-x)","var(--tooltip-icon-offset-y)")},[n]),o=s.transform,a=s.top,l=s.left,c=s.right,d=s.bottom,u=L.useMemo(function(){return!r||i.type!=="dark"?"var(--tooltip-content-bg)":i.palette.accents_2},[i.type,r]);return E.createElement("span",{className:P.dynamic([["2440507693",[u,l,a,c,d,o]]])},E.createElement(P,{id:"2440507693",dynamic:[u,l,a,c,d,o]},"span.__jsx-style-dynamic-selector{width:0;height:0;border-style:solid;border-width:6px 7px 6px 0;border-color:transparent ".concat(u," transparent transparent;position:absolute;left:").concat(l,";top:").concat(a,";right:").concat(c,";bottom:").concat(d,";-webkit-transform:").concat(o,";-ms-transform:").concat(o,";transform:").concat(o,";}")))},_re={top:-1e3,left:-1e3,right:-1e3,bottom:-1e3,width:0,height:0},FD=function(t){if(!t||!t.current)return _re;var n=t.current.getBoundingClientRect();return ve({},n,{width:n.width||n.right-n.left,height:n.height||n.bottom-n.top,top:n.top+document.documentElement.scrollTop,bottom:n.bottom+document.documentElement.scrollTop,left:n.left+document.documentElement.scrollLeft,right:n.right+document.documentElement.scrollLeft})},yre=function(t){var n=t.children,r=t.parent,i=t.visible,s=t.offset,o=t.iconOffset,a=t.placement,l=t.type,c=t.className,d=t.hideArrow,u=ze(),h=Ge(),g=h.SCALES,p=ku("tooltip"),m=L.useRef(null),f=L.useState(gre),y=Fe(f,2),_=y[0],v=y[1],x=L.useMemo(function(){return hre(l,u.palette)},[l,u.palette]),b=l==="default";if(!r)return null;var w=function(){var C=pre(a,FD(r),s);v(C)};Kb(w),Q3(function(){return w()}),L.useEffect(function(){w()},[i]);var S=function(C){C.stopPropagation(),C.nativeEvent.stopImmediatePropagation()};return p?To.createPortal(E.createElement(Ma,{visible:i},E.createElement("div",{ref:m,onClick:S,className:P.dynamic([["2387841858",[o.x,o.y,x.bgColor,_.top,_.left,_.transform,x.color,u.layout.radius,b?u.expressiveness.shadowMedium:"none",g.width(1,"auto"),g.height(1,"auto"),g.font(1),g.pt(.65),g.pr(.9),g.pb(.65),g.pl(.9)]]])+" "+"tooltip-content ".concat(c)},E.createElement("div",{className:P.dynamic([["2387841858",[o.x,o.y,x.bgColor,_.top,_.left,_.transform,x.color,u.layout.radius,b?u.expressiveness.shadowMedium:"none",g.width(1,"auto"),g.height(1,"auto"),g.font(1),g.pt(.65),g.pr(.9),g.pb(.65),g.pl(.9)]]])+" inner"},!d&&E.createElement(fre,{placement:a,shadow:b}),n),E.createElement(P,{id:"2387841858",dynamic:[o.x,o.y,x.bgColor,_.top,_.left,_.transform,x.color,u.layout.radius,b?u.expressiveness.shadowMedium:"none",g.width(1,"auto"),g.height(1,"auto"),g.font(1),g.pt(.65),g.pr(.9),g.pb(.65),g.pl(.9)]},".tooltip-content.__jsx-style-dynamic-selector{--tooltip-icon-offset-x:".concat(o.x,";--tooltip-icon-offset-y:").concat(o.y,";--tooltip-content-bg:").concat(x.bgColor,";box-sizing:border-box;position:absolute;top:").concat(_.top,";left:").concat(_.left,";-webkit-transform:").concat(_.transform,";-ms-transform:").concat(_.transform,";transform:").concat(_.transform,";background-color:var(--tooltip-content-bg);color:").concat(x.color,";border-radius:").concat(u.layout.radius,";padding:0;z-index:1000;box-shadow:").concat(b?u.expressiveness.shadowMedium:"none",";width:").concat(g.width(1,"auto"),";height:").concat(g.height(1,"auto"),";}.inner.__jsx-style-dynamic-selector{box-sizing:border-box;position:relative;font-size:").concat(g.font(1),";padding:").concat(g.pt(.65)," ").concat(g.pr(.9)," ").concat(g.pb(.65)," ").concat(g.pl(.9),";height:100%;}")))),p):null},vre=["children","initialVisible","text","offset","placement","portalClassName","enterDelay","leaveDelay","trigger","type","className","onVisibleChange","hideArrow","visible"],xre={initialVisible:!1,hideArrow:!1,type:"default",trigger:"hover",placement:"top",enterDelay:100,leaveDelay:150,offset:12,className:"",portalClassName:"",onVisibleChange:function(){}},iw=function(t){var n=t.children,r=t.initialVisible,i=t.text,s=t.offset,o=t.placement,a=t.portalClassName,l=t.enterDelay,c=t.leaveDelay,d=t.trigger,u=t.type,h=t.className,g=t.onVisibleChange,p=t.hideArrow,m=t.visible,f=Re(t,vre),y=L.useRef(),_=L.useRef(null),v=L.useState(r),x=Fe(v,2),b=x[0],w=x[1],S=L.useMemo(function(){if(!(_!=null&&_.current))return{x:"0.75em",y:"0.75em"};var M=FD(_);return{x:"".concat(M.width?M.width/2:0,"px"),y:"".concat(M.height?M.height/2:0,"px")}},[_==null?void 0:_.current]),A={type:u,visible:b,offset:s,placement:o,hideArrow:p,iconOffset:S,parent:_,className:a},C=function(D){var B=function(){clearTimeout(y.current),y.current=void 0},I=function($){w($),g($),B()};if(B(),D){y.current=window.setTimeout(function(){return I(!0)},l);return}var N=d==="click"?0:c;y.current=window.setTimeout(function(){return I(!1)},N)},k=function(D){return d==="hover"&&C(D)},T=function(){return d==="click"&&C(!b)};return cD(_,function(){return d==="click"&&C(!1)}),L.useEffect(function(){m!==void 0&&C(m)},[m]),E.createElement("div",ve({ref:_,onClick:T,onMouseEnter:function(){return k(!0)},onMouseLeave:function(){return k(!1)}},Ue(f),{className:"jsx-418573366 "+"tooltip ".concat(h)}),n,E.createElement(yre,A,i),E.createElement(P,{id:"418573366"},".tooltip.jsx-418573366{width:-webkit-max-content;width:-moz-max-content;width:max-content;display:inline-block;}"))};iw.defaultProps=xre;iw.displayName="GeistTooltip";var bre=Ve(iw),wre={disableItemsAutoClose:!1,onItemClick:function(){}},RD=E.createContext(wre),Ere=function(){return L.useContext(RD)},Sre=["content","children","trigger","placement","initialVisible","portalClassName","disableItemsAutoClose","onVisibleChange","visible"],Are={disableItemsAutoClose:!1,trigger:"click",placement:"bottom",portalClassName:"",initialVisible:!1,hideArrow:!1,type:"default",enterDelay:100,leaveDelay:150,offset:12,className:"",onVisibleChange:function(){}},sw=function(t){var n=t.content,r=t.children,i=t.trigger,s=t.placement,o=t.initialVisible,a=t.portalClassName,l=t.disableItemsAutoClose,c=t.onVisibleChange,d=t.visible,u=Re(t,Sre),h=Ge(),g=h.SCALES,p=L.useState(o),m=Fe(p,2),f=m[0],y=m[1],_=L.useMemo(function(){return _K(n)},[n]),v=function(){b(!1)},x=L.useMemo(function(){return{onItemClick:v,disableItemsAutoClose:l}},[l]),b=function(S){y(S),c(S)};return L.useEffect(function(){d!==void 0&&b(d)},[d]),E.createElement(RD.Provider,{value:x},E.createElement(bre,ve({text:_,trigger:i,placement:s,portalClassName:"popover ".concat(a),visible:f,onVisibleChange:b},u),r,E.createElement(P,{id:"622655983",dynamic:[g.pt(.9),g.pr(0),g.pb(.9),g.pl(0)]},".tooltip-content.popover > .inner{padding:".concat(g.pt(.9)," ").concat(g.pr(0)," ").concat(g.pb(.9)," ").concat(g.pl(0),";}"))))};sw.defaultProps=Are;sw.displayName="GeistPopover";var DD=Ve(sw),kre=["children","line","title","className","onClick","disableAutoClose"],Cre={line:!1,title:!1,disableAutoClose:!1,className:""},ow=function(t){var n=t.children,r=t.line,i=t.title,s=t.className,o=t.onClick,a=t.disableAutoClose,l=Re(t,kre),c=ze(),d=Ge(),u=d.SCALES,h=Ere(),g=h.disableItemsAutoClose,p=h.onItemClick,m=!!o,f=a||g||i||r,y=function(v){if(o&&o(v),f)return v.stopPropagation();p(v)};return E.createElement(E.Fragment,null,E.createElement("div",ve({onClick:y},Ue(l),{className:P.dynamic([["190621384",[c.palette.accents_5,u.font(.875),u.width(1,"auto"),u.height(1,"auto"),u.mt(0),u.mr(0),u.mb(0),u.ml(0),u.pt(.5),u.pr(.75),u.pb(.5),u.pl(.75),m?"pointer":"default",c.palette.foreground,c.palette.border,u.height(.0625),u.mt(.35),u.mr(0),u.mb(.35),u.ml(0),u.width(1,"100%"),u.font(.925),c.palette.foreground]]])+" "+"item ".concat(r?"line":""," ").concat(i?"title":""," ").concat(s)}),n,E.createElement(P,{id:"190621384",dynamic:[c.palette.accents_5,u.font(.875),u.width(1,"auto"),u.height(1,"auto"),u.mt(0),u.mr(0),u.mb(0),u.ml(0),u.pt(.5),u.pr(.75),u.pb(.5),u.pl(.75),m?"pointer":"default",c.palette.foreground,c.palette.border,u.height(.0625),u.mt(.35),u.mr(0),u.mb(.35),u.ml(0),u.width(1,"100%"),u.font(.925),c.palette.foreground]},".item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;box-sizing:border-box;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:".concat(c.palette.accents_5,";-webkit-transition:color,background-color 150ms linear;transition:color,background-color 150ms linear;line-height:1.25em;font-size:").concat(u.font(.875),";width:").concat(u.width(1,"auto"),";height:").concat(u.height(1,"auto"),";margin:").concat(u.mt(0)," ").concat(u.mr(0)," ").concat(u.mb(0)," ").concat(u.ml(0),";padding:").concat(u.pt(.5)," ").concat(u.pr(.75)," ").concat(u.pb(.5)," ").concat(u.pl(.75),";cursor:").concat(m?"pointer":"default",";}.item.__jsx-style-dynamic-selector:hover{color:").concat(c.palette.foreground,";}.item.line.__jsx-style-dynamic-selector{line-height:0;padding:0;background-color:").concat(c.palette.border,";height:").concat(u.height(.0625),";margin:").concat(u.mt(.35)," ").concat(u.mr(0)," ").concat(u.mb(.35)," ").concat(u.ml(0),";width:").concat(u.width(1,"100%"),";}.item.title.__jsx-style-dynamic-selector{font-weight:500;font-size:").concat(u.font(.925),";color:").concat(c.palette.foreground,";}"))),i&&E.createElement(aw,{line:!0,title:!1}))};ow.defaultProps=Cre;ow.displayName="GeistPopoverItem";var aw=Ve(ow);DD.Item=aw;DD.Option=aw;var Tre=["value","max","className","type","colors","fixedTop","fixedBottom"],Nre={value:0,max:100,type:"default",fixedTop:!1,fixedBottom:!1,className:""},Lre=function(t,n,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s={default:n.foreground,success:n.success,secondary:n.secondary,warning:n.warning,error:n.error},o=Object.keys(i);if(o.length===0)return s[r];var a=o.find(function(l){return t<=+l});return!a||Number.isNaN(+a)?s[r]:i[+a]},lw=function(t){var n=t.value,r=t.max,i=t.className,s=t.type,o=t.colors,a=t.fixedTop,l=t.fixedBottom,c=Re(t,Tre),d=ze(),u=Ge(),h=u.SCALES,g=gD(n,r),p=Lre(g,d.palette,s,o),m=a||l;return E.createElement("div",{className:P.dynamic([["1239801602",[d.palette.accents_2,d.layout.radius,h.width(1,"100%"),h.height(.625),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),a?0:"unset",l?0:"unset",d.layout.radius,p,g]]])+" "+"progress ".concat(i," ").concat(m?"fixed":"")},E.createElement("div",{title:"".concat(g,"%"),className:P.dynamic([["1239801602",[d.palette.accents_2,d.layout.radius,h.width(1,"100%"),h.height(.625),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),a?0:"unset",l?0:"unset",d.layout.radius,p,g]]])+" inner"}),E.createElement("progress",ve({value:n,max:r},Ue(c),{className:P.dynamic([["1239801602",[d.palette.accents_2,d.layout.radius,h.width(1,"100%"),h.height(.625),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),a?0:"unset",l?0:"unset",d.layout.radius,p,g]]])+" "+(i||"")})),E.createElement(P,{id:"1239801602",dynamic:[d.palette.accents_2,d.layout.radius,h.width(1,"100%"),h.height(.625),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),a?0:"unset",l?0:"unset",d.layout.radius,p,g]},"progress.__jsx-style-dynamic-selector{position:fixed;top:-1000px;opacity:0;visibility:hidden;pointer-events:none;}.progress.__jsx-style-dynamic-selector{position:relative;background-color:".concat(d.palette.accents_2,";border-radius:").concat(d.layout.radius,";width:").concat(h.width(1,"100%"),";height:").concat(h.height(.625),";padding:").concat(h.pt(0)," ").concat(h.pr(0)," ").concat(h.pb(0)," ").concat(h.pl(0),";margin:").concat(h.mt(0)," ").concat(h.mr(0)," ").concat(h.mb(0)," ").concat(h.ml(0),";}.fixed.__jsx-style-dynamic-selector{position:fixed;top:").concat(a?0:"unset",";bottom:").concat(l?0:"unset",";left:0;border-radius:0;}.fixed.__jsx-style-dynamic-selector>.inner.__jsx-style-dynamic-selector{border-radius:0;}.inner.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;height:100%;bottom:0;-webkit-transition:all 100ms ease-in;transition:all 100ms ease-in;border-radius:").concat(d.layout.radius,";background-color:").concat(p,";width:").concat(g,"%;}")))};lw.defaultProps=Nre;lw.displayName="GeistProgress";Ve(lw);var Ire={disabledAll:!1,inGroup:!1},zD=E.createContext(Ire),Pre=function(){return E.useContext(zD)},Mre=["className","children"],Fre={className:""},cw=function(t){var n=t.className,r=t.children,i=Re(t,Mre),s=ze(),o=Ge(),a=o.SCALES;return E.createElement("span",ve({},Ue(i),{className:P.dynamic([["2489497926",[s.palette.accents_3,a.font(.85,"calc(var(--radio-size) * 0.85)"),a.width(1,"auto"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0,"calc(var(--radio-size) + var(--radio-size) * 0.375)")]]])+" "+(n||"")}),r,E.createElement(P,{id:"2489497926",dynamic:[s.palette.accents_3,a.font(.85,"calc(var(--radio-size) * 0.85)"),a.width(1,"auto"),a.height(1,"auto"),a.pt(0),a.pr(0),a.pb(0),a.pl(0),a.mt(0),a.mr(0),a.mb(0),a.ml(0,"calc(var(--radio-size) + var(--radio-size) * 0.375)")]},"span.__jsx-style-dynamic-selector{color:".concat(s.palette.accents_3,";font-size:").concat(a.font(.85,"calc(var(--radio-size) * 0.85)"),";width:").concat(a.width(1,"auto"),";height:").concat(a.height(1,"auto"),";padding:").concat(a.pt(0)," ").concat(a.pr(0)," ").concat(a.pb(0)," ").concat(a.pl(0),";margin:").concat(a.mt(0)," ").concat(a.mr(0)," ").concat(a.mb(0)," ").concat(a.ml(0,"calc(var(--radio-size) + var(--radio-size) * 0.375)"),";}")))};cw.defaultProps=Fre;cw.displayName="GeistRadioDescription";var dw=Ve(cw),Rre=function(t,n){var r={default:{label:t.foreground,border:t.border,bg:t.foreground},secondary:{label:t.foreground,border:t.border,bg:t.foreground},success:{label:t.success,border:t.success,bg:t.success},warning:{label:t.warning,border:t.warning,bg:t.warning},error:{label:t.error,border:t.error,bg:t.error}};return n?r[n]:r.default},Dre=["className","checked","onChange","disabled","type","value","children"],zre={type:"default",disabled:!1,className:""},uw=function(t){var n=t.className,r=t.checked,i=t.onChange,s=t.disabled,o=t.type,a=t.value,l=t.children,c=Re(t,Dre),d=ze(),u=Ge(),h=u.SCALES,g=L.useState(!!r),p=Fe(g,2),m=p[0],f=p[1],y=Pre(),_=y.value,v=y.disabledAll,x=y.inGroup,b=y.updateState,w=yi(l,dw),S=Fe(w,2),A=S[0],C=S[1];x&&(r!==void 0&&Di('Remove props "checked" if in the Radio.Group.',"Radio"),a===void 0&&Di('Props "value" must be deinfed if in the Radio.Group.',"Radio"),L.useEffect(function(){f(_===a)},[_,a]));var k=L.useMemo(function(){return Rre(d.palette,o)},[d.palette,o]),T=k.label,M=k.border,D=k.bg,B=L.useMemo(function(){return s||v},[s,v]),I=function(V){if(!B){var $={target:{checked:!m},stopPropagation:V.stopPropagation,preventDefault:V.preventDefault,nativeEvent:V};f(!m),x&&b&&b(a),i&&i($)}};return L.useEffect(function(){r!==void 0&&f(!!r)},[r]),E.createElement("div",{className:P.dynamic([["293719529",[h.font(1),h.width(1,"initial"),h.height(1,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),B?d.palette.accents_4:T,B?"not-allowed":"pointer",M,B?d.palette.accents_4:D]]])+" "+"radio ".concat(n)},E.createElement("label",{className:P.dynamic([["293719529",[h.font(1),h.width(1,"initial"),h.height(1,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),B?d.palette.accents_4:T,B?"not-allowed":"pointer",M,B?d.palette.accents_4:D]]])},E.createElement("input",ve({type:"radio",value:a,checked:m,onChange:I},Ue(c),{className:P.dynamic([["293719529",[h.font(1),h.width(1,"initial"),h.height(1,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),B?d.palette.accents_4:T,B?"not-allowed":"pointer",M,B?d.palette.accents_4:D]]])})),E.createElement("span",{className:P.dynamic([["293719529",[h.font(1),h.width(1,"initial"),h.height(1,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),B?d.palette.accents_4:T,B?"not-allowed":"pointer",M,B?d.palette.accents_4:D]]])+" name"},E.createElement("span",{className:P.dynamic([["293719529",[h.font(1),h.width(1,"initial"),h.height(1,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),B?d.palette.accents_4:T,B?"not-allowed":"pointer",M,B?d.palette.accents_4:D]]])+" "+"point ".concat(m?"active":"")}),A),C&&C),E.createElement(P,{id:"293719529",dynamic:[h.font(1),h.width(1,"initial"),h.height(1,"auto"),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(0),h.mr(0),h.mb(0),h.ml(0),B?d.palette.accents_4:T,B?"not-allowed":"pointer",M,B?d.palette.accents_4:D]},"input.__jsx-style-dynamic-selector{opacity:0;visibility:hidden;overflow:hidden;width:1px;height:1px;top:-1000px;right:-1000px;position:fixed;font-size:0;}.radio.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;position:relative;--radio-size:".concat(h.font(1),";width:").concat(h.width(1,"initial"),";height:").concat(h.height(1,"auto"),";padding:").concat(h.pt(0)," ").concat(h.pr(0)," ").concat(h.pb(0)," ").concat(h.pl(0),";margin:").concat(h.mt(0)," ").concat(h.mr(0)," ").concat(h.mb(0)," ").concat(h.ml(0),";}label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;color:").concat(B?d.palette.accents_4:T,";cursor:").concat(B?"not-allowed":"pointer",";}.name.__jsx-style-dynamic-selector{font-size:var(--radio-size);font-weight:bold;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.point.__jsx-style-dynamic-selector{height:var(--radio-size);width:var(--radio-size);border-radius:50%;border:1px solid ").concat(M,";-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;position:relative;display:inline-block;-webkit-transform:scale(0.875);-ms-transform:scale(0.875);transform:scale(0.875);margin-right:calc(var(--radio-size) * 0.375);}.point.__jsx-style-dynamic-selector:before{content:'';position:absolute;left:-1px;top:-1px;-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);height:var(--radio-size);width:var(--radio-size);border-radius:50%;background-color:").concat(B?d.palette.accents_4:D,";}.point.active.__jsx-style-dynamic-selector:before{-webkit-transform:scale(0.875);-ms-transform:scale(0.875);transform:scale(0.875);-webkit-transition:all 0.2s ease 0s;transition:all 0.2s ease 0s;}")))};uw.defaultProps=zre;uw.displayName="GeistRadio";var hw=Ve(uw),Ore=["disabled","onChange","value","children","className","initialValue","useRow"],Bre={disabled:!1,className:"",useRow:!1},gw=function(t){var n=t.disabled,r=t.onChange,i=t.value,s=t.children,o=t.className,a=t.initialValue,l=t.useRow,c=Re(t,Ore),d=Ge(),u=d.SCALES,h=L.useState(a),g=Fe(h,2),p=g[0],m=g[1],f=function(v){m(v),r&&r(v)},y=L.useMemo(function(){return{updateState:f,disabledAll:n,inGroup:!0,value:p}},[n,p]);return L.useEffect(function(){i!==void 0&&m(i)},[i]),E.createElement(zD.Provider,{value:y},E.createElement("div",ve({},Ue(c),{className:P.dynamic([["1223822443",[l?"col":"column",u.font(1),u.width(1,"auto"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),l?0:"var(--radio-group-gap)",l?"var(--radio-group-gap)":0,u.font(1)]]])+" "+"radio-group ".concat(o)}),s),E.createElement(P,{id:"1223822443",dynamic:[l?"col":"column",u.font(1),u.width(1,"auto"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),l?0:"var(--radio-group-gap)",l?"var(--radio-group-gap)":0,u.font(1)]},".radio-group.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:".concat(l?"col":"column",";-ms-flex-direction:").concat(l?"col":"column",";flex-direction:").concat(l?"col":"column",";--radio-group-gap:").concat(u.font(1),";width:").concat(u.width(1,"auto"),";height:").concat(u.height(1,"auto"),";padding:").concat(u.pt(0)," ").concat(u.pr(0)," ").concat(u.pb(0)," ").concat(u.pl(0),";margin:").concat(u.mt(0)," ").concat(u.mr(0)," ").concat(u.mb(0)," ").concat(u.ml(0),";}.radio-group.__jsx-style-dynamic-selector .radio{margin-top:").concat(l?0:"var(--radio-group-gap)",";margin-left:").concat(l?"var(--radio-group-gap)":0,";--radio-size:").concat(u.font(1),";}.radio-group.__jsx-style-dynamic-selector .radio:first-of-type{margin:0;}")))};gw.defaultProps=Bre;gw.displayName="GeistRadioGroup";var jre=Ve(gw);hw.Group=jre;hw.Description=dw;hw.Desc=dw;var OD=function(){return E.createElement("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision"},E.createElement("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"}))};OD.displayName="GeistRatingIcon";var Ure=["type","className","icon","count","value","initialValue","onValueChange","locked","onLockedChange"];q3(2,3,4,5,6,7,8,9,10);q3(0,1,2,3,4,5,6,7,8,9,10);var $re={type:"default",className:"",icon:E.createElement(OD,null),count:5,initialValue:1,locked:!1},Gre=function(t,n){var r={default:n.foreground,success:n.success,warning:n.warning,error:n.error};return r[t]||r.default},pw=function(t){var n=t.type,r=t.className,i=t.icon,s=t.count,o=t.value,a=t.initialValue,l=t.onValueChange,c=t.locked,d=t.onLockedChange,u=Re(t,Ure),h=ze(),g=Ge(),p=g.SCALES,m=L.useMemo(function(){return Gre(n,h.palette)},[n,h.palette]),f=L.useState(a),y=Fe(f,2),_=y[0],v=y[1],x=L.useState(c),b=Fe(x,2),w=b[0],S=b[1],A=function(D){S(D),d&&d(D)},C=function(D){v(D);var B=D>s?s:D;l&&l(B)},k=function(D){if(w)return A(!1);C(D),A(!0)},T=function(D){w||C(D)};return L.useEffect(function(){typeof o>"u"||v(o<0?0:o)},[o]),E.createElement("div",ve({},Ue(u),{className:P.dynamic([["884600549",[p.font(1),p.width(1,"auto"),p.height(1,"auto"),p.pt(0),p.pr(0),p.pb(0),p.pl(0),p.mt(0),p.mr(0),p.mb(0),p.ml(0),m,w?"default":"pointer",m]]])+" "+"rating ".concat(r)}),Zr(Array(s)).map(function(M,D){return E.createElement("div",{key:D,onMouseEnter:function(){return T(D+1)},onClick:function(){return k(D+1)},className:P.dynamic([["884600549",[p.font(1),p.width(1,"auto"),p.height(1,"auto"),p.pt(0),p.pr(0),p.pb(0),p.pl(0),p.mt(0),p.mr(0),p.mb(0),p.ml(0),m,w?"default":"pointer",m]]])+" "+"icon-box ".concat(D+1<=_?"hovered":"")},i)}),E.createElement(P,{id:"884600549",dynamic:[p.font(1),p.width(1,"auto"),p.height(1,"auto"),p.pt(0),p.pr(0),p.pb(0),p.pl(0),p.mt(0),p.mr(0),p.mb(0),p.ml(0),m,w?"default":"pointer",m]},".rating.__jsx-style-dynamic-selector{box-sizing:border-box;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;--rating-font-size:".concat(p.font(1),";font-size:var(--rating-font-size);width:").concat(p.width(1,"auto"),";height:").concat(p.height(1,"auto"),";padding:").concat(p.pt(0)," ").concat(p.pr(0)," ").concat(p.pb(0)," ").concat(p.pl(0),";margin:").concat(p.mt(0)," ").concat(p.mr(0)," ").concat(p.mb(0)," ").concat(p.ml(0),";}.icon-box.__jsx-style-dynamic-selector{box-sizing:border-box;color:").concat(m,";width:calc(var(--rating-font-size) * 1.5);height:calc(var(--rating-font-size) * 1.5);margin-right:calc(var(--rating-font-size) * 1 / 5);cursor:").concat(w?"default":"pointer",";}.icon-box.__jsx-style-dynamic-selector svg{width:100%;height:100%;fill:transparent;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:-webkit-transform,color,fill 30ms linear;-webkit-transition:transform,color,fill 30ms linear;transition:transform,color,fill 30ms linear;}.hovered.__jsx-style-dynamic-selector svg{fill:").concat(m,";-webkit-transform:scale(0.9);-ms-transform:scale(0.9);transform:scale(0.9);}")))};pw.defaultProps=$re;pw.displayName="GeistRating";Ve(pw);var BD=function(){return E.createElement("svg",{viewBox:"0 0 24 24",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:"jsx-2742933678"},E.createElement("path",{d:"M6 9l6 6 6-6",className:"jsx-2742933678"}),E.createElement(P,{id:"2742933678"},"svg.jsx-2742933678{color:inherit;stroke:currentColor;-webkit-transition:all 200ms ease;transition:all 200ms ease;width:1.214em;height:1.214em;}"))};BD.displayName="GeistSelectIcon";var Vre=E.memo(BD),Hre={visible:!1,disableAll:!1},jD=E.createContext(Hre),UD=function(){return E.useContext(jD)},Wre={className:"",dropdownStyle:{}},mw=E.forwardRef(function(e,t){var n=e.visible,r=e.children,i=e.className,s=e.dropdownStyle,o=e.disableMatchWidth,a=e.getPopupContainer,l=ze(),c=L.useRef(null),d=UD(),u=d.ref;return L.useImperativeHandle(t,function(){return c.current}),E.createElement(eD,{parent:u,visible:n,disableMatchWidth:o,getPopupContainer:a},E.createElement("div",{ref:c,style:s,className:P.dynamic([["2782510679",[l.layout.radius,l.expressiveness.shadowLarge,l.palette.background]]])+" "+"select-dropdown ".concat(i)},r,E.createElement(P,{id:"2782510679",dynamic:[l.layout.radius,l.expressiveness.shadowLarge,l.palette.background]},".select-dropdown.__jsx-style-dynamic-selector{border-radius:".concat(l.layout.radius,";box-shadow:").concat(l.expressiveness.shadowLarge,";background-color:").concat(l.palette.background,";max-height:17em;overflow-y:auto;overflow-anchor:none;padding:0.38em 0;-webkit-scroll-behavior:smooth;-moz-scroll-behavior:smooth;-ms-scroll-behavior:smooth;scroll-behavior:smooth;}"))))});mw.defaultProps=Wre;mw.displayName="GeistSelectDropdown";var Xre=function(t){var n=t.onClick,r=ze(),i=function(o){o.preventDefault(),o.stopPropagation(),o.nativeEvent.stopImmediatePropagation(),n&&n(o)};return E.createElement("div",{onClick:i,className:P.dynamic([["1984024521",[r.palette.accents_3,r.palette.foreground]]])+" clear-icon"},E.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:P.dynamic([["1984024521",[r.palette.accents_3,r.palette.foreground]]])},E.createElement("path",{d:"M18 6L6 18",className:P.dynamic([["1984024521",[r.palette.accents_3,r.palette.foreground]]])}),E.createElement("path",{d:"M6 6l12 12",className:P.dynamic([["1984024521",[r.palette.accents_3,r.palette.foreground]]])})),E.createElement(P,{id:"1984024521",dynamic:[r.palette.accents_3,r.palette.foreground]},".clear-icon.__jsx-style-dynamic-selector{padding:0 0 0 0.5em;margin:0;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100%;cursor:pointer;box-sizing:border-box;-webkit-transition:color 150ms ease 0s;transition:color 150ms ease 0s;color:".concat(r.palette.accents_3,";visibility:visible;opacity:1;}.clear-icon.__jsx-style-dynamic-selector:hover{color:").concat(r.palette.foreground,";}svg.__jsx-style-dynamic-selector{color:currentColor;width:1em;height:1em;}")))},Yre=E.memo(Xre),$D=function(t){var n=t.disabled,r=t.onClear,i=t.children,s=ze();return E.createElement(W1,null,E.createElement("div",{className:P.dynamic([["3357578496",[s.layout.radius,s.palette.accents_2,n?s.palette.accents_4:s.palette.accents_6]]])+" item"},i,!!r&&E.createElement(Yre,{onClick:r})),E.createElement(P,{id:"3357578496",dynamic:[s.layout.radius,s.palette.accents_2,n?s.palette.accents_4:s.palette.accents_6]},".item.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;justify-items:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1;padding:0 0.5em;font-size:var(--select-font-size);height:calc(var(--select-font-size) * 2);border-radius:".concat(s.layout.radius,";background-color:").concat(s.palette.accents_2,";color:").concat(n?s.palette.accents_4:s.palette.accents_6,";}.item.__jsx-style-dynamic-selector>div:not(.clear-icon),.item.__jsx-style-dynamic-selector>div:not(.clear-icon):hover{border-radius:0;background-color:transparent;padding:0;margin:0;color:inherit;}")))};$D.displayName="GeistSelectMultipleValue";var qre=function(t,n){var r={default:{border:t.border,borderActive:t.foreground,iconBorder:t.accents_5,placeholderColor:t.accents_3},secondary:{border:t.border,borderActive:t.foreground,iconBorder:t.accents_5,placeholderColor:t.accents_3},success:{border:t.successLight,borderActive:t.successDark,iconBorder:t.success,placeholderColor:t.accents_3},warning:{border:t.warningLight,borderActive:t.warningDark,iconBorder:t.warning,placeholderColor:t.accents_3},error:{border:t.errorLight,borderActive:t.errorDark,iconBorder:t.error,placeholderColor:t.error}};return n?r[n]:r.default},GD=E.forwardRef(function(e,t){var n=e.visible,r=e.onBlur,i=e.onFocus,s=L.useRef(null);return L.useImperativeHandle(t,function(){return s.current}),L.useEffect(function(){if(n){var o;(o=s.current)===null||o===void 0||o.focus()}},[n]),E.createElement(E.Fragment,null,E.createElement("input",{ref:s,type:"search",role:"combobox","aria-haspopup":"listbox",readOnly:!0,unselectable:"on","aria-expanded":n,onBlur:r,onFocus:i,className:"jsx-2813108835"}),E.createElement(P,{id:"2813108835"},"input.jsx-2813108835{position:fixed;top:-10000px;left:-10000px;opacity:0;z-index:-1;width:0;height:0;padding:0;font-size:0;border:none;}"))});GD.displayName="GeistSelectInput";var Zre=["children","type","disabled","initialValue","value","icon","onChange","pure","multiple","clearable","placeholder","className","dropdownClassName","dropdownStyle","disableMatchWidth","getPopupContainer","onDropdownVisibleChange"],Jre={disabled:!1,type:"default",icon:Vre,pure:!1,multiple:!1,clearable:!0,className:"",disableMatchWidth:!1,onDropdownVisibleChange:function(){}},fw=E.forwardRef(function(e,t){var n=e.children,r=e.type,i=e.disabled,s=e.initialValue,o=e.value,a=e.icon,l=e.onChange,c=e.pure,d=e.multiple,u=e.clearable,h=e.placeholder,g=e.className,p=e.dropdownClassName,m=e.dropdownStyle,f=e.disableMatchWidth,y=e.getPopupContainer,_=e.onDropdownVisibleChange,v=Re(e,Zre),x=ze(),b=Ge(),w=b.SCALES,S=L.useRef(null),A=L.useRef(null),C=L.useRef(null),k=L.useState(!1),T=Fe(k,2),M=T[0],D=T[1],B=L.useState(!1),I=Fe(B,2),N=I[0],V=I[1],$=vi(function(){return!d||Array.isArray(s)?s:typeof s>"u"?[]:[s]}),Q=Fe($,3),se=Q[0],te=Q[1],de=Q[2],Ee=L.useMemo(function(){return Array.isArray(se)?se.length===0:!se},[se]),oe=L.useMemo(function(){return qre(x.palette,r)},[x.palette,r]),_e=oe.border,De=oe.borderActive,We=oe.iconBorder,Ye=oe.placeholderColor,pe=function(ae){_(ae),D(ae)},ye=function(ae){te(function(ce){return Array.isArray(ce)?ce.includes(ae)?ce.filter(function(he){return he!==ae}):[].concat(Zr(ce),[ae]):ae}),l&&l(de.current),d||pe(!1)},Ke=L.useMemo(function(){return{value:se,visible:M,updateValue:ye,updateVisible:pe,ref:S,disableAll:i}},[M,i,S,se,d]),tt=function(ae){ae.stopPropagation(),ae.nativeEvent.stopImmediatePropagation(),ae.preventDefault(),!i&&(pe(!M),ae.preventDefault())},dt=function(ae){M&&ae.preventDefault()};L.useEffect(function(){o!==void 0&&te(o)},[o]),L.useImperativeHandle(t,function(){return{focus:function(){var ae;return(ae=A.current)===null||ae===void 0?void 0:ae.focus()},blur:function(){var ae;return(ae=A.current)===null||ae===void 0?void 0:ae.blur()},scrollTo:function(ae){var ce;return(ce=C.current)===null||ce===void 0?void 0:ce.scrollTo(ae)}}},[A,C]);var it=L.useMemo(function(){var ne=W3(n,"value",se),ae=Fe(ne,2),ce=ae[1];return E.Children.map(ce,function(he){if(!E.isValidElement(he))return null;var me=E.cloneElement(he,{preventAllEvents:!0});return d?E.createElement($D,{disabled:i,onClear:u?function(){return ye(he.props.value)}:null},me):me})},[se,n,d]),Y=function(){pe(!1),V(!1)};return E.createElement(jD.Provider,{value:Ke},E.createElement("div",ve({ref:S,onClick:tt,onMouseDown:dt},Ue(v),{className:P.dynamic([["3282295248",[i?"not-allowed":"pointer",_e,x.layout.radius,i?x.palette.accents_1:x.palette.background,w.font(.875),w.height(2.25),w.width(1,"initial"),w.pt(0),w.pr(.334),w.pb(0),w.pl(.667),w.mt(0),w.mr(0),w.mb(0),w.ml(0),w.pt(.334),w.pr(.334),w.pb(.334),w.pl(.667),i?x.palette.border:De,i?x.palette.accents_5:De,i?x.palette.accents_4:x.palette.foreground,Ye,x.layout.gapQuarter,M?"180":"0",We]]])+" "+"select ".concat(N||M?"active":""," ").concat(d?"multiple":""," ").concat(g)}),E.createElement(GD,{ref:A,visible:M,onBlur:Y,onFocus:function(){return V(!0)}}),Ee&&E.createElement("span",{className:P.dynamic([["3282295248",[i?"not-allowed":"pointer",_e,x.layout.radius,i?x.palette.accents_1:x.palette.background,w.font(.875),w.height(2.25),w.width(1,"initial"),w.pt(0),w.pr(.334),w.pb(0),w.pl(.667),w.mt(0),w.mr(0),w.mb(0),w.ml(0),w.pt(.334),w.pr(.334),w.pb(.334),w.pl(.667),i?x.palette.border:De,i?x.palette.accents_5:De,i?x.palette.accents_4:x.palette.foreground,Ye,x.layout.gapQuarter,M?"180":"0",We]]])+" value placeholder"},E.createElement(Zb,{height:"var(--select-height)"},h)),se&&!d&&E.createElement("span",{className:P.dynamic([["3282295248",[i?"not-allowed":"pointer",_e,x.layout.radius,i?x.palette.accents_1:x.palette.background,w.font(.875),w.height(2.25),w.width(1,"initial"),w.pt(0),w.pr(.334),w.pb(0),w.pl(.667),w.mt(0),w.mr(0),w.mb(0),w.ml(0),w.pt(.334),w.pr(.334),w.pb(.334),w.pl(.667),i?x.palette.border:De,i?x.palette.accents_5:De,i?x.palette.accents_4:x.palette.foreground,Ye,x.layout.gapQuarter,M?"180":"0",We]]])+" value"},it),se&&d&&E.createElement(W1.Container,{gap:.5},it),E.createElement(mw,{ref:C,visible:M,className:p,dropdownStyle:m,disableMatchWidth:f,getPopupContainer:y},n),!c&&E.createElement("div",{className:P.dynamic([["3282295248",[i?"not-allowed":"pointer",_e,x.layout.radius,i?x.palette.accents_1:x.palette.background,w.font(.875),w.height(2.25),w.width(1,"initial"),w.pt(0),w.pr(.334),w.pb(0),w.pl(.667),w.mt(0),w.mr(0),w.mb(0),w.ml(0),w.pt(.334),w.pr(.334),w.pb(.334),w.pl(.667),i?x.palette.border:De,i?x.palette.accents_5:De,i?x.palette.accents_4:x.palette.foreground,Ye,x.layout.gapQuarter,M?"180":"0",We]]])+" icon"},E.createElement(a,{className:P.dynamic([["3282295248",[i?"not-allowed":"pointer",_e,x.layout.radius,i?x.palette.accents_1:x.palette.background,w.font(.875),w.height(2.25),w.width(1,"initial"),w.pt(0),w.pr(.334),w.pb(0),w.pl(.667),w.mt(0),w.mr(0),w.mb(0),w.ml(0),w.pt(.334),w.pr(.334),w.pb(.334),w.pl(.667),i?x.palette.border:De,i?x.palette.accents_5:De,i?x.palette.accents_4:x.palette.foreground,Ye,x.layout.gapQuarter,M?"180":"0",We]]])})),E.createElement(P,{id:"3282295248",dynamic:[i?"not-allowed":"pointer",_e,x.layout.radius,i?x.palette.accents_1:x.palette.background,w.font(.875),w.height(2.25),w.width(1,"initial"),w.pt(0),w.pr(.334),w.pb(0),w.pl(.667),w.mt(0),w.mr(0),w.mb(0),w.ml(0),w.pt(.334),w.pr(.334),w.pb(.334),w.pl(.667),i?x.palette.border:De,i?x.palette.accents_5:De,i?x.palette.accents_4:x.palette.foreground,Ye,x.layout.gapQuarter,M?"180":"0",We]},".select.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;cursor:".concat(i?"not-allowed":"pointer",";max-width:90vw;overflow:hidden;-webkit-transition:border 150ms ease-in 0s,color 200ms ease-out 0s, box-shadow 200ms ease 0s;transition:border 150ms ease-in 0s,color 200ms ease-out 0s, box-shadow 200ms ease 0s;border:1px solid ").concat(_e,";border-radius:").concat(x.layout.radius,";background-color:").concat(i?x.palette.accents_1:x.palette.background,";--select-font-size:").concat(w.font(.875),";--select-height:").concat(w.height(2.25),";min-width:11.5em;width:").concat(w.width(1,"initial"),";height:var(--select-height);padding:").concat(w.pt(0)," ").concat(w.pr(.334)," ").concat(w.pb(0)," ").concat(w.pl(.667),";margin:").concat(w.mt(0)," ").concat(w.mr(0)," ").concat(w.mb(0)," ").concat(w.ml(0),";}.multiple.__jsx-style-dynamic-selector{height:auto;min-height:var(--select-height);padding:").concat(w.pt(.334)," ").concat(w.pr(.334)," ").concat(w.pb(.334)," ").concat(w.pl(.667),";}.select.active.__jsx-style-dynamic-selector,.select.__jsx-style-dynamic-selector:hover{border-color:").concat(i?x.palette.border:De,";}.select.active.icon.__jsx-style-dynamic-selector,.select.__jsx-style-dynamic-selector:hover .icon.__jsx-style-dynamic-selector{color:").concat(i?x.palette.accents_5:De,";}.value.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex:1;-ms-flex:1;flex:1;height:100%;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;line-height:1;padding:0;margin-right:1.25em;font-size:var(--select-font-size);color:").concat(i?x.palette.accents_4:x.palette.foreground,";width:calc(100% - 1.25em);}.value.__jsx-style-dynamic-selector>div,.value.__jsx-style-dynamic-selector>div:hover{border-radius:0;background-color:transparent;padding:0;margin:0;color:inherit;}.placeholder.__jsx-style-dynamic-selector{color:").concat(Ye,";}.icon.__jsx-style-dynamic-selector{position:absolute;right:").concat(x.layout.gapQuarter,";font-size:var(--select-font-size);top:50%;bottom:0;-webkit-transform:translateY(-50%) rotate(").concat(M?"180":"0","deg);-ms-transform:translateY(-50%) rotate(").concat(M?"180":"0","deg);transform:translateY(-50%) rotate(").concat(M?"180":"0","deg);pointer-events:none;-webkit-transition:-webkit-transform 200ms ease;-webkit-transition:transform 200ms ease;transition:transform 200ms ease;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:").concat(We,";}"))))});fw.defaultProps=Jre;fw.displayName="GeistSelect";var qc=Ve(fw),Qre=["value","className","children","disabled","divider","label","preventAllEvents"],Kre={disabled:!1,divider:!1,label:!1,className:"",preventAllEvents:!1},_w=function(t){var n=t.value,r=t.className,i=t.children,s=t.disabled,o=t.divider,a=t.label,l=t.preventAllEvents,c=Re(t,Qre),d=ze(),u=Ge(),h=u.SCALES,g=UD(),p=g.updateValue,m=g.value,f=g.disableAll,y=L.useMemo(function(){return s||f},[s,f]),_=L.useMemo(function(){return a||o},[a,o]);!_&&n===void 0&&Di('The props "value" is required.',"Select Option");var v=L.useMemo(function(){return m?typeof m=="string"?n===m:m.includes("".concat(n)):!1},[n,m]),x=L.useMemo(function(){return y?d.palette.accents_1:v?d.palette.accents_2:d.palette.background},[v,y,d.palette]),b=L.useMemo(function(){return y||_||v?x:d.palette.accents_1},[v,y,d.palette,_,x]),w=L.useMemo(function(){return y?d.palette.accents_4:v?d.palette.foreground:d.palette.accents_5},[v,y,d.palette]),S=function(C){l||(C.stopPropagation(),C.nativeEvent.stopImmediatePropagation(),C.preventDefault(),!(y||_)&&p&&p(n))};return E.createElement("div",ve({onClick:S},Ue(c),{className:P.dynamic([["199367556",[x,w,y?"not-allowed":"pointer",h.font(.75),h.width(1,"100%"),h.height(2.25),h.pt(0),h.pr(.667),h.pb(0),h.pl(.667),h.mt(0),h.mr(0),h.mb(0),h.ml(0),b,d.palette.accents_7,d.palette.border,h.width(1,"100%"),h.height(1,0),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(.5),h.mr(0),h.mb(.5),h.ml(0),d.palette.accents_7,d.palette.border,h.font(.875),h.width(1,"100%")]]])+" "+"option ".concat(o?"divider":""," ").concat(a?"label":""," ").concat(r)}),E.createElement(Zb,{height:h.height(2.25)},i),E.createElement(P,{id:"199367556",dynamic:[x,w,y?"not-allowed":"pointer",h.font(.75),h.width(1,"100%"),h.height(2.25),h.pt(0),h.pr(.667),h.pb(0),h.pl(.667),h.mt(0),h.mr(0),h.mb(0),h.ml(0),b,d.palette.accents_7,d.palette.border,h.width(1,"100%"),h.height(1,0),h.pt(0),h.pr(0),h.pb(0),h.pl(0),h.mt(.5),h.mr(0),h.mb(.5),h.ml(0),d.palette.accents_7,d.palette.border,h.font(.875),h.width(1,"100%")]},".option.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:100%;box-sizing:border-box;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-weight:normal;background-color:".concat(x,";color:").concat(w,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:0;cursor:").concat(y?"not-allowed":"pointer",";-webkit-transition:background 0.2s ease 0s,border-color 0.2s ease 0s;transition:background 0.2s ease 0s,border-color 0.2s ease 0s;--select-font-size:").concat(h.font(.75),";font-size:var(--select-font-size);width:").concat(h.width(1,"100%"),";height:").concat(h.height(2.25),";padding:").concat(h.pt(0)," ").concat(h.pr(.667)," ").concat(h.pb(0)," ").concat(h.pl(.667),";margin:").concat(h.mt(0)," ").concat(h.mr(0)," ").concat(h.mb(0)," ").concat(h.ml(0),";}.option.__jsx-style-dynamic-selector:hover{background-color:").concat(b,";color:").concat(d.palette.accents_7,";}.divider.__jsx-style-dynamic-selector{line-height:0;overflow:hidden;border-top:1px solid ").concat(d.palette.border,";width:").concat(h.width(1,"100%"),";height:").concat(h.height(1,0),";padding:").concat(h.pt(0)," ").concat(h.pr(0)," ").concat(h.pb(0)," ").concat(h.pl(0),";margin:").concat(h.mt(.5)," ").concat(h.mr(0)," ").concat(h.mb(.5)," ").concat(h.ml(0),";}.label.__jsx-style-dynamic-selector{color:").concat(d.palette.accents_7,";border-bottom:1px solid ").concat(d.palette.border,";text-transform:capitalize;cursor:default;font-size:").concat(h.font(.875),";width:").concat(h.width(1,"100%"),";font-weight:500;}")))};_w.defaultProps=Kre;_w.displayName="GeistSelectOption";var eie=Ve(_w);qc.Option=eie;var tie=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},s=L.useRef(!1),o=vi(0),a=Fe(o,3),l=a[1],c=a[2],d=vi(0),u=Fe(d,3),h=u[1],g=u[2],p=function(){return{startX:c.current,currentX:g.current}},m=function(v){v.stopPropagation(),v.stopImmediatePropagation(),s.current=!0,!(!t||!t.current)&&(l(t.current.getBoundingClientRect().x),r(p()))},f=function(v){s.current&&(v.type==="touchmove"?h(v.changedTouches[0].clientX):h(v.clientX),n(p()))},y=function(){s.current&&(s.current=!1,i(p()))};L.useEffect(function(){if(!(!t||!t.current))return t.current.addEventListener("mousedown",m),t.current.addEventListener("touchstart",m),window.addEventListener("mousemove",f),window.addEventListener("touchmove",f),window.addEventListener("mouseup",y),window.addEventListener("touchend",y),function(){window.removeEventListener("mousemove",f),window.removeEventListener("touchmove",f),window.removeEventListener("mouseup",y),window.removeEventListener("touchend",y),!(!t||!t.current)&&(t.current.removeEventListener("mousedown",m),t.current.removeEventListener("touchstart",m))}},[t])},nie={left:0,disabled:!1,isClick:!1},yw=E.forwardRef(function(e,t){var n=e.children,r=e.disabled,i=e.left,s=e.isClick,o=ze();return E.createElement("div",{ref:t,className:P.dynamic([["3479628597",[i,o.palette.success,o.palette.background,o.palette.accents_2,o.palette.accents_4]]])+" "+"dot ".concat(r?"disabled":""," ").concat(s?"click":"")},n,E.createElement(P,{id:"3479628597",dynamic:[i,o.palette.success,o.palette.background,o.palette.accents_2,o.palette.accents_4]},".dot.__jsx-style-dynamic-selector{position:absolute;left:".concat(i,"%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);height:calc(var(--slider-font-size) * 1.25);min-width:calc(var(--slider-font-size) * 1.25);line-height:calc(var(--slider-font-size) * 1.25);border-radius:calc(var(--slider-font-size) * 0.625);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-weight:700;font-size:calc(var(--slider-font-size) * 0.75);z-index:100;background-color:").concat(o.palette.success,";color:").concat(o.palette.background,";text-align:center;padding:0 calc(0.57 * var(--slider-font-size));}.dot.disabled.__jsx-style-dynamic-selector{cursor:not-allowed !important;background-color:").concat(o.palette.accents_2,";color:").concat(o.palette.accents_4,";}.dot.click.__jsx-style-dynamic-selector{-webkit-transition:all 200ms ease;transition:all 200ms ease;}.dot.__jsx-style-dynamic-selector:hover{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;}.dot.__jsx-style-dynamic-selector:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing;}")))});yw.defaultProps=nie;yw.displayName="GeistSliderDot";var rie=function(t,n,r){var i=n-t,s=i%r?Math.ceil:Math.floor,o=s(i/r)-1;return o>=99?[]:Zr(new Array(o)).map(function(a,l){return r*(l+1)*100/i})},iie=function(t){var n=t.step,r=t.max,i=t.min,s=ze(),o=L.useMemo(function(){return rie(i,r,n)},[i,r,n]);return E.createElement(E.Fragment,null,o.map(function(a,l){return E.createElement("span",{key:"".concat(a,"-").concat(l),style:{left:"".concat(a,"%")},className:P.dynamic([["324900419",[s.palette.background]]])})}),E.createElement(P,{id:"324900419",dynamic:[s.palette.background]},"span.__jsx-style-dynamic-selector{position:absolute;width:2px;height:100%;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:".concat(s.palette.background,";}")))},sie=function(t,n){var r={default:{bg:t.accents_8},secondary:{bg:t.accents_8},success:{bg:t.success},warning:{bg:t.warning},error:{bg:t.error}};return n?r[n]:r.default},oie=["hideValue","disabled","type","step","max","min","initialValue","value","onChange","className","showMarkers"],aie={hideValue:!1,type:"default",initialValue:0,step:1,min:0,max:100,disabled:!1,showMarkers:!1,className:""},B0=function(t){if(!t||!t.current)return 0;var n=t.current.getBoundingClientRect();return n.width||n.right-n.left},lie=function(t,n,r,i,s){if(i<0)return n;if(i>s)return t;var o=s/(t-n)*r;if(o<=0)return n;var a=Math.round(i/o)*r+n;return Number.isInteger(a)?a:Number.parseFloat(a.toFixed(1))},vw=function(t){var n=t.hideValue,r=t.disabled,i=t.type,s=t.step,o=t.max,a=t.min,l=t.initialValue,c=t.value,d=t.onChange,u=t.className,h=t.showMarkers,g=Re(t,oie),p=ze(),m=Ge(),f=m.SCALES,y=L.useState(l),_=Fe(y,2),v=_[0],x=_[1],b=vi(0),w=Fe(b,3),S=w[1],A=w[2],C=vi(0),k=Fe(C,3),T=k[1],M=k[2],D=L.useState(!1),B=Fe(D,2),I=B[0],N=B[1],V=L.useRef(null),$=L.useRef(null),Q=L.useMemo(function(){return(v-a)/(o-a)*100},[v,o,a]),se=function(pe){var ye=B0(V),Ke=(pe-a)/(o-a)*ye;T(Ke)},te=L.useCallback(function(Ye){var pe=lie(o,a,s,Ye,A.current);x(pe),d&&d(pe)},[o,a,s,A]),de=L.useMemo(function(){return sie(p.palette,i)},[p.palette,i]),Ee=de.bg,oe=function(pe){if(!r){var ye=pe.currentX-pe.startX,Ke=ye+M.current;te(Ke)}},_e=function(){N(!1),S(B0(V))},De=function(pe){if(!r){var ye=pe.currentX-pe.startX,Ke=ye+M.current,tt=Ke<0?0:Math.min(Ke,A.current);T(tt)}},We=function(pe){if(!r&&!(!V||!V.current)){N(!0),S(B0(V));var ye=pe.clientX-V.current.getBoundingClientRect().x;T(ye),te(ye)}};return tie($,oe,_e,De),L.useEffect(function(){c!==void 0&&c!==v&&x(c)},[c,v]),L.useEffect(function(){l&&se(l)},[]),E.createElement("div",ve({onClick:We,ref:V},Ue(g),{className:P.dynamic([["219401708",[r?p.palette.accents_2:Ee,r?"not-allow":"pointer",f.font(1),f.width(1,"100%"),f.height(.5),f.pt(0),f.pr(0),f.pb(0),f.pl(0),f.mt(0),f.mr(0),f.mb(0),f.ml(0)]]])+" "+"slider ".concat(u)}),E.createElement(yw,{disabled:r,ref:$,isClick:I,left:Q},n||v),h&&E.createElement(iie,{max:o,min:a,step:s}),E.createElement(P,{id:"219401708",dynamic:[r?p.palette.accents_2:Ee,r?"not-allow":"pointer",f.font(1),f.width(1,"100%"),f.height(.5),f.pt(0),f.pr(0),f.pb(0),f.pl(0),f.mt(0),f.mr(0),f.mb(0),f.ml(0)]},".slider.__jsx-style-dynamic-selector{border-radius:50px;background-color:".concat(r?p.palette.accents_2:Ee,";position:relative;cursor:").concat(r?"not-allow":"pointer",";--slider-font-size:").concat(f.font(1),";width:").concat(f.width(1,"100%"),";height:").concat(f.height(.5),";padding:").concat(f.pt(0)," ").concat(f.pr(0)," ").concat(f.pb(0)," ").concat(f.pl(0),";margin:").concat(f.mt(0)," ").concat(f.mr(0)," ").concat(f.mb(0)," ").concat(f.ml(0),";}")))};vw.defaultProps=aie;vw.displayName="GeistSlider";var cie=Ve(vw),die=function(t,n,r){var i={default:{color:n.foreground,border:n.border,bgColor:n.background},success:{color:n.success,border:n.success,bgColor:n.background},warning:{color:n.warning,border:n.warning,bgColor:n.background},error:{color:n.error,border:n.error,bgColor:n.background},secondary:{color:n.secondary,border:n.secondary,bgColor:n.background},lite:{color:n.foreground,border:n.border,bgColor:n.accents_1},dark:{color:n.background,border:n.foreground,bgColor:n.foreground}},s=["success","warning","error","secondary"],o=i[t],a=s.includes(t);return!r||!a?o:ve({},o,{color:o.bgColor,bgColor:o.color})},VD=function(){return E.createElement("svg",{viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",style:{color:"currentcolor"},className:"jsx-418323402"},E.createElement("path",{d:"M8 17.929H6c-1.105 0-2-.912-2-2.036V5.036C4 3.91 4.895 3 6 3h8c1.105 0 2 .911 2 2.036v1.866m-6 .17h8c1.105 0 2 .91 2 2.035v10.857C20 21.09 19.105 22 18 22h-8c-1.105 0-2-.911-2-2.036V9.107c0-1.124.895-2.036 2-2.036z",className:"jsx-418323402"}),E.createElement(P,{id:"418323402"},"svg.jsx-418323402{width:calc(var(--snippet-font-size) * 1.69);height:calc(var(--snippet-font-size) * 1.69);}"))};VD.displayName="GeistSnippetIcon";var uie=E.memo(VD),hie={onError:function(){return Di("Failed to copy.","use-clipboard")}},gie=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hie,n=ku("clipboard"),r=function(o,a){if(!(!o||!a)){var l=window.getSelection();if(l){o.style.whiteSpace="pre",o.textContent=a;var c=window.document.createRange();l.removeAllRanges(),c.selectNode(o),l.addRange(c);try{window.document.execCommand("copy")}catch{t.onError&&t.onError()}l.removeAllRanges(),o&&(o.textContent="")}}},i=L.useCallback(function(s){r(n,s)},[n]);return{copy:i}},pie={delay:2e3},j0=[],jC=0,U0,mie=function(){var t=Tne(),n=t.updateToasts,r=t.toastHovering,i=t.toasts,s=vi(r),o=Fe(s,3),a=o[1],l=o[2];L.useEffect(function(){return a(r)},[r]);var c=function(h,g){g<=jC||(clearTimeout(U0),jC=g,U0=window.setTimeout(function(){n(function(p){return j0.length<p.length?p:(j0=[],[])}),clearTimeout(U0)},h+350))},d=function(h){var g="toast-".concat(H3()),p=h.delay||pie.delay,m=function(_,v){n(function(x){return x.map(function(b){return b.id!==_?b:ve({},b,{willBeDestroy:!0})})}),j0.push(_),c(v,performance.now())};n(function(y){var _=ve({},h,{id:g,delay:p,cancel:function(v){function x(){return v.apply(this,arguments)}return x.toString=function(){return v.toString()},x}(function(){return m(g,p)})});return[].concat(Zr(y),[_])});var f=function y(_,v){var x=window.setTimeout(function(){if(l.current)return y(_,v),clearTimeout(x);m(_,v),clearTimeout(x)},v)};f(g,p)};return[i,d]},fie=["type","filled","children","symbol","toastText","toastType","text","copy","className"],_ie={filled:!1,symbol:"$",toastText:"Copied to clipboard!",toastType:"success",copy:"default",type:"default",className:""},yie=function(t){return t.reduce(function(n,r){return r?n?"".concat(n,`
`).concat(r):r:n},"")},xw=function(t){var n=t.type,r=t.filled,i=t.children,s=t.symbol,o=t.toastText,a=t.toastType,l=t.text,c=t.copy,d=t.className,u=Re(t,fie),h=ze(),g=Ge(),p=g.SCALES,m=gie(),f=m.copy,y=mie(),_=Fe(y,2),v=_[1],x=L.useRef(null),b=l&&Array.isArray(l),w=L.useMemo(function(){return die(n,h.palette,r)},[n,h.palette,r]),S=L.useMemo(function(){return c!=="prevent"},[c]),A=L.useMemo(function(){return b?yie(l):i?x.current?x.current.textContent:"":l},[x.current,i,l]),C=L.useMemo(function(){var T=s.trim();return T?"".concat(T," "):""},[s]),k=function(){!A||!S||(f(A),c!=="silent"&&v({text:o,type:a}))};return E.createElement("div",ve({},Ue(u),{className:P.dynamic([["1687463382",[w.color,w.bgColor,w.border,h.layout.radius,p.font(.8125),p.pt(.667),p.width(1,"initial"),p.height(1,"auto"),p.pt(.667),p.pr(2.667),p.pb(.667),p.pl(.667),p.mt(0),p.mr(0),p.mb(0),p.ml(0),w.color,C,w.bgColor,b?"flex-start":"center",h.layout.radius,b?"var(--snippet-padding-top)":0]]])+" "+"snippet ".concat(d)}),b?l.map(function(T,M){return E.createElement("pre",{key:"snippet-".concat(M,"-").concat(T),className:P.dynamic([["1687463382",[w.color,w.bgColor,w.border,h.layout.radius,p.font(.8125),p.pt(.667),p.width(1,"initial"),p.height(1,"auto"),p.pt(.667),p.pr(2.667),p.pb(.667),p.pl(.667),p.mt(0),p.mr(0),p.mb(0),p.ml(0),w.color,C,w.bgColor,b?"flex-start":"center",h.layout.radius,b?"var(--snippet-padding-top)":0]]])},T)}):E.createElement("pre",{ref:x,className:P.dynamic([["1687463382",[w.color,w.bgColor,w.border,h.layout.radius,p.font(.8125),p.pt(.667),p.width(1,"initial"),p.height(1,"auto"),p.pt(.667),p.pr(2.667),p.pb(.667),p.pl(.667),p.mt(0),p.mr(0),p.mb(0),p.ml(0),w.color,C,w.bgColor,b?"flex-start":"center",h.layout.radius,b?"var(--snippet-padding-top)":0]]])},i||l),S&&E.createElement("div",{onClick:k,className:P.dynamic([["1687463382",[w.color,w.bgColor,w.border,h.layout.radius,p.font(.8125),p.pt(.667),p.width(1,"initial"),p.height(1,"auto"),p.pt(.667),p.pr(2.667),p.pb(.667),p.pl(.667),p.mt(0),p.mr(0),p.mb(0),p.ml(0),w.color,C,w.bgColor,b?"flex-start":"center",h.layout.radius,b?"var(--snippet-padding-top)":0]]])+" copy"},E.createElement(uie,null)),E.createElement(P,{id:"1687463382",dynamic:[w.color,w.bgColor,w.border,h.layout.radius,p.font(.8125),p.pt(.667),p.width(1,"initial"),p.height(1,"auto"),p.pt(.667),p.pr(2.667),p.pb(.667),p.pl(.667),p.mt(0),p.mr(0),p.mb(0),p.ml(0),w.color,C,w.bgColor,b?"flex-start":"center",h.layout.radius,b?"var(--snippet-padding-top)":0]},".snippet.__jsx-style-dynamic-selector{position:relative;max-width:100%;color:".concat(w.color,";background-color:").concat(w.bgColor,";border:1px solid ").concat(w.border,";border-radius:").concat(h.layout.radius,";--snippet-font-size:").concat(p.font(.8125),";--snippet-padding-top:").concat(p.pt(.667),";font-size:var(--snippet-font-size);width:").concat(p.width(1,"initial"),";height:").concat(p.height(1,"auto"),";padding:").concat(p.pt(.667)," ").concat(p.pr(2.667)," ").concat(p.pb(.667)," ").concat(p.pl(.667),";margin:").concat(p.mt(0)," ").concat(p.mr(0)," ").concat(p.mb(0)," ").concat(p.ml(0),";}pre.__jsx-style-dynamic-selector{margin:0;padding:0;border:none;background-color:transparent;color:").concat(w.color,";font-size:inherit;}pre.__jsx-style-dynamic-selector::before{content:'").concat(C,"';-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}pre.__jsx-style-dynamic-selector *{margin:0;padding:0;font-size:inherit;color:inherit;}.copy.__jsx-style-dynamic-selector{position:absolute;right:0;top:0;bottom:0;height:calc(100% - 2px);background-color:").concat(w.bgColor,";display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:").concat(b?"flex-start":"center",";-webkit-box-align:").concat(b?"flex-start":"center",";-ms-flex-align:").concat(b?"flex-start":"center",";align-items:").concat(b?"flex-start":"center",";width:calc(3.281 * var(--snippet-font-size));color:inherit;-webkit-transition:opacity 0.2s ease 0s;transition:opacity 0.2s ease 0s;border-radius:").concat(h.layout.radius,";cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding-top:").concat(b?"var(--snippet-padding-top)":0,";}.copy.__jsx-style-dynamic-selector:hover{opacity:0.7;}")))};xw.defaultProps=_ie;xw.displayName="GeistSnippet";Ve(xw);var vie=["inline","className"],xie={inline:!1,className:""},bw=function(t){var n=t.inline,r=t.className,i=Re(t,vie),s=Ge(),o=s.SCALES;return E.createElement("span",ve({},Ue(i),{className:P.dynamic([["1994396435",[n?"inline-block":"block",o.width(1),o.height(1),o.pt(0),o.pr(0),o.pb(0),o.pl(0),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]]])+" "+(r||"")}),E.createElement(P,{id:"1994396435",dynamic:[n?"inline-block":"block",o.width(1),o.height(1),o.pt(0),o.pr(0),o.pb(0),o.pl(0),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]},"span.__jsx-style-dynamic-selector{display:".concat(n?"inline-block":"block",";width:").concat(o.width(1),";height:").concat(o.height(1),";padding:").concat(o.pt(0)," ").concat(o.pr(0)," ").concat(o.pb(0)," ").concat(o.pl(0),";margin:").concat(o.mt(0)," ").concat(o.mr(0)," ").concat(o.mb(0)," ").concat(o.ml(0),";}")))};bw.defaultProps=xie;bw.displayName="GeistSpacer";Ve(bw);var bie=["className"],wie={className:""},Eie=function(t){return Zr(new Array(12)).map(function(n,r){return E.createElement("span",{key:"spinner-".concat(r),className:P.dynamic([["3296107463",[t.palette.foreground,t.layout.radius]]])},E.createElement(P,{id:"3296107463",dynamic:[t.palette.foreground,t.layout.radius]},"span.__jsx-style-dynamic-selector{background-color:".concat(t.palette.foreground,";position:absolute;top:-3.9%;width:24%;height:8%;left:-10%;border-radius:").concat(t.layout.radius,";-webkit-animation:spinner-__jsx-style-dynamic-selector 1.2s linear 0s infinite normal none running;animation:spinner-__jsx-style-dynamic-selector 1.2s linear 0s infinite normal none running;}span.__jsx-style-dynamic-selector:nth-child(1){-webkit-animation-delay:-1.2s;animation-delay:-1.2s;-webkit-transform:rotate(0deg) translate(146%);-ms-transform:rotate(0deg) translate(146%);transform:rotate(0deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(2){-webkit-animation-delay:-1.1s;animation-delay:-1.1s;-webkit-transform:rotate(30deg) translate(146%);-ms-transform:rotate(30deg) translate(146%);transform:rotate(30deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(3){-webkit-animation-delay:-1s;animation-delay:-1s;-webkit-transform:rotate(60deg) translate(146%);-ms-transform:rotate(60deg) translate(146%);transform:rotate(60deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(4){-webkit-animation-delay:-0.9s;animation-delay:-0.9s;-webkit-transform:rotate(90deg) translate(146%);-ms-transform:rotate(90deg) translate(146%);transform:rotate(90deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(5){-webkit-animation-delay:-0.8s;animation-delay:-0.8s;-webkit-transform:rotate(120deg) translate(146%);-ms-transform:rotate(120deg) translate(146%);transform:rotate(120deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(6){-webkit-animation-delay:-0.7s;animation-delay:-0.7s;-webkit-transform:rotate(150deg) translate(146%);-ms-transform:rotate(150deg) translate(146%);transform:rotate(150deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(7){-webkit-animation-delay:-0.6s;animation-delay:-0.6s;-webkit-transform:rotate(180deg) translate(146%);-ms-transform:rotate(180deg) translate(146%);transform:rotate(180deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(8){-webkit-animation-delay:-0.5s;animation-delay:-0.5s;-webkit-transform:rotate(210deg) translate(146%);-ms-transform:rotate(210deg) translate(146%);transform:rotate(210deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(9){-webkit-animation-delay:-0.4s;animation-delay:-0.4s;-webkit-transform:rotate(240deg) translate(146%);-ms-transform:rotate(240deg) translate(146%);transform:rotate(240deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(10){-webkit-animation-delay:-0.3s;animation-delay:-0.3s;-webkit-transform:rotate(270deg) translate(146%);-ms-transform:rotate(270deg) translate(146%);transform:rotate(270deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(11){-webkit-animation-delay:-0.2s;animation-delay:-0.2s;-webkit-transform:rotate(300deg) translate(146%);-ms-transform:rotate(300deg) translate(146%);transform:rotate(300deg) translate(146%);}span.__jsx-style-dynamic-selector:nth-child(12){-webkit-animation-delay:-0.1s;animation-delay:-0.1s;-webkit-transform:rotate(330deg) translate(146%);-ms-transform:rotate(330deg) translate(146%);transform:rotate(330deg) translate(146%);}@-webkit-keyframes spinner-__jsx-style-dynamic-selector{0%{opacity:1;}100%{opacity:0.15;}}@keyframes spinner-__jsx-style-dynamic-selector{0%{opacity:1;}100%{opacity:0.15;}}")))})},ww=function(t){var n=t.className,r=Re(t,bie),i=ze(),s=Ge(),o=s.SCALES;return E.createElement("div",ve({},Ue(r),{className:P.dynamic([["1153799566",[o.width(1.25),o.height(1.25),o.pt(0),o.pr(0),o.pb(0),o.pl(0),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]]])+" "+"spinner ".concat(n)}),E.createElement("div",{className:P.dynamic([["1153799566",[o.width(1.25),o.height(1.25),o.pt(0),o.pr(0),o.pb(0),o.pl(0),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]]])+" container"},Eie(i)),E.createElement(P,{id:"1153799566",dynamic:[o.width(1.25),o.height(1.25),o.pt(0),o.pr(0),o.pb(0),o.pl(0),o.mt(0),o.mr(0),o.mb(0),o.ml(0)]},".spinner.__jsx-style-dynamic-selector{display:block;box-sizing:border-box;width:".concat(o.width(1.25),";height:").concat(o.height(1.25),";padding:").concat(o.pt(0)," ").concat(o.pr(0)," ").concat(o.pb(0)," ").concat(o.pl(0),";margin:").concat(o.mt(0)," ").concat(o.mr(0)," ").concat(o.mb(0)," ").concat(o.ml(0),";}.container.__jsx-style-dynamic-selector{width:100%;height:100%;position:relative;left:50%;top:50%;}")))};ww.defaultProps=wie;ww.displayName="GeistSpinner";Ve(ww);var Sie={className:""},Aie=function(t,n){var r=n.filter(function(o){return!o.width}).length,i=n.reduce(function(o,a){return a.width?o+a.width:o},0),s=(t-i)/r;return s<=0?E.createElement("colgroup",null):E.createElement("colgroup",null,n.map(function(o,a){return E.createElement("col",{key:"colgroup-".concat(a),width:o.width||s})}))},Ew=function(t){var n=ze(),r=t,i=r.columns,s=r.width,o=L.useMemo(function(){return i.find(function(l){return!!l.width})},[i]),a=L.useMemo(function(){return o?Aie(s,i):E.createElement("colgroup",null)},[o,s]);return E.createElement(E.Fragment,null,a,E.createElement("thead",{className:P.dynamic([["134865897",[n.palette.accents_5,n.palette.accents_1,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius]]])},E.createElement("tr",{className:P.dynamic([["134865897",[n.palette.accents_5,n.palette.accents_1,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius]]])},i.map(function(l,c){return E.createElement("th",{key:"table-th-".concat(l.prop,"-").concat(c),className:P.dynamic([["134865897",[n.palette.accents_5,n.palette.accents_1,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius]]])+" "+(l.className||"")},E.createElement("div",{className:P.dynamic([["134865897",[n.palette.accents_5,n.palette.accents_1,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius]]])+" thead-box"},l.label))}))),E.createElement(P,{id:"134865897",dynamic:[n.palette.accents_5,n.palette.accents_1,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius,n.palette.border,n.palette.border,n.palette.border,n.layout.radius,n.layout.radius]},"thead.__jsx-style-dynamic-selector{border-collapse:separate;border-spacing:0;font-size:inherit;}th.__jsx-style-dynamic-selector{padding:0 0.5em;font-size:calc(0.75 * var(--table-font-size));font-weight:normal;text-align:left;-webkit-letter-spacing:0;-moz-letter-spacing:0;-ms-letter-spacing:0;letter-spacing:0;vertical-align:middle;min-height:calc(2.5 * var(--table-font-size));color:".concat(n.palette.accents_5,";background:").concat(n.palette.accents_1,";border-bottom:1px solid ").concat(n.palette.border,";border-top:1px solid ").concat(n.palette.border,";border-radius:0;}th.__jsx-style-dynamic-selector:nth-child(1){border-bottom:1px solid ").concat(n.palette.border,";border-left:1px solid ").concat(n.palette.border,";border-top:1px solid ").concat(n.palette.border,";border-top-left-radius:").concat(n.layout.radius,";border-bottom-left-radius:").concat(n.layout.radius,";}th.__jsx-style-dynamic-selector:last-child{border-bottom:1px solid ").concat(n.palette.border,";border-right:1px solid ").concat(n.palette.border,";border-top:1px solid ").concat(n.palette.border,";border-top-right-radius:").concat(n.layout.radius,";border-bottom-right-radius:").concat(n.layout.radius,";}.thead-box.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-align:center;min-height:calc(2.5 * var(--table-font-size));text-transform:uppercase;}")))};Ew.defaultProps=Sie;Ew.displayName="GeistTableHead";var kie=function(t){var n=t.columns,r=t.row,i=t.rowIndex,s=t.emptyText,o=t.onCellClick;return E.createElement(E.Fragment,null,n.map(function(a,l){var c=r[a.prop],d=c||s,u=a.renderHandler(c,r,i);return E.createElement("td",{key:"row-td-".concat(l,"-").concat(a.prop),onClick:function(){return o&&o(c,i,l)},className:a.className},E.createElement("div",{className:"cell"},u||d))}))},Cie={columns:[],updateColumn:function(){}},HD=E.createContext(Cie),WD=function(){return E.useContext(HD)},Tie={className:""},Sw=function(t){var n=t.data,r=t.hover,i=t.emptyText,s=t.onRow,o=t.onCell,a=t.rowClassName,l=ze(),c=WD(),d=c.columns,u=function(g,p){s&&s(g,p)};return E.createElement("tbody",{className:P.dynamic([["1102342339",[l.palette.accents_1,l.palette.border,l.palette.accents_6]]])},n.map(function(h,g){var p=a(h,g);return E.createElement("tr",{key:"tbody-row-".concat(g),onClick:function(){return u(h,g)},className:P.dynamic([["1102342339",[l.palette.accents_1,l.palette.border,l.palette.accents_6]]])+" "+"".concat(r?"hover":""," ").concat(p)},E.createElement(kie,{columns:d,row:h,rowIndex:g,emptyText:i,onCellClick:o}))}),E.createElement(P,{id:"1102342339",dynamic:[l.palette.accents_1,l.palette.border,l.palette.accents_6]},"tr.__jsx-style-dynamic-selector{-webkit-transition:background-color 0.25s ease;transition:background-color 0.25s ease;font-size:inherit;}tr.hover.__jsx-style-dynamic-selector:hover{background-color:".concat(l.palette.accents_1,";}tr.__jsx-style-dynamic-selector td{padding:0 0.5em;border-bottom:1px solid ").concat(l.palette.border,";color:").concat(l.palette.accents_6,";font-size:calc(0.875 * var(--table-font-size));text-align:left;}tr.__jsx-style-dynamic-selector .cell{min-height:calc(3.125 * var(--table-font-size));display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;}")))};Sw.defaultProps=Tie;Sw.displayName="GeistTableBody";var Nie={className:"",render:function(){}},nf=function(t){var n=t,r=n.children,i=n.prop,s=n.label,o=n.width,a=n.className,l=n.render,c=WD(),d=c.updateColumn,u="".concat(i).trim();return u||Di('The props "prop" is required.',"Table.Column"),L.useEffect(function(){d({label:r||s,prop:u,width:o,className:a,renderHandler:l})},[r,s,i,o,a,l]),null};nf.defaultProps=Nie;nf.displayName="GeistTableColumn";var Lie=["children","data","initialData","hover","emptyText","onRow","onCell","onChange","className","rowClassName"],Iie={hover:!0,initialData:[],emptyText:"",className:"",rowClassName:function(){return""}};function rf(e){var t=e,n=t.children,r=t.data,i=t.initialData,s=t.hover,o=t.emptyText,a=t.onRow,l=t.onCell;t.onChange;var c=t.className,d=t.rowClassName,u=Re(t,Lie),h=Ge(),g=h.SCALES,p=L.useRef(null),m=_D(p),f=Fe(m,2),y=f[0].width,_=f[1],v=L.useState([]),x=Fe(v,2),b=x[0],w=x[1],S=L.useState(i),A=Fe(S,2),C=A[0],k=A[1],T=function(B){w(function(I){var N=I.find(function(V){return V.prop===B.prop});return N?I.map(function(V){return V.prop!==B.prop?V:B}):[].concat(Zr(I),[B])})},M=L.useMemo(function(){return{columns:b,updateColumn:T}},[b]);return L.useEffect(function(){typeof r>"u"||k(r)},[r]),Kb(function(){return _()}),E.createElement(HD.Provider,{value:M},E.createElement("table",ve({ref:p},Ue(u),{className:P.dynamic([["2132340556",[g.font(1),g.width(1,"100%"),g.height(1,"auto"),g.pt(0),g.pr(0),g.pb(0),g.pl(0),g.mt(0),g.mr(0),g.mb(0),g.ml(0)]]])+" "+(c||"")}),E.createElement(Ew,{columns:b,width:y}),E.createElement(Sw,{data:C,hover:s,emptyText:o,onRow:a,onCell:l,rowClassName:d}),n,E.createElement(P,{id:"2132340556",dynamic:[g.font(1),g.width(1,"100%"),g.height(1,"auto"),g.pt(0),g.pr(0),g.pb(0),g.pl(0),g.mt(0),g.mr(0),g.mb(0),g.ml(0)]},"table.__jsx-style-dynamic-selector{border-collapse:separate;border-spacing:0;--table-font-size:".concat(g.font(1),";font-size:var(--table-font-size);width:").concat(g.width(1,"100%"),";height:").concat(g.height(1,"auto"),";padding:").concat(g.pt(0)," ").concat(g.pr(0)," ").concat(g.pb(0)," ").concat(g.pl(0),";margin:").concat(g.mt(0)," ").concat(g.mr(0)," ").concat(g.mb(0)," ").concat(g.ml(0),";}"))))}rf.defaultProps=Iie;rf.displayName="GeistTable";rf.Column=nf;var Pie=Ve(rf);Pie.Column=nf;var Mie={inGroup:!1},XD=E.createContext(Mie),Fie=function(){return E.useContext(XD)},Rie=["initialValue","value","hideDivider","children","onChange","className"],Die={className:"",hideDivider:!1},Aw=function(t){var n=t.initialValue,r=t.value,i=t.hideDivider,s=t.children,o=t.onChange,a=t.className,l=Re(t,Rie),c=ze(),d=Ge(),u=d.SCALES,h=L.useState(n),g=Fe(h,2),p=g[0],m=g[1],f=L.useState([]),y=Fe(f,2),_=y[0],v=y[1],x=function(A){v(function(C){var k=C.find(function(T){return T.value===A.value});return k?C.map(function(T){return T.value!==A.value?T:ve({},T,A)}):[].concat(Zr(C),[A])})},b=L.useMemo(function(){return{register:x,currentValue:p,inGroup:!0}},[p]);L.useEffect(function(){typeof r>"u"||m(r)},[r]);var w=function(A){m(A),o&&o(A)};return E.createElement(XD.Provider,{value:b},E.createElement("div",ve({},Ue(l),{className:P.dynamic([["4088875350",[u.font(1),u.width(1,"initial"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.border]]])+" "+"tabs ".concat(a)}),E.createElement("header",{className:P.dynamic([["4088875350",[u.font(1),u.width(1,"initial"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.border]]])},E.createElement("div",{className:P.dynamic([["4088875350",[u.font(1),u.width(1,"initial"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.border]]])+" "+"scroll-container ".concat(i?"hide-divider":"")},_.map(function(S){var A=S.cell,C=S.value;return E.createElement(A,{key:C,value:p,onClick:w,className:P.dynamic([["4088875350",[u.font(1),u.width(1,"initial"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.border]]])})}))),E.createElement("div",{className:P.dynamic([["4088875350",[u.font(1),u.width(1,"initial"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.border]]])+" content"},s),E.createElement(P,{id:"4088875350",dynamic:[u.font(1),u.width(1,"initial"),u.height(1,"auto"),u.pt(0),u.pr(0),u.pb(0),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.border]},".tabs.__jsx-style-dynamic-selector{font-size:".concat(u.font(1),";width:").concat(u.width(1,"initial"),";height:").concat(u.height(1,"auto"),";padding:").concat(u.pt(0)," ").concat(u.pr(0)," ").concat(u.pb(0)," ").concat(u.pl(0),";margin:").concat(u.mt(0)," ").concat(u.mr(0)," ").concat(u.mb(0)," ").concat(u.ml(0),";}header.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-y:hidden;overflow-x:scroll;-webkit-scrollbar-width:none;-moz-scrollbar-width:none;-ms-scrollbar-width:none;scrollbar-width:none;position:relative;}.scroll-container.__jsx-style-dynamic-selector{width:100%;height:100%;-webkit-flex:1;-ms-flex:1;flex:1;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid ").concat(c.palette.border,";}header.__jsx-style-dynamic-selector::-webkit-scrollbar{display:none;}.hide-divider.__jsx-style-dynamic-selector{border-color:transparent;}.content.__jsx-style-dynamic-selector{padding-top:0.625rem;}"))))};Aw.defaultProps=Die;Aw.displayName="GeistTabs";var YD=Ve(Aw),zie={disabled:!1},kw=function(t){var n=t.children,r=t.value,i=t.label,s=t.disabled,o=ze(),a=Ge(),l=a.SCALES,c=Fie(),d=c.register,u=c.currentValue,h=L.useMemo(function(){return u===r},[u,r]),g=function(m){var f=m.value,y=m.onClick,_=function(){s||y&&y(r)};return E.createElement("div",{role:"button",key:r,onClick:_,className:P.dynamic([["1613686401",[o.palette.accents_6,l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(.334),l.pr(.218),l.pb(.334),l.pl(.218),l.mt(0),l.mr(.5334),l.mb(0),l.ml(.5334),o.palette.foreground,o.palette.foreground,o.palette.accents_3]]])+" "+"tab ".concat(r===f?"active":""," ").concat(s?"disabled":"")},i,E.createElement(P,{id:"1613686401",dynamic:[o.palette.accents_6,l.font(1),l.width(1,"auto"),l.height(1,"auto"),l.pt(.334),l.pr(.218),l.pb(.334),l.pl(.218),l.mt(0),l.mr(.5334),l.mb(0),l.ml(.5334),o.palette.foreground,o.palette.foreground,o.palette.accents_3]},".tab.__jsx-style-dynamic-selector{box-sizing:border-box;cursor:pointer;outline:0;-webkit-transition:all 200ms ease;transition:all 200ms ease;text-transform:capitalize;white-space:nowrap;color:".concat(o.palette.accents_6,";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;font-size:").concat(l.font(1),";line-height:1.25em;width:").concat(l.width(1,"auto"),";height:").concat(l.height(1,"auto"),";padding:").concat(l.pt(.334)," ").concat(l.pr(.218)," ").concat(l.pb(.334)," ").concat(l.pl(.218),";margin:").concat(l.mt(0)," ").concat(l.mr(.5334)," ").concat(l.mb(0)," ").concat(l.ml(.5334),";}.tab.__jsx-style-dynamic-selector:after{position:absolute;content:'';bottom:-1px;left:0;right:0;width:100%;height:2px;border-radius:4px;-webkit-transform:scaleX(0.75);-ms-transform:scaleX(0.75);transform:scaleX(0.75);background-color:transparent;-webkit-transition:all 200ms ease;transition:all 200ms ease;}.tab.active.__jsx-style-dynamic-selector:after{background-color:").concat(o.palette.foreground,";-webkit-transform:scaleX(1);-ms-transform:scaleX(1);transform:scaleX(1);}.tab.__jsx-style-dynamic-selector svg{max-height:1em;margin-right:5px;}.tab.__jsx-style-dynamic-selector:first-of-type{margin-left:0;}.tab.active.__jsx-style-dynamic-selector{color:").concat(o.palette.foreground,";}.tab.disabled.__jsx-style-dynamic-selector{color:").concat(o.palette.accents_3,";cursor:not-allowed;}")))};return g.displayName="GeistTabsInternalCell",L.useEffect(function(){d&&d({value:r,cell:g})},[r,i,s,g]),h?E.createElement(E.Fragment,null,n):null};kw.defaultProps=zie;kw.displayName="GeistTabsItem";var qD=Ve(kw);YD.Item=qD;YD.Tab=qD;var Oie=["type","children","className","invert"],Bie={type:"default",invert:!1,className:""},jie=function(t,n,r){var i={default:{color:n.foreground},success:{color:n.success},warning:{color:n.warning},error:{color:n.error},secondary:{color:n.secondary},dark:{color:n.foreground,bgColor:n.background},lite:{color:n.foreground,bgColor:n.accents_2}},s=r||t==="lite",o=ve({},i[t],{bgColor:i[t].bgColor||n.background,borderColor:s?"transparent":i[t].color});return r?ve({},o,{color:o.bgColor,bgColor:o.color}):o},Cw=function(t){var n=t.type,r=t.children,i=t.className,s=t.invert,o=Re(t,Oie),a=ze(),l=Ge(),c=l.SCALES,d=L.useMemo(function(){return jie(n,a.palette,s)},[n,a.palette,s]),u=d.color,h=d.bgColor,g=d.borderColor;return E.createElement("span",ve({},Ue(o),{className:P.dynamic([["3652870078",[g,h,u,c.height(.3125),c.font(.875),c.width(1,"auto"),c.height(1.75),c.pt(.375),c.pr(.375),c.pb(.375),c.pl(.375),c.mt(0),c.mr(0),c.mb(0),c.ml(0)]]])+" "+(i||"")}),r,E.createElement(P,{id:"3652870078",dynamic:[g,h,u,c.height(.3125),c.font(.875),c.width(1,"auto"),c.height(1.75),c.pt(.375),c.pr(.375),c.pb(.375),c.pl(.375),c.mt(0),c.mr(0),c.mb(0),c.ml(0)]},"span.__jsx-style-dynamic-selector{display:inline-block;border:1px solid ".concat(g,";background-color:").concat(h,";color:").concat(u,";box-sizing:border-box;line-height:1em;border-radius:").concat(c.height(.3125),";font-size:").concat(c.font(.875),";width:").concat(c.width(1,"auto"),";height:").concat(c.height(1.75),";padding:").concat(c.pt(.375)," ").concat(c.pr(.375)," ").concat(c.pb(.375)," ").concat(c.pl(.375),";margin:").concat(c.mt(0)," ").concat(c.mr(0)," ").concat(c.mb(0)," ").concat(c.ml(0),";}")))};Cw.defaultProps=Bie;Cw.displayName="GeistTag";Ve(Cw);var Uie=["children","tag","className","type"],$ie={type:"default",className:""},Gie=function(t,n){var r={default:"inherit",secondary:n.secondary,success:n.success,warning:n.warning,error:n.error};return r[t]||r.default},sf=function(t){var n=t.children,r=t.tag,i=t.className,s=t.type,o=Re(t,Uie),a=r,l=ze(),c=Ge(),d=c.SCALES,u=c.getScaleableProps,h=u("font"),g=u(["margin","marginLeft","marginRight","mx","ml","mr"]),p=u(["margin","marginTop","marginBottom","my","mt","mb"]),m=u(["padding","paddingLeft","paddingRight","pl","pr","px"]),f=u(["padding","paddingTop","paddingBottom","pt","pb","py"]),y=L.useMemo(function(){return Gie(s,l.palette)},[s,l.palette]),_=L.useMemo(function(){var v=[{value:g,className:"mx"},{value:p,className:"my"},{value:m,className:"px"},{value:f,className:"py"},{value:h,className:"font"}],x=v.reduce(function(b,w){return typeof w.value>"u"?b:"".concat(b," ").concat(w.className)},"");return"".concat(x," ").concat(i).trim()},[g,p,m,f,h,i]);return E.createElement(a,ve({},Ue(o),{className:P.dynamic([["3155699851",[r,y,d.width(1,"auto"),d.height(1,"auto"),d.font(1,"inherit"),d.ml(0,"revert"),d.mr(0,"revert"),d.mt(0,"revert"),d.mb(0,"revert"),d.pl(0,"revert"),d.pr(0,"revert"),d.pt(0,"revert"),d.pb(0,"revert")]]])+" "+(_||"")}),n,E.createElement(P,{id:"3155699851",dynamic:[r,y,d.width(1,"auto"),d.height(1,"auto"),d.font(1,"inherit"),d.ml(0,"revert"),d.mr(0,"revert"),d.mt(0,"revert"),d.mb(0,"revert"),d.pl(0,"revert"),d.pr(0,"revert"),d.pt(0,"revert"),d.pb(0,"revert")]},"".concat(r,".__jsx-style-dynamic-selector{color:").concat(y,";width:").concat(d.width(1,"auto"),";height:").concat(d.height(1,"auto"),";}.font.__jsx-style-dynamic-selector{font-size:").concat(d.font(1,"inherit"),";}.mx.__jsx-style-dynamic-selector{margin-left:").concat(d.ml(0,"revert"),";margin-right:").concat(d.mr(0,"revert"),";}.my.__jsx-style-dynamic-selector{margin-top:").concat(d.mt(0,"revert"),";margin-bottom:").concat(d.mb(0,"revert"),";}.px.__jsx-style-dynamic-selector{padding-left:").concat(d.pl(0,"revert"),";padding-right:").concat(d.pr(0,"revert"),";}.py.__jsx-style-dynamic-selector{padding-top:").concat(d.pt(0,"revert"),";padding-bottom:").concat(d.pb(0,"revert"),";}")))};sf.defaultProps=$ie;sf.displayName="GeistTextChild";var Vie=["h1","h2","h3","h4","h5","h6","p","b","small","i","span","del","em","blockquote","children","className"],Hie={h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,p:!1,b:!1,small:!1,i:!1,span:!1,del:!1,em:!1,blockquote:!1,className:"",type:"default"},Wie=function e(t,n){if(!t.length)return n;var r=t.slice(1,t.length);return E.createElement(sf,{tag:t[0]},e(r,n))},Tw=function(t){var n=t.h1,r=t.h2,i=t.h3,s=t.h4,o=t.h5,a=t.h6,l=t.p,c=t.b,d=t.small,u=t.i,h=t.span,g=t.del,p=t.em,m=t.blockquote,f=t.children,y=t.className,_=Re(t,Vie),v={h1:n,h2:r,h3:i,h4:s,h5:o,h6:a,p:l,blockquote:m},x={span:h,small:d,b:c,em:p,i:u,del:g},b=Object.keys(v).filter(function(k){return v[k]}),w=Object.keys(x).filter(function(k){return x[k]}),S=L.useMemo(function(){return b[0]?b[0]:w[0]?w[0]:"p"},[b,w]),A=w.filter(function(k){return k!==S}),C=L.useMemo(function(){return A.length?Wie(A,f):f},[A,f]);return E.createElement(sf,ve({className:y,tag:S},_),C)};Tw.defaultProps=Hie;Tw.displayName="GeistText";Ve(Tw);var Xie=function(t,n){var r={default:{bg:t.success},secondary:{bg:t.secondary},success:{bg:t.success},warning:{bg:t.warning},error:{bg:t.error}};return n?r[n]:r.default},Yie=["initialChecked","checked","disabled","onChange","type","className"],qie={type:"default",disabled:!1,initialChecked:!1,className:""},Nw=function(t){var n=t.initialChecked,r=t.checked,i=t.disabled,s=t.onChange,o=t.type,a=t.className,l=Re(t,Yie),c=ze(),d=Ge(),u=d.SCALES,h=L.useState(n),g=Fe(h,2),p=g[0],m=g[1],f=L.useCallback(function(v){if(!i){var x={target:{checked:!p},stopPropagation:v.stopPropagation,preventDefault:v.preventDefault,nativeEvent:v};m(!p),s&&s(x)}},[i,p,s]),y=L.useMemo(function(){return Xie(c.palette,o)},[c.palette,o]),_=y.bg;return L.useEffect(function(){r!==void 0&&m(r)},[r]),E.createElement("label",ve({},Ue(l),{className:P.dynamic([["4106206985",[i?"not-allowed":"pointer",u.font(1),u.height(.875),u.width(1.75),u.pt(.1875),u.pr(0),u.pb(.1875),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.accents_2,c.palette.background,c.palette.accents_2,c.palette.accents_1,c.palette.accents_2,c.palette.accents_4,c.palette.accents_4,_]]])+" "+(a||"")}),E.createElement("input",{type:"checkbox",disabled:i,checked:p,onChange:f,className:P.dynamic([["4106206985",[i?"not-allowed":"pointer",u.font(1),u.height(.875),u.width(1.75),u.pt(.1875),u.pr(0),u.pb(.1875),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.accents_2,c.palette.background,c.palette.accents_2,c.palette.accents_1,c.palette.accents_2,c.palette.accents_4,c.palette.accents_4,_]]])}),E.createElement("div",{className:P.dynamic([["4106206985",[i?"not-allowed":"pointer",u.font(1),u.height(.875),u.width(1.75),u.pt(.1875),u.pr(0),u.pb(.1875),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.accents_2,c.palette.background,c.palette.accents_2,c.palette.accents_1,c.palette.accents_2,c.palette.accents_4,c.palette.accents_4,_]]])+" "+"toggle ".concat(p?"checked":""," ").concat(i?"disabled":"")},E.createElement("span",{className:P.dynamic([["4106206985",[i?"not-allowed":"pointer",u.font(1),u.height(.875),u.width(1.75),u.pt(.1875),u.pr(0),u.pb(.1875),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.accents_2,c.palette.background,c.palette.accents_2,c.palette.accents_1,c.palette.accents_2,c.palette.accents_4,c.palette.accents_4,_]]])+" inner"})),E.createElement(P,{id:"4106206985",dynamic:[i?"not-allowed":"pointer",u.font(1),u.height(.875),u.width(1.75),u.pt(.1875),u.pr(0),u.pb(.1875),u.pl(0),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.palette.accents_2,c.palette.background,c.palette.accents_2,c.palette.accents_1,c.palette.accents_2,c.palette.accents_4,c.palette.accents_4,_]},"label.__jsx-style-dynamic-selector{-webkit-tap-highlight-color:transparent;display:inline-block;vertical-align:middle;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;cursor:".concat(i?"not-allowed":"pointer",";--toggle-font-size:").concat(u.font(1),";--toggle-height:").concat(u.height(.875),";width:").concat(u.width(1.75),";height:var(--toggle-height);padding:").concat(u.pt(.1875)," ").concat(u.pr(0)," ").concat(u.pb(.1875)," ").concat(u.pl(0),";margin:").concat(u.mt(0)," ").concat(u.mr(0)," ").concat(u.mb(0)," ").concat(u.ml(0),";}input.__jsx-style-dynamic-selector{overflow:hidden;visibility:hidden;height:0;opacity:0;width:0;position:absolute;background-color:transparent;z-index:-1;}.toggle.__jsx-style-dynamic-selector{height:var(--toggle-height);width:100%;border-radius:var(--toggle-height);-webkit-transition-delay:0.12s;transition-delay:0.12s;-webkit-transition-duration:0.2s;transition-duration:0.2s;-webkit-transition-property:background,border;transition-property:background,border;-webkit-transition-timing-function:cubic-bezier(0,0,0.2,1);transition-timing-function:cubic-bezier(0,0,0.2,1);position:relative;border:1px solid transparent;background-color:").concat(c.palette.accents_2,";padding:0;}.inner.__jsx-style-dynamic-selector{width:calc(var(--toggle-height) - 2px);height:calc(var(--toggle-height) - 2px);position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);left:1px;box-shadow:rgba(0,0,0,0.2) 0 1px 2px 0,rgba(0,0,0,0.1) 0 1px 3px 0;-webkit-transition:left 280ms cubic-bezier(0,0,0.2,1);transition:left 280ms cubic-bezier(0,0,0.2,1);border-radius:50%;background-color:").concat(c.palette.background,";}.disabled.__jsx-style-dynamic-selector{border-color:").concat(c.palette.accents_2,";background-color:").concat(c.palette.accents_1,";}.disabled.__jsx-style-dynamic-selector>.inner.__jsx-style-dynamic-selector{background-color:").concat(c.palette.accents_2,";}.disabled.checked.__jsx-style-dynamic-selector{border-color:").concat(c.palette.accents_4,";background-color:").concat(c.palette.accents_4,";}.checked.__jsx-style-dynamic-selector{background-color:").concat(_,";}.checked.__jsx-style-dynamic-selector>.inner.__jsx-style-dynamic-selector{left:calc(100% - (var(--toggle-height) - 2px));box-shadow:none;}")))};Nw.defaultProps=qie;Nw.displayName="GeistToggle";Ve(Nw);var Zie={width:22,height:22},Lw=function(t){var n=t.color,r=t.width,i=t.height,s=ze();return E.createElement("svg",{viewBox:"0 0 24 24",width:r,height:i,stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:P.dynamic([["4043754792",[n||s.palette.accents_8]]])},E.createElement("path",{d:"M13 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V9z",className:P.dynamic([["4043754792",[n||s.palette.accents_8]]])}),E.createElement("path",{d:"M13 2v7h7",className:P.dynamic([["4043754792",[n||s.palette.accents_8]]])}),E.createElement(P,{id:"4043754792",dynamic:[n||s.palette.accents_8]},"svg.__jsx-style-dynamic-selector{color:".concat(n||s.palette.accents_8,";}")))};Lw.defaultProps=Zie;Lw.displayName="GeistTreeFileIcon";var Jie={initialExpand:!1,isImperative:!1},Qie=E.createContext(Jie),ZD=function(){return E.useContext(Qie)},JD=function(t){var n=t.count;return n===0?null:E.createElement(E.Fragment,null,Zr(new Array(n)).map(function(r,i){return E.createElement("span",{key:"indent-".concat(i),className:P.dynamic([["2622387629",[i+1]]])+" indent"},E.createElement(P,{id:"2622387629",dynamic:[i+1]},"span.indent.__jsx-style-dynamic-selector{left:calc(-1.875rem * ".concat(i+1," + 0.75rem);}")))}))},Kie=function(t,n){return E.Children.toArray(t).sort(function(r,i){return!E.isValidElement(r)||!E.isValidElement(i)?0:r.type!==i.type?r.type!==n?1:-1:"".concat(r.props.name).charCodeAt(0)-"".concat(i.props.name).charCodeAt(0)})},QD=function(t,n){return n?"".concat(n,"/").concat(t):t},KD=function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation()},ese=["name","parentPath","level","extra","className"],tse={level:0,className:"",parentPath:""},Iw=function(t){var n=t.name,r=t.parentPath,i=t.level,s=t.extra,o=t.className,a=Re(t,ese),l=ze(),c=ZD(),d=c.onFileClick,u=L.useMemo(function(){return QD(n,r)},[]),h=function(p){KD(p),d&&d(u)};return E.createElement("div",ve({onClick:h},Ue(a),{className:P.dynamic([["4220802947",[i,l.palette.accents_2,l.palette.accents_8,l.palette.accents_5]]])+" "+"file ".concat(o)}),E.createElement("div",{className:P.dynamic([["4220802947",[i,l.palette.accents_2,l.palette.accents_8,l.palette.accents_5]]])+" names"},E.createElement(JD,{count:i}),E.createElement("span",{className:P.dynamic([["4220802947",[i,l.palette.accents_2,l.palette.accents_8,l.palette.accents_5]]])+" icon"},E.createElement(Lw,null)),E.createElement("span",{className:P.dynamic([["4220802947",[i,l.palette.accents_2,l.palette.accents_8,l.palette.accents_5]]])+" name"},n,s&&E.createElement("span",{className:P.dynamic([["4220802947",[i,l.palette.accents_2,l.palette.accents_8,l.palette.accents_5]]])+" extra"},s))),E.createElement(P,{id:"4220802947",dynamic:[i,l.palette.accents_2,l.palette.accents_8,l.palette.accents_5]},".file.__jsx-style-dynamic-selector{cursor:pointer;line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;margin-left:calc(1.875rem * ".concat(i,");}.names.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:1.75rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;}.names.__jsx-style-dynamic-selector>.indent{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:1px;height:100%;background-color:").concat(l.palette.accents_2,";margin-left:-1px;}.icon.__jsx-style-dynamic-selector{width:1.5rem;height:100%;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:0.5rem;}.name.__jsx-style-dynamic-selector{-webkit-transition:opacity 100ms ease 0ms;transition:opacity 100ms ease 0ms;color:").concat(l.palette.accents_8,";white-space:nowrap;font-size:0.875rem;}.extra.__jsx-style-dynamic-selector{font-size:0.75rem;-webkit-align-self:baseline;-ms-flex-item-align:baseline;align-self:baseline;padding-left:4px;color:").concat(l.palette.accents_5,";}.name.__jsx-style-dynamic-selector:hover{opacity:0.7;}")))};Iw.defaultProps=tse;Iw.displayName="GeistTreeFile";var nse={width:22,height:22},Pw=function(t){var n=t.color,r=t.width,i=t.height,s=ze();return E.createElement("svg",{viewBox:"0 0 24 24",width:r,height:i,stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:P.dynamic([["4043754792",[n||s.palette.accents_8]]])},E.createElement("path",{d:"M2.707 7.454V5.62C2.707 4.725 3.469 4 4.409 4h4.843c.451 0 .884.17 1.204.474l.49.467c.126.12.296.186.473.186h8.399c.94 0 1.55.695 1.55 1.59v.737m-18.661 0h-.354a.344.344 0 00-.353.35l.508 11.587c.015.34.31.609.668.609h17.283c.358 0 .652-.269.667-.61L22 7.805a.344.344 0 00-.353-.35h-.278m-18.662 0h18.662",className:P.dynamic([["4043754792",[n||s.palette.accents_8]]])}),E.createElement(P,{id:"4043754792",dynamic:[n||s.palette.accents_8]},"svg.__jsx-style-dynamic-selector{color:".concat(n||s.palette.accents_8,";}")))};Pw.defaultProps=nse;Pw.displayName="GeistTreeFolderIcon";var rse={width:12,height:12,active:!1},Mw=function(t){var n=t.color,r=t.width,i=t.height,s=t.active,o=ze();return E.createElement("svg",{viewBox:"0 0 24 24",width:r,height:i,stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",shapeRendering:"geometricPrecision",className:P.dynamic([["4043754792",[n||o.palette.accents_8]]])},E.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",className:P.dynamic([["4043754792",[n||o.palette.accents_8]]])}),!s&&E.createElement("path",{d:"M12 8v8",className:P.dynamic([["4043754792",[n||o.palette.accents_8]]])}),E.createElement("path",{d:"M8 12h8",className:P.dynamic([["4043754792",[n||o.palette.accents_8]]])}),E.createElement(P,{id:"4043754792",dynamic:[n||o.palette.accents_8]},"svg.__jsx-style-dynamic-selector{color:".concat(n||o.palette.accents_8,";}")))};Mw.defaultProps=rse;Mw.displayName="GeistTreeStatusIcon";var ise=["name","children","parentPath","level","extra","className"],sse={level:0,className:"",parentPath:""},ez=function e(t){var n=t.name,r=t.children,i=t.parentPath,s=t.level,o=t.extra,a=t.className,l=Re(t,ise),c=ze(),d=ZD(),u=d.initialExpand,h=d.isImperative,g=L.useState(u),p=Fe(g,2),m=p[0],f=p[1];L.useEffect(function(){return f(u)},[]);var y=L.useMemo(function(){return QD(n,i)},[]),_=function(){return f(!m)},v=mK(r,{parentPath:y,level:s+1},[e,Iw]),x=h?v:Kie(v,e);return E.createElement("div",ve({onClick:_},Ue(l),{className:P.dynamic([["1983983326",[s,c.palette.accents_2,c.palette.background,c.palette.accents_8,c.palette.accents_5]]])+" "+"folder ".concat(a)}),E.createElement("div",{className:P.dynamic([["1983983326",[s,c.palette.accents_2,c.palette.background,c.palette.accents_8,c.palette.accents_5]]])+" names"},E.createElement(JD,{count:s}),E.createElement("span",{className:P.dynamic([["1983983326",[s,c.palette.accents_2,c.palette.background,c.palette.accents_8,c.palette.accents_5]]])+" status"},E.createElement(Mw,{active:m})),E.createElement("span",{className:P.dynamic([["1983983326",[s,c.palette.accents_2,c.palette.background,c.palette.accents_8,c.palette.accents_5]]])+" icon"},E.createElement(Pw,null)),E.createElement("span",{className:P.dynamic([["1983983326",[s,c.palette.accents_2,c.palette.background,c.palette.accents_8,c.palette.accents_5]]])+" name"},n,o&&E.createElement("span",{className:P.dynamic([["1983983326",[s,c.palette.accents_2,c.palette.background,c.palette.accents_8,c.palette.accents_5]]])+" extra"},o))),E.createElement(Jm,{isExpanded:m},E.createElement("div",{onClick:KD,className:P.dynamic([["1983983326",[s,c.palette.accents_2,c.palette.background,c.palette.accents_8,c.palette.accents_5]]])+" content"},x)),E.createElement(P,{id:"1983983326",dynamic:[s,c.palette.accents_2,c.palette.background,c.palette.accents_8,c.palette.accents_5]},".folder.__jsx-style-dynamic-selector{cursor:pointer;line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.names.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:1.75rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:calc(1.875rem * ".concat(s,");position:relative;}.names.__jsx-style-dynamic-selector>.indent{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:1px;height:100%;background-color:").concat(c.palette.accents_2,";margin-left:-1px;}.status.__jsx-style-dynamic-selector{position:absolute;left:calc(-1.125rem);top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);width:0.875rem;height:0.875rem;z-index:10;background-color:").concat(c.palette.background,";}.icon.__jsx-style-dynamic-selector{width:1.5rem;height:100%;margin-right:0.5rem;}.status.__jsx-style-dynamic-selector,.icon.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}.name.__jsx-style-dynamic-selector{-webkit-transition:opacity 100ms ease 0ms;transition:opacity 100ms ease 0ms;color:").concat(c.palette.accents_8,";white-space:nowrap;font-size:0.875rem;}.extra.__jsx-style-dynamic-selector{font-size:0.75rem;-webkit-align-self:baseline;-ms-flex-item-align:baseline;align-self:baseline;padding-left:4px;color:").concat(c.palette.accents_5,";}.name.__jsx-style-dynamic-selector:hover{opacity:0.7;}.content.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:auto;}")))};ez.defaultProps=sse;ez.displayName="GeistTreeFolder";var ose=dr("directory","file");ose[0];var ase=["src","text","name","children","className","altText"],lse={className:""},Fw=function(t){var n=t.src,r=t.text,i=t.name,s=t.children,o=t.className,a=t.altText,l=Re(t,ase),c=ze(),d=Ge(),u=d.SCALES,h=d.getScaleableProps,g=h("scale");return E.createElement("div",ve({},Ue(l),{className:P.dynamic([["3188576998",[u.font(1),u.width(1,"max-content"),u.height(1,"auto"),u.pt(0),u.pr(.5),u.pb(0),u.pl(.5),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.layout.gapHalf,c.palette.accents_8,c.palette.accents_6]]])+" "+"user ".concat(o)}),E.createElement(tD,{src:n,scale:g,text:r,alt:a}),E.createElement("div",{className:P.dynamic([["3188576998",[u.font(1),u.width(1,"max-content"),u.height(1,"auto"),u.pt(0),u.pr(.5),u.pb(0),u.pl(.5),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.layout.gapHalf,c.palette.accents_8,c.palette.accents_6]]])+" names"},E.createElement("span",{className:P.dynamic([["3188576998",[u.font(1),u.width(1,"max-content"),u.height(1,"auto"),u.pt(0),u.pr(.5),u.pb(0),u.pl(.5),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.layout.gapHalf,c.palette.accents_8,c.palette.accents_6]]])+" name"},i),E.createElement("span",{className:P.dynamic([["3188576998",[u.font(1),u.width(1,"max-content"),u.height(1,"auto"),u.pt(0),u.pr(.5),u.pb(0),u.pl(.5),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.layout.gapHalf,c.palette.accents_8,c.palette.accents_6]]])+" social"},s)),E.createElement(P,{id:"3188576998",dynamic:[u.font(1),u.width(1,"max-content"),u.height(1,"auto"),u.pt(0),u.pr(.5),u.pb(0),u.pl(.5),u.mt(0),u.mr(0),u.mb(0),u.ml(0),c.layout.gapHalf,c.palette.accents_8,c.palette.accents_6]},".user.__jsx-style-dynamic-selector{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;--user-font-size:".concat(u.font(1),";font-size:var(--user-font-size);width:").concat(u.width(1,"max-content"),";height:").concat(u.height(1,"auto"),";padding:").concat(u.pt(0)," ").concat(u.pr(.5)," ").concat(u.pb(0)," ").concat(u.pl(.5),";margin:").concat(u.mt(0)," ").concat(u.mr(0)," ").concat(u.mb(0)," ").concat(u.ml(0),";}.names.__jsx-style-dynamic-selector{font-size:inherit;margin-left:").concat(c.layout.gapHalf,";display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;white-space:nowrap;}.name.__jsx-style-dynamic-selector{font-size:calc(0.89 * var(--user-font-size));color:").concat(c.palette.accents_8,";line-height:1.1em;text-transform:capitalize;font-weight:500;max-width:15rem;text-overflow:ellipsis;overflow:hidden;}.social.__jsx-style-dynamic-selector{font-size:calc(0.75 * var(--user-font-size));color:").concat(c.palette.accents_6,";}.social.__jsx-style-dynamic-selector *:first-child{margin-top:0;}.social.__jsx-style-dynamic-selector *:last-child{margin-bottom:0;}")))};Fw.defaultProps=lse;Fw.displayName="GeistUser";var cse=Ve(Fw),dse=["href","className","children"],use={className:""},Rw=E.forwardRef(function(e,t){var n=e.href,r=e.className,i=e.children,s=Re(e,dse);return E.createElement("div",ve({},Ue(s),{className:"jsx-3263947648 "+(r||"")}),E.createElement(h1,{ref:t,href:n,color:!0,target:"_blank",rel:"noopener"},i),E.createElement(P,{id:"3263947648"},"div.jsx-3263947648 a:hover{opacity:0.7;}"))});Rw.defaultProps=use;Rw.displayName="GeistUserLink";cse.Link=Rw;dr("xs","sm","md","lg","xl","mobile");dr("up","down","default");var hse=function(t){var n=t.children,r=ze();return E.createElement(E.Fragment,null,n,E.createElement(P,{id:"2379574914",dynamic:[r.palette.background,r.palette.foreground,r.palette.background,r.font.sans,r.font.sans,r.palette.link,r.expressiveness.linkStyle,r.expressiveness.linkHoverStyle,r.layout.gapHalf,r.layout.gapHalf,r.layout.gapHalf,r.layout.gap,r.palette.foreground,r.palette.accents_4,r.palette.code,r.font.mono,r.layout.gap,r.layout.gap,r.layout.gap,r.palette.accents_2,r.layout.radius,r.font.mono,r.palette.foreground,r.palette.accents_2,r.palette.accents_1,r.layout.gap,r.layout.gap,r.palette.accents_5,r.palette.accents_1,r.layout.radius,r.palette.border,r.palette.selection,r.palette.foreground]},"html,body{background-color:".concat(r.palette.background,";color:").concat(r.palette.foreground,";}html{font-size:16px;--geist-icons-background:").concat(r.palette.background,";}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.5;margin:0;padding:0;min-height:100%;position:relative;overflow-x:hidden;font-family:").concat(r.font.sans,";}#__next{overflow-x:hidden;}*,*:before,*:after{box-sizing:inherit;text-rendering:geometricPrecision;-webkit-tap-highlight-color:transparent;}p,small{font-weight:400;color:inherit;-webkit-letter-spacing:-0.005625em;-moz-letter-spacing:-0.005625em;-ms-letter-spacing:-0.005625em;letter-spacing:-0.005625em;font-family:").concat(r.font.sans,";}p{margin:1em 0;font-size:1em;line-height:1.625em;}small{margin:0;line-height:1.5;font-size:0.875em;}b{font-weight:600;}span{font-size:inherit;color:inherit;font-weight:inherit;}img{max-width:100%;}a{cursor:pointer;font-size:inherit;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-box-align:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:").concat(r.palette.link,";-webkit-text-decoration:").concat(r.expressiveness.linkStyle,";text-decoration:").concat(r.expressiveness.linkStyle,";}a:hover{-webkit-text-decoration:").concat(r.expressiveness.linkHoverStyle,";text-decoration:").concat(r.expressiveness.linkHoverStyle,";}ul,ol{padding:0;list-style-type:none;margin:").concat(r.layout.gapHalf," ").concat(r.layout.gapHalf," ").concat(r.layout.gapHalf," ").concat(r.layout.gap,";color:").concat(r.palette.foreground,";}ol{list-style-type:decimal;}li{margin-bottom:0.625em;font-size:1em;line-height:1.625em;}ul li:before{content:'–';display:inline-block;color:").concat(r.palette.accents_4,";position:absolute;margin-left:-0.9375em;}h1,h2,h3,h4,h5,h6{color:inherit;margin:0 0 0.7rem 0;}h1{font-size:3rem;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;line-height:1.5;font-weight:700;}h2{font-size:2.25rem;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;}h3{font-size:1.5rem;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;}h4{font-size:1.25rem;-webkit-letter-spacing:-0.02em;-moz-letter-spacing:-0.02em;-ms-letter-spacing:-0.02em;letter-spacing:-0.02em;font-weight:600;}h5{font-size:1rem;-webkit-letter-spacing:-0.01em;-moz-letter-spacing:-0.01em;-ms-letter-spacing:-0.01em;letter-spacing:-0.01em;font-weight:600;}h6{font-size:0.875rem;-webkit-letter-spacing:-0.005em;-moz-letter-spacing:-0.005em;-ms-letter-spacing:-0.005em;letter-spacing:-0.005em;font-weight:600;}button,input,select,textarea{font-family:inherit;font-size:inherit;line-height:inherit;color:inherit;margin:0;}button:focus,input:focus,select:focus,textarea:focus{outline:none;}code{color:").concat(r.palette.code,";font-family:").concat(r.font.mono,";font-size:0.9em;white-space:pre-wrap;}code:before,code:after{content:'\\`';}pre{padding:calc(").concat(r.layout.gap," * 0.75) ").concat(r.layout.gap,";margin:").concat(r.layout.gap," 0;border:1px solid ").concat(r.palette.accents_2,";border-radius:").concat(r.layout.radius,";font-family:").concat(r.font.mono,";white-space:pre;overflow:auto;line-height:1.5;text-align:left;font-size:13px;-webkit-overflow-scrolling:touch;}pre code{color:").concat(r.palette.foreground,";font-size:0.8125rem;line-height:1.25em;white-space:pre;}pre code:before,pre code:after{display:none;}pre p{margin:0;}pre::-webkit-scrollbar{display:none;width:0;height:0;background:transparent;}hr{border-color:").concat(r.palette.accents_2,";}details{background-color:").concat(r.palette.accents_1,";border:none;}details:focus,details:hover,details:active{outline:none;}summary{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;list-style:none;outline:none;}summary::marker,summary::before{display:none;}summary::-moz-list-bullet{font-size:0;}summary:focus,summary:hover,summary:active{outline:none;list-style:none;}blockquote{padding:calc(0.667 * ").concat(r.layout.gap,") ").concat(r.layout.gap,";color:").concat(r.palette.accents_5,";background-color:").concat(r.palette.accents_1,";border-radius:").concat(r.layout.radius,";margin:1.5em 0;border:1px solid ").concat(r.palette.border,";}blockquote *:first-child{margin-top:0;}blockquote *:last-child{margin-bottom:0;}::selection{background-color:").concat(r.palette.selection,";color:").concat(r.palette.foreground,";}")))},gse=E.memo(hse);gse.flush=R3;const pse=()=>at.jsx("svg",{width:"1.5em",height:"1.5em",strokeWidth:"1.5",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"currentColor",fr:"",children:at.jsx("path",{d:"M6 12h12",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})}),mse=()=>at.jsx("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:at.jsx("path",{d:"M 9 12 h 12 m 2 0 l -3 -3 m 3 3 l -3 3 m -10 -6 l -3 3 m 0 0 l 3 3",transform:"translate(-3,0)",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),fse=()=>at.jsx("svg",{width:"1.5em",height:"1.5em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",color:"#000000",children:at.jsx("path",{d:"M9 12h13m0 0l-3-3m3 3l-3 3",transform:"translate(-3 0)",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),_se=MQ.map(e=>({value:e,label:e})),yse=vv.map(e=>({value:`${e}`,label:e})),$0=({color:e,setColor:t,hasTransparent:n})=>{const[r,i]=L.useState(O0);L.useEffect(()=>{i(n?["none",...O0.slice(0,-1)]:[...O0])},[n]);const[s,o]=L.useState(e);return at.jsx("span",{className:"colorpicker",children:r.map(a=>at.jsx("div",{className:a===s?"selected":"",style:{width:12,height:12,borderRadius:10,backgroundColor:a==="none"?"#fff":a,margin:5,cursor:"pointer"},onClick:()=>{o(a),t&&t(a)}},a))})},vse=()=>{const{editor:e}=I3(),t=cr();function n(i){const s=t.getOptions();t.setOptions({cursor:{default:"crosshair"}}),t.events.once("mousedown",o=>{const{x:a,y:l}=t.view.screenToGraphCoordinates(o),c=i==="arrow"?h3(a,l,a,l,{...T3}):A3(a,l,0,0,"...",{...N3});setTimeout(()=>{Nr(c)&&e.startArrow(a,l,c),Ai(c)&&e.startText(a,l,c)},50),e.once("add",()=>{t.setOptions(s)})})}function r(){const i=document.createElement("a");i.href=URL.createObjectURL(new Blob([JSON.stringify(e.getAnnotations())],{type:"text/plain"})),i.download="annotations.json",i.click()}return at.jsxs(at.Fragment,{children:[at.jsx(ca,{placeholder:"",onClick:()=>n("arrow"),children:"Add arrow"}),at.jsx(ca,{placeholder:"",onClick:()=>n("text"),children:"Add text"}),at.jsx(ca,{onClick:()=>r(),placeholder:"",children:"Save"})]})},xse=({minThickness:e,maxThickness:t})=>{var m;const{currentAnnotation:n,arrowStyle:r,setArrowStyle:i,textStyle:s,setTextStyle:o}=I3();function a(f){const y={head:"none",tail:"none"};f==="one"&&(y.head="arrow"),f==="both"&&(y.head="arrow",y.tail="arrow"),i({...r,...y})}function l(f){const y=TC(NC(f,0,100),e,t);i({...r,strokeWidth:y})}function c(f){i({...r,strokeColor:f})}function d(f){o({...s,font:f})}function u(f){o({...s,fontSize:parseFloat(f)})}function h(f){o({...s,background:f})}function g(f){o({...s,color:f})}function p(f){f.preventDefault(),f.stopPropagation()}return at.jsx(dQ,{children:at.jsxs("div",{className:"ui",children:[!n&&at.jsx("span",{className:"add-buttons",children:at.jsx(vse,{})}),at.jsxs("div",{className:"tweakpanel",onMouseDown:p,onClick:p,children:[n&&Nr(n)&&at.jsxs("span",{className:"rows",children:[at.jsx("span",{children:"Shape"}),at.jsxs(Uee,{children:[at.jsx(ca,{placeholder:void 0,onClick:()=>a("none"),icon:at.jsx(pse,{})}),at.jsx(ca,{placeholder:void 0,onClick:()=>a("one"),icon:at.jsx(fse,{})}),at.jsx(ca,{placeholder:void 0,onClick:()=>a("both"),icon:at.jsx(mse,{})})]}),at.jsx("span",{children:"Color"}),at.jsx($0,{color:r.strokeColor,setColor:f=>c(f)}),at.jsx("span",{children:"Thickness"}),at.jsx(cie,{min:0,max:100,onChange:f=>l(f),initialValue:Math.floor(TC(NC(r.strokeWidth||0,e,t),0,100))})]}),n&&Ai(n)&&at.jsxs("span",{className:"rows",children:[at.jsx("span",{children:"Font"}),at.jsx(qc,{onChange:f=>d(f),initialValue:s.font,children:_se.map(f=>at.jsx(qc.Option,{value:f.value,children:f.label},f.value))}),at.jsx("span",{children:"Size"}),at.jsx(qc,{onChange:f=>u(f),initialValue:(m=s.fontSize)==null?void 0:m.toString(),children:yse.map(f=>at.jsx(qc.Option,{value:f.value,children:f.label},f.value))}),at.jsx("span",{children:"Color"}),at.jsx($0,{color:s.color,setColor:f=>g(f)}),at.jsx("span",{children:"Background"}),at.jsx($0,{hasTransparent:!0,color:s.background,setColor:f=>h(f)})]})]})]})})};function bse(){const[e]=L.useState({nodes:[{id:0,attributes:{x:0,y:0}},{id:1,attributes:{x:100,y:100}}],edges:[]});return at.jsx("div",{className:"App",children:at.jsx(HJ,{graph:e,children:at.jsx(zQ,{children:at.jsx(xse,{minThickness:1,maxThickness:10})})})})}G0.createRoot(document.getElementById("root")).render(at.jsx(bse,{}))});export default wse();
