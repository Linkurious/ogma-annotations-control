<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,300;0,400;0,500;1,400;1,500;1,700&display=swap"
      rel="stylesheet"
    />
    <title>Comment Box Web Component Demo</title>
    <style>
      body {
        margin: 0;
        padding: 20px;
        font-family: "IBM Plex Sans", sans-serif;
        background-color: #f8f9fa;
        color: #333;
      }

      .demo-container {
        max-width: 800px;
        margin: 0 auto;
      }

      .demo-section {
        margin-bottom: 40px;
        padding: 20px;
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      h1,
      h2 {
        margin-top: 0;
        color: #333;
      }

      .code-block {
        background: #f8f9fa;
        padding: 16px;
        border-radius: 6px;
        border-left: 4px solid #007bff;
        margin: 16px 0;
        overflow-x: auto;
      }

      code {
        font-family: "Courier New", monospace;
        font-size: 14px;
      }

      .event-log {
        background: #f8f9fa;
        padding: 16px;
        border-radius: 6px;
        margin-top: 16px;
        min-height: 100px;
        max-height: 200px;
        overflow-y: auto;
        border: 1px solid #e9ecef;
      }

      .event-item {
        padding: 4px 0;
        font-family: monospace;
        font-size: 12px;
        color: #666;
        border-bottom: 1px solid #eee;
      }

      .event-item:last-child {
        border-bottom: none;
      }

      .controls {
        margin-top: 16px;
      }

      button {
        background: #007bff;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        margin-right: 8px;
        font-family: "IBM Plex Sans", sans-serif;
      }

      button:hover {
        background: #0056b3;
      }
    </style>
  </head>
  <body>
    <div class="demo-container">
      <h1>Comment Box Web Component Demo</h1>

      <div class="demo-section">
        <h2>Basic Usage</h2>
        <p>
          Simply add the <code>&lt;comment-box&gt;</code> element to your HTML:
        </p>
        <div class="code-block">
          <code>&lt;comment-box&gt;&lt;/comment-box&gt;</code>
        </div>
        <comment-box id="basic-demo"></comment-box>
      </div>

      <div class="demo-section">
        <h2>With Custom Attributes</h2>
        <p>You can customize the placeholder text and max height:</p>
        <div class="code-block">
          <code
            >&lt;comment-box placeholder="What's on your mind?"
            max-height="200"&gt;&lt;/comment-box&gt;</code
          >
        </div>
        <comment-box
          id="custom-demo"
          placeholder="What's on your mind?"
          max-height="200"
        >
        </comment-box>
      </div>

      <div class="demo-section">
        <h2>Event Handling</h2>
        <p>
          The component dispatches custom events when comments are sent or
          added:
        </p>
        <div class="code-block">
          <code>
            // Listen for comment events<br />
            commentBox.addEventListener('comment-send', (e) => {<br />
            &nbsp;&nbsp;console.log('Comment sent:', e.detail.text);<br />
            });<br /><br />
            commentBox.addEventListener('comment-added', (e) => {<br />
            &nbsp;&nbsp;console.log('Comment added:', e.detail.comment);<br />
            });
          </code>
        </div>
        <comment-box id="event-demo"></comment-box>
        <div class="event-log" id="event-log">
          <div style="color: #999; font-style: italic">
            Events will appear here...
          </div>
        </div>
      </div>

      <div class="demo-section">
        <h2>Programmatic Control</h2>
        <p>
          You can control the component programmatically using its API methods:
        </p>
        <div class="code-block">
          <code>
            // Get all comments<br />
            const comments = commentBox.getComments();<br /><br />
            // Set comments from external data<br />
            commentBox.setComments([...]);<br /><br />
            // Clear all comments<br />
            commentBox.clearComments();
          </code>
        </div>
        <comment-box id="api-demo"></comment-box>
        <div class="controls">
          <button onclick="clearComments()">Clear Comments</button>
          <button onclick="addSampleComments()">Add Sample Comments</button>
          <button onclick="getCommentsCount()">Get Comments Count</button>
        </div>
      </div>
    </div>

    <script type="module" src="./comment-box-component.js"></script>
    <script>
      // Event handling demo
      const eventDemo = document.getElementById("event-demo");
      const eventLog = document.getElementById("event-log");

      function logEvent(message) {
        const eventItem = document.createElement("div");
        eventItem.className = "event-item";
        eventItem.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
        eventLog.insertBefore(eventItem, eventLog.firstChild);

        // Keep only last 10 events
        while (eventLog.children.length > 10) {
          eventLog.removeChild(eventLog.lastChild);
        }
      }

      eventDemo.addEventListener("comment-send", (e) => {
        logEvent(`comment-send: "${e.detail.text}"`);
      });

      eventDemo.addEventListener("comment-added", (e) => {
        logEvent(`comment-added: ID ${e.detail.comment.id}`);
      });

      // API demo functions
      const apiDemo = document.getElementById("api-demo");

      function clearComments() {
        apiDemo.clearComments();
        alert("Comments cleared!");
      }

      function addSampleComments() {
        const sampleComments = [
          {
            id: Date.now() + 1,
            text: "This is a sample comment!",
            timestamp: new Date(Date.now() - 60000)
          },
          {
            id: Date.now() + 2,
            text: "Here's another comment with some longer text to show how it wraps nicely in the interface.",
            timestamp: new Date(Date.now() - 120000)
          },
          {
            id: Date.now() + 3,
            text: "A third comment for good measure! ðŸŽ‰",
            timestamp: new Date(Date.now() - 180000)
          }
        ];
        apiDemo.setComments(sampleComments);
        alert("Sample comments added!");
      }

      function getCommentsCount() {
        const comments = apiDemo.getComments();
        alert(`Current comments count: ${comments.length}`);
      }

      // Clear event log initially
      eventLog.innerHTML =
        '<div style="color: #999; font-style: italic;">Events will appear here...</div>';
    </script>
  </body>
</html>
